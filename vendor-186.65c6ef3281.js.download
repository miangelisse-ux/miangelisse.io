(window.webpackChunkweb=window.webpackChunkweb||[]).push([["3994"],{913529:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(921040),s=i(986421),n=i(290325),l=i(408007),o=i(863164),a=i(289308),h=i(52518),u=i(388855),d=i(669153),c=i(425),m=i(47324);class p extends m.EventEmitter{constructor(e,t=!1){super(),this._hasDeclaration=!1,this._docTypeName="",this._hasDocumentElement=!1,this._currentElementSerialized=!1,this._openTags=[],this._ended=!1,this._fragment=t,this._options=s.applyDefaults(e||{},r.DefaultXMLBuilderCBOptions),this._builderOptions={defaultNamespace:this._options.defaultNamespace,namespaceAlias:this._options.namespaceAlias},this._writer="xml"===this._options.format?new d.XMLCBWriter(this._options):new c.JSONCBWriter(this._options),void 0!==this._options.data&&this.on("data",this._options.data),void 0!==this._options.end&&this.on("end",this._options.end),void 0!==this._options.error&&this.on("error",this._options.error),this._prefixMap=new a.NamespacePrefixMap,this._prefixMap.set("xml",o.namespace.XML),this._prefixIndex={value:1}}ele(e,t,i){if(s.isObject(e)||s.isString(e)&&(/^\s*</.test(e)||/^\s*[\{\[]/.test(e))){let t=n.fragment().set(this._options);try{t.ele(e)}catch(e){return this.emit("error",e),this}for(let e of t.node.childNodes)this._fromNode(e);return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&0===this._writer.level)return this.emit("error",Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=n.fragment(this._builderOptions).ele(e,t,i)}catch(e){return this.emit("error",e),this}return this._fragment||this._hasDocumentElement||""===this._docTypeName||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0)):this.emit("error",Error("Document element name does not match DocType declaration name.")),this}att(e,t,i){if(void 0===this._currentElement)return this.emit("error",Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(e,t,i)}catch(e){this.emit("error",e)}return this}com(e){let t;this._serializeOpenTag(!0);try{t=n.fragment(this._builderOptions).com(e).first().node}catch(e){return this.emit("error",e),this}return this._options.wellFormed&&(!l.xml_isLegalChar(t.data)||-1!==t.data.indexOf("--")||t.data.endsWith("-"))?this.emit("error",Error("Comment data contains invalid characters (well-formed required).")):this._push(this._writer.comment(t.data)),this}txt(e){let t;if(!this._fragment&&void 0===this._currentElement)return this.emit("error",Error("Cannot insert a text node as child of a document node.")),this;this._serializeOpenTag(!0);try{t=n.fragment(this._builderOptions).txt(e).first().node}catch(e){return this.emit("error",e),this}if(this._options.wellFormed&&!l.xml_isLegalChar(t.data))return this.emit("error",Error("Text data contains invalid characters (well-formed required).")),this;let i="";if(this._options.noDoubleEncoding)i=t.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;");else for(let e=0;e<t.data.length;e++){let r=t.data[e];"&"===r?i+="&amp;":"<"===r?i+="&lt;":">"===r?i+="&gt;":i+=r}return this._push(this._writer.text(i)),this}ins(e,t=""){let i;this._serializeOpenTag(!0);try{i=n.fragment(this._builderOptions).ins(e,t).first().node}catch(e){return this.emit("error",e),this}return this._options.wellFormed&&(-1!==i.target.indexOf(":")||/^xml$/i.test(i.target))?this.emit("error",Error("Processing instruction target contains invalid characters (well-formed required).")):this._options.wellFormed&&!l.xml_isLegalChar(i.data)?this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")):this._push(this._writer.instruction(i.target,i.data)),this}dat(e){let t;this._serializeOpenTag(!0);try{t=n.fragment(this._builderOptions).dat(e).first().node}catch(e){return this.emit("error",e),this}return this._push(this._writer.cdata(t.data)),this}dec(e={version:"1.0"}){return this._fragment?this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")):this._hasDeclaration?this.emit("error",Error("XML declaration is already inserted.")):(this._push(this._writer.declaration(e.version||"1.0",e.encoding,e.standalone)),this._hasDeclaration=!0),this}dtd(e){let t;if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(""!==this._docTypeName)return this.emit("error",Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",Error("Cannot insert DocType declaration after document element.")),this;try{t=n.create().dtd(e).first().node}catch(e){return this.emit("error",e),this}return this._options.wellFormed&&!l.xml_isPubidChar(t.publicId)?this.emit("error",Error("DocType public identifier does not match PubidChar construct (well-formed required).")):this._options.wellFormed&&(!l.xml_isLegalChar(t.systemId)||-1!==t.systemId.indexOf('"')&&-1!==t.systemId.indexOf("'"))?this.emit("error",Error("DocType system identifier contains invalid characters (well-formed required).")):(this._docTypeName=e.name,this._push(this._writer.docType(e.name,t.publicId,t.systemId))),this}up(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this}end(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this}_serializeOpenTag(e){if(this._currentElementSerialized||void 0===this._currentElement)return;let t=this._currentElement.node;if(this._options.wellFormed&&(-1!==t.localName.indexOf(":")||!l.xml_isName(t.localName)))return void this.emit("error",Error("Node local name contains invalid characters (well-formed required)."));let i="",r=!1,s=this._prefixMap.copy(),n={},a=this._recordNamespaceInformation(t,s,n),h=0===this._openTags.length?null:this._openTags[this._openTags.length-1][1],u=t.namespaceURI;if(null===u&&(u=h),h===u)null!==a&&(r=!0),i=u===o.namespace.XML?"xml:"+t.localName:t.localName,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i));else{let e=t.prefix,l=null;if((null!==e||u!==a)&&(l=s.get(e,u)),"xmlns"===e){if(this._options.wellFormed)return void this.emit("error",Error("An element cannot have the 'xmlns' prefix (well-formed required)."));l=e}null!==l?(i=l+":"+t.localName,null!==a&&a!==o.namespace.XML&&(h=a||null),this._writer.beginElement(i),this._push(this._writer.openTagBegin(i))):null!==e?(e in n&&(e=this._generatePrefix(u,s,this._prefixIndex)),s.set(e,u),i+=e+":"+t.localName,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)),this._push(this._writer.attribute("xmlns:"+e,this._serializeAttributeValue(u,this._options.wellFormed))),null!==a&&(h=a||null)):null===a||null!==a&&a!==u?(r=!0,i+=t.localName,h=u,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(u,this._options.wellFormed)))):(i+=t.localName,h=u,this._writer.beginElement(i),this._push(this._writer.openTagBegin(i)))}this._serializeAttributes(t,s,this._prefixIndex,n,r,this._options.wellFormed);let d=u===o.namespace.HTML;d&&!e&&p._VoidElementNames.has(t.localName)?(this._push(this._writer.openTagEnd(i,!0,!0)),this._writer.endElement(i)):d||e?this._push(this._writer.openTagEnd(i,!1,!1)):(this._push(this._writer.openTagEnd(i,!0,!1)),this._writer.endElement(i)),this._currentElementSerialized=!0,this._openTags.push([i,h,this._prefixMap,e]),this._isPrefixMapModified(this._prefixMap,s)&&(this._prefixMap=s),this._writer.level++}_serializeCloseTag(){this._writer.level--;let e=this._openTags.pop();if(void 0===e)return void this.emit("error",Error("Last element is undefined."));let[t,i,r,s]=e;this._prefixMap=r,s&&(this._push(this._writer.closeTag(t)),this._writer.endElement(t))}_push(e){null===e?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",Error("Cannot push to ended stream.")):0!==e.length&&(this._writer.hasData=!0,this.emit("data",e,this._writer.level))}_fromNode(e){if(u.Guard.isElementNode(e)){let t=e.prefix?e.prefix+":"+e.localName:e.localName;for(let i of(null!==e.namespaceURI?this.ele(e.namespaceURI,t):this.ele(t),e.attributes)){let e=i.prefix?i.prefix+":"+i.localName:i.localName;null!==i.namespaceURI?this.att(i.namespaceURI,e,i.value):this.att(e,i.value)}for(let t of e.childNodes)this._fromNode(t);this.up()}else u.Guard.isExclusiveTextNode(e)&&e.data?this.txt(e.data):u.Guard.isCommentNode(e)?this.com(e.data):u.Guard.isCDATASectionNode(e)?this.dat(e.data):u.Guard.isProcessingInstructionNode(e)&&this.ins(e.target,e.data)}_serializeAttributes(e,t,i,r,s,n){let a=n?new h.LocalNameSet:void 0;for(let h of e.attributes){if(!n&&!s&&null===h.namespaceURI){this._push(this._writer.attribute(h.localName,this._serializeAttributeValue(h.value,this._options.wellFormed)));continue}if(n&&a&&a.has(h.namespaceURI,h.localName))return void this.emit("error",Error("Element contains duplicate attributes (well-formed required)."));n&&a&&a.set(h.namespaceURI,h.localName);let e=h.namespaceURI,u=null;if(null!==e)if(u=t.get(h.prefix,e),e===o.namespace.XMLNS){if(h.value===o.namespace.XML||null===h.prefix&&s||null!==h.prefix&&(!(h.localName in r)||r[h.localName]!==h.value)&&t.has(h.localName,h.value))continue;if(n&&h.value===o.namespace.XMLNS)return void this.emit("error",Error("XMLNS namespace is reserved (well-formed required)."));if(n&&""===h.value)return void this.emit("error",Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));"xmlns"===h.prefix&&(u="xmlns")}else null===u&&(u=null!==h.prefix&&(!t.hasPrefix(h.prefix)||t.has(h.prefix,e))?h.prefix:this._generatePrefix(e,t,i),this._push(this._writer.attribute("xmlns:"+u,this._serializeAttributeValue(e,this._options.wellFormed))));if(n&&(-1!==h.localName.indexOf(":")||!l.xml_isName(h.localName)||"xmlns"===h.localName&&null===e))return void this.emit("error",Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((null!==u?u+":":"")+h.localName,this._serializeAttributeValue(h.value,this._options.wellFormed)))}}_serializeAttributeValue(e,t){if(t&&null!==e&&!l.xml_isLegalChar(e))return this.emit("error",Error("Invalid characters in attribute value.")),"";if(null===e)return"";if(this._options.noDoubleEncoding)return e.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");{let t="";for(let i=0;i<e.length;i++){let r=e[i];'"'===r?t+="&quot;":"&"===r?t+="&amp;":"<"===r?t+="&lt;":">"===r?t+="&gt;":t+=r}return t}}_recordNamespaceInformation(e,t,i){let r=null;for(let s of e.attributes){let e=s.namespaceURI,n=s.prefix;if(e===o.namespace.XMLNS)if(null===n){r=s.value;continue}else{let e=s.localName,r=s.value;if(r===o.namespace.XML||(""===r&&(r=null),t.has(e,r)))continue;t.set(e,r),i[e]=r||""}}return r}_generatePrefix(e,t,i){let r="ns"+i.value;return i.value++,t.set(r,e),r}_isPrefixMapModified(e,t){let i=e._items,r=t._items,s=e._nullItems,n=t._nullItems;for(let e in r){let t=i[e];if(void 0===t)return!0;let s=r[e];if(t.length!==s.length)return!0;for(let e=0;e<t.length;e++)if(t[e]!==s[e])return!0}if(s.length!==n.length)return!0;for(let e=0;e<s.length;e++)if(s[e]!==n[e])return!0;return!1}}t.XMLBuilderCBImpl=p,p._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"])},985873:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(921040),s=i(986421),n=i(914077),l=i(169596),o=i(388855),a=i(408007),h=i(547911),u=i(863164);class d{constructor(e){this._domNode=e}get node(){return this._domNode}set(e){return this._options=s.applyDefaults(s.applyDefaults(this._options,e,!0),r.DefaultBuilderOptions),this}ele(e,t,i){let r,n,l,o=null;if(s.isString(e)&&/^\s*</.test(e)){let t="<TEMP_ROOT>"+e+"</TEMP_ROOT>",i=h.createParser().parseFromString(h.sanitizeInput(t,this._options.invalidCharReplacement),"text/xml");if(null===i.documentElement)throw Error("Document element is null.");for(let e of(h.throwIfParserError(i),i.documentElement.childNodes)){let t=i.importNode(e,!0);o=new d(t),this._domNode.appendChild(t)}if(null===o)throw Error("Could not create any elements with: "+e.toString()+". "+this._debugInfo());return o}if(s.isString(e)&&/^\s*[\{\[]/.test(e)){let t=JSON.parse(e);return this.ele(t)}if(s.isObject(e))[r,n,l]=[void 0,e,void 0];else if((null===e||s.isString(e))&&s.isString(t))[r,n,l]=[e,t,i];else if(null!==e)[r,n,l]=[void 0,e,s.isObject(t)?t:void 0];else throw Error("Element name cannot be null. "+this._debugInfo());if(l&&(l=s.getValue(l)),s.isFunction(n))o=this.ele(n.apply(this));else if(s.isArray(n)||s.isSet(n))s.forEachArray(n,e=>o=this.ele(e),this);else if(s.isMap(n)||s.isObject(n))s.forEachObject(n,(e,t)=>{if(s.isFunction(t)&&(t=t.apply(this)),this._options.ignoreConverters||0!==e.indexOf(this._options.convert.att))if(this._options.ignoreConverters||0!==e.indexOf(this._options.convert.text))if(this._options.ignoreConverters||0!==e.indexOf(this._options.convert.cdata))if(this._options.ignoreConverters||0!==e.indexOf(this._options.convert.comment))if(this._options.ignoreConverters||0!==e.indexOf(this._options.convert.ins))(s.isArray(t)||s.isSet(t))&&s.isEmpty(t)?o=this._dummy():(s.isMap(t)||s.isObject(t))&&s.isEmpty(t)?o=this.ele(e):this._options.keepNullNodes||null!=t?s.isArray(t)||s.isSet(t)?s.forEachArray(t,t=>{let i={};i[e]=t,o=this.ele(i)},this):s.isMap(t)||s.isObject(t)?(o=this.ele(e)).ele(t):t?(o=this.ele(e)).txt(t):o=this.ele(e):o=this._dummy();else if(s.isString(t)){let e=t.indexOf(" "),i=-1===e?t:t.substr(0,e),r=-1===e?"":t.substr(e+1);o=this.ins(i,r)}else o=this.ins(t);else s.isArray(t)||s.isSet(t)?s.forEachArray(t,e=>o=this.com(e),this):o=this.com(t);else s.isArray(t)||s.isSet(t)?s.forEachArray(t,e=>o=this.dat(e),this):o=this.dat(t);else o=s.isMap(t)||s.isObject(t)?this.ele(t):this.txt(t);else o=e===this._options.convert.att?this.att(t):this.att(e.substr(this._options.convert.att.length),t)},this);else{if([r,n]=this._extractNamespace(h.sanitizeInput(r,this._options.invalidCharReplacement),h.sanitizeInput(n,this._options.invalidCharReplacement),!0),void 0===r){let[e]=a.namespace_extractQName(n);r=this.node.lookupNamespaceURI(e)}let e=null!=r?this._doc.createElementNS(r,n):this._doc.createElement(n);this.node.appendChild(e),o=new d(e);let t=this._doc.doctype;if(e===this._doc.documentElement&&null!==t){let e=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,t.publicId,t.systemId);this._doc.replaceChild(e,t)}l&&!s.isEmpty(l)&&o.att(l)}if(null===o)throw Error("Could not create any elements with: "+n.toString()+". "+this._debugInfo());return o}remove(){let e=this.up();return e.node.removeChild(this.node),e}att(e,t,i){let r,n,l;if(s.isMap(e)||s.isObject(e))return s.forEachObject(e,(e,t)=>this.att(e,t),this),this;if(null!=e&&(e=s.getValue(e+"")),null!=t&&(t=s.getValue(t+"")),null!=i&&(i=s.getValue(i+"")),(null===e||s.isString(e))&&s.isString(t)&&(null===i||s.isString(i)))[r,n,l]=[e,t,i];else if(s.isString(e)&&(null==t||s.isString(t)))[r,n,l]=[void 0,e,t];else throw Error("Attribute name and value not specified. "+this._debugInfo());if(this._options.keepNullAttributes&&null==l)l="";else if(null==l)return this;if(!o.Guard.isElementNode(this.node))throw Error("An attribute can only be assigned to an element node.");let d=this.node;[r,n]=this._extractNamespace(r,n,!1),n=h.sanitizeInput(n,this._options.invalidCharReplacement),r=h.sanitizeInput(r,this._options.invalidCharReplacement),l=h.sanitizeInput(l,this._options.invalidCharReplacement);let[c,m]=a.namespace_extractQName(n),[p,_]=a.namespace_extractQName(d.prefix?d.prefix+":"+d.localName:d.localName),f=null;if("xmlns"===c?(r=u.namespace.XMLNS,null===d.namespaceURI&&p===m&&(f=l)):null===c&&"xmlns"===m&&null===p&&(r=u.namespace.XMLNS,f=l),null!==f){let e=a.create_element(this._doc,_,f,p);for(let t of d.attributes)e.setAttributeNodeNS(t.cloneNode());for(let t of d.childNodes)e.appendChild(t.cloneNode());let t=d.parentNode;if(null===t)throw Error("Parent node is null."+this._debugInfo());t.replaceChild(e,d),this._domNode=e,d=e}return void 0!==r?d.setAttributeNS(r,n,l):d.setAttribute(n,l),this}removeAtt(e,t){let i,r;if(!o.Guard.isElementNode(this.node))throw Error("An attribute can only be removed from an element node.");if(e=s.getValue(e),void 0!==t&&(t=s.getValue(t)),null!==e&&void 0===t)r=e;else if((null===e||s.isString(e))&&void 0!==t)i=e,r=t;else throw Error("Attribute namespace must be a string. "+this._debugInfo());return s.isArray(r)||s.isSet(r)?s.forEachArray(r,e=>void 0===i?this.removeAtt(e):this.removeAtt(i,e),this):void 0!==i?(r=h.sanitizeInput(r,this._options.invalidCharReplacement),i=h.sanitizeInput(i,this._options.invalidCharReplacement),this.node.removeAttributeNS(i,r)):(r=h.sanitizeInput(r,this._options.invalidCharReplacement),this.node.removeAttribute(r)),this}txt(e){let t=this._doc.createTextNode(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this}com(e){let t=this._doc.createComment(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this}dat(e){let t=this._doc.createCDATASection(h.sanitizeInput(e,this._options.invalidCharReplacement));return this.node.appendChild(t),this}ins(e,t=""){if(s.isArray(e)||s.isSet(e))s.forEachArray(e,e=>{let t=(e+="").indexOf(" "),i=-1===t?e:e.substr(0,t),r=-1===t?"":e.substr(t+1);this.ins(i,r)},this);else if(s.isMap(e)||s.isObject(e))s.forEachObject(e,(e,t)=>this.ins(e,t),this);else{let i=this._doc.createProcessingInstruction(h.sanitizeInput(e,this._options.invalidCharReplacement),h.sanitizeInput(t,this._options.invalidCharReplacement));this.node.appendChild(i)}return this}dec(e){return this._options.version=e.version||"1.0",this._options.encoding=e.encoding,this._options.standalone=e.standalone,this}dtd(e){let t=h.sanitizeInput(e&&e.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),i=h.sanitizeInput(e&&e.pubID||"",this._options.invalidCharReplacement),r=h.sanitizeInput(e&&e.sysID||"",this._options.invalidCharReplacement);if(null!==this._doc.documentElement&&t!==this._doc.documentElement.tagName)throw Error("DocType name does not match document element name.");let s=this._doc.implementation.createDocumentType(t,i,r);return null!==this._doc.doctype?this._doc.replaceChild(s,this._doc.doctype):this._doc.insertBefore(s,this._doc.documentElement),this}import(e){let t=this._domNode,i=this._doc,r=e.node;if(o.Guard.isDocumentNode(r)){let e=r.documentElement;if(null===e)throw Error("Imported document has no document element node. "+this._debugInfo());let s=i.importNode(e,!0);t.appendChild(s)}else if(o.Guard.isDocumentFragmentNode(r))for(let e of r.childNodes){let r=i.importNode(e,!0);t.appendChild(r)}else{let e=i.importNode(r,!0);t.appendChild(e)}return this}doc(){if(!this._doc._isFragment)return new d(this._doc);{let e=this.node;for(;e&&e.nodeType!==l.NodeType.DocumentFragment;)e=e.parentNode;if(null===e)throw Error("Node has no parent node while searching for document fragment ancestor.");return new d(e)}}root(){let e=this._doc.documentElement;if(!e)throw Error("Document root element is null. "+this._debugInfo());return new d(e)}up(){let e=this._domNode.parentNode;if(!e)throw Error("Parent node is null. "+this._debugInfo());return new d(e)}prev(){let e=this._domNode.previousSibling;if(!e)throw Error("Previous sibling node is null. "+this._debugInfo());return new d(e)}next(){let e=this._domNode.nextSibling;if(!e)throw Error("Next sibling node is null. "+this._debugInfo());return new d(e)}first(){let e=this._domNode.firstChild;if(!e)throw Error("First child node is null. "+this._debugInfo());return new d(e)}last(){let e=this._domNode.lastChild;if(!e)throw Error("Last child node is null. "+this._debugInfo());return new d(e)}each(e,t=!1,i=!1,r){let s=this._getFirstDescendantNode(this._domNode,t,i);for(;s[0];)e.call(r,new d(s[0]),s[1],s[2]),s=this._getNextDescendantNode(this._domNode,s[0],i,s[1],s[2]);return this}map(e,t=!1,i=!1,r){let s=[];return this.each((t,i,n)=>s.push(e.call(r,t,i,n)),t,i),s}reduce(e,t,i=!1,r=!1,s){let n=t;return this.each((t,i,r)=>n=e.call(s,n,t,i,r),i,r),n}find(e,t=!1,i=!1,r){let s=this._getFirstDescendantNode(this._domNode,t,i);for(;s[0];){let t=new d(s[0]);if(e.call(r,t,s[1],s[2]))return t;s=this._getNextDescendantNode(this._domNode,s[0],i,s[1],s[2])}}filter(e,t=!1,i=!1,r){let s=[];return this.each((t,i,n)=>{e.call(r,t,i,n)&&s.push(t)},t,i),s}every(e,t=!1,i=!1,r){let s=this._getFirstDescendantNode(this._domNode,t,i);for(;s[0];){let t=new d(s[0]);if(!e.call(r,t,s[1],s[2]))return!1;s=this._getNextDescendantNode(this._domNode,s[0],i,s[1],s[2])}return!0}some(e,t=!1,i=!1,r){let s=this._getFirstDescendantNode(this._domNode,t,i);for(;s[0];){let t=new d(s[0]);if(e.call(r,t,s[1],s[2]))return!0;s=this._getNextDescendantNode(this._domNode,s[0],i,s[1],s[2])}return!1}toArray(e=!1,t=!1){let i=[];return this.each(e=>i.push(e),e,t),i}toString(e){return void 0===(e=e||{}).format&&(e.format="xml"),this._serialize(e)}toObject(e){return void 0===(e=e||{}).format&&(e.format="object"),this._serialize(e)}end(e){return void 0===(e=e||{}).format&&(e.format="xml"),this.doc()._serialize(e)}_getFirstDescendantNode(e,t,i){return t?[this._domNode,0,0]:i?this._getNextDescendantNode(e,e,i,0,0):[this._domNode.firstChild,0,1]}_getNextDescendantNode(e,t,i,r,s){if(i){if(t.firstChild)return[t.firstChild,0,s+1];if(t===e)return[null,-1,-1];if(t.nextSibling)return[t.nextSibling,r+1,s];let i=t.parentNode;for(;i&&i!==e;){if(i.nextSibling)return[i.nextSibling,a.tree_index(i.nextSibling),s-1];i=i.parentNode,s--}}else if(e===t)return[t.firstChild,0,s+1];else return[t.nextSibling,r+1,s];return[null,-1,-1]}_serialize(e){if("xml"===e.format)return new n.XMLWriter(this._options).serialize(this.node,e);if("map"===e.format)return new n.MapWriter(this._options).serialize(this.node,e);if("object"===e.format)return new n.ObjectWriter(this._options).serialize(this.node,e);if("json"===e.format)return new n.JSONWriter(this._options).serialize(this.node,e);throw Error("Invalid writer format: "+e.format+". "+this._debugInfo())}_dummy(){return new d(this._doc.createElement("dummy_node"))}_extractNamespace(e,t,i){let r=t.indexOf("@");if(r>0&&(void 0===e&&(e=t.slice(r+1)),t=t.slice(0,r)),void 0===e)e=i?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(null!==e&&"@"===e[0]){let t=e.slice(1);if(void 0===(e=this._options.namespaceAlias[t]))throw Error("Namespace alias `"+t+"` is not defined. "+this._debugInfo())}return[e,t]}get _doc(){let e=this.node;if(o.Guard.isDocumentNode(e))return e;{let t=e.ownerDocument;if(!t)throw Error("Owner document is null. "+this._debugInfo());return t}}_debugInfo(e){let t=this.node,i=t.parentNode;e=e||t.nodeName;let r=i?i.nodeName:"";return r?"node: <"+e+">, parent: <"+r+">":"node: <"+e+">"}get _options(){let e=this._doc;if(void 0===e._xmlBuilderOptions)throw Error("Builder options is not set.");return e._xmlBuilderOptions}set _options(e){this._doc._xmlBuilderOptions=e}}t.XMLBuilderImpl=d},547911:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(457378),s=i(446883),n=i(980911);s.dom.setFeatures(!1),t.throwIfParserError=function(e){let t=e.documentElement;if(null!==t&&"parsererror"===t.localName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===t.namespaceURI){let e=t.firstElementChild;if(null===e)throw Error("Error parsing XML string.");let i=e.getAttribute("message");if(null===i)throw Error("Error parsing XML string.");throw Error(i)}},t.createDocument=function(){let e=new r.DOMImplementation().createDocument(null,"root",null);return e.documentElement&&e.removeChild(e.documentElement),e},t.createParser=function(){return new r.DOMParser},t.sanitizeInput=function(e,t){if(null==e)return e;{if(void 0===t)return e+"";let i="";e+="";for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(9===s||10===s||13===s||s>=32&&s<=55295||s>=57344&&s<=65533)i+=e.charAt(r);else if(s>=55296&&s<=56319&&r<e.length-1){let l=e.charCodeAt(r+1);l>=56320&&l<=57343?((s=(s-55296)*1024+l-56320+65536)>=65536&&s<=1114111?i+=String.fromCodePoint(s):i+=n.isString(t)?t:t(String.fromCodePoint(s),r,e),r++):i+=n.isString(t)?t:t(e.charAt(r),r,e)}else i+=n.isString(t)?t:t(e.charAt(r),r,e)}return i}}},626938:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLBuilderImpl=i(985873).XMLBuilderImpl,t.XMLBuilderCBImpl=i(913529).XMLBuilderCBImpl},290325:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(921040),s=i(986421),n=i(388855),l=i(626938),o=i(547911),a=i(980911),h=i(626938);function u(e,t){let i,n=c(void 0===e||d(e)?e:r.DefaultBuilderOptions),a=d(e)?t:e;if(void 0===a){let e=o.createDocument();i=new l.XMLBuilderImpl(e),m(e,n)}else if(s.isObject(a)){let e=o.createDocument();i=new l.XMLBuilderImpl(e),m(e,n),i.ele(a)}else if(/^\s*</.test(a)){let e=o.createParser().parseFromString(o.sanitizeInput(a,n.invalidCharReplacement),"text/xml");o.throwIfParserError(e),i=new l.XMLBuilderImpl(e),m(e,n)}else{let e=o.createDocument();i=new l.XMLBuilderImpl(e),m(e,n);let t=JSON.parse(a);i.ele(t)}return i}function d(e){if(!s.isPlainObject(e))return!1;for(let t in e)if(e.hasOwnProperty(t)&&!r.XMLBuilderOptionKeys.has(t))return!1;return!0}function c(e={}){let t=s.applyDefaults(e,r.DefaultBuilderOptions);if(0===t.convert.att.length||0===t.convert.ins.length||0===t.convert.text.length||0===t.convert.cdata.length||0===t.convert.comment.length)throw Error("JS object converter strings cannot be zero length.");return t}function m(e,t,i){e._xmlBuilderOptions=t,e._isFragment=i}t.builder=function(e,t){let i=c(d(e)?e:r.DefaultBuilderOptions),s=n.Guard.isNode(e)||a.isArray(e)?e:t;if(void 0===s)throw Error("Invalid arguments.");if(a.isArray(s)){let e=[];for(let t=0;t<s.length;t++){let r=new l.XMLBuilderImpl(s[t]);r.set(i),e.push(r)}return e}{let e=new l.XMLBuilderImpl(s);return e.set(i),e}},t.create=u,t.fragment=function(e,t){let i,n=c(void 0===e||d(e)?e:r.DefaultBuilderOptions),a=d(e)?t:e;if(void 0===a){let e=o.createDocument();m(e,n,!0),i=new l.XMLBuilderImpl(e.createDocumentFragment())}else if(s.isObject(a)){let e=o.createDocument();m(e,n,!0),(i=new l.XMLBuilderImpl(e.createDocumentFragment())).ele(a)}else if(/^\s*</.test(a)){let e=o.createParser().parseFromString("<TEMP_ROOT>"+o.sanitizeInput(a,n.invalidCharReplacement)+"</TEMP_ROOT>","text/xml");if(o.throwIfParserError(e),m(e,n,!0),null===e.documentElement)throw Error("Document element is null.");let t=e.createDocumentFragment();for(let i of e.documentElement.childNodes){let r=e.importNode(i,!0);t.appendChild(r)}i=new l.XMLBuilderImpl(t)}else{let e=o.createDocument();m(e,n,!0),i=new l.XMLBuilderImpl(e.createDocumentFragment());let t=JSON.parse(a);i.ele(t)}return i},t.convert=function(e,t,i){let s,n,l;return d(e)&&void 0!==t?(s=e,n=t,l=i):(s=r.DefaultBuilderOptions,n=e,l=t||void 0),u(s,n).end(l)},t.createCB=function(e){return new h.XMLBuilderCBImpl(e)},t.fragmentCB=function(e){return new h.XMLBuilderCBImpl(e,!0)}},921040:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0},t.XMLBuilderOptionKeys=new Set(Object.keys(t.DefaultBuilderOptions)),t.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},560167:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCBWriter=class{constructor(e){this.level=0,this._builderOptions=e,this._writerOptions=e}}},629043:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(169596),s=i(52518),n=i(289308),l=i(568730),o=i(863164),a=i(408007);class h{constructor(e){this.level=0,this._builderOptions=e}docType(e,t,i){}comment(e){}text(e){}instruction(e,t){}cdata(e){}openTagBegin(e){}openTagEnd(e,t,i){}closeTag(e){}attributes(e){for(let t of e)this.attribute(null===t[1]?t[2]:t[1]+":"+t[2],t[3])}attribute(e,t){}beginElement(e){}endElement(e){}serializeNode(e,t,i){let r=void 0!==e._nodeDocument&&e._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=e,r){let r=new n.NamespacePrefixMap;r.set("xml",o.namespace.XML);try{this._serializeNodeNS(e,null,r,{value:1},t,i)}catch(e){throw new l.InvalidStateError(e.message)}}else try{this._serializeNode(e,t,i)}catch(e){throw new l.InvalidStateError(e.message)}}_serializeNodeNS(e,t,i,s,n,l){switch(this.currentNode=e,e.nodeType){case r.NodeType.Element:this._serializeElementNS(e,t,i,s,n,l);break;case r.NodeType.Document:this._serializeDocumentNS(e,t,i,s,n,l);break;case r.NodeType.Comment:this._serializeComment(e,n,l);break;case r.NodeType.Text:this._serializeText(e,n,l);break;case r.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(e,t,i,s,n,l);break;case r.NodeType.DocumentType:this._serializeDocumentType(e,n,l);break;case r.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,n,l);break;case r.NodeType.CData:this._serializeCData(e,n,l);break;default:throw Error(`Unknown node type: ${e.nodeType}`)}}_serializeNode(e,t,i){switch(this.currentNode=e,e.nodeType){case r.NodeType.Element:this._serializeElement(e,t,i);break;case r.NodeType.Document:this._serializeDocument(e,t,i);break;case r.NodeType.Comment:this._serializeComment(e,t,i);break;case r.NodeType.Text:this._serializeText(e,t,i);break;case r.NodeType.DocumentFragment:this._serializeDocumentFragment(e,t,i);break;case r.NodeType.DocumentType:this._serializeDocumentType(e,t,i);break;case r.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(e,t,i);break;case r.NodeType.CData:this._serializeCData(e,t,i);break;default:throw Error(`Unknown node type: ${e.nodeType}`)}}_serializeElementNS(e,t,i,r,s,n){let l=[];if(s&&(-1!==e.localName.indexOf(":")||!a.xml_isName(e.localName)))throw Error("Node local name contains invalid characters (well-formed required).");let u="",d=!1,c=!1,m=i.copy(),p={},_=this._recordNamespaceInformation(e,m,p),f=t,g=e.namespaceURI;if(f===g)null!==_&&(c=!0),u=g===o.namespace.XML?"xml:"+e.localName:e.localName,this.beginElement(u),this.openTagBegin(u);else{let t=e.prefix,i=null;if((null!==t||g!==_)&&(i=m.get(t,g)),"xmlns"===t){if(s)throw Error("An element cannot have the 'xmlns' prefix (well-formed required).");i=t}null!==i?(u=i+":"+e.localName,null!==_&&_!==o.namespace.XML&&(f=_||null),this.beginElement(u),this.openTagBegin(u)):null!==t?(t in p&&(t=this._generatePrefix(g,m,r)),m.set(t,g),u+=t+":"+e.localName,this.beginElement(u),this.openTagBegin(u),l.push([null,"xmlns",t,this._serializeAttributeValue(g,s,n)]),null!==_&&(f=_||null)):null===_||null!==_&&_!==g?(c=!0,u+=e.localName,f=g,this.beginElement(u),this.openTagBegin(u),l.push([null,null,"xmlns",this._serializeAttributeValue(g,s,n)])):(u+=e.localName,f=g,this.beginElement(u),this.openTagBegin(u))}l.push(...this._serializeAttributesNS(e,m,r,p,c,s,n)),this.attributes(l);let b=g===o.namespace.HTML;if(b&&0===e.childNodes.length&&h._VoidElementNames.has(e.localName)?(this.openTagEnd(u,!0,!0),this.endElement(u),d=!0):b||0!==e.childNodes.length?this.openTagEnd(u,!1,!1):(this.openTagEnd(u,!0,!1),this.endElement(u),d=!0),!d){if(b&&"template"===e.localName);else for(let t of e.childNodes)this.level++,this._serializeNodeNS(t,f,m,r,s,n),this.level--;this.closeTag(u),this.endElement(u)}}_serializeElement(e,t,i){if(t&&(-1!==e.localName.indexOf(":")||!a.xml_isName(e.localName)))throw Error("Node local name contains invalid characters (well-formed required).");let r=!1,s=e.localName;this.beginElement(s),this.openTagBegin(s);let n=this._serializeAttributes(e,t,i);if(this.attributes(n),e.hasChildNodes()?this.openTagEnd(s,!1,!1):(this.openTagEnd(s,!0,!1),this.endElement(s),r=!0),!r){for(let r of e._children)this.level++,this._serializeNode(r,t,i),this.level--;this.closeTag(s),this.endElement(s)}}_serializeDocumentNS(e,t,i,r,s,n){if(s&&null===e.documentElement)throw Error("Missing document element (well-formed required).");for(let l of e.childNodes)this._serializeNodeNS(l,t,i,r,s,n)}_serializeDocument(e,t,i){if(t&&null===e.documentElement)throw Error("Missing document element (well-formed required).");for(let r of e._children)this._serializeNode(r,t,i)}_serializeComment(e,t,i){if(t&&(!a.xml_isLegalChar(e.data)||-1!==e.data.indexOf("--")||e.data.endsWith("-")))throw Error("Comment data contains invalid characters (well-formed required).");this.comment(e.data)}_serializeText(e,t,i){if(t&&!a.xml_isLegalChar(e.data))throw Error("Text data contains invalid characters (well-formed required).");let r="";if(i)r=e.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;");else for(let t=0;t<e.data.length;t++){let i=e.data[t];"&"===i?r+="&amp;":"<"===i?r+="&lt;":">"===i?r+="&gt;":r+=i}this.text(r)}_serializeDocumentFragmentNS(e,t,i,r,s,n){for(let l of e.childNodes)this._serializeNodeNS(l,t,i,r,s,n)}_serializeDocumentFragment(e,t,i){for(let r of e._children)this._serializeNode(r,t,i)}_serializeDocumentType(e,t,i){if(t&&!a.xml_isPubidChar(e.publicId))throw Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(t&&(!a.xml_isLegalChar(e.systemId)||-1!==e.systemId.indexOf('"')&&-1!==e.systemId.indexOf("'")))throw Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(e.name,e.publicId,e.systemId)}_serializeProcessingInstruction(e,t,i){if(t&&(-1!==e.target.indexOf(":")||/^xml$/i.test(e.target)))throw Error("Processing instruction target contains invalid characters (well-formed required).");if(t&&(!a.xml_isLegalChar(e.data)||-1!==e.data.indexOf("?>")))throw Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(e.target,e.data)}_serializeCData(e,t,i){if(t&&-1!==e.data.indexOf("]]>"))throw Error("CDATA contains invalid characters (well-formed required).");this.cdata(e.data)}_serializeAttributesNS(e,t,i,r,n,l,h){let u=[],d=l?new s.LocalNameSet:void 0;for(let s of e.attributes){if(!l&&!n&&null===s.namespaceURI){u.push([null,null,s.localName,this._serializeAttributeValue(s.value,l,h)]);continue}if(l&&d&&d.has(s.namespaceURI,s.localName))throw Error("Element contains duplicate attributes (well-formed required).");l&&d&&d.set(s.namespaceURI,s.localName);let e=s.namespaceURI,c=null;if(null!==e)if(c=t.get(s.prefix,e),e===o.namespace.XMLNS){if(s.value===o.namespace.XML||null===s.prefix&&n||null!==s.prefix&&(!(s.localName in r)||r[s.localName]!==s.value)&&t.has(s.localName,s.value))continue;if(l&&s.value===o.namespace.XMLNS)throw Error("XMLNS namespace is reserved (well-formed required).");if(l&&""===s.value)throw Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");"xmlns"===s.prefix&&(c="xmlns")}else null===c&&(c=null!==s.prefix&&(!t.hasPrefix(s.prefix)||t.has(s.prefix,e))?s.prefix:this._generatePrefix(e,t,i),u.push([null,"xmlns",c,this._serializeAttributeValue(e,l,h)]));if(l&&(-1!==s.localName.indexOf(":")||!a.xml_isName(s.localName)||"xmlns"===s.localName&&null===e))throw Error("Attribute local name contains invalid characters (well-formed required).");u.push([e,c,s.localName,this._serializeAttributeValue(s.value,l,h)])}return u}_serializeAttributes(e,t,i){let r=[],s=t?{}:void 0;for(let n of e.attributes){if(!t){r.push([null,null,n.localName,this._serializeAttributeValue(n.value,t,i)]);continue}if(t&&s&&n.localName in s)throw Error("Element contains duplicate attributes (well-formed required).");if(t&&s&&(s[n.localName]=!0),t&&(-1!==n.localName.indexOf(":")||!a.xml_isName(n.localName)))throw Error("Attribute local name contains invalid characters (well-formed required).");r.push([null,null,n.localName,this._serializeAttributeValue(n.value,t,i)])}return r}_recordNamespaceInformation(e,t,i){let r=null;for(let s of e.attributes){let e=s.namespaceURI,n=s.prefix;if(e===o.namespace.XMLNS)if(null===n){r=s.value;continue}else{let e=s.localName,r=s.value;if(r===o.namespace.XML||(""===r&&(r=null),t.has(e,r)))continue;t.set(e,r),i[e]=r||""}}return r}_generatePrefix(e,t,i){let r="ns"+i.value.toString();return i.value++,t.set(r,e),r}_serializeAttributeValue(e,t,i){if(t&&null!==e&&!a.xml_isLegalChar(e))throw Error("Invalid characters in attribute value.");if(null===e)return"";if(i)return e.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");{let t="";for(let i=0;i<e.length;i++){let r=e[i];'"'===r?t+="&quot;":"&"===r?t+="&amp;":"<"===r?t+="&lt;":">"===r?t+="&gt;":t+=r}return t}}}t.BaseWriter=h,h._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"])},425:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(560167);class s extends r.BaseCBWriter{constructor(e){super(e),this._hasChildren=[],this._additionalLevel=0}declaration(e,t,i){return""}docType(e,t,i){return""}comment(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(e)+this._sep()+"}"}text(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(e)+this._sep()+"}"}instruction(e,t){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(t?e+" "+t:e)+this._sep()+"}"}cdata(e){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(e)+this._sep()+"}"}attribute(e,t){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+e)+this._sep()+this._val(t)+this._sep()+"}"}openTagBegin(e){let t=this._comma()+this._beginLine()+"{"+this._sep()+this._key(e)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,t+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),t}openTagEnd(e,t,i){if(!t)return"";{let e=this._sep()+"]";return this._additionalLevel--,e+=this._beginLine()+"}"+this._sep()+"}"}}closeTag(e){let t=this._beginLine()+"]";return this._additionalLevel--,t+=this._beginLine()+"}"+this._sep()+"}"}beginElement(e){}endElement(e){this._hasChildren.pop()}_beginLine(e=0){return this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+e):""}_indent(e){return e+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(e+this._additionalLevel)}_comma(){let e=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),e}_sep(){return this._writerOptions.prettyPrint?" ":""}_key(e){return'"'+e+'":'}_val(e){return'"'+e+'"'}}t.JSONCBWriter=s},890387:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(629661),s=i(986421),n=i(629043);class l extends n.BaseWriter{serialize(e,t){let i=s.applyDefaults(t,{wellFormed:!1,noDoubleEncoding:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,group:!1}),n=s.applyDefaults(i,{format:"object",wellFormed:!1,noDoubleEncoding:!1}),l=new r.ObjectWriter(this._builderOptions).serialize(e,n);return this._beginLine(i,0)+this._convertObject(l,i)}_convertObject(e,t,i=0){let r="",n=this._isLeafNode(e);if(s.isArray(e)){r+="[";let s=e.length,n=0;for(let l of e)r+=this._endLine(t,i+1)+this._beginLine(t,i+1)+this._convertObject(l,t,i+1),n<s-1&&(r+=","),n++;r+=this._endLine(t,i)+this._beginLine(t,i),r+="]"}else if(s.isObject(e)){r+="{";let l=s.objectLength(e),o=0;s.forEachObject(e,(e,s)=>{n&&t.prettyPrint?r+=" ":r+=this._endLine(t,i+1)+this._beginLine(t,i+1),r+='"'+e+'":',t.prettyPrint&&(r+=" "),r+=this._convertObject(s,t,i+1),o<l-1&&(r+=","),o++},this),n&&t.prettyPrint?r+=" ":r+=this._endLine(t,i)+this._beginLine(t,i),r+="}"}else r+='"'+e+'"';return r}_beginLine(e,t){if(e.prettyPrint){let i=e.offset+t+1;if(i>0)return Array(i).join(e.indent)}return""}_endLine(e,t){return e.prettyPrint?e.newline:""}_isLeafNode(e){return 1>=this._descendantCount(e)}_descendantCount(e,t=0){return s.isArray(e)?s.forEachArray(e,e=>t+=this._descendantCount(e,t),this):s.isObject(e)?s.forEachObject(e,(e,i)=>t+=this._descendantCount(i,t),this):t++,t}}t.JSONWriter=l},807064:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(986421),s=i(629661),n=i(629043);class l extends n.BaseWriter{serialize(e,t){let i=r.applyDefaults(t,{format:"map",wellFormed:!1,noDoubleEncoding:!1,group:!1}),n=r.applyDefaults(i,{format:"object",wellFormed:!1,noDoubleEncoding:!1}),l=new s.ObjectWriter(this._builderOptions).serialize(e,n);return this._convertObject(l)}_convertObject(e){if(r.isArray(e)){for(let t=0;t<e.length;t++)e[t]=this._convertObject(e[t]);return e}if(!r.isObject(e))return e;{let t=new Map;for(let i in e)t.set(i,this._convertObject(e[i]));return t}}}t.MapWriter=l},629661:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(986421),s=i(169596),n=i(629043);class l extends n.BaseWriter{serialize(e,t){let i=r.applyDefaults(t,{format:"object",wellFormed:!1,noDoubleEncoding:!1,group:!1});return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(e,i.wellFormed,i.noDoubleEncoding),this._process(this._currentList,i)}_process(e,t){if(0===e.length)return{};let i={},n=!1,l=0,o=0,a=0,h=0;for(let t=0;t<e.length;t++){let r=Object.keys(e[t])[0];switch(r){case"@":continue;case"#":l++;break;case"!":o++;break;case"?":a++;break;case"$":h++;break;default:i[r]?n=!0:i[r]=!0}}let u=this._getAttrKey(),d=this._getNodeKey(s.NodeType.Text),c=this._getNodeKey(s.NodeType.Comment),m=this._getNodeKey(s.NodeType.ProcessingInstruction),p=this._getNodeKey(s.NodeType.CData);if(1===l&&1===e.length&&r.isString(e[0]["#"]))return e[0]["#"];if(n){let i=[];for(let s=0;s<e.length;s++){let n=e[s],l=Object.keys(n)[0];switch(l){case"@":let o=n["@"],a=Object.keys(o);1===a.length?i.push({[u+a[0]]:o[a[0]]}):i.push({[u]:n["@"]});break;case"#":i.push({[d]:n["#"]});break;case"!":i.push({[c]:n["!"]});break;case"?":i.push({[m]:n["?"]});break;case"$":i.push({[p]:n.$});break;default:if(0!==n[l].length&&r.isArray(n[l][0])){let e=[],r=n[l];for(let i=0;i<r.length;i++)e.push(this._process(r[i],t));i.push({[l]:e})}else i.push({[l]:this._process(n[l],t)})}}return{[d]:i}}{let i=1,s=1,n=1,_=1,f={};for(let g=0;g<e.length;g++){let b=e[g],N=Object.keys(b)[0];switch(N){case"@":let w=b["@"],v=Object.keys(w);if(t.group&&1!==v.length)f[u]=w;else for(let e in w)f[u+e]=w[e];break;case"#":i=this._processSpecItem(b["#"],f,t.group,d,l,i);break;case"!":s=this._processSpecItem(b["!"],f,t.group,c,o,s);break;case"?":n=this._processSpecItem(b["?"],f,t.group,m,a,n);break;case"$":_=this._processSpecItem(b.$,f,t.group,p,h,_);break;default:if(0!==b[N].length&&r.isArray(b[N][0])){let e=[],i=b[N];for(let r=0;r<i.length;r++)e.push(this._process(i[r],t));f[N]=e}else f[N]=this._process(b[N],t)}}return f}}_processSpecItem(e,t,i,s,n,l){if(!i&&r.isArray(e)&&n+e.length>2)for(let i of e)t[s+(l++).toString()]=i;else t[n>1?s+(l++).toString():s]=e;return l}beginElement(e){let t=[];if(0===this._currentList.length)this._currentList.push({[e]:t});else{let i=this._currentList[this._currentList.length-1];this._isElementNode(i,e)?0!==i[e].length&&r.isArray(i[e][0])?i[e].push(t):i[e]=[i[e],t]:this._currentList.push({[e]:t})}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=t:this._listRegister.push(t),this._currentList=t}endElement(){this._currentList=this._listRegister[--this._currentIndex]}attribute(e,t){if(0===this._currentList.length)this._currentList.push({"@":{[e]:t}});else{let i=this._currentList[this._currentList.length-1];this._isAttrNode(i)?i["@"][e]=t:this._currentList.push({"@":{[e]:t}})}}comment(e){if(0===this._currentList.length)this._currentList.push({"!":e});else{let t=this._currentList[this._currentList.length-1];this._isCommentNode(t)?r.isArray(t["!"])?t["!"].push(e):t["!"]=[t["!"],e]:this._currentList.push({"!":e})}}text(e){if(0===this._currentList.length)this._currentList.push({"#":e});else{let t=this._currentList[this._currentList.length-1];this._isTextNode(t)?r.isArray(t["#"])?t["#"].push(e):t["#"]=[t["#"],e]:this._currentList.push({"#":e})}}instruction(e,t){let i=""===t?e:e+" "+t;if(0===this._currentList.length)this._currentList.push({"?":i});else{let e=this._currentList[this._currentList.length-1];this._isInstructionNode(e)?r.isArray(e["?"])?e["?"].push(i):e["?"]=[e["?"],i]:this._currentList.push({"?":i})}}cdata(e){if(0===this._currentList.length)this._currentList.push({$:e});else{let t=this._currentList[this._currentList.length-1];this._isCDATANode(t)?r.isArray(t.$)?t.$.push(e):t.$=[t.$,e]:this._currentList.push({$:e})}}_isAttrNode(e){return"@"in e}_isTextNode(e){return"#"in e}_isCommentNode(e){return"!"in e}_isInstructionNode(e){return"?"in e}_isCDATANode(e){return"$"in e}_isElementNode(e,t){return t in e}_getAttrKey(){return this._builderOptions.convert.att}_getNodeKey(e){switch(e){case s.NodeType.Comment:return this._builderOptions.convert.comment;case s.NodeType.Text:return this._builderOptions.convert.text;case s.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case s.NodeType.CData:return this._builderOptions.convert.cdata;default:throw Error("Invalid node type.")}}}t.ObjectWriter=l},669153:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(560167);class s extends r.BaseCBWriter{constructor(e){super(e),this._lineLength=0}declaration(e,t,i){let r=this._beginLine()+"<?xml";return r+=' version="'+e+'"',void 0!==t&&(r+=' encoding="'+t+'"'),void 0!==i&&(r+=' standalone="'+(i?"yes":"no")+'"'),r+="?>"}docType(e,t,i){let r=this._beginLine();return t&&i?r+="<!DOCTYPE "+e+' PUBLIC "'+t+'" "'+i+'">':t?r+="<!DOCTYPE "+e+' PUBLIC "'+t+'">':i?r+="<!DOCTYPE "+e+' SYSTEM "'+i+'">':r+="<!DOCTYPE "+e+">",r}comment(e){return this._beginLine()+"\x3c!--"+e+"--\x3e"}text(e){return this._beginLine()+e}instruction(e,t){return t?this._beginLine()+"<?"+e+" "+t+"?>":this._beginLine()+"<?"+e+"?>"}cdata(e){return this._beginLine()+"<![CDATA["+e+"]]>"}openTagBegin(e){return this._lineLength+=1+e.length,this._beginLine()+"<"+e}openTagEnd(e,t,i){return i?" />":t?this._writerOptions.allowEmptyTags?"></"+e+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"}closeTag(e){return this._beginLine()+"</"+e+">"}attribute(e,t){let i=e+'="'+t+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+i.length>this._writerOptions.width?(i=this._beginLine()+this._indent(1)+i,this._lineLength=i.length,i):(this._lineLength+=1+i.length," "+i)}beginElement(e){}endElement(e){}_beginLine(){if(!this._writerOptions.prettyPrint)return"";{let e=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=e.length,e}}_indent(e){return e<=0?"":this._writerOptions.indent.repeat(e)}}t.XMLCBWriter=s},345836:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=i(986421),s=i(169596),n=i(629043),l=i(388855);class o extends n.BaseWriter{constructor(){super(...arguments),this._indentation={},this._lengthToLastNewline=0}serialize(e,t){return this._options=r.applyDefaults(t,{wellFormed:!1,noDoubleEncoding:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:"\n",offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),this._refs={suppressPretty:!1,emptyNode:!1,markup:""},e.nodeType!==s.NodeType.Document||this._options.headless||(this._beginLine(),this._refs.markup="<?xml",this._refs.markup+=' version="'+this._builderOptions.version+'"',void 0!==this._builderOptions.encoding&&(this._refs.markup+=' encoding="'+this._builderOptions.encoding+'"'),void 0!==this._builderOptions.standalone&&(this._refs.markup+=' standalone="'+(this._builderOptions.standalone?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()),this.serializeNode(e,this._options.wellFormed,this._options.noDoubleEncoding),this._options.prettyPrint&&this._refs.markup.slice(-this._options.newline.length)===this._options.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._options.newline.length)),this._refs.markup}docType(e,t,i){this._beginLine(),t&&i?this._refs.markup+="<!DOCTYPE "+e+' PUBLIC "'+t+'" "'+i+'">':t?this._refs.markup+="<!DOCTYPE "+e+' PUBLIC "'+t+'">':i?this._refs.markup+="<!DOCTYPE "+e+' SYSTEM "'+i+'">':this._refs.markup+="<!DOCTYPE "+e+">",this._endLine()}openTagBegin(e){this._beginLine(),this._refs.markup+="<"+e}openTagEnd(e,t,i){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._options.prettyPrint&&!t&&!i){let e=!0,t=!0,i=this.currentNode.firstChild,r=0,s=0;for(;i;){if(l.Guard.isExclusiveTextNode(i))s++;else if(l.Guard.isCDATASectionNode(i))r++;else{e=!1,t=!1;break}""!==i.data&&(t=!1),i=i.nextSibling}this._refs.suppressPretty=!this._options.indentTextOnlyNodes&&e&&(r<=1&&0===s||0===r),this._refs.emptyNode=t}(i||t||this._refs.emptyNode)&&this._options.allowEmptyTags?this._refs.markup+="></"+e+">":this._refs.markup+=i?" />":t||this._refs.emptyNode?this._options.spaceBeforeSlash?" />":"/>":">",this._endLine()}closeTag(e){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+e+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()}attribute(e,t){let i=e+'="'+t+'"';this._options.prettyPrint&&this._options.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+i.length>this._options.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+i):this._refs.markup+=" "+i}text(e){""!==e&&(this._beginLine(),this._refs.markup+=e,this._endLine())}cdata(e){""!==e&&(this._beginLine(),this._refs.markup+="<![CDATA["+e+"]]>",this._endLine())}comment(e){this._beginLine(),this._refs.markup+="\x3c!--"+e+"--\x3e",this._endLine()}instruction(e,t){this._beginLine(),this._refs.markup+="<?"+(""===t?e:e+" "+t)+"?>",this._endLine()}_beginLine(){this._options.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._options.offset+this.level))}_endLine(){this._options.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._options.newline,this._lengthToLastNewline=this._refs.markup.length)}_indent(e){if(e<=0)return"";{if(void 0!==this._indentation[e])return this._indentation[e];let t=this._options.indent.repeat(e);return this._indentation[e]=t,t}}}t.XMLWriter=o},914077:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapWriter=i(807064).MapWriter,t.XMLWriter=i(345836).XMLWriter,t.ObjectWriter=i(629661).ObjectWriter,t.JSONWriter=i(890387).JSONWriter},331693:function(e){e.exports=function(){for(var e={},i=0;i<arguments.length;i++){var r=arguments[i];for(var s in r)t.call(r,s)&&(e[s]=r[s])}return e};var t=Object.prototype.hasOwnProperty}}]);
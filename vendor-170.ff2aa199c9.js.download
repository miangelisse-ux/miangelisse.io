"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["14703"],{657054:function(t,e,n){n.d(e,{s:()=>v});var i=n(408830),r=n(669182),a=n(985476),o=n(390180),s=n(688606),l=n(624108),c=n(362055),h=n(941599),f=n(894442),d=n(902978),u=n(669745);let p=[0,0,0],v=class{set fillStyle(t){this.nativeContext.fillStyle=t}get fillStyle(){return this.nativeContext.fillStyle}set font(t){t!==this._font&&(this._font=t,this.nativeContext.font=t)}get font(){var t;return null!=(t=this._font)?t:this.nativeContext.font}set globalAlpha(t){this.nativeContext.globalAlpha=t*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(t){this.nativeContext.lineCap=t}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(t){this.nativeContext.lineDashOffset=t}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(t){this.nativeContext.lineJoin=t}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(t){this.nativeContext.lineWidth=t}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(t){this.nativeContext.miterLimit=t}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(t){this.nativeContext.shadowBlur=t}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(t){this.nativeContext.shadowColor=t}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(t){this.nativeContext.shadowOffsetX=t}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(t){this.nativeContext.shadowOffsetY=t}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(t){this.nativeContext.strokeStyle=t}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(t){this.nativeContext.textAlign=t}get textAlign(){return this.nativeContext.textAlign}set textBaseline(t){this.nativeContext.textBaseline=t}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(t){!!this._inuse!==t&&(this._inuse=t,t?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(t,e){this.fillAttributes=Object.assign(Object.assign({},s.pp),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},s.WC),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},s.q9),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let n=t.nativeCanvas.getContext("2d");if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u83B7\u53D62d\u4E0A\u4E0B\u6587\u5931\u8D25");this.nativeContext=n,this.canvas=t,this.matrix=new r.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new r.y(1,0,0,1,0,0),this._clearMatrix=new r.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(t=!0){this.stack.length&&a.Y.getInstance().warn("\u53EF\u80FD\u5B58\u5728bug\uFF0Cmatrix\u6CA1\u6709\u6E05\u7A7A"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new r.y(1,0,0,1,0,0),this.stack.length=0,t&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(t){return l.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t),this.nativeContext.save()}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,n=!0){this.matrix.scale(t,e),n&&this.setTransformForCurrent()}setScale(t,e,n=!0){this.matrix.setScale(t,e),n&&this.setTransformForCurrent()}scalePoint(t,e,n,i,r=!0){this.translate(n,i,!1),this.scale(t,e,!1),this.translate(-n,-i,!1),r&&this.setTransformForCurrent()}setTransform(t,e,n,i,r,a,o=!0,s=this.dpr){this.matrix.setValue(s*t,s*e,s*n,s*i,s*r,s*a),o&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,n=this.dpr){this.matrix.setValue(t.a*n,t.b*n,t.c*n,t.d*n,t.e*n,t.f*n),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,n,i,r,a,o=!0){this.matrix.multiply(t,e,n,i,r,a),o&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,n=!0){this.matrix.translate(t,e),n&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let n=t*Math.PI/180;this.rotate(n,e)}rotateAbout(t,e,n,i=!0){this.translate(e,n,!1),this.rotate(t,!1),this.translate(-e,-n,!1),i&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,n,i=!0){this.translate(e,n,!1),this.rotateDegrees(t,!1),this.translate(-e,-n,!1),i&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(t,e){t?"string"==typeof t?this.nativeContext.clip(t):this.nativeContext.clip(t,e):this.nativeContext.clip()}arc(t,e,n,r,a,o,s){if(s=s||0,this.camera){let l=[];((t,e,n,r,a,o,s,l)=>{if(l)for(;n>e;)n-=i.f7;else for(;n<e;)n+=i.f7;let c=i.pi/3*(n>e?1:-1),h=e,f=h;for(;f!==n;){let e=4*Math.tan(Math.abs((f=c>0?Math.min(f+c,n):Math.max(f+c,n))-h)/4)/3,i=f<h?-1:1,l=Math.cos(h),d=Math.sin(h),u=Math.cos(f),p=Math.sin(f),v=l*o+r,g=d*s+a,m=u*o+r,y=p*s+a,x=o*e*i,b=s*e*i;t.push([v-x*d,g+b*l,m+x*p,y-b*u,m,y]),h=f}})(l,r,a,t,e,n,n,o);for(let t=0;t<l.length;++t){let e=l[t];this.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5],s)}}else this.nativeContext.arc(t,e,Math.max(0,n),r,a,o)}arcTo(t,e,n,i,r){this.nativeContext.arcTo(t,e,n,i,r)}bezierCurveTo(t,e,n,i,r,a,o){if(o=o||0,this.camera){let s=o,l=o;this.modelMatrix&&((0,c.fF)(p,[t,e,o],this.modelMatrix),t=p[0],e=p[1],s=p[2],(0,c.fF)(p,[n,i,o],this.modelMatrix),n=p[0],i=p[1],l=p[2],(0,c.fF)(p,[r,a,o],this.modelMatrix),r=p[0],a=p[1],o=p[2]);let h=this.camera.vp(r,a,o);r=h.x,a=h.y,t=(h=this.camera.vp(t,e,s)).x,e=h.y,n=(h=this.camera.vp(n,i,l)).x,i=h.y}this.nativeContext.bezierCurveTo(t,e,n,i,r,a)}closePath(){this.nativeContext.closePath()}ellipse(t,e,n,i,r,a,o,s){null==s?this.nativeContext.ellipse(t,e,n,i,r,a,o):this.nativeContext.ellipse(t,e,n,i,r,a,o,s)}lineTo(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}this.nativeContext.lineTo(t,e)}moveTo(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}this.nativeContext.moveTo(t,e)}quadraticCurveTo(t,e,n,i,r){if(r=r||0,this.camera){let a=r;this.modelMatrix&&((0,c.fF)(p,[t,e,r],this.modelMatrix),t=p[0],e=p[1],a=p[2],(0,c.fF)(p,[n,i,r],this.modelMatrix),n=p[0],i=p[1],r=p[2]);let o=this.camera.vp(n,i,r);n=o.x,i=o.y,t=(o=this.camera.vp(t,e,a)).x,e=o.y}this.nativeContext.quadraticCurveTo(t,e,n,i)}rect(t,e,n,i,r){r=r||0,this.camera?(this.moveTo(t,e,r),this.lineTo(t+n,e,r),this.lineTo(t+n,e+i,r),this.lineTo(t,e+i,r),this.closePath()):this.nativeContext.rect(t,e,n,i)}createImageData(){let t=arguments;return 2===t.length?this.nativeContext.createImageData(t[0],t[1]):1===t.length?this.nativeContext.createImageData(t[0]):null}createLinearGradient(t,e,n,i){return isFinite(t+e+n+i)||(t=0,e=0,n=0,i=0),this.nativeContext.createLinearGradient(t,e,n,i)}createPattern(t,e){return 0===t.width||0===t.height?null:this.nativeContext.createPattern(t,e)}createRadialGradient(t,e,n,i,r,a){return this.nativeContext.createRadialGradient(t,e,n,i,r,a)}createConicGradient(t,e,n,i){if(this.nativeContext.createConicGradient&&.001>Math.abs(i-n-2*Math.PI))return this.nativeContext.createConicGradient(n,t,e);let r,a=!1,o=this;return{stops:[],addColorStop(t,e){this.stops.push([t,e]),a=!0},GetPattern(s,l,c){return a&&(c||(c=i-n),r=(0,h.Of)(o,this.stops,t,e,c,n,i,s,l),a=!1),r}}}fill(t,e){this.disableFill||(t?this.nativeContext.fill(t):this.nativeContext.fill())}fillRect(t,e,n,i){this.nativeContext.fillRect(t,e,n,i)}clearRect(t,e,n,i){this.nativeContext.clearRect(t,e,n,i)}project(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}return{x:t,y:e}}view(t,e,n){return n=n||0,this.camera?(this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]),this.camera.view(t,e,n)):[t,e,n]}fillText(t,e,n,i){if(i=i||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[e,n,i],this.modelMatrix),e=p[0],n=p[1],i=p[2]);let t=this.camera.vp(e,n,i);e=t.x,n=t.y}this.nativeContext.fillText(t,e,n)}getImageData(t,e,n,i){return this.nativeContext.getImageData(t,e,n,i)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(t,e){return this.nativeContext.isPointInPath(t,e)}isPointInStroke(t,e){return this.nativeContext.isPointInStroke(t,e)}measureText(t,e=f.w.global.measureTextMethod){var n,i;if(!e||"native"===e)return this.nativeContext.measureText(t);this.mathTextMeasure||(this.mathTextMeasure=f.w.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let r=null!=(n=this.fontFamily)?n:s.q9.fontFamily,a=null!=(i=this.fontSize)?i:s.q9.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===a||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=a,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(t,e)}putImageData(t,e,n){this.nativeContext.putImageData(t,e,n)}setLineDash(t){let e=arguments,n=this.nativeContext;this.nativeContext.setLineDash?e[0]&&n.setLineDash(e[0]):"mozDash"in n?n.mozDash=e[0]:"webkitLineDash"in n&&(n.webkitLineDash=e[0])}stroke(t){this.disableStroke||(t?this.nativeContext.stroke(t):this.nativeContext.stroke())}strokeRect(t,e,n,i){this.nativeContext.strokeRect(t,e,n,i)}strokeText(t,e,n,i){if(i=i||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[e,n,i],this.modelMatrix),e=p[0],n=p[1],i=p[2]);let t=this.camera.vp(e,n,i);e=t.x,n=t.y}this.nativeContext.strokeText(t,e,n)}drawImage(){let t=this.nativeContext,e=arguments;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(t,e,n,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(t,e,n,i,r[0]);let a=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(a,t)}),this._setCommonStyle(t,e,n,i,a)}return this._setCommonStyle(t,e,n,i,r)}_setCommonStyle(t,e,n,i,r){let a=this.nativeContext;r||(r=this.fillAttributes);let{fillOpacity:o=r.fillOpacity,opacity:s=r.opacity,fill:l=r.fill}=e;a.globalAlpha=o*s*this.baseGlobalAlpha,o>1e-12&&s>1e-12&&(a.fillStyle=(0,d.L)(this,l,t,n,i))}setShadowBlendStyle(t,e,n){if(Array.isArray(n)){if(n.length<=1)return this._setShadowBlendStyle(t,n[0]);let i=Object.create(n[0]);return n.forEach((t,e)=>{0!==e&&Object.assign(i,t)}),this._setShadowBlendStyle(t,e,i)}return this._setShadowBlendStyle(t,e,n)}_setShadowBlendStyle(t,e,n){let i=this.nativeContext;n||(n=this.fillAttributes);let{opacity:r=n.opacity,shadowBlur:a=n.shadowBlur,shadowOffsetX:o=n.shadowOffsetX,shadowOffsetY:s=n.shadowOffsetY,blur:l=n.blur,globalCompositeOperation:c=n.globalCompositeOperation}=e;if(!(r<=1e-12)){if(o||s||a){let{shadowColor:t=n.shadowColor,shadowOffsetX:r=n.shadowOffsetX,shadowOffsetY:o=n.shadowOffsetY}=e;i.shadowBlur=a*this.dpr,i.shadowColor=t,i.shadowOffsetX=r*this.dpr,i.shadowOffsetY=o*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0);l?(i.filter=`blur(${l}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(i.filter="blur(0px)",this._clearFilterStyle=!1),c?(i.globalCompositeOperation=c,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(i.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(t,e,n,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(t,e,n,i,r[0]);let a=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(a,t)}),this._setStrokeStyle(t,e,n,i,a)}return this._setStrokeStyle(t,e,n,i,r)}_setStrokeStyle(t,e,n,i,r){let a=this.nativeContext;r||(r=this.strokeAttributes);let{strokeOpacity:o=r.strokeOpacity,opacity:s=r.opacity}=e;if(a.globalAlpha=o*s*this.baseGlobalAlpha,o>1e-12&&s>1e-12){let{lineWidth:o=r.lineWidth,stroke:s=r.stroke,lineJoin:l=r.lineJoin,lineDash:c=r.lineDash,lineDashOffset:h=r.lineDashOffset,lineCap:f=r.lineCap,miterLimit:u=r.miterLimit,keepStrokeScale:p=r.keepStrokeScale}=e;a.lineWidth=p?o:(0,d.D)(this,o,this.dpr),a.strokeStyle=(0,d.L)(this,s,t,n,i),a.lineJoin=l,c&&(a.setLineDash(c),a.lineDashOffset=h),a.lineCap=f,a.miterLimit=u}}setTextStyleWithoutAlignBaseline(t,e,n){let i=this.nativeContext;e||(e=this.textAttributes);let{scaleIn3d:r=e.scaleIn3d}=t;t.font?this.font=t.font:this.font=(0,o.U)(t,e,r&&this.camera&&this.camera.getProjectionScale(n));let{fontFamily:a=e.fontFamily,fontSize:s=e.fontSize}=t;this.fontFamily=a,this.fontSize=s,i.textAlign="left",i.textBaseline="alphabetic"}setTextStyle(t,e,n){var i,r;let a=this.nativeContext;e||(e=this.textAttributes),t.font?this.font=t.font:this.font=(0,o.U)(t,e,this.camera&&this.camera.getProjectionScale(n));let{fontFamily:s=e.fontFamily,fontSize:l=e.fontSize}=t;this.fontFamily=s,this.fontSize=l,a.textAlign=null!=(i=t.textAlign)?i:e.textAlign,a.textBaseline=null!=(r=t.textBaseline)?r:e.textBaseline}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,t,e)}setClearMatrix(t,e,n,i,r,a){this._clearMatrix.setValue(t,e,n,i,r,a)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>l.QE.free(t)),this.stack.length=0}};v.env="browser",v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],v)},939569:function(t,e,n){n.d(e,{l:()=>a});var i=n(736264),r=n(826156);function a(t,e){return new i.n(n=>{n(r.r).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),n(r.A).toDynamicValue(()=>(t,n)=>new e(t,n)).whenTargetNamed(e.env)})}},891497:function(t,e,n){n.d(e,{Ns:()=>z});var i,r=n(736264),a=n(388697),o=n(686332),s=n(894442),l=n(669745),c=n(657054);let h=class extends o.u{constructor(t){super(t)}init(t){let{container:e}=t;if("string"==typeof e){let t=s.w.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new c.s(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:t}=this;t.width=this._pixelWidth,t.height=this._pixelHeight,t.style&&this.setCanvasStyle(t,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(t),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let t=this._nativeCanvas;t.style.position="absolute",t.style.top=`${this._y}px`,t.style.left=`${this._x}px`}resetStyle(t){if(!this.controled)return;let{width:e=this._displayWidth,height:n=this._displayHeight,dpr:i=this._dpr,x:r=this._x,y:a=this._y}=t,{nativeCanvas:o}=this;o.width=e*i,o.height=n*i,o.style&&this.setCanvasStyle(o,r,a,e,n),t.id&&(o.id=t.id),this.visiable||this.hide()}setCanvasStyle(t,e,n,i,r){this.controled&&(t.style.width=`${i}px`,t.style.height=`${r}px`)}toDataURL(t,e){return"image/jpeg"===t?this._nativeCanvas.toDataURL(t,e):"image/png"===t?this._nativeCanvas.toDataURL(t):this._nativeCanvas.toDataURL(t,e)}resize(t,e){this.controled&&(this._pixelWidth=t*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=t,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${t}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};h.env="browser",h=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],h);let f=(0,n(939569).l)(h,c.s);var d=n(345236),u=n(148446),p=n(249030),v=n(362199),g=n(337886),m=n(18163),y=n(330429),x=n(482074),b=function(t,e){return function(n,i){e(n,i,t)}};let C=class extends u.f{constructor(t,e,n,i){super(n,i),this.contributions=t,this.drawContribution=e,this.pickItemInterceptorContributions=n,this.pickServiceInterceptorContributions=i,this.global.hooks.onSetEnv.tap("canvas-picker-service",(t,e,n)=>{this.configure(n,e)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(t=>{this.pickerMap.set(t.numberType,t)}),super._init()}configure(t,e){this.pickCanvas=p.A.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(t,e,n,i){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let a=this.InterceptorContributions[r];if(a.beforePickItem){let r=a.beforePickItem(t,this,e,i,{parentMatrix:n});if(r)return r}}let r=this.pickerMap.get(t.numberType);if(!r)return null;let a=r.contains(t,e,i),o=a?t:null,s={graphic:o,params:a};if(o)return s;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let a=this.InterceptorContributions[r];if(a.afterPickItem){let r=a.afterPickItem(t,this,e,i,{parentMatrix:n});if(r)return r}}return s}};C=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),b(0,(0,v.f)(g.Qc)),b(0,(0,m.t)(x.EL)),b(1,(0,v.f)(y.Iv)),b(2,(0,v.f)(g.Qc)),b(2,(0,m.t)(d.uH)),b(3,(0,v.f)(g.Qc)),b(3,(0,m.t)(d.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object,Object,Object])],C);var S=n(753794);let w=class{constructor(){this.type="group",this.numberType=S.I_}contains(t,e,n){return!1}};w=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)()],w);let R=new r.n((t,e,n,i)=>{R.__vloaded||(R.__vloaded=!0,t(x.pE).to(w).inSingletonScope(),t(x.EL).toService(x.pE),(0,g.yb)(t,x.EL))});R.__vloaded=!1;let P=new r.n((t,e,n,i)=>{n(C)||t(C).toSelf().inSingletonScope(),n(d.hH)?i(d.hH).toService(C):t(d.hH).toService(C)});var _=n(985506),O=n(446861),T=n(263401),j=n(669182);let k=i=class extends _.X{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${i.idprefix}_${i.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=s.w.global,this.viewBox=new T.FB,this.modelMatrix=new j.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(t){console.error("\u53D1\u751F\u9519\u8BEF\uFF0C\u8BE5\u73AF\u5883\u4E0D\u5B58\u5728IntersectionObserver")}}isElementVisible(t){let e=t.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>n||e.top>i)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let t=new IntersectionObserver((t,e)=>{t.forEach(t=>{this._canvasIsIntersecting!==t.isIntersecting?(this._canvasIsIntersecting=t.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(t.isIntersecting)):this._canvasIsIntersecting=t.isIntersecting})});t&&t.observe(this.canvas.nativeCanvas)}createWindowByConfig(t){let e,n=this.global.createCanvas({width:t.width,height:t.height});if(!(e="string"==typeof t.container?this.global.getElementById(t.container):t.container?t.container:this.global.getRootElement()))throw Error("\u53D1\u751F\u9519\u8BEF\uFF0CcontainerId\u53EF\u80FD\u4F20\u5165\u6709\u8BEF");t.offscreen?e=null:e.appendChild(n);let r={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:n,container:e,id:i.GenerateCanvasId(),canvasControled:!0};this.canvas=new h(r)}createWindowByCanvas(t){var e;let n;if("string"==typeof t.canvas){if(!(n=this.global.getElementById(t.canvas)))throw Error("canvasId \u53C2\u6570\u4E0D\u6B63\u786E\uFF0C\u8BF7\u786E\u8BA4canvas\u5B58\u5728\u5E76\u63D2\u5165dom")}else n=t.canvas;if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u4F20\u5165\u7684canvas\u4E0D\u6B63\u786E");let i=t.width,r=t.height;if(null==i||null==r||!t.canvasControled){let t=n.getBoundingClientRect();i=t.width,r=t.height}let a=t.dpr;null==a&&(a=null!=(e=n.getContext("2d").pixelRatio)?e:n.width/i),this.canvas=new h({width:i,height:r,dpr:a,nativeCanvas:n,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(t,e,n){return this.canvas.nativeCanvas.addEventListener(t,e,n)}removeEventListener(t,e,n){return this.canvas.nativeCanvas.removeEventListener(t,e,n)}dispatchEvent(t){return this.canvas.nativeCanvas.dispatchEvent(t)}getStyle(){var t;return null!=(t=this.canvas.nativeCanvas.style)?t:{}}setStyle(t){this.canvas.nativeCanvas.style=t}getBoundingClientRect(){let t=this.canvas.nativeCanvas,e=this.getWH();return t.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(t){let e=this.viewBox,n=this.getContext(),i=this.getDpr();n.nativeContext.save(),n.nativeContext.setTransform(i,0,0,i,0,0),n.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(n.fillStyle=t,n.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),n.nativeContext.restore()}isVisible(t){return this._canvasIsIntersecting}onVisibleChange(t){this._onVisibleChangeCb=t}getTopLeft(t){return this.global.getElementTopLeft(this.canvas.nativeCanvas,t)}};k.env="browser",k.idprefix="visactor_window",k.prefix_count=0,k=i=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],k);let M=new r.n(t=>{t(k).toSelf(),t(O.zd).toDynamicValue(t=>t.container.get(k)).whenTargetNamed(k.env)});var E=n(327381),B=n(496270),D=n(89530),I=n(83624);class A{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function L(t,e=!1){let n=document.createElement("img");if(s.w.global.isImageAnonymous&&(n.crossOrigin="anonymous"),e){let e=new Blob([t],{type:"image/svg+xml"});t=window.URL.createObjectURL(e)}return(n.src=t,n.complete)?Promise.resolve(n):new Promise((t,e)=>{n.onload=()=>{t(n)},n.onerror=()=>{e(Error("\u52A0\u8F7D\u5931\u8D25"))}})}let F=class extends E.z{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(t){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(t,e){var n,i;let r=0,a=0,o=0,s=0;if(t.changedTouches){let e=null!=(n=t.changedTouches[0])?n:{};r=e.clientX||0,a=e.clientY||0,o=r,s=a}else r=t.clientX||0,a=t.clientY||0,o=t.offsetX||0,s=t.offsetY||0;if(e){let t,n,o=r,s=a,l=e.getBoundingClientRect(),c=null==(i=e.getNativeHandler)?void 0:i.call(e).nativeCanvas;return c&&(t=l.width/c.offsetWidth,n=l.height/c.offsetHeight),{x:(o-l.left)/((0,D.Z)(t)?t:1),y:(s-l.top)/((0,D.Z)(n)?n:1)}}return{x:o,y:s}}getNativeAABBBounds(t){let e=t;return("string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/html").firstChild).lastChild&&(e=e.lastChild.firstChild),e.getBoundingClientRect)?new A(e.getBoundingClientRect()):new T.FB}removeDom(t){return t.parentElement.removeChild(t),!0}updateDom(t,e){let{width:n,height:i,style:r}=e;return r&&((0,I.Z)(r)?t.setAttribute("style",r):Object.keys(r).forEach(e=>{t.style[e]=r[e]})),null!=n&&(t.style.width=`${n}px`),null!=i&&(t.style.height=`${i}px`),!0}createDom(t){let{tagName:e="div",parent:n}=t,i=document.createElement(e);if(this.updateDom(i,t),n){let t=(0,I.Z)(n)?this.getElementById(n):n;t&&t.appendChild&&t.appendChild(i)}return i}loadImage(t){return L(t,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(t){return L(t,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(t){var e,n;let i=document.createElement("canvas");t.id&&(i.id=null!=(e=t.id)?e:B.R.GenAutoIncrementId().toString());let r=null!=(n=t.dpr)?n:window.devicePixelRatio;return t.width&&t.height&&(i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.width=t.width*r,i.height=t.height*r),i}createOffscreenCanvas(t){var e;let n=null!=(e=t.dpr)?e:window.devicePixelRatio;return new OffscreenCanvas(t.width*n,t.height*n)}releaseCanvas(t){let e;(e="string"==typeof t?document.getElementById(t):t)&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(t,e,n){return document.addEventListener(t,e,n)}removeEventListener(t,e,n){return document.removeEventListener(t,e,n)}dispatchEvent(t){return document.dispatchEvent(t)}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}getDocument(){return document}release(...t){}getElementTop(t,e){let n=t.offsetTop,i=t.offsetParent;for(;null!==i;)n+=i.offsetTop,i=i.offsetParent;return n}getElementLeft(t,e){let n=t.offsetLeft,i=t.offsetParent;for(;null!==i;)n+=i.offsetLeft,i=i.offsetParent;return n}getElementTopLeft(t,e){let n=t.offsetTop,i=t.offsetLeft,r=t.offsetParent;for(;null!==r;)n+=r.offsetTop,i+=r.offsetLeft,r=r.offsetParent;return{top:n,left:i}}loadFont(t,e,n){var i,r,a,o;return i=this,r=void 0,a=void 0,o=function*(){return new FontFace(t,(0,I.Z)(e)?`url(${e})`:e,n).load().then(function(t){return document.fonts.add(t),{loadState:"success"}}).catch(function(t){return console.error("Failed to load font:",t),{loadState:"fail"}})},new(a||(a=Promise))(function(t,e){function n(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof a?i:new a(function(t){t(i)})).then(n,s)}l((o=o.apply(i,r||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(t){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(t){return navigator.clipboard.writeText(t).then(()=>{}).catch(t=>{})}};F=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],F);let W=new r.n(t=>{W.isBrowserBound||(W.isBrowserBound=!0,t(F).toSelf().inSingletonScope(),t(a.D0).toService(F))});function z(t,e=!0){z.__loaded||(z.__loaded=!0,t.load(W),t.load(f),t.load(M),e&&(t.load(R),t.load(P)))}W.isBrowserBound=!1,z.__loaded=!1},910379:function(t,e,n){n.d(e,{sn:()=>R});var i,r=n(736264),a=n(388697),o=n(686332),s=n(669745),l=n(669182),c=n(657054);let h=class extends c.s{constructor(t,e){super(t,e);let n=t.nativeCanvas.getContext("2d");if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u83B7\u53D62d\u4E0A\u4E0B\u6587\u5931\u8D25");this.nativeContext=n,this.canvas=t,this.matrix=new l.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=e?e:1}release(...t){}};h.env="node",h=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],h);var f=n(796241);let d=class extends o.u{constructor(t){super(t)}init(){this._context=new h(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...t){this._nativeCanvas.release&&(0,f.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};d.env="node",d=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],d);let u=(0,n(939569).l)(d,h);var p=n(985506),v=n(496270),g=n(362199),m=n(446861);let y=class extends p.X{get container(){return null}constructor(t){super(),this.global=t,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t)}createWindowByConfig(t){let e=this.global.createCanvas({width:t.width,height:t.height}),n={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:e,id:v.R.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new d(n)}createWindowByCanvas(t){var e;let n=t.canvas,i=null!=(e=t.dpr)?e:1,r=t.width,a=t.height;null!=r&&null!=a&&t.canvasControled||(r=n.width/i,a=n.height/i),this.canvas=new d({width:r,height:a,dpr:i,nativeCanvas:n,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(t="image/png"){return this.canvas.nativeCanvas.toBuffer(t)}addEventListener(t,e,n){}dispatchEvent(t){return!0}removeEventListener(t,e,n){}getStyle(){}setStyle(t){}getBoundingClientRect(){return null}clearViewBox(t){}};y.env="node",y=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),(i=(0,g.f)(a.y2),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y);let x=new r.n(t=>{t(y).toSelf(),t(m.zd).toDynamicValue(t=>t.container.get(y)).whenTargetNamed(y.env)});var b=n(327381),C=n(917486);let S=class extends b.z{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(t,e){t.env===this.type&&(t.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(t){let{loadImage:e}=this.pkg;return e?e(t).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(t){let e=this.pkg.Resvg;if(!e)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let n=new e(t).render().asPng();return this.loadImage(n)}createCanvas(t){return this.pkg.createCanvas(t.width,t.height)}releaseCanvas(t){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(t){return C.dZ.call(t)}}getCancelAnimationFrame(){return t=>{C.dZ.clear(t)}}addEventListener(t,e,n){}removeEventListener(t,e,n){}getElementById(t){return null}getRootElement(){return null}dispatchEvent(t){}release(...t){}createOffscreenCanvas(t){}};S=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)()],S);let w=new r.n(t=>{w.isNodeBound||(w.isNodeBound=!0,t(S).toSelf().inSingletonScope(),t(a.D0).toService(S))});function R(t,e=!0){R.__loaded||(R.__loaded=!0,t.load(w),t.load(u),t.load(x))}w.isNodeBound=!1,R.__loaded=!1},976840:function(t,e,n){n.d(e,{o:()=>h});var i=n(625872),r=n(894442),a=n(843181),o=n(421883),s=n.n(o);let l=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return Math.abs(n)>Math.abs(i)?n>0?"right":"left":i>0?"down":"up"},c=(t,e)=>{let n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(n*n+i*i)};class h extends s(){constructor(t,e={}){var n,r,a,o,s,h,f,d,u,p;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=t=>{this.startTime=i.m.now();let{cachedEvents:e,startPoints:n}=this;t&&e.push(t.clone()),n.length=e.length;for(let t=0;t<e.length;t++){let{x:i,y:r}=e[t],a={x:i,y:r};n[t]=a}if(1!==n.length)this.startDistance=c(n[0],n[1]),this.center=(t=>{let e=t.length;if(1===e)return{x:Math.round(t[0].x),y:Math.round(t[0].y)};let n=0,i=0,r=0;for(;r<e;)n+=t[r].x,i+=t[r].y,r++;return{x:Math.round(n/e),y:Math.round(i/e)}})([n[0],n[1]]);else{let t=e[0];this.pressTimeout=setTimeout(()=>{t.direction="none",t.deltaX=0,t.deltaY=0,t.points=n,this.triggerStartEvent("press",t),this.triggerEvent("press",t),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=t=>{this.clearPressTimeout();let{startPoints:e,cachedEvents:n}=this;if(!e.length)return;let r=t.clone(),{x:a,y:o,pointerId:s}=r;for(let t=0,e=n.length;t<e;t++)if(s===n[t].pointerId){n[t]=r;break}let h={x:a,y:o},f=n.map(t=>({x:t.x,y:t.y})),d=i.m.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=d,this.lastMovePoint=h,1===e.length){let t=e[0],n=a-t.x,i=o-t.y,s=this.direction||l(t,h);this.direction=s;let c=this.getEventType(h);return r.direction=s,r.deltaX=n,r.deltaY=i,r.points=f,this.triggerStartEvent(c,r),void this.triggerEvent(c,r)}let{startDistance:u}=this;r.scale=c(f[0],f[1])/u,r.center=this.center,r.points=f,this.triggerStartEvent("pinch",r),this.triggerEvent("pinch",r)},this.onEnd=t=>{let e=t.clone(),{cachedEvents:n,startPoints:r}=this;if(e.points=n.map(t=>({x:t.x,y:t.y})),this.triggerEndEvent(e),1===n.length){let n=i.m.now(),a=this.lastMoveTime;if(n-a<100){let t=a-(this.prevMoveTime||this.startTime);if(t>0){let n=this.prevMovePoint||r[0],i=this.lastMovePoint||r[0],a=c(n,i),o=a/t;if(o>this.config.swipe.velocity&&a>this.config.swipe.threshold)return e.velocity=o,e.direction=l(n,i),this.triggerEvent("swipe",e),this.cachedEvents=[],this.startPoints=[],void this.reset()}}n-this.startTime<this.config.press.time&&(n-this.lastTapTime<this.config.tap.interval&&t.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=n,this.lastTapTarget=t.target,1===this.tapCount?this.triggerEvent("tap",e):2===this.tapCount&&(this.triggerEvent("doubletap",e),this.tapCount=0))}for(let t=0,i=n.length;t<i;t++)if(n[t].pointerId===e.pointerId){n.splice(t,1),r.splice(t,1);break}this.reset(),n.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!=(r=null==(n=null==e?void 0:e.press)?void 0:n.time)?r:251,threshold:null!=(o=null==(a=null==e?void 0:e.press)?void 0:a.threshold)?o:9},swipe:{threshold:null!=(h=null==(s=null==e?void 0:e.swipe)?void 0:s.threshold)?h:10,velocity:null!=(d=null==(f=null==e?void 0:e.swipe)?void 0:f.velocity)?d:.3},tap:{interval:null!=(p=null==(u=null==e?void 0:e.tap)?void 0:u.interval)?p:300}},this.initEvents()}initEvents(){let{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerleave",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerleave",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){let e,{eventType:n,startTime:r,startPoints:a}=this;return"press"===n?n:(e=i.m.now()-r>this.config.press.time&&c(a[0],t)<this.config.press.threshold?"press":"pan",this.eventType=e,e)}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){let{emitThrottles:n}=this,i={type:t,ev:e};for(let e=0,r=n.length;e<r;e++)if(n[e].type===t)return void n.splice(e,1,i);n.push(i)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);let{throttleTimer:n,emitThrottles:i}=this;n||(this.throttleTimer=r.w.global.getRequestAnimationFrame()(()=>{r.w.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let t=0,e=i.length;t<e;t++){let{type:e,ev:n}=i[t];this.emitEvent(e,n)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){let e=this.processEvent;Object.keys(e).forEach(n=>{this.triggerEvent(`${n}end`,t),"press"===n&&this.triggerEvent(`${n}up`,t),delete e[n]})}emitEvent(t,e){if(!this.element)return;let n=this.element._events[a.g];if(n)if("fn"in n)n.fn.call(n.context,e,t);else for(let i=0,r=n.length;i<r&&!e.propagationImmediatelyStopped;i++)n[i].fn.call(n[i].context,e,t);this.emit(t,e)}}},161527:function(t,e,n){n.d(e,{D:()=>a});var i=n(44864),r=n(624108);class a extends i.Y{contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let a=t.getGraphicTheme();i.highPerformanceSave();let{x:o,y:s,z:l,lastModelMatrix:c}=this.transform(t,a,i),h=e;if(i.camera){h=e.clone();let n=t.parent.globalTransMatrix;h.x=n.a*e.x+n.c*e.y+n.e,h.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=l;let f=!1;return this.canvasRenderer.drawShape(t,i,o,s,n,null,(t,e,n)=>!!f||(f=t.isPointInPath(h.x,h.y))),this.canvasRenderer.z=0,i.modelMatrix!==c&&r.yp.free(i.modelMatrix),i.modelMatrix=c,i.highPerformanceRestore(),f}}},878051:function(t,e,n){n.d(e,{Q:()=>o});var i=n(44864),r=n(902978),a=n(624108);class o extends i.Y{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:i}=null!=n?n:{};if(!i)return!1;i.highPerformanceSave();let o=t.getGraphicTheme(),{x:s,y:l,z:c,lastModelMatrix:h}=this.transform(t,o,i),f=e;if(i.camera){f=e.clone();let n=t.parent.globalTransMatrix;f.x=n.a*e.x+n.c*e.y+n.e,f.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=c;let d=!1;return this.canvasRenderer.drawShape(t,i,s,l,{},null,t=>!!d||(d=t.isPointInPath(f.x,f.y)),(t,e,n)=>{if(d)return!0;let a=e.lineWidth||n.lineWidth,o=e.pickStrokeBuffer||n.pickStrokeBuffer;return i.lineWidth=e.keepStrokeScale||n.keepStrokeScale?a+o:(0,r.D)(i,a+o,i.dpr),d=t.isPointInStroke(f.x,f.y)}),this.canvasRenderer.z=0,i.modelMatrix!==h&&a.yp.free(i.modelMatrix),i.modelMatrix=h,i.highPerformanceRestore(),d}}},108645:function(t,e,n){n.d(e,{o:()=>r});var i=n(902978);class r{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:r}=null!=n?n:{};if(!r)return!1;let a=t.getGraphicTheme();r.highPerformanceSave();let{x:o=a.x,y:s=a.y}=t.attribute;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(a);o+=e.x,s+=e.y,r.setTransformForCurrent()}else o=0,s=0,r.transformFromMatrix(t.transMatrix,!0);let l=!1,c=!1;return this.canvasRenderer.drawShape(t,r,o,s,{},null,(t,n,i,r)=>!(!l&&!c)||(l=t.isPointInPath(e.x,e.y),c=r||c,l),(t,n,a,o)=>{if(l||c)return!0;let s=n.lineWidth||a.lineWidth,h=n.pickStrokeBuffer||a.pickStrokeBuffer;return r.lineWidth=n.keepStrokeScale||a.keepStrokeScale?s+h:(0,i.D)(r,s+h,r.dpr),l=t.isPointInStroke(e.x,e.y),c=o||c,l}),r.highPerformanceRestore(),l}}},482074:function(t,e,n){n.d(e,{$Y:()=>a,CV:()=>g,EL:()=>T,ES:()=>x,Ex:()=>c,RC:()=>S,Rz:()=>y,Se:()=>_,Sp:()=>w,TF:()=>C,Uv:()=>p,XN:()=>i,Yr:()=>f,ZY:()=>P,cs:()=>s,e_:()=>v,g2:()=>l,ks:()=>b,nb:()=>h,p1:()=>d,pE:()=>O,t3:()=>r,uV:()=>u,ww:()=>R,xp:()=>o,zT:()=>m});let i=Symbol.for("MathPickerContribution"),r=Symbol.for("MathArcPicker"),a=Symbol.for("MathAreaPicker"),o=Symbol.for("MathCirclePicker"),s=Symbol.for("MathImagePicker"),l=Symbol.for("MathLinePicker"),c=Symbol.for("MathPathPicker"),h=Symbol.for("MathRectPicker"),f=Symbol.for("MathSymbolPicker"),d=Symbol.for("MathTextPicker"),u=Symbol.for("MathPolygonPicker"),p=Symbol.for("MathGlyphPicker"),v=Symbol.for("CanvasArcPicker");Symbol.for("CanvasArc3dPicker");let g=Symbol.for("CanvasAreaPicker"),m=Symbol.for("CanvasCirclePicker"),y=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let x=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let b=Symbol.for("CanvasPathPicker"),C=Symbol.for("CanvasRectPicker");Symbol.for("CanvasRect3dPicker");let S=Symbol.for("CanvasSymbolPicker"),w=Symbol.for("CanvasTextPicker"),R=Symbol.for("CanvasPolygonPicker");Symbol.for("CanvasPyramid3dPicker");let P=Symbol.for("CanvasRichTextPicker"),_=Symbol.for("CanvasGlyphPicker"),O=Symbol.for("CanvasGroupPicker");Symbol.for("CanvasStarPicker");let T=Symbol.for("CanvasPickerContribution")},836171:function(t,e,n){n.d(e,{Z:()=>a});var i=n(753794),r=n(669745);let a=class{constructor(){this.type="image",this.numberType=i.PN}contains(t,e,n){let{pickContext:i}=null!=n?n:{};return!!i&&!!t.AABBBounds.containsPoint(e)}};a=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,r.b)()],a)},393295:function(t,e,n){n.d(e,{X:()=>i});let i=(0,n(959747).kP)()},249157:function(t,e,n){n.d(e,{x:()=>w});var i,r,a=n(560629),o=n(64849),s=n(55457),l=n(393295),c=n(736264),h=n(753794),f=n(669745),d=n(362199),u=n(330429),p=n(108645);let v=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=h.r_}};v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.Xe),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);var g=n(482074);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(g.e_).to(v).inSingletonScope(),t(g.EL).toService(g.e_))}),x=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=h.r_}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(r=(0,d.f)(u.Xe),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(g.t3).to(x).inSingletonScope(),t(g.XN).toService(g.t3))});function S(){S.__loaded||(S.__loaded=!0,(0,a.l)(),o.n.load(s._),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},279423:function(t,e,n){n.d(e,{d:()=>w});var i,r,a=n(340436),o=n(64849),s=n(625781),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(669745),u=n(362199),p=n(330429),v=n(108645);let g=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=f.Ri}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.Gs),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.CV).to(g).inSingletonScope(),t(h.EL).toService(h.CV))}),x=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="area",this.numberType=f.Ri}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.Gs),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.$Y).to(x).inSingletonScope(),t(h.XN).toService(h.$Y))});function S(){S.__loaded||(S.__loaded=!0,(0,a.L)(),o.n.load(s.N),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},692616:function(t,e,n){n.d(e,{f:()=>w});var i,r,a=n(35805),o=n(64849),s=n(905839),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(669745),u=n(362199),p=n(330429),v=n(108645);let g=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.aP),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.zT).to(g).inSingletonScope(),t(h.EL).toService(h.zT))}),x=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.aP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.xp).to(x).inSingletonScope(),t(h.XN).toService(h.xp))});function S(){S.__loaded||(S.__loaded=!0,(0,a.g)(),o.n.load(s.z),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},313087:function(t,e,n){n.d(e,{G:()=>w});var i,r,a=n(439213),o=n(64849),s=n(111553),l=n(393295),c=n(736264),h=n(482074),f=n(669745),d=n(362199),u=n(330429),p=n(753794);class v{constructor(){this.type="glyph",this.numberType=p.Nd}contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=null==n?void 0:n.pickerService;if(r){let i=!1;return t.getSubGraphic().forEach(t=>{if(i)return;let a=r.pickItem(t,e,null,n);i=!(!a||!a.graphic)}),i}return!1}}let g=class extends v{constructor(t){super(),this.canvasRenderer=t}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.FU),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.Se).to(g).inSingletonScope(),t(h.EL).toService(h.Se))}),x=class extends v{constructor(t){super(),this.canvasRenderer=t}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(r=(0,d.f)(u.FU),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.Uv).to(x).inSingletonScope(),t(x).toService(h.Uv))});function S(){S.__loaded||(S.__loaded=!0,(0,a.M)(),o.n.load(s.I),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},745772:function(t,e,n){n.d(e,{M:()=>a});var i=n(794555);function r(){r.__loaded||(r.__loaded=!0,(0,i.t)())}r.__loaded=!1;let a=r},349826:function(t,e,n){n.d(e,{i:()=>S});var i,r=n(388084),a=n(64849),o=n(714032),s=n(393295),l=n(736264),c=n(482074),h=n(753794),f=n(669745),d=n(362199),u=n(330429),p=n(108645);let v=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="image",this.numberType=h.PN}};v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.e0),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);let g=!1,m=new l.n((t,e,n,i)=>{g||(g=!0,t(c.Rz).to(v).inSingletonScope(),t(c.EL).toService(c.Rz))});var y=n(836171);let x=!1,b=new l.n((t,e,n,i)=>{x||(x=!0,t(c.cs).to(y.Z).inSingletonScope(),t(y.Z).toService(c.cs))});function C(){C.__loaded||(C.__loaded=!0,(0,r.u)(),a.n.load(o.j),a.n.load(s.X?m:b))}C.__loaded=!1;let S=C},262041:function(t,e,n){n.d(e,{N:()=>R});var i,r,a=n(854085),o=n(64849),s=n(519617),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(669745),u=n(362199),p=n(330429),v=n(878051);let g=class extends v.Q{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.O),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ES).to(g).inSingletonScope(),t(h.EL).toService(h.ES))});var x=n(108645);let b=class extends x.o{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.O),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let C=!1,S=new c.n((t,e,n,i)=>{C||(C=!0,t(h.g2).to(b).inSingletonScope(),t(h.XN).toService(h.g2))});function w(){w.__loaded||(w.__loaded=!0,(0,a.c)(),o.n.load(s.Q),o.n.load(l.X?y:S))}w.__loaded=!1;let R=w},479816:function(t,e,n){n.d(e,{N:()=>R});var i,r,a=n(590652),o=n(64849),s=n(269568),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(669745),u=n(362199),p=n(330429),v=n(878051);let g=class extends v.Q{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=f.qm}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.lG),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ks).to(g).inSingletonScope(),t(h.EL).toService(h.ks))});var x=n(108645);let b=class extends x.o{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=f.qm}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.lG),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let C=!1,S=new c.n((t,e,n,i)=>{C||(C=!0,t(h.Ex).to(b).inSingletonScope(),t(h.XN).toService(h.Ex))});function w(){w.__loaded||(w.__loaded=!0,(0,a.O)(),o.n.load(s.f),o.n.load(l.X?y:S))}w.__loaded=!1;let R=w},401470:function(t,e,n){n.d(e,{M:()=>w});var i,r,a=n(975957),o=n(64849),s=n(67866),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(669745),u=n(362199),p=n(330429),v=n(108645);let g=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=f.Kh}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.ZT),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ww).to(g).inSingletonScope(),t(h.EL).toService(h.ww))}),x=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=f.Kh}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.ZT),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.uV).to(x).inSingletonScope(),t(h.XN).toService(h.uV))});function S(){S.__loaded||(S.__loaded=!0,(0,a.d)(),o.n.load(s.M),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},18029:function(t,e,n){n.d(e,{k:()=>T});var i,r,a=n(58474),o=n(64849),s=n(872432),l=n(393295),c=n(736264),h=n(482074),f=n(669745),d=n(362199),u=n(330429),p=n(263401),v=n(704654),g=n(695723),m=n(753794),y=n(902978);let x=new p.FB;class b{constructor(){this.type="rect",this.numberType=m._u}contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.getGraphicTheme(),{cornerRadius:a=r.cornerRadius}=t.attribute,{x:o=r.x,y:s=r.y}=t.attribute;i.highPerformanceSave();let l=!0;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(r);o+=e.x,s+=e.y,i.setTransformForCurrent()}else o=0,s=0,l=!1,i.transformFromMatrix(t.transMatrix,!0);let c=!0;if(!l||t.shadowRoot||(0,v.Z)(a,!0)&&0!==a||(0,g.Z)(a)&&a.some(t=>0!==t))c=!1,this.canvasRenderer.drawShape(t,i,o,s,{},null,(t,n,i)=>!!c||(c=t.isPointInPath(e.x,e.y)),(t,n,r)=>{if(c)return!0;let a=n.lineWidth||r.lineWidth,o=n.pickStrokeBuffer||r.pickStrokeBuffer;return i.lineWidth=n.keepStrokeScale||r.keepStrokeScale?a+o:(0,y.D)(i,a+o,i.dpr),c=t.isPointInStroke(e.x,e.y)});else{let{fill:n=r.fill,stroke:i=r.stroke,lineWidth:a=r.lineWidth}=t.attribute;if(n)c=!0;else if(i){let n=t.AABBBounds;x.setValue(n.x1,n.y1,n.x2,n.y2),x.expand(-a/2),c=!x.containsPoint(e)}}return i.highPerformanceRestore(),c}}let C=class extends b{constructor(t){super(),this.canvasRenderer=t}};C=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.Uj),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C);let S=!1,w=new c.n((t,e,n,i)=>{S||(S=!0,t(h.TF).to(C).inSingletonScope(),t(h.EL).toService(h.TF))}),R=class extends b{constructor(t){super(),this.canvasRenderer=t}};R=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(r=(0,d.f)(u.Uj),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let P=!1,_=new c.n((t,e,n,i)=>{P||(P=!0,t(h.nb).to(R).inSingletonScope(),t(h.XN).toService(h.nb))});function O(){O.__loaded||(O.__loaded=!0,(0,a.M)(),o.n.load(s.c),o.n.load(l.X?w:_))}O.__loaded=!1;let T=O},657256:function(t,e,n){n.d(e,{v:()=>C});var i,r=n(444634),a=n(64849),o=n(51098),s=n(393295),l=n(736264),c=n(482074),h=n(753794),f=n(669745),d=n(362199),u=n(330429);let p=class{constructor(t){this.canvasRenderer=t,this.type="richtext",this.numberType=h.$M}contains(t,e,n){return!!t.AABBBounds.containsPoint(e)}};p=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.fS),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],p);let v=!1,g=new l.n((t,e,n,i)=>{v||(v=!0,t(c.ZY).to(p).inSingletonScope(),t(c.EL).toService(c.ZY))});var m=n(836171);let y=!1,x=new l.n((t,e,n,i)=>{y||(y=!0,t(c.cs).to(m.Z).inSingletonScope(),t(m.Z).toService(c.cs))});function b(){b.__loaded||(b.__loaded=!0,(0,r.R)(),a.n.load(o.k),a.n.load(s.X?g:x))}b.__loaded=!1;let C=b},905688:function(t,e,n){n.d(e,{W:()=>a});var i=n(579190);function r(){r.__loaded||(r.__loaded=!0,(0,i.T)())}r.__loaded=!1;let a=r},483590:function(t,e,n){n.d(e,{k:()=>_});var i,r,a=n(412311),o=n(64849),s=n(723465),l=n(393295),c=n(736264),h=n(482074),f=n(753794),d=n(902978),u=n(624108),p=n(669745),v=n(362199),g=n(330429),m=n(161527);let y=class extends m.D{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=f.B5}contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.getParsedPath();if(!i.camera){if(!t.AABBBounds.containsPoint(e))return!1;if(r.isSvg||"imprecise"===t.attribute.pickMode)return!0}i.highPerformanceSave();let a=t.getGraphicTheme(),{x:o,y:s,z:l,lastModelMatrix:c}=this.transform(t,a,i),h=e;if(i.camera){h=e.clone();let n=t.parent.globalTransMatrix;h.x=n.a*e.x+n.c*e.y+n.e,h.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=l;let f=!1;return this.canvasRenderer.drawShape(t,i,o,s,{},null,(t,e,n)=>!!f||(f=t.isPointInPath(h.x,h.y)),(t,e,n)=>{if(f)return!0;let r=e.lineWidth||n.lineWidth,a=e.pickStrokeBuffer||n.pickStrokeBuffer;return i.lineWidth=e.keepStrokeScale||n.keepStrokeScale?r+a:(0,d.D)(i,r+a,i.dpr),f=t.isPointInStroke(h.x,h.y)}),this.canvasRenderer.z=0,i.modelMatrix!==c&&u.yp.free(i.modelMatrix),i.modelMatrix=c,i.highPerformanceRestore(),f}};y=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,p.b)(),(i=(0,v.f)(g.tP),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y);let x=!1,b=new c.n((t,e,n,i)=>{x||(x=!0,t(h.RC).to(y).inSingletonScope(),t(h.EL).toService(h.RC))});var C=n(108645);let S=class extends C.o{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=f.B5}};S=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,p.b)(),(r=(0,v.f)(g.tP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);let w=!1,R=new c.n((t,e,n,i)=>{w||(w=!0,t(h.Yr).to(S).inSingletonScope(),t(h.XN).toService(h.Yr))});function P(){P.__loaded||(P.__loaded=!0,(0,a.n)(),o.n.load(s.A),o.n.load(l.X?b:R))}P.__loaded=!1;let _=P},865509:function(t,e,n){n.d(e,{g:()=>R});var i,r=n(348713),a=n(64849),o=n(602262),s=n(393295),l=n(736264),c=n(482074),h=n(753794),f=n(351727),d=n(624108),u=n(669745),p=n(362199),v=n(330429),g=n(161527);let m=class extends g.D{constructor(t){super(),this.canvasRenderer=t,this.type="text",this.numberType=h.Us}contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.AABBBounds;if(!i.camera)return!!r.containsPoint(e);i.highPerformanceSave();let a=t.getGraphicTheme(),{keepDirIn3d:o=a.keepDirIn3d}=t.attribute,{x:s,y:l,z:c,lastModelMatrix:h}=this.transform(t,a,i,!o);this.canvasRenderer.z=c;let u=e;if(i.camera){u=e.clone();let n=t.parent.globalTransMatrix;u.x=n.a*e.x+n.c*e.y+n.e,u.y=n.b*e.x+n.d*e.y+n.f}let p=!1;return this.canvasRenderer.drawShape(t,i,s,l,{},null,(e,n,i)=>{if(p)return!0;let{fontSize:r=a.fontSize,textBaseline:o=a.textBaseline,textAlign:h=a.textAlign}=t.attribute,d=t.AABBBounds,v=d.height(),g=d.width(),m=(0,f.nV)(o,v,r),y=(0,f.js)(h,g);return e.rect(y+s,m+l,g,v,c),p=e.isPointInPath(u.x,u.y)},(t,e,n)=>p),this.canvasRenderer.z=0,i.modelMatrix!==h&&d.yp.free(i.modelMatrix),i.modelMatrix=h,i.highPerformanceRestore(),p}};m=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)(),(i=(0,p.f)(v.EY),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],m);let y=!1,x=new l.n((t,e,n,i)=>{y||(y=!0,t(c.Sp).to(m).inSingletonScope(),t(c.EL).toService(c.Sp))}),b=class{constructor(){this.type="text",this.numberType=h.Us}contains(t,e,n){return!!t.AABBBounds.containsPoint(e)}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)()],b);let C=!1,S=new l.n((t,e,n,i)=>{C||(C=!0,t(c.p1).to(b).inSingletonScope(),t(c.XN).toService(c.p1))});function w(){w.__loaded||(w.__loaded=!0,(0,r.v)(),a.n.load(o.D),a.n.load(s.X?x:S))}w.__loaded=!1;let R=w},992770:function(t,e,n){n.d(e,{s:()=>v});var i=n(408830),r=n(669182),a=n(985476),o=n(390180),s=n(678412),l=n(418953),c=n(795069),h=n(938166),f=n(509257),d=n(830420),u=n(360309);let p=[0,0,0],v=class{set fillStyle(t){this.nativeContext.fillStyle=t}get fillStyle(){return this.nativeContext.fillStyle}set font(t){t!==this._font&&(this._font=t,this.nativeContext.font=t)}get font(){var t;return null!=(t=this._font)?t:this.nativeContext.font}set globalAlpha(t){this.nativeContext.globalAlpha=t*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(t){this.nativeContext.lineCap=t}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(t){this.nativeContext.lineDashOffset=t}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(t){this.nativeContext.lineJoin=t}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(t){this.nativeContext.lineWidth=t}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(t){this.nativeContext.miterLimit=t}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(t){this.nativeContext.shadowBlur=t}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(t){this.nativeContext.shadowColor=t}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(t){this.nativeContext.shadowOffsetX=t}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(t){this.nativeContext.shadowOffsetY=t}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(t){this.nativeContext.strokeStyle=t}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(t){this.nativeContext.textAlign=t}get textAlign(){return this.nativeContext.textAlign}set textBaseline(t){this.nativeContext.textBaseline=t}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(t){!!this._inuse!==t&&(this._inuse=t,t?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(t,e){this.fillAttributes=Object.assign(Object.assign({},s.pp),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},s.WC),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},s.q9),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let n=t.nativeCanvas.getContext("2d");if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u83B7\u53D62d\u4E0A\u4E0B\u6587\u5931\u8D25");this.nativeContext=n,this.canvas=t,this.matrix=new r.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new r.y(1,0,0,1,0,0),this._clearMatrix=new r.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(t=!0){this.stack.length&&a.Y.getInstance().warn("\u53EF\u80FD\u5B58\u5728bug\uFF0Cmatrix\u6CA1\u6709\u6E05\u7A7A"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new r.y(1,0,0,1,0,0),this.stack.length=0,t&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(t){return l.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t),this.nativeContext.save()}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,n=!0){this.matrix.scale(t,e),n&&this.setTransformForCurrent()}setScale(t,e,n=!0){this.matrix.setScale(t,e),n&&this.setTransformForCurrent()}scalePoint(t,e,n,i,r=!0){this.translate(n,i,!1),this.scale(t,e,!1),this.translate(-n,-i,!1),r&&this.setTransformForCurrent()}setTransform(t,e,n,i,r,a,o=!0,s=this.dpr){this.matrix.setValue(s*t,s*e,s*n,s*i,s*r,s*a),o&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,n=this.dpr){this.matrix.setValue(t.a*n,t.b*n,t.c*n,t.d*n,t.e*n,t.f*n),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,n,i,r,a,o=!0){this.matrix.multiply(t,e,n,i,r,a),o&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,n=!0){this.matrix.translate(t,e),n&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let n=t*Math.PI/180;this.rotate(n,e)}rotateAbout(t,e,n,i=!0){this.translate(e,n,!1),this.rotate(t,!1),this.translate(-e,-n,!1),i&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,n,i=!0){this.translate(e,n,!1),this.rotateDegrees(t,!1),this.translate(-e,-n,!1),i&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(t,e){t?"string"==typeof t?this.nativeContext.clip(t):this.nativeContext.clip(t,e):this.nativeContext.clip()}arc(t,e,n,r,a,o,s){if(s=s||0,this.camera){let l=[];((t,e,n,r,a,o,s,l)=>{if(l)for(;n>e;)n-=i.f7;else for(;n<e;)n+=i.f7;let c=i.pi/3*(n>e?1:-1),h=e,f=h;for(;f!==n;){let e=4*Math.tan(Math.abs((f=c>0?Math.min(f+c,n):Math.max(f+c,n))-h)/4)/3,i=f<h?-1:1,l=Math.cos(h),d=Math.sin(h),u=Math.cos(f),p=Math.sin(f),v=l*o+r,g=d*s+a,m=u*o+r,y=p*s+a,x=o*e*i,b=s*e*i;t.push([v-x*d,g+b*l,m+x*p,y-b*u,m,y]),h=f}})(l,r,a,t,e,n,n,o);for(let t=0;t<l.length;++t){let e=l[t];this.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5],s)}}else this.nativeContext.arc(t,e,Math.max(0,n),r,a,o)}arcTo(t,e,n,i,r){this.nativeContext.arcTo(t,e,n,i,r)}bezierCurveTo(t,e,n,i,r,a,o){if(o=o||0,this.camera){let s=o,l=o;this.modelMatrix&&((0,c.fF)(p,[t,e,o],this.modelMatrix),t=p[0],e=p[1],s=p[2],(0,c.fF)(p,[n,i,o],this.modelMatrix),n=p[0],i=p[1],l=p[2],(0,c.fF)(p,[r,a,o],this.modelMatrix),r=p[0],a=p[1],o=p[2]);let h=this.camera.vp(r,a,o);r=h.x,a=h.y,t=(h=this.camera.vp(t,e,s)).x,e=h.y,n=(h=this.camera.vp(n,i,l)).x,i=h.y}this.nativeContext.bezierCurveTo(t,e,n,i,r,a)}closePath(){this.nativeContext.closePath()}ellipse(t,e,n,i,r,a,o,s){null==s?this.nativeContext.ellipse(t,e,n,i,r,a,o):this.nativeContext.ellipse(t,e,n,i,r,a,o,s)}lineTo(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}this.nativeContext.lineTo(t,e)}moveTo(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}this.nativeContext.moveTo(t,e)}quadraticCurveTo(t,e,n,i,r){if(r=r||0,this.camera){let a=r;this.modelMatrix&&((0,c.fF)(p,[t,e,r],this.modelMatrix),t=p[0],e=p[1],a=p[2],(0,c.fF)(p,[n,i,r],this.modelMatrix),n=p[0],i=p[1],r=p[2]);let o=this.camera.vp(n,i,r);n=o.x,i=o.y,t=(o=this.camera.vp(t,e,a)).x,e=o.y}this.nativeContext.quadraticCurveTo(t,e,n,i)}rect(t,e,n,i,r){r=r||0,this.camera?(this.moveTo(t,e,r),this.lineTo(t+n,e,r),this.lineTo(t+n,e+i,r),this.lineTo(t,e+i,r),this.closePath()):this.nativeContext.rect(t,e,n,i)}createImageData(){let t=arguments;return 2===t.length?this.nativeContext.createImageData(t[0],t[1]):1===t.length?this.nativeContext.createImageData(t[0]):null}createLinearGradient(t,e,n,i){return isFinite(t+e+n+i)||(t=0,e=0,n=0,i=0),this.nativeContext.createLinearGradient(t,e,n,i)}createPattern(t,e){return 0===t.width||0===t.height?null:this.nativeContext.createPattern(t,e)}createRadialGradient(t,e,n,i,r,a){return this.nativeContext.createRadialGradient(t,e,n,i,r,a)}createConicGradient(t,e,n,i){if(this.nativeContext.createConicGradient&&.001>Math.abs(i-n-2*Math.PI))return this.nativeContext.createConicGradient(n,t,e);let r,a=!1,o=this;return{stops:[],addColorStop(t,e){this.stops.push([t,e]),a=!0},GetPattern(s,l,c){return a&&(c||(c=i-n),r=(0,h.Of)(o,this.stops,t,e,c,n,i,s,l),a=!1),r}}}fill(t,e){this.disableFill||(t?this.nativeContext.fill(t):this.nativeContext.fill())}fillRect(t,e,n,i){this.nativeContext.fillRect(t,e,n,i)}clearRect(t,e,n,i){this.nativeContext.clearRect(t,e,n,i)}project(t,e,n){if(n=n||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]);let i=this.camera.vp(t,e,n);t=i.x,e=i.y}return{x:t,y:e}}view(t,e,n){return n=n||0,this.camera?(this.modelMatrix&&((0,c.fF)(p,[t,e,n],this.modelMatrix),t=p[0],e=p[1],n=p[2]),this.camera.view(t,e,n)):[t,e,n]}fillText(t,e,n,i){if(i=i||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[e,n,i],this.modelMatrix),e=p[0],n=p[1],i=p[2]);let t=this.camera.vp(e,n,i);e=t.x,n=t.y}this.nativeContext.fillText(t,e,n)}getImageData(t,e,n,i){return this.nativeContext.getImageData(t,e,n,i)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(t,e){return this.nativeContext.isPointInPath(t,e)}isPointInStroke(t,e){return this.nativeContext.isPointInStroke(t,e)}measureText(t,e=f.w.global.measureTextMethod){var n,i;if(!e||"native"===e)return this.nativeContext.measureText(t);this.mathTextMeasure||(this.mathTextMeasure=f.w.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let r=null!=(n=this.fontFamily)?n:s.q9.fontFamily,a=null!=(i=this.fontSize)?i:s.q9.fontSize;return this.mathTextMeasure.textSpec.fontFamily===r&&this.mathTextMeasure.textSpec.fontSize===a||(this.mathTextMeasure.textSpec.fontFamily=r,this.mathTextMeasure.textSpec.fontSize=a,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(t,e)}putImageData(t,e,n){this.nativeContext.putImageData(t,e,n)}setLineDash(t){let e=arguments,n=this.nativeContext;this.nativeContext.setLineDash?e[0]&&n.setLineDash(e[0]):"mozDash"in n?n.mozDash=e[0]:"webkitLineDash"in n&&(n.webkitLineDash=e[0])}stroke(t){this.disableStroke||(t?this.nativeContext.stroke(t):this.nativeContext.stroke())}strokeRect(t,e,n,i){this.nativeContext.strokeRect(t,e,n,i)}strokeText(t,e,n,i){if(i=i||0,this.camera){this.modelMatrix&&((0,c.fF)(p,[e,n,i],this.modelMatrix),e=p[0],n=p[1],i=p[2]);let t=this.camera.vp(e,n,i);e=t.x,n=t.y}this.nativeContext.strokeText(t,e,n)}drawImage(){let t=this.nativeContext,e=arguments;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(t,e,n,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setCommonStyle(t,e,n,i,r[0]);let a=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(a,t)}),this._setCommonStyle(t,e,n,i,a)}return this._setCommonStyle(t,e,n,i,r)}_setCommonStyle(t,e,n,i,r){let a=this.nativeContext;r||(r=this.fillAttributes);let{fillOpacity:o=r.fillOpacity,opacity:s=r.opacity,fill:l=r.fill}=e;a.globalAlpha=o*s*this.baseGlobalAlpha,o>1e-12&&s>1e-12&&(a.fillStyle=(0,d.L)(this,l,t,n,i))}setShadowBlendStyle(t,e,n){if(Array.isArray(n)){if(n.length<=1)return this._setShadowBlendStyle(t,n[0]);let i=Object.create(n[0]);return n.forEach((t,e)=>{0!==e&&Object.assign(i,t)}),this._setShadowBlendStyle(t,e,i)}return this._setShadowBlendStyle(t,e,n)}_setShadowBlendStyle(t,e,n){let i=this.nativeContext;n||(n=this.fillAttributes);let{opacity:r=n.opacity,shadowBlur:a=n.shadowBlur,shadowOffsetX:o=n.shadowOffsetX,shadowOffsetY:s=n.shadowOffsetY,blur:l=n.blur,globalCompositeOperation:c=n.globalCompositeOperation}=e;if(!(r<=1e-12)){if(o||s||a){let{shadowColor:t=n.shadowColor,shadowOffsetX:r=n.shadowOffsetX,shadowOffsetY:o=n.shadowOffsetY}=e;i.shadowBlur=a*this.dpr,i.shadowColor=t,i.shadowOffsetX=r*this.dpr,i.shadowOffsetY=o*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0);l?(i.filter=`blur(${l}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(i.filter="blur(0px)",this._clearFilterStyle=!1),c?(i.globalCompositeOperation=c,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(i.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(t,e,n,i,r){if(Array.isArray(r)){if(r.length<=1)return this._setStrokeStyle(t,e,n,i,r[0]);let a=Object.create(r[0]);return r.forEach((t,e)=>{0!==e&&Object.assign(a,t)}),this._setStrokeStyle(t,e,n,i,a)}return this._setStrokeStyle(t,e,n,i,r)}_setStrokeStyle(t,e,n,i,r){let a=this.nativeContext;r||(r=this.strokeAttributes);let{strokeOpacity:o=r.strokeOpacity,opacity:s=r.opacity}=e;if(a.globalAlpha=o*s*this.baseGlobalAlpha,o>1e-12&&s>1e-12){let{lineWidth:o=r.lineWidth,stroke:s=r.stroke,lineJoin:l=r.lineJoin,lineDash:c=r.lineDash,lineDashOffset:h=r.lineDashOffset,lineCap:f=r.lineCap,miterLimit:u=r.miterLimit,keepStrokeScale:p=r.keepStrokeScale}=e;a.lineWidth=p?o:(0,d.D)(this,o,this.dpr),a.strokeStyle=(0,d.L)(this,s,t,n,i),a.lineJoin=l,c&&(a.setLineDash(c),a.lineDashOffset=h),a.lineCap=f,a.miterLimit=u}}setTextStyleWithoutAlignBaseline(t,e,n){let i=this.nativeContext;e||(e=this.textAttributes);let{scaleIn3d:r=e.scaleIn3d}=t;t.font?this.font=t.font:this.font=(0,o.U)(t,e,r&&this.camera&&this.camera.getProjectionScale(n));let{fontFamily:a=e.fontFamily,fontSize:s=e.fontSize}=t;this.fontFamily=a,this.fontSize=s,i.textAlign="left",i.textBaseline="alphabetic"}setTextStyle(t,e,n){var i,r;let a=this.nativeContext;e||(e=this.textAttributes),t.font?this.font=t.font:this.font=(0,o.U)(t,e,this.camera&&this.camera.getProjectionScale(n));let{fontFamily:s=e.fontFamily,fontSize:l=e.fontSize}=t;this.fontFamily=s,this.fontSize=l,a.textAlign=null!=(i=t.textAlign)?i:e.textAlign,a.textBaseline=null!=(r=t.textBaseline)?r:e.textBaseline}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,t,e)}setClearMatrix(t,e,n,i,r,a){this._clearMatrix.setValue(t,e,n,i,r,a)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>l.QE.free(t)),this.stack.length=0}};v.env="browser",v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],v)},946282:function(t,e,n){n.d(e,{l:()=>a});var i=n(263457),r=n(557645);function a(t,e){return new i.n(n=>{n(r.r).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),n(r.A).toDynamicValue(()=>(t,n)=>new e(t,n)).whenTargetNamed(e.env)})}},716293:function(t,e,n){n.d(e,{Ns:()=>D});var i,r=n(263457),a=n(728733),o=n(366982),s=n(509257),l=n(360309),c=n(992770);let h=class extends o.u{constructor(t){super(t)}init(t){let{container:e}=t;if("string"==typeof e){let t=s.w.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new c.s(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:t}=this;t.width=this._pixelWidth,t.height=this._pixelHeight,t.style&&this.setCanvasStyle(t,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(t),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let t=this._nativeCanvas;t.style.position="absolute",t.style.top=`${this._y}px`,t.style.left=`${this._x}px`}resetStyle(t){if(!this.controled)return;let{width:e=this._displayWidth,height:n=this._displayHeight,dpr:i=this._dpr,x:r=this._x,y:a=this._y}=t,{nativeCanvas:o}=this;o.width=e*i,o.height=n*i,o.style&&this.setCanvasStyle(o,r,a,e,n),t.id&&(o.id=t.id),this.visiable||this.hide()}setCanvasStyle(t,e,n,i,r){this.controled&&(t.style.width=`${i}px`,t.style.height=`${r}px`)}toDataURL(t,e){return"image/jpeg"===t?this._nativeCanvas.toDataURL(t,e):"image/png"===t?this._nativeCanvas.toDataURL(t):this._nativeCanvas.toDataURL(t,e)}resize(t,e){this.controled&&(this._pixelWidth=t*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=t,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${t}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};h.env="browser",h=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],h);let f=(0,n(946282).l)(h,c.s);var d=n(533896),u=n(274981),p=n(474163),v=n(458943),g=n(609443),m=n(759311),y=n(197721),x=n(194937),b=function(t,e){return function(n,i){e(n,i,t)}};let C=class extends u.f{constructor(t,e,n,i){super(n,i),this.contributions=t,this.drawContribution=e,this.pickItemInterceptorContributions=n,this.pickServiceInterceptorContributions=i,this.global.hooks.onSetEnv.tap("canvas-picker-service",(t,e,n)=>{this.configure(n,e)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(t=>{this.pickerMap.set(t.numberType,t)}),super._init()}configure(t,e){this.pickCanvas=p.A.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(t,e,n,i){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let a=this.InterceptorContributions[r];if(a.beforePickItem){let r=a.beforePickItem(t,this,e,i,{parentMatrix:n});if(r)return r}}let r=this.pickerMap.get(t.numberType);if(!r)return null;let a=r.contains(t,e,i),o=a?t:null,s={graphic:o,params:a};if(o)return s;if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let a=this.InterceptorContributions[r];if(a.afterPickItem){let r=a.afterPickItem(t,this,e,i,{parentMatrix:n});if(r)return r}}return s}};C=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),b(0,(0,v.f)(g.Qc)),b(0,(0,m.t)(x.EL)),b(1,(0,v.f)(y.Iv)),b(2,(0,v.f)(g.Qc)),b(2,(0,m.t)(d.uH)),b(3,(0,v.f)(g.Qc)),b(3,(0,m.t)(d.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object,Object,Object])],C);var S=n(721756);let w=class{constructor(){this.type="group",this.numberType=S.I_}contains(t,e,n){return!1}};w=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)()],w);let R=new r.n((t,e,n,i)=>{R.__vloaded||(R.__vloaded=!0,t(x.pE).to(w).inSingletonScope(),t(x.EL).toService(x.pE),(0,g.yb)(t,x.EL))});R.__vloaded=!1;let P=new r.n((t,e,n,i)=>{n(C)||t(C).toSelf().inSingletonScope(),n(d.hH)?i(d.hH).toService(C):t(d.hH).toService(C)});var _=n(370887),O=n(605380),T=n(263401),j=n(669182);let k=i=class extends _.X{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${i.idprefix}_${i.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=s.w.global,this.viewBox=new T.FB,this.modelMatrix=new j.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(t){console.error("\u53D1\u751F\u9519\u8BEF\uFF0C\u8BE5\u73AF\u5883\u4E0D\u5B58\u5728IntersectionObserver")}}isElementVisible(t){let e=t.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>n||e.top>i)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let t=new IntersectionObserver((t,e)=>{t.forEach(t=>{this._canvasIsIntersecting!==t.isIntersecting?(this._canvasIsIntersecting=t.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(t.isIntersecting)):this._canvasIsIntersecting=t.isIntersecting})});t&&t.observe(this.canvas.nativeCanvas)}createWindowByConfig(t){let e,n=this.global.createCanvas({width:t.width,height:t.height});if(!(e="string"==typeof t.container?this.global.getElementById(t.container):t.container?t.container:this.global.getRootElement()))throw Error("\u53D1\u751F\u9519\u8BEF\uFF0CcontainerId\u53EF\u80FD\u4F20\u5165\u6709\u8BEF");t.offscreen?e=null:e.appendChild(n);let r={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:n,container:e,id:i.GenerateCanvasId(),canvasControled:!0};this.canvas=new h(r)}createWindowByCanvas(t){var e;let n;if("string"==typeof t.canvas){if(!(n=this.global.getElementById(t.canvas)))throw Error("canvasId \u53C2\u6570\u4E0D\u6B63\u786E\uFF0C\u8BF7\u786E\u8BA4canvas\u5B58\u5728\u5E76\u63D2\u5165dom")}else n=t.canvas;if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u4F20\u5165\u7684canvas\u4E0D\u6B63\u786E");let i=t.width,r=t.height;if(null==i||null==r||!t.canvasControled){let t=n.getBoundingClientRect();i=t.width,r=t.height}let a=t.dpr;null==a&&(a=null!=(e=n.getContext("2d").pixelRatio)?e:n.width/i),this.canvas=new h({width:i,height:r,dpr:a,nativeCanvas:n,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(t,e,n){return this.canvas.nativeCanvas.addEventListener(t,e,n)}removeEventListener(t,e,n){return this.canvas.nativeCanvas.removeEventListener(t,e,n)}dispatchEvent(t){return this.canvas.nativeCanvas.dispatchEvent(t)}getStyle(){var t;return null!=(t=this.canvas.nativeCanvas.style)?t:{}}setStyle(t){this.canvas.nativeCanvas.style=t}getBoundingClientRect(){let t=this.canvas.nativeCanvas,e=this.getWH();return t.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(t){let e=this.viewBox,n=this.getContext(),i=this.getDpr();n.nativeContext.save(),n.nativeContext.setTransform(i,0,0,i,0,0),n.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(n.fillStyle=t,n.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),n.nativeContext.restore()}isVisible(t){return this._canvasIsIntersecting}onVisibleChange(t){this._onVisibleChangeCb=t}getTopLeft(t){return this.global.getElementTopLeft(this.canvas.nativeCanvas,t)}};k.env="browser",k.idprefix="visactor_window",k.prefix_count=0,k=i=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],k);let M=new r.n(t=>{t(k).toSelf(),t(O.zd).toDynamicValue(t=>t.container.get(k)).whenTargetNamed(k.env)});var E=n(30176);let B=new r.n(t=>{B.isBrowserBound||(B.isBrowserBound=!0,t(E.j).toSelf().inSingletonScope(),t(a.D0).toService(E.j))});function D(t,e=!0){D.__loaded||(D.__loaded=!0,t.load(B),t.load(f),t.load(M),e&&(t.load(R),t.load(P)))}B.isBrowserBound=!1,D.__loaded=!1},30176:function(t,e,n){n.d(e,{j:()=>d});var i=n(509257),r=n(905592),a=n(203922),o=n(360309),s=n(89530),l=n(263401),c=n(83624);class h{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function f(t,e=!1){let n=document.createElement("img");if(i.w.global.isImageAnonymous&&(n.crossOrigin="anonymous"),e){let e=new Blob([t],{type:"image/svg+xml"});t=window.URL.createObjectURL(e)}return(n.src=t,n.complete)?Promise.resolve(n):new Promise((t,e)=>{n.onload=()=>{t(n)},n.onerror=()=>{e(Error("\u52A0\u8F7D\u5931\u8D25"))}})}let d=class extends r.z{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(t){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(t,e){var n,i;let r=0,a=0,o=0,l=0;if(t.changedTouches){let e=null!=(n=t.changedTouches[0])?n:{};r=e.clientX||0,a=e.clientY||0,o=r,l=a}else r=t.clientX||0,a=t.clientY||0,o=t.offsetX||0,l=t.offsetY||0;if(e){let t,n,o=r,l=a,c=e.getBoundingClientRect(),h=null==(i=e.getNativeHandler)?void 0:i.call(e).nativeCanvas;return h&&(t=c.width/h.offsetWidth,n=c.height/h.offsetHeight),{x:(o-c.left)/((0,s.Z)(t)?t:1),y:(l-c.top)/((0,s.Z)(n)?n:1)}}return{x:o,y:l}}getNativeAABBBounds(t){let e=t;return("string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/html").firstChild).lastChild&&(e=e.lastChild.firstChild),e.getBoundingClientRect)?new h(e.getBoundingClientRect()):new l.FB}removeDom(t){return t.parentElement.removeChild(t),!0}updateDom(t,e){let{width:n,height:i,style:r}=e;return r&&((0,c.Z)(r)?t.setAttribute("style",r):Object.keys(r).forEach(e=>{t.style[e]=r[e]})),null!=n&&(t.style.width=`${n}px`),null!=i&&(t.style.height=`${i}px`),!0}createDom(t){let{tagName:e="div",parent:n}=t,i=document.createElement(e);if(this.updateDom(i,t),n){let t=(0,c.Z)(n)?this.getElementById(n):n;t&&t.appendChild&&t.appendChild(i)}return i}loadImage(t){return f(t,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(t){return f(t,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(t){var e,n;let i=document.createElement("canvas");t.id&&(i.id=null!=(e=t.id)?e:a.R.GenAutoIncrementId().toString());let r=null!=(n=t.dpr)?n:window.devicePixelRatio;return t.width&&t.height&&(i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.width=t.width*r,i.height=t.height*r),i}createOffscreenCanvas(t){var e;let n=null!=(e=t.dpr)?e:window.devicePixelRatio;return new OffscreenCanvas(t.width*n,t.height*n)}releaseCanvas(t){let e;(e="string"==typeof t?document.getElementById(t):t)&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(t,e,n){return document.addEventListener(t,e,n)}removeEventListener(t,e,n){return document.removeEventListener(t,e,n)}dispatchEvent(t){return document.dispatchEvent(t)}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}getDocument(){return document}release(...t){}getElementTop(t,e){let n=t.offsetTop,i=t.offsetParent;for(;null!==i;)n+=i.offsetTop,i=i.offsetParent;return n}getElementLeft(t,e){let n=t.offsetLeft,i=t.offsetParent;for(;null!==i;)n+=i.offsetLeft,i=i.offsetParent;return n}getElementTopLeft(t,e){let n=t.offsetTop,i=t.offsetLeft,r=t.offsetParent;for(;null!==r;)n+=r.offsetTop,i+=r.offsetLeft,r=r.offsetParent;return{top:n,left:i}}loadFont(t,e,n){var i,r,a,o;return i=this,r=void 0,a=void 0,o=function*(){return new FontFace(t,(0,c.Z)(e)?`url(${e})`:e,n).load().then(function(t){return document.fonts.add(t),{loadState:"success"}}).catch(function(t){return console.error("Failed to load font:",t),{loadState:"fail"}})},new(a||(a=Promise))(function(t,e){function n(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof a?i:new a(function(t){t(i)})).then(n,s)}l((o=o.apply(i,r||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(t){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(t){return navigator.clipboard.writeText(t).then(()=>{}).catch(t=>{})}};d=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,o.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],d)},180328:function(t,e,n){n.d(e,{sn:()=>R});var i,r=n(263457),a=n(728733),o=n(366982),s=n(360309),l=n(669182),c=n(992770);let h=class extends c.s{constructor(t,e){super(t,e);let n=t.nativeCanvas.getContext("2d");if(!n)throw Error("\u53D1\u751F\u9519\u8BEF\uFF0C\u83B7\u53D62d\u4E0A\u4E0B\u6587\u5931\u8D25");this.nativeContext=n,this.canvas=t,this.matrix=new l.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=e?e:1}release(...t){}};h.env="node",h=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],h);var f=n(796241);let d=class extends o.u{constructor(t){super(t)}init(){this._context=new h(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...t){this._nativeCanvas.release&&(0,f.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};d.env="node",d=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],d);let u=(0,n(946282).l)(d,h);var p=n(370887),v=n(203922),g=n(458943),m=n(605380);let y=class extends p.X{get container(){return null}constructor(t){super(),this.global=t,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t)}createWindowByConfig(t){let e=this.global.createCanvas({width:t.width,height:t.height}),n={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:e,id:v.R.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new d(n)}createWindowByCanvas(t){var e;let n=t.canvas,i=null!=(e=t.dpr)?e:1,r=t.width,a=t.height;null!=r&&null!=a&&t.canvasControled||(r=n.width/i,a=n.height/i),this.canvas=new d({width:r,height:a,dpr:i,nativeCanvas:n,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(t="image/png"){return this.canvas.nativeCanvas.toBuffer(t)}addEventListener(t,e,n){}dispatchEvent(t){return!0}removeEventListener(t,e,n){}getStyle(){}setStyle(t){}getBoundingClientRect(){return null}clearViewBox(t){}};y.env="node",y=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)(),(i=(0,g.f)(a.y2),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y);let x=new r.n(t=>{t(y).toSelf(),t(m.zd).toDynamicValue(t=>t.container.get(y)).whenTargetNamed(y.env)});var b=n(905592),C=n(780949);let S=class extends b.z{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(t,e){t.env===this.type&&(t.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(t){let{loadImage:e}=this.pkg;return e?e(t).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(t){let e=this.pkg.Resvg;if(!e)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let n=new e(t).render().asPng();return this.loadImage(n)}createCanvas(t){return this.pkg.createCanvas(t.width,t.height)}releaseCanvas(t){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(t){return C.dZ.call(t)}}getCancelAnimationFrame(){return t=>{C.dZ.clear(t)}}addEventListener(t,e,n){}removeEventListener(t,e,n){}getElementById(t){return null}getRootElement(){return null}dispatchEvent(t){}release(...t){}createOffscreenCanvas(t){}};S=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,s.b)()],S);let w=new r.n(t=>{w.isNodeBound||(w.isNodeBound=!0,t(S).toSelf().inSingletonScope(),t(a.D0).toService(S))});function R(t,e=!0){R.__loaded||(R.__loaded=!0,t.load(w),t.load(u),t.load(x))}w.isNodeBound=!1,R.__loaded=!1},86380:function(t,e,n){n.d(e,{o:()=>h});var i=n(142813),r=n(509257),a=n(994123),o=n(421883),s=n.n(o);let l=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return Math.abs(n)>Math.abs(i)?n>0?"right":"left":i>0?"down":"up"},c=(t,e)=>{let n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(n*n+i*i)};class h extends s(){constructor(t,e={}){var n,r,a,o,s,h,f,d,u,p;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=t=>{this.startTime=i.m.now();let{cachedEvents:e,startPoints:n}=this;t&&e.push(t.clone()),n.length=e.length;for(let t=0;t<e.length;t++){let{x:i,y:r}=e[t],a={x:i,y:r};n[t]=a}if(1!==n.length)this.startDistance=c(n[0],n[1]),this.center=(t=>{let e=t.length;if(1===e)return{x:Math.round(t[0].x),y:Math.round(t[0].y)};let n=0,i=0,r=0;for(;r<e;)n+=t[r].x,i+=t[r].y,r++;return{x:Math.round(n/e),y:Math.round(i/e)}})([n[0],n[1]]);else{let t=e[0];this.pressTimeout=setTimeout(()=>{t.direction="none",t.deltaX=0,t.deltaY=0,t.points=n,this.triggerStartEvent("press",t),this.triggerEvent("press",t),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=t=>{this.clearPressTimeout();let{startPoints:e,cachedEvents:n}=this;if(!e.length)return;let r=t.clone(),{x:a,y:o,pointerId:s}=r;for(let t=0,e=n.length;t<e;t++)if(s===n[t].pointerId){n[t]=r;break}let h={x:a,y:o},f=n.map(t=>({x:t.x,y:t.y})),d=i.m.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=d,this.lastMovePoint=h,1===e.length){let t=e[0],n=a-t.x,i=o-t.y,s=this.direction||l(t,h);this.direction=s;let c=this.getEventType(h);return r.direction=s,r.deltaX=n,r.deltaY=i,r.points=f,this.triggerStartEvent(c,r),void this.triggerEvent(c,r)}let{startDistance:u}=this;r.scale=c(f[0],f[1])/u,r.center=this.center,r.points=f,this.triggerStartEvent("pinch",r),this.triggerEvent("pinch",r)},this.onEnd=t=>{let e=t.clone(),{cachedEvents:n,startPoints:r}=this;if(e.points=n.map(t=>({x:t.x,y:t.y})),this.triggerEndEvent(e),1===n.length){let n=i.m.now(),a=this.lastMoveTime;if(n-a<100){let t=a-(this.prevMoveTime||this.startTime);if(t>0){let n=this.prevMovePoint||r[0],i=this.lastMovePoint||r[0],a=c(n,i),o=a/t;if(o>this.config.swipe.velocity&&a>this.config.swipe.threshold)return e.velocity=o,e.direction=l(n,i),this.triggerEvent("swipe",e),this.cachedEvents=[],this.startPoints=[],void this.reset()}}n-this.startTime<this.config.press.time&&(n-this.lastTapTime<this.config.tap.interval&&t.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=n,this.lastTapTarget=t.target,1===this.tapCount?this.triggerEvent("tap",e):2===this.tapCount&&(this.triggerEvent("doubletap",e),this.tapCount=0))}for(let t=0,i=n.length;t<i;t++)if(n[t].pointerId===e.pointerId){n.splice(t,1),r.splice(t,1);break}this.reset(),n.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!=(r=null==(n=null==e?void 0:e.press)?void 0:n.time)?r:251,threshold:null!=(o=null==(a=null==e?void 0:e.press)?void 0:a.threshold)?o:9},swipe:{threshold:null!=(h=null==(s=null==e?void 0:e.swipe)?void 0:s.threshold)?h:10,velocity:null!=(d=null==(f=null==e?void 0:e.swipe)?void 0:f.velocity)?d:.3},tap:{interval:null!=(p=null==(u=null==e?void 0:e.tap)?void 0:u.interval)?p:300}},this.initEvents()}initEvents(){let{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerleave",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerleave",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){let e,{eventType:n,startTime:r,startPoints:a}=this;return"press"===n?n:(e=i.m.now()-r>this.config.press.time&&c(a[0],t)<this.config.press.threshold?"press":"pan",this.eventType=e,e)}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){let{emitThrottles:n}=this,i={type:t,ev:e};for(let e=0,r=n.length;e<r;e++)if(n[e].type===t)return void n.splice(e,1,i);n.push(i)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);let{throttleTimer:n,emitThrottles:i}=this;n||(this.throttleTimer=r.w.global.getRequestAnimationFrame()(()=>{r.w.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let t=0,e=i.length;t<e;t++){let{type:e,ev:n}=i[t];this.emitEvent(e,n)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){let e=this.processEvent;Object.keys(e).forEach(n=>{this.triggerEvent(`${n}end`,t),"press"===n&&this.triggerEvent(`${n}up`,t),delete e[n]})}emitEvent(t,e){if(!this.element)return;let n=this.element._events;this._callListeners(t,e,n[a.g]),this._callListeners(t,e,n[t]),this.emit(t,e)}_callListeners(t,e,n){if(n)if("fn"in n)n.fn.call(n.context,e,t);else for(let i=0,r=n.length;i<r&&!e.propagationImmediatelyStopped;i++)n[i].fn.call(n[i].context,e,t)}}},882595:function(t,e,n){n.d(e,{Nv:()=>r});var i=n(205427);let r={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"};function a(t){return i.i.richtext(t?t.attribute:{})}Object.keys(r),a.Text=function(t){return Object.assign({type:"rich/text"},t)},a.Image=function(t){return Object.assign({type:"rich/image"},t)}},769977:function(t,e,n){n.d(e,{D:()=>a});var i=n(508338),r=n(418953);class a extends i.Y{contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let a=t.getGraphicTheme();i.highPerformanceSave();let{x:o,y:s,z:l,lastModelMatrix:c}=this.transform(t,a,i),h=e;if(i.camera){h=e.clone();let n=t.parent.globalTransMatrix;h.x=n.a*e.x+n.c*e.y+n.e,h.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=l;let f=!1;return this.canvasRenderer.drawShape(t,i,o,s,n,null,(t,e,n)=>!!f||(f=t.isPointInPath(h.x,h.y))),this.canvasRenderer.z=0,i.modelMatrix!==c&&r.yp.free(i.modelMatrix),i.modelMatrix=c,i.highPerformanceRestore(),f}}},337435:function(t,e,n){n.d(e,{Q:()=>o});var i=n(508338),r=n(830420),a=n(418953);class o extends i.Y{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:i}=null!=n?n:{};if(!i)return!1;i.highPerformanceSave();let o=t.getGraphicTheme(),{x:s,y:l,z:c,lastModelMatrix:h}=this.transform(t,o,i),f=e;if(i.camera){f=e.clone();let n=t.parent.globalTransMatrix;f.x=n.a*e.x+n.c*e.y+n.e,f.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=c;let d=!1;return this.canvasRenderer.drawShape(t,i,s,l,{},null,t=>!!d||(d=t.isPointInPath(f.x,f.y)),(t,e,n)=>{if(d)return!0;let a=e.lineWidth||n.lineWidth,o=e.pickStrokeBuffer||n.pickStrokeBuffer;return i.lineWidth=e.keepStrokeScale||n.keepStrokeScale?a+o:(0,r.D)(i,a+o,i.dpr),d=t.isPointInStroke(f.x,f.y)}),this.canvasRenderer.z=0,i.modelMatrix!==h&&a.yp.free(i.modelMatrix),i.modelMatrix=h,i.highPerformanceRestore(),d}}},577871:function(t,e,n){n.d(e,{o:()=>r});var i=n(830420);class r{contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:r}=null!=n?n:{};if(!r)return!1;let a=t.getGraphicTheme();r.highPerformanceSave();let{x:o=a.x,y:s=a.y}=t.attribute;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(a);o+=e.x,s+=e.y,r.setTransformForCurrent()}else o=0,s=0,r.transformFromMatrix(t.transMatrix,!0);let l=!1,c=!1;return this.canvasRenderer.drawShape(t,r,o,s,{},null,(t,n,i,r)=>!(!l&&!c)||(l=t.isPointInPath(e.x,e.y),c=r||c,l),(t,n,a,o)=>{if(l||c)return!0;let s=n.lineWidth||a.lineWidth,h=n.pickStrokeBuffer||a.pickStrokeBuffer;return r.lineWidth=n.keepStrokeScale||a.keepStrokeScale?s+h:(0,i.D)(r,s+h,r.dpr),l=t.isPointInStroke(e.x,e.y),c=o||c,l}),r.highPerformanceRestore(),l}}},194937:function(t,e,n){n.d(e,{EL:()=>R,ES:()=>g,Ex:()=>l,RC:()=>x,Rz:()=>v,Sp:()=>b,TF:()=>y,XN:()=>i,Yr:()=>h,ZY:()=>S,cs:()=>o,e_:()=>u,g2:()=>s,ks:()=>m,nb:()=>c,p1:()=>f,pE:()=>w,t3:()=>r,uV:()=>d,ww:()=>C,xp:()=>a,zT:()=>p});let i=Symbol.for("MathPickerContribution"),r=Symbol.for("MathArcPicker");Symbol.for("MathAreaPicker");let a=Symbol.for("MathCirclePicker"),o=Symbol.for("MathImagePicker"),s=Symbol.for("MathLinePicker"),l=Symbol.for("MathPathPicker"),c=Symbol.for("MathRectPicker"),h=Symbol.for("MathSymbolPicker"),f=Symbol.for("MathTextPicker"),d=Symbol.for("MathPolygonPicker");Symbol.for("MathGlyphPicker");let u=Symbol.for("CanvasArcPicker");Symbol.for("CanvasArc3dPicker"),Symbol.for("CanvasAreaPicker");let p=Symbol.for("CanvasCirclePicker"),v=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let g=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let m=Symbol.for("CanvasPathPicker"),y=Symbol.for("CanvasRectPicker");Symbol.for("CanvasRect3dPicker");let x=Symbol.for("CanvasSymbolPicker"),b=Symbol.for("CanvasTextPicker"),C=Symbol.for("CanvasPolygonPicker");Symbol.for("CanvasPyramid3dPicker");let S=Symbol.for("CanvasRichTextPicker");Symbol.for("CanvasGlyphPicker");let w=Symbol.for("CanvasGroupPicker");Symbol.for("CanvasStarPicker");let R=Symbol.for("CanvasPickerContribution")},188290:function(t,e,n){n.d(e,{Z:()=>a});var i=n(721756),r=n(360309);let a=class{constructor(){this.type="image",this.numberType=i.PN}contains(t,e,n){let{pickContext:i}=null!=n?n:{};return!!i&&!!t.AABBBounds.containsPoint(e)}};a=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,r.b)()],a)},702956:function(t,e,n){n.d(e,{X:()=>i});let i=(0,n(678919).kP)()},75150:function(t,e,n){n.d(e,{x:()=>w});var i,r,a=n(14550),o=n(455353),s=n(946242),l=n(702956),c=n(263457),h=n(721756),f=n(360309),d=n(458943),u=n(197721),p=n(577871);let v=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=h.r_}};v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.Xe),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);var g=n(194937);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(g.e_).to(v).inSingletonScope(),t(g.EL).toService(g.e_))}),x=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=h.r_}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(r=(0,d.f)(u.Xe),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(g.t3).to(x).inSingletonScope(),t(g.XN).toService(g.t3))});function S(){S.__loaded||(S.__loaded=!0,(0,a.l)(),o.n.load(s._),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},791358:function(t,e,n){n.d(e,{f:()=>w});var i,r,a=n(159556),o=n(455353),s=n(120884),l=n(702956),c=n(263457),h=n(194937),f=n(721756),d=n(360309),u=n(458943),p=n(197721),v=n(577871);let g=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.aP),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.zT).to(g).inSingletonScope(),t(h.EL).toService(h.zT))}),x=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.aP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.xp).to(x).inSingletonScope(),t(h.XN).toService(h.xp))});function S(){S.__loaded||(S.__loaded=!0,(0,a.g)(),o.n.load(s.z),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},831512:function(t,e,n){n.d(e,{M:()=>a});var i=n(807310);function r(){r.__loaded||(r.__loaded=!0,(0,i.t)())}r.__loaded=!1;let a=r},480050:function(t,e,n){n.d(e,{i:()=>S});var i,r=n(942065),a=n(455353),o=n(255272),s=n(702956),l=n(263457),c=n(194937),h=n(721756),f=n(360309),d=n(458943),u=n(197721),p=n(577871);let v=class extends p.o{constructor(t){super(),this.canvasRenderer=t,this.type="image",this.numberType=h.PN}};v=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.e0),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);let g=!1,m=new l.n((t,e,n,i)=>{g||(g=!0,t(c.Rz).to(v).inSingletonScope(),t(c.EL).toService(c.Rz))});var y=n(188290);let x=!1,b=new l.n((t,e,n,i)=>{x||(x=!0,t(c.cs).to(y.Z).inSingletonScope(),t(y.Z).toService(c.cs))});function C(){C.__loaded||(C.__loaded=!0,(0,r.u)(),a.n.load(o.j),a.n.load(s.X?m:b))}C.__loaded=!1;let S=C},103136:function(t,e,n){n.d(e,{N:()=>R});var i,r,a=n(166564),o=n(455353),s=n(869464),l=n(702956),c=n(263457),h=n(194937),f=n(721756),d=n(360309),u=n(458943),p=n(197721),v=n(337435);let g=class extends v.Q{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.O),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ES).to(g).inSingletonScope(),t(h.EL).toService(h.ES))});var x=n(577871);let b=class extends x.o{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=f.Hf}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.O),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let C=!1,S=new c.n((t,e,n,i)=>{C||(C=!0,t(h.g2).to(b).inSingletonScope(),t(h.XN).toService(h.g2))});function w(){w.__loaded||(w.__loaded=!0,(0,a.c)(),o.n.load(s.Q),o.n.load(l.X?y:S))}w.__loaded=!1;let R=w},615520:function(t,e,n){n.d(e,{N:()=>R});var i,r,a=n(774935),o=n(455353),s=n(359863),l=n(702956),c=n(263457),h=n(194937),f=n(721756),d=n(360309),u=n(458943),p=n(197721),v=n(337435);let g=class extends v.Q{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=f.qm}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.lG),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ks).to(g).inSingletonScope(),t(h.EL).toService(h.ks))});var x=n(577871);let b=class extends x.o{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=f.qm}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.lG),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],b);let C=!1,S=new c.n((t,e,n,i)=>{C||(C=!0,t(h.Ex).to(b).inSingletonScope(),t(h.XN).toService(h.Ex))});function w(){w.__loaded||(w.__loaded=!0,(0,a.O)(),o.n.load(s.f),o.n.load(l.X?y:S))}w.__loaded=!1;let R=w},30120:function(t,e,n){n.d(e,{M:()=>w});var i,r,a=n(657637),o=n(455353),s=n(275079),l=n(702956),c=n(263457),h=n(194937),f=n(721756),d=n(360309),u=n(458943),p=n(197721),v=n(577871);let g=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=f.Kh}};g=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(i=(0,u.f)(p.ZT),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);let m=!1,y=new c.n((t,e,n,i)=>{m||(m=!0,t(h.ww).to(g).inSingletonScope(),t(h.EL).toService(h.ww))}),x=class extends v.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=f.Kh}};x=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,d.b)(),(r=(0,u.f)(p.ZT),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let b=!1,C=new c.n((t,e,n,i)=>{b||(b=!0,t(h.uV).to(x).inSingletonScope(),t(h.XN).toService(h.uV))});function S(){S.__loaded||(S.__loaded=!0,(0,a.d)(),o.n.load(s.M),o.n.load(l.X?y:C))}S.__loaded=!1;let w=S},866476:function(t,e,n){n.d(e,{k:()=>T});var i,r,a=n(356822),o=n(455353),s=n(288334),l=n(702956),c=n(263457),h=n(194937),f=n(360309),d=n(458943),u=n(197721),p=n(263401),v=n(704654),g=n(695723),m=n(721756),y=n(830420);let x=new p.FB;class b{constructor(){this.type="rect",this.numberType=m._u}contains(t,e,n){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.getGraphicTheme(),{cornerRadius:a=r.cornerRadius}=t.attribute,{x:o=r.x,y:s=r.y}=t.attribute;i.highPerformanceSave();let l=!0;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(r);o+=e.x,s+=e.y,i.setTransformForCurrent()}else o=0,s=0,l=!1,i.transformFromMatrix(t.transMatrix,!0);let c=!0;if(!l||t.shadowRoot||(0,v.Z)(a,!0)&&0!==a||(0,g.Z)(a)&&a.some(t=>0!==t))c=!1,this.canvasRenderer.drawShape(t,i,o,s,{},null,(t,n,i)=>!!c||(c=t.isPointInPath(e.x,e.y)),(t,n,r)=>{if(c)return!0;let a=n.lineWidth||r.lineWidth,o=n.pickStrokeBuffer||r.pickStrokeBuffer;return i.lineWidth=n.keepStrokeScale||r.keepStrokeScale?a+o:(0,y.D)(i,a+o,i.dpr),c=t.isPointInStroke(e.x,e.y)});else{let{fill:n=r.fill,stroke:i=r.stroke,lineWidth:a=r.lineWidth}=t.attribute;if(n)c=!0;else if(i){let n=t.AABBBounds;x.setValue(n.x1,n.y1,n.x2,n.y2),x.expand(-a/2),c=!x.containsPoint(e)}}return i.highPerformanceRestore(),c}}let C=class extends b{constructor(t){super(),this.canvasRenderer=t}};C=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.Uj),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C);let S=!1,w=new c.n((t,e,n,i)=>{S||(S=!0,t(h.TF).to(C).inSingletonScope(),t(h.EL).toService(h.TF))}),R=class extends b{constructor(t){super(),this.canvasRenderer=t}};R=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(r=(0,d.f)(u.Uj),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],R);let P=!1,_=new c.n((t,e,n,i)=>{P||(P=!0,t(h.nb).to(R).inSingletonScope(),t(h.XN).toService(h.nb))});function O(){O.__loaded||(O.__loaded=!0,(0,a.M)(),o.n.load(s.c),o.n.load(l.X?w:_))}O.__loaded=!1;let T=O},869430:function(t,e,n){n.d(e,{v:()=>C});var i,r=n(983513),a=n(455353),o=n(136386),s=n(702956),l=n(263457),c=n(194937),h=n(721756),f=n(360309),d=n(458943),u=n(197721);let p=class{constructor(t){this.canvasRenderer=t,this.type="richtext",this.numberType=h.$M}contains(t,e,n){return!!t.AABBBounds.containsPoint(e)}};p=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,f.b)(),(i=(0,d.f)(u.fS),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],p);let v=!1,g=new l.n((t,e,n,i)=>{v||(v=!0,t(c.ZY).to(p).inSingletonScope(),t(c.EL).toService(c.ZY))});var m=n(188290);let y=!1,x=new l.n((t,e,n,i)=>{y||(y=!0,t(c.cs).to(m.Z).inSingletonScope(),t(m.Z).toService(c.cs))});function b(){b.__loaded||(b.__loaded=!0,(0,r.R)(),a.n.load(o.k),a.n.load(s.X?g:x))}b.__loaded=!1;let C=b},648654:function(t,e,n){n.d(e,{W:()=>a});var i=n(787903);function r(){r.__loaded||(r.__loaded=!0,(0,i.T)())}r.__loaded=!1;let a=r},200498:function(t,e,n){n.d(e,{k:()=>_});var i,r,a=n(320156),o=n(455353),s=n(246573),l=n(702956),c=n(263457),h=n(194937),f=n(721756),d=n(830420),u=n(418953),p=n(360309),v=n(458943),g=n(197721),m=n(769977);let y=class extends m.D{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=f.B5}contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.getParsedPath();if(!i.camera){if(!t.AABBBounds.containsPoint(e))return!1;if(r.isSvg||"imprecise"===t.attribute.pickMode)return!0}i.highPerformanceSave();let a=t.getGraphicTheme(),{x:o,y:s,z:l,lastModelMatrix:c}=this.transform(t,a,i),h=e;if(i.camera){h=e.clone();let n=t.parent.globalTransMatrix;h.x=n.a*e.x+n.c*e.y+n.e,h.y=n.b*e.x+n.d*e.y+n.f}this.canvasRenderer.z=l;let f=!1;return this.canvasRenderer.drawShape(t,i,o,s,{},null,(t,e,n)=>!!f||(f=t.isPointInPath(h.x,h.y)),(t,e,n)=>{if(f)return!0;let r=e.lineWidth||n.lineWidth,a=e.pickStrokeBuffer||n.pickStrokeBuffer;return i.lineWidth=e.keepStrokeScale||n.keepStrokeScale?r+a:(0,d.D)(i,r+a,i.dpr),f=t.isPointInStroke(h.x,h.y)}),this.canvasRenderer.z=0,i.modelMatrix!==c&&u.yp.free(i.modelMatrix),i.modelMatrix=c,i.highPerformanceRestore(),f}};y=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,p.b)(),(i=(0,v.f)(g.tP),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y);let x=!1,b=new c.n((t,e,n,i)=>{x||(x=!0,t(h.RC).to(y).inSingletonScope(),t(h.EL).toService(h.RC))});var C=n(577871);let S=class extends C.o{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=f.B5}};S=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,p.b)(),(r=(0,v.f)(g.tP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);let w=!1,R=new c.n((t,e,n,i)=>{w||(w=!0,t(h.Yr).to(S).inSingletonScope(),t(h.XN).toService(h.Yr))});function P(){P.__loaded||(P.__loaded=!0,(0,a.n)(),o.n.load(s.A),o.n.load(l.X?b:R))}P.__loaded=!1;let _=P},540627:function(t,e,n){n.d(e,{g:()=>R});var i,r=n(497192),a=n(455353),o=n(720434),s=n(702956),l=n(263457),c=n(194937),h=n(721756),f=n(492859),d=n(418953),u=n(360309),p=n(458943),v=n(197721),g=n(769977);let m=class extends g.D{constructor(t){super(),this.canvasRenderer=t,this.type="text",this.numberType=h.Us}contains(t,e,n){let{pickContext:i}=null!=n?n:{};if(!i)return!1;let r=t.AABBBounds;if(!i.camera)return!!r.containsPoint(e);i.highPerformanceSave();let a=t.getGraphicTheme(),{keepDirIn3d:o=a.keepDirIn3d}=t.attribute,{x:s,y:l,z:c,lastModelMatrix:h}=this.transform(t,a,i,!o);this.canvasRenderer.z=c;let u=e;if(i.camera){u=e.clone();let n=t.parent.globalTransMatrix;u.x=n.a*e.x+n.c*e.y+n.e,u.y=n.b*e.x+n.d*e.y+n.f}let p=!1;return this.canvasRenderer.drawShape(t,i,s,l,{},null,(e,n,i)=>{if(p)return!0;let{fontSize:r=a.fontSize,textBaseline:o=a.textBaseline,textAlign:h=a.textAlign}=t.attribute,d=t.AABBBounds,v=d.height(),g=d.width(),m=(0,f.nV)(o,v,r),y=(0,f.js)(h,g);return e.rect(y+s,m+l,g,v,c),p=e.isPointInPath(u.x,u.y)},(t,e,n)=>p),this.canvasRenderer.z=0,i.modelMatrix!==h&&d.yp.free(i.modelMatrix),i.modelMatrix=h,i.highPerformanceRestore(),p}};m=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)(),(i=(0,p.f)(v.EY),function(t,e){i(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],m);let y=!1,x=new l.n((t,e,n,i)=>{y||(y=!0,t(c.Sp).to(m).inSingletonScope(),t(c.EL).toService(c.Sp))}),b=class{constructor(){this.type="text",this.numberType=h.Us}contains(t,e,n){return!!t.AABBBounds.containsPoint(e)}};b=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([(0,u.b)()],b);let C=!1,S=new l.n((t,e,n,i)=>{C||(C=!0,t(c.p1).to(b).inSingletonScope(),t(c.XN).toService(c.p1))});function w(){w.__loaded||(w.__loaded=!0,(0,r.v)(),a.n.load(o.D),a.n.load(s.X?x:S))}w.__loaded=!1;let R=w},470367:function(t,e,n){n.d(e,{Q:()=>a});var i=n(621136);function r(){r.__loaded||(r.__loaded=!0,(0,i.D)())}r.__loaded=!1;let a=r}}]);
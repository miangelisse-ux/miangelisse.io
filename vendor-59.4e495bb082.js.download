/*! For license information please see vendor-59.4e495bb082.js.LICENSE.txt */
(window.webpackChunkweb=window.webpackChunkweb||[]).push([["42324"],{964125:function(e,t,n){"use strict";n.d(t,{Z:()=>o});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/;"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=r({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var o={name:"inContext",type:"postProcessor",process:function(e,t,n,r){if(!(window&&document.getElementById("INCONTEXT-KEY-MATCH"))||n.__STARLING_INCONTEXT_FLAG__)return e;window.__STARLING_INCONTEXT_GLOBAL_I18N__||(window.__STARLING_INCONTEXT_GLOBAL_I18N__=r),delete n.keySeparator,delete n.lngs;var o=0;if(t=t.toString(),i.test(t)){var a=t.match(i);a[0];var s=a[1],c=a[2];o=s,t=c}if(i.test(e)){var a=e.match(i);a[0];var s=a[1],c=a[2];e=c}return window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]?o=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].push({options:n,default:e})-1:(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]=[{options:n,default:e}],o=0),"[[__starling_"+o+"_"+t+"__]]"}}},61188:function(e,t,n){"use strict";n.d(t,{p6:()=>i});var r=n(834370);n(206629),n(775559),Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,r.createContext({i18n:void 0,locale:void 0});var i={type:"intl3rdParty",init(e){}}},1202:function(e,t,n){"use strict";n.d(t,{R_:()=>l});var r=n(946456),i={red:"#F93920",pink:"#E91E63",purple:"#9C27B0",violet:"#6A3AC7",indigo:"#3F51B5",blue:"#0077FA","light-blue":"#0095ee",cyan:"#05A4B6",teal:"#00a696",green:"#38AA43","light-green":"#7bb63c",lime:"#9bd100",yellow:"#fac800",amber:"#F0B114",orange:"#fc8800",grey:"#6b7075"},o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a={xs:.01,sm:.02,md:.03,lg:.08,xl:.14};function s(e){return"dark"===e}function c(e,t,n){var i,o=s(t)&&!n?(0,r.Z)((i=(0,r.Z)(e).hsv(),(0,r.Z)(i[0],.92*i[1],Math.min(i[2]+.01,1),"hsv").hex())).hsv():(0,r.Z)(e).hsv(),c=s(t)&&n?400:500,l=[50,100,200,300,400,500,600,700,800,900].map(function(e){var t,n,i,s,l,u,f,h,d,p=(void 0===(t=c)&&(t=500),n=e-t,i=0,i=e<=t?o[0]>80&&o[0]<260?n*a.xs:-n*a.sm:o[0]>20&&o[0]<48?-n*a.md:o[0]>=48&&o[0]<260?n*a.xs:-n*a.sm,((o[0]+i)%360+360)%360),g=(void 0===(s=c)&&(s=500),l=(e-s)/100,u=0,e<s?(u=l*o[1]/5,e<100&&(u-=a.sm)):e>s&&(u=o[0]<30||o[0]>200?l*a.md:l*a.xs,0===o[1]&&(u=0)),o[1]+u>1?1:o[1]+u<0?0:o[1]+u),m=(void 0===(f=c)&&(f=500),h=(e-f)/100,d=0,e<f?d=o[1]<.1?h*(1-o[2])/5*1.06:h*(1-o[2])/5:e>f&&((o[0]<30||o[0]>200)&&o[0]>0?(d=h*a.lg,o[2]>.8&&(d=h*a.xl)):d=h*o[2]/6),o[2]-d>1?1:o[2]-d<0?0:o[2]-d);return(0,r.Z)(p,g,m,"hsv").hex()});return s(t)?l.reverse():l}function l(e,t){void 0===t&&(t={});var n=t.mode,a=void 0===n?"light":n,s=t.dir;if("wheel"===(void 0===s?"scale":s)){var l,u,f,h,d,p,g,m,_,y,v,b,A=(void 0===(l=a)&&(l="light"),u=(0,r.Z)(e).hsv(),d=(h=(f=Object.keys(i).filter(function(e){return"grey"!==e})).map(function(e){return(0,r.Z)(i[e]).hsv()})).reduce(function(e,t){return Math.abs(t[0]-u[0])<Math.abs(e[0]-u[0])?t:e}),p=h.indexOf(d),m=u[0]-d[0]>0?((p-1)%(g=h.length)+g)%g:p,_=h.map(function(e,t){return t<h.length-2?((e[0]-h[t+1][0])%360+360)%360:((e[0]-h[0][0])%360+360)%360}),y={h:(u[0]-d[0])/_[m]/2,s:"light"===l?(u[1]-d[1])/d[1]/2:0,v:"light"===l?(u[2]-d[2])/d[2]/2:0},v=f.map(function(e){return i[e]}).map(function(e,t){var n=(0,r.Z)(e).hsv(),i=((n[0]+_[t]*y.h)%360+360)%360,o=Math.min(Math.max(n[1]*(1+y.s),.65),1),a=Math.min(Math.max(n[2]*(1+y.v),.7),1);return(0,r.Z)(i,o,a,"hsv").hex()}).sort(function(e,t){return(0,r.Z)(t).hsv()[0]-(0,r.Z)(e).hsv()[0]}),r.Z.distance("red",v[0])>r.Z.distance("red",v[v.length-1])&&v.splice(0,0,v.pop()),f.reduce(function(e,t,n){var r;return o(o({},e),((r={})[t]=v[n],r))},{})),w={};return b=(0,r.Z)(e).hsv(),A.grey=(0,r.Z)(b[0],.09,.46,"hsv").hex(),A.brand=e,Object.keys(A).forEach(function(e){var n=t.lock&&t.lock[e];w[e]=c(A[e],a,n)}),w}return c(e,a)}var u={},f={};Object.keys(i).forEach(function(e){u[e]=l(i[e]),f[e]=l(i[e],{mode:"dark"})})},160724:function(e,t,n){"use strict";n.d(t,{Wk:()=>T,R_:()=>N});var r=n(52e4),i=n(207587),o=n(277590),a=n(624682),s=n(206643),c=n(842689),l=n(938213),u=n(1202),f=n(790396),h=n(946456),d=(e,t,n)=>.3*e+.59*t+.11*n,p=(e,t)=>{let n=(t,n)=>{let r=[],i=["violet","orange","teal","amber","light-blue","pink","brand"];for(let t=0;t<e.length;t++)i.includes(e[t].name)&&r.push(e[t]);let o=r.findIndex(e=>"brand"===e.name),a=[r[o]];t.forEach(e=>{let t=o+e>=r.length?o+e-r.length:o+e;a.push(r.at(t))});let s=a.at(-1),c=e.map(e=>e.name).filter(e=>!i.includes(e)||e===s.name),l=[];for(let t=0;t<e.length;t++)c.includes(e[t].name)&&l.push(e[t]);let u=l.findIndex(e=>e.name===s.name),f=[];n.forEach(e=>{let t=u+e>=l.length?u+e-l.length:u+e;f.push(l.at(t))});let d=[...a,...f],p=d[0],g=1/0,m=-1/0,_=[...p.type0,...p.type1];for(let e=0;e<_.length;e++)_[e].hsl[0]>m&&(m=_[e].hsl[0]),_[e].hsl[0]<g&&(g=_[e].hsl[0]);let y="";[[20,34,"orange"],[35,65,"amber"],[195,225,"light-blue"],[175,184,"teal"],[245,275,"violet"],[335,360,"pink"]].forEach(([e,t,n])=>{g>=e&&m<=t&&(y=n)});let v=d.findIndex(e=>e.name===y);if(-1!==v){let e=d[v];d.splice(v,1);let t=d.findIndex(e=>!i.includes(e.name));d.splice(t,0,e)}return d.forEach(e=>{[...e.type0,...e.type1].forEach(t=>{let n=(0,h.Z)(t.hex).hsl();if("brand"===e.name&&n[0]>=80&&n[0]<=150&&n[1]>.95){let e=h.Z.hsl(n[0],.95,n[2]);t.hex=e.hex(),t.hsl=e.hsl(),t.rgb=e.rgb()}if("orange"===e.name&&n[0]>=30&&n[0]<=330){let e=h.Z.hsl(n[0],n[1]-.05,n[2]);t.hex=e.hex(),t.hsl=e.hsl(),t.rgb=e.rgb()}})}),d};return 0===t?n([-2,1,3,-3,2,-1],[1,-1,-2]):1===t?n([-2,1,3,-3,2,-1],[-1,2,1]):2===t?n([2,-1,-3,3,-2,1],[1,-1,-2]):3===t?n([2,-1,-3,3,-2,1],[-1,2,1]):[]},g=e=>{let t=[],[n]=(()=>{let t=-1,n=1/0;for(let r=0;r<e[0].type0.length;r++)Math.abs(e[0].type0[r].index-5)<n&&(n=Math.abs(e[0].type0[r].index-5),t=e[0].type0[r].index);for(let r=e[0].type1.length-1;r>=0;r--)Math.abs(e[0].type1[r].index-5)<n&&(n=Math.abs(e[0].type1[r].index-5),t=e[0].type1[r].index);return[t]})(),r=[1,0,1,0,0,1,0,1,1,0];if(e[0].type0.find(e=>e.index===n)){if(t.push(e[0].type0.find(e=>e.index===n)),e[0].type0.find(e=>e.index===n))for(let e=0;e<r.length;e++)r[e]=+(1!==r[e])}else e[0].type1.find(e=>e.index===n)&&t.push(e[0].type1.find(e=>e.index===n));for(let n=1;n<r.length;n++){let i=r[n],o=null;if(1===i){for(let t=0;t<e[n].type1.length;t++)if(e[n].type1[t]){o=e[n].type1[t];break}if(!o){for(let t=e[n].type0.length-1;t>=0;t--)if(e[n].type0[t]){o=e[n].type0[t];break}}}if(0===i){for(let t=e[n].type0.length-1;t>=0;t--)if(e[n].type0[t]){o=e[n].type0[t];break}if(!o){for(let t=0;t<e[n].type1.length;t++)if(e[n].type1[t]){o=e[n].type1[t];break}}}if(!o)throw Error(`No color at name ${e[n].name}`);let a=t[n-1];if(a&&6>=Math.abs(d(a.rgb[0],a.rgb[1],a.rgb[2])-d(o.rgb[0],o.rgb[1],o.rgb[2]))){if(0===o.type){let t=e[n].type0.findIndex(e=>e===o),r=!1;for(let i=t-1;i>=0;i--)e[n].type0[i]&&(o=e[n].type0[i],r=!0);if(!r)for(let t=0;t<e[n].type1.length;t++)e[n].type1[t]&&(o=e[n].type1[t],r=!0)}if(1===o.type){let t=e[n].type1.findIndex(e=>e===o);for(let r=t+1;r<e[n].type1.length;r++)e[n].type1[r]&&(o=e[n].type1[r]);for(let t=e[n].type0.length-1;t>=0;t--)e[n].type0[t]&&(o=e[n].type0[t])}}t.push(o)}return t},m=({mainColor:e,mode:t,type:n})=>{let r=((e,t)=>{let n=(0,u.R_)(e,{mode:t,dir:"wheel"}),r=Object.entries((0,h.Z)(e).hsl()[0]>=160&&(0,h.Z)(e).hsl()[0]<=180?(0,f.Z)(n,["brand","orange","light-green","teal","indigo","light-blue","violet","purple","pink","amber"]):(0,f.Z)(n,["brand","orange","light-green","teal","cyan","light-blue","violet","purple","pink","amber"])).map(([n,r])=>{let i=[],o=[],a=(0,h.Z)(e).rgb(!0),s=d(a[0],a[1],a[2]);if((0,h.Z)(e).hsv(),r.forEach((e,t)=>{let n=(0,h.Z)(e).rgb(!0),r=d(n[0],n[1],n[2]);if(r>70&&r<100)r<=205&&r>=160?i.push({type:0,hex:e,rgb:n,hsl:(0,h.Z)(e).hsl(),index:t}):r<160&&r>=120&&o.push({type:1,hex:e,rgb:n,hsl:(0,h.Z)(e).hsl(),index:t});else{let a=0,c=0;s>=0&&s<60?(a=0,c=120):s>195&&s<=255?(a=195,c=255):(a=s-40,c=s+40),r<=s&&r>=a?i.push({type:0,hex:e,rgb:n,hsl:(0,h.Z)(e).hsl(),index:t}):r<c&&r>s&&o.push({type:1,hex:e,rgb:n,hsl:(0,h.Z)(e).hsl(),index:t})}}),0===i.length&&0===o.length){let e="light"===t?5:4,n=r[e],o=(0,h.Z)(n).rgb(!0);i.push({type:0,hex:n,rgb:o,hsl:(0,h.Z)(n).hsl(),index:e})}return"light"===t?{name:n,type0:i,type1:o}:{name:n,type0:o,type1:i}});return r.sort((e,t)=>{let n=e=>{let t=[...e.type0,...e.type1].find(e=>4===e.index);if(!t){for(let n=e.type0.length-1;n>=0;n--)if(e.type0[n]){t=e.type0[n];break}if(!t){for(let n=0;n<e.type1.length;n++)if(e.type1[n]){t=e.type1[n];break}}}return t.hsl};return n(e)[0]-n(t)[0]}),r})(e,t),i=p(r,0),o=p(r,3),a=g(i),s=g(o);return"scale"===n?[a.map((t,n)=>0===n?e:t.hex),s.map((t,n)=>0===n?e:t.hex)]:[[i,a],[o,s]].map(([t,n])=>{let r={};return t.forEach((t,i)=>{r[t.name]=0===i?e:n[i].hex}),r}).map(e=>((e,t)=>{let n={};return Object.keys(e).forEach(r=>{let i=(()=>{let n=(0,u.R_)(e[r],{mode:t});return"dark"===t?n[4]=e[r]:n[5]=e[r],n})();n[r]=[...i]}),n})(e,t))},_=n(139378),y=({category:e,tokenName:t,themeMode:n},r)=>{if("usage"===e){var i,o,a;let e=r.palette[n],s=Object.entries(r.tokens.color[n]),c="";for(let e of s)if(e[0]===t||e[0].endsWith(`/${t}`)){c=e[1];break}if(!c)return"";if(c.includes("var")){if(c=c.replace(/var\(([a-zA-Z-\d]+)\)/,(t,n)=>e[n]),l.ZP.valid(c))return(0,l.ZP)(c).hex()}else if(l.ZP.valid(c))return(0,l.ZP)(c).hex();return""}if("spacing"===e)return console.log("==>tokenName",i=t),i.startsWith("$")||(i=`$${i}`),r.tokens.spacing[i];if("radius"===e)return(o=t).startsWith("--semi-border-radius-")||(o=`--semi-border-radius-${o}`),r.tokens["border-radius"][o];if("borderWidth"===e)return(a=t).startsWith("border-")||(a=`border-${a}`),r.tokens.border[a];if("font"===e)return({...r.tokens.typography.Header,...r.tokens.typography.Paragraph})[t];else if("animationDuration"===e)return parseInt(r.tokens.animation.duration[t]);else if("animationDelay"===e)return parseInt(r.tokens.animation.delay[t]);return""};function v(e,t,n,i,o,a){if(void 0===o)return;let s=e=>{let{fontSize:t,fontWeight:n,lineHeight:o,fontFamily:s}=e;t&&(0,r.Z)(i,`${a}.fontSize`,t),n&&(0,r.Z)(i,`${a}.fontWeight`,n),o&&(0,r.Z)(i,`${a}.lineHeight`,o),s&&(0,r.Z)(i,`${a}.fontFamily`,s)},{type:c,value:l}=o;if("user"===c)s(o);else if(c){let r=e.global.font;if(!(r&&l in r))return;let{type:i}=r[l];if("custom"===i)s(r[l]);else if("semiUsage"===i){let{semiUsage:e}=r[l],i=y({category:"font",themeMode:n,tokenName:e?.semiUsageToken},t);s(i={fontSize:parseInt(i.fontSize),lineHeight:parseInt(i.lineHeight),fontFamily:i.fontFamily?.split(",")})}}}function b(e,t,n){(0,i.Z)(t)&&(0,r.Z)(e,`${n}.visible`,t)}function A(e,t,n){null!=t&&(0,r.Z)(e,n,t)}function w(e,t,n){null!=t&&((0,o.Z)(t)?(0,r.Z)(e,n,t):(0,a.Z)(t)&&(t.replace("%","")?(0,r.Z)(e,n,t):(0,s.Z)(e,n)))}function E(e,t,n,i){if(void 0===n)return;let{type:o,value:a}=n;if("user"===o)(0,r.Z)(t,i,a);else if(o){let n=e.global.lineWidth;n&&a in n&&(0,r.Z)(t,i,n[a].value)}}function S(e,t,n,i,o,a){if(void 0===o)return;let{type:s,value:c}=o;if("user"===s)(0,r.Z)(i,a,c);else{let o=e.global.spacing;if(!(o&&c in o))return;let{type:s}=o[c];if("custom"===s)(0,r.Z)(i,a,o[c].value);else if("semiUsage"==s){let{semiUsage:e}=o[c],s=y({category:"spacing",themeMode:n,tokenName:e.semiUsageToken},t);(0,r.Z)(i,a,parseInt(s))}}}function k(e,t,n,r,i,o,a){void 0!==i&&Object.keys(i).length>0&&Object.keys(i).forEach(s=>{a!==s&&S(e,t,n,r,i[s],`${o}.padding.${s}`)})}function z(e,t,n,i,o,a){if(void 0===o)return;let{type:c,value:l}=o;if("follow-border"===l)return void(0,s.Z)(i,a);if("user"===c)(0,r.Z)(i,a,l);else{let o=e.global.color,s=e.global.palette;if(!(o&&l in o))return;let{type:c,custom:f,semiUsage:h,palette:d}=o[l];if("custom"===c)(0,r.Z)(i,a,f);else if("palette"===c){let{paletteName:e,paletteIndex:t,alpha:n=1}=d,o=s?.[e]?.[t];if(o){var u;let e=`${o}${(1===(u=Math.round(255*n).toString(16)).length&&(u="0"+u),u)}`;(0,r.Z)(i,a,e)}}else if("semiUsage"===c){let e=y({category:"usage",themeMode:n,tokenName:h.semiUsageToken},t);(0,r.Z)(i,a,e)}}}function I(e,t,n,i){if(void 0===n)return;let{type:o,value:a,dash:s}=n;if("user"===o)(0,r.Z)(t,`${i}.style.lineDash`,s);else if(o){let n=e.global.lineDash;n&&a in n&&(0,r.Z)(t,`${i}.style.lineDash`,n[a].value)}}function D(e,t,n,i,o,a){if(void 0!==o){let{type:s,value:c}=o;if("user"===s)(0,r.Z)(i,a,c);else if(s){let o=e.global.animationDuration;if(!(o&&c in o))return;let{type:s}=o[c];if("custom"===s)(0,r.Z)(i,a,o[c].value);else if("semiUsage"===s){let{semiUsage:e}=o[c],s=y({category:"animationDuration",themeMode:n,tokenName:e.semiUsageToken},t);(0,r.Z)(i,a,parseInt(s))}}}}function R(e,t,n,i,o,a){if(void 0!==o){let{type:s,value:c}=o;if("user"===s)(0,r.Z)(i,a,c);else if(s){let o=e.global.animationDelay;if(!(o&&c in o))return;let{type:s}=o[c];if("custom"===s)(0,r.Z)(i,a,o[c].value);else if("semiUsage"===s){let{semiUsage:e}=o[c],s=y({category:"animationDelay",themeMode:n,tokenName:e.semiUsageToken},t);(0,r.Z)(i,a,parseInt(s))}}}}function x(e,t,n,i,o,a){if(void 0!==o&&4===o.length){let s=o.map(r=>{if(null==r)return 0;let{type:i,value:o}=r??{};if("user"===i)return o;if(i){let r=e.global.round;if(!(r&&o in r))return;let{type:i}=r[o];if("custom"===i)return parseInt(r[o].value);if("semiUsage"===i){let{semiUsage:e}=r[o];return parseInt(y({category:"radius",themeMode:n,tokenName:e.semiUsageToken},t))}}}).map(e=>"number"==typeof e?e:0);return a&&(0,r.Z)(i,a,s),s}}function O(e,t,n,i,o,a){if(void 0!==o){let{type:s,value:c}=o;if("user"===s)(0,r.Z)(i,a,c);else if(s){let o=e.global.round;if(!(o&&c in o))return;let{type:s}=o[c];if("custom"===s){let e=o[c].value;e&&(0,r.Z)(i,a,parseInt(e))}else if("semiUsage"===s){let{semiUsage:e}=o[c],s=y({category:"radius",themeMode:n,tokenName:e.semiUsageToken},t);(0,r.Z)(i,a,parseInt(s))}}}}function C(e,t,n){(0,o.Z)(t)?A(e,t/100,n):(0,s.Z)(e,n)}function B(e,t,n,r){return"custom"===r.type?r.custom:"palette"===r.type?(0,l.ZP)(e.global.palette[r.palette.paletteName][r.palette.paletteIndex]).alpha(r.palette.alpha??1).hex():"semiUsage"===r.type?y({category:"usage",themeMode:t,tokenName:r?.semiUsage?.semiUsageToken},n):void 0}var T=({themeMode:e,brandColor:t,mode:n,type:r})=>{if(r||(r="wheel"),"scale"===r){let r=m({mode:e,mainColor:t,type:"scale"});return"default"===n?r[0]:r[1]}{let r=m({mode:e,mainColor:t,type:"wheel"});return"default"===n?r[0]:r[1]}},M={round:{"chart.bar.cornerRadius":[{label:9999,value:9999,type:"user",radius:9999},{label:9999,value:9999,type:"user",radius:9999},{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0}],"chart.pie.cornerRadius":{label:12,value:12,type:"user",radius:12},"chart.funnel.cornerRadius":[{label:12,value:12,type:"user",radius:12},{label:12,value:12,type:"user",radius:12},{label:12,value:12,type:"user",radius:12},{label:12,value:12,type:"user",radius:12}],"chart.line.line.curveType":"monotone","chart.area.line.curveType":"monotone"},none:{"chart.bar.cornerRadius":[{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0}],"chart.pie.cornerRadius":{label:0,value:0,type:"user",radius:0},"chart.funnel.cornerRadius":[{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0},{label:0,value:0,type:"user",radius:0}],"chart.line.line.curveType":"linear","chart.area.line.curveType":"linear"},default:{"chart.bar.cornerRadius":[{label:"l",value:"l",type:"custom",radius:4},{label:"l",value:"l",type:"custom",radius:4},{label:"0",value:"0",type:"user",radius:0},{label:"0",value:"0",type:"user",radius:0}],"chart.pie.cornerRadius":{label:"l",value:"l",type:"custom",radius:4},"chart.funnel.cornerRadius":[{label:"l",value:"l",type:"custom",radius:4},{label:"l",value:"l",type:"custom",radius:4},{label:"l",value:"l",type:"custom",radius:4},{label:"l",value:"l",type:"custom",radius:4}],"chart.line.line.curveType":"linear","chart.area.line.curveType":"linear"}},G={compact:{"chart.pie.padAngle":0,"chart.bar.barGapInGroup":"1%",'global.spacing["spacing-2xl"].value':20,'global.spacing["spacing-xl"].value':16,'global.spacing["spacing-l"].value':12,'global.spacing["spacing-m"].value':8,'global.spacing["spacing-s"].value':4,'global.spacing["spacing-xs"].value':2,'global.spacing["spacing-2xs"].value':1},default:{"chart.pie.padAngle":0,"chart.bar.barGapInGroup":"10%"},loose:{"chart.pie.padAngle":0,"chart.bar.barGapInGroup":"20%",'global.spacing["spacing-2xl"].value':28,'global.spacing["spacing-xl"].value':24,'global.spacing["spacing-l"].value':20,'global.spacing["spacing-m"].value':16,'global.spacing["spacing-s"].value':12,'global.spacing["spacing-xs"].value':6,'global.spacing["spacing-2xs"].value':4}},P={thin:{"chart.bar.barWidth":"40%","chart.pie.outerRadius":.9,'global.lineWidth["width-0"].value':.5,'global.lineWidth["width-1"].value':1,'global.lineWidth["width-2"].value':1},default:{"chart.bar.barWidth":"70%","chart.pie.outerRadius":.9,'global.lineWidth["width-0"].value':.5,'global.lineWidth["width-1"].value':1,'global.lineWidth["width-2"].value':2},bold:{"chart.bar.barWidth":"100%","chart.pie.outerRadius":.9,'global.lineWidth["width-0"].value':.5,'global.lineWidth["width-1"].value':1,'global.lineWidth["width-2"].value':3}},j={"--dv-color-categorical-0":{type:"custom",custom:"#3286FB"},"--dv-color-categorical-1":{type:"custom",custom:"#54D1CD"},"--dv-color-categorical-2":{type:"custom",custom:"#A573DE"},"--dv-color-categorical-3":{type:"custom",custom:"#FF8426"},"--dv-color-categorical-4":{type:"custom",custom:"#FAD55C"},"--dv-color-categorical-5":{type:"custom",custom:"#E65E77"},"--dv-color-categorical-6":{type:"custom",custom:"#66C6FF"},"--dv-color-categorical-7":{type:"custom",custom:"#DA85E0"},"--dv-color-categorical-8":{type:"custom",custom:"#2CA6C5"},"--dv-color-categorical-9":{type:"custom",custom:"#A6D374"}},U={"--dv-color-categorical-0":{type:"custom",custom:"#4390FD"},"--dv-color-categorical-1":{type:"custom",custom:"#5FD3CF"},"--dv-color-categorical-2":{type:"custom",custom:"#B088DF"},"--dv-color-categorical-3":{type:"custom",custom:"#E79B2C"},"--dv-color-categorical-4":{type:"custom",custom:"#F3C626"},"--dv-color-categorical-5":{type:"custom",custom:"#F05676"},"--dv-color-categorical-6":{type:"custom",custom:"#92DAF7"},"--dv-color-categorical-7":{type:"custom",custom:"#D179D3"},"--dv-color-categorical-8":{type:"custom",custom:"#38B7C7"},"--dv-color-categorical-9":{type:"custom",custom:"#ACDD79"}},N=(e,t,n)=>{var i;return"easy"===e.editMode&&(i=e,i=(0,_.cloneDeep)(i),["light","dark"].forEach(e=>{let t=i.data[e];t.global.brandColor=t.easy.brandColor,t.global.paletteMode=({category:"categorical",order:"sequential"})[t.easy.paletteMode],t.global.generateCategoricalMode=t.easy.generateCategoricalMode;let n=T({type:"scale",themeMode:e,brandColor:t.easy.brandColor,mode:t.global.generateCategoricalMode}),r=T({type:"wheel",themeMode:e,brandColor:t.easy.brandColor,mode:t.global.generateCategoricalMode}),o=[...Object.entries(t.global.color)];Object.entries(r).forEach((e,t)=>{o.push([`--dv-color-categorical-${t}`,{type:"custom",custom:n[t]}],...r.brand.map((e,t)=>[`--dv-color-sequential-${t}`,{type:"custom",custom:e}]))}),"default"===t.easy.generateCategoricalMode&&("light"===e&&"#0064fa"===t.easy.brandColor||"dark"===e&&"#54a9ff"===t.easy.brandColor)&&("light"===e?o.push(...Object.entries(j)):o.push(...Object.entries(U))),(0,_.set)(i,["data",e,"global","color"],Object.fromEntries(o)),(0,_.set)(i,["data",e,"global","palette"],(0,u.R_)(t.easy.brandColor,{mode:e,dir:"wheel"})),Object.entries(M[t.easy.radius]).forEach(([e,n])=>{(0,_.set)(t,e,n)}),Object.entries(G[t.easy.spacing]).forEach(([e,n])=>{(0,_.set)(t,e,n)}),Object.entries(P[t.easy.line]).forEach(([e,n])=>{(0,_.set)(t,e,n)}),i.data[e]=t}),e=i),((e,t,n)=>{let i={};(0,r.Z)(i,"colorScheme.default.palette.backgroundColor","light"===t?"#ffffff":"#202226");let l=e.global.paletteMode,u=function(e,t,n){let r=Object.entries(e.global.color).filter(([e,t])=>e.startsWith("--dv-color-categorical-")).map(([r,i])=>B(e,t,n,i));return[{maxDomainLength:r.length,scheme:r}]}(e,t,n),f=function(e,t,n){let r=Object.entries(e.global.color).filter(([e,t])=>e.startsWith("--dv-color-sequential-")).map(([r,i])=>B(e,t,n,i));return[{maxDomainLength:2,scheme:[3,5].map(e=>r[e]).reverse()},{maxDomainLength:3,scheme:[3,4,5].map(e=>r[e]).reverse()},{maxDomainLength:4,scheme:[3,4,5,6].map(e=>r[e]).reverse()},{maxDomainLength:5,scheme:[2,3,4,5,6].map(e=>r[e]).reverse()},{maxDomainLength:6,scheme:[1,2,3,4,5,6].map(e=>r[e]).reverse()},{maxDomainLength:7,scheme:[1,2,3,4,5,6,7].map(e=>r[e]).reverse()},{maxDomainLength:8,scheme:[1,2,3,4,5,6,7,8].map(e=>r[e]).reverse()},{maxDomainLength:9,scheme:[1,2,3,4,5,6,7,8,9].map(e=>r[e]).reverse()},{maxDomainLength:10,scheme:[0,1,2,3,4,5,6,7,8,9].map(e=>r[e]).reverse()}]}(e,t,n);"categorical"===l?(0,r.Z)(i,"colorScheme.default.dataScheme",u):(0,r.Z)(i,"colorScheme.default.dataScheme",f);let h=e?.element?.title;if(h){let{text:r,subtext:o}=h??{};if(r){let{visible:o,fontStyle:a,fontColor:s}=r;b(i,o,"component.title.textStyle"),v(e,n,t,i,a,"component.title.textStyle"),z(e,n,t,i,s,"component.title.textStyle.fill")}if(o){let{visible:r,fontStyle:a,fontColor:s}=o;b(i,r,"component.title.subtextStyle"),v(e,n,t,i,a,"component.title.subtextStyle"),z(e,n,t,i,s,"component.title.subtextStyle.fill")}}let d=(r,o)=>{let a=(0,c.Z)(o);if(void 0===r)return;let{title:s,label:l,domainLine:u,tick:f,subTick:h,grid:d,subGrid:p}=r;if(s){let{visible:r,fontStyle:o,fontColor:c,position:l,padding:u,space:f}=s;b(i,r,`component.axis${a}.title`),v(e,n,t,i,o,`component.axis${a}.title.style`),z(e,n,t,i,c,`component.axis${a}.title.style.fill`),A(i,l,`component.axis${a}.title.position`),k(e,n,t,i,u,`component.axis${a}.title`),S(e,n,t,i,f,`component.axis${a}.title.space`)}if(l){let{visible:r,fontStyle:o,fontColor:s,space:c}=l;b(i,r,`component.axis${a}.label`),v(e,n,t,i,o,`component.axis${a}.label.style`),z(e,n,t,i,s,`component.axis${a}.label.style.fill`),S(e,n,t,i,c,`component.axis${a}.label.space`)}if(u){let{visible:r,lineWidth:o,stroke:s,lineDash:c,lineCap:l}=u;b(i,r,`component.axis${a}.domainLine`),E(e,i,o,`component.axis${a}.domainLine.style.lineWidth`),z(e,n,t,i,s,`component.axis${a}.domainLine.style.stroke`),I(e,i,c,`component.axis${a}.domainLine`),A(i,l,`component.axis${a}.domainLine.style.lineCap`)}if(f){let{visible:r,lineWidth:o,stroke:s,lineCap:c}=f;b(i,r,`component.axis${a}.tick`),E(e,i,o,`component.axis${a}.tick.style.lineWidth`),z(e,n,t,i,s,`component.axis${a}.tick.style.stroke`),A(i,c,`component.axis${a}.tick.style.lineCap`),A(i,c,`component.axis${a}.subTick.style.lineCap`)}if(h){let{visible:r,lineWidth:o,stroke:s}=h;b(i,r,`component.axis${a}.subTick`),E(e,i,o,`component.axis${a}.subTick.style.lineWidth`),z(e,n,t,i,s,`component.axis${a}.subTick.style.stroke`)}if(d){let{visible:r,lineWidth:o,stroke:s,lineDash:c,lineCap:l}=d;b(i,r,`component.axis${a}.grid`),E(e,i,o,`component.axis${a}.grid.style.lineWidth`),z(e,n,t,i,s,`component.axis${a}.grid.style.stroke`),I(e,i,c,`component.axis${a}.grid`),A(i,l,`component.axis${a}.grid.style.lineCap`),A(i,l,`component.axis${a}.subGrid.style.lineCap`)}if(p){let{visible:r,lineWidth:o,stroke:s,lineDash:c}=p;b(i,r,`component.axis${a}.subGrid`),E(e,i,o,`component.axis${a}.subGrid.style.lineWidth`),z(e,n,t,i,s,`component.axis${a}.subGrid.style.stroke`),I(e,i,c,`component.axis${a}.subGrid`)}},{x:p,y:g}=e?.element?.axis??{};d(p,"x"),d(g,"y");let{radius:m,angle:_}=e?.element?.polar??{};d(m,"radius"),d(_,"angle"),(()=>{if(e?.element?.discreteLegend===void 0)return;let{title:r,item:o,orient:a,position:s,padding:c}=e?.element?.discreteLegend;if(r){let{visible:o,fontStyle:a,fontColor:s,align:c,padding:l}=r;b(i,o,"component.discreteLegend.title"),v(e,n,t,i,a,"component.discreteLegend.title.textStyle"),z(e,n,t,i,s,"component.discreteLegend.title.textStyle.fill"),A(i,c,"component.discreteLegend.title.align"),k(e,n,t,i,l,"component.discreteLegend.title")}if(o){let{hoverBg:r,spaceCol:a,spaceRow:s,label:c,value:l,shape:u}=o;if(z(e,n,t,i,r,"component.discreteLegend.item.background.state.unSelectedHover.fill"),z(e,n,t,i,r,"component.discreteLegend.item.background.state.selectedHover.fill"),S(e,n,t,i,a,"component.discreteLegend.item.spaceCol"),S(e,n,t,i,s,"component.discreteLegend.item.spaceRow"),c){let{visible:r,fontStyle:o,fontColor:a,space:s,opacity:l}=c;b(i,r,"component.discreteLegend.item.label.style"),v(e,n,t,i,o,"component.discreteLegend.item.label.style"),z(e,n,t,i,a,"component.discreteLegend.item.label.style.fill"),z(e,n,t,i,a,"component.discreteLegend.pager.textStyle.fill"),z(e,n,t,i,a,"component.discreteLegend.item.label.state.unSelected.fill"),S(e,n,t,i,s,"component.discreteLegend.item.label.space"),C(i,l,"component.discreteLegend.item.label.state.unSelected.fillOpacity")}if(l){let{visible:r,fontStyle:o,fontColor:a,opacity:s}=l;b(i,r,"component.discreteLegend.item.value.style"),v(e,n,t,i,o,"component.discreteLegend.item.value.style"),z(e,n,t,i,a,"component.discreteLegend.item.value.style.fill"),z(e,n,t,i,a,"component.discreteLegend.item.value.state.unSelected.fill"),C(i,s,"component.discreteLegend.item.value.state.unSelected.fillOpacity")}if(u){let{space:r,opacity:o}=u;S(e,n,t,i,r,"component.discreteLegend.item.shape.space"),C(i,o,"component.discreteLegend.item.shape.state.unSelected.fillOpacity")}}A(i,a,"component.discreteLegend.orient"),A(i,s,"component.discreteLegend.position"),k(e,n,t,i,c,"component.discreteLegend")})(),(()=>{let{spaceRow:r,panel:o,titleLabel:a,keyLabel:s,valueLabel:c,shape:l,transitionDuration:u}=e?.element?.tooltip??{};if(S(e,n,t,i,r,"component.tooltip.spaceRow"),o){let{backgroundColor:r,padding:a,border:s,cornerRadius:c}=o;if(z(e,n,t,i,r,"component.tooltip.panel.backgroundColor"),O(e,n,t,i,c,"component.tooltip.panel.border.radius"),k(e,n,t,i,a,"component.tooltip.panel"),s){let{color:r,width:o}=s;E(e,i,s.width,"component.tooltip.panel.border.width"),z(e,n,t,i,r,"component.tooltip.panel.border.color")}}if(a){let{fontStyle:r,fontColor:o}=a;v(e,n,t,i,r,"component.tooltip.titleLabel"),z(e,n,t,i,o,"component.tooltip.titleLabel.fontColor")}if(s){let{fontStyle:r,fontColor:o,spacing:a}=s;v(e,n,t,i,r,"component.tooltip.keyLabel"),z(e,n,t,i,o,"component.tooltip.keyLabel.fontColor"),S(e,n,t,i,a,"component.tooltip.keyLabel.spacing")}if(c){let{fontStyle:r,fontColor:o}=c;v(e,n,t,i,r,"component.tooltip.valueLabel"),z(e,n,t,i,o,"component.tooltip.valueLabel.fontColor")}if(l){let{spacing:r}=l;S(e,n,t,i,r,"component.tooltip.shape.spacing")}D(e,n,t,i,u,"component.tooltip.transitionDuration")})(),(()=>{let{linearField:r,bandField:o}=e?.element?.crosshair??{};if(r){let{line:o,label:a}=r;if(o){let{visible:r,width:a,stroke:s,lineDash:c,lineCap:l}=o;b(i,r,"component.crosshair.linearField.line.style"),A(i,a,"component.crosshair.linearField.line.width"),z(e,n,t,i,s,"component.crosshair.linearField.line.style.stroke"),I(e,i,c,"component.crosshair.linearField.line"),A(i,l,"component.crosshair.linearField.line.style.lineCap")}if(a){let{visible:r,fontStyle:o,fontColor:s,labelBackground:c}=a;if(b(i,r,"component.crosshair.linearField.label"),v(e,n,t,i,o,"component.crosshair.linearField.label.style"),z(e,n,t,i,s,"component.crosshair.linearField.label.style.fill"),c){let{visible:r,fill:o,cornerRadius:a,padding:s}=c;b(i,r,"component.crosshair.linearField.label.labelBackground"),z(e,n,t,i,o,"component.crosshair.linearField.label.labelBackground.style.fill"),O(e,n,t,i,a,"component.crosshair.linearField.label.labelBackground.style.cornerRadius"),k(e,n,t,i,s,"component.crosshair.linearField.label.labelBackground")}}}if(o){let{line:r,label:a}=o;if(r){let{visible:o,width:a,fill:s}=r;b(i,o,"component.crosshair.bandField.line.style"),A(i,a,"component.crosshair.bandField.line.width"),z(e,n,t,i,s,"component.crosshair.bandField.line.style.fill")}if(a){let{visible:r,fontStyle:o,fontColor:s,labelBackground:c}=a;if(b(i,r,"component.crosshair.bandField.label"),v(e,n,t,i,o,"component.crosshair.bandField.label.style"),z(e,n,t,i,s,"component.crosshair.bandField.label.style.fill"),c){let{visible:r,fill:o,cornerRadius:a,padding:s}=c;b(i,r,"component.crosshair.bandField.label.labelBackground"),z(e,n,t,i,o,"component.crosshair.bandField.label.labelBackground.style.fill"),O(e,n,t,i,a,"component.crosshair.bandField.label.labelBackground.style.cornerRadius"),k(e,n,t,i,s,"component.crosshair.bandField.label.labelBackground")}}}})();let T=(r,o,a)=>{if(r){let{delay:o,easing:s,duration:c}=r;D(e,n,t,i,c,`${a}.animationAppear.duration`),A(i,s,`${a}.animationAppear.easing`),R(e,n,t,i,o,`${a}.animationAppear.delay`)}if(o){let{delay:r,easing:s,duration:c}=o;D(e,n,t,i,c,`${a}.animationUpdate.duration`),A(i,s,`${a}.animationUpdate.easing`),R(e,n,t,i,r,`${a}.animationUpdate.delay`)}},M=(r,o)=>{if(void 0===r)return;let{orient:a,position:s,padding:c}=r;A(i,a,`${o}.discreteLegend.orient`),A(i,s,`${o}.discreteLegend.position`),k(e,n,t,i,c,`${o}.discreteLegend`)};function G(e,t,n,i,o,a){if(void 0!==t)if(t===n)return;else"categorical"===t?(0,r.Z)(e,i,o):(0,r.Z)(e,i,a)}(()=>{let{color:c,barWidth:h,showMaxMinWidth:d,barMaxWidth:p,barMinWidth:g,cornerRadius:m,paddingOuter:_,barGapInGroup:y,bar:S,label:k,legends:D,animationAppear:R,animationUpdate:O}=e?.chart?.bar??{};G(i,c,l,"chart.bar.colorScheme.default",u,f),w(i,h,"series.bar.barWidth"),h&&(0,a.Z)(h)&&d&&(w(i,p,"series.bar.barMaxWidth"),w(i,g,"series.bar.barMinWidth"));let C=x(e,n,t,i,m,"series.bar.bar.style.cornerRadius");if(Array.isArray(C)&&C?.length===4){(0,r.Z)(i,"series.bar_stack.bar.style.cornerRadius",null),(0,r.Z)(i,"series.bar_vertical.stackCornerRadius",[...C]),(0,r.Z)(i,"series.bar_vertical.bar.style.cornerRadius",[...C]);let e=[C[3],C[0],C[1],C[2]];(0,r.Z)(i,"series.bar_horizontal.stackCornerRadius",[...e]),(0,r.Z)(i,"series.bar_horizontal.bar.style.cornerRadius",[...e])}else(0,s.Z)(i,"series.bar_stack.bar.style.cornerRadius"),(0,s.Z)(i,"series.bar_vertical.stackCornerRadius"),(0,s.Z)(i,"series.bar_vertical.bar.style.cornerRadius"),(0,s.Z)(i,"series.bar_horizontal.stackCornerRadius"),(0,s.Z)(i,"series.bar_horizontal.bar.style.cornerRadius");if(x(e,n,t,i,m,"series.bar.bar.style.cornerRadius"),A(i,(0,o.Z)(_)?_/100:void 0,"component.axisBand.paddingOuter"),w(i,y,"series.bar.barGapInGroup"),S){let{lineWidth:r,stroke:o,lineDash:a,lineCap:s}=S;E(e,i,r,"series.bar.bar.style.lineWidth"),z(e,n,t,i,o,"series.bar.bar.style.stroke"),I(e,i,a,"series.bar.bar"),A(i,s,"series.bar.bar.style.lineCap")}if(k){let{visible:r,fontStyle:o,fontColor:a,stroke:s,position:c}=k;b(i,r,"series.bar.label"),v(e,n,t,i,o,"series.bar.label.style"),z(e,n,t,i,a,"series.bar.label.style.fill"),z(e,n,t,i,s,"series.bar.label.style.stroke"),A(i,c,"series.bar.label.position")}M(D,"chart.bar.component"),T(R,O,"series.bar")})();let{color:P,line:j,point:U,label:N,legends:L,animationAppear:F,animationUpdate:K}=e?.chart?.line??{};if(G(i,P,l,"chart.line.colorScheme.default",u,f),j){let{lineWidth:t,curveType:n}=j;E(e,i,t,"series.line.line.style.lineWidth"),A(i,n,"series.line.line.style.curveType")}if(U){let{visible:o,symbolType:a,size:s,lineWidth:c,fill:l,stroke:u}=U;b(i,o,"series.line.point"),A(i,a,"series.line.point.style.symbolType"),E(e,i,s,"series.line.point.style.size"),E(e,i,c,"series.line.point.style.lineWidth"),z(e,n,t,i,l,"series.line.point.style.fill"),u?.value==="follow-border"?(0,r.Z)(i,"series.line.point.style.stroke",null):z(e,n,t,i,u,"series.line.point.style.stroke")}if(N){let{visible:r,fontStyle:o,fontColor:a,stroke:s,position:c}=N;b(i,r,"series.line.label"),v(e,n,t,i,o,"series.line.label.style"),z(e,n,t,i,a,"series.line.label.style.fill"),z(e,n,t,i,s,"series.line.label.style.stroke"),A(i,c,"series.line.label.position")}M(L,"chart.line.component"),T(F,K,"series.line"),(()=>{let{color:a,line:s,area:c,point:h,label:d,legends:p,animationAppear:g,animationUpdate:m}=e?.chart?.area??{};if(G(i,a,l,"chart.area.colorScheme.default",u,f),s){let{lineWidth:t,curveType:n,visible:r}=s;E(e,i,t,"series.area.line.style.lineWidth"),A(i,n,"series.area.line.style.curveType"),b(i,r,"series.area.line.style")}if(c){let{colorGradient:r,fillOpacity:a,fill:s,lineWidth:l,stroke:u,visible:f}=c;if(!1!==r&&s){let{startOffset:e,startOpacity:t,endOffset:n,endOpacity:r}=s;(0,o.Z)(e)&&(0,o.Z)(n)&&(0,o.Z)(t)&&(0,o.Z)(r)&&A(i,{gradient:"linear",x0:.5,y0:0,x1:.5,y1:1,stops:[{offset:Number(e)/100,opacity:Number(t)/100},{offset:Number(n)/100,opacity:Number(r)/100}]},"series.area.area.style.fill")}else C(i,a,"series.area.area.style.fillOpacity");E(e,i,l,"series.area.area.style.lineWidth"),z(e,n,t,i,u,"series.area.area.style.stroke"),b(i,f,"series.area.area.style")}if(h){let{visible:o,symbolType:a,size:s,lineWidth:c,fill:l,stroke:u}=h;b(i,o,"series.area.point"),A(i,a,"series.area.point.style.symbolType"),E(e,i,s,"series.area.point.style.size"),E(e,i,c,"series.area.point.style.lineWidth"),z(e,n,t,i,l,"series.area.point.style.fill"),u?.value==="follow-border"?(0,r.Z)(i,"series.area.point.style.stroke",null):z(e,n,t,i,u,"series.area.point.style.stroke")}if(d){let{visible:r,fontStyle:o,fontColor:a,stroke:s,position:c}=d;b(i,r,"series.area.label"),v(e,n,t,i,o,"series.area.label.style"),z(e,n,t,i,a,"series.area.label.style.fill"),z(e,n,t,i,s,"series.area.label.style.stroke"),A(i,c,"series.area.label.position")}M(p,"chart.area.component"),T(g,m,"series.area")})();let{color:Z,innerRadius:W,outerRadius:Q,cornerRadius:q,startAngle:H,padAngle:V,lineWidth:X,stroke:J,label:Y,legends:$,animationAppear:ee,animationUpdate:et}=e?.chart?.pie??{};if(G(i,Z,l,"chart.pie.colorScheme.default",u,f),A(i,W,"series.pie.innerRadius"),A(i,Q,"series.pie.outerRadius"),O(e,n,t,i,q,"series.pie.pie.style.cornerRadius"),A(i,H,"series.pie.startAngle"),A(i,V,"series.pie.padAngle"),E(e,i,X,"series.pie.pie.style.lineWidth"),z(e,n,t,i,J,"series.pie.pie.style.stroke"),Y){let{visible:r,fontStyle:o,fontColor:a,stroke:s,position:c,line:l}=Y;if(b(i,r,"series.pie.label"),v(e,n,t,i,o,"series.pie.label.style"),z(e,n,t,i,a,"series.pie.label.style.fill"),z(e,n,t,i,s,"series.pie.label.style.stroke"),A(i,c,"series.pie.label.position"),l){let{visible:e}=l;b(i,e,"series.pie.label.line")}}return M($,"chart.pie.component"),T(ee,et,"series.pie"),(()=>{let{color:a,maxSize:s,minSize:c,cornerRadius:h,gap:d,funnel:p,transform:g,label:m,transformLabel:_,outerLabel:w,legends:S,animationAppear:k,animationUpdate:D}=e?.chart?.funnel??{};if(G(i,a,l,"chart.funnel.colorScheme.default",u,f),A(i,(0,o.Z)(s)?`${s}%`:s,"series.funnel.maxSize"),A(i,(0,o.Z)(c)?`${c}%`:c,"series.funnel.minSize"),x(e,n,t,i,h,"series.funnel.funnel.style.cornerRadius"),!function(e,t,n,i,o,a){if(void 0!==o){let{type:s,value:c}=o;if("user"===s)(0,r.Z)(i,a,c);else if(s){let o=e.global.spacing;if(!(o&&c in o))return;let{type:s}=o[c];if("custom"===s)(0,r.Z)(i,a,o[c].value);else if("semiUsage"===s){let{semiUsage:e}=o[c];y({category:"spacing",themeMode:n,tokenName:e.semiUsageToken},t)}}}}(e,n,t,i,d,"series.funnel.gap"),p){let{lineWidth:r,stroke:o,lineDash:a,lineCap:s}=p;E(e,i,r,"series.funnel.funnel.style.lineWidth"),z(e,n,t,i,o,"series.funnel.funnel.style.stroke"),I(e,i,a,"series.funnel.funnel"),A(i,s,"series.funnel.funnel.style.lineCap")}if(g){let{fill:r,lineWidth:o,stroke:a,lineDash:s,lineCap:c}=g;z(e,n,t,i,r,"series.funnel.transform.style.fill"),E(e,i,o,"series.funnel.transform.style.lineWidth"),z(e,n,t,i,a,"series.funnel.transform.style.stroke"),I(e,i,s,"series.funnel.transform"),A(i,c,"series.funnel.transform.style.lineCap")}if(m){let{visible:r,fontStyle:o,fontColor:a,stroke:s,fill:c}=m;b(i,r,"series.funnel.label"),v(e,n,t,i,o,"series.funnel.label.style"),z(e,n,t,i,c,"series.funnel.label.style.fill"),z(e,n,t,i,s,"series.funnel.label.style.stroke")}if(_){let{visible:r,fontStyle:o,fill:a,stroke:s}=_;b(i,r,"series.funnel.transformLabel"),v(e,n,t,i,o,"series.funnel.transformLabel.style"),z(e,n,t,i,a,"series.funnel.transformLabel.style.fill"),z(e,n,t,i,s,"series.funnel.transformLabel.style.stroke")}if(w){let{visible:r,fontStyle:o,fill:a,stroke:s,line:c}=w;if(b(i,r,"series.funnel.outerLabel"),v(e,n,t,i,o,"series.funnel.outerLabel.style"),z(e,n,t,i,a,"series.funnel.outerLabel.style.fill"),z(e,n,t,i,s,"series.funnel.outerLabel.style.stroke"),c){let{visible:r,lineWidth:o,stroke:a,lineDash:s,lineCap:l}=c;b(i,r,"series.funnel.outerLabel.line.style"),E(e,i,o,"series.funnel.outerLabel.line.style.lineWidth"),z(e,n,t,i,a,"series.funnel.outerLabel.line.style.stroke"),I(e,i,s,"series.funnel.outerLabel.line"),A(i,l,"series.funnel.outerLabel.line.style.lineCap")}}M(S,"chart.funnel.component"),T(k,D,"series.funnel")})(),(0,r.Z)(i,"component.discreteLegend.maxRow",1),(0,r.Z)(i,"component.discreteLegend.maxCol",1),(0,r.Z)(i,"component.axisBand.paddingOuter",0),(0,r.Z)(i,"series.bar.bar.state.blur.opacity",.2),(0,r.Z)(i,"series.bar.interactions",[{type:"element-highlight-by-group"}]),z(e,n,t,i,{type:"palette",group:"Text",value:"--dv-color-text-2"},"component.indicator.title.style.fill"),z(e,n,t,i,{type:"palette",group:"Text",value:"--dv-color-text-0"},"component.indicator.content.style.fill"),i})(e.data[t],t,n)}},549353:function(e,t,n){"use strict";let r,i,o;n.d(t,{Z:()=>n0});var a,s,c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function l(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"==typeof SuppressedError&&SuppressedError;var u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){var l=[s,c];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}"function"==typeof SuppressedError&&SuppressedError;var p=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}function n(t,n,r){var i=e.call(this,n)||this;return i.code=t,i.message=n,i.originError=r,i.name="StarlingError",i.code=t,i.message=n,i.originError=r,Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return u(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t),n}(Error),g={LOAD_TEXT_ERROR:{ERROR_CODE:101,ERROR_MESSAGE:"Request for loadText failed!"},API_PARAMS_ERROR:{ERROR_CODE:103,ERROR_MESSAGE:"Request failed, confirm your apiKey and namespace is correct"},PARAMS_ERROR:{ERROR_CODE:110,ERROR_MESSAGE:"Check your params, parameter apiKey, namespace and zoneHost is required!"},PARAMS_ERROR_2:{ERROR_CODE:111,ERROR_MESSAGE:"Check your params, parameter request and store is required!"},CACHE_ERROR:{ERROR_CODE:112,ERROR_MESSAGE:"Cache error!"},VERSION_NOT_FOUND:{ERROR_CODE:120,ERROR_MESSAGE:"Version is not found, please check your param [version]!"}},m={zone:"CN",locale:"zh",timeout:15e3,test:!1,mode:"normal",format:"merged",lazyUpdate:!1,fallbackLang:["zh"],tracker:function(){},cache:!0,cdn:""},_=function(){function e(e){this.options=e,this.options=e}return e.prototype.getText=function(e,t){return h(this,void 0,void 0,function(){return d(this,function(n){switch(n.label){case 0:return[4,this._request(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map(function(e){var n=e[0],r=e[1];return t.getText(n,r)}))},e.prototype._request=function(e,t){return h(this,void 0,void 0,function(){var n,r,i,o,a,s,c,l,u,f,h,m,_,y,v,b,A,w,E,S,k,z,I,D,R,x,O,C;return d(this,function(d){switch(d.label){case 0:if(r=(n=this.options).getReleaseVersion,i=n.cdn,o=n.fallbackLang,a=n.locale,s=r(e),e&&s&&t)return[2,{}];if(c=this.getUrl(e,t),u=(l=this.options).request,f=l.timeout,!i)return[3,7];m=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([a],o),_=[],v=(y=g.LOAD_TEXT_ERROR).ERROR_CODE,b=y.ERROR_MESSAGE,A=0,w=m,d.label=1;case 1:if(!(A<w.length))return[3,6];E=w[A],d.label=2;case 2:return d.trys.push([2,4,,5]),[4,u(this.getUrl(e,t,E),{timeout:f})];case 3:if(k=(S=d.sent().data).status,z=S.message,200==+k)return[2,this._mapResponse(z)];throw new p(v,b);case 4:if(I=d.sent(),_.push(I),_.length===m.length)return[2,this._mapResponse({data:{},updated:!1})];return[3,5];case 5:return A++,[3,1];case 6:return[3,9];case 7:return[4,u(c,{timeout:f})];case 8:h=d.sent(),d.label=9;case 9:if(R=(D=h.data).status,x=D.message,200==+R)return[2,this._mapResponse(x)];if(1001==+R)throw new p((O=g.VERSION_NOT_FOUND).ERROR_CODE,O.ERROR_MESSAGE);throw new p((C=g.API_PARAMS_ERROR).ERROR_CODE,C.ERROR_MESSAGE)}})})},e.prototype.getUrl=function(e,t,n){var r=this.options,i=r.apiKey,o=r.locale,a=r.fallbackLang,s=r.zoneHost,c=r.mode,l=r.getReleaseVersion,u=r.cdn,f=[o].concat(a),h=s+"/check_and_get_text/"+i+"/"+c+"/"+e+"?lang="+f,d=l(e);return d&&(h=s+"/text_by_release_version/"+i+"/"+c+"/"+e+"/"+d+"?lang="+f),"string"==typeof t&&(h+="&version="+t),u&&(h=u+"/"+i+"/"+c+"/"+e+"/"+(n||o)+".json"),h},e.prototype._mapResponse=function(e){return e?Object.keys(e).reduce(function(t,n){return t[n.toLowerCase()]=e[n],t},{}):{}},e}(),y=function(){function e(e){this.options=e,this.options=e}return e.prototype._setCache=function(e,t,n){try{return this.options.store.set(e,t)}catch(e){var r=g.CACHE_ERROR.ERROR_CODE;this.options.tracker("cache_error",{code:r,message:e.message,stack:e.stack}),n&&n();return}},e.prototype._getCache=function(e){var t=this.options,n=t.store,r=t.cache;try{return r&&n.get(e)}catch(e){var i=g.CACHE_ERROR.ERROR_CODE;this.options.tracker("cache_error",{code:i,message:e.message,stack:e.stack});return}},e.prototype.getVersion=function(e){var t=this.options,n=t.apiKey,r=t.locale,i=t.getReleaseVersion,o=t.cdn,a="version."+n+"."+e+"."+r,s=i(e);s&&(a+="."+s);var c=this.getText(e);return c&&"object"==typeof c?"object"==typeof c&&c.then?this._getCache(a):"object"==typeof c&&0===Object.keys(c||{}).length?null:this._getCache(a):(o&&this.options.cdn&&this._getCache(a),null)},e.prototype.getVersions=function(e){var t=this;return Promise.all(e.map(function(e){return t.getVersion(e)}))},e.prototype.getText=function(e){var t=this.options,n=t.apiKey,r=t.locale,i=t.getReleaseVersion,o="text."+n+"."+e+"."+r,a=i(e);return a&&(o+="."+a),this._getCache(o)},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map(function(e){return t.getText(e)}).filter(Boolean))},e.prototype.refresh=function(e,t,n,r){return h(this,void 0,void 0,function(){var i,o,a,s,c,l=this;return d(this,function(u){switch(u.label){case 0:return o=(i=this.options).apiKey,a=i.getReleaseVersion,s=i.cache,c=[],t.forEach(function(i,u){var f="text."+o+"."+e[u]+"."+r[u],h="version."+o+"."+e[u]+"."+r[u],d=a(e[u]);d&&(f+="."+d,h+="."+d),s&&(c.push(l._setCache(f,t[u],function(){l.options.store.set(f,{})})),c.push(l._setCache(h,n[u])))}),[4,Promise.all(c)];case 1:return u.sent(),[2,t.reduce(function(e,t){return Object.assign(e,t)},{})]}})})},e}(),v=function(){function e(e){void 0===e&&(e=[]),this._list=[],this._list=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.getList=function(){return this._list},e.prototype.getNamespaces=function(){return this._list.map(function(e){return e.namespace})},e.prototype.addNamespace=function(e){this._list.push(e)},e.prototype.insertTexts=function(e){this._list.forEach(function(t,n){t.texts=e[n]})},e.prototype.sortByPrior=function(){return this._list.sort(function(e,t){return e.prior-t.prior}),this._list},e.prototype.concat=function(t){return new e(this._list.concat(t.getList()))},e}(),b=function(){function e(e,t,n){this._promiseRefresh=Promise.resolve(null),this.remote=e,this.local=t,this.options=n}return e.prototype._checkVersions=function(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,a;return d(this,function(s){switch(s.label){case 0:return t=this.options.locale,[4,this.local.getVersions(e)];case 1:return n=s.sent(),r=e.map(function(e,t){return[e,n[t]]}),[4,this.remote.getTexts(r)];case 2:return i=s.sent(),o=new v,a=new v,e.forEach(function(e,r){var s=i[r],c=s.updated,l=s.version,u=s.data,f=s.lang;c?a.addNamespace({namespace:e,prior:r,version:l,texts:u,lang:f}):o.addNamespace({namespace:e,prior:r,version:n[r],lang:t})}),[2,{equalNs:o,diffNs:a}]}})})},e.prototype.waitForRefresh=function(){return this._promiseRefresh},e.prototype._refresh=function(e){var t=e.getList(),n=[],r=[],i=[],o=[];return t.forEach(function(e){n.push(e.namespace),r.push(e.version),i.push(e.texts),o.push(e.lang)}),this.local.refresh(n,i,r,o)},e.prototype._getLocalTexts=function(e){return h(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return[4,this.local.getTexts(e.getNamespaces())];case 1:return t=n.sent(),e.insertTexts(t),[2,t]}})})},e.prototype.load=function(e){return h(this,void 0,void 0,function(){var t,n,r,i,o;return d(this,function(a){switch(a.label){case 0:return t=this.options.format,[4,this._checkVersions(e)];case 1:if(r=(n=a.sent()).equalNs,i=n.diffNs,!r.length)return[3,3];return[4,this._getLocalTexts(r)];case 2:return a.sent(),[3,4];case 3:a.label=4;case 4:if(o=this._formatTexts(t,i.concat(r)),!i.length)return[3,6];return[4,this._refresh(i)];case 5:a.sent(),a.label=6;case 6:return[2,{texts:o,diffNs:i.getNamespaces(),equalNs:r.getNamespaces()}]}})})},e.prototype._getCacheText=function(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return d(this,function(c){switch(c.label){case 0:return n=(t=this.options).locale,r=t.format,[4,this.local.getTexts(e)];case 1:return i=c.sent(),[4,this.local.getVersions(e)];case 2:return o=c.sent(),s=new v(a=i.map(function(t,r){if(t)return{namespace:e[r],version:o[r],lang:n,texts:t}}).filter(function(e){return!!e})),[2,{texts:this._formatTexts(r,s),cacheAllLoaded:a.length===i.length&&i.length===e.length}]}})})},e.prototype.lazyLoad=function(e){return h(this,void 0,void 0,function(){var t,n,r,i,o;return d(this,function(a){switch(a.label){case 0:return[4,this._getCacheText(e)];case 1:if(n=(t=a.sent()).texts,r=t.cacheAllLoaded,i=0===Object.keys(n).length||!r,this._promiseRefresh=this.load(e),!i)return[3,3];return[4,this._promiseRefresh];case 2:n=(o=a.sent()).texts,a.label=3;case 3:return[2,{texts:n,diffNs:i?o&&o.diffNs:[],equalNs:i?o&&o.equalNs:e}]}})})},e.prototype._formatTexts=function(e,t){return"splitted"===e?t.getList().reduce(function(e,t){var n=t.namespace,r=t.lang,i=t.texts,o=t.version;return e[n]={lang:r,texts:i,version:o},e},{}):t.sortByPrior().map(function(e){return e.texts}).reduce(function(e,t){return Object.assign(e,t)},{})},e}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},writable:!0,configurable:!0});var A={EVENT_EXCEPTION:"client_exception",EVENT_LOAD:"client_load",EVENT_CACHE:"client_cache",EVENT_LOAD_TIME:"client_load_time"};(O||(O={})).AfterLoad="afterLoad";var w=function(){function e(e){this.afterLoadPlugins=[],this.setConfig(e)}return e.prototype._init=function(e){var t=this;this.options=function(e){var t=(e=Object.assign({},m,e)).namespace,n=e.apiKey,r=e.request,i=e.store,o=e.zoneHost,a=e.test,s=e.cdn;if(a&&(e.mode="test"),e.namespace=t=t?Array.isArray(t)?t:[t]:[],e.apiKey=n=n||e.api_key,!r||!s&&!i){var c=g.PARAMS_ERROR_2,l=c.ERROR_CODE,u=c.ERROR_MESSAGE;throw new p(l,u,null)}if(!n||!t.length||!s&&!o){var f=g.PARAMS_ERROR,l=f.ERROR_CODE,u=f.ERROR_MESSAGE;throw new p(l,u,null)}return e}(e);var n=this.options,r=n.apiKey,i=n.locale,o=n.zoneHost,a=n.request,s=n.timeout,c=n.fallbackLang,l=n.store,u=n.lazyUpdate,h=n.test,d=n.mode,v=n.format,A=n.cache,w=n.cdn,E={mode:u?"lazy":h?"test":"prod",zone:o,cdn:w,locale:i,apiKey:r};this._tracker=function(e,n){try{t.options.tracker(e,f(f({},E),n))}catch(e){console.log(e)}};var S=this._getReleaseVersionByNamespace.bind(this),k=new _({request:a,timeout:s,apiKey:r,locale:i,zoneHost:o,fallbackLang:c,mode:d,getReleaseVersion:S,cdn:w}),z=new y({apiKey:r,locale:i,store:l,tracker:this._tracker,getReleaseVersion:S,cache:A,cdn:w});this._textManager=new b(k,z,{locale:i,format:v}),this.initPlugin()},e.prototype.initPlugin=function(){var e=this,t=this.options.plugins||[];Array.isArray(t)&&t.every(function(e){return"object"==typeof e})&&t.forEach(function(t){t.type===O.AfterLoad&&e.afterLoadPlugins.push(t)})},e.prototype._getReleaseVersionByNamespace=function(e){var t=this.options.namespace,n=this.options.version,r=null;return Array.isArray(n)?r=n[t.findIndex(function(t){return t===e})]:n&&"object"==typeof n?r=n[e]:"string"==typeof n&&(r=n),r},e.prototype.setConfig=function(e){var t=Object.assign({},this.options,e);this._init(t)},e.prototype.waitForRefresh=function(){return h(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,this._textManager.waitForRefresh()];case 1:return[2,(e=t.sent())?e.texts:null]}})})},e.prototype._load=function(){return h(this,void 0,void 0,function(){var e,t,n,r,i;return d(this,function(o){switch(o.label){case 0:if(t=(e=this.options).namespace,n=e.lazyUpdate,r=t,!n)return[3,2];return[4,this._textManager.lazyLoad(r)];case 1:return i=o.sent(),[3,4];case 2:return[4,this._textManager.load(r)];case 3:i=o.sent(),o.label=4;case 4:return[2,i]}})})},e.prototype.load=function(e,t){return h(this,void 0,void 0,function(){var n,r,i,o,a,s,c,l,u,f,h,p,g,m=this;return d(this,function(d){switch(d.label){case 0:n=Date.now(),r=this.options.namespace,d.label=1;case 1:return d.trys.push([1,5,,10]),this._tracker(A.EVENT_LOAD,{state:"start",version:"1.0.0"}),[4,this._load()];case 2:if(o=(i=d.sent()).diffNs,a=i.equalNs,s=i.texts,!(Array.isArray(c=this.afterLoadPlugins)&&c.length))return[3,4];return[4,c.reduce(function(e,t){return e.then(function(e){return"function"==typeof t.process?t.process(e||s,m.options):e})},Promise.resolve(s))];case 3:s=d.sent()||s,d.label=4;case 4:return e&&e(s),this._tracker(A.EVENT_LOAD_TIME,{time:Date.now()-n}),this._tracker(A.EVENT_LOAD,{state:"success",version:"1.0.0"}),l=o.length,h=((u=a.length)/(f=r.length)).toFixed(2),this._tracker(A.EVENT_CACHE,{diffLen:l,diff:o.join(","),equalLen:u,equal:a.join(","),namespaces:a.join(","),namespacesLen:f,ratio:h}),[2,s];case 5:p=d.sent(),this._tracker(A.EVENT_LOAD,{state:"fail"}),this._tracker(A.EVENT_EXCEPTION,{code:p.code,message:p.message,stack:p.stack}),d.label=6;case 6:return d.trys.push([6,8,,9]),[4,this._textManager._getCacheText(r)];case 7:return(g=d.sent().texts)&&"object"==typeof g?p.response={data:g}:p.response={data:{}},[3,9];case 8:return d.sent(),[3,9];case 9:if(!t)return[2,Promise.reject(p)];return t(p),[3,10];case 10:return[2]}})})},e}(),E=new(function(){function e(){}return e.prototype.get=function(e){if(localStorage&&localStorage.getItem){var t=localStorage.getItem(e);if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}return}},e.prototype.set=function(e,t){localStorage&&localStorage.setItem&&localStorage.setItem(e,JSON.stringify(t))},e.prototype.del=function(e){localStorage&&localStorage.removeItem&&localStorage.removeItem(e)},e}()),S=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.url=n,s.code=r,s.request=i,s.response=o,s.useWebCache=a,s.url=n,s.code=r,s.request=i,s.response=o,s.useWebCache=!!a,s}return l(t,e),t}(Error);function k(e,t){var n=t.timeout;return new Promise(function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("application/json; charset=utf-8"),i.withCredentials=!1,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n,o,a=function(e){try{return JSON.parse(e)}catch(e){return{}}}(i.responseText),s=a.message&&"object"==typeof a.message?a:null;if(i.status<200||i.status>=300||!s){n=i,o=(o=(a||{}).message||"")?", reason is: ".concat(o):"",r(new S("Request failed with status code "+n.status+o,e,null,n,{data:{}},!0)),i=null;return}t({data:s,status:i.status,statusText:i.statusText,request:i}),i=null}},i.onerror=function(){r(new S("Network Error",e,null,i,{data:{}},!0)),i=null},i.timeout=n,i.ontimeout=function(){r(new S("timeout of "+n+"ms exceeded",e,"ECONNABORTED",i,{data:{}},!0)),i=null},i.send()})}var z=function(e){function t(t){return t.store||(t.store=E),t.request||(t.request=k),e.call(this,t)||this}return l(t,e),t}(w),I=function(){return(I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function D(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})}function R(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){var c=[o,s];if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(arguments[t]));return e}var O,C,B=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,function r(i){t(i),n.off(e,r)})},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){n?e&&(-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))):this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&x(this._hooks[e]).forEach(function(e){try{e(t)}catch(e){}})},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),T=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},M=(C=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return C+=1}),G=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var r,i=[],o=String.fromCharCode((n=n<=25?n:n%25)+97);r=e.split(o);for(var a=0;a<r.length;a++){var s=parseInt(r[a],n),c=String.fromCharCode(s^=64);i.push(c)}return i.join("")}}(e,64,25)},P=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},j=function(e){var t=document.createElement("a");return t.href=e,t},U=function(e){var t={};try{var n=j(e).search;(n=n.slice(1)).split("&").forEach(function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}})}catch(e){}return t},N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function L(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function F(e,t){return e(t={exports:{}},t.exports),t.exports}var K,Z,W=F(function(e,t){e.exports=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(+new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[l]=c,e===l)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})}()}),Q=function(e,t){try{return W.get(e)}catch(e){return""}},q=function(e,t,n,r){try{var i=r||document.domain,o=+new Date+(n||6048e5);W.set(e,t,{expires:new Date(o),path:"/",domain:i})}catch(e){}},H=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return Q(e)},e.prototype.setCookie=function(e,t,n,r){q(e,t,n,r)},e}(),V={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Q(e)},setCookie:function(e,t,n,r){q(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},X={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Q(e)},setCookie:function(e,t,n,r){q(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},J=function(){function e(e,t){this._storage=t&&"session"===t?X:!e&&V.isSupportLS?V:new H}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),Y=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e,t=window.navigator.userAgent,n=window.navigator.language,r=document.referrer,i=r?j(r).hostname:"",o=U(window.location.href),a=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web",s=(null==(e=window.navigator.connection)?void 0:e.effectiveType)||"";this.utm=function(e,t,n,r){var i=new J(!1),o=new J(!1,"session"),a=e?"_tea_utm_cache_"+e:"_tea_utm_cache",s=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var f=!1;for(var h in u)u[h]&&(-1!==l.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=u[h]):c[h]=u[h],f=!0);if(f)o.setItem(s,"1"),i.setCookie(a,JSON.stringify(c),r,n);else{var d=i.getCookie(a,n);d&&(c=JSON.parse(d))}1==o.getItem(s)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch(e){return u}return c}(this.appid,o,this.domain,this.cookie_expire);var c=this.browser(),l=this.os();return{browser:c.browser,browser_version:c.browser_version,platform:a,os_name:l.os_name,os_version:l.os_version,userAgent:t,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(l.os_name),language:n,referrer:r,referrer_host:i,network_type:s,utm:this.utm,latest_data:this.last(r,i)}},e.prototype.last=function(e,t){var n="",r="",i="",o=location.hostname,a=!1;if(e&&t&&o!==t){n=e,r=t,a=!0;var s=U(e);s.keyword&&(i=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:a}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return -1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))&&(n="Firefox",r=i.substring(e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e,t,n="",r="",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],o=0;o<i.length;o++){var a=i[o];if(a.r.test(this.userAgent)){"Mac OS X"===(n=a.s)&&this.isNewIpad()&&(n="iOS");break}}var s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(n)&&(r=s(/Windows (.*)/,n),n="windows"),n){case"Mac OS X":r=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),n="mac";break;case"Android":(t=s(/Android ([\.\_\d]+)/,e=this.userAgent))||(t=s(/Android\/([\.\_\d]+)/,e)),r=t,n="android";break;case"iOS":r=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(r=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?r[1]+"."+r[2]+"."+(0|r[3]):"",n="ios";break;case"chromeOS":var l=this.userAgent.indexOf("x86_64");r=this.userAgent.substring(l+7,l+16)}return{os_name:n,os_version:r}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach(function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))});else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch(e){}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),$={sg_central:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",us_east:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",sg_central_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_east_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_ttp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",us_ttp_w:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",us_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z22z22z1nz4ez4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k",eu_ttp_gcp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",eu_central:"1fz22z22z1nz21z4mz4bz4bz18z25z21z1dz20z49z1kz1az21z4az19z27z22z1cz1gz1lz22z1jz18z1nz1gz4az1az1mz1k",eu_ttp_ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp_ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4dz4iz49z1lz1mz20z1kz18z1jz49z1lz1mz4dz18z4az22z1gz1iz22z1mz1iz25z4az1cz23"},ee=function(){return new Set(Object.keys($))},et=function(){return Object.keys($)},en={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",my:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z19z1bz49z1kz27z4az1jz18z20z1iz1mz1dz1dz1gz1az1cz4az1az1mz1k"},er={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},ei={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},eo={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};(a=K||(K={})).Init="init",a.Config="config",a.Start="start",a.Ready="ready",a.TokenComplete="token-complete",a.TokenStorage="token-storage",a.TokenFetch="token-fetch",a.TokenError="token-error",a.ConfigUuid="config-uuid",a.ConfigWebId="config-webid",a.ConfigDiD="config-deviceid",a.ConfigDomain="config-domain",a.CustomWebId="custom-webid",a.TokenChange="token-change",a.TokenReset="token-reset",a.ConfigTransform="config-transform",a.EnvTransform="env-transform",a.SessionReset="session-reset",a.SessionResetTime="session-reset-time",a.Event="event",a.Events="events",a.EventNow="event-now",a.CleanEvents="clean-events",a.BeconEvent="becon-event",a.SubmitBefore="submit-before",a.SubmitScuess="submit-scuess",a.SubmitAfter="submit-after",a.SubmitError="submit-error",a.SubmitVerify="submit-verify",a.DestoryInstance="destory-instance",a.LogSettingReady="log-setting-ready",a.Stay="stay",a.ResetStay="reset-stay",a.StayReady="stay-ready",a.SetStay="set-stay",a.RouteChange="route-change",a.RouteReady="route-ready",a.Ab="ab",a.AbVar="ab-var",a.AbAllVars="ab-all-vars",a.AbConfig="ab-config",a.AbExternalVersion="ab-external-version",a.AbVersionChangeOn="ab-version-change-on",a.AbVersionChangeOff="ab-version-change-off",a.AbOpenLayer="ab-open-layer",a.AbCloseLayer="ab-close-layer",a.AbReady="ab-ready",a.AbComplete="ab-complete",a.AbTimeout="ab-timeout",a.Profile="profile",a.ProfileSet="profile-set",a.ProfileSetOnce="profile-set-once",a.ProfileUnset="profile-unset",a.ProfileIncrement="profile-increment",a.ProfileAppend="profile-append",a.ProfileClear="profile-clear",a.Autotrack="autotrack",a.AutotrackReady="autotrack-ready",a.CepReady="cep-ready",a.TracerReady="tracer-ready",a.sessionRecord="session-record",a.SessionRecordStart="session-record-start",a.SessionRecordPause="session-record-pause",a.SessionRecordEnd="session-record-end",a.SessionRecordReport="session-record-report",a.TrackEventDuration="track-event-duration",a.TrackEventDurationStart="track-event-duration-start",a.TrackEventDurationEnd="track-event-duration-end",a.TrackEventDurationPause="track-event-duration-pause",a.TrackEventDurationResume="tracl-event-duration-resume",a.VisualCollectReady="visual-collect-ready",a.VisualApiReady="visual-api-ready",a.VisualApiUpdate="visual-api-update",(s=Z||(Z={})).DEBUGGER_MESSAGE="debugger-message",s.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",s.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",s.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",s.DEBUGGER_MESSAGE_EVENT="debugger-message-event",s.DEVTOOL_WEB_READY="devtool-web-ready";var ea=K,es=void 0,ec=(new Date).getTimezoneOffset(),el=parseInt(""+-ec/60,10),eu=60*ec,ef=function(){function e(e,t){var n=this;this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var r=new Y(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new J(!1,"session"),this.localStorage=new J(!1,"local"),this.channelUrl=this.getChannelForUrl(),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(i);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:es,user_type:es,user_id:es,user_is_auth:es,user_is_login:es,device_id:es,web_id:es,ip_addr_id:es,user_unique_id_type:es},header:{app_id:es,app_name:es,app_install_id:es,install_id:es,app_package:es,app_channel:es,app_version:es,ab_version:es,os_name:r.os_name,os_version:r.os_version,device_model:r.device_model,ab_client:es,traffic_type:es,network_type:r.network_type,client_ip:es,device_brand:es,os_api:es,access:es,language:r.language,region:es,app_language:es,app_region:es,creative_id:r.utm.creative_id,ad_id:r.utm.ad_id,campaign_id:r.utm.campaign_id,log_type:es,rnd:es,platform:r.platform,sdk_version:"5.3.5_oversea",sdk_lib:"js",province:es,city:es,timezone:el,tz_offset:eu,tz_name:es,sim_region:es,carrier:es,resolution:r.screen_width+"x"+r.screen_height,browser:r.browser,browser_version:r.browser_version,referrer:r.referrer,referrer_host:r.referrer_host,width:r.screen_width,height:r.screen_height,screen_width:r.screen_width,screen_height:r.screen_height,utm_term:r.utm.utm_term,utm_content:r.utm.utm_content,utm_source:r.utm.utm_source,utm_medium:r.utm.utm_medium,utm_campaign:r.utm.utm_campaign,tracer_data:JSON.stringify(r.utm.tracer_data),custom:r.network_type?{network_type:r.network_type}:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(r),this.initDomain(),this.initABData(),this.collect.on("route-change",function(e){n.changeReferInfo(e.config)})}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.report_channel||this.initConfig.channel,r=this.getChannelDomain(n);r||(console.warn("current channel: "+n+" is not exist, use va instead, please check!!!!"),r=en.sg),this.domain=G(r)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.getChannelDomain=function(e){var t,n,r=e||this.initConfig.report_channel||this.initConfig.channel;return ee().has(r)?$[r]:"tcpy"===(null==(t=this.initConfig)?void 0:t.channel_type)?ei[r]:"ttp"===(null==(n=this.initConfig)?void 0:n.channel_type)?eo[r]:en[r]},e.prototype.getChannelForUrl=function(){return this.initConfig.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:this.initConfig.report_channel?-1!==["sg_central","us_east"].indexOf(this.initConfig.report_channel)?{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}:{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=5.3.5_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.changeReferInfo=function(e){this.set({referrer:e.referrer});var t="";try{t=new URL(e.referrer).host}catch(e){}this.set({referrer_host:t||this.envInfo.header.referrer_host})},e.prototype.set=function(e){var t=this;Object.keys(e).forEach(function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=I(I({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=I(I({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var o=n.split(".");r=o[0],i=o[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:(t.envInfo.header.custom[i]=e[n],t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"})):Object.hasOwnProperty.call(t.envInfo.user,n)?(["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=!!e[n]:"device_id"===n&&(t.envInfo.user[n]=e[n]),t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"USER",common:n})):Object.hasOwnProperty.call(t.envInfo.header,n)?(t.envInfo.header[n]=e[n],t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:n})):(t.envInfo.header.custom[n]=e[n],t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"}))}})},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error "),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){console.log("setStore error"),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),console.log("delete error")}},e}(),eh=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),Error(e)},e}(),ed=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach(function(e){-1!==t.indexOf(e)&&(n=!0)}),n},e}(),ep=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise(function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted(function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)}):n(!1)}catch(e){console.log("AppLogBridge, error:"+JSON.stringify(e.stack)),n(!1)}})},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach(function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)})}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge report success",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),eg=F(function(e,t){e.exports=(function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(!s&&L)return L();if(o)return o(a,!0);var c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o=L,a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,void 0!==N?N:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p(function(){t(i,r)});"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==c?f(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)d(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=Array(n),s=0,c=-1,l=new this(i);++c<n;)!function(e,i){t.resolve(e).then(function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(l,a))},function(e){r||(r=!0,o.reject(l,e))})}(e[c],c);return l},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then(function(e){n||(n=!0,o.resolve(s,e))},function(e){n||(n=!0,o.reject(s,e))});return s}},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==N?N:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f=void 0,h={},d=Object.prototype.toString;function p(e){var t=h[e.name],n={};n.promise=new a(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function g(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function m(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function _(e,t){return new a(function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);p(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},n(t),g(e)}})}function y(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function v(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function b(e){return e&&e.__local_forage_encoded_blob}function A(e){var t=this,n=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function w(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e,!0)}).then(function(){return(function(e){p(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,_(e,!1).then(function(t){return e.db=t,y(e)?_(e,!0):t}).then(function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(t){throw m(e,t),t})})(e).then(function(){w(e,t,n,r-1)})}).catch(n);n(i)}}var E={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=A);var o=[];function s(){return a.resolve()}for(var c=0;c<i.forages.length;c++){var l=i.forages[c];l!==t&&o.push(l._initReady().catch(s))}var u=i.forages.slice(0);return a.all(o).then(function(){return n.db=i.db,_(n,!1)}).then(function(e){return n.db=e,y(n,t._defaultConfig.version)?_(n,!0):e}).then(function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){w(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;b(r)&&(r=v(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new a(function(t,r){n.ready().then(function(){w(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),b(e)&&(e=v(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=new a(function(n,i){var s;r.ready().then(function(){var e;return s=r._dbInfo,"[object Blob]"===d.call(t)?(e=s.db,"boolean"==typeof f?a.resolve(f):new a(function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);t(navigator.userAgent.match(/Edge\//)||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1}).then(function(e){return f=e})).then(function(e){return e?t:new a(function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){e({__local_forage_encoded_blob:!0,data:btoa(n.target.result||""),type:t.type})},r.readAsBinaryString(t)})}):t}).then(function(t){w(r._dbInfo,"readwrite",function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){try{var e=c.error?c.error:c.transaction.error;i(e)}catch(e){i(e)}}}catch(e){i(e)}})}).catch(i)});return s(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=new a(function(t,r){n.ready().then(function(){w(n._dbInfo,"readwrite",function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){try{var e=a.error?a.error:a.transaction.error;r(e)}catch(e){r(e)}}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){w(t._dbInfo,"readwrite",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){try{var e=o.error?o.error:o.transaction.error;n(e)}catch(e){n(e)}}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){w(t._dbInfo,"readonly",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){e<0?t(null):n.ready().then(function(){w(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,c=(a.openKeyCursor||a.openCursor).call(a);c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){w(t._dbInfo,"readonly",function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName),a=(o.openKeyCursor||o.openCursor).call(o),s=[];a.onsuccess=function(){var t=a.result;t?(s.push(t.key),t.continue()):e(s)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):_(e,!1).then(function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});n=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;p(e);var r=h[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var c=o[s];c._dbInfo.db=null,c._dbInfo.version=n}return new a(function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,g(n._dbInfo)}}).catch(function(t){throw(m(e,t)||a.resolve()).catch(function(){}),t})}}):o.then(function(t){p(e);var n=h[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a(function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)g(r[t]._dbInfo)}).catch(function(t){throw(m(e,t)||a.resolve()).catch(function(){}),t})})}else n=a.reject("Invalid arguments");return s(n,t),n}},S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=/^~~local_forage_type~([^~]+)~/,z=Object.prototype.toString;function I(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=S.indexOf(e[t]),r=S.indexOf(e[t+1]),i=S.indexOf(e[t+2]),o=S.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return l}function D(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=S[n[t]>>2],r+=S[(3&n[t])<<4|n[t+1]>>4],r+=S[(15&n[t+1])<<2|n[t+2]>>6],r+=S[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var R={serialize:function(e,t){var n="";if(e&&(n=z.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===z.call(e.buffer))){var r,i="__lfsc__:";e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":t(Error("Failed to get type for BinaryArray"))),t(i+D(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){t("__lfsc__:blob"+("~~local_forage_type~"+e.type+"~")+D(this.result))},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,9))return JSON.parse(e);var t,n=e.substring(13),r=e.substring(9,13);if("blob"===r&&k.test(n)){var i=n.match(k);t=i[1],n=n.substring(i[0].length)}var a=I(n);switch(r){case"arbf":return a;case"blob":return o([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw Error("Unkown type: "+r)}},stringToBuffer:I,bufferToString:D};function x(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function O(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?o(e,a):x(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,a)},o)}function C(e,t,n,r){var i=this;e=l(e);var o=new a(function(o,a){i.ready().then(function(){void 0===t&&(t=null);var s=t,c=i._dbInfo;c.serializer.serialize(t,function(t,l){l?a(l):c.db.transaction(function(n){O(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){o(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(C.apply(i,[e,s,n,r-1]));a(t)}})})}).catch(a)});return s(o,n),o}var B={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new a(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){x(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=R,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){O(n,i,"SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),l=c.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,c.key,s+1)))return void t(l)}t()},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){O(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},setItem:function(e,t,n){return C.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=l(e);var r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){O(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){O(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){O(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){e(n.rows.item(0).c)},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){O(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){t(n.rows.length?n.rows.item(0).key:null)},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){O(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return s(r=e.name?new a(function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:new a(function(e,t){r.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).name);e({db:r,storeNames:i})},function(e,n){t(n)})},function(e){t(e)})}))}).then(function(e){return new a(function(t,n){e.db.transaction(function(r){for(var i=[],o=0,s=e.storeNames.length;o<s;o++)i.push(function(e){return new a(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}(e.storeNames[o]));a.all(i).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):a.reject("Invalid arguments"),t),r}};function T(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var M={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=T(e,this._defaultConfig),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=R,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(i),a++)))return l}}});return s(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return s(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new a(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return s(i,n),i},removeItem:function(e,t){var n=this;e=l(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return s(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return s(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return s(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return s(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return s(r=e.name?new a(function(t){t(e.storeName?T(e,i._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):a.reject("Invalid arguments"),t),r}},G=function(e,t){for(var n,r=e.length,i=0;i<r;){if((n=e[i])===t||"number"==typeof n&&"number"==typeof t&&isNaN(n)&&isNaN(t))return!0;i++}return!1},P=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},j={},U={},N={INDEXEDDB:E,WEBSQL:B,LOCALSTORAGE:M},L=[N.INDEXEDDB._driver,N.WEBSQL._driver,N.LOCALSTORAGE._driver],F=["dropInstance"],K=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(F),Z={description:"",driver:L.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function W(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(P(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}t.exports=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),N)if(N.hasOwnProperty(n)){var r=N[n],i=r._driver;this[n]=i,j[i]||this.defineDriver(r)}this._defaultConfig=W({},Z),this._config=W({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a(function(t,n){try{var r=e._driver,i=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=K.concat("_initStorage"),c=0,l=o.length;c<l;c++){var u=o[c];if((!G(F,u)||e[u])&&"function"!=typeof e[u])return void n(i)}for(var f=function(e){return function(){var t=Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},h=0,d=F.length;h<d;h++){var p=F[h];e[p]||(e[p]=f(p))}var g=function(n){j[r]&&console.info("Redefining LocalForage driver: "+r),j[r]=e,U[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(g,n):g(!!e._support):g(!0)}catch(e){n(e)}});return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=j[e]?a.resolve(j[e]):a.reject(Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(R);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;P(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function s(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var l=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=l.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(){var e=0;return function t(){for(;e<i.length;){var n=i[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(n).then(s).catch(t)}o();var c=Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}})}).catch(function(){o();var e=Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet}),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!U[e]},e.prototype._extend=function(e){W(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=K.length;e<t;e++)!function(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}(this,K[e])},e.prototype.createInstance=function(t){return new e(t)},e}())},{3:3}]},{},[4])(4)}),em=function(){function e(e,t){return this.dbStorage=eg.createInstance({driver:[eg.INDEXEDDB,eg.LOCALSTORAGE],name:e,storeName:t}),this.dbStorage}return e.prototype.getItem=function(e){return D(this,void 0,void 0,function(){var t,n;return R(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.dbStorage.getItem(e)];case 1:n=t=r.sent();try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return[2,n||void 0];case 2:return r.sent(),console.warn("db get storage error"),[3,3];case 3:return[2,void 0]}})})},e.prototype.setItem=function(e,t){try{this.dbStorage.setItem(e,t)}catch(e){console.warn("db set storage error")}},e.prototype.removeItem=function(e){try{this.dbStorage.removeItem(e)}catch(e){console.warn("db remove storage error")}},e}(),e_=function(){function e(){this.setUrl="/service/2/web_sdk_settings/",this.expireTime=216e5}return e.prototype.apply=function(e,t){if(t.enable_logsetting){this.collect=e,this.config=t;var n=e.adapters.storage;this.setKey="applog_web_logsetting_"+t.app_id,this.uniqueKey="web_logsetting_data",this.cacheStorgae=new n(!1),this.dbStorage=new em(this.setKey,"LOGSETTING_DATA_STORE"),this.domain=t.logsetting_domain||this.collect.configManager.getDomain(),this.check()}else e.emit(ea.LogSettingReady)},e.prototype.check=function(){return D(this,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getLocalData()];case 1:return(e=t.sent())&&Object.keys(e).length?(null==e?void 0:e.timestamp)<Date.now()-this.expireTime?this.fetchSetting():(this.setSettingData(e.settingConfig),this.collect.emit(ea.LogSettingReady)):this.fetchSetting(),[3,3];case 2:return t.sent(),this.collect.emit(ea.LogSettingReady),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Check LogSetting Data Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),[3,3];case 3:return[2]}})})},e.prototype.fetchSetting=function(e){var t=this;if(e)this.collect.emit(ea.LogSettingReady);else{var n=this.collect.configManager.get("header");n.custom=JSON.stringify(n.custom);var r=this.collect.configManager.get("user"),i={event_filter:0,header:I(I({aid:this.config.app_id},n),r),options:{params_block_enable:+!!this.config.enable_logsetting_params,header_custom_allow_enable:+!!this.config.enable_logsetting_header_custom}};this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch LogSetting Request",logType:"fetch",level:"info",time:Date.now(),data:i,infoType:"sdk"}),this.collect.requestManager.useRequest({url:""+this.domain+this.setUrl+"?device_platform=web",data:i,timeout:5e3,success:function(e){(null==e?void 0:e.config)?(t.setLocalData(e.config),t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Success",logType:"fetch",level:"info",time:Date.now(),data:e,infoType:"sdk"})):t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Response No Data",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),t.collect.emit(ea.LogSettingReady)},fail:function(){t.collect.emit(ea.LogSettingReady),t.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Fail",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})}})}},e.prototype.getLocalData=function(){return D(this,void 0,void 0,function(){return R(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.dbStorage.getItem(this.uniqueKey)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})},e.prototype.setLocalData=function(e){try{var t={timestamp:Date.now(),settingConfig:e};this.setSettingData(e),this.dbStorage.setItem(this.uniqueKey,t),this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Update LogSetting Cache",logType:"info",level:"info",time:Date.now(),infoType:"sdk",data:e})}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Set LogSetting Data Error",logType:"info",level:"error",time:Date.now(),infoType:"sdk"})}},e.prototype.getSettingData=function(e){return e?this.logSettingConfig[e]:this.logSettingConfig},e.prototype.setSettingData=function(e){this.logSettingConfig=e},e.prototype.getPredefineEventList=function(){return new Set(["predefine_pageview","onload","bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_exposure","predefine_page_alive","predefine_page_close","_be_active","__bav_click","__bav_page","__bav_beat","__bav_page_statistics","__bav_page_exposure"])},e.prototype.getPredefineParamsList=function(){return new Set(["event_index"])},e}(),ey=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new J(!0),this.localStorage=new J(!1),this.logSetting=new e_,this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.logSetting.apply(e,t),this.collect.on(ea.Ready,function(){n.reportAll(!1)}),this.collect.on(ea.ConfigDomain,function(){n.reportUrl=n.configManager.getUrl("event")}),this.collect.on(ea.Event,function(e){n.event(e)}),this.collect.on(ea.BeconEvent,function(e){n.beconEvent(e)}),this.collect.on(ea.CleanEvents,function(){n.reportAll(!1)}),this.linster()},e.prototype.linster=function(){var e,t=this;window.addEventListener("unload",function(){t.reportAll(!0)},!1),e=function(){t.reportAll(!0)},P()?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&t.reportAll(!0)},!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{if(this.config.enable_ios_sendbeacon&&P())return void this.beconEvent(e);var n=x(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout(function(){t.report(!1),t.reportTimeout=null},r)}}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=x(e,this.cacheStorgae.getItem(this.beconKey)||[]);if(this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady){this.cacheStorgae.removeItem(this.beconKey);try{var n=JSON.parse(JSON.stringify(t));if(this.send(this.split(this.merge(t)),!0),this.config.event_verify_url){var r=this.split(this.merge(n,!0));this.collect.emit(ea.SubmitVerify,r)}}catch(e){this.send(this.split(this.merge(t)),!0)}}}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];if(e&&e.length){this.cacheStorgae.removeItem(this.beconKey);try{var t=JSON.parse(JSON.stringify(e));if(this.send(this.split(this.merge(e)),!0),this.config.event_verify_url){var n=this.split(this.merge(t,!0));this.collect.emit(ea.SubmitVerify,n)}}catch(t){this.send(this.split(this.merge(e)),!0)}}}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n,r=0;r<e.length;r+=this.eventLimit){n=e.slice(r,r+this.eventLimit);try{var i=JSON.parse(JSON.stringify(n));if(this.send(this.split(this.merge(n)),t),this.config.event_verify_url){var o=this.split(this.merge(i,!0));this.collect.emit(ea.SubmitVerify,o)}}catch(e){this.send(this.split(this.merge(n)),t)}}else try{i=JSON.parse(JSON.stringify(e)),this.send(this.split(this.merge(e)),t),this.config.event_verify_url&&(o=this.split(this.merge(i,!0)),this.collect.emit(ea.SubmitVerify,o))}catch(n){this.send(this.split(this.merge(e)),t)}},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.configManager.get(),i=r.header,o=r.user;i.custom=this.customAllow(i.custom,t);var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=[];try{var l=e.filter(function(e){try{Object.keys(a).length&&(e.params=I(I({},a),e.params)),s&&(e.params.$user_unique_id_type=s);var r=n.configManager.getAbCache(),i=o[n.config.ab_user_mode]||o.user_unique_id,c=n.configManager.getAbUuidCache(i);if(r&&r.uuid&&r.uuid===i){var l=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(c&&c.length){var u=c.join(",");l&&l.includes(u)&&(e.ab_sdk_version=l)}}else l&&(e.ab_sdk_version=l)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=n.paramsAllow(e,t),e}catch(t){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",t&&t.message),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),!1}}),u=JSON.parse(JSON.stringify({events:l,user:o,header:i}));u.local_time=Math.floor(Date.now()/1e3),u.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,u.verbose=1,c.push(u)}catch(e){console.warn("event merge error, pls check",e&&e.message)}return c},e.prototype.split=function(e){return e=e.map(function(e){var t=[];return t.push(e),t})},e.prototype.blockEvent=function(e){try{var t=this.blockList;if(this.config.enable_logsetting){var n=this.blockList,r=this.logSetting.getSettingData("blocklist_events").block_event;t=n.concat(r.filter(function(e){return -1===n.indexOf(e)}))}return!(t&&t.length&&t.includes(e))}catch(e){return!0}},e.prototype.whiteEvent=function(e){var t;try{return!(null==(t=this.whiteList)?void 0:t.length)||!!this.whiteList.includes(e)}catch(e){return!0}},e.prototype.customAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_header_custom)return JSON.stringify(e);var n=this.logSetting.getSettingData().header_custom_allow;if(n){var r={};if(n.length&&Object.keys(e).length){var i=new Set(n);for(var o in e)i.has(o)&&(r[o]=e[o])}return JSON.stringify(r)}return JSON.stringify(e)}catch(t){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute customAllow Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),JSON.stringify(e)}},e.prototype.paramsAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_params)return JSON.stringify(e.params);var n=this.logSetting.getSettingData().params_block,r=e.event,i=e.params;if(!n)return JSON.stringify(e.params);if(n[r]&&n[r].length){var o={},a=new Set(n[r]);for(var s in i)!this.logSetting.getPredefineParamsList().has(s)&&a.has(s)||(o[s]=i[s]);return JSON.stringify(o)}return JSON.stringify(e.params)}catch(t){return this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute paramsAllow Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),JSON.stringify(e.params)}},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach(function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e,o=JSON.parse(JSON.stringify(i));if(!i.length)return;var a=!0;if(i.forEach(function(e){e.events.length||(a=!1)}),!a)return;n.collect.emit(ea.SubmitBefore,i),n.collect.requestManager.useRequest({url:n.reportUrl,data:i,success:function(e,t){e&&0!==e.e?(n.collect.emit(ea.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"Event Report Fail",time:Date.now(),data:o,code:e.e,failType:"event data error",status:"fail"})):(n.collect.emit(ea.SubmitScuess,{eventData:t,res:e}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:o,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(ea.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network Fail",time:Date.now(),data:o,code:t,failType:"network error",status:"fail"})},timeout:n.timeout,useBeacon:!n.config.disable_sendbeacon&&t,withCredentials:n.enable_ttwebid,zip:!0}),n.collect.emit(ea.SubmitAfter,i)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:e.message})}}))},e}(),ev=function(){return(function e(t){return t?(t^16*Math.random()>>t/4).toString(10):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)})().replace(/-/g,"").slice(0,19)},eb=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new J(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(ea.ConfigUuid,function(e){n.setUuid(e)}),this.collect.on(ea.ConfigWebId,function(e){n.setWebId(e)}),this.collect.on(ea.ConfigDiD,function(e){n.setDeviceId(e)}),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(ea.CustomWebId,function(){e.tokenReady=!0,e.collect.emit(ea.TokenComplete)}):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:ev(),user_unique_id:this.configManager.get("user_unique_id")||ev()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=U(window.location.href);return!(!t||!t.Web_ID)&&(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),!0)}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:n});var r=ev();this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=r,e.collect.configManager.set({localWebId:r}),e.collect.emit(ea.TokenError),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||r,user_unique_id:e.configManager.get("user_unique_id")||r}),e.collect.configManager.set({localWebId:r}),e.collect.emit(ea.TokenError),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id,r=e.device_id;if(e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.config.enable_device_id){var i=this.configManager.get("device_id")||r||t;this.collect.configManager.set({device_id:i}),e=I(I({},e),{device_id:i})}else delete e.device_id;this.setStorage(e),this.tokenReady=!0,this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:n},infoType:"sdk"}),this.collect.emit(ea.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(ea.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;(t!==n||t!==r)&&(this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(ea.TokenChange,"uuid"),this.collect.emit(ea.SessionReset))}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(ea.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(ea.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(ea.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setDeviceId=function(e){this.configManager.set({device_id:e}),this.config.enable_device_id&&this.cacheToken&&(this.cacheToken.device_id=e,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken))},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise(function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var n={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:n,success:function(n){n&&0===n.e?(t(n.tobid),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"})):(t(""),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:n,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")})},e}(),eA=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},ew=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new J(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(ea.SessionReset,function(e){n.resetSessionId(e)}),this.collect.on(ea.SessionResetTime,function(){n.updateSessionIdTime()}))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:eA(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:eA(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval(function(){e.checkEXp()},this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval(function(){e.checkEXp()},this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||eA(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:eA(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}();function eE(e){let t=e.length;for(;--t>=0;)e[t]=0}let eS=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ek=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ez=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),eI=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eD=Array(576);eE(eD);let eR=Array(60);eE(eR);let ex=Array(512);eE(ex);let eO=Array(256);eE(eO);let eC=Array(29);eE(eC);let eB=Array(30);function eT(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function eM(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}eE(eB);let eG=e=>e<256?ex[e]:ex[256+(e>>>7)],eP=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ej=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,eP(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},eU=(e,t,n)=>{ej(e,n[2*t],n[2*t+1])},eN=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1},eL=(e,t,n)=>{let r=Array(16),i,o,a=0;for(i=1;i<=15;i++)a=a+n[i-1]<<1,r[i]=a;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=eN(r[t]++,t))}},eF=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},eK=e=>{e.bi_valid>8?eP(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},eZ=(e,t,n,r)=>{let i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},eW=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&eZ(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!eZ(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},eQ=(e,t,n)=>{let r,i,o,a,s=0;if(0!==e.sym_next)do r=(255&e.pending_buf[e.sym_buf+s++])+((255&e.pending_buf[e.sym_buf+s++])<<8),i=e.pending_buf[e.sym_buf+s++],0===r?eU(e,i,t):(eU(e,(o=eO[i])+256+1,t),0!==(a=eS[o])&&ej(e,i-=eC[o],a),eU(e,o=eG(--r),n),0!==(a=ek[o])&&ej(e,r-=eB[o],a));while(s<e.sym_next);eU(e,256,t)},eq=(e,t)=>{let n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)0!==n[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)n[2*(c=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)eW(e,n,a);c=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],eW(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*c]=n[2*a]+n[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=c,e.heap[1]=c++,eW(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length,l,u,f,h,d,p,g=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)(h=n[2*n[2*(u=e.heap[l])+1]+1]+1)>c&&(h=c,g++),n[2*u+1]=h,u>r||(e.bl_count[h]++,d=0,u>=s&&(d=a[u-s]),p=n[2*u],e.opt_len+=p*(h+d),o&&(e.static_len+=p*(i[2*u+1]+d)));if(0!==g){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(u=e.bl_count[h];0!==u;)(f=e.heap[--l])>r||(n[2*f+1]!==h&&(e.opt_len+=(h-n[2*f+1])*n[2*f],n[2*f+1]=h),u--)}})(e,t),eL(n,l,e.bl_count)},eH=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))},eV=(e,t,n)=>{let r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)do eU(e,i,e.bl_tree);while(0!=--s);else 0!==i?(i!==o&&(eU(e,i,e.bl_tree),s--),eU(e,16,e.bl_tree),ej(e,s-3,2)):s<=10?(eU(e,17,e.bl_tree),ej(e,s-3,3)):(eU(e,18,e.bl_tree),ej(e,s-11,7));s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}},eX=!1,eJ=(e,t,n,r)=>{ej(e,0+ +!!r,3),eK(e),eP(e,n),eP(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var eY={_tr_init:e=>{eX||((()=>{let e,t,n,a,s,c=Array(16);for(n=0,a=0;a<28;a++)for(eC[a]=n,e=0;e<1<<eS[a];e++)eO[n++]=a;for(eO[n-1]=a,s=0,a=0;a<16;a++)for(eB[a]=s,e=0;e<1<<ek[a];e++)ex[s++]=a;for(s>>=7;a<30;a++)for(eB[a]=s<<7,e=0;e<1<<ek[a]-7;e++)ex[256+s++]=a;for(t=0;t<=15;t++)c[t]=0;for(e=0;e<=143;)eD[2*e+1]=8,e++,c[8]++;for(;e<=255;)eD[2*e+1]=9,e++,c[9]++;for(;e<=279;)eD[2*e+1]=7,e++,c[7]++;for(;e<=287;)eD[2*e+1]=8,e++,c[8]++;for(eL(eD,287,c),e=0;e<30;e++)eR[2*e+1]=5,eR[2*e]=eN(e,5);r=new eT(eD,eS,257,286,15),i=new eT(eR,ek,0,30,15),o=new eT([],ez,0,19,7)})(),eX=!0),e.l_desc=new eM(e.dyn_ltree,r),e.d_desc=new eM(e.dyn_dtree,i),e.bl_desc=new eM(e.bl_tree,o),e.bi_buf=0,e.bi_valid=0,eF(e)},_tr_stored_block:eJ,_tr_flush_block:(e,t,n,r)=>{let i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),eq(e,e.l_desc),eq(e,e.d_desc),a=(e=>{let t;for(eH(e,e.dyn_ltree,e.l_desc.max_code),eH(e,e.dyn_dtree,e.d_desc.max_code),eq(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*eI[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?eJ(e,t,n,r):4===e.strategy||o===i?(ej(e,2+ +!!r,3),eQ(e,eD,eR)):(ej(e,4+ +!!r,3),((e,t,n,r)=>{let i;for(ej(e,t-257,5),ej(e,n-1,5),ej(e,r-4,4),i=0;i<r;i++)ej(e,e.bl_tree[2*eI[i]+1],3);eV(e,e.dyn_ltree,t-1),eV(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),eQ(e,e.dyn_ltree,e.dyn_dtree)),eF(e),r&&eK(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(eO[n]+256+1)]++,e.dyn_dtree[2*eG(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ej(e,2,3),eU(e,256,eD),16===e.bi_valid?(eP(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},e$=(e,t,n,r)=>{let i=65535&e,o=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do o=o+(i=i+t[r++]|0)|0;while(--a);i%=65521,o%=65521}return i|o<<16};let e0=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var e1=(e,t,n,r)=>{let i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^e0[255&(e^t[n])];return -1^e},e2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},e5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:e4,_tr_stored_block:e6,_tr_flush_block:e3,_tr_tally:e8,_tr_align:e9}=eY,{Z_NO_FLUSH:e7,Z_PARTIAL_FLUSH:te,Z_FULL_FLUSH:tt,Z_FINISH:tn,Z_BLOCK:tr,Z_OK:ti,Z_STREAM_END:to,Z_STREAM_ERROR:ta,Z_DATA_ERROR:ts,Z_BUF_ERROR:tc,Z_DEFAULT_COMPRESSION:tl,Z_FILTERED:tu,Z_HUFFMAN_ONLY:tf,Z_RLE:th,Z_FIXED:td,Z_DEFAULT_STRATEGY:tp,Z_UNKNOWN:tg,Z_DEFLATED:tm}=e5,t_=(e,t)=>(e.msg=e2[t],t),ty=e=>2*e-9*(e>4),tv=e=>{let t=e.length;for(;--t>=0;)e[t]=0},tb=e=>{let t,n,r,i=e.w_size;r=t=e.hash_size;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);r=t=i;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},tA=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,tw=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},tE=(e,t)=>{e3(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tw(e.strm)},tS=(e,t)=>{e.pending_buf[e.pending++]=t},tk=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},tz=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=e$(e.adler,t,i,n):2===e.state.wrap&&(e.adler=e1(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},tI=(e,t)=>{let n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,f=e.prev,h=e.strstart+258,d=l[o+a-1],p=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(l[(n=t)+a]===p&&l[n+a-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do;while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=258-(h-o),o=h-258,r>a){if(e.match_start=t,a=r,r>=s)break;d=l[o+a-1],p=l[o+a]}}while((t=f[t&u])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead},tD=e=>{let t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-262)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),tb(e),n+=i),0===e.strm.avail_in)break;if(t=tz(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=tA(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=tA(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},tR=(e,t)=>{let n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<o&&(0===n&&t!==tn||t===e7||n!==r+e.strm.avail_in)))break;a=+(t===tn&&n===r+e.strm.avail_in),e6(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,tw(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(tz(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return(s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==e7&&t!==tn&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(tz(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,o=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=o||(r||t===tn)&&t!==e7&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,a=+(t===tn&&0===e.strm.avail_in&&n===r),e6(e,e.block_start,n,a),e.block_start+=n,tw(e.strm)),a?3:1)},tx=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(tD(e),e.lookahead<262&&t===e7)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=tA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=tI(e,n)),e.match_length>=3)if(r=e8(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=tA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=tA(e,e.ins_h,e.window[e.strstart+1]);else r=e8(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(tE(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===tn?(tE(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(tE(e,!1),0===e.strm.avail_out)?1:2},tO=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<262){if(tD(e),e.lookahead<262&&t===e7)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=tA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=tI(e,n),e.match_length<=5&&(e.strategy===tu||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=e8(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=tA(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(tE(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=e8(e,0,e.window[e.strstart-1]))&&tE(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=e8(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===tn?(tE(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(tE(e,!1),0===e.strm.avail_out)?1:2};function tC(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}let tB=[new tC(0,0,0,0,tR),new tC(4,4,8,4,tx),new tC(4,5,16,8,tx),new tC(4,6,32,32,tx),new tC(4,4,16,16,tO),new tC(8,16,32,32,tO),new tC(8,16,128,128,tO),new tC(8,32,128,256,tO),new tC(32,128,258,1024,tO),new tC(32,258,258,4096,tO)];function tT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),tv(this.dyn_ltree),tv(this.dyn_dtree),tv(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),tv(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),tv(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let tM=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var tG={deflateInit2:(e,t,n,r,i,o)=>{if(!e)return ta;let a=1;if(t===tl&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||n!==tm||r<8||r>15||t<0||t>9||o<0||o>td||8===r&&1!==a)return t_(e,ta);8===r&&(r=9);let s=new tT;return e.state=s,s.strm=e,s.status=42,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=n,(e=>{var t;let n=(e=>{if(tM(e))return t_(e,ta);e.total_in=e.total_out=0,e.data_type=tg;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,e4(t),ti})(e);return n===ti&&((t=e.state).window_size=2*t.w_size,tv(t.head),t.max_lazy_match=tB[t.level].max_lazy,t.good_match=tB[t.level].good_length,t.nice_match=tB[t.level].nice_length,t.max_chain_length=tB[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n})(e)},deflateSetHeader:(e,t)=>tM(e)||2!==e.state.wrap?ta:(e.state.gzhead=t,ti),deflate:(e,t)=>{if(tM(e)||t>tr||t<0)return e?t_(e,ta):ta;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==tn)return t_(e,0===e.avail_out?tc:ta);let r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(tw(e),0===e.avail_out)return n.last_flush=-1,ti}else if(0===e.avail_in&&ty(t)<=ty(r)&&t!==tn)return t_(e,tc);if(666===n.status&&0!==e.avail_in)return t_(e,tc);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=tm+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=tf||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),tk(n,t+=31-t%31),0!==n.strstart&&(tk(n,e.adler>>>16),tk(n,65535&e.adler)),e.adler=1,n.status=113,tw(e),0!==n.pending)return n.last_flush=-1,ti}if(57===n.status){if(e.adler=0,tS(n,31),tS(n,139),tS(n,8),n.gzhead)tS(n,+!!n.gzhead.text+2*!!n.gzhead.hcrc+4*!!n.gzhead.extra+8*!!n.gzhead.name+16*!!n.gzhead.comment),tS(n,255&n.gzhead.time),tS(n,n.gzhead.time>>8&255),tS(n,n.gzhead.time>>16&255),tS(n,n.gzhead.time>>24&255),tS(n,9===n.level?2:4*(n.strategy>=tf||n.level<2)),tS(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(tS(n,255&n.gzhead.extra.length),tS(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=e1(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(tS(n,0),tS(n,0),tS(n,0),tS(n,0),tS(n,0),tS(n,9===n.level?2:4*(n.strategy>=tf||n.level<2)),tS(n,3),n.status=113,tw(e),0!==n.pending)return n.last_flush=-1,ti}if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=e1(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,tw(e),0!==n.pending)return n.last_flush=-1,ti;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=e1(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=e1(e.adler,n.pending_buf,n.pending-r,r)),tw(e),0!==n.pending)return n.last_flush=-1,ti;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,tS(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=e1(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=e1(e.adler,n.pending_buf,n.pending-r,r)),tw(e),0!==n.pending)return n.last_flush=-1,ti;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,tS(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=e1(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(tw(e),0!==n.pending))return n.last_flush=-1,ti;tS(n,255&e.adler),tS(n,e.adler>>8&255),e.adler=0}if(n.status=113,tw(e),0!==n.pending)return n.last_flush=-1,ti}if(0!==e.avail_in||0!==n.lookahead||t!==e7&&666!==n.status){let r=0===n.level?tR(n,t):n.strategy===tf?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(tD(e),0===e.lookahead)){if(t===e7)return 1;break}if(e.match_length=0,n=e8(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(tE(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===tn?(tE(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(tE(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===th?((e,t)=>{let n,r,i,o,a=e.window;for(;;){if(e.lookahead<=258){if(tD(e),e.lookahead<=258&&t===e7)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+258;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=e8(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=e8(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(tE(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===tn?(tE(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(tE(e,!1),0===e.strm.avail_out)?1:2})(n,t):tB[n.level].func(n,t);if(3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),ti;if(2===r&&(t===te?e9(n):t!==tr&&(e6(n,0,0,!1),t===tt&&(tv(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),tw(e),0===e.avail_out))return n.last_flush=-1,ti}return t!==tn?ti:n.wrap<=0?to:(2===n.wrap?(tS(n,255&e.adler),tS(n,e.adler>>8&255),tS(n,e.adler>>16&255),tS(n,e.adler>>24&255),tS(n,255&e.total_in),tS(n,e.total_in>>8&255),tS(n,e.total_in>>16&255),tS(n,e.total_in>>24&255)):(tk(n,e.adler>>>16),tk(n,65535&e.adler)),tw(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ti:to)},deflateEnd:e=>{if(tM(e))return ta;let t=e.state.status;return e.state=null,113===t?t_(e,ts):ti},deflateSetDictionary:(e,t)=>{let n=t.length;if(tM(e))return ta;let r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return ta;if(1===i&&(e.adler=e$(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(tv(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,tD(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do r.ins_h=tA(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t);r.strstart=e,r.lookahead=2,tD(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,ti}};let tP=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var tj=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)tP(n,t)&&(e[t]=n[t])}}return e},tU=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n};let tN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){tN=!1}let tL=new Uint8Array(256);for(let e=0;e<256;e++)tL[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;tL[254]=tL[254]=1;var tF=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},tK=(e,t)=>{let n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let o=Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){o[r++]=t;continue}let a=tL[t];if(a>4)o[r++]=65533,n+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&n<i;)t=t<<6|63&e[n++],a--;a>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}var a=r;if(a<65534&&o.subarray&&tN)return String.fromCharCode.apply(null,o.length===a?o:o.subarray(0,a));let s="";for(let e=0;e<a;e++)s+=String.fromCharCode(o[e]);return s},tZ=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+tL[e[n]]>t?n:t},tW=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let tQ=Object.prototype.toString,{Z_NO_FLUSH:tq,Z_SYNC_FLUSH:tH,Z_FULL_FLUSH:tV,Z_FINISH:tX,Z_OK:tJ,Z_STREAM_END:tY,Z_DEFAULT_COMPRESSION:t$,Z_DEFAULT_STRATEGY:t0,Z_DEFLATED:t1}=e5;function t2(e){this.options=tj({level:t$,method:t1,chunkSize:16384,windowBits:15,memLevel:8,strategy:t0},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tW,this.strm.avail_out=0;let n=tG.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tJ)throw Error(e2[n]);if(t.header&&tG.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?tF(t.dictionary):"[object ArrayBuffer]"===tQ.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=tG.deflateSetDictionary(this.strm,e))!==tJ)throw Error(e2[n]);this._dict_set=!0}}function t5(e,t){let n=new t2(t);if(n.push(e,!0),n.err)throw n.msg||e2[n.err];return n.result}t2.prototype.push=function(e,t){let n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?tX:tq,"string"==typeof e?i.input=tF(e):"[object ArrayBuffer]"===tQ.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r===tH||r===tV)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=tG.deflate(i,r))===tY)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=tG.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tJ;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},t2.prototype.onData=function(e){this.chunks.push(e)},t2.prototype.onEnd=function(e){e===tJ&&(this.result=tU(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var t4=function(e,t){let n,r,i,o,a,s,c,l,u,f,h,d,p,g,m,_,y,v,b,A,w,E,S,k,z=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),i=e.next_out,k=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=z.dmax,c=z.wsize,l=z.whave,u=z.wnext,f=z.window,h=z.hold,d=z.bits,p=z.lencode,g=z.distcode,m=(1<<z.lenbits)-1,_=(1<<z.distbits)-1;e:do for(d<15&&(h+=S[n++]<<d,d+=8,h+=S[n++]<<d,d+=8),y=p[h&m];;){if(h>>>=v=y>>>24,d-=v,0==(v=y>>>16&255))k[i++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=p[(65535&y)+(h&(1<<v)-1)];continue}if(32&v){z.mode=16191;break e}e.msg="invalid literal/length code",z.mode=16209;break e}for(b=65535&y,(v&=15)&&(d<v&&(h+=S[n++]<<d,d+=8),b+=h&(1<<v)-1,h>>>=v,d-=v),d<15&&(h+=S[n++]<<d,d+=8,h+=S[n++]<<d,d+=8),y=g[h&_];;){if(h>>>=v=y>>>24,d-=v,!(16&(v=y>>>16&255))){if(0==(64&v)){y=g[(65535&y)+(h&(1<<v)-1)];continue}e.msg="invalid distance code",z.mode=16209;break e}if(A=65535&y,d<(v&=15)&&(h+=S[n++]<<d,(d+=8)<v&&(h+=S[n++]<<d,d+=8)),(A+=h&(1<<v)-1)>s){e.msg="invalid distance too far back",z.mode=16209;break e}if(h>>>=v,d-=v,A>(v=i-o)){if((v=A-v)>l&&z.sane){e.msg="invalid distance too far back",z.mode=16209;break e}if(w=0,E=f,0===u){if(w+=c-v,v<b){b-=v;do k[i++]=f[w++];while(--v);w=i-A,E=k}}else if(u<v){if(w+=c+u-v,(v-=u)<b){b-=v;do k[i++]=f[w++];while(--v);if(w=0,u<b){b-=v=u;do k[i++]=f[w++];while(--v);w=i-A,E=k}}}else if(w+=u-v,v<b){b-=v;do k[i++]=f[w++];while(--v);w=i-A,E=k}for(;b>2;)k[i++]=E[w++],k[i++]=E[w++],k[i++]=E[w++],b-=3;b&&(k[i++]=E[w++],b>1&&(k[i++]=E[w++]))}else{w=i-A;do k[i++]=k[w++],k[i++]=k[w++],k[i++]=k[w++],b-=3;while(b>2);b&&(k[i++]=k[w++],b>1&&(k[i++]=k[w++]))}break}}break}while(n<r&&i<a);n-=b=d>>3,d-=b<<3,h&=(1<<d)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<a?a-i+257:257-(i-a),z.hold=h,z.bits=d};let t6=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),t3=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),t8=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),t9=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var t7=(e,t,n,r,i,o,a,s)=>{let c=s.bits,l,u,f,h,d,p,g=0,m=0,_=0,y=0,v=0,b=0,A=0,w=0,E=0,S=0,k=null,z=new Uint16Array(16),I=new Uint16Array(16),D,R,x,O=null;for(g=0;g<=15;g++)z[g]=0;for(m=0;m<r;m++)z[t[n+m]]++;for(v=c,y=15;y>=1&&0===z[y];y--);if(v>y&&(v=y),0===y)return i[o++]=0x1400000,i[o++]=0x1400000,s.bits=1,0;for(_=1;_<y&&0===z[_];_++);for(v<_&&(v=_),w=1,g=1;g<=15;g++)if(w<<=1,(w-=z[g])<0)return -1;if(w>0&&(0===e||1!==y))return -1;for(I[1]=0,g=1;g<15;g++)I[g+1]=I[g]+z[g];for(m=0;m<r;m++)0!==t[n+m]&&(a[I[t[n+m]]++]=m);if(0===e?(k=O=a,p=20):1===e?(k=t6,O=t3,p=257):(k=t8,O=t9,p=0),S=0,m=0,g=_,d=o,b=v,A=0,f=-1,h=(E=1<<v)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){D=g-A,a[m]+1<p?(R=0,x=a[m]):a[m]>=p?(R=O[a[m]-p],x=k[a[m]-p]):(R=96,x=0),l=1<<g-A,_=u=1<<b;do i[d+(S>>A)+(u-=l)]=D<<24|R<<16|x;while(0!==u);for(l=1<<g-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,m++,0==--z[g]){if(g===y)break;g=t[n+a[m]]}if(g>v&&(S&h)!==f){for(0===A&&(A=v),d+=_,w=1<<(b=g-A);b+A<y&&!((w-=z[b+A])<=0);)b++,w<<=1;if(E+=1<<b,1===e&&E>852||2===e&&E>592)return 1;i[f=S&h]=v<<24|b<<16|d-o}}return 0!==S&&(i[d+S]=g-A<<24|4194304),s.bits=v,0};let{Z_FINISH:ne,Z_BLOCK:nt,Z_TREES:nn,Z_OK:nr,Z_STREAM_END:ni,Z_NEED_DICT:no,Z_STREAM_ERROR:na,Z_DATA_ERROR:ns,Z_MEM_ERROR:nc,Z_BUF_ERROR:nl,Z_DEFLATED:nu}=e5,nf=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function nh(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let nd=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},np=e=>{if(nd(e))return na;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(nd(e))return na;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,nr})(e)},ng,nm,n_=!0,ny=e=>{if(n_){ng=new Int32Array(512),nm=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(t7(1,e.lens,0,288,ng,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;t7(2,e.lens,0,32,nm,0,e.work,{bits:5}),n_=!1}e.lencode=ng,e.lenbits=9,e.distcode=nm,e.distbits=5},nv=(e,t,n,r)=>{let i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var nb={inflateReset:np,inflateInit2:(e,t)=>{if(!e)return na;let n=new nh;e.state=n,n.strm=e,n.window=null,n.mode=16180;let r=((e,t)=>{let n;if(nd(e))return na;let r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?na:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,np(e))})(e,t);return r!==nr&&(e.state=null),r},inflate:(e,t)=>{let n,r,i,o,a,s,c,l,u,f,h,d,p,g,m,_,y,v,b,A,w,E,S,k,z=0,I=new Uint8Array(4),D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nd(e)||!e.output||!e.input&&0!==e.avail_in)return na;16191===(i=e.state).mode&&(i.mode=16192),c=e.next_out,a=e.output,u=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,f=i.hold,h=i.bits,d=l,p=u,k=nr;e:for(;;)switch(i.mode){case 16180:if(0===i.wrap){i.mode=16192;break}for(;h<16;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(2&i.wrap&&35615===f){0===i.wbits&&(i.wbits=15),i.check=0,I[0]=255&f,I[1]=f>>>8&255,i.check=e1(i.check,I,2,0),f=0,h=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",i.mode=16209;break}if((15&f)!==nu){e.msg="unknown compression method",i.mode=16209;break}if(f>>>=4,h-=4,S=8+(15&f),0===i.wbits&&(i.wbits=S),S>15||S>i.wbits){e.msg="invalid window size",i.mode=16209;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&f?16189:16191,f=0,h=0;break;case 16181:for(;h<16;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(i.flags=f,(255&i.flags)!==nu){e.msg="unknown compression method",i.mode=16209;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=16209;break}i.head&&(i.head.text=f>>8&1),512&i.flags&&4&i.wrap&&(I[0]=255&f,I[1]=f>>>8&255,i.check=e1(i.check,I,2,0)),f=0,h=0,i.mode=16182;case 16182:for(;h<32;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.head&&(i.head.time=f),512&i.flags&&4&i.wrap&&(I[0]=255&f,I[1]=f>>>8&255,I[2]=f>>>16&255,I[3]=f>>>24&255,i.check=e1(i.check,I,4,0)),f=0,h=0,i.mode=16183;case 16183:for(;h<16;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.head&&(i.head.xflags=255&f,i.head.os=f>>8),512&i.flags&&4&i.wrap&&(I[0]=255&f,I[1]=f>>>8&255,i.check=e1(i.check,I,2,0)),f=0,h=0,i.mode=16184;case 16184:if(1024&i.flags){for(;h<16;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.length=f,i.head&&(i.head.extra_len=f),512&i.flags&&4&i.wrap&&(I[0]=255&f,I[1]=f>>>8&255,i.check=e1(i.check,I,2,0)),f=0,h=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&((g=i.length)>l&&(g=l),g&&(i.head&&(S=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(o.subarray(s,s+g),S)),512&i.flags&&4&i.wrap&&(i.check=e1(i.check,o,g,s)),l-=g,s+=g,i.length-=g),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===l)break e;g=0;do S=o[s+g++],i.head&&S&&i.length<65536&&(i.head.name+=String.fromCharCode(S));while(S&&g<l);if(512&i.flags&&4&i.wrap&&(i.check=e1(i.check,o,g,s)),l-=g,s+=g,S)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===l)break e;g=0;do S=o[s+g++],i.head&&S&&i.length<65536&&(i.head.comment+=String.fromCharCode(S));while(S&&g<l);if(512&i.flags&&4&i.wrap&&(i.check=e1(i.check,o,g,s)),l-=g,s+=g,S)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;h<16;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(4&i.wrap&&f!==(65535&i.check)){e.msg="header crc mismatch",i.mode=16209;break}f=0,h=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=16191;break;case 16189:for(;h<32;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}e.adler=i.check=nf(f),f=0,h=0,i.mode=16190;case 16190:if(0===i.havedict)return e.next_out=c,e.avail_out=u,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=h,no;e.adler=i.check=1,i.mode=16191;case 16191:if(t===nt||t===nn)break e;case 16192:if(i.last){f>>>=7&h,h-=7&h,i.mode=16206;break}for(;h<3;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}switch(i.last=1&f,h-=1,3&(f>>>=1)){case 0:i.mode=16193;break;case 1:if(ny(i),i.mode=16199,t===nn){f>>>=2,h-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=16209}f>>>=2,h-=2;break;case 16193:for(f>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",i.mode=16209;break}if(i.length=65535&f,f=0,h=0,i.mode=16194,t===nn)break e;case 16194:i.mode=16195;case 16195:if(g=i.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;a.set(o.subarray(s,s+g),c),l-=g,s+=g,u-=g,c+=g,i.length-=g;break}i.mode=16191;break;case 16196:for(;h<14;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(i.nlen=257+(31&f),h-=5,i.ndist=1+(31&(f>>>=5)),h-=5,i.ncode=4+(15&(f>>>=5)),f>>>=4,h-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=16209;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;h<3;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.lens[D[i.have++]]=7&f,f>>>=3,h-=3}for(;i.have<19;)i.lens[D[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,n={bits:i.lenbits},k=t7(0,i.lens,0,19,i.lencode,0,i.work,n),i.lenbits=n.bits,k){e.msg="invalid code lengths set",i.mode=16209;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;y=(z=i.lencode[f&(1<<i.lenbits)-1])>>>24,v=z>>>16&255,b=65535&z,!(y<=h);){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(b<16)f>>>=y,h-=y,i.lens[i.have++]=b;else{if(16===b){for(r=y+2;h<r;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(f>>>=y,h-=y,0===i.have){e.msg="invalid bit length repeat",i.mode=16209;break}S=i.lens[i.have-1],g=3+(3&f),f>>>=2,h-=2}else if(17===b){for(r=y+3;h<r;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}f>>>=y,h-=y,S=0,g=3+(7&f),f>>>=3,h-=3}else{for(r=y+7;h<r;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}f>>>=y,h-=y,S=0,g=11+(127&f),f>>>=7,h-=7}if(i.have+g>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=16209;break}for(;g--;)i.lens[i.have++]=S}}if(16209===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=16209;break}if(i.lenbits=9,n={bits:i.lenbits},k=t7(1,i.lens,0,i.nlen,i.lencode,0,i.work,n),i.lenbits=n.bits,k){e.msg="invalid literal/lengths set",i.mode=16209;break}if(i.distbits=6,i.distcode=i.distdyn,n={bits:i.distbits},k=t7(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,n),i.distbits=n.bits,k){e.msg="invalid distances set",i.mode=16209;break}if(i.mode=16199,t===nn)break e;case 16199:i.mode=16200;case 16200:if(l>=6&&u>=258){e.next_out=c,e.avail_out=u,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=h,t4(e,p),c=e.next_out,a=e.output,u=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,f=i.hold,h=i.bits,16191===i.mode&&(i.back=-1);break}for(i.back=0;y=(z=i.lencode[f&(1<<i.lenbits)-1])>>>24,v=z>>>16&255,b=65535&z,!(y<=h);){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(v&&0==(240&v)){for(A=y,w=v,E=b;y=(z=i.lencode[E+((f&(1<<A+w)-1)>>A)])>>>24,v=z>>>16&255,b=65535&z,!(A+y<=h);){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}f>>>=A,h-=A,i.back+=A}if(f>>>=y,h-=y,i.back+=y,i.length=b,0===v){i.mode=16205;break}if(32&v){i.back=-1,i.mode=16191;break}if(64&v){e.msg="invalid literal/length code",i.mode=16209;break}i.extra=15&v,i.mode=16201;case 16201:if(i.extra){for(r=i.extra;h<r;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.length+=f&(1<<i.extra)-1,f>>>=i.extra,h-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;y=(z=i.distcode[f&(1<<i.distbits)-1])>>>24,v=z>>>16&255,b=65535&z,!(y<=h);){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(0==(240&v)){for(A=y,w=v,E=b;y=(z=i.distcode[E+((f&(1<<A+w)-1)>>A)])>>>24,v=z>>>16&255,b=65535&z,!(A+y<=h);){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}f>>>=A,h-=A,i.back+=A}if(f>>>=y,h-=y,i.back+=y,64&v){e.msg="invalid distance code",i.mode=16209;break}i.offset=b,i.extra=15&v,i.mode=16203;case 16203:if(i.extra){for(r=i.extra;h<r;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}i.offset+=f&(1<<i.extra)-1,f>>>=i.extra,h-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=16209;break}i.mode=16204;case 16204:if(0===u)break e;if(g=p-u,i.offset>g){if((g=i.offset-g)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=16209;break}g>i.wnext?(g-=i.wnext,m=i.wsize-g):m=i.wnext-g,g>i.length&&(g=i.length),_=i.window}else _=a,m=c-i.offset,g=i.length;g>u&&(g=u),u-=g,i.length-=g;do a[c++]=_[m++];while(--g);0===i.length&&(i.mode=16200);break;case 16205:if(0===u)break e;a[c++]=i.length,u--,i.mode=16200;break;case 16206:if(i.wrap){for(;h<32;){if(0===l)break e;l--,f|=o[s++]<<h,h+=8}if(p-=u,e.total_out+=p,i.total+=p,4&i.wrap&&p&&(e.adler=i.check=i.flags?e1(i.check,a,p,c-p):e$(i.check,a,p,c-p)),p=u,4&i.wrap&&(i.flags?f:nf(f))!==i.check){e.msg="incorrect data check",i.mode=16209;break}f=0,h=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;h<32;){if(0===l)break e;l--,f+=o[s++]<<h,h+=8}if(4&i.wrap&&f!==(0|i.total)){e.msg="incorrect length check",i.mode=16209;break}f=0,h=0}i.mode=16208;case 16208:k=ni;break e;case 16209:k=ns;break e;case 16210:return nc;default:return na}return e.next_out=c,e.avail_out=u,e.next_in=s,e.avail_in=l,i.hold=f,i.bits=h,(i.wsize||p!==e.avail_out&&i.mode<16209&&(i.mode<16206||t!==ne))&&nv(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,i.total+=p,4&i.wrap&&p&&(e.adler=i.check=i.flags?e1(i.check,a,p,e.next_out-p):e$(i.check,a,p,e.next_out-p)),e.data_type=i.bits+64*!!i.last+128*(16191===i.mode)+256*(16199===i.mode||16194===i.mode),(0===d&&0===p||t===ne)&&k===nr&&(k=nl),k},inflateEnd:e=>{if(nd(e))return na;let t=e.state;return t.window&&(t.window=null),e.state=null,nr},inflateGetHeader:(e,t)=>{if(nd(e))return na;let n=e.state;return 0==(2&n.wrap)?na:(n.head=t,t.done=!1,nr)},inflateSetDictionary:(e,t)=>{let n,r=t.length;return nd(e)||0!==(n=e.state).wrap&&16190!==n.mode?na:16190===n.mode&&e$(1,t,r,0)!==n.check?ns:nv(e,t,r,r)?(n.mode=16210,nc):(n.havedict=1,nr)}},nA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let nw=Object.prototype.toString,{Z_NO_FLUSH:nE,Z_FINISH:nS,Z_OK:nk,Z_STREAM_END:nz,Z_NEED_DICT:nI,Z_STREAM_ERROR:nD,Z_DATA_ERROR:nR,Z_MEM_ERROR:nx}=e5;function nO(e){this.options=tj({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tW,this.strm.avail_out=0;let n=nb.inflateInit2(this.strm,t.windowBits);if(n!==nk||(this.header=new nA,nb.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=tF(t.dictionary):"[object ArrayBuffer]"===nw.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=nb.inflateSetDictionary(this.strm,t.dictionary))!==nk)))throw Error(e2[n])}function nC(e,t){let n=new nO(t);if(n.push(e),n.err)throw n.msg||e2[n.err];return n.result}nO.prototype.push=function(e,t){let n,r,i,o=this.strm,a=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?nS:nE,"[object ArrayBuffer]"===nw.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(a),o.next_out=0,o.avail_out=a),(n=nb.inflate(o,r))===nI&&s&&((n=nb.inflateSetDictionary(o,s))===nk?n=nb.inflate(o,r):n===nR&&(n=nI));o.avail_in>0&&n===nz&&o.state.wrap>0&&0!==e[o.next_in];)nb.inflateReset(o),n=nb.inflate(o,r);switch(n){case nD:case nR:case nI:case nx:return this.onEnd(n),this.ended=!0,!1}if(i=o.avail_out,o.next_out&&(0===o.avail_out||n===nz))if("string"===this.options.to){let e=tZ(o.output,o.next_out),t=o.next_out-e,n=tK(o.output,e);o.next_out=t,o.avail_out=a-t,t&&o.output.set(o.output.subarray(e,e+t),0),this.onData(n)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(n!==nk||0!==i){if(n===nz)return n=nb.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},nO.prototype.onData=function(e){this.chunks.push(e)},nO.prototype.onEnd=function(e){e===nk&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=tU(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:nB,deflate:nT,deflateRaw:nM,gzip:nG}={Deflate:t2,deflate:t5,deflateRaw:function(e,t){return(t=t||{}).raw=!0,t5(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,t5(e,t)},constants:e5},{Inflate:nP,inflate:nj,inflateRaw:nU,ungzip:nN}={Inflate:nO,inflate:nC,inflateRaw:function(e,t){return(t=t||{}).raw=!0,nC(e,t)},ungzip:nC,constants:e5};var nL={gzip:nG},nF=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,r=e.method,i=e.success,o=e.fail,a={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var s in this.customHeader)a[s]=this.customHeader[s];window.fetch?fetch(t,{method:r||"POST",headers:a,body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){i&&i(e)}).catch(function(e){o&&o(n,e)}):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:n,method:r,success:i,fail:o}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,r=e.success,i=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(n))?r&&r():i&&i(n,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,n=e.url,r=e.data,i=e.method,o=e.success,a=e.fail,s=e.timeout,c=e.withCredentials,l=e.app_key,u=e.zip;try{var f=new XMLHttpRequest;if(f.open(i||"POST",""+n,!0),f.setRequestHeader("Content-Type","application/json; charset=utf-8"),l&&f.setRequestHeader("X-MCS-AppKey",""+l),Object.keys(this.customHeader).length)for(var h in this.customHeader)f.setRequestHeader(h,this.customHeader[h]);c&&(f.withCredentials=!0),s&&(f.timeout=s,f.ontimeout=function(){a&&a(r,t.errorCode.TIMEOUT)}),f.onload=function(){if(o){var e=null;if(f.responseText){try{e=JSON.parse(f.responseText)}catch(t){e={}}o(e,r)}}},f.onerror=function(){f.abort(),a&&a(r,t.errorCode.XHR_ON)};try{var d=JSON.stringify(r);if(this.config.need_zip&&u){var p=(new TextEncoder).encode(d),g=nL.gzip(p);f.setRequestHeader("Content-Encoding","gzip"),f.send(g)}else f.send(d)}catch(e){this.collector.emit("sdk-inner-error",{type:"sdk_error_send",eventData:r,errorCode:1e3,msg:e.message||e.stack||"sdk_error_send"})}}catch(e){this.collector.emit("sdk-inner-error",{type:"sdk_error_request",eventData:r,errorCode:1001,msg:e.message||e.stack||"sdk_error_request"})}},e.prototype.useRequest=function(e){var t=e.useBeacon,n=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!n)return void this.useFetch(e);this.useXhr(e)}},e}(),nK=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters.storage;this.cacheStorgae=new n(!1),this.loadUrl=t.devtool_url||"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach(function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})}catch(e){}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.5_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab");e.content=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||G(er[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}],this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach(function(n){n.key===e&&(t=n)}),t},e.prototype.setInfo=function(e,t){var n=!1;this.info.forEach(function(r){r.key===e&&(n=!0,r=t)}),n||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var n=this.getInfo(e),r=null;return n.content.forEach(function(e){e.name===t&&(r=e)}),r},e.prototype.setSecondInfo=function(e,t,n){var r=this.getInfo(e),i=!1;if(r.content.forEach(function(e){e.name===t&&(e.value=n,i=!0)}),!i){var o={name:t,value:n,desc:t.toLocaleUpperCase()};r.content.push(o)}this.setInfo(e,r)},e.prototype.loadHook=function(){var e=this;this.collect.on(Z.DEBUGGER_MESSAGE,function(t){switch(t.type){case Z.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};if(t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType)e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache());else if("USER"===t.secType)e.setSecondInfo("user","user_unique_id"===t.common?"uuid":t.common,e.collect.configManager.get(t.common));else if("HEADER"===t.secType){var r=e.collect.configManager.get(t.common);e.setSecondInfo("common",t.common,"custom"===t.common?JSON.stringify(r):r)}return void e.updateInfo();case Z.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],o=i.events;if(!o.length)return;o.forEach(function(n){n.checkShow=!0,n.searchShow=!0,n.focusShow=!0,n.status=t.status,n.type=e.filterEvent.has(n.event)?"sdk":"cus",n.verifyType=t.verifyType?"verify":"no",n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"\uFF0C msg: "+(t.msg||t.failType)})}),e.updateEvent(i)}return}})},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.5_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken(function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()})})},e.prototype.sendData=function(e,t){try{window&&window.postMessage({type:e,payload:t},this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+G("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var r=document.createElement("div");r.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var i=document.createElement("div");i.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(r),document.getElementsByTagName("body")[0].appendChild(i);var o=document.getElementById("debugger-applog-web");o&&o.addEventListener("click",function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)})},e}(),nZ={autotrack:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/autotrack.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/ab.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/stay.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/route.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/tracer.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/retry.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/visual.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/visual.js"},object:"LogVisual"}},nW=["et","profile","heartbeat","monitor"],nQ=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new B,this.remotePlugin=new Map,this.Types=ea,this.adapters.storage=J}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,o=0,a=e.plugins.length;o<a;o++)if(e.plugins[o].name===n){e.plugins[o].plugin=t,e.plugins[o].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&nW.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,r,i=this;try{n=JSON.parse(JSON.stringify(t))}catch(e){n=t}if(this.logger=new eh(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&T(n))if(n.app_id&&"number"==typeof(r=n.app_id)&&!isNaN(r))if(n.app_key&&"string"!=typeof n.app_key)this.logger.warn("app_key param is error, must be string, please check!");else{if(n.channel_domain||(n.report_channel&&!ee().has(n.report_channel)?(this.logger.warn("your report_channel: "+n.channel+" is not exist. report_channel must be one of "+et().join(",")+", use default report_channel: us_east instead, please check!!!"),n.report_channel="us_east"):n.report_channel||-1!==["sg","va","in","my","ie","ie2"].indexOf(n.channel)||(this.logger.warn("your channel: "+n.channel+" is not exist. use report_channel instead and report_channel must be one of "+et().join(",")+", use default report_channel: us_east instead, please check!!!"),n.report_channel="us_east"),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK set channel warning",level:"error",time:Date.now(),data:"your report_channel: "+n.channel+" is not exist. report_channel must be one of "+et().join(",")+", use us_east instead, please check!!!",infoType:"sdk"})),this.spider=new ed,this.spider.checkSpider(n))return this.logger.warn("The current environment may be a spider, can not report!"),void this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK hit spider",level:"error",time:Date.now(),data:"The current environment may be a spider, can not report!",infoType:"sdk"});this.appBridge=new ep(this,n.enable_native),this.requestManager=new nF(this,n),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ef(this,n),this.debugger=new nK(this,n),this.initConfig=n,this.emit(ea.Init),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:n,level:"info",time:Date.now(),infoType:"cus"}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new ey,this.tokenManager=new eb,this.sessionManager=new ew,Promise.all([new Promise(function(e){i.once(ea.TokenComplete,function(){e(!0)})}),new Promise(function(e){i.once(ea.Start,function(){e(!0)})}),new Promise(function(e){i.once(ea.LogSettingReady,function(){e(!0)})})]).then(function(){try{e.plugins.reduce(function(e,t){var n=t.plugin,r=t.options,o=Object.assign(i.initConfig,r);i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var a=new n;return a.apply(i,o),e.push(a),e},i.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}i.sdkReady=!0,i.emit(ea.Ready),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Init Completed",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(i.configManager.get("user"))),i.logger.info("appid: "+n.app_id+", sdk is ready, version is 5.3.5_oversea, you can report now !!!"),n.disable_auto_pv&&(i.disableAutoPageView=!0);try{("full"===i.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}i.pageView(),i.on(ea.TokenChange,function(e){"webid"===e&&i.pageView(),i.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})}),i.on(ea.TokenReset,function(){i.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})}),i.on(ea.RouteChange,function(e){e.init||n.disable_route_report||i.pageView()})}),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0}else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(!this.inited)return console.warn("config must be use after function init"),void this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config must be use after function init",infoType:"sdk"});if(!e||!T(e))return console.warn("config params is error, please check"),void this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config params is error, please check",infoType:"sdk"});try{t=JSON.parse(JSON.stringify(t))}catch(n){t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var t,n=I({},t);if(this.initConfig&&this.initConfig.configPersist){var r=this.configManager.getStore();r&&(n=Object.assign(r,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id,n.device_id;var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&(n[r[i]]=e[r[i]])}return n}(n,["web_id","user_unique_id","device_id"]);n.hasOwnProperty("web_id")&&this.emit(ea.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(ea.ConfigUuid,n.user_unique_id),n.hasOwnProperty("device_id")&&this.emit(ea.ConfigDiD,n.device_id),this.configManager.set(i),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:n,infoType:"cus"})}},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(ea.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(ea.Start),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(ea.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach(function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)});else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach(function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))}):r.length&&(this.emit(ea.Event,r),this.emit(ea.SessionResetTime)),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(e){this.logger.warn("something error, please check"),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))return this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK BeconEvent Error",level:"error",time:Date.now(),data:"beconEvent not support batch report, please check",infoType:"sdk"}),void this.logger.warn("beconEvent not support batch report, please check");var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(ea.BeconEvent,n),this.emit(ea.SessionResetTime)),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is null\uFF0C please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=M();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=I(I({},t),e);this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",n)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(ea.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return eA()},e.prototype.setSessionId=function(e){this.emit(ea.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(ea.ResetStay,{url_path:e,title:t,url:n},ea.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(ea.SetStay,{url_path:e,title:t,url:n},ea.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(I({},i))}},o=function(){n.tokenManager.getTobId().then(function(e){i(e)})};this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?o():(t&&setTimeout(function(){i()},t),this.on(ea.Ready,function(){o()}))}else console.warn("predefinePageView should call after init")},e.prototype.startTrackEvent=function(e){e&&this.emit(ea.TrackEventDurationStart,e,ea.TrackEventDuration)},e.prototype.endTrackEvent=function(e,t){void 0===t&&(t={}),e&&this.emit(ea.TrackEventDurationEnd,{eventName:e,params:t},ea.TrackEventDuration)},e.prototype.pauseTrackEvent=function(e){e&&this.emit(ea.TrackEventDurationPause,e,ea.TrackEventDuration)},e.prototype.resumeTrackEvent=function(e){e&&this.emit(ea.TrackEventDurationResume,e,ea.TrackEventDuration)},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(ea.ProfileSet,e,ea.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(ea.ProfileSetOnce,e,ea.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(ea.ProfileIncrement,e,ea.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(ea.ProfileUnset,e,ea.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(ea.ProfileAppend,e,ea.Profile),this.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(ea.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,ea.Ab)},e.prototype.getVar=function(e,t,n,r){this.emit(ea.AbVar,{name:e,defaultValue:t,callback:n,uuid:r},ea.Ab)},e.prototype.getABconfig=function(e,t){this.emit(ea.AbConfig,{params:e,callback:t},ea.Ab)},e.prototype.getABConfig=function(e,t){this.emit(ea.AbConfig,{params:e,callback:t},ea.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(ea.AbVersionChangeOn,e,ea.Ab),function(){t.emit(ea.AbVersionChangeOff,e,ea.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(ea.AbVersionChangeOff,e,ea.Ab)},e.prototype.openOverlayer=function(){this.emit(ea.AbOpenLayer,"",ea.Ab)},e.prototype.closeOverlayer=function(){this.emit(ea.AbCloseLayer,"",ea.Ab)},e.prototype.getAllVars=function(e){this.emit(ea.AbAllVars,e,ea.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(ea.TokenComplete),this.emit(ea.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(ea.TokenComplete),this.emit(ea.DestoryInstance))},e.plugins=[],e}(),nq=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var r=e.Types;e.on(r.SubmitVerify,function(r){r.forEach(function(r){try{var i=JSON.parse(JSON.stringify(r));t.filter&&((i=t.filter(i))||console.warn("filter must return data !!")),e.eventFilter&&i&&((i=e.eventFilter(i))||console.warn("filterEvent api must return data !!"));var o=i||r,a=JSON.parse(JSON.stringify(o));if(!o.length)return;var s=!0;if(o.forEach(function(e){e.events.length||(s=!1)}),!s)return;e.requestManager.useBeacon({url:n.url,data:o}),e.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:a,code:200,status:"success",verifyType:!0})}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"SDK Report ByteIo Verify Request Error",level:"error",time:Date.now(),data:e.message})}})})}}else console.log("please use correct et_test url")},e}(),nH=function(){function e(){var e=this;this.setInterval=function(){var t,n,r,i;t=function(){e.isSessionhasEvent&&e.endCurrentSession()},n=e.sessionInterval,void 0===t&&(t=function(){}),void 0===n&&(n=1e3),i=Date.now()+n,r=window.setTimeout(function e(){var o=Date.now()-i;t(),i+=n,r=window.setTimeout(e,Math.max(0,n-o))},n),e.clearIntervalFunc=function(){window.clearTimeout(r)}},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,function(){n.process()})}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),nV=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var r=this.collect.Types;this.collect.on(r.Ready,function(){n.sdkOnload()}),this.collect.on(r.SubmitError,function(e){var t=e.type,r=e.eventData,i=e.errorCode,o=e.response;"f_data"===t&&n.sdkError(r,i,o)}),this.collect.on(e.Types.SDKInnerError,function(e){var t=e.type,r=e.eventData,i=e.errorCode,o=e.msg;n.sdkInnerError(t,r,i,o)})}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,o=n.app_name,a=n.sdk_version,s=(r.web_id,{events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:o||"",sdk_version:a,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA",url:location.href,is_setting:this.config.enable_logsetting||!1,enable_logsetting_params:this.config.enable_logsetting_params||!1,enable_logsetting_header_custom:this.config.enable_logsetting_header_custom||!1}),local_time_ms:Date.now()}],user:{user_unique_id:r.user_unique_id},header:{app_id:6656}});setTimeout(function(){e.collect.requestManager.useRequest({url:e.url,data:[s],timeout:3e4,forceXhr:!0})},16)}catch(e){}},e.prototype.sdkError=function(e,t,n){var r=this;try{var i=e[0],o=i.user,a=i.header,s=[];e.forEach(function(e){e.events.forEach(function(e){s.push(e)})});var c={events:s.map(function(e){return{event:"on_error",params:JSON.stringify({type:"sdk_event_error",error_code:t,app_id:a.app_id,app_name:a.app_name||"",error_event:e.event,sdk_version:a.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:a,user:o,err_msg:n.m||""}),local_time_ms:Date.now()}}),user:{user_unique_id:o.user_unique_id},header:{app_id:6656}};setTimeout(function(){r.collect.requestManager.useRequest({url:r.url,data:[c],timeout:3e4,forceXhr:!0})},16)}catch(e){}},e.prototype.sdkInnerError=function(e,t,n,r){var i=this;try{var o=t[0],a=o.user,s=o.header,c=[];t.forEach(function(e){e.events.forEach(function(e){c.push(e)})});var l={events:c.map(function(t){return{event:"on_error",params:JSON.stringify({type:e,error_code:n,app_id:s.app_id,app_name:s.app_name||"",error_event:t.event,sdk_version:s.sdk_version,local_time_ms:t.local_time_ms,tea_event_index:Date.now(),params:t.params,header:s,user:a,ua:window.navigator.userAgent,err_msg:r}),local_time_ms:Date.now()}}),user:a,header:{}};setTimeout(function(){i.collect.requestManager.useRequest({url:i.url,data:[l],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})},16)}catch(e){}},e}(),nX="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,nJ=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach(function(t,n){if("sdk"===t)if(nZ.hasOwnProperty(n)){var r=nZ[n].object,i=""+nZ[n].src[e.channel];e.exist(n,r,i)}else console.warn("your "+n+" is not exist\uFF0Cplease check plugin name");else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))})}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"LoadExtend Fail",level:"error",time:Date.now(),data:e.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var r=this;nX[t]?(this.process(e,nX[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,n,function(){r.process(e,nX[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")},function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")})},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Extend Process Fail",level:"error",time:Date.now(),data:t.message}),console.log("excude "+e+" error, message:"+t.message)}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var o=document.createElement("script");o.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),o.onerror=function(){r(t)},o.onload=function(){i._plugin[e].forEach(function(e){e()})},document.getElementsByTagName("head")[0].appendChild(o)}catch(e){this.collect.emit(Z.DEBUGGER_MESSAGE,{type:Z.DEBUGGER_MESSAGE_SDK,info:"Extend LoadPlugin Fail",level:"error",time:Date.now(),data:e.message})}},e}();nQ.usePlugin(nJ,"extend"),nQ.usePlugin(nq,"et"),nQ.usePlugin(nH,"heartbeat"),nQ.usePlugin(nV,"monitor");var nY=new nQ("default"),n$={CN:3053,OVERSEA:3297},n0=function(e){function t(t){var n,r,i,o,a,s,c=t.test,l=t.TEAChannelDomain,u=void 0===l?"":l,f=t.mode,h=t.TEAChannel,d=t.TEAChannelType;return t.tracker=u||d||h?(r=(n={isTest:c||"test"===f,channel_domain:u,channel_type:d,channel:h}).isTest,i=n.channel_domain,o=n.channel_type,a=n.channel,s=/snssdk|zijieapi/g.test(i)&&/ttp|tcpy/g.test(o)&&/va|sg|in/g.test(a)?n$.CN:n$.OVERSEA,nY.init({app_id:s,channel_type:o,channel:a,channel_domain:i}),nY.config({_staging_flag:+!!r,enable_et_test:r}),nY.start(),nY.event.bind(nY)):function(){},e.call(this,t)||this}return l(t,e),t}(z)},610255:function(e,t,n){"use strict";n.d(t,{oc:()=>M});var r,i,o,a,s=n(849314),c=n(150801),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}(r=o||(o={})).keepRaw="keepRaw",r.replaceAnyway="replaceAnyway",o.replaceAnyway;var f={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:o.replaceAnyway},h=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var i={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(i=t.options.i18nFormat),i.onParseError=t.options.onParseError,i.missingInterpolationHandler=t.options.missingInterpolationHandler,i.icuConfig=t.options.icuConfig,i.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(f,n,i),this.formats=this.options.formats,t){var o=this.options,a=o.bindI18n,s=o.bindI18nStore,l=o.memoize;t.IntlMessageFormat=c.ZP,this.IntlMessageFormat=c.ZP,t.ICU=this,l&&(a&&t.on(a,function(){return r.clearCache()}),s&&t.store.on(s,function(){return r.clearCache()}))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach(function(e){return r.addLocaleData(e)}):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach(function(e){e&&e.locale&&c.ZP.__addLocaleData(e)})},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?l(l({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,r,i){if(!1===(this.options.icuConfig||{}).strict)return n;for(var a={},s=0;s<e.length;s++){var c=e[s];if(1===c.type){var l=c.value;if(null===n[l]||void 0===n[l]){if("function"==typeof this.options.missingInterpolationHandler){var u=this.options.missingInterpolationHandler({key:i,text:t,locale:r,interpolation:{key:l,val:n[l]}});if("string"==typeof u){a[l]=u;continue}}switch(this.options.onParseError){case o.keepRaw:throw Error();case o.replaceAnyway:a[l]="{"+l+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var f=this.options.onParseError(t,l,r,this.IntlMessageFormat);if(!0===f)throw Error();a[l]="string"==typeof f?f:"{"+l+"}"}else this.options.ignoreWarning||console.warn('[Starling ICU Warning] The interpolation parameter "{'+l+'}" is missing in the translation text "'+t+'" for the key "'+i+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),a[l]="{"+l+"}"}}}return Object.assign({},n,a)},e.prototype.parse=function(e,t,n,r,i,o){var a,s,c,l,f=o&&o.resolved&&o.resolved.res,h=this.options.memoize&&n+"."+r+"."+i.replace(/\./g,"###");!f&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memoize&&(l=function(e,t){var n=u(e,t),r=n.obj,i=n.k;if(r)return r[i]}(this.mem,h));try{return!l&&(l=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!o||f)&&(a=this.mem,s=l,(c=u(a,h,Object)).obj[c.k]=s)),l.format(this.checkMissingInterpolation(l.getAst(),e,t||{},n,i))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,i){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}();h.name;var d=n(964125);function p(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}for(var b=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],A={},w=0;w<b.length;w++)A[b[w]]={style:"currency",currency:b[w]};var E={number:A},S="languageTransformer";function k(e){return function(t){return t.type===e}}function z(e,t){var n=e;return(t||[]).map(function(t){n=t.process(e)||n}),n}var I={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},D=[h,d.Z],R=function(){function e(t,n){var r=this;p(this,e),this._waitingToAddResourceBundle=[],this.t=function(e,t,n){var i=Array.isArray(e)?Array.from(e).map(function(){return" "}).join(""):Array(e.length).fill(" "),o=Object.assign({keySeparator:i,nsSeparator:i},t);return"thirdParamFallback"in r.config&&r.config.thirdParamFallback&&(o.thirdParamFallback=!0),r.instance.t(e,n,o)},this._handlePlugins(n),this._handleConfigs(t),this.instance=s.Z.createInstance(),this.instance.isInitialized=!1}return m(e,[{key:"_handlePlugins",value:function(e){var t,n;(null==(t=this.config)||null==(n=t.icuConfig)?void 0:n.open)===!1&&D.shift(),this.plugins=Array.isArray(e)?e.concat(D):D}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},I,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise(function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map(function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),e.instance.use(t)});var r=e.config;e.config.formats=Object.assign({},e.config.formats,E);var i=z(r.lng,e.plugins.filter(k(S)));e.instance.init(Object.assign({},r,{lng:i,i18nFormat:{formats:e.config.formats}}),function(r,i){try{var o,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e._waitingToAddResourceBundle);try{for(a.s();!(o=a.n()).done;){var s,c=o.value;(s=e.instance).addResourceBundle.apply(s,_(c))}}catch(e){a.e(e)}finally{a.f()}e._waitingToAddResourceBundle=[]}catch(e){}r||(e._updateLanguages(),t({t:i,err:r})),e.init=!0,n({t:i,err:r})})})}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(_(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,function(e,r){e||n._updateLanguages(),t&&t(e,r)})}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise(function(n,r){t.config.lng=e,t.instance.changeLanguage(e,function(e,i){e&&r({err:e,t:i}),t._updateLanguages(),n({err:e,t:i})})})}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,i):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!i]),this.instance)}}]),e}(),x="Starling_intl:",O={warn:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["".concat(x," [WARNING]")].concat(n))},error:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["".concat(x," [ERROR]")].concat(n))}};function C(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function B(){}function T(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(i=a||(a={})).intl3rdParty="intl3rdParty",i.backend="backend",i.logger="logger",i.languageDetector="languageDetector",i.postProcessor="postProcessor",i.i18nFormat="i18nFormat",i["3rdParty"]="3rdParty";var M=new(function(){function e(){var t=this;p(this,e),this.t=function(e,n,r){return t.ignoreWarning||t.i18nInstance&&t.i18nInstance.init?e&&("string"!=typeof e||e.trim())?t.i18nInstance.t(e,n,r):"":(O.error("The instance has not been initialized: i18n.t('".concat(e,"'").concat(n?","+JSON.stringify(n):"",");")),null!=r?r:Array.isArray(e)?e[0]:e)},this.plugins=[],this.i18nInstance=new R}return m(e,[{key:"use",value:function(e){return this.plugins.includes(e)?O.warn("Plugin: ".concat(e.name," has beeninit installed.")):this.plugins.push(e),this}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),C(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return C(n.i18nInstance.createInstance(),function(e){var r,i=e.err,o=e.t,s=n.plugins.filter(function(e){return e.type===a.intl3rdParty});return C((r=s.map(T(function(e){if(e&&"function"==typeof e.init){var t=(e.init instanceof Promise?e.init:T(function(t){return Promise.resolve(e.init(t))}))(n);return t&&t.then?t.then(B):Promise.resolve()}})),new Promise(function(e,t){if(Array.isArray(r)||(r=Array.from(r)),r.length<=0)return e([]);var n=[];(r=r.map(function(i,o){return function(){("function"==typeof i?new Promise(i):Promise.resolve(i)).then(function(t){n[o]=t,o===r.length-1?e(n):r[o+1]()},t)}}))[0]()})),function(){return"function"==typeof t&&t(i,o),{err:i,t:o}})})},function(e){return O.error("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}}))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=z(e,this.plugins.filter(k(S)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=z(e,this.plugins.filter(k(S)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.i18nInstance.addResourceBundle(e,t,n,r,i)}}]),e}())},206629:function(e,t,n){"use strict";n.d(t,{RW:()=>ee});var r,i,o,a,s,c=n(849314),l=n(150801),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}(r=o||(o={})).keepRaw="keepRaw",r.replaceAnyway="replaceAnyway",o.replaceAnyway;var h={memorize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:o.replaceAnyway},d=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var i={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(i=t.options.i18nFormat),i.onParseError=t.options.onParseError,i.missingInterpolationHandler=t.options.missingInterpolationHandler,i.icuConfig=t.options.icuConfig,i.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(h,n,i),this.formats=this.options.formats,t){var o=this.options,a=o.bindI18n,s=o.bindI18nStore,c=o.memorize;t.IntlMessageFormat=l.ZP,this.IntlMessageFormat=l.ZP,t.ICU=this,c&&(a&&t.on(a,function(){return r.clearCache()}),s&&t.store.on(s,function(){return r.clearCache()}))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach(function(e){return r.addLocaleData(e)}):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach(function(e){e&&e.locale&&l.ZP.__addLocaleData(e)})},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?u(u({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,r,i){if(!1===(this.options.icuConfig||{}).strict)return n;for(var a={},s=0;s<e.length;s++){var c=e[s];if(1===c.type){var l=c.value;if(null===n[l]||void 0===n[l]){if("function"==typeof this.options.missingInterpolationHandler){var u=this.options.missingInterpolationHandler({key:i,text:t,locale:r,interpolation:{key:l,val:n[l]}});if("string"==typeof u){a[l]=u;continue}}switch(this.options.onParseError){case o.keepRaw:throw Error();case o.replaceAnyway:a[l]="{"+l+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var f=this.options.onParseError(t,l,r,this.IntlMessageFormat);if(!0===f)throw Error();a[l]="string"==typeof f?f:"{"+l+"}"}else this.options.ignoreWarning||console.warn('[Starling ICU Warning] The interpolation parameter "{'+l+'}" is missing in the translation text "'+t+'" for the key "'+i+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),a[l]="{"+l+"}"}}}return Object.assign({},n,a)},e.prototype.parse=function(e,t,n,r,i,o){var a,s,c,l,u=o&&o.resolved&&o.resolved.res,h=this.options.memorize&&n+"."+r+"."+i.replace(/\./g,"###");!u&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memorize&&(l=function(e,t){var n=f(e,t),r=n.obj,i=n.k;if(r)return r[i]}(this.mem,h));try{return!l&&(l=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memorize&&(this.options.memoizeFallback||!o||u)&&(a=this.mem,s=l,(c=f(a,h,Object)).obj[c.k]=s)),l.format(this.checkMissingInterpolation(l.getAst(),e,t||{},n,i))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,i){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}();d.name;var p=Object.defineProperty,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?p(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,n},v=(e,t,n)=>new Promise((r,i)=>{var o=e=>{try{s(n.next(e))}catch(e){i(e)}},a=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);s((n=n.apply(e,t)).next())});function b(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function A(){return a||(a=function(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=b(n);return(e,n)=>r.then(r=>n(r.transaction(t,e).objectStore(t)))}("keyval-store","keyval")),a}function w(e,t=[]){let n=new Set([...e,...t]),r=[];return n.forEach(e=>{r.push(e)}),r}function E(){let e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}var S="STARLING_KEY_RENDER_STORE",k="-S_DIVIDER-",z=class{constructor(e){y(this,"keyRenderCache"),y(this,"timer"),y(this,"projectId"),y(this,"namespaceId"),y(this,"TEAChannelDomain"),y(this,"TEAChannelVersion"),y(this,"logger"),y(this,"getProjectAndNs"),y(this,"sampleRate"),y(this,"strategy"),y(this,"reportFallback"),this.keyRenderCache={},this.timer=NaN,this.projectId=e.projectId,this.namespaceId=e.namespaceId,this.TEAChannelDomain=e.TEAChannelDomain,this.TEAChannelVersion=e.TEAChannelVersion||"v1",this.getProjectAndNs=e.getProjectAndNs,this.logger=e.logger||function(){},this.sampleRate=Math.min(e.sampleRate||1,1),this.strategy=e.strategy||"day",this._reportKeyRenderRecord(),this.reportFallback=e.reportFallback}clear(){return v(this,null,function*(){!function(e=A()){e("readwrite",e=>(e.clear(),b(e.transaction)))}(),this.keyRenderCache={}})}_reportTea(e){return v(this,null,function*(){let t=Object.entries(e||this.keyRenderCache||{}).map(([e,{keyList:t,extraInfo:n={}}])=>{this.logger("cachedKey-info=",e,n);let[r,i,o,a]=e.split(k),s={projectId:i,namespaceId:o,keyList:t,caller:r,callerType:"url",extraInfo:n};return n||delete s.extraInfo,{event:"intl_key_render",params:JSON.stringify(s)}});this.logger("events=",t);let n=function(e,t=20){let n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}(t),r=yield Promise.all(n.map(e=>{let t=/^https:\/\//.test(this.TEAChannelDomain||"")?"":"https://";return fetch(`${t}${this.TEAChannelDomain}/${this.TEAChannelVersion}${"v2"===this.TEAChannelVersion?"/event":""}/list`,{method:"POST",headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify([{user:{user_unique_id:window.location.host},header:{app_id:/zijieapi|bytedance|byted|dongchedi|bd\.feishu|volceapplog|czgts/.test(this.TEAChannelDomain||"")?4797:3297},events:e,verbose:1}])}).then(e=>e.json())})).catch(e=>{this.logger("\u51FA\u9519\u4E86",e)});this.clear(),this.logger("\u8BF7\u6C42\u7ED3\u679C\u8FD4\u56DE",r)})}getStore(){return v(this,null,function*(){return(yield(function(e,t=A()){return t("readonly",t=>b(t.get(e)))})(S).catch(e=>void 0))||{store:{},firstSec:0}})}print(){return v(this,null,function*(){let e=(yield this.getStore())||{};return console.log("store=",Object.entries(e.store).reduce((e,t)=>{let[n,r]=t,[i,o,a,s]=n.split(k);return e[`${o}|${a}|${i}${s?"|"+s:""}`]=r,e},{})),e})}_reportKeyRenderRecord(){return v(this,null,function*(){if("undefined"==typeof window||"undefined"==typeof fetch||"undefined"==typeof indexedDB||(this.logger("\u8FDB\u5165_reportKeyRenderRecord",this.TEAChannelDomain),!this.TEAChannelDomain))return;let e=yield this.getStore();if(this.logger("\u8FDB\u5165_reportKeyRenderRecord,r=",e,this.TEAChannelDomain,this.strategy),(null==e?void 0:e.store)&&"object"==typeof(null==e?void 0:e.store)&&Object.keys(null==e?void 0:e.store).length&&(null==e?void 0:e.firstSec)){let t=!1;switch(this.strategy){case"immediately":t=!0;break;case"hour":t=new Date().getTime()-(null==e?void 0:e.firstSec)>36e5;break;case"half_day":t=new Date().getTime()-(null==e?void 0:e.firstSec)>432e5;break;default:t=(null==e?void 0:e.firstSec)<E()}this.logger("\u8FDB\u5165_reportKeyRenderRecord,shouldReport=",t),t&&(Math.random()<this.sampleRate?(this.logger("\u5C06\u8981 _reportTea"),this._reportTea(null==e?void 0:e.store)):this.clear())}})}getFirstSecond(){return"day"===this.strategy?E():new Date().getTime()}storeKeyRenderRecord(e){return v(this,null,function*(){clearTimeout(this.timer),this.timer=window.setTimeout(()=>v(this,null,function*(){let t=yield this.getStore(),n=Object.entries(e).reduce((e,n)=>{let[r,{keyList:i,extraInfo:o}]=n;return t.store[r]?e[r]={keyList:w(t.store[r].keyList,i)}:e[r]={extraInfo:o,keyList:w(i)},e},{});this.logger("\u5C06\u8981\u5199indexedDB2,store=",n),yield function(e,t,n=A()){return n("readwrite",n=>(n.put(t,e),b(n.transaction)))}(S,{firstSec:t.firstSec||this.getFirstSecond(),store:n})}),5e3)})}recordKeyRender({key:e,processArgs:t}){var n;if("undefined"==typeof window||"undefined"==typeof fetch||"undefined"==typeof indexedDB)return;let{projectId:r,namespaceId:i,TEAChannelDomain:o}=this;if(this.logger("\u539F\u59CBcheck =",{projectId:r,namespaceId:i,TEAChannelDomain:o,key:e}),!(r&&i&&o)){let e=(null==(n=null==t?void 0:t.translator)?void 0:n.options)||{};e.projectId&&(r=e.projectId),e.namespaceId&&(i=e.namespaceId),e.TEAChannelDomain&&(o=e.TEAChannelDomain)}if(o&&e){if(!(r&&i)&&this.getProjectAndNs)try{let e=this.getProjectAndNs(t);r=e.projectId,i=e.namespaceId}catch(e){console.error("Error when excuting getProjectAndNs",e)}if(this.logger("\u4E8C\u6B21check =",{projectId:r,namespaceId:i,TEAChannelDomain:o,key:e}),r&&i){let n=!1;if(this.reportFallback){if("boolean"==typeof this.reportFallback)n=function(e,t){var n,r,i,o;let a=!1;try{let s=null==e?void 0:e.language,c=s&&(null==(r=null==(n=null==e?void 0:e.resourceStore)?void 0:n.data)?void 0:r[s]),l=null==(i=null==e?void 0:e.options)?void 0:i.defaultNS.toString();c&&l&&(null==(o=null==c?void 0:c[l])?void 0:o[t])||(a=!0)}catch(e){}return a}(null==t?void 0:t.translator,e.toString());else if(this.reportFallback instanceof Function)try{let r=this.reportFallback(null==t?void 0:t.translator,e.toString());("boolean"==typeof r||"object"==typeof r)&&(n=r)}catch(e){}}let o=e.toString();Array.isArray(e)&&e.length>1&&(o=e.join("|"));let a=(window.location.host+window.location.pathname).replace(/\/\d+/g,"/_").replace(/\w{32}/,"____"),s=`${a}${k}${r}${k}${i}`;n&&(s=`${s}${k}hitFallback`),this.keyRenderCache[s]?this.keyRenderCache[s].keyList.push(o):this.keyRenderCache[s]={keyList:[o]};let c=this.keyRenderCache[s];if(this.logger("hitFallback,o=",c),n&&(c.extraInfo?c.extraInfo.hitFallback=!0:c.extraInfo={hitFallback:!0},"object"==typeof n&&n.extraInfo&&"object"==typeof n.extraInfo&&Object.values(n.extraInfo).every(e=>"string"==typeof e)))try{c.extraInfo=Object.assign(c.extraInfo,n.extraInfo)}catch(e){}this.storeKeyRenderRecord(this.keyRenderCache)}}}},I={},D=[],R=n(964125);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function B(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function G(e,t){if(e){if("string"==typeof e)return x(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}for(var P=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],j={},U=0;U<P.length;U++)j[P[U]]={style:"currency",currency:P[U]};var N={number:j},L="languageTransformer";function F(e){return function(t){return t.type===e}}function K(e,t){var n=e;return(t||[]).map(function(t){n=t.process(e)||n}),n}var Z={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},W={icu:d,inContext:R.Z,renderReport:function(e){let t=new z(e||{}),n=e||{},{getProjectAndNs:r,logger:i}=n;return I[JSON.stringify(((e,t)=>{var n={};for(var r in e)m.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&g)for(var r of g(e))0>t.indexOf(r)&&_.call(e,r)&&(n[r]=e[r]);return n})(n,["getProjectAndNs","logger"]))]=t,D.push(t),{name:"keyRender",type:"postProcessor",process:(e,n,r,i)=>(t.recordKeyRender({key:n,processArgs:{value:e,key:n,options:r,translator:i}}),e)}}},Q=[W.icu,W.inContext,W.renderReport],q=function(){function e(t,n){var r,i;if(O(this,e),i=[],(r=M(r="_waitingToAddResourceBundle"))in this?Object.defineProperty(this,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[r]=i,null!=t&&t.copiedI18nextInstance){this.instance=t.copiedI18nextInstance;return}this._handlePlugins(n),this._handleConfigs(t),this.instance=c.Z.createInstance(),this.instance.isInitialized=!1,this.KRRList=D}return B(e,[{key:"_handlePlugins",value:function(e){var t,n;if((null==(t=this.config)||null==(n=t.icuConfig)?void 0:n.open)===!1){var r=Q.findIndex(function(e){return"IES_INTL_ICU_PLUGIN"===e.name});r>-1&&Q.splice(r,1)}this.plugins=Array.isArray(e)?e.concat(Q):Q}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},Z,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise(function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext","keyRender"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map(function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),t===W.renderReport?e.instance.use(t(e.config.keyRenderReportConfig)):e.instance.use(t)});var r=e.config;e.config.formats=Object.assign({},e.config.formats,N);var i=K(r.lng,e.plugins.filter(F(L)));e.instance.init(Object.assign({},r,{lng:i,i18nFormat:Object.assign({},r.i18nFormat||{},{formats:e.config.formats})}),function(r,i){try{var o,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=G(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e._waitingToAddResourceBundle);try{for(a.s();!(o=a.n()).done;){var s,c=o.value;(s=e.instance).addResourceBundle.apply(s,T(c))}}catch(e){a.e(e)}finally{a.f()}e._waitingToAddResourceBundle=[]}catch(e){}r||(e._updateLanguages(),t({t:i,err:r})),e.init=!0,n({t:i,err:r})})})}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(T(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,function(e,r){e||n._updateLanguages(),t&&t(e,r)})}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise(function(n,r){t.config.lng=e,t.instance.changeLanguage(e,function(e,i){e&&r({err:e,t:i}),t._updateLanguages(),n({err:e,t:i})})})}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"t",value:function(e,t,n){var r=Array.isArray(e)?Array.from(e).map(function(){return" "}).join(""):Array(e.length).fill(" "),i=Object.assign({keySeparator:r,nsSeparator:r},t);return"thirdParamFallback"in this.config&&this.config.thirdParamFallback&&(i.thirdParamFallback=!0),this.instance.t(e,n,i)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,i):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!i]),this.instance)}},{key:"cloneInstance",value:function(t,n){var r=this.instance.cloneInstance(t,n),i=new e({copiedI18nextInstance:r});return i.t=this.t.bind(i),i.config=this.config,i.plugins=this.plugins,i.languages=this.languages,i.init=r.isInitialized||!!this.init,i.userLng=this.userLng,r.on("initialized",function(){i.init=!0}),i}}])}(),H="Starling_intl:",V={warn:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,["".concat(H," [WARNING]")].concat(n))},error:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,["".concat(H," [ERROR]")].concat(n))}};function X(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function J(){}function Y(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(i=s||(s={})).intl3rdParty="intl3rdParty",i.backend="backend",i.logger="logger",i.languageDetector="languageDetector",i.postProcessor="postProcessor",i.i18nFormat="i18nFormat",i["3rdParty"]="3rdParty";var $=null,ee=function(){function e(t){var n;O(this,e),this.plugins=[],this.i18nInstance=null!=(n=null==t?void 0:t.i18nInstance)?n:new q}return B(e,[{key:"use",value:function(e){return this.plugins.includes(e)?V.warn("Plugin: ".concat(e.name," has beeninit installed.")):this.plugins.push(e),this}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),X(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return X(n.i18nInstance.createInstance(),function(e){var r,i=e.err,o=e.t,a=n.plugins.filter(function(e){return e.type===s.intl3rdParty});return X((r=a.map(Y(function(e){if(e&&"function"==typeof e.init){var t=(e.init instanceof Promise?e.init:Y(function(t){return Promise.resolve(e.init(t))}))(n);return t&&t.then?t.then(J):Promise.resolve()}})),new Promise(function(e,t){if(Array.isArray(r)||(r=Array.from(r)),r.length<=0)return e([]);var n=[];(r=r.map(function(i,o){return function(){("function"==typeof i?new Promise(i):Promise.resolve(i)).then(function(t){n[o]=t,o===r.length-1?e(n):r[o+1]()},t)}}))[0]()})),function(){return"function"==typeof t&&t(i,o),{err:i,t:o}})})},function(e){return V.error("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}}))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=K(e,this.plugins.filter(F(L)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=K(e,this.plugins.filter(F(L)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"t",value:function(e,t,n){var r=null;if(!(r=void 0===this?$:this).ignoreWarning&&(!r.i18nInstance||!r.i18nInstance.init)){try{var i="The instance has not been initialized: i18n.t('".concat(e,"'").concat(t?","+JSON.stringify(t):"",");");V.error(i)}catch(e){}return null!=n?n:Array.isArray(e)?e[0]:e}return e&&("string"!=typeof e||e.trim())?r.i18nInstance.t(e,t,n):""}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.i18nInstance.addResourceBundle(e,t,n,r,i)}},{key:"cloneInstance",value:function(t){var n=new e({i18nInstance:this.i18nInstance.cloneInstance(t)});return n.t=this.t.bind(n),n.plugins=this.plugins,n.ignoreWarning=this.ignoreWarning,n}}])}(),et=$=new ee;et.t=et.t.bind(et)},247164:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+e[t+f],f+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+f],f+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=l}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,f=u>>1,h=5960464477539062e-23*(23===i),d=r?0:o-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?t+=h/c:t+=h*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=u?(s=0,a=u):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+d]=255&a,d+=p,a/=256,l-=8);e[n+d-p]|=128*g}},411490:function(e,t){function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[q]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===V}(e)||Array.isArray(e)||!!e[Q]||!!(null==(t=e.constructor)?void 0:t[Q])||f(e)||h(e))}function o(e,t,n){void 0===n&&(n=!1),0===a(e)?(n?Object.keys:X)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function a(e){var t=e[q];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:f(e)?2:3*!!h(e)}function s(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===a(e)?e.get(t):e[t]}function l(e,t,n){var r=a(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return F&&e instanceof Map}function h(e){return K&&e instanceof Set}function d(e){return e.i||e.u}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=J(e);delete t[q];for(var n=X(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),_(e)||r(e)||!i(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&o(e,function(e,t){return g(t,!0)},!0)),e}function m(){n(2)}function _(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=Y[e];return t||n(18,e),t}function v(e,t){Y[e]||(Y[e]=t)}function b(e,t){t&&(y("Patches"),e.o=[],e.v=[],e.s=t)}function A(e){w(e),e.p.forEach(S),e.p=null}function w(e){e===N&&(N=e.l)}function E(e){return N={p:[],l:N,h:e,_:!0,m:0}}function S(e){var t=e[q];0===t.t||1===t.t?t.j():t.O=!0}function k(e,t){t.m=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.S||y("ES5").P(t,e,o),o?(r[q].g&&(A(t),n(4)),i(e)&&(e=z(t,e),t.l||D(t,e)),t.o&&y("Patches").M(r[q].u,e,t.o,t.v)):e=z(t,r,[]),A(t),t.o&&t.s(t.o,t.v),e!==W?e:void 0}function z(e,t,n){if(_(t))return t;var r=t[q];if(!r)return o(t,function(i,o){return I(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.g)return D(e,r.u,!0),r.u;if(!r.R){r.R=!0,r.A.m--;var i=4===r.t||5===r.t?r.i=p(r.k):r.i,a=i,s=!1;3===r.t&&(a=new Set(i),i.clear(),s=!0),o(a,function(t,o){return I(e,r,i,t,o,n,s)}),D(e,i,!1),n&&e.o&&y("Patches").F(r,n,e.o,e.v)}return r.i}function I(e,t,n,o,a,c,u){if(r(a)){var f=z(e,a,c&&t&&3!==t.t&&!s(t.N,o)?c.concat(o):void 0);if(l(n,o,f),!r(f))return;e._=!1}else u&&n.add(a);if(i(a)&&!_(a)){if(!e.h.D&&e.m<1)return;z(e,a),t&&t.A.l||D(e,a)}}function D(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e._&&g(t,n)}function R(e,t){var n=e[q];return(n?d(n):e)[t]}function x(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function O(e){e.g||(e.g=!0,e.l&&O(e.l))}function C(e){e.i||(e.i=p(e.u))}function B(e,t,n){var r,i,o,a,s,c,l,u=f(t)?y("MapSet").K(t,n):h(t)?y("MapSet").$(t,n):e.S?(o=i={t:+!!(r=Array.isArray(t)),A:n?n.A:N,g:!1,R:!1,N:{},l:n,u:t,k:null,i:null,j:null,C:!1},a=$,r&&(o=[i],a=ee),c=(s=Proxy.revocable(o,a)).revoke,i.k=l=s.proxy,i.j=c,l):y("ES5").I(t,n);return(n?n.A:N).p.push(u),u}function T(e){return r(e)||n(22,e),function e(t){if(!i(t))return t;var n,r=t[q],s=a(t);if(r){if(!r.g&&(r.t<4||!y("ES5").J(r)))return r.u;r.R=!0,n=M(t,s),r.R=!1}else n=M(t,s);return o(n,function(t,i){r&&c(r.u,t)===i||l(n,t,e(i))}),3===s?new Set(n):n}(e)}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}function G(){function e(e,t){var n=a[e];return n?n.enumerable=t:a[e]=n={configurable:!0,enumerable:t,get:function(){return $.get(this[q],e)},set:function(t){$.set(this[q],e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][q];if(!r.g)switch(r.t){case 5:i(r)&&O(r);break;case 4:n(r)&&O(r)}}}function n(e){for(var t=e.u,n=e.k,r=X(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==q){var a=t[o];if(void 0===a&&!s(t,o))return!0;var c=n[o],l=c&&c[q];if(l?l.u!==a:!u(c,a))return!0}}var f=!!t[q];return r.length!==X(t).length+ +!f}function i(e){var t=e.k;if(t.length!==e.u.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var a={};v("ES5",{I:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=J(n);delete o[q];for(var a=X(o),s=0;s<a.length;s++){var c=a[s];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={t:r?5:4,A:n?n.A:N,g:!1,R:!1,N:{},l:n,u:t,k:i,i:null,O:!1,C:!1};return Object.defineProperty(i,q,{value:o,writable:!0}),i},P:function(e,n,a){a?r(n)&&n[q].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var n=t[q];if(n){var r=n.u,a=n.k,c=n.N,l=n.t;if(4===l)o(a,function(t){t!==q&&(void 0!==r[t]||s(r,t)?c[t]||e(a[t]):(c[t]=!0,O(n)))}),o(r,function(e){void 0!==a[e]||s(a,e)||(c[e]=!1,O(n))});else if(5===l){if(i(n)&&(O(n),c.length=!0),a.length<r.length)for(var u=a.length;u<r.length;u++)c[u]=!1;else for(var f=r.length;f<a.length;f++)c[f]=!0;for(var h=Math.min(a.length,r.length),d=0;d<h;d++)a.hasOwnProperty(d)||(c[d]=!0),void 0===c[d]&&e(a[d])}}}}(e.p[0]),t(e.p))},J:function(e){return 4===e.t?n(e):i(e)}})}function P(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(f(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(h(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return s(t,Q)&&(n[Q]=t[Q]),n}function t(t){return r(t)?e(t):t}v("Patches",{W:function(t,r){return r.forEach(function(r){for(var i=r.path,o=r.op,s=t,l=0;l<i.length-1;l++){var u=a(s),f=i[l];"string"!=typeof f&&"number"!=typeof f&&(f=""+f),0!==u&&1!==u||"__proto__"!==f&&"constructor"!==f||n(24),"function"==typeof s&&"prototype"===f&&n(24),"object"!=typeof(s=c(s,f))&&n(15,i.join("/"))}var h=a(s),d=e(r.value),p=i[i.length-1];switch(o){case"replace":switch(h){case 2:return s.set(p,d);case 3:n(16);default:return s[p]=d}case"add":switch(h){case 1:return"-"===p?s.push(d):s.splice(p,0,d);case 2:return s.set(p,d);case 3:return s.add(d);default:return s[p]=d}case"remove":switch(h){case 1:return s.splice(p,1);case 2:return s.delete(p);case 3:return s.delete(r.value);default:return delete s[p]}default:n(17,o)}}),t},F:function(e,n,r,i){var a,l,u,f,h;switch(e.t){case 0:case 4:case 2:return a=e.u,l=e.i,void o(e.N,function(e,o){var u=c(a,e),f=c(l,e),h=o?s(a,e)?"replace":"add":"remove";if(u!==f||"replace"!==h){var d=n.concat(e);r.push("remove"===h?{op:h,path:d}:{op:h,path:d,value:f}),i.push("add"===h?{op:"remove",path:d}:"remove"===h?{op:"add",path:d,value:t(u)}:{op:"replace",path:d,value:t(u)})}});case 5:case 1:return function(e,n,r,i){var o=e.u,a=e.N,s=e.i;if(s.length<o.length){var c=[s,o];o=c[0],s=c[1];var l=[i,r];r=l[0],i=l[1]}for(var u=0;u<o.length;u++)if(a[u]&&s[u]!==o[u]){var f=n.concat([u]);r.push({op:"replace",path:f,value:t(s[u])}),i.push({op:"replace",path:f,value:t(o[u])})}for(var h=o.length;h<s.length;h++){var d=n.concat([h]);r.push({op:"add",path:d,value:t(s[h])})}o.length<s.length&&i.push({op:"replace",path:n.concat(["length"]),value:o.length})}(e,n,r,i);case 3:return u=e.u,f=e.i,h=0,void(u.forEach(function(e){if(!f.has(e)){var t=n.concat([h]);r.push({op:"remove",path:t,value:e}),i.unshift({op:"add",path:t,value:e})}h++}),h=0,f.forEach(function(e){if(!u.has(e)){var t=n.concat([h]);r.push({op:"add",path:t,value:e}),i.unshift({op:"remove",path:t,value:e})}h++}))}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===W?void 0:t}),r.push({op:"replace",path:[],value:e})}})}function j(){function e(e,t){function n(){this.constructor=e}s(e,t),n.prototype=t.prototype,e.prototype=new n}function t(e){e.i||(e.N=new Map,e.i=new Map(e.u))}function r(e){e.i||(e.i=new Set,e.u.forEach(function(t){if(i(t)){var n=B(e.A.h,t,e);e.p.set(t,n),e.i.add(n)}else e.i.add(t)}))}function a(e){e.O&&n(3,JSON.stringify(d(e)))}var s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},c=function(){function n(e,t){return this[q]={t:2,l:t,A:t?t.A:N,g:!1,R:!1,i:void 0,N:void 0,u:e,k:this,C:!1,O:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return d(this[q]).size}}),r.has=function(e){return d(this[q]).has(e)},r.set=function(e,n){var r=this[q];return a(r),d(r).has(e)&&d(r).get(e)===n||(t(r),O(r),r.N.set(e,!0),r.i.set(e,n),r.N.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[q];return a(n),t(n),O(n),n.u.has(e)?n.N.set(e,!1):n.N.delete(e),n.i.delete(e),!0},r.clear=function(){var e=this[q];a(e),d(e).size&&(t(e),O(e),e.N=new Map,o(e.u,function(t){e.N.set(t,!1)}),e.i.clear())},r.forEach=function(e,t){var n=this;d(this[q]).forEach(function(r,i){e.call(t,n.get(i),i,n)})},r.get=function(e){var n=this[q];a(n);var r=d(n).get(e);if(n.R||!i(r)||r!==n.u.get(e))return r;var o=B(n.A.h,r,n);return t(n),n.i.set(e,o),o},r.keys=function(){return d(this[q]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[H]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[H]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[H]=function(){return this.entries()},n}(),l=function(){function t(e,t){return this[q]={t:3,l:t,A:t?t.A:N,g:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return d(this[q]).size}}),n.has=function(e){var t=this[q];return a(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[q];return a(t),this.has(e)||(r(t),O(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[q];return a(t),r(t),O(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[q];a(e),d(e).size&&(r(e),O(e),e.i.clear())},n.values=function(){var e=this[q];return a(e),r(e),e.i.values()},n.entries=function(){var e=this[q];return a(e),r(e),e.i.entries()},n.keys=function(){return this.values()},n[H]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();v("MapSet",{K:function(e,t){return new c(e,t)},$:function(e,t){return new l(e,t)}})}Object.defineProperty(t,"__esModule",{value:!0});var U,N,L="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),F="undefined"!=typeof Map,K="undefined"!=typeof Set,Z="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,W=L?Symbol.for("immer-nothing"):((U={})["immer-nothing"]=!0,U),Q=L?Symbol.for("immer-draftable"):"__$immer_draftable",q=L?Symbol.for("immer-state"):"__$immer_state",H="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",V=""+Object.prototype.constructor,X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(e){var t={};return X(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Y={},$={get:function(e,t){if(t===q)return e;var n,r,o=d(e);if(!s(o,t))return(r=x(o,t))?"value"in r?r.value:null==(n=r.get)?void 0:n.call(e.k):void 0;var a=o[t];return e.R||!i(a)?a:a===R(e.u,t)?(C(e),e.i[t]=B(e.A.h,a,e)):a},has:function(e,t){return t in d(e)},ownKeys:function(e){return Reflect.ownKeys(d(e))},set:function(e,t,n){var r=x(d(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.g){var i=R(d(e),t),o=null==i?void 0:i[q];if(o&&o.u===n)return e.i[t]=n,e.N[t]=!1,!0;if(u(n,i)&&(void 0!==n||s(e.u,t)))return!0;C(e),O(e)}return e.i[t]===n&&(void 0!==n||t in e.i)||Number.isNaN(n)&&Number.isNaN(e.i[t])||(e.i[t]=n,e.N[t]=!0),!0},deleteProperty:function(e,t){return void 0!==R(e.u,t)||t in e.u?(e.N[t]=!1,C(e),O(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var n=d(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},ee={};o($,function(e,t){ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ee.deleteProperty=function(e,t){return ee.set.call(this,e,t,void 0)},ee.set=function(e,t,n){return $.set.call(this,e[0],t,n,e[0])};var et=function(){function e(e){var t=this;this.S=Z,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var a,s=r;return r=e,function(e){var n=this;void 0===e&&(e=s);for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(o))})}}if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var c=E(t),l=B(t,e,void 0),u=!0;try{a=r(l),u=!1}finally{u?A(c):w(c)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then(function(e){return b(c,o),k(e,c)},function(e){throw A(c),e}):(b(c,o),k(a,c))}if(!e||"object"!=typeof e){if(void 0===(a=r(e))&&(a=e),a===W&&(a=void 0),t.D&&g(a,!0),o){var f=[],h=[];y("Patches").M(e,a,f,h),o(f,h)}return a}n(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),r(e)&&(e=T(e));var t=E(this),o=B(this,e,void 0);return o[q].C=!0,w(t),o},t.finishDraft=function(e,t){var n=(e&&e[q]).A;return b(n,t),k(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Z&&n(20),this.S=e},t.applyPatches=function(e,t){for(n=t.length-1;n>=0;n--){var n,i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));var o=y("Patches").W;return r(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),en=new et,er=en.produce,ei=en.produceWithPatches.bind(en),eo=en.setAutoFreeze.bind(en),ea=en.setUseProxies.bind(en),es=en.applyPatches.bind(en),ec=en.createDraft.bind(en),el=en.finishDraft.bind(en);t.Immer=et,t.applyPatches=es,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ec,t.current=T,t.default=er,t.enableAllPlugins=function(){G(),j(),P()},t.enableES5=G,t.enableMapSet=j,t.enablePatches=P,t.finishDraft=el,t.freeze=g,t.immerable=Q,t.isDraft=r,t.isDraftable=i,t.nothing=W,t.original=function(e){return r(e)||n(23,e),e[q].u},t.produce=er,t.produceWithPatches=ei,t.setAutoFreeze=eo,t.setUseProxies=ea},956408:function(e,t,n){"use strict";e.exports=n(411490)},290163:function(e,t,n){"use strict";let r,i,o;n.d(t,{X3:()=>p});let a=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(h(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),u.set(t,e),t}if(l.has(e))return l.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(d(this),t),h(a.get(this))}:function(...t){return h(e.apply(d(this),t))}:function(t,...n){let r=e.call(d(this),t,...n);return c.set(r,t.sort?t.sort():[t]),h(r)};return e instanceof IDBTransaction&&function(e){if(s.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});s.set(e,t)}(e),(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,f):e}(e);return t!==e&&(l.set(e,t),u.set(t,e)),t}let d=e=>u.get(e);function p(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(e,t),s=h(a);return r&&a.addEventListener("upgradeneeded",e=>{r(h(a.result),e.oldVersion,e.newVersion,h(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}let g=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],_=new Map;function y(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(_.get(t))return _.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=m.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||g.includes(n)))return;let o=async function(e,...t){let o=this.transaction(e,i?"readwrite":"readonly"),a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return _.set(t,o),o}f={...o=f,get:(e,t,n)=>y(e,t)||o.get(e,t,n),has:(e,t)=>!!y(e,t)||o.has(e,t)}},880749:function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}),n}n.r(t);var i={assign:function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=Object(arguments[n]))Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},pick:r,pick_pica_resize_options:function(e){return r(e,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])}};function o(e){var t={exports:{}};return e(t,t.exports),t.exports}function a(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var s=o(function(e,t){e.exports=(function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){if(!c&&a)return a(s,!0);if(o)return o(s,!0);var l=Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o=a,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(e,t,n){var r=e("inherits"),i=e("multimath"),o=e("./mm_unsharp_mask"),a=e("./mm_resize");function s(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};i.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(o),this.use(a)}r(s,i),s.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n},t.exports=s},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(e,t,n){function r(e){return e<0?0:e>255?255:e}t.exports={convolveHorizontally:function(e,t,n,i,o,a){var s,c,l,u,f,h,d,p,g,m,_,y=0,v=0;for(g=0;g<i;g++){for(m=0,f=0;m<o;m++){for(h=a[f++],d=a[f++],p=y+4*h|0,s=c=l=u=0;d>0;d--)u=u+(_=a[f++])*e[p+3]|0,l=l+_*e[p+2]|0,c=c+_*e[p+1]|0,s=s+_*e[p]|0,p=p+4|0;t[v+3]=r(u+8192>>14),t[v+2]=r(l+8192>>14),t[v+1]=r(c+8192>>14),t[v]=r(s+8192>>14),v=v+4*i|0}v=(g+1)*4|0,y=(g+1)*n*4|0}},convolveVertically:function(e,t,n,i,o,a){var s,c,l,u,f,h,d,p,g,m,_,y=0,v=0;for(g=0;g<i;g++){for(m=0,f=0;m<o;m++){for(h=a[f++],d=a[f++],p=y+4*h|0,s=c=l=u=0;d>0;d--)u=u+(_=a[f++])*e[p+3]|0,l=l+_*e[p+2]|0,c=c+_*e[p+1]|0,s=s+_*e[p]|0,p=p+4|0;t[v+3]=r(u+8192>>14),t[v+2]=r(l+8192>>14),t[v+1]=r(c+8192>>14),t[v]=r(s+8192>>14),v=v+4*i|0}v=(g+1)*4|0,y=(g+1)*n*4|0}}}},{}],3:[function(e,t,n){t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(e,t,n){t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,n){var r=e("./resize_filter_gen"),i=e("./convolve").convolveHorizontally,o=e("./convolve").convolveVertically;t.exports=function(e){var t=e.src,n=e.width,a=e.height,s=e.toWidth,c=e.toHeight,l=e.scaleX||e.toWidth/e.width,u=e.scaleY||e.toHeight/e.height,f=e.offsetX||0,h=e.offsetY||0,d=e.dest||new Uint8Array(s*c*4),p=void 0===e.quality?3:e.quality,g=e.alpha||!1,m=r(p,n,s,l,f),_=r(p,a,c,u,h),y=new Uint8Array(s*a*4);return i(t,y,n,a,s,m),o(y,d,a,s,c,_),g||function(e,t,n){for(var r=3,i=t*n*4|0;r<i;)e[r]=255,r=r+4|0}(d,s,c),d}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,n){var r=e("./resize_filter_info");function i(e){return Math.round(16383*e)}t.exports=function(e,t,n,o,a){var s,c,l,u,f,h,d,p,g,m,_,y,v,b,A,w,E,S=r[e].filter,k=1/o,z=Math.min(1,o),I=r[e].win/z,D=new Int16Array((Math.floor((I+1)*2)+2)*n),R=0,x=!D.subarray||!D.set;for(s=0;s<n;s++){for(l=Math.max(0,Math.floor((c=(s+.5)*k+a)-I)),h=new Float32Array(f=(u=Math.min(t-1,Math.ceil(c+I)))-l+1),d=new Int16Array(f),p=0,g=l,m=0;g<=u;g++,m++)p+=_=S((g+.5-c)*z),h[m]=_;for(m=0,y=0;m<h.length;m++)y+=v=h[m]/p,d[m]=i(v);for(d[n>>1]+=i(1-y),b=0;b<d.length&&0===d[b];)b++;if(b<d.length){for(A=d.length-1;A>0&&0===d[A];)A--;if(w=l+b,E=A-b+1,D[R++]=w,D[R++]=E,x)for(m=b;m<=A;m++)D[R++]=d[m];else D.set(d.subarray(b,A+1),R),R+=E}else D[R++]=0,D[R++]=0}return D}},{"./resize_filter_info":7}],7:[function(e,t,n){t.exports=[{win:.5,filter:function(e){return+(e>=-.5&&e<.5)}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-11920929e-14&&e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-11920929e-14&&e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-11920929e-14&&e<11920929e-14)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}]},{}],8:[function(e,t,n){var r=e("./resize_filter_gen"),i=!0;try{i=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(e){}function o(e,t,n){if(i)return void t.set(new Uint8Array(e.buffer,0,e.byteLength),n);for(var r=n,o=0;o<e.length;o++){var a=e[o];t[r++]=255&a,t[r++]=a>>8&255}}t.exports=function(e){var t=e.src,n=e.width,i=e.height,a=e.toWidth,s=e.toHeight,c=e.scaleX||e.toWidth/e.width,l=e.scaleY||e.toHeight/e.height,u=e.offsetX||0,f=e.offsetY||0,h=e.dest||new Uint8Array(a*s*4),d=void 0===e.quality?3:e.quality,p=e.alpha||!1,g=r(d,n,a,c,u),m=r(d,i,s,l,f),_=this.__align(0+Math.max(t.byteLength,h.byteLength)),y=this.__align(_+i*a*4),v=this.__align(y+g.byteLength),b=v+m.byteLength,A=this.__instance("resize",b),w=new Uint8Array(this.__memory.buffer),E=new Uint32Array(this.__memory.buffer),S=new Uint32Array(t.buffer);return E.set(S),o(g,w,y),o(m,w,v),(A.exports.convolveHV||A.exports._convolveHV)(y,v,_,n,i,a,s),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,s*a)),p||function(e,t,n){for(var r=3,i=t*n*4|0;r<i;)e[r]=255,r=r+4|0}(h,a,s),h}},{"./resize_filter_gen":6}],9:[function(e,t,n){t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,t,n){var r=e("glur/mono16");t.exports=function(e,t,n,i,o,a){if(0!==i&&!(o<.5)){o>2&&(o=2);var s,c,l,u,f,h=function(e,t,n){for(var r,i,o,a,s=t*n,c=new Uint16Array(s),l=0;l<s;l++)r=e[4*l],i=e[4*l+1],o=e[4*l+2],a=r>=i&&r>=o?r:i>=o&&i>=r?i:o,c[l]=a<<8;return c}(e,t,n),d=new Uint16Array(h);r(d,t,n,o);for(var p=i/100*4096+.5|0,g=a<<8,m=t*n,_=0;_<m;_++)Math.abs(u=(s=h[_])-d[_])>=g&&(l=((c=(c=(c=s+(p*u+2048>>12))>65280?65280:c)<0?0:c)<<12)/(s=0!==s?s:1)|0,e[f=4*_]=e[f]*l+2048>>12,e[f+1]=e[f+1]*l+2048>>12,e[f+2]=e[f+2]*l+2048>>12)}}},{"glur/mono16":18}],11:[function(e,t,n){t.exports=function(e,t,n,r,i,o){if(0!==r&&!(i<.5)){i>2&&(i=2);var a=t*n,s=4*a,c=2*a,l=2*a,u=4*Math.max(t,n),f=s+c,h=f+l,d=h+l,p=this.__instance("unsharp_mask",s+c+2*l+u+32,{exp:Math.exp}),g=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(g);var m=p.exports.hsv_v16||p.exports._hsv_v16;m(0,s,t,n),(m=p.exports.blurMono16||p.exports._blurMono16)(s,f,h,d,d+u,t,n,i),(m=p.exports.unsharp||p.exports._unsharp)(0,0,s,f,t,n,r,o),g.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(e,t,n){t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(e,t,n){function r(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}r.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},r.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return t.gc()},100))},r.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter(function(n){return!(t-n.lastUsed>e.idle)||(n.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(function(){return e.gc()},100):this.timeoutId=0},t.exports=r},{}],14:[function(e,t,n){t.exports=function(e,t,n,r,i,o){var a=n/e,s=r/t,c=(2*o+2+1)/i;if(c>.5)return[[n,r]];var l=Math.ceil(Math.log(Math.min(a,s))/Math.log(c));if(l<=1)return[[n,r]];for(var u=[],f=0;f<l;f++){var h=Math.round(Math.pow(Math.pow(e,l-f-1)*Math.pow(n,f+1),1/l)),d=Math.round(Math.pow(Math.pow(t,l-f-1)*Math.pow(r,f+1),1/l));u.push([h,d])}return u}},{}],15:[function(e,t,n){function r(e){var t=Math.round(e);return 1e-5>Math.abs(e-t)?t:Math.floor(e)}function i(e){var t=Math.round(e);return 1e-5>Math.abs(e-t)?t:Math.ceil(e)}t.exports=function(e){var t,n,o,a,s,c,l=e.toWidth/e.width,u=e.toHeight/e.height,f=r(e.srcTileSize*l)-2*e.destTileBorder,h=r(e.srcTileSize*u)-2*e.destTileBorder;if(f<1||h<1)throw Error("Internal error in pica: target tile width/height is too small.");var d=[];for(a=0;a<e.toHeight;a+=h)for(o=0;o<e.toWidth;o+=f)(t=o-e.destTileBorder)<0&&(t=0),s=o+f+e.destTileBorder-t,t+s>=e.toWidth&&(s=e.toWidth-t),(n=a-e.destTileBorder)<0&&(n=0),c=a+h+e.destTileBorder-n,n+c>=e.toHeight&&(c=e.toHeight-n),d.push({toX:t,toY:n,toWidth:s,toHeight:c,toInnerX:o,toInnerY:a,toInnerWidth:f,toInnerHeight:h,offsetX:t/l-r(t/l),offsetY:n/u-r(n/u),scaleX:l,scaleY:u,x:r(t/l),y:r(n/u),width:i(s/l),height:i(c/u)});return d}},{}],16:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=r(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===r(e)},t.exports.isImageBitmap=function(e){return"[object ImageBitmap]"===r(e)},t.exports.limiter=function(e){var t=0,n=[];function r(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise(function(i,o){n.push(function(){e().then(function(e){i(e),t--,r()},function(e){o(e),t--,r()})}),r()})}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(e){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(e){var n=10===e.width;return e.close(),t=null,n})}).catch(function(){return!1})},t.exports.worker_offscreen_canvas_support=function(){return new Promise(function(e,t){if("undefined"==typeof OffscreenCanvas)return void e(!1);var n=btoa("(".concat((function(e){if("undefined"==typeof createImageBitmap)return void e.postMessage(!1);Promise.resolve().then(function(){var e=new OffscreenCanvas(10,10);return e.getContext("2d").rect(0,0,1,1),createImageBitmap(e,0,0,1,1)}).then(function(){return e.postMessage(!0)},function(){return e.postMessage(!1)})}).toString(),")(self);")),r=new Worker("data:text/javascript;base64,".concat(n));r.onmessage=function(t){return e(t.data)},r.onerror=t}).then(function(e){return e},function(){return!1})},t.exports.can_use_canvas=function(e){var t=!1;try{var n=e(2,1).getContext("2d"),r=n.createImageData(2,1);r.data[0]=12,r.data[1]=23,r.data[2]=34,r.data[3]=255,r.data[4]=45,r.data[5]=56,r.data[6]=67,r.data[7]=255,n.putImageData(r,0,0),r=null,r=n.getImageData(0,0,2,1),12===r.data[0]&&23===r.data[1]&&34===r.data[2]&&255===r.data[3]&&45===r.data[4]&&56===r.data[5]&&67===r.data[6]&&255===r.data[7]&&(t=!0)}catch(e){}return t},t.exports.cib_can_use_region=function(){return new Promise(function(e){if("undefined"==typeof createImageBitmap)return void e(!1);var t=new Image;t.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",t.onload=function(){createImageBitmap(t,0,0,t.width,t.height).then(function(n){n.width===t.width&&n.height===t.height?e(!0):e(!1)},function(){return e(!1)})},t.onerror=function(){return e(!1)}})}},{}],17:[function(e,t,n){t.exports=function(){var t,n=e("./mathlib");onmessage=function(e){var r=e.data.opts,i=!1;if(!r.src&&r.srcBitmap){var o=new OffscreenCanvas(r.width,r.height),a=o.getContext("2d",{alpha:!!r.alpha});a.drawImage(r.srcBitmap,0,0),r.src=a.getImageData(0,0,r.width,r.height).data,o.width=o.height=0,o=null,r.srcBitmap.close(),r.srcBitmap=null,i=!0}t||(t=new n(e.data.features));var s=t.resizeAndUnsharp(r);if(i){var c=new ImageData(new Uint8ClampedArray(s),r.toWidth,r.toHeight),l=new OffscreenCanvas(r.toWidth,r.toHeight);l.getContext("2d",{alpha:!!r.alpha}).putImageData(c,0,0),createImageBitmap(l).then(function(e){postMessage({bitmap:e},[e])})}else postMessage({data:s},[s.buffer])}}},{"./mathlib":1}],18:[function(e,t,n){var r,i,o,a,s,c,l,u;function f(e,t,n,r,i,o){var a,s,c,l,u,f,h,d,p,g,m,_,y,v;for(p=0;p<o;p++){for(g=0,f=p*i,h=p,d=0,l=u=(a=e[f])*r[6],m=r[0],_=r[1],y=r[4],v=r[5];g<i;g++)c=(s=e[f])*m+a*_+l*y+u*v,u=l,l=c,a=s,n[d]=l,d++,f++;for(f--,d--,h+=o*(i-1),l=u=(a=e[f])*r[7],s=a,m=r[2],_=r[3],g=i-1;g>=0;g--)c=s*m+a*_+l*y+u*v,u=l,l=c,a=s,s=e[f],t[h]=n[d]+l,f--,d--,h-=o}}t.exports=function(e,t,n,h){if(h){var d,p,g,m,_,y=new Uint16Array(e.length),v=new Float32Array(Math.max(t,n)),b=((d=h)<.5&&(d=.5),g=Math.exp(-(p=Math.exp(.527076)/d)),m=Math.exp(-2*p),r=_=(1-g)*(1-g)/(1+2*p*g-m),i=_*(p-1)*g,o=_*(p+1)*g,a=-_*m,l=(r+i)/(1-(s=2*g)-(c=-m)),u=(o+a)/(1-s-c),new Float32Array([r,i,o,a,s,c,l,u]));f(e,y,v,b,t,n),f(y,e,v,b,n,t)}}},{}],19:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],20:[function(e,t,n){var r=e("object-assign"),i=e("./lib/base64decode"),o=e("./lib/wa_detect"),a={js:!0,wasm:!0};function s(e){if(!(this instanceof s))return new s(e);var t=r({},a,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=o,s.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map(function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn&&!e.__wasm[t]?WebAssembly.compile(e.__base64decode(n.wasm_src)).then(function(n){e.__wasm[t]=n}):null})).then(function(){return e}),this.__init_promise},s.prototype.__base64decode=i,s.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},s.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),!this.__wasm[e]){var i=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(i.wasm_src))}if(!this.__cache[e]){var o={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:r(o,n||{})})}return this.__cache[e]},s.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)},t.exports=s},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(e,t,n){t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,r=new Uint8Array(3*n>>2),i=0,o=0,a=0;a<n;a++)a%4==0&&a&&(r[o++]=i>>16&255,r[o++]=i>>8&255,r[o++]=255&i),i=i<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(a));var s=n%4*6;return 0===s?(r[o++]=i>>16&255,r[o++]=i>>8&255,r[o++]=255&i):18===s?(r[o++]=i>>10&255,r[o++]=i>>2&255):12===s&&(r[o++]=i>>4&255),r}},{}],22:[function(e,t,n){var r;t.exports=function(){if(void 0!==r||(r=!1,"undefined"==typeof WebAssembly))return r;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e),n=new WebAssembly.Instance(t,{});0!==n.exports.test(4)&&(r=!0)}catch(e){}return r}},{}],23:[function(e,t,n){var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};if("abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join(""))return!1;return!0}catch(e){return!1}}()?function(e,t){for(var n,a,s=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}:Object.assign},{}],24:[function(e,t,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){for(var n,s=Object.keys(o),c=0,l=s.length;c<l;c++){var u=s[c],f=o[u].exports;if(f===e||f&&f.default===e){n=u;break}}if(!n){n=Math.floor(0x100000000*Math.random()).toString(16);for(var h={},c=0,l=s.length;c<l;c++){var u=s[c];h[u]=u}i[n]=["function(require,module,exports){"+e+"(self); }",h]}var d=Math.floor(0x100000000*Math.random()).toString(16),p={};p[n]=n,i[d]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",p];var g={};!function e(t){for(var n in g[t]=!0,i[t][1]){var r=i[t][1][n];g[r]||e(r)}}(d);var m="("+r+")({"+Object.keys(g).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(d)+"])",_=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return y;var v=_.createObjectURL(y),b=new Worker(v);return b.objectURL=v,b}},{}],"/index.js":[function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=e("object-assign"),o=e("webworkify"),a=e("./lib/mathlib"),s=e("./lib/pool"),c=e("./lib/utils"),l=e("./lib/worker"),u=e("./lib/stepper"),f=e("./lib/tiler"),h={},d=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(d=navigator.userAgent.indexOf("Safari")>=0)}catch(e){}var p=1;"undefined"!=typeof navigator&&(p=Math.min(navigator.hardwareConcurrency||1,4));var g={tile:1024,concurrency:p,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},m={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},_=!1,y=!1,v=!1,b=!1,A=!1;function w(){return{value:o(l),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function E(e){if(!(this instanceof E))return new E(e);this.options=i({},g,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=h[t]||c.limiter(this.options.concurrency),h[t]||(h[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}E.prototype.init=function(){var t,n,r=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),_=!0}catch(e){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?y=!0:this.debug("ImageBitmap does not support .close(), disabled"));var o=this.options.features.slice();if(o.indexOf("all")>=0&&(o=["cib","wasm","js","ww"]),this.__requested_features=o,this.__mathlib=new a(o),o.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")(function(){}).terminate(),this.features.ww=!0;var l="wp_".concat(JSON.stringify(this.options));h[l]?this.__workersPool=h[l]:(this.__workersPool=new s(w,this.options.idle),h[l]=this.__workersPool)}catch(e){}var u=this.__mathlib.init().then(function(e){i(r.features,e.features)});t=y?c.cib_support(this.options.createCanvas).then(function(e){if(r.features.cib&&0>o.indexOf("cib"))return void r.debug("createImageBitmap() resize supported, but disabled by config");o.indexOf("cib")>=0&&(r.features.cib=e)}):Promise.resolve(!1),v=c.can_use_canvas(this.options.createCanvas),n=(n=y&&_&&-1!==o.indexOf("ww")?c.worker_offscreen_canvas_support():Promise.resolve(!1)).then(function(e){b=e});var f=c.cib_can_use_region().then(function(e){A=e});return this.__initPromise=Promise.all([u,t,n,f]).then(function(){return r}),this.__initPromise},E.prototype.__invokeResize=function(e,t){var n=this;return t.__mathCache=t.__mathCache||{},Promise.resolve().then(function(){return n.features.ww?new Promise(function(r,i){var o=n.__workersPool.acquire();t.cancelToken&&t.cancelToken.catch(function(e){return i(e)}),o.value.onmessage=function(e){o.release(),e.data.err?i(e.data.err):r(e.data)};var a=[];e.src&&a.push(e.src.buffer),e.srcBitmap&&a.push(e.srcBitmap),o.value.postMessage({opts:e,features:n.__requested_features,preload:{wasm_nodule:n.__mathlib.__}},a)}):{data:n.__mathlib.resizeAndUnsharp(e,t.__mathCache)}})},E.prototype.__extractTileData=function(e,t,n,r,i){if(this.features.ww&&b&&(c.isCanvas(t)||A))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(r.srcImageBitmap||t,e.x,e.y,e.width,e.height).then(function(e){return i.srcBitmap=e,i});if(c.isCanvas(t))return r.srcCtx||(r.srcCtx=t.getContext("2d",{alpha:!!n.alpha})),this.debug("Get tile pixel data"),i.src=r.srcCtx.getImageData(e.x,e.y,e.width,e.height).data,i;this.debug("Draw tile imageBitmap/image to temporary canvas");var o=this.options.createCanvas(e.width,e.height),a=o.getContext("2d",{alpha:!!n.alpha});return a.globalCompositeOperation="copy",a.drawImage(r.srcImageBitmap||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),this.debug("Get tile pixel data"),i.src=a.getImageData(0,0,e.width,e.height).data,o.width=o.height=0,i},E.prototype.__landTileData=function(e,t,n){var r;if(this.debug("Convert raw rgba tile result to ImageData"),t.bitmap)return n.toCtx.drawImage(t.bitmap,e.toX,e.toY),null;if(_)r=new ImageData(new Uint8ClampedArray(t.data),e.toWidth,e.toHeight);else if((r=n.toCtx.createImageData(e.toWidth,e.toHeight)).data.set)r.data.set(t.data);else for(var i=r.data.length-1;i>=0;i--)r.data[i]=t.data[i];return this.debug("Draw tile"),d?n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null},E.prototype.__tileAndResize=function(e,t,n){var r=this,i={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then(function(){if(i.toCtx=t.getContext("2d",{alpha:!!n.alpha}),c.isCanvas(e))return null;if(c.isImageBitmap(e))return i.srcImageBitmap=e,i.isImageBitmapReused=!0,null;if(c.isImage(e))return y?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then(function(e){i.srcImageBitmap=e}).catch(function(e){return null})):null;throw Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(n.canceled)return n.cancelToken;r.debug("Calculate tiles");var o=f({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:n.__destTileBorder}).map(function(t){return r.__limit(function(){if(n.canceled)return n.cancelToken;var o={width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve(o).then(function(o){return r.__extractTileData(t,e,n,i,o)}).then(function(e){return r.debug("Invoke resize math"),r.__invokeResize(e,n)}).then(function(e){return n.canceled?n.cancelToken:(i.srcImageData=null,r.__landTileData(t,e,i))})})});function a(e){e.srcImageBitmap&&(e.isImageBitmapReused||e.srcImageBitmap.close(),e.srcImageBitmap=null)}return r.debug("Process tiles"),Promise.all(o).then(function(){return r.debug("Finished!"),a(i),t},function(e){throw a(i),e})})},E.prototype.__processStages=function(e,t,n,o){var a,s,c=this;if(o.canceled)return o.cancelToken;var l=function(e){if(Array.isArray(e))return e}(a=e.shift())||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}(a,2)||function(e,t){if(e){if("string"==typeof e)return r(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=l[0],f=l[1],h=0===e.length;return o=i({},o,{toWidth:u,toHeight:f,quality:h?o.quality:Math.min(1,o.quality)}),h||(s=this.options.createCanvas(u,f)),this.__tileAndResize(t,h?n:s,o).then(function(){return h?n:(o.width=u,o.height=f,c.__processStages(e,s,n,o))}).then(function(e){return s&&(s.width=s.height=0),e})},E.prototype.__resizeViaCreateImageBitmap=function(e,t,n){var r=this,i=t.getContext("2d",{alpha:!!n.alpha});return this.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:n.toWidth,resizeHeight:n.toHeight,resizeQuality:c.cib_quality_name(n.quality)}).then(function(e){if(n.canceled)return n.cancelToken;if(!n.unsharpAmount)return i.drawImage(e,0,0),e.close(),i=null,r.debug("Finished!"),t;r.debug("Unsharp result");var o=r.options.createCanvas(n.toWidth,n.toHeight),a=o.getContext("2d",{alpha:!!n.alpha});a.drawImage(e,0,0),e.close();var s=a.getImageData(0,0,n.toWidth,n.toHeight);return r.__mathlib.unsharp_mask(s.data,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),i.putImageData(s,0,0),o.width=o.height=0,s=a=o=i=null,r.debug("Finished!"),t})},E.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var o=i({},m);return(isNaN(n)?n&&(o=i(o,n)):o=i(o,{quality:n}),o.toWidth=t.width,o.toHeight=t.height,o.width=e.naturalWidth||e.width,o.height=e.naturalHeight||e.height,0===t.width||0===t.height)?Promise.reject(Error("Invalid output size: ".concat(t.width,"x").concat(t.height))):(o.unsharpRadius>2&&(o.unsharpRadius=2),o.canceled=!1,o.cancelToken&&(o.cancelToken=o.cancelToken.then(function(e){throw o.canceled=!0,e},function(e){throw o.canceled=!0,e})),o.__destTileBorder=Math.ceil(Math.max(3,2.5*o.unsharpRadius|0)),this.init().then(function(){if(o.canceled)return o.cancelToken;if(r.features.cib)return r.__resizeViaCreateImageBitmap(e,t,o);if(!v){var n=Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw n.code="ERR_GET_IMAGE_DATA",n}var i=u(o.width,o.height,o.toWidth,o.toHeight,r.options.tile,o.__destTileBorder);return r.__processStages(i,e,t,o)}))},E.prototype.resizeBuffer=function(e){var t=this,n=i({},m,e);return this.init().then(function(){return t.__mathlib.resizeAndUnsharp(n)})},E.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise(function(r){if(e.toBlob)return void e.toBlob(function(e){return r(e)},t,n);if(e.convertToBlob)return void r(e.convertToBlob({type:t,quality:n}));for(var i=atob(e.toDataURL(t,n).split(",")[1]),o=i.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=i.charCodeAt(s);r(new Blob([a],{type:t}))})},E.prototype.debug=function(){},t.exports=E},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")}),c=o(function(e){function t(e,t){var n=Error(e);return n.code=t,n}function n(e){for(var t=e.toString(16).toUpperCase(),n=2-t.length;n>0;n--)t="0"+t;return"0x"+t}function r(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function i(e,n,r){this.input=e.subarray(n,r),this.start=n;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==i&&"MM\0*"!==i)throw t("invalid TIFF signature","EBADDATA");this.big_endian="M"===i[0]}i.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,e)}},i.prototype.filter=function(e){var n={};n.ifd0={id:0,entries:[]},this.each(function(t){(!1!==e(t)||t.is_subifd_link)&&(t.is_subifd_link&&1!==t.count&&4!==t.format||(n["ifd"+t.ifd]||(n["ifd"+t.ifd]={id:t.ifd,entries:[]}),n["ifd"+t.ifd].entries.push(t)))}),delete n.ifd1;var r=8;Object.keys(n).forEach(function(e){r+=2,n[e].entries.forEach(function(e){r+=12+(e.data_length>4?2*Math.ceil(e.data_length/2):0)}),r+=4}),this.output=new Uint8Array(r),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var i=8,o=this;if(this.write_uint32(4,i),Object.keys(n).forEach(function(e){n[e].written_offset=i;var t=i,r=t+2+12*n[e].entries.length+4;i=r,o.write_uint16(t,n[e].entries.length),n[e].entries.sort(function(e,t){return e.tag-t.tag}).forEach(function(e,r){var a=t+2+12*r;o.write_uint16(a,e.tag),o.write_uint16(a+2,e.format),o.write_uint32(a+4,e.count),e.is_subifd_link?n["ifd"+e.tag]&&(n["ifd"+e.tag].link_offset=a+8):e.data_length<=4?o.output.set(o.input.subarray(e.data_offset-o.start,e.data_offset-o.start+4),a+8):(o.write_uint32(a+8,i),o.output.set(o.input.subarray(e.data_offset-o.start,e.data_offset-o.start+e.data_length),i),i+=2*Math.ceil(e.data_length/2))});var a=n["ifd"+(n[e].id+1)];a&&(a.link_offset=r-4)}),Object.keys(n).forEach(function(e){n[e].written_offset&&n[e].link_offset&&o.write_uint32(n[e].link_offset,n[e].written_offset)}),this.output.length!==i)throw t("internal error: incorrect buffer size allocated");return this.output},i.prototype.read_uint16=function(e){var n=this.input;if(e+2>n.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?256*n[e]+n[e+1]:n[e]+256*n[e+1]},i.prototype.read_uint32=function(e){var n=this.input;if(e+4>n.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?0x1000000*n[e]+65536*n[e+1]+256*n[e+2]+n[e+3]:n[e]+256*n[e+1]+65536*n[e+2]+0x1000000*n[e+3]},i.prototype.write_uint16=function(e,t){var n=this.output;this.big_endian?(n[e]=t>>>8&255,n[e+1]=255&t):(n[e]=255&t,n[e+1]=t>>>8&255)},i.prototype.write_uint32=function(e,t){var n=this.output;this.big_endian?(n[e]=t>>>24&255,n[e+1]=t>>>16&255,n[e+2]=t>>>8&255,n[e+3]=255&t):(n[e]=255&t,n[e+1]=t>>>8&255,n[e+2]=t>>>16&255,n[e+3]=t>>>24&255)},i.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},i.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},i.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return this.input[t];case 6:return(n=this.input[t])|(128&n)*0x1fffffe;case 3:return this.read_uint16(t);case 8:return(n=this.read_uint16(t))|(32768&n)*131070;case 4:return this.read_uint32(t);case 9:return 0|(n=this.read_uint32(t));default:return null}},i.prototype.scan_ifd=function(e,n,r){var i=this.read_uint16(n);n+=2;for(var o=0;o<i;o++){var a=this.read_uint16(n),s=this.read_uint16(n+2),c=this.read_uint32(n+4),l=this.exif_format_length(s),u=c*l,f=u<=4?n+8:this.read_uint32(n+8),h=!1;if(f+u>this.input.length)throw t("unexpected EOF","EBADDATA");for(var d=[],p=f,g=0;g<c;g++,p+=l){var m=this.exif_format_read(s,p);if(null===m){d=null;break}d.push(m)}if(Array.isArray(d)&&2===s){try{d=function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}(String.fromCharCode.apply(null,d))}catch(e){d=null}d&&"\0"===d[d.length-1]&&(d=d.slice(0,-1))}if(this.is_subifd_link(e,a)&&Array.isArray(d)&&Number.isInteger(d[0])&&d[0]>0&&(this.ifds_to_read.push({id:a,offset:d[0]}),h=!0),!1===r({is_big_endian:this.big_endian,ifd:e,tag:a,format:s,count:c,entry_offset:n+this.start,data_length:u,data_offset:f+this.start,value:d,is_subifd_link:h})){this.aborted=!0;return}n+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(n)})},e.exports.is_jpeg=function(e){return e.length>=4&&255===e[0]&&216===e[1]&&255===e[2]},e.exports.jpeg_segments_each=function(i,o){if(!r(i))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof o)throw t("Invalid argument (on_segment), Function expected","EINVAL");if(!e.exports.is_jpeg(i))throw t("Unknown file format","ENOTJPEG");for(var a=0,s=i.length,c=!1;;){if(a+1>=s)throw t("Unexpected EOF","EBADDATA");var l,u,f=i[a],h=i[a+1];if(255===f&&255===h)l=255,u=1;else if(255===f&&0!==h){if(u=2,208<=(l=h)&&l<=217||1===l);else{if(a+3>=s)throw t("Unexpected EOF","EBADDATA");if((u+=256*i[a+2]+i[a+3])<2)throw t("Invalid segment length","EBADDATA");if(a+u-1>=s)throw t("Unexpected EOF","EBADDATA")}c&&(l>=208&&l<=215||(c=!1)),218===l&&(c=!0)}else if(c)for(var d=a+1;;d++){if(d>=s)throw t("Unexpected EOF","EBADDATA");if(255===i[d]){if(d+1>=s)throw t("Unexpected EOF","EBADDATA");if(0!==i[d+1]){l=0,u=d-a;break}}}else throw t("Unexpected byte at segment start: "+n(f)+" (offset "+n(a)+")","EBADDATA");if(!1===o({code:l,offset:a,length:u})||217===l)break;a+=u}},e.exports.jpeg_segments_filter=function(n,i){if(!r(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof i)throw t("Invalid argument (on_segment), Function expected","EINVAL");var o=[],a=0;e.exports.jpeg_segments_each(n,function(e){var t=i(e);if(r(t))o.push({data:t}),a+=t.length;else if(Array.isArray(t))t.filter(r).forEach(function(e){o.push({data:e}),a+=e.length});else if(!1!==t){var n={start:e.offset,end:e.offset+e.length};o.length>0&&o[o.length-1].end===n.start?o[o.length-1].end=n.end:o.push(n),a+=e.length}});var s=new Uint8Array(a),c=0;return o.forEach(function(e){var t=e.data||n.subarray(e.start,e.end);s.set(t,c),c+=t.length}),s},e.exports.jpeg_exif_tags_each=function(n,o){if(!r(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof o)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");e.exports.jpeg_segments_each(n,function(e){return 218!==e.code&&(225===e.code&&e.length>=10&&69===n[e.offset+4]&&120===n[e.offset+5]&&105===n[e.offset+6]&&102===n[e.offset+7]&&0===n[e.offset+8]&&0===n[e.offset+9]?(new i(n,e.offset+10,e.offset+e.length).each(o),!1):void 0)})},e.exports.jpeg_exif_tags_filter=function(n,o){if(!r(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof o)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");var a=!1;return e.exports.jpeg_segments_filter(n,function(e){if(!a&&(218===e.code&&(a=!0),225===e.code&&e.length>=10&&69===n[e.offset+4]&&120===n[e.offset+5]&&105===n[e.offset+6]&&102===n[e.offset+7]&&0===n[e.offset+8]&&0===n[e.offset+9])){var t=new i(n,e.offset+10,e.offset+e.length).filter(o);if(!t)return!1;var r=new Uint8Array(10);return r.set(n.slice(e.offset,e.offset+10)),r[2]=t.length+8>>>8&255,r[3]=t.length+8&255,a=!0,[r,t]}})},e.exports.jpeg_add_comment=function(t,n){var r=!1,i=0;return e.exports.jpeg_segments_filter(t,function(e){if((1!=++i||216!==e.code)&&(2!==i||224!==e.code)&&!r){var o=new Uint8Array(5+(n=function(e){try{return unescape(encodeURIComponent(e))}catch(t){return e}}(n)).length),a=0;return o[a++]=255,o[a++]=254,o[a++]=n.length+3>>>8&255,o[a++]=n.length+3&255,n.split("").forEach(function(e){o[a++]=255&e.charCodeAt(0)}),o[a++]=0,r=!0,[o,t.subarray(e.offset,e.offset+e.length)]}})}});function l(e){return this._getUint8Array(e.blob).then(function(t){if(e.is_jpeg=c.is_jpeg(t),!e.is_jpeg)return Promise.resolve(e);e.orig_blob=e.blob;try{var n,r;if(c.jpeg_exif_tags_each(t,function(t){if(0===t.ifd&&274===t.tag&&Array.isArray(t.value))return e.orientation=t.value[0]||1,n=t.is_big_endian,r=t.data_offset,!1}),r){var i=new Uint8Array(n?[0,1]:[1,0]);e.blob=new Blob([t.slice(0,r),i,t.slice(r+2)],{type:"image/jpeg"})}}catch(e){}return e})}function u(e){if(!e.is_jpeg)return Promise.resolve(e);var t,n=e.orientation-1;if(!n)return Promise.resolve(e);var r=(t=4&n?this.pica.options.createCanvas(e.out_canvas.height,e.out_canvas.width):this.pica.options.createCanvas(e.out_canvas.width,e.out_canvas.height)).getContext("2d");return r.save(),1&n&&r.transform(-1,0,0,1,t.width,0),2&n&&r.transform(-1,0,0,-1,t.width,t.height),4&n&&r.transform(0,1,1,0,0,0),r.drawImage(e.out_canvas,0,0),r.restore(),e.out_canvas.width=e.out_canvas.height=0,e.out_canvas=t,Promise.resolve(e)}function f(e){return e.is_jpeg?Promise.all([this._getUint8Array(e.blob),this._getUint8Array(e.out_blob)]).then(function(t){var n=t[0],r=t[1];if(!c.is_jpeg(n))return Promise.resolve(e);var i=[];return c.jpeg_segments_each(n,function(e){if(218===e.code)return!1;i.push(e)}),i=i.filter(function(e){return 226!==e.code&&(!!(e.code>=224)&&!!(e.code<240)||254===e.code)}).map(function(e){return n.slice(e.offset,e.offset+e.length)}),e.out_blob=new Blob([r.slice(0,2)].concat(i).concat([r.slice(20)]),{type:"image/jpeg"}),e}):Promise.resolve(e)}var h=function(e){e.before("_blob_to_image",l),e.after("_transform",u),e.after("_create_blob",f)};function d(e){if(!(this instanceof d))return new d(e);e=e||{},this.pica=e.pica||s({}),this.initialized=!1,this.utils=i}d.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},d.prototype.init=function(){this.use(h)},d.prototype.toBlob=function(e,t){var n=i.assign({max:1/0},t);return this.initialized||(this.init(),this.initialized=!0),Promise.resolve({blob:e,opts:n}).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then(function(e){return e.out_canvas.width=e.out_canvas.height=0,e.out_blob})},d.prototype.toCanvas=function(e,t){var n=i.assign({max:1/0},t);return this.initialized||(this.init(),this.initialized=!0),Promise.resolve({blob:e,opts:n}).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(function(e){return e.out_canvas})},d.prototype.before=function(e,t){if(!this[e])throw Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw Error('Invalid argument "fn", function expected');var n=this[e],r=this;return this[e]=function(e){return t.call(r,e).then(function(e){return n.call(r,e)})},this},d.prototype.after=function(e,t){if(!this[e])throw Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw Error('Invalid argument "fn", function expected');var n=this[e],r=this;return this[e]=function(e){return n.call(r,e).then(function(e){return t.call(r,e)})},this},d.prototype._blob_to_image=function(e){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.image=document.createElement("img"),e.image_url=t.createObjectURL(e.blob),e.image.src=e.image_url,new Promise(function(t,n){e.image.onerror=function(){n(Error("ImageBlobReduce: failed to create Image() from blob"))},e.image.onload=function(){t(e)}})},d.prototype._calculate_size=function(e){var t=e.opts.max/Math.max(e.image.width,e.image.height);return t>1&&(t=1),e.transform_width=Math.max(Math.round(e.image.width*t),1),e.transform_height=Math.max(Math.round(e.image.height*t),1),e.scale_factor=t,Promise.resolve(e)},d.prototype._transform=function(e){e.out_canvas=this.pica.options.createCanvas(e.transform_width,e.transform_height),e.transform_width=null,e.transform_height=null;var t={alpha:"image/png"===e.blob.type};return this.utils.assign(t,this.utils.pick_pica_resize_options(e.opts)),this.pica.resize(e.image,e.out_canvas,t).then(function(){return e})},d.prototype._cleanup=function(e){e.image.src="",e.image=null;var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return t.revokeObjectURL&&t.revokeObjectURL(e.image_url),e.image_url=null,Promise.resolve(e)},d.prototype._create_blob=function(e){return this.pica.toBlob(e.out_canvas,e.blob.type).then(function(t){return e.out_blob=t,e})},d.prototype._getUint8Array=function(e){return e.arrayBuffer?e.arrayBuffer().then(function(e){return new Uint8Array(e)}):new Promise(function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(){t(new Uint8Array(r.result))},r.onerror=function(){n(Error("ImageBlobReduce: failed to load data from input blob")),r.abort()},r.onabort=function(){n(Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}})},d.pica=s,t.default=d},397152:function(e,t,n){"use strict";n.d(t,{Uy:()=>K});var r,i=Symbol.for("immer-nothing"),o=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function s(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var c=Object.getPrototypeOf;function l(e){return!!e&&!!e[a]}function u(e){return!!e&&(h(e)||Array.isArray(e)||!!e[o]||!!e.constructor?.[o]||_(e)||y(e))}var f=Object.prototype.constructor.toString();function h(e){if(!e||"object"!=typeof e)return!1;let t=c(e);if(null===t)return!0;let n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===f}function d(e,t){0===p(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function p(e){let t=e[a];return t?t.type_:Array.isArray(e)?1:_(e)?2:3*!!y(e)}function g(e,t){return 2===p(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function m(e,t,n){let r=p(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function _(e){return e instanceof Map}function y(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function b(e,t){if(_(e))return new Map(e);if(y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let n=h(e);if(!0!==t&&("class_only"!==t||n)){let t=c(e);return null!==t&&n?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[a];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){let i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(c(e),t)}}function A(e,t=!1){return E(e)||l(e)||!u(e)||(p(e)>1&&(e.set=e.add=e.clear=e.delete=w),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>A(t,!0))),e}function w(){s(2)}function E(e){return Object.isFrozen(e)}var S={};function k(e){let t=S[e];return t||s(0,e),t}function z(e,t){t&&(k("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function I(e){D(e),e.drafts_.forEach(x),e.drafts_=null}function D(e){e===r&&(r=e.parent_)}function R(e){return r={drafts_:[],parent_:r,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function x(e){let t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function O(e,t){t.unfinalizedDrafts_=t.drafts_.length;let n=t.drafts_[0];return void 0!==e&&e!==n?(n[a].modified_&&(I(t),s(4)),u(e)&&(e=C(t,e),t.parent_||T(t,e)),t.patches_&&k("Patches").generateReplacementPatches_(n[a].base_,e,t.patches_,t.inversePatches_)):e=C(t,n,[]),I(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==i?e:void 0}function C(e,t,n){if(E(t))return t;let r=t[a];if(!r)return d(t,(i,o)=>B(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return T(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;let t=r.copy_,i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),d(i,(i,a)=>B(e,r,t,i,a,n,o)),T(e,t,!1),n&&e.patches_&&k("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function B(e,t,n,r,i,o,a){if(l(i)){let a=C(e,i,o&&t&&3!==t.type_&&!g(t.assigned_,r)?o.concat(r):void 0);if(m(n,r,a),!l(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(u(i)&&!E(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;C(e,i),(!t||!t.scope_.parent_)&&"symbol"!=typeof r&&Object.prototype.propertyIsEnumerable.call(n,r)&&T(e,i)}}function T(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&A(t,n)}var M={get(e,t){if(t===a)return e;let n=v(e);if(!g(n,t)){var r=e,i=n,o=t;let a=j(i,o);return a?"value"in a?a.value:a.get?.call(r.draft_):void 0}let s=n[t];return e.finalized_||!u(s)?s:s===P(e.base_,t)?(N(e),e.copy_[t]=L(s,e)):s},has:(e,t)=>t in v(e),ownKeys:e=>Reflect.ownKeys(v(e)),set(e,t,n){let r=j(v(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){let r=P(v(e),t),i=r?.[a];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if((n===r?0!==n||1/n==1/r:n!=n&&r!=r)&&(void 0!==n||g(e.base_,t)))return!0;N(e),U(e)}return!!(e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=n,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==P(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,N(e),U(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let n=v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){s(11)},getPrototypeOf:e=>c(e.base_),setPrototypeOf(){s(12)}},G={};function P(e,t){let n=e[a];return(n?v(n):e)[t]}function j(e,t){if(!(t in e))return;let n=c(e);for(;n;){let e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=c(n)}}function U(e){!e.modified_&&(e.modified_=!0,e.parent_&&U(e.parent_))}function N(e){e.copy_||(e.copy_=b(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function L(e,t){let n=_(e)?k("MapSet").proxyMap_(e,t):y(e)?k("MapSet").proxySet_(e,t):function(e,t){let n=Array.isArray(e),i={type_:+!!n,scope_:t?t.scope_:r,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=i,a=M;n&&(o=[i],a=G);let{revoke:s,proxy:c}=Proxy.revocable(o,a);return i.draft_=c,i.revoke_=s,c}(e,t);return(t?t.scope_:r).drafts_.push(n),n}d(M,(e,t)=>{G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),G.deleteProperty=function(e,t){return G.set.call(this,e,t,void 0)},G.set=function(e,t,n){return M.set.call(this,e[0],t,n,e[0])};var F=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{let r;if("function"==typeof e&&"function"!=typeof t){let n=t;t=e;let r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}if("function"!=typeof t&&s(6),void 0!==n&&"function"!=typeof n&&s(7),u(e)){let i=R(this),o=L(e,void 0),a=!0;try{r=t(o),a=!1}finally{a?I(i):D(i)}return z(i,n),O(r,i)}if(e&&"object"==typeof e)s(1,e);else{if(void 0===(r=t(e))&&(r=e),r===i&&(r=void 0),this.autoFreeze_&&A(r,!0),n){let t=[],i=[];k("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}},this.produceWithPatches=(e,t)=>{let n,r;return"function"==typeof e?(t,...n)=>this.produceWithPatches(t,t=>e(t,...n)):[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;u(e)||s(8),l(e)&&(l(t=e)||s(10,t),e=function e(t){let n;if(!u(t)||E(t))return t;let r=t[a];if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=b(t,r.scope_.immer_.useStrictShallowCopy_)}else n=b(t,!0);return d(n,(t,r)=>{m(n,t,e(r))}),r&&(r.finalized_=!1),n}(t));let n=R(this),r=L(e,void 0);return r[a].isManual_=!0,D(n),r}finishDraft(e,t){let n=e&&e[a];n&&n.isManual_||s(9);let{scope_:r}=n;return z(r,t),O(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){let r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));let r=k("Patches").applyPatches_;return l(e)?r(e,t):this.produce(e,e=>r(e,t))}},K=F.produce;F.produceWithPatches.bind(F),F.setAutoFreeze.bind(F),F.setUseStrictShallowCopy.bind(F),F.applyPatches.bind(F),F.createDraft.bind(F),F.finishDraft.bind(F)},995186:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[W]}function o(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===q}(e)||Array.isArray(e)||!!e[Z]||!!(null==(t=e.constructor)?void 0:t[Z])||f(e)||h(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:H)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function s(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f(e)?2:3*!!h(e)}function c(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return N&&e instanceof Map}function h(e){return L&&e instanceof Set}function d(e){return e.o||e.t}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=V(e);delete t[W];for(var n=H(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),_(e)||i(e)||!o(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&a(e,function(e,t){return g(t,!0)},!0)),e}function m(){r(2)}function _(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=X[e];return t||r(18,e),t}n.d(t,{MD:()=>M,Uy:()=>et,Ve:()=>$,cA:()=>G,pV:()=>T,vV:()=>g});function v(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function b(e){A(e),e.p.forEach(E),e.p=null}function A(e){e===j&&(j=e.l)}function w(e){return j={p:[],l:j,h:e,m:!0,_:0}}function E(e){var t=e[W];0===t.i||1===t.i?t.j():t.g=!0}function S(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,i),i?(n[W].P&&(b(t),r(4)),o(e)&&(e=k(t,e),t.l||I(t,e)),t.u&&y("Patches").M(n[W].t,e,t.u,t.s)):e=k(t,n,[]),b(t),t.u&&t.v(t.u,t.s),e!==K?e:void 0}function k(e,t,n){if(_(t))return t;var r=t[W];if(!r)return a(t,function(i,o){return z(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return I(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=p(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),a(o,function(t,o){return z(e,r,i,t,o,n,s)}),I(e,i,!1),n&&e.u&&y("Patches").N(r,n,e.u,e.s)}return r.o}function z(e,t,n,r,a,s,u){if(i(a)){var f=k(e,a,s&&t&&3!==t.i&&!c(t.R,r)?s.concat(r):void 0);if(l(n,r,f),!i(f))return;e.m=!1}else u&&n.add(a);if(o(a)&&!_(a)){if(!e.h.D&&e._<1)return;k(e,a),t&&t.A.l||I(e,a)}}function I(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&g(t,n)}function D(e,t){var n=e[W];return(n?d(n):e)[t]}function R(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function x(e){e.P||(e.P=!0,e.l&&x(e.l))}function O(e){e.o||(e.o=p(e.t))}function C(e,t,n){var r,i,o,a,s,c,l,u=f(t)?y("MapSet").F(t,n):h(t)?y("MapSet").T(t,n):e.O?(o=i={i:+!!(r=Array.isArray(t)),A:n?n.A:j,P:!1,I:!1,R:{},l:n,t:t,k:null,o:null,j:null,C:!1},a=J,r&&(o=[i],a=Y),c=(s=Proxy.revocable(o,a)).revoke,i.k=l=s.proxy,i.j=c,l):y("ES5").J(t,n);return(n?n.A:j).p.push(u),u}function B(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}function T(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[W];return J.get(t,e)},set:function(t){var n=this[W];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][W];if(!i.P)switch(i.i){case 5:r(i)&&x(i);break;case 4:n(i)&&x(i)}}}function n(e){for(var t=e.t,n=e.k,r=H(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==W){var a=t[o];if(void 0===a&&!c(t,o))return!0;var s=n[o],l=s&&s[W];if(l?l.t!==a:!u(s,a))return!0}}var f=!!t[W];return r.length!==H(t).length+ +!f}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};X.ES5||(X.ES5={J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=V(n);delete o[W];for(var a=H(o),s=0;s<a.length;s++){var c=a[s];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:j,P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,W,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[W].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[W];if(n){var i=n.t,o=n.k,s=n.R,l=n.i;if(4===l)a(o,function(t){t!==W&&(void 0!==i[t]||c(i,t)?s[t]||e(o[t]):(s[t]=!0,x(n)))}),a(i,function(e){void 0!==o[e]||c(o,e)||(s[e]=!1,x(n))});else if(5===l){if(r(n)&&(x(n),s.length=!0),o.length<i.length)for(var u=o.length;u<i.length;u++)s[u]=!1;else for(var f=i.length;f<o.length;f++)s[f]=!0;for(var h=Math.min(o.length,i.length),d=0;d<h;d++)o.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(o[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}function M(){function e(e,t){function n(){this.constructor=e}c(e,t),n.prototype=t.prototype,e.prototype=new n}function t(e){e.o||(e.R=new Map,e.o=new Map(e.t))}function n(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(o(t)){var n=C(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)}))}function i(e){e.g&&r(3,JSON.stringify(d(e)))}var s,c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},l=function(){function n(e,t){return this[W]={i:2,l:t,A:t?t.A:j,P:!1,I:!1,o:void 0,R:void 0,t:e,k:this,C:!1,g:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return d(this[W]).size}}),r.has=function(e){return d(this[W]).has(e)},r.set=function(e,n){var r=this[W];return i(r),d(r).has(e)&&d(r).get(e)===n||(t(r),x(r),r.R.set(e,!0),r.o.set(e,n),r.R.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[W];return i(n),t(n),x(n),n.t.has(e)?n.R.set(e,!1):n.R.delete(e),n.o.delete(e),!0},r.clear=function(){var e=this[W];i(e),d(e).size&&(t(e),x(e),e.R=new Map,a(e.t,function(t){e.R.set(t,!1)}),e.o.clear())},r.forEach=function(e,t){var n=this;d(this[W]).forEach(function(r,i){e.call(t,n.get(i),i,n)})},r.get=function(e){var n=this[W];i(n);var r=d(n).get(e);if(n.I||!o(r)||r!==n.t.get(e))return r;var a=C(n.A.h,r,n);return t(n),n.o.set(e,a),a},r.keys=function(){return d(this[W]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[Q]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[Q]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[Q]=function(){return this.entries()},n}(),u=function(){function t(e,t){return this[W]={i:3,l:t,A:t?t.A:j,P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return d(this[W]).size}}),r.has=function(e){var t=this[W];return i(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},r.add=function(e){var t=this[W];return i(t),this.has(e)||(n(t),x(t),t.o.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[W];return i(t),n(t),x(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},r.clear=function(){var e=this[W];i(e),d(e).size&&(n(e),x(e),e.o.clear())},r.values=function(){var e=this[W];return i(e),n(e),e.o.values()},r.entries=function(){var e=this[W];return i(e),n(e),e.o.entries()},r.keys=function(){return this.values()},r[Q]=function(){return this.values()},r.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();s="MapSet",X[s]||(X[s]={F:function(e,t){return new l(e,t)},T:function(e,t){return new u(e,t)}})}function G(e){return e}var P,j,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),N="undefined"!=typeof Map,L="undefined"!=typeof Set,F="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,K=U?Symbol.for("immer-nothing"):((P={})["immer-nothing"]=!0,P),Z=U?Symbol.for("immer-draftable"):"__$immer_draftable",W=U?Symbol.for("immer-state"):"__$immer_state",Q="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",q=""+Object.prototype.constructor,H="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,V=Object.getOwnPropertyDescriptors||function(e){var t={};return H(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},X={},J={get:function(e,t){if(t===W)return e;var n,r,i=d(e);if(!c(i,t))return(r=R(i,t))?"value"in r?r.value:null==(n=r.get)?void 0:n.call(e.k):void 0;var a=i[t];return e.I||!o(a)?a:a===D(e.t,t)?(O(e),e.o[t]=C(e.A.h,a,e)):a},has:function(e,t){return t in d(e)},ownKeys:function(e){return Reflect.ownKeys(d(e))},set:function(e,t,n){var r=R(d(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=D(d(e),t),o=null==i?void 0:i[W];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(u(n,i)&&(void 0!==n||c(e.t,t)))return!0;O(e),x(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==D(e.t,t)||t in e.t?(e.R[t]=!1,O(e),x(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=d(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Y={};a(J,function(e,t){Y[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Y.deleteProperty=function(e,t){return Y.set.call(this,e,t,void 0)},Y.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var $=function(){function e(e){var t=this;this.O=F,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a,s=n;return n=e,function(e){var r=this;void 0===e&&(e=s);for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.produce(e,function(e){var t;return(t=n).call.apply(t,[r,e].concat(o))})}}if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var c=w(t),l=C(t,e,void 0),u=!0;try{a=n(l),u=!1}finally{u?b(c):A(c)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then(function(e){return v(c,i),S(e,c)},function(e){throw b(c),e}):(v(c,i),S(a,c))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===K&&(a=void 0),t.D&&g(a,!0),i){var f=[],h=[];y("Patches").M(e,a,f,h),i(f,h)}return a}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(i(t=e)||r(22,t),e=function e(t){if(!o(t))return t;var n,r=t[W],i=s(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=B(t,i),r.I=!1}else n=B(t,i);return a(n,function(t,i){var o;r&&(o=r.t,(2===s(o)?o.get(t):o[t])===i)||l(n,t,e(i))}),3===i?new Set(n):n}(t));var t,n=w(this),c=C(this,e,void 0);return c[W].C=!0,A(n),c},t.finishDraft=function(e,t){var n=(e&&e[W]).A;return v(n,t),S(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!F&&r(20),this.O=e},t.applyPatches=function(e,t){for(n=t.length-1;n>=0;n--){var n,r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=y("Patches").$;return i(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),ee=new $,et=ee.produce;ee.produceWithPatches.bind(ee),ee.setAutoFreeze.bind(ee),ee.setUseProxies.bind(ee),ee.applyPatches.bind(ee),ee.createDraft.bind(ee),ee.finishDraft.bind(ee),t.ZP=et}}]);
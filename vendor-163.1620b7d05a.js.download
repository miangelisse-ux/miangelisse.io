"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["72142"],{581607:function(t,e,i){i.d(e,{L:()=>r});var s=i(552029);class a{constructor(t){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=t}animate(t,e){return this.started?console.warn("Cannot add animations after animation has started"):this.tasks.push({graphic:t,config:e}),this}onStart(t){return this.onStartCallbacks.push(t),this}onEnd(t){return this.onEndCallbacks.push(t),this}onUpdate(t){return this.onUpdateCallbacks.push(t),this}start(){return this.started?console.warn("Animation has already started"):(this.started=!0,this.completed=0,this.onStartCallbacks.forEach(t=>t()),0===this.tasks.length?setTimeout(()=>{this.onEndCallbacks.forEach(t=>t())},0):this.tasks.forEach(t=>{let e=new s.a(t.graphic);e.onEnd(()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach(t=>t())});let i=e.executeItem(t.config,t.graphic);t.animate=i,i.forEach(t=>{this.totalDuration=Math.max(this.totalDuration,t.getStartTime()+t.getDuration())})})),this}deleteSelfAttr(t){this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.preventAttr(t))})}stop(t){return this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.stop(t))}),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach(t=>t()),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function r(t){return new a(t)}},811071:function(t,e,i){i.d(e,{Ey:()=>l,GA:()=>o});var s=i(513438),a=i(894442),r=i(672968);class n extends r.rd{constructor(t,e,i,s,a){super(null,{},i,s,a),this.clipFromAttribute=t,this.clipToAttribute=e,this._group=null==a?void 0:a.group,this._clipGraphic=null==a?void 0:a.clipGraphic}onBind(){super.onBind(),this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:s.Gk.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:s.Gk.ANIMATE_END})}onUpdate(t,e,i){if(!this._clipGraphic)return;let a={};Object.keys(this.clipFromAttribute).forEach(t=>{a[t]=this.clipFromAttribute[t]+(this.clipToAttribute[t]-this.clipFromAttribute[t])*e}),this._clipGraphic.setAttributes(a,!1,{type:s.Gk.ANIMATE_UPDATE,animationState:{ratio:e,end:t}})}}class o extends n{constructor(t,e,i,s,r){var n,o,l,h,u,p,d,c,g,f,m,v;let y,x,A=null!=(o=null==(n=null==r?void 0:r.group)?void 0:n.attribute)?o:{},b=null!=(l=A.width)?l:0,T=null!=(h=A.height)?h:0,_=null!=(u=null==r?void 0:r.animationType)?u:"in",S=null!=(p=null==r?void 0:r.startAngle)?p:0,w=null!=(d=null==r?void 0:r.orient)?d:"clockwise",C=0,O=0;"anticlockwise"===w?(O="in"===_?S+2*Math.PI:S,O=S+2*Math.PI):(C=S,O="out"===_?S+2*Math.PI:S);let P=a.w.graphicService.creator.arc({x:null!=(g=null==(c=null==r?void 0:r.center)?void 0:c.x)?g:b/2,y:null!=(m=null==(f=null==r?void 0:r.center)?void 0:f.y)?m:T/2,outerRadius:null!=(v=null==r?void 0:r.radius)?v:(b+T)/2,innerRadius:0,startAngle:C,endAngle:O,fill:!0});"anticlockwise"===w?(y={startAngle:S+2*Math.PI},x={startAngle:S}):(y={endAngle:S},x={endAngle:S+2*Math.PI}),super("in"===_?y:x,"in"===_?x:y,i,s,{group:null==r?void 0:r.group,clipGraphic:P})}}class l extends n{constructor(t,e,i,s,r){var n,o,l,h,u,p,d,c,g;let f=null!=(o=null==(n=null==r?void 0:r.group)?void 0:n.attribute)?o:{},m=null!=(h=null!=(l=null==r?void 0:r.width)?l:f.width)?h:0,v=null!=(p=null!=(u=null==r?void 0:r.height)?u:f.height)?p:0,y=null!=(d=null==r?void 0:r.animationType)?d:"in",x=null!=(c=null==r?void 0:r.direction)?c:"x",A=null!=(g=null==r?void 0:r.orient)?g:"positive",b=a.w.graphicService.creator.rect({x:0,y:0,width:"in"===y&&"x"===x?0:m,height:"in"===y&&"y"===x?0:v,fill:!0}),T={},_={};"y"===x?"negative"===A?(T={y:v,height:0},_={y:0,height:v}):(T={height:0},_={height:v}):"negative"===A?(T={x:m,width:0},_={x:0,width:m}):(T={width:0},_={width:m}),super("in"===y?T:_,"in"===y?_:T,i,s,{group:null==r?void 0:r.group,clipGraphic:b})}}},978200:function(t,e,i){i.d(e,{b:()=>a,v:()=>r});var s=i(418068);class a extends s.W{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var t;super.onFirstRun();let{clipDimension:e}=(null==(t=this.params)?void 0:t.options)||{};e&&(this.target.attribute.clipRangeByDimension=e)}}class r extends s.U{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["clipRange"]}}},418068:function(t,e,i){i.d(e,{U:()=>r,W:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i;super.onBind();let s=this.target.getFinalAttribute(),a=null!=(t=this.target.attribute)?t:{},r={},n=null!=(e=this.from)?e:{};this.keys.forEach(t=>{var e,i,o;r[t]=null!=(e=null==s?void 0:s[t])?e:1,n[t]=null!=(o=null!=(i=n[t])?i:a[t])?o:0});let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),this.props=r,this.propKeys=this.keys,this.from=n,this.to=r,!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(n)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class r extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){super.onBind();let t=this.target.attribute,e={},i={};this.keys.forEach(s=>{var a;e[s]=0,i[s]=null!=(a=t[s])?a:1}),this.props=e,this.propKeys=this.keys,this.from=i,this.to=e,Object.assign(this.target.attribute,i),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}},672968:function(t,e,i){i.d(e,{Or:()=>r,rd:()=>a});var s=i(892515);class a extends s.h{constructor(t,e,i,s,a){super("customAnimate",e,i,s),this.type="customAnimate",this.customFrom=t,this.params=a,this.from=t,this.to=e}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.onUpdate(t,s,i),this.syncAttributeUpdate()}setProps(t){this.props=t,this.propKeys=Object.keys(t),this.animate.reSyncProps()}}class r extends a{completeBind(t){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(t.getDuration())}stop(){this._animator&&this._animator.stop()}}},956779:function(t,e,i){i.d(e,{D:()=>r,U:()=>a});var s=i(418068);class a extends s.W{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class r extends s.U{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["opacity","fillOpacity","strokeOpacity"]}}},344011:function(t,e,i){i.d(e,{$:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.from=null!=t?t:{}}onBind(){var t,e;super.onBind(),Object.keys(this.from).forEach(t=>{null==this.props[t]&&(this.props[t]=this.target.getGraphicAttribute(t))});let i=this.target.getFinalAttribute();"appear"===(null==(t=this.target.context)?void 0:t.animationState)&&i&&this.target.setAttributes(i),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.from[e]=null!=(i=this.from[e])?i:t[e]}),this.target.setAttributes(this.from)}deleteSelfAttr(t){super.deleteSelfAttr(t),delete this.from[t]}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.from[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}}},713308:function(t,e,i){i.d(e,{j2:()=>o,kj:()=>n});var s=i(672968),a=i(704654);class r extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(t){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*t}updateEndAngle(t){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*t}updateAngle(t){this.updateStartAngle(t),this.updateEndAngle(t)}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdateShapeAndBoundsTag())}}class n extends r{onBind(){var t,e,i,s,r,n;super.onBind();let{from:o,to:l}=(s=this.target,r=this.params.options,this.params,!1!==(null!=(n=null==r?void 0:r.overall)&&n)?((t,e,i)=>{let s=t.getFinalAttribute();if(e&&"anticlockwise"===e.orient){let t=(0,a.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t,endAngle:t},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}}let r=(0,a.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:r,endAngle:r},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}})(s,r):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"anticlockwise"===e.orient?{from:{startAngle:null==s?void 0:s.endAngle},to:{startAngle:null==s?void 0:s.startAngle}}:{from:{endAngle:null==s?void 0:s.startAngle},to:{endAngle:null==s?void 0:s.endAngle}}})(s,r)),h=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:o;this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=h,this.to=l;let u=this.target.getFinalAttribute();u&&this.target.setAttributes(u),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(h),this.determineUpdateFunction()}}class o extends r{onBind(){var t,e,i;super.onBind();let{from:s,to:r}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?((t,e,i)=>{let s=t.attribute;if(e&&"anticlockwise"===e.orient){let t=(0,a.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:s.startAngle,endAngle:s.endAngle},to:{startAngle:t,endAngle:t}}}let r=(0,a.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:s.startAngle,endAngle:s.endAngle},to:{startAngle:r,endAngle:r}}})(t,e):((t,e,i)=>{let s=t.attribute;return e&&"anticlockwise"===e.orient?{from:{startAngle:s.startAngle},to:{startAngle:null==s?void 0:s.endAngle}}:{from:{endAngle:s.endAngle},to:{endAngle:null==s?void 0:s.startAngle}}})(t,e));this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=null!=s?s:this.target.attribute,this.to=r,this.determineUpdateFunction()}}},62853:function(t,e,i){i.d(e,{B:()=>n,W:()=>r});var s=i(364776),a=i(672968);class r extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i;super.onBind();let{from:a,to:r}=((t,e,i)=>{let a=t.getFinalAttribute();switch(null==e?void 0:e.direction){case"x":{let t=a.x,e=a.x1,i=a.width;return{from:(0,s.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0},to:{x:t,x1:e,width:i}}}case"y":{let t=a.y,e=a.y1,i=a.height;return{from:(0,s.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0},to:{y:t,y1:e,height:i}}}default:{let t=a.x,e=a.x1,i=a.width,r=a.y,n=a.y1,o=a.height,l={};return(0,s.Z)(i)?(l.x=t+i/2,l.width=0,l.x1=void 0):(l.x=(t+e)/2,l.x1=(t+e)/2,l.width=void 0),(0,s.Z)(o)?(l.y=r+o/2,l.height=0,l.y1=void 0):(l.y=(r+n)/2,l.y1=(r+n)/2,l.height=void 0),{from:l,to:{x:t,y:r,x1:e,y1:n,width:i,height:o}}}}})(this.target,this.params.options,this.params),n=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:a;this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=n,this.to=r;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(n)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class n extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){super.onBind();let{from:t,to:e}=((t,e,i)=>{let a=t.attribute;switch(null==e?void 0:e.direction){case"x":{let t=a.x,e=a.x1,i=a.width;return{to:(0,s.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0}}}case"y":{let t=a.y,e=a.y1,i=a.height;return{to:(0,s.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0}}}default:{let t=a.x,e=a.y,i=a.x1,r=a.y1,n=a.width,o=a.height,l={};return(0,s.Z)(n)?(l.x=t+n/2,l.width=0,l.x1=void 0):(l.x=(t+i)/2,l.x1=(t+i)/2,l.width=void 0),(0,s.Z)(o)?(l.y=e+o/2,l.height=0,l.y1=void 0):(l.y=(e+r)/2,l.y1=(e+r)/2,l.height=void 0),{to:l}}}})(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=null!=t?t:this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}},57372:function(t,e,i){i.d(e,{HQ:()=>o,qG:()=>l});var s=i(364776),a=i(454326),r=i(704654),n=i(672968);class o extends n.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,n,o,l,h;super.onBind();let{from:u,to:p}=(n=this.target,o=this.params.options,l=this.params,!1!==(null!=(h=null==o?void 0:o.overall)&&h)?function(t,e,i){var s,n,o;let l,h=t.getFinalAttribute(),u=h.y,p=h.y1,d=h.height;return e&&"negative"===e.orient?(0,r.Z)(e.overall)?l=e.overall:i.group?(l=null!=(o=null!=(s=i.groupHeight)?s:null==(n=e.layoutRect)?void 0:n.height)?o:i.group.getBounds().height(),i.groupHeight=l):l=i.height:l=(0,r.Z)(null==e?void 0:e.overall)?e.overall:0,{from:{y:l,y1:(0,a.Z)(p)?void 0:l,height:(0,a.Z)(d)?void 0:0},to:{y:u,y1:p,height:d}}}(n,o,l):function(t,e,i){let r=t.getFinalAttribute(),n=r.y,o=r.y1,l=r.height;if(e&&"negative"===e.orient){let t=(0,s.Z)(l)?Math.max(n,n+l):Math.max(n,o);return{from:{y:t,y1:(0,a.Z)(o)?void 0:t,height:(0,a.Z)(l)?void 0:0},to:{y:n,y1:o,height:l}}}let h=(0,s.Z)(l)?Math.min(n,n+l):Math.min(n,o);return{from:{y:h,y1:(0,a.Z)(o)?void 0:h,height:(0,a.Z)(l)?void 0:0},to:{y:n,y1:o,height:l}}}(n,o,0)),d=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:u;this.props=p,this.propKeys=Object.keys(p).filter(t=>null!=p[t]),this.from=d,this.to=p;let c=this.target.getFinalAttribute();c&&this.target.setAttributes(c),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(d)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class l extends n.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,n;super.onBind();let{from:o,to:l}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(n=null==e?void 0:e.overall)&&n)?function(t,e,i){var s,n,o;let l,h=t.getFinalAttribute(),u=h.y1,p=h.height;return e&&"negative"===e.orient?(0,r.Z)(e.overall)?l=e.overall:i.group?(l=null!=(o=null!=(s=i.groupHeight)?s:null==(n=e.layoutRect)?void 0:n.height)?o:i.group.getBounds().height(),i.groupHeight=l):l=i.height:l=(0,r.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{y:l,y1:(0,a.Z)(u)?void 0:l,height:(0,a.Z)(p)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.y,o=r.y1,l=r.height;if(e&&"negative"===e.orient){let t=(0,s.Z)(l)?Math.max(n,n+l):Math.max(n,o);return{to:{y:t,y1:(0,a.Z)(o)?void 0:t,height:(0,a.Z)(l)?void 0:0}}}let h=(0,s.Z)(l)?Math.min(n,n+l):Math.min(n,o);return{to:{y:h,y1:(0,a.Z)(o)?void 0:h,height:(0,a.Z)(l)?void 0:0}}}(t,e,0));this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=null!=o?o:this.target.attribute,this.to=l}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}},593619:function(t,e,i){i.d(e,{$m:()=>d,Kk:()=>l,Yf:()=>h,rf:()=>f,xJ:()=>p,yQ:()=>g});var s=i(917486),a=i(89530),r=i(672968);let n=(t,e,i)=>{let s=t.getFinalAttribute().points,r={x:0,y:0};return s.forEach(t=>{r.x+=t.x,r.y+=t.y}),r.x/=s.length,r.y/=s.length,e&&e.center&&((0,a.Z)(e.center.x)&&(r.x=e.center.x),(0,a.Z)(e.center.y)&&(r.y=e.center.y)),"area"===t.type&&(r.x1=r.x,r.y1=r.y),s.map(t=>Object.assign({},t,r))};class o extends r.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){var a,r;let n=null==(a=this.from)?void 0:a.points,o=null==(r=this.to)?void 0:r.points;n&&o&&(this.target.attribute.points=n.map((t,i)=>(0,s.q9)(n[i],o[i],e)),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class l extends o{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:n(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class h extends o{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:s,to:a}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:n(t,e)}});this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=s||i,this.to=a}else this.valid=!1}}let u=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewWidth;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},i),{x:e,y:i.y,x1:e,y1:i.y1,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:!1!==i.defined})});class p extends o{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:u(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class d extends o{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:s,to:a}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:u(t,e)}});this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=s||i,this.to=a}else this.valid=!1}}let c=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewHeight;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},i),{x:i.x,y:e,x1:i.x1,y1:e,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:!1!==i.defined})});class g extends o{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:c(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class f extends o{onBind(){var t,e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:i,to:s}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:c(t,e)}});this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=null!=i?i:this.target.attribute,this.to=s}else this.valid=!1}}},953021:function(t,e,i){i.d(e,{$:()=>n,em:()=>o});var s=i(672968),a=i(704654);class r extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class n extends r{onBind(){var t,e,i,s,r,n;super.onBind();let{from:o,to:l}=(s=this.target,r=this.params.options,this.params,!1!==(null!=(n=null==r?void 0:r.overall)&&n)?((t,e,i)=>{let s=t.getFinalAttribute(),r=(0,a.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:r,outerRadius:r},to:{innerRadius:null==s?void 0:s.innerRadius,outerRadius:null==s?void 0:s.outerRadius}}})(s,r):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==s?void 0:s.outerRadius},to:{innerRadius:null==s?void 0:s.innerRadius}}:{from:{outerRadius:null==s?void 0:s.innerRadius},to:{outerRadius:null==s?void 0:s.outerRadius}}})(s,r)),h=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:o;this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=h,this.to=l;let u=this.target.getFinalAttribute();u&&this.target.setAttributes(u),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(h)}}class o extends r{onBind(){var t,e,i;super.onBind();let{to:s}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?((t,e,i)=>{let s=t.getFinalAttribute(),r=(0,a.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:null==s?void 0:s.innerRadius,outerRadius:null==s?void 0:s.outerRadius},to:{innerRadius:r,outerRadius:r}}})(t,e):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==s?void 0:s.innerRadius},to:{innerRadius:null==s?void 0:s.outerRadius}}:{from:{outerRadius:null==s?void 0:s.outerRadius},to:{outerRadius:null==s?void 0:s.innerRadius}}})(t,e));this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=this.target.attribute,this.to=s}}},44935:function(t,e,i){i.d(e,{dR:()=>o,yi:()=>l});var s=i(364776),a=i(454326),r=i(704654),n=i(672968);class o extends n.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,n,o,l,h;super.onBind();let{from:u,to:p}=(n=this.target,o=this.params.options,l=this.params,!1!==(null!=(h=null==o?void 0:o.overall)&&h)?function(t,e,i){var s;let n,o=t.getFinalAttribute(),l=o.x,h=o.x1,u=o.width;return e&&"negative"===e.orient?(0,r.Z)(e.overall)?n=e.overall:i.group?(n=null!=(s=i.groupWidth)?s:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,r.Z)(null==e?void 0:e.overall)?null==e?void 0:e.overall:0,{from:{x:n,x1:(0,a.Z)(h)?void 0:n,width:(0,a.Z)(u)?void 0:0},to:{x:l,x1:h,width:u}}}(n,o,l):function(t,e,i){let r=t.getFinalAttribute(),n=r.x,o=r.x1,l=r.width;if(e&&"negative"===e.orient){let t=(0,s.Z)(l)?Math.max(n,n+l):Math.max(n,o);return{from:{x:t,x1:(0,a.Z)(o)?void 0:t,width:(0,a.Z)(l)?void 0:0},to:{x:n,x1:o,width:l}}}let h=(0,s.Z)(l)?Math.min(n,n+l):Math.min(n,o);return{from:{x:h,x1:(0,a.Z)(o)?void 0:h,width:(0,a.Z)(l)?void 0:0},to:{x:n,x1:o,width:l}}}(n,o,0)),d=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:u;this.props=p,this.propKeys=Object.keys(p).filter(t=>null!=p[t]),this.from=d,this.to=p;let c=this.target.getFinalAttribute();c&&this.target.setAttributes(c),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(d)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class l extends n.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,n;super.onBind();let{from:o,to:l}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(n=null==e?void 0:e.overall)&&n)?function(t,e,i){var s;let n,o=t.getFinalAttribute(),l=o.x1,h=o.width;return e&&"negative"===e.orient?(0,r.Z)(e.overall)?n=e.overall:i.group?(n=null!=(s=i.groupWidth)?s:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,r.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{x:n,x1:(0,a.Z)(l)?void 0:n,width:(0,a.Z)(h)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.x,o=r.x1,l=r.width;if(e&&"negative"===e.orient){let t=(0,s.Z)(l)?Math.max(n,n+l):Math.max(n,o);return{to:{x:t,x1:(0,a.Z)(o)?void 0:t,width:(0,a.Z)(l)?void 0:0}}}let h=(0,s.Z)(l)?Math.min(n,n+l):Math.min(n,o);return{to:{x:h,x1:(0,a.Z)(o)?void 0:h,width:(0,a.Z)(l)?void 0:0}}}(t,e,0));this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=null!=o?o:this.target.attribute,this.to=l}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}},285144:function(t,e,i){i.d(e,{xQ:()=>b,zI:()=>P,$K:()=>T});var s=i(324759),a=i(90853),r=i(589131),n=i(894442),o=i(922552),l=i(12959),h=i(513438),u=i(454326),p=i(695723),d=i(672968);let c={duration:1e3,easing:"quadInOut"},g=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"],f=(t,e,i)=>{t.forEach(t=>{if(Number.isFinite(t.to))e[t.key]=t.from+(t.to-t.from)*i;else if("fill"===t.key||"stroke"===t.key){let a=(0,s.BM)(t.from,t.to,i,!1);a&&(e[t.key]=a)}})},m=(t,e,i)=>{let s=[],a=[];e.clear();for(let r=0;r<t.length;r++){let n=t[r],o=n.from,l=n.to,h=n.rotation*i,u=n.fromCp,p=n.toCp,d=Math.sin(h),c=Math.cos(h);a[0]=u[0]+(p[0]-u[0])*i,a[1]=u[1]+(p[1]-u[1])*i;for(let t=0;t<o.length;t+=2){let e=o[t],r=o[t+1],n=e*(1-i)+l[t]*i,h=r*(1-i)+l[t+1]*i;s[t]=n*c-h*d+a[0],s[t+1]=n*d+h*c+a[1]}let g=s[0],f=s[1];e.moveTo(g,f);for(let t=2;t<o.length;t+=6){let i=s[t],a=s[t+1],r=s[t+2],n=s[t+3],o=s[t+4],l=s[t+5];g===i&&f===a&&r===o&&n===l?e.lineTo(o,l):e.bezierCurveTo(i,a,r,n,o,l),g=o,f=l}}},v=(t,e,i)=>{let s=t?(0,a.JO)(t):[],r=(0,a.JO)(e);i&&s&&(i.fromTransform&&(0,a.TU)(s,i.fromTransform.clone().getInverse()),(0,a.TU)(s,i.toTransfrom));let[n,o]=(0,a.xL)(s,r);return t?(0,a.pP)(n,o,10,Math.PI):o.map((t,e)=>({from:n[e],to:t,fromCp:[0,0],toCp:[0,0],rotation:0}))},y=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],x=(t,e)=>{if(!t||!e)return null;let i=[],s=!1;return Object.keys(t).forEach(a=>{if(!y.includes(a))return;let n=e[a];if(!(0,u.Z)(n)&&!(0,u.Z)(t[a])&&n!==t[a]){if("fill"===a||"stroke"===a){let e=t=>"string"==typeof t?r.VH.Get(t,r.Mr.Color255):t;i.push({from:(0,p.Z)(t[a])?t[a].map(e):e(t[a]),to:(0,p.Z)(n)?n.map(e):e(n),key:a})}else i.push({from:t[a],to:n,key:a});s=!0}}),s?i:null};class A extends d.rd{constructor(t,e,i){super({},{},e,i),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs,this.saveOnEnd=t.saveOnEnd}getEndProps(){return{}}onBind(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}onEnd(){}onUpdate(t,e,i){let s=this.target,a="function"==typeof s.pathProxy?s.pathProxy(s.attribute):s.pathProxy;m(this.morphingData,a,e),this.otherAttrs&&this.otherAttrs.length&&f(this.otherAttrs,i,e),this.target.setAttributes(i),t&&!this.saveOnEnd&&(this.target.pathProxy=null)}}let b=(t,e,i,s)=>{var a,r,n;if(t&&(!t.valid||!t.toCustomPath))return __DEV__&&console.error(t," is not validate"),null;if(!e.valid||!e.toCustomPath)return __DEV__&&console.error(e," is not validate"),null;let o=null==t?void 0:t.globalTransMatrix;s&&o&&(o=s.clone().multiply(o.a,o.b,o.c,o.d,o.e,o.f));let l=v(null==(a=null==t?void 0:t.toCustomPath)?void 0:a.call(t),e.toCustomPath(),{fromTransform:o,toTransfrom:e.globalTransMatrix}),h=x(null==t?void 0:t.attribute,e.attribute),u=e.animate(i);(null==i?void 0:i.delay)&&u.wait(i.delay);let p=new A({morphingData:l,otherAttrs:h},null!=(r=null==i?void 0:i.duration)?r:c.duration,null!=(n=null==i?void 0:i.easing)?n:c.easing);return u.play(p),u},T=(t,e,i)=>{var s;let a=e.filter(t=>t&&t.toCustomPath&&t.valid);a.length||__DEV__&&console.error(a," is not validate"),t.valid&&t.toCustomPath||__DEV__&&console.error(t," is not validate");let r=("clone"===(null==i?void 0:i.splitPath)?C:null!=(s=null==i?void 0:i.splitPath)?s:O)(t,a.length,!1),n=null==i?void 0:i.onEnd,o=a.length,l=()=>{0==--o&&n&&n()};a.forEach((e,s)=>{var n;let o=r[s],h=(null!=(n=null==i?void 0:i.delay)?n:0)+((null==i?void 0:i.individualDelay)?i.individualDelay(s,a.length,o,e):0);b(o,e,Object.assign({},i,{onEnd:l,delay:h}),t.globalTransMatrix)})};class _ extends d.rd{constructor(t,e,i){super({},{},e,i),this.morphingData=t.morphingData,this.otherAttrs=t.otherAttrs}getEndProps(){return{}}onBind(){this.addPathProxy()}addPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.createPathProxy()}),this.onUpdate(!1,0,this.target.attribute)}clearPathProxy(){this.target.shadowRoot.forEachChildren(t=>{t.pathProxy=null})}onEnd(){}onUpdate(t,e,i){this.target.shadowRoot.forEachChildren((t,i)=>{var s;m(this.morphingData[i],"function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy,e),(null==(s=this.otherAttrs)?void 0:s[i])&&this.otherAttrs[i].length&&f(this.otherAttrs[i],t.attribute,e)}),t&&(this.clearPathProxy(),this.morphingData=null)}}let S=t=>{let e={};return Object.keys(t).forEach(i=>{g.includes(i)||(e[i]=t[i])}),e},w=(t,e,i)=>{let s=S(t.attribute),a=t.attachShadow();if(e.length)a.setTheme({[e[0].type]:s}),e.forEach(t=>{t.setAttributes({pickable:!1}),a.appendChild(t)});else{let r=t.AABBBounds,o=r.width(),l=r.height();a.setTheme({rect:s}),Array(i).fill(0).forEach(t=>{let i=n.w.graphicService.creator.rect({x:0,y:0,width:o,height:l,pickable:!1});a.appendChild(i),e.push(i)})}},C=(t,e,i)=>{let s=[],a=i?null:S(t.attribute),r=t.toCustomPath();for(let t=0;t<e;t++){let t={path:(new o.r).fromCustomPath2D(r)};s.push(n.w.graphicService.creator.path(i?t:Object.assign({},a,t)))}return i&&w(t,s,e),s},O=(t,e,i)=>{let s=[],a=i?null:S(t.attribute);if("rect"===t.type)(0,l.PB)(t,e).forEach(t=>{s.push(n.w.graphicService.creator.rect(i?t:Object.assign({},a,t)))});else if("arc"===t.type)(0,l.AK)(t,e).forEach(t=>{s.push(n.w.graphicService.creator.arc(i?t:Object.assign({},a,t)))});else if("circle"===t.type)(0,l.u$)(t,e).forEach(t=>{s.push(n.w.graphicService.creator.arc(i?t:Object.assign({},a,t)))});else if("line"===t.type){let r=(0,l.ju)(t,e),o={size:10,symbolType:"circle"};r.forEach(t=>{s.push(n.w.graphicService.creator.symbol(i?Object.assign({},t,o):Object.assign({},a,t,o)))})}else"polygon"===t.type?(0,l.Qw)(t,e).forEach(t=>{s.push(n.w.graphicService.creator.polygon(i?t:Object.assign({},a,t)))}):"area"===t.type?(0,l.MP)(t,e).forEach(t=>{s.push(n.w.graphicService.creator.polygon(i?t:Object.assign({},a,t)))}):"path"===t.type&&(0,l.uo)(t,e).forEach(t=>{"path"in t?s.push(n.w.graphicService.creator.path(i?t:Object.assign({},a,t))):s.push(n.w.graphicService.creator.polygon(i?t:Object.assign({},a,t)))});return i&&w(t,s,e),s},P=(t,e,i)=>{var s,a,r;let n=t.filter(t=>t.toCustomPath&&t.valid);n.length||__DEV__&&console.error(t," is not validate"),e.valid&&e.toCustomPath||__DEV__&&console.error(e," is not validate");let o=("clone"===(null==i?void 0:i.splitPath)?C:null!=(s=null==i?void 0:i.splitPath)?s:O)(e,n.length,!0),l=e.attribute;e.setAttribute("visible",!1);let u=n.map((t,e)=>v(t.toCustomPath(),o[e].toCustomPath(),{fromTransform:t.globalTransMatrix,toTransfrom:o[e].globalTransMatrix})),p=n.map((t,e)=>x(t.attribute,l));if(null==i?void 0:i.individualDelay){let s=i.onEnd,a=n.length,r=()=>{0==--a&&(e.setAttributes({visible:!0,ratio:null},!1,{type:h.Gk.ANIMATE_END}),e.detachShadow(),s&&s())};o.forEach((e,s)=>{var a,o,l;let h=(null!=(a=i.delay)?a:0)+i.individualDelay(s,n.length,t[s],e),d=e.animate(Object.assign({},i,{onEnd:r}));d.wait(h),d.play(new A({morphingData:u[s],saveOnEnd:!0,otherAttrs:p[s]},null!=(o=i.duration)?o:c.duration,null!=(l=i.easing)?l:c.easing))})}else{let t=null==i?void 0:i.onEnd,s=i?Object.assign({},i):{};s.onEnd=()=>{e.setAttribute("visible",!0,!1,{type:h.Gk.ANIMATE_END}),e.detachShadow(),t&&t()};let n=e.animate(s);(null==i?void 0:i.delay)&&n.wait(i.delay),n.play(new _({morphingData:u,otherAttrs:p},null!=(a=null==i?void 0:i.duration)?a:c.duration,null!=(r=null==i?void 0:i.easing)?r:c.easing))}}},676368:function(t,e,i){i.d(e,{V8:()=>o,vW:()=>l});var s=i(796241),a=i(89530),r=i(672968);class n extends r.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class o extends n{onBind(){var t;super.onBind();let{from:e,to:i}=((t,e,i)=>{var r,n,o,l;let{offset:h=0,orient:u,direction:p,point:d,excludeChannels:c=[],layoutRect:g={}}=null!=e?e:{},f=0,m=0;"negative"===u&&(f=null!=(r=g.width)?r:t.stage.viewWidth,m=null!=(n=g.height)?n:t.stage.viewHeight),f+=h,m+=h;let v=(0,s.Z)(d)?d.call(null,null==(l=null==(o=t.context)?void 0:o.data)?void 0:l[0],t,i):d,y=t.getGraphicAttribute("x"),x=t.getGraphicAttribute("y"),A=c.includes("x")?y:v&&(0,a.Z)(v.x)?v.x:f,b=c.includes("y")?x:v&&(0,a.Z)(v.y)?v.y:m;switch(p){case"x":return{from:{x:c.includes("x")?y:A},to:{x:y}};case"y":return{from:{y:b},to:{y:x}};default:return{from:{x:A,y:b},to:{x:y,y:x}}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class l extends n{onBind(){super.onBind();let{from:t,to:e}=((t,e,i)=>{var r,n,o,l;let{offset:h=0,orient:u,direction:p,point:d}=null!=e?e:{},c=i.group?i.group.AABBBounds:null,g=null!=(r=c.width())?r:i.width,f=null!=(n=c.height())?n:i.height,m=(0,s.Z)(d)?d.call(null,null==(l=null==(o=t.context)?void 0:o.data)?void 0:l[0],t,i):d,v=m&&(0,a.Z)(m.x)?m.x:("negative"===u?g:0)+h,y=m&&(0,a.Z)(m.y)?m.y:("negative"===u?f:0)+h;switch(p){case"x":return{from:{x:t.getGraphicAttribute("x")},to:{x:v}};case"y":return{from:{y:t.getGraphicAttribute("y")},to:{y:y}};default:return{from:{x:t.getGraphicAttribute("x"),y:t.getGraphicAttribute("y")},to:{x:v,y:y}}}})(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=t,this.to=e}}},503840:function(t,e,i){i.d(e,{B:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.formatTemplate=null,this.decimalLength=null==a?void 0:a.decimalLength,(null==a?void 0:a.formatTemplate)&&a.formatTemplate.includes("{{var}}")&&(this.formatTemplate=a.formatTemplate)}onFirstRun(){var t,e,i;let s=this.getLastProps(),a=this.getEndProps(),r=null!=(t=s.text)?t:0,n=null!=(e=a.text)?e:0;this.valid=!0;let o=0,l=0,h="",u="",p=0;if("number"==typeof r)o=r,p=Math.max(p,(r.toString().split(".")[1]||"").length);else{if("string"!=typeof r)return void(this.valid=!1);if(r.endsWith("%")){h="%";let t=r.substring(0,r.length-1).replace(/,/g,"");if(isNaN(o=parseFloat(t)/100))return void(this.valid=!1);p=Math.max(p,(t.split(".")[1]||"").length+2)}else{let t=r.replace(/,/g,"");if(isNaN(o=parseFloat(t)))return void(this.valid=!1);r.includes(",")&&(h=","),p=Math.max(p,(t.split(".")[1]||"").length)}}if("number"==typeof n)l=n,p=Math.max(p,(n.toString().split(".")[1]||"").length);else{if("string"!=typeof n)return void(this.valid=!1);if(n.endsWith("%")){u="%";let t=n.substring(0,n.length-1).replace(/,/g,"");if(isNaN(l=parseFloat(t)/100))return void(this.valid=!1);p=Math.max(p,(t.split(".")[1]||"").length+2)}else{let t=n.replace(/,/g,"");if(isNaN(l=parseFloat(t)))return void(this.valid=!1);n.includes(",")&&(u=","),p=Math.max(p,(t.split(".")[1]||"").length)}}if(null==(i=this.params)?void 0:i.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=u||h}"%"===this.format&&"%"!==u&&"%"!==h&&void 0===this.decimalLength&&(this.decimalLength=2),"%"===this.format||"%"!==u&&"%"!==h||(o*=100,l*=100)}else this.format=u||h;this.fromNumber=o,this.toNumber=l,void 0===this.decimalLength&&(this.decimalLength=p)}onEnd(t){super.onEnd(t),t||this.props&&this.target.setAttributes(this.props)}onUpdate(t,e,i){if(!this.valid)return;let s=this.fromNumber+(this.toNumber-this.fromNumber)*e,a="",r=this.format,n=("%"===r?100*s:s).toFixed(this.decimalLength),o,l=n;if(parseFloat(n)===Math.floor(parseFloat(n))&&(l=Math.floor(parseFloat(n))),"%"===r)o=`${l}%`;else if(","===r){let t=l.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),o=t.join(".")}else o=l;a=this.formatTemplate?this.formatTemplate.replace("{{var}}",o.toString()):o,this.target.setAttribute("text",a)}}},625273:function(t,e,i){i.d(e,{XN:()=>l,hD:()=>o});var s=i(536163),a=i(89530),r=i(672968);class n extends r.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class o extends n{onBind(){var t;super.onBind();let{from:e,to:i}=((t,e)=>{var i;let r=null!=(i=t.getFinalAttribute().angle)?i:0;return{from:{angle:(0,s.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,a.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2},to:{angle:r}}})(this.target,this.params.options);this.props=i,this.propKeys=["angle"],this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class l extends n{onBind(){super.onBind();let{from:t,to:e}=((t,e)=>{var i;let r=null!=(i=t.getFinalAttribute().angle)?i:0,n=0;return n=(0,s.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,a.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:n}}})(this.target,this.params.options);this.props=e,this.propKeys=["angle"],this.from=t,this.to=e}}},396796:function(t,e,i){i.d(e,{E:()=>r,O:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n,o,l,h,u;let p,d;super.onBind();let c=this.target.getFinalAttribute(),g=null!=(t=this.target.attribute)?t:{};switch(null==(e=this.params)?void 0:e.direction){case"x":p={scaleX:null!=(i=g.scaleX)?i:0},d={scaleX:null!=(s=null==c?void 0:c.scaleX)?s:1},this._updateFunction=this.updateX;break;case"y":p={scaleY:null!=(a=g.scaleY)?a:0},d={scaleY:null!=(r=null==c?void 0:c.scaleY)?r:1},this._updateFunction=this.updateY;break;default:p={scaleX:null!=(n=g.scaleX)?n:0,scaleY:null!=(o=g.scaleY)?o:0},d={scaleX:null!=(l=null==c?void 0:c.scaleX)?l:1,scaleY:null!=(h=null==c?void 0:c.scaleY)?h:1},this._updateFunction=this.updateXY}let f=this.target.getFinalAttribute();f&&this.target.setAttributes(f),this.props=d,this.from=p,this.to=d,!1!==(null==(u=this.params.controlOptions)?void 0:u.immediatelyApply)&&this.target.setAttributes(p)}onEnd(t){super.onEnd(t)}updateX(t){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*t}updateY(t){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*t}updateXY(t){this.updateX(t),this.updateY(t)}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:"scaleX"===this.propKeys[0]?this._updateFunction=this.updateX:"scaleY"===this.propKeys[0]?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class r extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a;let r,n;super.onBind();let o=this.target.attribute;switch(null==(t=this.params)?void 0:t.direction){case"x":r={scaleX:null!=(e=null==o?void 0:o.scaleX)?e:1},n={scaleX:0};break;case"y":r={scaleY:null!=(i=null==o?void 0:o.scaleY)?i:1},n={scaleY:0};break;default:r={scaleX:null!=(s=null==o?void 0:o.scaleX)?s:1,scaleY:null!=(a=null==o?void 0:o.scaleY)?a:1},n={scaleX:0,scaleY:0}}this.props=n,this.from=r,this.to=n}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}},240642:function(t,e,i){i.d(e,{Z:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}}},758206:function(t,e,i){i.d(e,{f:()=>l});var s=i(89530),a=i(994030),r=i(919498),n=i(917486),o=i(672968);class l extends o.rd{constructor(t,e,i,s,a){var r,n;super(t,e,i,s,a),this.newPointAnimateType=null!=(r=null==a?void 0:a.newPointAnimateType)?r:"grow",this.clipRangeByDimension=null!=(n=null==a?void 0:a.clipRangeByDimension)?n:"x"}getPoints(t,e=!1){if(t.points)return t.points;if(t.segments){let i=[];return this.segmentsCache||(this.segmentsCache=[]),t.segments.map(t=>{var s,a;t.points&&i.push(...t.points),e&&this.segmentsCache.push(null!=(a=null==(s=t.points)?void 0:s.length)?a:0)}),i}return[]}onBind(){super.onBind();let{points:t,segments:e}=this.target.attribute,{points:i,segments:n}=this.target.getFinalAttribute();this.from={points:t,segments:e},this.to={points:i,segments:n},this.props=this.to;let o=this.getPoints(this.from),l=this.getPoints(this.to,!0);this.fromPoints=o?Array.isArray(o)?o:[o]:[],this.toPoints=l?Array.isArray(l)?l:[l]:[];let h=new Map;this.fromPoints.forEach(t=>{t.context&&h.set(t.context,t)});let u,p,d=1/0,c=-1/0;for(let t=0;t<this.toPoints.length;t+=1)if(h.has(this.toPoints[t].context)){d=t,u=h.get(this.toPoints[t].context);break}for(let t=this.toPoints.length-1;t>=0;t-=1)if(h.has(this.toPoints[t].context)){c=t,p=h.get(this.toPoints[t].context);break}"clip"===this.newPointAnimateType&&0!==this.toPoints.length&&(Number.isFinite(c)?(this.clipRange=this.toPoints[c][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],1===this.clipRange&&(this.shrinkClipRange=this.toPoints[c][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),(0,s.Z)(this.clipRange)?this.clipRange=(0,a.Z)(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let g=this.toPoints[0];this.interpolatePoints=this.toPoints.map((t,e)=>{let i=h.get(t.context);return i?(g=i,[i,t]):"appear"===this.newPointAnimateType||"clip"===this.newPointAnimateType?[t,t]:e<d&&u?[u,t]:e>c&&p?[p,t]:[g,t]}),this.points=this.interpolatePoints.map(t=>{let e=t[0],i=t[1],s=new r.E9(e.x,e.y,e.x1,e.y1);return s.defined=i.defined,s.context=i.context,s})}onFirstRun(){let t=this.target.attribute.clipRange;(0,s.Z)(t*this.clipRange)&&(this.clipRange*=t)}onUpdate(t,e,i){if(t)return Object.keys(this.to).forEach(t=>{this.target.attribute[t]=this.to[t]}),this.target.addUpdatePositionTag(),void this.target.addUpdateShapeAndBoundsTag();if(this.points=this.points.map((t,i)=>{let s=(0,n.q9)(this.interpolatePoints[i][0],this.interpolatePoints[i][1],e);return s.context=t.context,s}),this.clipRange){if(this.shrinkClipRange)return void(t?(i.points=this.toPoints,i.clipRange=1):(i.points=this.fromPoints,i.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*e));this.target.setAttributes({clipRange:this.clipRange+(1-this.clipRange)*e})}if(this.segmentsCache&&this.to.segments){let t=0,e=this.to.segments.map((e,i)=>{let s=t+this.segmentsCache[i],a=this.points.slice(t,s);return t=s,Object.assign(Object.assign({},e),{points:a})});this.target.attribute.segments=e}else this.target.attribute.points=this.points;this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}},198300:function(t,e,i){i.d(e,{B:()=>a});var s=i(672968);class a extends s.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e;super.onBind();let{diffAttrs:i={}}=null!=(t=this.target.context)?t:{},{options:s}=this.params;i=Object.assign({},i),(null==(e=null==s?void 0:s.excludeChannels)?void 0:e.length)&&s.excludeChannels.forEach(t=>{delete i[t]}),this.props=i}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i)}}},552029:function(t,e,i){i.d(e,{a:()=>n});var s=i(518224),a=i(695723),r=i(796241);class n{static registerBuiltInAnimate(t,e){n.builtInAnimateMap[t]=e}constructor(t){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=t}get started(){return this._started}onStart(t){t?(this._startCallbacks.push(t),this._started&&this._activeCount>0&&t()):this._startCallbacks.forEach(t=>{t()})}onEnd(t){t?this._endCallbacks.push(t):this._endCallbacks.forEach(t=>{t()})}_trackAnimation(t){this._animates.push(t),this._activeCount++,1!==this._activeCount||this._started||(this._started=!0,this.onStart()),t.onEnd(()=>{this._activeCount--;let e=this._animates.indexOf(t);e>=0&&this._animates.splice(e,1),0===this._activeCount&&this._started&&(this._started=!1,this.onEnd())})}parseParams(t,e,i){var s,o;let l=this.resolveValue(t.totalTime,void 0,void 0),h=this.resolveValue(t.startTime,void 0,0),u=Object.assign({},t);u.oneByOneDelay=0,u.startTime=h,u.totalTime=l;let p=this.resolveValue(t.oneByOne,i,!1);if(e){let t=u.timeSlices;(0,a.Z)(t)||(u.timeSlices=[t]);let e=0;u.timeSlices=u.timeSlices.map(t=>{let s=this.resolveValue(t.delay,i,0),a=this.resolveValue(t.delayAfter,i,0),r=this.resolveValue(t.duration,i,300);return e+=s+r+a,Object.assign(Object.assign({},t),{delay:s,delayAfter:a,duration:r})});let s=0;p&&(s="number"==typeof p?p:p?e:0),u.oneByOneDelay=s;let o=1;if(l){let t=e+s*(this._target.count-2);o=l?l/t:1}u.timeSlices=u.timeSlices.map(t=>{let e=t.effects;return Array.isArray(e)||(e=[e]),Object.assign(Object.assign({},t),{delay:t.delay*o,delayAfter:t.delayAfter*o,duration:t.duration*o,effects:e.map(t=>{var e,i;let s=null!=(e=t.custom)?e:n.builtInAnimateMap[null!=(i=t.type)?i:"fromTo"],a=s&&(0,r.Z)(s)?/^class\s/.test(Function.prototype.toString.call(s))?1:2:0;return Object.assign(Object.assign({},t),{custom:s,customType:a})})})}),u.oneByOneDelay=s*o,u.startTime=h*o}else{let e=this.resolveValue(t.delay,i,0),a=this.resolveValue(t.delayAfter,i,0),d=this.resolveValue(t.duration,i,300),c=0;p&&(c="number"==typeof p?p:p?e+a+d:0),u.oneByOneDelay=c,u.custom=null!=(s=t.custom)?s:n.builtInAnimateMap[null!=(o=t.type)?o:"fromTo"];let g=u.custom&&(0,r.Z)(u.custom)?/^class\s/.test(Function.prototype.toString.call(u.custom))?1:2:0;if(u.customType=g,l){let t=e+a+d+c*(this._target.count-2),i=l?l/t:1;u.delay=e*i,u.delayAfter=a*i,u.duration=d*i,u.oneByOneDelay=c*i,u.startTime=h}}return u}execute(t){Array.isArray(t)?t.forEach(t=>this._execute(t)):this._execute(t)}_execute(t){let e;if(t.selfOnly)return this._executeItem(t,this._target,0,1);let i="timeSlices"in t;i&&t.partitioner&&(e=(null!=e?e:this._target.getChildren()).filter(e=>{var i,s;return t.partitioner(null==(s=null==(i=e.context)?void 0:i.data)?void 0:s[0],e,{})})),i&&t.sort&&(e=null!=e?e:this._target.getChildren()).sort((e,i)=>{var s,a,r,n;return t.sort(null==(a=null==(s=e.context)?void 0:s.data)?void 0:a[0],null==(n=null==(r=i.context)?void 0:r.data)?void 0:n[0],e,i,{})});let s=i?(e,s,a)=>{let r=this.parseParams(t,i,e),n=this.executeTimelineItem(r,e,s,a);n&&this._trackAnimation(n)}:(e,s,a)=>{let r=this.parseParams(t,i,e),n=this.executeTypeConfigItem(r,e,s,a);n&&this._trackAnimation(n)};e?e.forEach((t,i)=>s(t,i,e.length)):this._target.count<=1?s(this._target,0,1):this._target.forEachChildren((t,e)=>s(t,e,this._target.count-1))}executeTypeConfigItem(t,e,i,s){var a,n,o,l,h,u,p,d;let{type:c="fromTo",channel:g,customParameters:f,easing:m="linear",delay:v=0,delayAfter:y=0,duration:x=300,startTime:A=0,oneByOneDelay:b=0,loop:T,bounce:_,priority:S=0,options:w,custom:C,customType:O,controlOptions:P}=t,E=e.animate();E.priority=S;let I=(0,r.Z)(v)?v(null==(n=null==(a=e.context)?void 0:a.data)?void 0:n[0],e,{}):v,D=null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],M=null==(h=e.context)?void 0:h.indexKey;D&&M&&(i=null!=(u=D[M])?u:i),E.startAt(A);let B=i*b+I;B>0&&E.wait(B);let R=null,k=t.to,F=t.from;k||(R||(R=this.createPropsFromChannel(g,e)),k=R.props),F||(R||(R=this.createPropsFromChannel(g,e)),F=R.from),this._handleRunAnimate(E,C,O,F,k,x,m,f,P,w,c,e);let U=0;b&&(U=b*(s-i-1));let L=(0,r.Z)(y)?y(null==(d=null==(p=e.context)?void 0:p.data)?void 0:d[0],e,{}):y;return L>0&&(U+=L),U>0&&E.wait(U),T&&T>0&&E.loop(T),_&&E.bounce(!0),E}_handleRunAnimate(t,e,i,s,a,n,o,l,h,u,p,d){var c,g,f,m,v,y,x,A;if(e&&i){let p=this.resolveValue(l,d);"function"==typeof p&&(p=p(null==(g=null==(c=d.context)?void 0:c.data)?void 0:g[0],d,{})),p=Object.assign({width:(null==(f=d.stage)?void 0:f.width)||0,height:(null==(m=d.stage)?void 0:m.height)||0,group:this._target.parent},p);let b=(0,r.Z)(u)?u.call(null,null!=(y=p&&(null==(v=p.data)?void 0:v[0]))?y:null==(A=null==(x=d.context)?void 0:x.data)?void 0:A[0],d,p):u;p.options=b,p.controlOptions=h,1===i?this.createCustomAnimation(t,e,s,a,n,o,p):2===i&&this.createCustomInterpolatorAnimation(t,e,a,n,o,p)}else"to"===p?t.to(a,n,o):"from"===p&&t.from(a,n,o)}executeTimelineItem(t,e,i,s){var a,r,n,o;let{timeSlices:l,startTime:h=0,loop:u,bounce:p,oneByOneDelay:d,priority:c,controlOptions:g}=t,f=null==(r=null==(a=e.context)?void 0:a.data)?void 0:r[0],m=null==(n=e.context)?void 0:n.indexKey;f&&m&&(i=null!=(o=f[m])?o:i);let v=e.animate();return v.priority=c,v.startAt(h),v.wait(i*d),u&&u>0&&v.loop(u),p&&v.bounce(!0),(Array.isArray(l)?l:[l]).forEach(t=>{this.applyTimeSliceToAnimate(t,v,e,g)}),d&&v.wait(d*(s-i-1)),v}applyTimeSliceToAnimate(t,e,i,s){var a,o,l,h;let{effects:u,duration:p=300,delay:d=0,delayAfter:c=0}=t,g=(0,r.Z)(d)?d(null==(o=null==(a=i.context)?void 0:a.data)?void 0:o[0],i,{}):d,f=(0,r.Z)(c)?c(null==(h=null==(l=i.context)?void 0:l.data)?void 0:h[0],i,{}):c;g>0&&e.wait(g),(Array.isArray(u)?u:[u]).forEach(t=>{var a;let{type:r="fromTo",channel:o,customParameters:l,easing:h="linear",options:u}=t,d=null,c=t.to,g=t.from;c||(d||(d=this.createPropsFromChannel(o,i)),c=d.props),g||(d||(d=this.createPropsFromChannel(o,i)),g=d.from);let f=null!=(a=t.custom)?a:n.builtInAnimateMap[r],m=t.customType;this._handleRunAnimate(e,f,m,g,c,p,h,l,s,u,r,i)}),f>0&&e.wait(f)}createCustomInterpolatorAnimation(t,e,i,s,a,r){let n={};Object.keys(i).forEach(e=>{n[e]=t.target.getComputedAttribute(e)}),t.interpolateUpdateFunction=(i,s,a,n,o)=>{e(a,i,s,n,o,t.target,r)},t.to(i,s,a)}createCustomAnimation(t,e,i,s,a,r,n){let o=new e(i,s,a,r,n);t.play(o)}createPropsFromChannel(t,e){let i={},s=null;return t&&(Array.isArray(t)?t.forEach(t=>{var s,a;let r=null==(a=null==(s=e.context)?void 0:s.diffAttrs)?void 0:a[t];void 0!==r&&(i[t]=r)}):Object.keys(t).forEach(a=>{var r,n,o,l;let h=t[a];void 0!==h.to&&("function"==typeof h.to?i[a]=h.to(null==(n=null==(r=e.context)?void 0:r.data)?void 0:n[0],e,{}):i[a]=h.to),void 0!==h.from&&(s||(s={}),"function"==typeof h.from?s[a]=h.from(null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],e,{}):s[a]=h.from)})),{from:s,props:i}}resolveValue(t,e,i){var s,a;return void 0===t?i:"function"==typeof t&&e?t(null==(a=null==(s=e.context)?void 0:s.data)?void 0:a[0],e,{}):t}executeItem(t,e,i=0,s=1){return Array.isArray(t)?t.map(t=>this._executeItem(t,e,i,s)).filter(Boolean):[this._executeItem(t,e,i,s)].filter(Boolean)}_executeItem(t,e,i=0,s=1){if(!e)return null;let a="timeSlices"in t,r=null,n=this.parseParams(t,a);return(r=a?this.executeTimelineItem(n,e,i,s):this.executeTypeConfigItem(n,e,i,s))&&this._trackAnimation(r),r}stop(t,e=!0){for(;this._animates.length>0;){let i=this._animates.pop();!1===e&&(i.status=s.t.END),null==i||i.stop(t)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,e&&this.onEnd())}}n.builtInAnimateMap={}},409194:function(t,e,i){i.d(e,{d:()=>D});var s=i(513116),a=i(612430);class r{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return r.instance||(r.instance=new r),r.instance}registerDefaultTransitions(){this.registerTransition("appear","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("appear","appear",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("appear","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("appear","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("normal","normal",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("normal","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("exit","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","enter",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","exit",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("enter","enter",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("enter","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("disappear","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("disappear","appear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("update","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("state","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","exit",()=>({allowTransition:!0,stopOriginalTransition:!0}))}isTransitionAllowed(t,e,i){var s,a,r,n;let o=null==(s=this.transitions.get(t))?void 0:s.get(e);return o||(o=null==(a=this.transitions.get(t))?void 0:a.get("*"))||(o=null==(r=this.transitions.get("*"))?void 0:r.get(e))||(o=null==(n=this.transitions.get("*"))?void 0:n.get("*"))?o(i,t):{allowTransition:!0,stopOriginalTransition:!0}}registerTransition(t,e,i){let s=this.transitions.get(t);s||(s=new Map,this.transitions.set(t,s)),s.set(e,i)}}r.getInstance();var n=i(552029),o=i(695723);let l="appear",h="disappear",u="update",p="highlight",d="unhighlight";class c{constructor(t){this.graphic=t}registerState(t){this.states||(this.states=new Map),this.states.set(t.name,t)}clearStates(){var t;null==(t=this.states)||t.clear()}}class g{constructor(t){this.stateList=null,this.graphic=t}applyState(t,e,i){let s=r.getInstance(),a=[],l=[];if(this.stateList&&this.stateList.length?t.forEach((t,i)=>{let r={allowTransition:!0};this.stateList.forEach(e=>{let i=s.isTransitionAllowed(e.state,t,this.graphic);r.allowTransition=r.allowTransition&&i.allowTransition}),r.allowTransition&&(l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new n.a(this.graphic)}),this.stateList.forEach(e=>{s.isTransitionAllowed(e.state,t,this.graphic).stopOriginalTransition&&a.push(e)}))}):t.forEach((t,i)=>{l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new n.a(this.graphic)})}),a.forEach(t=>{t.executor.stop(null,!1)}),l.length){l[0].executor.execute(l[0].animationConfig);for(let t=0;t<l.length;t++){let e=l[t+1],s=l[t];s.executor.onEnd(()=>{e&&e.executor.execute(e.animationConfig),this.stateList=this.stateList.filter(t=>t!==s),t===l.length-1&&i&&i(!1)})}}else i&&i(!0);this.stateList?this.stateList=this.stateList.filter(t=>!a.includes(t)):this.stateList=[],this.stateList.push(...l)}applyAppearState(t,e){this.applyState([l],[{name:l,animation:t}],e)}applyDisappearState(t,e){this.applyState([h],[{name:h,animation:t}],e)}applyUpdateState(t,e){this.applyState([u],[{name:u,animation:t}],e)}applyHighlightState(t,e){this.applyState([p],[{name:p,animation:t}],e)}applyUnhighlightState(t,e){this.applyState([d],[{name:d,animation:t}],e)}stopState(t,e){var i;let s=null==(i=this.stateList)?void 0:i.find(e=>e.state===t);s&&s.executor.stop(e)}clearState(){var t;null==(t=this.stateList)||t.forEach(t=>{t.executor.stop(null,!1)}),this.stateList=null}reApplyState(t){var e;let i=null==(e=this.stateList)?void 0:e.find(e=>e.state===t);if(i&&i.executor.started){let t=this.stateList.slice();i.executor.stop(),this.stateList=t,i.executor.execute(i.animationConfig)}}}class f{_getAnimationStateManager(t){return t._animationStateManager||(t._animationStateManager=new g(t)),t._animationStateManager}_getAnimationStateStore(t){return t._animationStateStore||(t._animationStateStore=new c(t)),t._animationStateStore}registerAnimationState(t){return this._getAnimationStateStore(this).registerState(t),this}applyAnimationState(t,e,i){return this._getAnimationStateManager(this).applyState(t,e,i),this}applyAppearState(t,e){return this._getAnimationStateManager(this).applyAppearState(t,e),this}applyDisappearState(t,e){return this._getAnimationStateManager(this).applyDisappearState(t,e),this}applyUpdateState(t,e){return this._getAnimationStateManager(this).applyUpdateState(t,e),this}applyHighlightState(t,e){return this._getAnimationStateManager(this).applyHighlightState(t,e),this}applyUnhighlightState(t,e){return this._getAnimationStateManager(this).applyUnhighlightState(t,e),this}stopAnimationState(t,e,i=!1){return this._getAnimationStateManager(this).stopState(t,e),i&&this.isContainer&&this.forEachChildren(s=>{s.stopAnimationState(t,e,i)}),this}clearAnimationStates(){let t=this._animationStateManager;return t&&t.clearState(),this}reApplyAnimationState(t,e=!1){let i=this._animationStateManager;return i&&i.reApplyState(t),e&&this.isContainer&&this.forEachChildren(i=>{i.reApplyAnimationState(t,e)}),this}static extend(t){return(new f)._getAnimationStateManager(t),t}}var m=i(892515),v=i(496270),y=i(518224),x=i(421883),A=i.n(x);class b extends A(){get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=v.R.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(t){let e=this.head,i=0;for(;e;){let s=e.next;t(e.animate,i),i++,e=s}}addAnimate(t){let e={animate:t,next:null,prev:null};this.head?this.tail&&(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.animateMap.set(t,e),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));let e=t*this._playSpeed;this._currentTime+=e,this.forEachAccessAnimate((t,i)=>{t.status===y.t.END?this.removeAnimate(t,!0):t.status!==y.t.RUNNING&&t.status!==y.t.INITIAL||t.advance(e)}),0===this._animateCount&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate(t=>{t.release()}),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(t,e=!0){let i=this.animateMap.get(t);i&&(e&&(t._onRemove&&t._onRemove.forEach(t=>t()),t.release()),i.prev?i.prev.next=i.next:this.head=i.next,i.next?i.next.prev=i.prev:this.tail=i.prev,this.animateMap.delete(t),this._animateCount--,t.getStartTime()+t.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate(t=>{this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())})}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(t){this._playSpeed=t}getPlayState(){return this.paused?"paused":0===this.animateCount?"stopped":"playing"}setStartTime(t){this._startTime=t}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(t){this._currentTime=t}}let T=new b;T.isGlobal=!0;class _{constructor(t=v.R.GenAutoIncrementId(),e=T,i){this.id=t,this.status=y.t.INITIAL,this._timeline=e,e.addAnimate(this),this.slience=i,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(t){this._timeline=t}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(t){return this.target=t,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove(()=>{this.stop(),this.target.animates.delete(this.id)}),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(t,e=300,i="linear"){let s=new m.h(y.T.to,t,e,i);return s.bind(this.target,this),this.updateStepAfterAppend(s),this}wait(t){let e=new m.o(y.T.wait,{},t,"linear");return e.bind(this.target,this),this.updateStepAfterAppend(e),this}updateStepAfterAppend(t){this._firstStep?this._lastStep.append(t):this._firstStep=t,this._lastStep=t,this.parseStepProps(t),this.updateDuration()}parseStepProps(t){this._lastStep&&(t.propKeys=t.propKeys||Object.keys(t.props),Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let t=this._firstStep;for(;t;)Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}),t=t.next}from(t,e=300,i="linear"){let s=new m.h(y.T.from,t,e,i);return this._firstStep?this._lastStep.append(s):this._firstStep=s,this._lastStep=s,this.updateDuration(),this}play(t){return t.bind(this.target,this),this.updateStepAfterAppend(t),this}pause(){this.status===y.t.RUNNING&&(this.status=y.t.PAUSED)}resume(){this.status===y.t.PAUSED&&(this.status=y.t.RUNNING)}onStart(t){var e;t?(this._onStart||(this._onStart=[]),this._onStart.push(t)):(null==(e=this._onStart)||e.forEach(t=>t()),Object.keys(this._endProps).forEach(t=>{this._startProps[t]=this.target.getComputedAttribute(t)}))}onEnd(t){var e;t?(this._onEnd||(this._onEnd=[]),this._onEnd.push(t)):null==(e=this._onEnd)||e.forEach(t=>t())}onFrame(t){t&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(t))}onRemove(t){var e;t?(this._onRemove||(this._onRemove=[]),this._onRemove.push(t)):null==(e=this._onRemove)||e.forEach(t=>t())}preventAttr(t){this._preventAttrs.add(t),delete this._startProps[t],delete this._endProps[t];let e=this._firstStep;for(;e;)e.deleteSelfAttr(t),e=e.next}preventAttrs(t){t.forEach(t=>this._preventAttrs.add(t))}validAttr(t){return!this._preventAttrs.has(t)}runCb(t){var e;return null==(e=this._lastStep)||e.onEnd(t),this}startAt(t){return this._startTime=t,this}customInterpolate(t,e,i,s,a,r){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(t){let e=this._firstStep;for(;e;)e.stop(),e=e.next;this.status!==y.t.END&&this.onEnd(),this.status=y.t.END,this.target&&("start"===t?this.target.setAttributes(this._startProps):"end"===t?this.target.setAttributes(this._endProps):t&&this.target.setAttributes(t))}release(){this.status=y.t.END,this._onRemove&&this._onRemove.forEach(t=>t()),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep(t=>{t.release()})}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(t){if(!t||0===t.length)return this;let e=0;return t.forEach(t=>{let i=t.getStartTime()+t.getTotalDuration();e=Math.max(e,i)}),this.startAt(e)}after(t){if(!t)return this;let e=t.getStartTime()+t.getTotalDuration();return this.startAt(e)}parallel(t){return t&&this.startAt(t.getStartTime()),this}loop(t){return!0===t?t=1/0:!1===t&&(t=0),this._loopCount=t,this.updateDuration(),this}bounce(t){return this._bounce=t,this}advance(t){var e,i,s;if(this.status===y.t.END)return void console.warn("aaa \u52A8\u753B\u5DF2\u7ECF\u7ED3\u675F\uFF0C\u4E0D\u80FD\u63A8\u8FDB");let a=this.currentTime+t;if(a<this._startTime)return void(this.currentTime=a);if(a>=this._startTime+this._totalDuration)return null==(e=this._lastStep)||e.onUpdate(!0,1,{}),null==(i=this._lastStep)||i.onEnd(),this.onEnd(),void(this.status=y.t.END);this.status=y.t.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=a;let r=a-this._startTime,n=!1,o=!1;if(this._loopCount>0){r=(a-this._startTime)%this._duration;let t=Math.floor((a-this._startTime)/this._duration);n=t>this._currentLoop,this._currentLoop=t,(o=this._bounce&&t%2==1)&&(r=this._duration-r)}n&&!o&&this.target.setAttributes(this._startProps);let l=null;if(this._lastStep===this._firstStep)l=this._firstStep;else{let t=this._firstStep;for(;t;){let e=t.getStartTime(),i=t.getDuration();if(r>=e&&r<=e+i){l=t;break}t=t.next}}if(!l)return;l!==this.lastRunStep&&(null==(s=this.lastRunStep)||s.onEnd()),this.lastRunStep=l;let h=(r-l.getStartTime())/l.getDuration(),u=h>=1;l.update(u,h,{}),u&&(l.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(t){let e=this._firstStep;for(;e;)t(e),e=e.next}}var S=i(967955),w=i(509443),C=i(894442);let O=new S.A;class P{constructor(){this.released=!1}tick(t,e){O.addAnimationFrameCb(()=>{if(!this.released)return e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class E extends A(){constructor(t){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(t,e)=>{let{once:i=!1}=null!=e?e:{};if(this.ifCanStop())return this.stop(),!1;let s=t.getTime();this._lastTickTime=s,this.lastFrameTime<0&&(this.lastFrameTime=s-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));let a=s-this.lastFrameTime,r=this.checkSkip(a);return r||(this._handlerTick(a),this.lastFrameTime=s,this.frameTimeHistory.push(this.lastFrameTime)),i||t.tick(this.interval,this.handleTick),!r},this._handlerTick=t=>{this.status===w.Q.RUNNING&&(this.tickCounts++,this.timelines.forEach(e=>{e.tick(t)}),this.emit("tick",t))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=t,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(t){this.stage=t}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=w.Q.INITIAL,C.w.global.hooks.onSetEnv.tap("graph-ticker",()=>{this.initHandler(!1)}),C.w.global.env&&this.initHandler(!1)}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(t=!1){this.setupTickHandler(t)}setupTickHandler(t=!1){if(!t&&this.tickerHandler)return!0;let e=new P;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0}setInterval(t){this.interval=t,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(t){this.setInterval(Math.floor(1e3/t))}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,t=>this.handleTick(t,{once:!0}))}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==w.Q.INITIAL&&(this.status=w.Q.PAUSE,!0)}resume(){return this.status!==w.Q.INITIAL&&(this.status=w.Q.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every(t=>!t.isRunning())))||!1}start(t=!1){return!(this.status===w.Q.RUNNING||!this.tickerHandler||!t&&(this.status===w.Q.PAUSE||this.ifCanStop()))&&(this.status=w.Q.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=w.Q.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===w.Q.INITIAL&&this.timelines.some(t=>t.isRunning())?this.start():this.status===w.Q.RUNNING&&this.timelines.every(t=>!t.isRunning())&&this.stop()}release(){var t;this.stop(),this.timelines=[],null==(t=this.tickerHandler)||t.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(t){var e,i,s;return"performance"!==(null==(s=null==(i=null==(e=this.stage)?void 0:e.params)?void 0:i.optimize)?void 0:s.tickRenderMode)&&t<this.interval+2*(Math.random()-.5)*this._jitter}}class I{getAttributes(t=!1){return t&&this.finalAttribute?this.finalAttribute:this.attribute}animate(t){var e,i,s;let a=new _(null==t?void 0:t.id,null!=(i=null!=(e=null==t?void 0:t.timeline)?e:this.stage&&this.stage.getTimeline())?i:T,null==t?void 0:t.slience);if(a.bind(this),t){let{onStart:e,onEnd:i,onRemove:s}=t;null!=e&&a.onStart(e),null!=i&&a.onEnd(i),null!=s&&a.onRemove(s)}return null==(s=this.stage)||s.ticker.start(),a}createTimeline(){return new b}createTicker(t){return new E(t)}setFinalAttributes(t){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,t)}initFinalAttributes(t){this.finalAttribute=t}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new n.a(this))}executeAnimation(t){return this.initAnimateExecutor(),this._animateExecutor.execute(t),this}executeAnimations(t){return this.initAnimateExecutor(),t.forEach(t=>{this._animateExecutor.execute(t)}),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(t,e=!1){return!e&&this.finalAttribute?this.finalAttribute[t]:this.attribute[t]}pauseAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.pause()),t&&this.isContainer&&this.forEachChildren(e=>{e.pauseAnimation(t)})}resumeAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.resume()),t&&this.isContainer&&this.forEachChildren(e=>{e.resumeAnimation(t)})}stopAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.stop()),t&&this.isContainer&&this.forEachChildren(e=>{e.stopAnimation(t)})}}function D(){(0,a.jB)(s.zs,f),(0,a.jB)(s.zs,I)}},892515:function(t,e,i){i.d(e,{h:()=>c,o:()=>g});var s=i(496270),a=i(589131),r=i(408830);class n{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0===t?e:t<0?e*(-(e*t)+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return 0===t?0:Math.pow(2,10*t-10)}static expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}static expoInOut(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-n.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)}}static getElasticOut(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*r.f7/e)+1}}static getElasticInOut(t,e){return function(i){let s=e/r.f7*Math.asin(1/t);return(i*=2)<1?-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5+1}}static registerFunc(t,e){n[t]=e}}n.quadIn=n.getPowIn(2),n.quadOut=n.getPowOut(2),n.quadInOut=n.getPowInOut(2),n.cubicIn=n.getPowIn(3),n.cubicOut=n.getPowOut(3),n.cubicInOut=n.getPowInOut(3),n.quartIn=n.getPowIn(4),n.quartOut=n.getPowOut(4),n.quartInOut=n.getPowInOut(4),n.quintIn=n.getPowIn(5),n.quintOut=n.getPowOut(5),n.quintInOut=n.getPowInOut(5),n.backIn=n.getBackIn(1.7),n.backOut=n.getBackOut(1.7),n.backInOut=n.getBackInOut(1.7),n.elasticIn=n.getElasticIn(1,.3),n.elasticOut=n.getElasticOut(1,.3),n.elasticInOut=n.getElasticInOut(1,.3*1.5),n.easeInOutQuad=t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),n.easeOutElastic=t=>{let e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},n.easeInOutElastic=t=>{let e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1};for(let t=0;t<10;t++)n[`flicker${t}`]=e=>(function(t,e){let i=1/e,s=1;for(;t>i;)t-=i,s*=-1;let a=s*t/i;return a>0?a:1+a})(e,t);for(let t=2;t<10;t++)n[`aIn${t}`]=e=>t*e*e+(1-t)*e;var o=i(324759),l=i(917486);let h=new class{constructor(){this.opacity=(t,e,i,s,a,r)=>{r.attribute.opacity=e+(i-e)*s},this.baseOpacity=(t,e,i,s,a,r)=>{r.attribute.baseOpacity=e+(i-e)*s},this.fillOpacity=(t,e,i,s,a,r)=>{r.attribute.fillOpacity=e+(i-e)*s},this.strokeOpacity=(t,e,i,s,a,r)=>{r.attribute.strokeOpacity=e+(i-e)*s},this.zIndex=(t,e,i,s,a,r)=>{r.attribute.zIndex=e+(i-e)*s},this.backgroundOpacity=(t,e,i,s,a,r)=>{r.attribute.backgroundOpacity=e+(i-e)*s},this.shadowOffsetX=(t,e,i,s,a,r)=>{r.attribute.shadowOffsetX=e+(i-e)*s},this.shadowOffsetY=(t,e,i,s,a,r)=>{r.attribute.shadowOffsetY=e+(i-e)*s},this.shadowBlur=(t,e,i,s,a,r)=>{r.attribute.shadowBlur=e+(i-e)*s},this.fill=(t,e,i,s,a,r)=>{r.attribute.fill=(0,o.BM)(e,i,s,!1)},this.fillPure=(t,e,i,s,a,r)=>{r.attribute.fill=a.fromParsedProps.fill?(0,o.Ib)(a.fromParsedProps.fill,a.toParsedProps.fill,s):a.toParsedProps.fill},this.stroke=(t,e,i,s,a,r)=>{r.attribute.stroke=(0,o.BM)(e,i,s,!1)},this.strokePure=(t,e,i,s,a,r)=>{r.attribute.stroke=a.fromParsedProps.stroke?(0,o.Ib)(a.fromParsedProps.stroke,a.toParsedProps.stroke,s):a.toParsedProps.stroke},this.width=(t,e,i,s,a,r)=>{r.attribute.width=e+(i-e)*s,r.addUpdateBoundTag()},this.height=(t,e,i,s,a,r)=>{r.attribute.height=e+(i-e)*s,r.addUpdateBoundTag()},this.x=(t,e,i,s,a,r)=>{r.attribute.x=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.y=(t,e,i,s,a,r)=>{r.attribute.y=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.dx=(t,e,i,s,a,r)=>{r.attribute.dx=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.dy=(t,e,i,s,a,r)=>{r.attribute.dy=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.angle=(t,e,i,s,a,r)=>{r.attribute.angle=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.scaleX=(t,e,i,s,a,r)=>{r.attribute.scaleX=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.scaleY=(t,e,i,s,a,r)=>{r.attribute.scaleY=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.lineWidth=(t,e,i,s,a,r)=>{r.attribute.lineWidth=e+(i-e)*s,r.addUpdateBoundTag()},this.startAngle=(t,e,i,s,a,r)=>{r.attribute.startAngle=e+(i-e)*s,r.addUpdateBoundTag()},this.endAngle=(t,e,i,s,a,r)=>{r.attribute.endAngle=e+(i-e)*s,r.addUpdateBoundTag()},this.radius=(t,e,i,s,a,r)=>{r.attribute.radius=e+(i-e)*s,r.addUpdateBoundTag()},this.outerRadius=(t,e,i,s,a,r)=>{r.attribute.outerRadius=e+(i-e)*s,r.addUpdateBoundTag()},this.innerRadius=(t,e,i,s,a,r)=>{r.attribute.innerRadius=e+(i-e)*s,r.addUpdateBoundTag()},this.size=(t,e,i,s,a,r)=>{r.attribute.size=e+(i-e)*s,r.addUpdateBoundTag()},this.points=(t,e,i,s,a,r)=>{r.attribute.points=(0,l.SA)(e,i,s),r.addUpdateBoundTag()}}};function u(t,e,i,s,a,r){if(Number.isFinite(i)&&Number.isFinite(e))return r.attribute[t]=e+(i-e)*s,!0;if(Array.isArray(i)&&Array.isArray(e)&&i.length===e.length){let a=[],n=!0;for(let t=0;t<i.length;t++){let r=e[t],o=r+(i[t]-r)*s;if(!Number.isFinite(o)){n=!1;break}a.push(o)}return n&&(r.attribute[t]=a),!0}return!1}var p=i(83624);function d(){}class c{constructor(t,e,i,a){var r;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=t,this.props=e,this.duration=i,this.easing=a?"function"==typeof a?a:null!=(r=n[a])?r:n.linear:n.linear,"wait"===t&&(this.onUpdate=d),this.id=s.R.GenAutoIncrementId(),this.syncAttributeUpdate=d}bind(t,e){this.target=t,this.animate=e,this.onBind(),this.syncAttributeUpdate()}append(t){this.next=t,t.prev=this,t.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let t=this.next,e=this._startTime+this.duration;for(;t;)t.setStartTime(e,!1),e+=t.duration,t=t.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(t,e=!0){this.duration=t,e&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;let t=[];this.propKeys.forEach(e=>{if("fill"===e||"stroke"===e){let i=this.fromProps[e],s=this.props[e];if((0,p.Z)(i)&&(0,p.Z)(s)){let r=a.VH.Get(i,a.Mr.Color255),n=a.VH.Get(s,a.Mr.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[e]=r,this.toParsedProps[e]=n,t.push(h["fill"===e?"fillPure":"strokePure"])}else h[e]?t.push(h[e]):t.push(u)}else h[e]?t.push(h[e]):t.push(u)}),this.interpolateUpdateFunctions=t}setStartTime(t,e=!0){this._startTime=t,e&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){"glyph"===this.target.type&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.fromProps[e]=null!=(i=this.fromProps[e])?i:t[e]}),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){let t=this.animate;this.target.animates.forEach(e=>{if(e===t||e.priority>t.priority||e.priority===1/0)return;let i=e.getStartProps();this.propKeys.forEach(t=>{null!=i[t]&&e.preventAttr(t)})})}deleteSelfAttr(t){var e;delete this.props[t],this.fromProps&&delete this.fromProps[t];let i=this.propKeys.indexOf(t);-1!==i&&(this.propKeys.splice(i,1),null==(e=this.interpolateUpdateFunctions)||e.splice(i,1))}trySyncStartProps(){this.propKeys.forEach(t=>{this.fromProps[t]=this.animate.target.getComputedAttribute(t)})}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}onUpdate(t,e,i){}onEnd(t){this.target.setAttributes(this.props),t?this._endCb=t:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class g extends c{constructor(t,e,i,s){super(t,e,i,s)}onStart(){super.onStart();let t=this.getFromProps();this.target.setAttributes(t)}update(t,e,i){this.onStart()}determineInterpolateUpdateFunction(){}}},767008:function(t,e,i){i.d(e,{r:()=>o});var s=i(780702),a=i(203922),r=i(817618),n=i(841400);class o{constructor(t=a.R.GenAutoIncrementId(),e=n.P,i){this.id=t,this.status=r.t.INITIAL,this._timeline=e,e.addAnimate(this),this.slience=i,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(t){this._timeline=t}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(t){return this.target=t,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove(()=>{this.stop(),this.target.animates.delete(this.id)}),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(t,e=300,i="linear"){let a=new s.h(r.T.to,t,e,i);return a.bind(this.target,this),this.updateStepAfterAppend(a),this}wait(t){let e=new s.o(r.T.wait,{},t,"linear");return e.bind(this.target,this),this.updateStepAfterAppend(e),this}updateStepAfterAppend(t){this._firstStep?this._lastStep.append(t):this._firstStep=t,this._lastStep=t,this.parseStepProps(t),this.updateDuration()}parseStepProps(t){this._lastStep&&(t.propKeys=t.propKeys||Object.keys(t.props),Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let t=this._firstStep;for(;t;)Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}),t=t.next}from(t,e=300,i="linear"){let a=new s.h(r.T.from,t,e,i);return this._firstStep?this._lastStep.append(a):this._firstStep=a,this._lastStep=a,this.updateDuration(),this}play(t){return t.bind(this.target,this),this.updateStepAfterAppend(t),this}pause(){this.status===r.t.RUNNING&&(this.status=r.t.PAUSED)}resume(){this.status===r.t.PAUSED&&(this.status=r.t.RUNNING)}onStart(t){var e;t?(this._onStart||(this._onStart=[]),this._onStart.push(t)):(null==(e=this._onStart)||e.forEach(t=>t()),Object.keys(this._endProps).forEach(t=>{this._startProps[t]=this.target.getComputedAttribute(t)}))}onEnd(t){var e;t?(this._onEnd||(this._onEnd=[]),this._onEnd.push(t)):null==(e=this._onEnd)||e.forEach(t=>t())}onFrame(t){t&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(t))}onRemove(t){var e;t?(this._onRemove||(this._onRemove=[]),this._onRemove.push(t)):null==(e=this._onRemove)||e.forEach(t=>t())}preventAttr(t){this._preventAttrs.add(t),delete this._startProps[t],delete this._endProps[t];let e=this._firstStep;for(;e;)e.deleteSelfAttr(t),e=e.next}preventAttrs(t){t.forEach(t=>this._preventAttrs.add(t))}validAttr(t){return!this._preventAttrs.has(t)}runCb(t){var e;return null==(e=this._lastStep)||e.onEnd(t),this}startAt(t){return this._startTime=t,this}customInterpolate(t,e,i,s,a,r){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(t){let e=this._firstStep;for(;e;)e.stop(),e=e.next;this.status!==r.t.END&&this.onEnd(),this.status=r.t.END,this.target&&("start"===t?this.target.setAttributes(this._startProps):"end"===t?this.target.setAttributes(this._endProps):t&&this.target.setAttributes(t))}release(){this.status=r.t.END,this._onRemove&&this._onRemove.forEach(t=>t()),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep(t=>{t.release()})}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(t){if(!t||0===t.length)return this;let e=0;return t.forEach(t=>{let i=t.getStartTime()+t.getTotalDuration();e=Math.max(e,i)}),this.startAt(e)}after(t){if(!t)return this;let e=t.getStartTime()+t.getTotalDuration();return this.startAt(e)}parallel(t){return t&&this.startAt(t.getStartTime()),this}loop(t){return!0===t?t=1/0:!1===t&&(t=0),this._loopCount=t,this.updateDuration(),this}bounce(t){return this._bounce=t,this}advance(t){var e,i,s;if(this.status===r.t.END)return void console.warn("aaa \u52A8\u753B\u5DF2\u7ECF\u7ED3\u675F\uFF0C\u4E0D\u80FD\u63A8\u8FDB");let a=this.currentTime+t;if(a<this._startTime)return void(this.currentTime=a);if(a>=this._startTime+this._totalDuration)return null==(e=this._lastStep)||e.onUpdate(!0,1,{}),null==(i=this._lastStep)||i.onEnd(),this.onEnd(),void(this.status=r.t.END);this.status=r.t.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=a;let n=a-this._startTime,o=!1,l=!1;if(this._loopCount>0){n=(a-this._startTime)%this._duration;let t=Math.floor((a-this._startTime)/this._duration);o=t>this._currentLoop,this._currentLoop=t,(l=this._bounce&&t%2==1)&&(n=this._duration-n)}o&&!l&&this.target.setAttributes(this._startProps);let h=null;if(this._lastStep===this._firstStep)h=this._firstStep;else{let t=this._firstStep;for(;t;){let e=t.getStartTime(),i=t.getDuration();if(n>=e&&n<=e+i){h=t;break}t=t.next}}if(!h)return;h!==this.lastRunStep&&(null==(s=this.lastRunStep)||s.onEnd()),this.lastRunStep=h;let u=(n-h.getStartTime())/h.getDuration(),p=u>=1;h.update(p,u,{}),p&&(h.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(t){let e=this._firstStep;for(;e;)t(e),e=e.next}}},6387:function(t,e,i){i.d(e,{L:()=>r});var s=i(198937);class a{constructor(t){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=t}animate(t,e){return this.started?console.warn("Cannot add animations after animation has started"):this.tasks.push({graphic:t,config:e}),this}onStart(t){return this.onStartCallbacks.push(t),this}onEnd(t){return this.onEndCallbacks.push(t),this}onUpdate(t){return this.onUpdateCallbacks.push(t),this}start(){return this.started?console.warn("Animation has already started"):(this.started=!0,this.completed=0,this.onStartCallbacks.forEach(t=>t()),0===this.tasks.length?setTimeout(()=>{this.onEndCallbacks.forEach(t=>t())},0):this.tasks.forEach(t=>{let e=new s.a(t.graphic);e.onEnd(()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach(t=>t())});let i=e.executeItem(t.config,t.graphic);t.animate=i,i.forEach(t=>{this.totalDuration=Math.max(this.totalDuration,t.getStartTime()+t.getDuration())})})),this}deleteSelfAttr(t){this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.preventAttr(t))})}stop(t){return this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.stop(t))}),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach(t=>t()),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function r(t){return new a(t)}},661506:function(t,e,i){i.d(e,{Or:()=>r,_j:()=>n,rd:()=>a});var s=i(780702);class a extends s.h{constructor(t,e,i,s,a){super("customAnimate",e,i,s),this.type="customAnimate",this.customFrom=t,this.params=a,this.from=t,this.to=e}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.onUpdate(t,s,i),this.syncAttributeUpdate()}setProps(t){this.props=t,this.propKeys=Object.keys(t),this.animate.reSyncProps()}}class r extends a{completeBind(t){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(t.getDuration())}stop(){this._animator&&this._animator.stop()}}class n extends a{constructor(t,e,i,s,a){super(t,e,i,s,a),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0,this._beforeStageRender=()=>{if(!this.willCallBeforeStageRender)return;this.willCallBeforeStageRender=!1;let t=this.target.stage,e=t.window.getContext().canvas.nativeCanvas,i=this.beforeStageRender(t,e);i&&this.renderToStage(t,i)},this._afterStageRender=()=>{if(!this.willCallAfterStageRender)return;this.willCallAfterStageRender=!1;let t=this.target.stage,e=t.window.getContext().canvas.nativeCanvas,i=this.afterStageRender(t,e);i&&this.renderToStage(t,i)},this.props={}}beforeStageRender(t,e){return!1}afterStageRender(t,e){return!1}onFirstRun(){super.onFirstRun(),this.target.stage.setBeforeRender(this._beforeStageRender),this.target.stage.setAfterRender(this._afterStageRender),this.target.stage.disableDirtyBounds()}stop(){super.stop(),this.target.stage.removeBeforeRender(this._beforeStageRender),this.target.stage.removeAfterRender(this._afterStageRender)}onUpdate(t,e,i){super.onUpdate(t,e,i),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0}renderToStage(t,e){let i=t.window.getContext().canvas.nativeCanvas,s=i.getContext("2d");return!!s&&(s.clearRect(0,0,i.width,i.height),s.drawImage(e,0,0),i)}}},837054:function(t,e,i){i.d(e,{Hp:()=>tZ});var s=i(198937),a=i(661506);class r extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i;super.onBind();let s=this.target.getFinalAttribute(),a=null!=(t=this.target.attribute)?t:{},r={},n=null!=(e=this.from)?e:{};this.keys.forEach(t=>{var e,i,o;r[t]=null!=(e=null==s?void 0:s[t])?e:1,n[t]=null!=(o=null!=(i=n[t])?i:a[t])?o:0});let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),this.props=r,this.propKeys=this.keys,this.from=n,this.to=r,!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(n)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class n extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){super.onBind();let t=this.target.attribute,e={},i={};this.keys.forEach(s=>{var a;e[s]=0,i[s]=null!=(a=t[s])?a:1}),this.props=e,this.propKeys=this.keys,this.from=i,this.to=e,Object.assign(this.target.attribute,i),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class o extends r{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var t;super.onFirstRun();let{clipDimension:e}=(null==(t=this.params)?void 0:t.options)||{};e&&(this.target.attribute.clipRangeByDimension=e)}}class l extends n{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["clipRange"]}}class h extends r{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class u extends n{constructor(t,e,i,s,a){super(t,e,i,s,a),this.keys=["opacity","fillOpacity","strokeOpacity"]}}var p=i(704654);class d extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(t){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*t}updateEndAngle(t){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*t}updateAngle(t){this.updateStartAngle(t),this.updateEndAngle(t)}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdateShapeAndBoundsTag())}}class c extends d{onBind(){var t,e,i,s,a,r;super.onBind();let{from:n,to:o}=(s=this.target,a=this.params.options,this.params,!1!==(null!=(r=null==a?void 0:a.overall)&&r)?((t,e,i)=>{let s=t.getFinalAttribute();if(e&&"anticlockwise"===e.orient){let t=(0,p.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t,endAngle:t},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}}let a=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:a,endAngle:a},to:{startAngle:null==s?void 0:s.startAngle,endAngle:null==s?void 0:s.endAngle}}})(s,a):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"anticlockwise"===e.orient?{from:{startAngle:null==s?void 0:s.endAngle},to:{startAngle:null==s?void 0:s.startAngle}}:{from:{endAngle:null==s?void 0:s.startAngle},to:{endAngle:null==s?void 0:s.endAngle}}})(s,a)),l=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:n;this.props=o,this.propKeys=Object.keys(o).filter(t=>null!=o[t]),this.from=l,this.to=o;let h=this.target.getFinalAttribute();h&&this.target.setAttributes(h),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l),this.determineUpdateFunction()}}class g extends d{onBind(){var t,e,i;super.onBind();let{from:s,to:a}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?((t,e,i)=>{let s=t.attribute;if(e&&"anticlockwise"===e.orient){let t=(0,p.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:s.startAngle,endAngle:s.endAngle},to:{startAngle:t,endAngle:t}}}let a=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:s.startAngle,endAngle:s.endAngle},to:{startAngle:a,endAngle:a}}})(t,e):((t,e,i)=>{let s=t.attribute;return e&&"anticlockwise"===e.orient?{from:{startAngle:s.startAngle},to:{startAngle:null==s?void 0:s.endAngle}}:{from:{endAngle:s.endAngle},to:{endAngle:null==s?void 0:s.startAngle}}})(t,e));this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=null!=s?s:this.target.attribute,this.to=a,this.determineUpdateFunction()}}var f=i(364776);class m extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i;super.onBind();let{from:s,to:a}=((t,e,i)=>{let s=t.getFinalAttribute();switch(null==e?void 0:e.direction){case"x":{let t=s.x,e=s.x1,i=s.width;return{from:(0,f.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0},to:{x:t,x1:e,width:i}}}case"y":{let t=s.y,e=s.y1,i=s.height;return{from:(0,f.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0},to:{y:t,y1:e,height:i}}}default:{let t=s.x,e=s.x1,i=s.width,a=s.y,r=s.y1,n=s.height,o={};return(0,f.Z)(i)?(o.x=t+i/2,o.width=0,o.x1=void 0):(o.x=(t+e)/2,o.x1=(t+e)/2,o.width=void 0),(0,f.Z)(n)?(o.y=a+n/2,o.height=0,o.y1=void 0):(o.y=(a+r)/2,o.y1=(a+r)/2,o.height=void 0),{from:o,to:{x:t,y:a,x1:e,y1:r,width:i,height:n}}}}})(this.target,this.params.options,this.params),r=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:s;this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=r,this.to=a;let n=this.target.getFinalAttribute();n&&this.target.setAttributes(n),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(r)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class v extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){super.onBind();let{from:t,to:e}=((t,e,i)=>{let s=t.attribute;switch(null==e?void 0:e.direction){case"x":{let t=s.x,e=s.x1,i=s.width;return{to:(0,f.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0}}}case"y":{let t=s.y,e=s.y1,i=s.height;return{to:(0,f.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0}}}default:{let t=s.x,e=s.y,i=s.x1,a=s.y1,r=s.width,n=s.height,o={};return(0,f.Z)(r)?(o.x=t+r/2,o.width=0,o.x1=void 0):(o.x=(t+i)/2,o.x1=(t+i)/2,o.width=void 0),(0,f.Z)(n)?(o.y=e+n/2,o.height=0,o.y1=void 0):(o.y=(e+a)/2,o.y1=(e+a)/2,o.height=void 0),{to:o}}}})(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=null!=t?t:this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}var y=i(454326);class x extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n;super.onBind();let{from:o,to:l}=(s=this.target,a=this.params.options,r=this.params,!1!==(null!=(n=null==a?void 0:a.overall)&&n)?function(t,e,i){var s,a,r;let n,o=t.getFinalAttribute(),l=o.y,h=o.y1,u=o.height;return e&&"negative"===e.orient?(0,p.Z)(e.overall)?n=e.overall:i.group?(n=null!=(r=null!=(s=i.groupHeight)?s:null==(a=e.layoutRect)?void 0:a.height)?r:i.group.getBounds().height(),i.groupHeight=n):n=i.height:n=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0,{from:{y:n,y1:(0,y.Z)(h)?void 0:n,height:(0,y.Z)(u)?void 0:0},to:{y:l,y1:h,height:u}}}(s,a,r):function(t,e,i){let s=t.getFinalAttribute(),a=s.y,r=s.y1,n=s.height;if(e&&"negative"===e.orient){let t=(0,f.Z)(n)?Math.max(a,a+n):Math.max(a,r);return{from:{y:t,y1:(0,y.Z)(r)?void 0:t,height:(0,y.Z)(n)?void 0:0},to:{y:a,y1:r,height:n}}}let o=(0,f.Z)(n)?Math.min(a,a+n):Math.min(a,r);return{from:{y:o,y1:(0,y.Z)(r)?void 0:o,height:(0,y.Z)(n)?void 0:0},to:{y:a,y1:r,height:n}}}(s,a,0)),h=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:o;this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=h,this.to=l;let u=this.target.getFinalAttribute();u&&this.target.setAttributes(u),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(h)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class A extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s;super.onBind();let{from:a,to:r}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(s=null==e?void 0:e.overall)&&s)?function(t,e,i){var s,a,r;let n,o=t.getFinalAttribute(),l=o.y1,h=o.height;return e&&"negative"===e.orient?(0,p.Z)(e.overall)?n=e.overall:i.group?(n=null!=(r=null!=(s=i.groupHeight)?s:null==(a=e.layoutRect)?void 0:a.height)?r:i.group.getBounds().height(),i.groupHeight=n):n=i.height:n=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{y:n,y1:(0,y.Z)(l)?void 0:n,height:(0,y.Z)(h)?void 0:0}}}(t,e,i):function(t,e,i){let s=t.getFinalAttribute(),a=s.y,r=s.y1,n=s.height;if(e&&"negative"===e.orient){let t=(0,f.Z)(n)?Math.max(a,a+n):Math.max(a,r);return{to:{y:t,y1:(0,y.Z)(r)?void 0:t,height:(0,y.Z)(n)?void 0:0}}}let o=(0,f.Z)(n)?Math.min(a,a+n):Math.min(a,r);return{to:{y:o,y1:(0,y.Z)(r)?void 0:o,height:(0,y.Z)(n)?void 0:0}}}(t,e,0));this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=null!=a?a:this.target.attribute,this.to=r}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}var b=i(780949),T=i(89530);let _=(t,e,i)=>{let s=t.getFinalAttribute().points,a={x:0,y:0};return s.forEach(t=>{a.x+=t.x,a.y+=t.y}),a.x/=s.length,a.y/=s.length,e&&e.center&&((0,T.Z)(e.center.x)&&(a.x=e.center.x),(0,T.Z)(e.center.y)&&(a.y=e.center.y)),"area"===t.type&&(a.x1=a.x,a.y1=a.y),s.map(t=>Object.assign({},t,a))};class S extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){var s,a;let r=null==(s=this.from)?void 0:s.points,n=null==(a=this.to)?void 0:a.points;r&&n&&(this.target.attribute.points=r.map((t,i)=>(0,b.q9)(r[i],n[i],e)),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class w extends S{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:_(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class C extends S{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:s,to:a}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:_(t,e)}});this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=s||i,this.to=a}else this.valid=!1}}let O=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewWidth;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},i),{x:e,y:i.y,x1:e,y1:i.y1,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:!1!==i.defined})});class P extends S{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:O(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class E extends S{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:s,to:a}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:O(t,e)}});this.props=a,this.propKeys=Object.keys(a).filter(t=>null!=a[t]),this.from=s||i,this.to=a}else this.valid=!1}}let I=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewHeight;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},i),{x:i.x,y:e,x1:i.x1,y1:e,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:!1!==i.defined})});class D extends S{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=((t,e,i)=>{let s=t.getFinalAttribute();return{from:{points:I(t,e)},to:{points:s.points}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class M extends S{onBind(){var t,e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:i,to:s}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:I(t,e)}});this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=null!=i?i:this.target.attribute,this.to=s}else this.valid=!1}}class B extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class R extends B{onBind(){var t,e,i,s,a,r;super.onBind();let{from:n,to:o}=(s=this.target,a=this.params.options,this.params,!1!==(null!=(r=null==a?void 0:a.overall)&&r)?((t,e,i)=>{let s=t.getFinalAttribute(),a=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:a,outerRadius:a},to:{innerRadius:null==s?void 0:s.innerRadius,outerRadius:null==s?void 0:s.outerRadius}}})(s,a):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==s?void 0:s.outerRadius},to:{innerRadius:null==s?void 0:s.innerRadius}}:{from:{outerRadius:null==s?void 0:s.innerRadius},to:{outerRadius:null==s?void 0:s.outerRadius}}})(s,a)),l=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:n;this.props=o,this.propKeys=Object.keys(o).filter(t=>null!=o[t]),this.from=l,this.to=o;let h=this.target.getFinalAttribute();h&&this.target.setAttributes(h),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l)}}class k extends B{onBind(){var t,e,i;super.onBind();let{to:s}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?((t,e,i)=>{let s=t.getFinalAttribute(),a=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:null==s?void 0:s.innerRadius,outerRadius:null==s?void 0:s.outerRadius},to:{innerRadius:a,outerRadius:a}}})(t,e):((t,e,i)=>{let s=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==s?void 0:s.innerRadius},to:{innerRadius:null==s?void 0:s.outerRadius}}:{from:{outerRadius:null==s?void 0:s.outerRadius},to:{outerRadius:null==s?void 0:s.innerRadius}}})(t,e));this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=this.target.attribute,this.to=s}}class F extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n;super.onBind();let{from:o,to:l}=(s=this.target,a=this.params.options,r=this.params,!1!==(null!=(n=null==a?void 0:a.overall)&&n)?function(t,e,i){var s;let a,r=t.getFinalAttribute(),n=r.x,o=r.x1,l=r.width;return e&&"negative"===e.orient?(0,p.Z)(e.overall)?a=e.overall:i.group?(a=null!=(s=i.groupWidth)?s:i.group.getBounds().width(),i.groupWidth=a):a=i.width:a=(0,p.Z)(null==e?void 0:e.overall)?null==e?void 0:e.overall:0,{from:{x:a,x1:(0,y.Z)(o)?void 0:a,width:(0,y.Z)(l)?void 0:0},to:{x:n,x1:o,width:l}}}(s,a,r):function(t,e,i){let s=t.getFinalAttribute(),a=s.x,r=s.x1,n=s.width;if(e&&"negative"===e.orient){let t=(0,f.Z)(n)?Math.max(a,a+n):Math.max(a,r);return{from:{x:t,x1:(0,y.Z)(r)?void 0:t,width:(0,y.Z)(n)?void 0:0},to:{x:a,x1:r,width:n}}}let o=(0,f.Z)(n)?Math.min(a,a+n):Math.min(a,r);return{from:{x:o,x1:(0,y.Z)(r)?void 0:o,width:(0,y.Z)(n)?void 0:0},to:{x:a,x1:r,width:n}}}(s,a,0)),h=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:o;this.props=l,this.propKeys=Object.keys(l).filter(t=>null!=l[t]),this.from=h,this.to=l;let u=this.target.getFinalAttribute();u&&this.target.setAttributes(u),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(h)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class U extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s;super.onBind();let{from:a,to:r}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(s=null==e?void 0:e.overall)&&s)?function(t,e,i){var s;let a,r=t.getFinalAttribute(),n=r.x1,o=r.width;return e&&"negative"===e.orient?(0,p.Z)(e.overall)?a=e.overall:i.group?(a=null!=(s=i.groupWidth)?s:i.group.getBounds().width(),i.groupWidth=a):a=i.width:a=(0,p.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{x:a,x1:(0,y.Z)(n)?void 0:a,width:(0,y.Z)(o)?void 0:0}}}(t,e,i):function(t,e,i){let s=t.getFinalAttribute(),a=s.x,r=s.x1,n=s.width;if(e&&"negative"===e.orient){let t=(0,f.Z)(n)?Math.max(a,a+n):Math.max(a,r);return{to:{x:t,x1:(0,y.Z)(r)?void 0:t,width:(0,y.Z)(n)?void 0:0}}}let o=(0,f.Z)(n)?Math.min(a,a+n):Math.min(a,r);return{to:{x:o,x1:(0,y.Z)(r)?void 0:o,width:(0,y.Z)(n)?void 0:0}}}(t,e,0));this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=null!=a?a:this.target.attribute,this.to=r}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class L extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.fromText="",this.toText="",this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",void 0!==(null==a?void 0:a.showCursor)&&(this.showCursor=a.showCursor),void 0!==(null==a?void 0:a.cursorChar)&&(this.cursorChar=a.cursorChar),void 0!==(null==a?void 0:a.blinkCursor)&&(this.blinkCursor=a.blinkCursor),void 0!==(null==a?void 0:a.beforeText)&&(this.beforeText=a.beforeText),void 0!==(null==a?void 0:a.afterText)&&(this.afterText=a.afterText)}onFirstRun(){var t,e;let i=this.getLastProps(),s=this.getEndProps(),a=null!=(t=i.text)?t:"",r=null!=(e=s.text)?e:"";this.valid=!0,this.fromText=a.toString(),this.toText=r.toString(),this.toText||""===this.toText||(this.valid=!1)}onEnd(t){super.onEnd(t),t||(this.showCursor&&!this.blinkCursor?this.target.setAttribute("text",this.beforeText+this.toText+this.cursorChar+this.afterText):this.target.setAttribute("text",this.beforeText+this.toText+this.afterText))}onUpdate(t,e,i){let s,a;if(!this.valid)return;let r=this.toText.length,n=this.fromText.length;n>r?(s=Math.round(n-(n-r)*e),a=this.fromText.substring(0,s)):(s=Math.round(n+(r-n)*e),a=this.toText.startsWith(this.fromText)?this.toText.substring(0,s):s<=n?this.fromText.substring(0,s):this.toText.substring(0,s-n+Math.min(n,s)));let o=this.beforeText+a+this.afterText;this.showCursor&&(this.blinkCursor?Math.floor(e/.1)%2==0&&(o=this.beforeText+a+this.cursorChar+this.afterText):o=this.beforeText+a+this.cursorChar+this.afterText),this.target.setAttribute("text",o)}}var K=i(6387);class N extends a.Or{onBind(){let t,e;super.onBind();let i=(0,K.L)(this.target);this._animator=i;let s=this.duration,a=this.easing,r=this.target,{symbolStartOuterType:n="scale",titleType:o="typewriter",titlePanelType:l="scale"}=this.params,h=s/10;if(r._symbolStart.setAttributes({scaleX:0,scaleY:0}),i.animate(r._symbolStart,{type:"to",to:{scaleX:1,scaleY:1},duration:5*h,easing:a}),"scale"===n?(t={scaleX:0,scaleY:0},e={scaleX:1,scaleY:1}):(t={clipRange:0},e={clipRange:1}),r._symbolStartOuter.setAttributes(t),i.animate(r._symbolStartOuter,{type:"to",to:e,duration:5*h,easing:a}),r._symbolEnd.setAttributes({scaleX:0,scaleY:0}),i.animate(r._symbolEnd,{type:"to",to:{scaleX:1,scaleY:1},duration:2*h,delay:8*h,easing:a}),r._line.setAttributes({clipRange:0}),i.animate(r._line,{type:"to",to:{clipRange:1},duration:9*h,easing:a}),"typewriter"===o){let t=r._titleTop.attribute.text;r._titleTop.setAttributes({text:""}),i.animate(r._titleTop,{type:"custom",delay:5*h,duration:4*h,easing:"linear",to:{text:t},custom:L});let e=r._titleBottom.attribute.text;r._titleBottom.setAttributes({text:""}),i.animate(r._titleBottom,{type:"custom",delay:5*h,duration:4*h,easing:"linear",to:{text:e},custom:L})}else r._titleTop.setAttributes({dy:r._titleTop.AABBBounds.height()+10}),i.animate(r._titleTop,{type:"to",to:{dy:0},delay:5*h,duration:4*h,easing:"linear"}),r._titleBottom.setAttributes({dy:-(10+r._titleBottom.AABBBounds.height())}),i.animate(r._titleBottom,{type:"to",to:{dy:0},delay:5*h,duration:4*h,easing:"linear"});"scale"===l?[r._titleTopPanel,r._titleBottomPanel].forEach(t=>{var e;let r=null!=(e=t.attribute.scaleX)?e:1;t.setAttributes({scaleX:0}),i.animate(t,{type:"to",to:{scaleX:r},duration:s,easing:a})}):"stroke"===l&&[r._titleTopPanel,r._titleBottomPanel].forEach(t=>{let e=t.AABBBounds,r=2*(e.width()+e.height());t.setAttributes({lineDash:[0,10*r]}),i.animate(t,{type:"to",to:{lineDash:[r,10*r]},duration:s,easing:a})}),this.completeBind(i)}}class j extends a.Or{onBind(){super.onBind();let t=(0,K.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,s=this.target,{mode:a}=this.params;"scale"===a?t.animate(s._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}):(t.animate(s._line,{type:"to",to:{clipRange:0},duration:e,easing:i}),t.animate(s._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e/2,delay:e/2,easing:i}),t.animate(s._symbolEnd,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),t.animate(s._titleTop,{type:"to",to:{dy:s._titleTop.AABBBounds.height()+10},duration:e/2,easing:i}),t.animate(s._titleBottom,{type:"to",to:{dy:-(10+s._titleBottom.AABBBounds.height())},duration:e/2,easing:i}),t.animate(s._symbolStartOuter,{type:"to",to:{clipRange:0},duration:e/2,delay:e/2,easing:i}),t.animate(s._titleTopPanel,{type:"to",to:{scaleX:0},duration:e,easing:i}),t.animate(s._titleBottomPanel,{type:"to",to:{scaleX:0},duration:e,easing:i})),this.completeBind(t)}}class G extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.formatTemplate=null,this.decimalLength=null==a?void 0:a.decimalLength,(null==a?void 0:a.formatTemplate)&&a.formatTemplate.includes("{{var}}")&&(this.formatTemplate=a.formatTemplate)}onFirstRun(){var t,e,i;let s=this.getLastProps(),a=this.getEndProps(),r=null!=(t=s.text)?t:0,n=null!=(e=a.text)?e:0;this.valid=!0;let o=0,l=0,h="",u="",p=0;if("number"==typeof r)o=r,p=Math.max(p,(r.toString().split(".")[1]||"").length);else{if("string"!=typeof r)return void(this.valid=!1);if(r.endsWith("%")){h="%";let t=r.substring(0,r.length-1).replace(/,/g,"");if(isNaN(o=parseFloat(t)/100))return void(this.valid=!1);p=Math.max(p,(t.split(".")[1]||"").length+2)}else{let t=r.replace(/,/g,"");if(isNaN(o=parseFloat(t)))return void(this.valid=!1);r.includes(",")&&(h=","),p=Math.max(p,(t.split(".")[1]||"").length)}}if("number"==typeof n)l=n,p=Math.max(p,(n.toString().split(".")[1]||"").length);else{if("string"!=typeof n)return void(this.valid=!1);if(n.endsWith("%")){u="%";let t=n.substring(0,n.length-1).replace(/,/g,"");if(isNaN(l=parseFloat(t)/100))return void(this.valid=!1);p=Math.max(p,(t.split(".")[1]||"").length+2)}else{let t=n.replace(/,/g,"");if(isNaN(l=parseFloat(t)))return void(this.valid=!1);n.includes(",")&&(u=","),p=Math.max(p,(t.split(".")[1]||"").length)}}if(null==(i=this.params)?void 0:i.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=u||h}"%"===this.format&&"%"!==u&&"%"!==h&&void 0===this.decimalLength&&(this.decimalLength=2),"%"===this.format||"%"!==u&&"%"!==h||(o*=100,l*=100)}else this.format=u||h;this.fromNumber=o,this.toNumber=l,void 0===this.decimalLength&&(this.decimalLength=p)}onEnd(t){super.onEnd(t),t||this.props&&this.target.setAttributes(this.props)}onUpdate(t,e,i){if(!this.valid)return;let s=this.fromNumber+(this.toNumber-this.fromNumber)*e,a="",r=this.format,n=("%"===r?100*s:s).toFixed(this.decimalLength),o,l=n;if(parseFloat(n)===Math.floor(parseFloat(n))&&(l=Math.floor(parseFloat(n))),"%"===r)o=`${l}%`;else if(","===r){let t=l.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),o=t.join(".")}else o=l;a=this.formatTemplate?this.formatTemplate.replace("{{var}}",o.toString()):o,this.target.setAttribute("text",a)}}class Z extends a.Or{onBind(){super.onBind();let t=(0,K.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,s=this.target,{wave:a}=this.params;if(s.setAttributes({scaleX:0,scaleY:0}),t.animate(s,{type:"to",to:{scaleX:1,scaleY:1},duration:e/3*2,easing:i}),s.titleShape&&t.animate(s.titleShape,{type:"custom",to:{text:s.titleShape.attribute.text},duration:e,easing:i,custom:L}),s.contentShape&&t.animate(s.contentShape,{type:"custom",to:{text:s.contentShape.attribute.text},duration:e,easing:i,custom:L}),a){let r=e/6;t.animate(s.group,{timeSlices:[{duration:r,effects:{type:"to",to:{angle:a},easing:i}},{duration:2*r,effects:{type:"to",to:{angle:-a},easing:i}},{duration:2*r,effects:{type:"to",to:{angle:a},easing:i}},{duration:r,effects:{type:"to",to:{angle:0},easing:i}}]})}this.completeBind(t)}}class X extends a.Or{onBind(){super.onBind();let t=(0,K.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,s=this.target;t.animate(s,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),this.completeBind(t)}}var W=i(505850);class Y extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.fadeInChars=!1,this.fadeInDuration=.3,this.strokeFirst=!1,this.strokeToFillRatio=.3,void 0!==(null==a?void 0:a.showCursor)&&(this.showCursor=a.showCursor),void 0!==(null==a?void 0:a.cursorChar)&&(this.cursorChar=a.cursorChar),void 0!==(null==a?void 0:a.blinkCursor)&&(this.blinkCursor=a.blinkCursor),void 0!==(null==a?void 0:a.fadeInChars)&&(this.fadeInChars=a.fadeInChars),void 0!==(null==a?void 0:a.fadeInDuration)&&(this.fadeInDuration=a.fadeInDuration),void 0!==(null==a?void 0:a.strokeFirst)&&(this.strokeFirst=a.strokeFirst),void 0!==(null==a?void 0:a.strokeToFillRatio)&&(this.strokeToFillRatio=a.strokeToFillRatio)}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?W.H.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=W.H.TransformTextConfig2SingleCharacter(this.originalTextConfig)):this.valid=!1}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){let s,a;if(!this.valid)return;let r=this.toTextConfig.length,n=this.fromTextConfig.length,o=this.fadeInChars?1-this.fadeInDuration:1;if(s=n>r?Math.round(n-(n-r)*e):this.fadeInChars?Math.round(n+(r-n)*Math.min(1,e/o)):Math.round(n+(r-n)*e),a=n>r?this.fromTextConfig.slice(0,s):this.toTextConfig.slice(0,s).map((t,i)=>{if("text"in t){let s=Object.assign({},t);if(this.strokeFirst){let t=i/r*o,a=Math.max(0,e-t),n=1-t,l=Math.min(1,a/(this.strokeToFillRatio*n));"fill"in s&&s.fill&&(s.stroke=s.fill,l<1&&(s.fillOpacity=l)),this.fadeInChars&&(s.opacity=Math.max(0,Math.min(1,Math.min(1,a/(this.fadeInDuration*n)))))}else this.fadeInChars&&(s.opacity=Math.max(0,Math.min(1,(e-i/r*o)/this.fadeInDuration)));return s}return t}),this.showCursor&&s<r){let t=!0;if(this.blinkCursor&&(t=Math.floor(e/.1)%2==0),t&&a.length>0){let t=a.length-1,e=a[t];if("text"in e)a[t]=Object.assign(Object.assign({},e),{text:String(e.text)+this.cursorChar});else{let t={text:this.cursorChar,fontSize:16};a.push(t)}}}this.target.setAttribute("textConfig",a)}}class z extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",this.fadeOutChars=!1,this.fadeOutDuration=.3,this.direction="backward",void 0!==(null==a?void 0:a.showCursor)&&(this.showCursor=a.showCursor),void 0!==(null==a?void 0:a.cursorChar)&&(this.cursorChar=a.cursorChar),void 0!==(null==a?void 0:a.blinkCursor)&&(this.blinkCursor=a.blinkCursor),void 0!==(null==a?void 0:a.beforeText)&&(this.beforeText=a.beforeText),void 0!==(null==a?void 0:a.afterText)&&(this.afterText=a.afterText),void 0!==(null==a?void 0:a.fadeOutChars)&&(this.fadeOutChars=a.fadeOutChars),void 0!==(null==a?void 0:a.fadeOutDuration)&&(this.fadeOutDuration=a.fadeOutDuration),void 0!==(null==a?void 0:a.direction)&&(this.direction=a.direction),this.propKeys=["textConfig"]}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=W.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?W.H.TransformTextConfig2SingleCharacter(e.textConfig):[]):this.valid=!1}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){let s;if(!this.valid)return;let a=this.fromTextConfig.length,r=this.fadeOutChars?1-this.fadeOutDuration:1;if("forward"===this.direction){s=this.fadeOutChars?Math.round(a*(1-Math.min(1,e/r))):Math.round(a*(1-e));let t="forward"===this.direction?this.fromTextConfig.slice(a-s):this.fromTextConfig.slice(0,s);this.fadeOutChars&&(t=this.applyFadeEffect(t,e,a,s)),this.showCursor&&s>0&&(t=this.addCursor(t,e)),this.target.setAttribute("textConfig",t)}else{s=this.fadeOutChars?Math.round(a*(1-Math.min(1,e/r))):Math.round(a*(1-e));let t=this.fromTextConfig.slice(0,s);this.fadeOutChars&&(t=this.applyFadeEffect(t,e,a,s)),this.showCursor&&s>0&&(t=this.addCursor(t,e)),this.target.setAttribute("textConfig",t)}}applyFadeEffect(t,e,i,s){this.direction;let a=Math.max(0,1-Math.min(1,(e-(1-this.fadeOutDuration))/this.fadeOutDuration));return t.map((e,i)=>{if("forward"===this.direction){if(0===i&&"text"in e)return Object.assign(Object.assign({},e),{opacity:a})}else if(i===t.length-1&&"text"in e)return Object.assign(Object.assign({},e),{opacity:a});return e})}addCursor(t,e){let i=!0;if(this.blinkCursor&&(i=Math.floor(e/.1)%2==0),i&&t.length>0){let e="forward"===this.direction?0:t.length-1,i=t[e];if("text"in i){let s=[...t];return"forward"===this.direction?s[e]=Object.assign(Object.assign({},i),{text:this.cursorChar+String(i.text)}):s[e]=Object.assign(Object.assign({},i),{text:String(i.text)+this.cursorChar}),s}}return t}}class H extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeInDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],void 0!==(null==a?void 0:a.fadeInDuration)&&(this.fadeInDuration=a.fadeInDuration),void 0!==(null==a?void 0:a.slideDirection)&&(this.slideDirection=a.slideDirection),void 0!==(null==a?void 0:a.slideDistance)&&(this.slideDistance=a.slideDistance),void 0!==(null==a?void 0:a.wordByWord)&&(this.wordByWord=a.wordByWord),void 0!==(null==a?void 0:a.wordRegex)&&(this.wordRegex=a.wordRegex)}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?W.H.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=W.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.singleCharConfig=this.toTextConfig.map(t=>"text"in t?Object.assign(Object.assign({},t),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}):Object.assign(Object.assign({},t),{opacity:0})),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="",e={},i,s=0;for(this.toTextConfig.forEach((i,a)=>{if("text"in i){let r=String(i.text);t+=r,e[s]=a,s++}}),this.wordRegex.lastIndex=0;null!==(i=this.wordRegex.exec(t));){let t=i.index,s=i.index+i[0].length,a=[];for(let i=t;i<s;i++)void 0!==e[i]&&a.push(e[i]);a.length>0&&this.wordGroups.push(a)}let a=new Set;this.wordGroups.forEach(t=>{t.forEach(t=>a.add(t))});for(let t=0;t<this.toTextConfig.length;t++)"text"in this.toTextConfig[t]&&!a.has(t)&&this.wordGroups.push([t])}getInitialDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getInitialDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){let s;if(!this.valid)return;let a=1-this.fadeInDuration;s=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,a):this.updateByCharacter(e,a),this.target.setAttribute("textConfig",s)}updateByWord(t,e){let i=this.wordGroups.length,s=[...this.singleCharConfig];for(let a=0;a<this.wordGroups.length;a++){let r;if(t<(r="left"===this.slideDirection?(i-1-a)/i*e:a/i*e)){for(let t of this.wordGroups[a]){let e=s[t];"text"in e&&(s[t]=Object.assign(Object.assign({},e),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}))}continue}let n=Math.max(0,Math.min(1,(t-r)/this.fadeInDuration)),o=this.getInitialDx()*(1-n),l=this.getInitialDy()*(1-n);for(let t of this.wordGroups[a]){let e=s[t];"text"in e&&(s[t]=Object.assign(Object.assign({},e),{opacity:n,dx:o,dy:l}))}}return s}updateByCharacter(t,e){let i=this.toTextConfig.length,s=[...this.singleCharConfig];for(let a=0;a<s.length;a++){let r=s[a];if("text"in r){let n;if(t<(n="left"===this.slideDirection?(i-1-a)/i*e:a/i*e)){s[a]=Object.assign(Object.assign({},r),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()});continue}let o=Math.max(0,Math.min(1,(t-n)/this.fadeInDuration)),l=this.getInitialDx()*(1-o),h=this.getInitialDy()*(1-o);s[a]=Object.assign(Object.assign({},r),{opacity:o,dx:l,dy:h})}}return s}}class V extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeOutDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],this.reverseOrder=!1,void 0!==(null==a?void 0:a.fadeOutDuration)&&(this.fadeOutDuration=a.fadeOutDuration),void 0!==(null==a?void 0:a.slideDirection)&&(this.slideDirection=a.slideDirection),void 0!==(null==a?void 0:a.slideDistance)&&(this.slideDistance=a.slideDistance),void 0!==(null==a?void 0:a.wordByWord)&&(this.wordByWord=a.wordByWord),void 0!==(null==a?void 0:a.wordRegex)&&(this.wordRegex=a.wordRegex),void 0!==(null==a?void 0:a.reverseOrder)&&(this.reverseOrder=a.reverseOrder),this.propKeys=["textConfig"]}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=W.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?W.H.TransformTextConfig2SingleCharacter(e.textConfig):[],this.singleCharConfig=this.fromTextConfig.map(t=>"text"in t?Object.assign(Object.assign({},t),{opacity:1,dx:0,dy:0}):Object.assign(Object.assign({},t),{opacity:1})),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="",e={},i,s=0;for(this.fromTextConfig.forEach((i,a)=>{if("text"in i){let r=String(i.text);t+=r,e[s]=a,s++}}),this.wordRegex.lastIndex=0;null!==(i=this.wordRegex.exec(t));){let t=i.index,s=i.index+i[0].length,a=[];for(let i=t;i<s;i++)void 0!==e[i]&&a.push(e[i]);a.length>0&&this.wordGroups.push(a)}let a=new Set;this.wordGroups.forEach(t=>{t.forEach(t=>a.add(t))});for(let t=0;t<this.fromTextConfig.length;t++)"text"in this.fromTextConfig[t]&&!a.has(t)&&this.wordGroups.push([t])}getTargetDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getTargetDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){let s;if(!this.valid)return;let a=1-this.fadeOutDuration;s=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,a):this.updateByCharacter(e,a),this.target.setAttribute("textConfig",s)}updateByWord(t,e){let i=this.wordGroups.length,s=[...this.singleCharConfig];for(let a=0;a<this.wordGroups.length;a++){let r;if(t<(r=this.reverseOrder?"left"===this.slideDirection?a/i*e:(i-1-a)/i*e:"left"===this.slideDirection?(i-1-a)/i*e:a/i*e)){for(let t of this.wordGroups[a]){let e=s[t];"text"in e&&(s[t]=Object.assign(Object.assign({},e),{opacity:1,dx:0,dy:0}))}continue}let n=Math.max(0,Math.min(1,(t-r)/this.fadeOutDuration)),o=this.getTargetDx()*n,l=this.getTargetDy()*n,h=1-n;for(let t of this.wordGroups[a]){let e=s[t];"text"in e&&(s[t]=Object.assign(Object.assign({},e),{opacity:h,dx:o,dy:l}))}}return s}updateByCharacter(t,e){let i=this.fromTextConfig.length,s=[...this.singleCharConfig];for(let a=0;a<s.length;a++){let r=s[a];if("text"in r){let n;if(t<(n=this.reverseOrder?"left"===this.slideDirection?a/i*e:(i-1-a)/i*e:"left"===this.slideDirection?(i-1-a)/i*e:a/i*e)){s[a]=Object.assign(Object.assign({},r),{opacity:1,dx:0,dy:0});continue}let o=Math.max(0,Math.min(1,(t-n)/this.fadeOutDuration)),l=this.getTargetDx()*o,h=this.getTargetDy()*o,u=1-o;s[a]=Object.assign(Object.assign({},r),{opacity:u,dx:l,dy:h})}}return s}}class q extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n,o,l,h,u;let p,d;super.onBind();let c=this.target.getFinalAttribute(),g=null!=(t=this.target.attribute)?t:{};switch(null==(e=this.params)?void 0:e.direction){case"x":p={scaleX:null!=(i=g.scaleX)?i:0},d={scaleX:null!=(s=null==c?void 0:c.scaleX)?s:1},this._updateFunction=this.updateX;break;case"y":p={scaleY:null!=(a=g.scaleY)?a:0},d={scaleY:null!=(r=null==c?void 0:c.scaleY)?r:1},this._updateFunction=this.updateY;break;default:p={scaleX:null!=(n=g.scaleX)?n:0,scaleY:null!=(o=g.scaleY)?o:0},d={scaleX:null!=(l=null==c?void 0:c.scaleX)?l:1,scaleY:null!=(h=null==c?void 0:c.scaleY)?h:1},this._updateFunction=this.updateXY}let f=this.target.getFinalAttribute();f&&this.target.setAttributes(f),this.props=d,this.from=p,this.to=d,!1!==(null==(u=this.params.controlOptions)?void 0:u.immediatelyApply)&&this.target.setAttributes(p)}onEnd(t){super.onEnd(t)}updateX(t){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*t}updateY(t){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*t}updateXY(t){this.updateX(t),this.updateY(t)}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:"scaleX"===this.propKeys[0]?this._updateFunction=this.updateX:"scaleY"===this.propKeys[0]?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class Q extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a;let r,n;super.onBind();let o=this.target.attribute;switch(null==(t=this.params)?void 0:t.direction){case"x":r={scaleX:null!=(e=null==o?void 0:o.scaleX)?e:1},n={scaleX:0};break;case"y":r={scaleY:null!=(i=null==o?void 0:o.scaleY)?i:1},n={scaleY:0};break;default:r={scaleX:null!=(s=null==o?void 0:o.scaleX)?s:1,scaleY:null!=(a=null==o?void 0:o.scaleY)?a:1},n={scaleX:0,scaleY:0}}this.props=n,this.from=r,this.to=n}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}class $ extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}}var J=i(939840);class tt extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n,o,l,h,u,p;super.onBind();let d=this.target.getFinalAttribute(),c=(null==(t=this.params)?void 0:t.direction)||"right",g=(null==(e=this.params)?void 0:e.distance)||50,f=null!=(s=null==(i=this.params)?void 0:i.fromOpacity)?s:0,m={opacity:f,baseOpacity:f},v={opacity:1,baseOpacity:1};"top"===c?(m.y=(null!=(a=d.y)?a:0)-g,v.y=null!=(r=d.y)?r:0,this.propKeys=["opacity","baseOpacity","y"]):"bottom"===c?(m.y=(null!=(n=d.y)?n:0)+g,v.y=null!=(o=d.y)?o:0,this.propKeys=["opacity","baseOpacity","y"]):("left"===c?(m.x=(null!=(l=d.x)?l:0)-g,v.x=null!=(h=d.x)?h:0):(m.x=(null!=(u=d.x)?u:0)+g,v.x=null!=(p=d.x)?p:0),this.propKeys=["opacity","baseOpacity","x"]),this.from=m,this.to=v,this.props=v,this.target.setAttributes(m)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class te extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n;super.onBind();let o=this.target.getFinalAttribute(),l=null!=(e=null==(t=this.params)?void 0:t.fromScale)?e:0,h=(null==(i=this.params)?void 0:i.direction)||"xy",u=null!=(a=null==(s=this.params)?void 0:s.fromOpacity)?a:0,p={opacity:u,baseOpacity:u},d={opacity:1,baseOpacity:1};this.propKeys=["opacity","baseOpacity"],"x"!==h&&"xy"!==h||(p.scaleX=l,d.scaleX=null!=(r=o.scaleX)?r:1,this.propKeys.push("scaleX")),"y"!==h&&"xy"!==h||(p.scaleY=l,d.scaleY=null!=(n=o.scaleY)?n:1,this.propKeys.push("scaleY")),this.from=p,this.to=d,this.props=d,this.target.setAttributes(p)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class ti extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e,i,s,a,r,n,o,l;super.onBind();let h=this.target.getFinalAttribute(),u=null!=(e=null==(t=this.params)?void 0:t.fromAngle)?e:2*Math.PI,p=null!=(s=null==(i=this.params)?void 0:i.fromScale)?s:0,d=null!=(r=null==(a=this.params)?void 0:a.fromOpacity)?r:0,c={opacity:d,baseOpacity:d,angle:u,scaleX:p,scaleY:p},g={opacity:1,baseOpacity:1,angle:null!=(n=h.angle)?n:0,scaleX:null!=(o=h.scaleX)?o:1,scaleY:null!=(l=h.scaleY)?l:1};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=c,this.to=g,this.props=g,this.target.setAttributes(c)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class ts extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.perimeter=0,this.originalAttributes={}}onBind(){var t,e,i,s,a,r,n,o,l,h,u,p,d,c,g,f,m,v;if(super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),"rect"===this.target.type){let i=this.target.attribute,s=null!=(t=i.width)?t:100,a=null!=(e=i.height)?e:100;this.perimeter=2*(s+a)}else if("circle"===this.target.type){let t=null!=(i=this.target.attribute.radius)?i:50;this.perimeter=2*Math.PI*t}else if("ellipse"===this.target.type){let t=this.target.attribute,e=null!=(s=t.radiusX)?s:50,i=null!=(a=t.radiusY)?a:50;this.perimeter=2*Math.PI*Math.sqrt((e*e+i*i)/2)}else this.perimeter=1e3;let y=null!=(n=null==(r=this.params)?void 0:r.lineWidth)?n:2,x=null!=(l=null==(o=this.params)?void 0:o.strokeColor)?l:"black",A=null!=(u=null==(h=this.params)?void 0:h.fromOpacity)?u:1,b=null!=(d=null==(p=this.params)?void 0:p.dashLength)?d:this.perimeter,T=null!=(g=null==(c=this.params)?void 0:c.showFill)&&g,_=null!=(m=null==(f=this.params)?void 0:f.fillOpacity)?m:0;this.from={lineDash:[b,b],lineDashOffset:b,lineWidth:y,stroke:x,strokeOpacity:A},this.to={lineDash:[b,b],lineDashOffset:0,lineWidth:y,stroke:x,strokeOpacity:A},T?(this.from.fillOpacity=_,this.to.fillOpacity=null!=(v=this.originalAttributes.fillOpacity)?v:1):(this.from.fillOpacity=0,this.to.fillOpacity=0),this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var s;let a=this.target.attribute;a.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,(null==(s=this.params)?void 0:s.showFill)&&(a.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}onEnd(){var t;if(super.onEnd(),!(null==(t=this.params)?void 0:t.showFill)){let t=Object.assign({},this.originalAttributes);t.fillOpacity=0,this.target.setAttributes(t)}}}class ta extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.perimeter=0,this.originalAttributes={}}onFirstRun(){var t,e,i,s,a,r,n,o,l,h,u,p,d,c,g,f;if(this.originalAttributes=Object.assign({},this.target.getAttributes()),"rect"===this.target.type){let i=this.target.attribute,s=null!=(t=i.width)?t:100,a=null!=(e=i.height)?e:100;this.perimeter=2*(s+a)}else if("circle"===this.target.type){let t=null!=(i=this.target.attribute.radius)?i:50;this.perimeter=2*Math.PI*t}else if("ellipse"===this.target.type){let t=this.target.attribute,e=null!=(s=t.radiusX)?s:50,i=null!=(a=t.radiusY)?a:50;this.perimeter=2*Math.PI*Math.sqrt((e*e+i*i)/2)}else this.perimeter=1e3;let m=null!=(n=null==(r=this.params)?void 0:r.lineWidth)?n:2,v=null!=(l=null==(o=this.params)?void 0:o.strokeColor)?l:"black",y=null!=(u=null==(h=this.params)?void 0:h.fromOpacity)?u:1,x=null!=(d=null==(p=this.params)?void 0:p.dashLength)?d:this.perimeter,A=null!=(g=null==(c=this.params)?void 0:c.showFill)&&g;this.from={lineDash:[x,x],lineDashOffset:0,lineWidth:m,stroke:v,strokeOpacity:y},this.to={lineDash:[x,x],lineDashOffset:-x,lineWidth:m,stroke:v,strokeOpacity:y},A?this.from.fillOpacity=null!=(f=this.originalAttributes.fillOpacity)?f:1:this.from.fillOpacity=0,this.to.fillOpacity=0,this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var s;let a=this.target.attribute;a.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,(null==(s=this.params)?void 0:s.showFill)&&(a.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}}class tr extends a.rd{constructor(t,e,i,s,a){var r;super(t,e,i,s,a);let n=null!=(r=null==a?void 0:a.slideRatio)?r:.5;this.slideInDuration=i*n,this.growInDuration=i*(1-n)}onBind(){var t,e,i,a,r,n;super.onBind();let o=new s.a(this.target);o.execute({type:"custom",custom:tt,customParameters:{direction:(null==(t=this.params)?void 0:t.slideDirection)||"right",distance:(null==(e=this.params)?void 0:e.slideDistance)||50,fromOpacity:null!=(a=null==(i=this.params)?void 0:i.fromOpacity)?a:0},duration:this.slideInDuration,easing:this.easing}),o.execute({type:"custom",custom:te,customParameters:{fromScale:(null==(r=this.params)?void 0:r.fromScale)||.5,direction:(null==(n=this.params)?void 0:n.scaleDirection)||"xy",fromOpacity:1},duration:this.growInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class tn extends a.rd{constructor(t,e,i,s,a){var r;super(t,e,i,s,a);let n=null!=(r=null==a?void 0:a.slideRatio)?r:.5;this.slideInDuration=i*n,this.spinInDuration=i*(1-n)}onBind(){var t,e,i,a,r,n;super.onBind();let o=new s.a(this.target);o.execute({type:"custom",custom:tt,customParameters:{direction:(null==(t=this.params)?void 0:t.slideDirection)||"right",distance:(null==(e=this.params)?void 0:e.slideDistance)||50,fromOpacity:null!=(a=null==(i=this.params)?void 0:i.fromOpacity)?a:0},duration:this.slideInDuration,easing:this.easing}),o.execute({type:"custom",custom:ti,customParameters:{fromAngle:(null==(r=this.params)?void 0:r.fromAngle)||Math.PI,fromScale:(null==(n=this.params)?void 0:n.fromScale)||.5,fromOpacity:1},duration:this.spinInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class to extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onFirstRun(){var t,e,i,s,a,r,n,o,l,h,u,p,d,c;let g=this.target.getAttributes(),f=(null==(t=this.params)?void 0:t.direction)||"right",m=(null==(e=this.params)?void 0:e.distance)||50,v=null!=(s=null==(i=this.params)?void 0:i.fromOpacity)?s:1,y=null!=(r=null==(a=this.params)?void 0:a.toOpacity)?r:0,x={opacity:v,baseOpacity:v},A={opacity:y,baseOpacity:y};"top"===f?(x.y=null!=(n=g.y)?n:0,A.y=(null!=(o=g.y)?o:0)-m,this.propKeys=["opacity","baseOpacity","y"]):"bottom"===f?(x.y=null!=(l=g.y)?l:0,A.y=(null!=(h=g.y)?h:0)+m,this.propKeys=["opacity","baseOpacity","y"]):("left"===f?(x.x=null!=(u=g.x)?u:0,A.x=(null!=(p=g.x)?p:0)-m):(x.x=null!=(d=g.x)?d:0,A.x=(null!=(c=g.x)?c:0)+m),this.propKeys=["opacity","baseOpacity","x"]),this.from=x,this.to=A,this.props=A}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tl extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onFirstRun(){var t,e,i,s,a,r,n,o,l;let h=this.target.getAttributes(),u=null!=(e=null==(t=this.params)?void 0:t.fromScale)?e:0,p=(null==(i=this.params)?void 0:i.direction)||"xy",d=null!=(a=null==(s=this.params)?void 0:s.fromOpacity)?a:1,c=null!=(n=null==(r=this.params)?void 0:r.toOpacity)?n:0,g={opacity:d,baseOpacity:d},f={opacity:c,baseOpacity:c};this.propKeys=["opacity","baseOpacity"],"x"!==p&&"xy"!==p||(g.scaleX=null!=(o=h.scaleX)?o:1,f.scaleX=u,this.propKeys.push("scaleX")),"y"!==p&&"xy"!==p||(g.scaleY=null!=(l=h.scaleY)?l:1,f.scaleY=u,this.propKeys.push("scaleY")),this.from=g,this.to=f,this.props=f}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class th extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onFirstRun(){var t,e,i,s,a,r,n,o,l,h,u;let p=this.target.getAttributes(),d=null!=(e=null==(t=this.params)?void 0:t.fromAngle)?e:2*Math.PI,c=null!=(s=null==(i=this.params)?void 0:i.fromScale)?s:0,g=null!=(r=null==(a=this.params)?void 0:a.fromOpacity)?r:1,f=null!=(o=null==(n=this.params)?void 0:n.toOpacity)?o:0,m={opacity:g,baseOpacity:g,angle:null!=(l=p.angle)?l:0,scaleX:null!=(h=p.scaleX)?h:1,scaleY:null!=(u=p.scaleY)?u:1},v={opacity:f,baseOpacity:f,angle:d,scaleX:c,scaleY:c};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=m,this.to=v,this.props=v}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tu extends a.rd{constructor(t,e,i,s,a){var r;super(t,e,i,s,a);let n=null!=(r=null==a?void 0:a.slideRatio)?r:.5;this.growOutDuration=i*(1-n),this.slideOutDuration=i*n}onFirstRun(){var t,e,i,a;let r=new s.a(this.target);r.execute({type:"custom",custom:tl,customParameters:{fromScale:(null==(t=this.params)?void 0:t.fromScale)||.5,direction:(null==(e=this.params)?void 0:e.scaleDirection)||"xy",fromOpacity:1,toOpacity:1},duration:this.growOutDuration,easing:this.easing}),r.execute({type:"custom",custom:to,customParameters:{direction:(null==(i=this.params)?void 0:i.slideDirection)||"right",distance:(null==(a=this.params)?void 0:a.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.growOutDuration})}onUpdate(t,e,i){}}class tp extends a.rd{constructor(t,e,i,s,a){var r;super(t,e,i,s,a);let n=null!=(r=null==a?void 0:a.slideRatio)?r:.5;this.spinOutDuration=i*(1-n),this.slideOutDuration=i*n}onFirstRun(){var t,e,i,a;let r=new s.a(this.target);r.execute({type:"custom",custom:th,customParameters:{fromAngle:(null==(t=this.params)?void 0:t.fromAngle)||Math.PI,fromScale:(null==(e=this.params)?void 0:e.fromScale)||.5,fromOpacity:1,toOpacity:1},duration:this.spinOutDuration,easing:this.easing}),r.execute({type:"custom",custom:to,customParameters:{direction:(null==(i=this.params)?void 0:i.slideDirection)||"right",distance:(null==(a=this.params)?void 0:a.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.spinOutDuration})}onUpdate(t,e,i){}}class td extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.originalAttributes={},this.pulseCount=3,this.pulseOpacity=.3,this.pulseScale=1.05,this.pulseColor=null,this.pulseColorIntensity=.2,this.strokeOnly=!1,this.fillOnly=!1,this.useScale=!0,this.useOpacity=!0,this.useStroke=!0,this.useFill=!0,this.useColor=!1,this.originalFill=null,this.originalStroke=null,void 0!==(null==a?void 0:a.pulseCount)&&(this.pulseCount=a.pulseCount),void 0!==(null==a?void 0:a.pulseScale)&&(this.pulseScale=a.pulseScale),void 0!==(null==a?void 0:a.pulseColor)&&(this.pulseColor=a.pulseColor),void 0!==(null==a?void 0:a.pulseColorIntensity)&&(this.pulseColorIntensity=a.pulseColorIntensity),void 0!==(null==a?void 0:a.strokeOnly)&&(this.strokeOnly=a.strokeOnly),void 0!==(null==a?void 0:a.fillOnly)&&(this.fillOnly=a.fillOnly),void 0!==(null==a?void 0:a.useScale)&&(this.useScale=a.useScale),void 0!==(null==a?void 0:a.useOpacity)&&(this.useOpacity=a.useOpacity),void 0!==(null==a?void 0:a.useStroke)&&(this.useStroke=a.useStroke),void 0!==(null==a?void 0:a.useFill)&&(this.useFill=a.useFill),void 0!==(null==a?void 0:a.useColor)&&(this.useColor=a.useColor)}onBind(){super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),this.useColor&&(this.originalFill=this.originalAttributes.fill||null,this.originalStroke=this.originalAttributes.stroke||null,this.pulseColor||(this.fillOnly&&this.originalFill?this.pulseColor=this.originalFill:this.strokeOnly&&this.originalStroke?this.pulseColor=this.originalStroke:this.originalFill?this.pulseColor=this.originalFill:this.originalStroke?this.pulseColor=this.originalStroke:this.pulseColor="#FFFFFF"))}onUpdate(t,e,i){let s=Math.abs(Math.sin(e*Math.PI*this.pulseCount)),a=this.target.attribute;if(this.useOpacity){let t=1+(this.pulseOpacity-1)*s;this.useStroke&&(a.strokeOpacity=(this.originalAttributes.strokeOpacity||1)*t),this.useFill&&(a.fillOpacity=(this.originalAttributes.fillOpacity||1)*t)}if(this.useScale){let t=1+(this.pulseScale-1)*s;a.scaleX=(this.originalAttributes.scaleX||1)*t,a.scaleY=(this.originalAttributes.scaleY||1)*t}this.useColor&&this.pulseColor&&this.applyColorPulse(a,s),this.target.addUpdateShapeAndBoundsTag(),this.target.addUpdatePositionTag()}applyColorPulse(t,e){let i=this.pulseColorIntensity*e;this.useFill&&this.originalFill&&this.pulseColor&&(t.fill=(0,J.BM)(this.originalFill,this.pulseColor,i,!0)),this.useStroke&&this.originalStroke&&this.pulseColor&&(t.stroke=(0,J.BM)(this.originalStroke,this.pulseColor,i,!0))}onEnd(){super.onEnd(),this.target.setAttributes(this.originalAttributes)}}class tc extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onBind(){var t,e;super.onBind();let{diffAttrs:i={}}=null!=(t=this.target.context)?t:{},{options:s}=this.params;i=Object.assign({},i),(null==(e=null==s?void 0:s.excludeChannels)?void 0:e.length)&&s.excludeChannels.forEach(t=>{delete i[t]}),this.props=i}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i)}}var tg=i(796241);class tf extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tm extends tf{onBind(){var t;super.onBind();let{from:e,to:i}=((t,e,i)=>{var s,a,r,n;let{offset:o=0,orient:l,direction:h,point:u,excludeChannels:p=[],layoutRect:d={}}=null!=e?e:{},c=0,g=0;"negative"===l&&(c=null!=(s=d.width)?s:t.stage.viewWidth,g=null!=(a=d.height)?a:t.stage.viewHeight),c+=o,g+=o;let f=(0,tg.Z)(u)?u.call(null,null==(n=null==(r=t.context)?void 0:r.data)?void 0:n[0],t,i):u,m=t.getGraphicAttribute("x"),v=t.getGraphicAttribute("y"),y=p.includes("x")?m:f&&(0,T.Z)(f.x)?f.x:c,x=p.includes("y")?v:f&&(0,T.Z)(f.y)?f.y:g;switch(h){case"x":return{from:{x:p.includes("x")?m:y},to:{x:m}};case"y":return{from:{y:x},to:{y:v}};default:return{from:{x:y,y:x},to:{x:m,y:v}}}})(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class tv extends tf{onBind(){super.onBind();let{from:t,to:e}=((t,e,i)=>{var s,a,r,n;let{offset:o=0,orient:l,direction:h,point:u}=null!=e?e:{},p=i.group?i.group.AABBBounds:null,d=null!=(s=p.width())?s:i.width,c=null!=(a=p.height())?a:i.height,g=(0,tg.Z)(u)?u.call(null,null==(n=null==(r=t.context)?void 0:r.data)?void 0:n[0],t,i):u,f=g&&(0,T.Z)(g.x)?g.x:("negative"===l?d:0)+o,m=g&&(0,T.Z)(g.y)?g.y:("negative"===l?c:0)+o;switch(h){case"x":return{from:{x:t.getGraphicAttribute("x")},to:{x:f}};case"y":return{from:{y:t.getGraphicAttribute("y")},to:{y:m}};default:return{from:{x:t.getGraphicAttribute("x"),y:t.getGraphicAttribute("y")},to:{x:f,y:m}}}})(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=t,this.to=e}}var ty=i(536163);class tx extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}onUpdate(t,e,i){let s=this.target.attribute;this.propKeys.forEach(t=>{s[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tA extends tx{onBind(){var t;super.onBind();let{from:e,to:i}=((t,e)=>{var i;let s=null!=(i=t.getFinalAttribute().angle)?i:0;return{from:{angle:(0,ty.Yt)(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:(0,T.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2},to:{angle:s}}})(this.target,this.params.options);this.props=i,this.propKeys=["angle"],this.from=e,this.to=i;let s=this.target.getFinalAttribute();s&&this.target.setAttributes(s),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class tb extends tx{onBind(){super.onBind();let{from:t,to:e}=((t,e)=>{var i;let s=null!=(i=t.getFinalAttribute().angle)?i:0,a=0;return a=(0,ty.Yt)(s/(2*Math.PI),0)?Math.round(s/(2*Math.PI))*Math.PI*2:(0,T.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(s/(2*Math.PI))*Math.PI*2:Math.floor(s/(2*Math.PI))*Math.PI*2,{from:{angle:s},to:{angle:a}}})(this.target,this.params.options);this.props=e,this.propKeys=["angle"],this.from=t,this.to=e}}class tT extends a.rd{constructor(t,e,i,s,a){var r;super(t,e,i,s,a),a&&(this.pathLength=a.path.getLength(),this.path=a.path,this.distance=a.distance,this.totalLength=this.distance*this.pathLength,this.initAngle=null!=(r=a.initAngle)?r:0,this.changeAngle=!!a.changeAngle,this.cb=a.cb)}onBind(){this.from={x:0,y:0},this.to=this.path.getAttrAt(this.totalLength).pos,this.props=this.to}onUpdate(t,e,i){let s={},a=this.totalLength*e,{pos:r,angle:n}=this.path.getAttrAt(a);s.x=r.x,s.y=r.y,this.changeAngle&&(s.angle=n+this.initAngle),this.cb&&this.cb(this.from,this.to,e,this.target),this.target.setAttributes(s)}}class t_ extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a),this.from=null!=t?t:{}}onBind(){var t,e;super.onBind(),Object.keys(this.from).forEach(t=>{null==this.props[t]&&(this.props[t]=this.target.getGraphicAttribute(t))});let i=this.target.getFinalAttribute();"appear"===(null==(t=this.target.context)?void 0:t.animationState)&&i&&this.target.setAttributes(i),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.from[e]=null!=(i=this.from[e])?i:t[e]}),this.target.setAttributes(this.from)}deleteSelfAttr(t){super.deleteSelfAttr(t),delete this.from[t]}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.from[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}}var tS=i(509257),tw=i(92451),tC=i(916905),tO=i(51008),tP=i(919498);class tE extends a.rd{constructor(t,e,i,s,a){super(t,e,i,s,a)}getEndProps(){return{}}onStart(){this.target&&("rect"===this.target.type?this.onStartRect():"line"===this.target.type?this.onStartLineOrArea("line"):"area"===this.target.type&&this.onStartLineOrArea("area"))}onStartLineOrArea(t){var e;let i=this.target.attachShadow(),s=tS.w.graphicService.creator[t](Object.assign({},null==(e=this.params)?void 0:e.attribute));this[t]=s,s.pathProxy=new tw.r,i.add(s)}onStartRect(){var t,e,i;let s=this.target.attachShadow(),a=null==(e=null==(t=this.params)?void 0:t.isHorizontal)||e,r=a?"height":"width",n=this.target.AABBBounds[r](),o=a?0:this.target.AABBBounds.y1,l=tS.w.graphicService.creator.rect(Object.assign(Object.assign({[r]:n,fill:"#bcdeff",shadowBlur:30,shadowColor:"#bcdeff"},null==(i=this.params)?void 0:i.attribute),{x:0,y:o,[a?"width":"height"]:0}));this.rect=l,s.add(l)}onBind(){}onEnd(){this.target.detachShadow()}onUpdate(t,e,i){return this.rect?this.onUpdateRect(t,e,i):this.line||this.area?this.onUpdateLineOrArea(t,e,i):void 0}onUpdateRect(t,e,i){var s,a,r,n,o,l,h,u,p,d,c,g,f,m,v,y;let x=null==(a=null==(s=this.params)?void 0:s.isHorizontal)||a,A=this.target.attribute;if(x){let i=null!=(n=null!=(r=A.width)?r:Math.abs(A.x1-A.x))?n:250,s=null!=(l=null==(o=this.params)?void 0:o.streamLength)?l:i,a=null!=(p=null==(u=null==(h=this.params)?void 0:h.attribute)?void 0:u.width)?p:60,d=-a,c=d+(s-d)*e,g=Math.max(c,0),f=Math.min(Math.min(c+a,a),s-c),m=f+g>i?Math.max(i-g,0):f;this.rect.setAttributes({x:g+Math.min(A.x1-A.x,0),width:m},!1,{type:tC.Gk.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}else{let i,s=null!=(c=null!=(d=A.height)?d:Math.abs(A.y1-A.y))?c:250,a=null!=(f=null==(g=this.params)?void 0:g.streamLength)?f:s,r=null!=(y=null==(v=null==(m=this.params)?void 0:m.attribute)?void 0:v.height)?y:60,n=s-(a+r)*e,o=Math.min(n,s),l=Math.min(s-n,r);o<=0?(i=Math.max(o+l,0),o=0):i=l,this.rect.setAttributes({y:o+Math.min(A.y1-A.y,0),height:i},!1,{type:tC.Gk.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}}onUpdateLineOrArea(t,e,i){let s=this.line||this.area;if(!s)return;let a=s.pathProxy,r=this.target;r.cache||r.cacheArea?this._onUpdateLineOrAreaWithCache(a,r,t,e,i):this._onUpdateLineWithoutCache(a,r,t,e,i);let n=r.attribute;s.setAttributes(Object.assign({stroke:n.stroke},s.attribute)),s.addUpdateBoundTag()}_onUpdateLineOrAreaWithCache(t,e,i,s,a){var r,n;if(t.clear(),"line"===e.type){let i=e.cache;Array.isArray(i)||(i=[i]);let a=i.reduce((t,e)=>t+e.getLength(),0),r=[];return i.forEach(t=>{t.curves.forEach(t=>r.push(t))}),this._updateCurves(t,r,a,s)}if("area"===e.type&&(null==(n=null==(r=e.cacheArea)?void 0:r.top)?void 0:n.curves)){let i=e.cacheArea,a=i.top.curves.reduce((t,e)=>t+e.getLength(),0);return this._updateCurves(t,i.top.curves,a,s)}}_updateCurves(t,e,i,s){var a,r;let n=i*s,o=Math.min(n+(null!=(r=null==(a=this.params)?void 0:a.streamLength)?r:10),i),l=0,h=!1;for(let i=0;i<e.length;i++)if(!1!==e[i].defined){let s=e[i],a=s.getLength(),r=1-(l+a-n)/a,u,p=1-(l+a-o)/a;if(l<n&&l+a>n)if(h=!0,s.p2&&s.p3){let[e,i]=(0,tO.m)(s,r);t.moveTo(i.p0.x,i.p0.y),u=i}else{let e=s.getPointAt(r);t.moveTo(e.x,e.y)}if(l<o&&l+a>o){if(s.p2&&s.p3){u&&(p=(o-n)/u.getLength());let[e]=(0,tO.m)(u||s,p);t.bezierCurveTo(e.p1.x,e.p1.y,e.p2.x,e.p2.y,e.p3.x,e.p3.y)}else{let e=s.getPointAt(p);t.lineTo(e.x,e.y)}break}if(h)if(s.p2&&s.p3){let e=u||s;t.bezierCurveTo(e.p1.x,e.p1.y,e.p2.x,e.p2.y,e.p3.x,e.p3.y)}else t.lineTo(s.p1.x,s.p1.y);l+=a}}_onUpdateLineWithoutCache(t,e,i,s,a){var r,n;let{points:o,curveType:l}=e.attribute;if(!o||o.length<2||"linear"!==l)return;let h=0;for(let t=1;t<o.length;t++)h+=tP.HL.distancePP(o[t],o[t-1]);let u=h*s,p=Math.min(u+(null!=(n=null==(r=this.params)?void 0:r.streamLength)?n:10),h),d=[],c=0;for(let t=1;t<o.length;t++){let e=tP.HL.distancePP(o[t],o[t-1]);if(c<u&&c+e>u&&d.push(tP.HL.pointAtPP(o[t-1],o[t],1-(c+e-u)/e)),c<p&&c+e>p){d.push(tP.HL.pointAtPP(o[t-1],o[t],1-(c+e-p)/e));break}d.length&&d.push(o[t]),c+=e}if(d.length&&!(d.length<2)){t.clear(),t.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)t.lineTo(d[e].x,d[e].y)}}}var tI=i(474702);class tD extends a._j{constructor(t,e,i,s,a){super(t,e,i,s,a),this.webglCanvas=null,this.gl=null,this.program=null,this.currentAnimationRatio=0,this.animationTime=0}onUpdate(t,e,i){super.onUpdate(t,e,i),this.currentAnimationRatio=e,this.animationTime=e*Math.PI*2}getAnimationTime(){return this.currentAnimationRatio>0?this.animationTime:Date.now()/1e3}getDurationFromParent(){return this.duration||1e3}initWebGL(t){try{if(this.webglCanvas=tI.rF.createCanvas({width:t.width,height:t.height,dpr:tI.rF.devicePixelRatio}),!this.webglCanvas)return console.warn("WebGL canvas creation failed"),!1;this.webglCanvas.style.width=t.style.width||`${t.width}px`,this.webglCanvas.style.height=t.style.height||`${t.height}px`;let e=null;try{(e=this.webglCanvas.getContext("webgl"))||(e=this.webglCanvas.getContext("experimental-webgl"))}catch(t){console.warn("Failed to get WebGL context:",t)}if(this.gl=e,!this.gl)return console.warn("WebGL not supported"),!1;let i=this.getShaderSources();return this.program=this.createShaderProgram(i.vertex,i.fragment),null!==this.program}catch(t){return console.warn("Failed to initialize WebGL:",t),!1}}createShaderProgram(t,e){if(!this.gl)return null;let i=this.createShader(this.gl.VERTEX_SHADER,t),s=this.createShader(this.gl.FRAGMENT_SHADER,e);if(!i||!s)return null;let a=this.gl.createProgram();return a?(this.gl.attachShader(a,i),this.gl.attachShader(a,s),this.gl.linkProgram(a),this.gl.getProgramParameter(a,this.gl.LINK_STATUS)?a:(console.error("Shader program link error:",this.gl.getProgramInfoLog(a)),null)):null}createShader(t,e){if(!this.gl)return null;let i=this.gl.createShader(t);return i?(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.error("Shader compile error:",this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i),null)):null}setupWebGLState(t){this.gl&&this.webglCanvas&&(this.webglCanvas.width===t.width&&this.webglCanvas.height===t.height||(this.webglCanvas.width=t.width,this.webglCanvas.height=t.height),this.gl.viewport(0,0,this.webglCanvas.width,this.webglCanvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}createFullScreenQuad(){if(!this.gl)return null;let t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),e}createTextureFromCanvas(t){if(!this.gl)return null;let e=this.gl.createTexture();return this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}setupVertexAttributes(){if(!this.gl||!this.program)return;let t=this.gl.getAttribLocation(this.program,"a_position"),e=this.gl.getAttribLocation(this.program,"a_texCoord");this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,16,8)}createOutputCanvas(t){let e=tI.rF.createCanvas({width:t.width,height:t.height,dpr:tI.rF.devicePixelRatio}),i=e.getContext("2d");return i?(i.clearRect(0,0,t.width,t.height),i.drawImage(t,0,0),{canvas:e,ctx:i}):null}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return null!==this.getShaderSources()}supportsCanvas2D(){return this.applyCanvas2DEffect!==tD.prototype.applyCanvas2DEffect}release(){super.release(),this.gl&&(this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.gl=null),this.webglCanvas&&(this.webglCanvas=null),this.currentAnimationRatio=0,this.animationTime=0}afterStageRender(t,e){let i=null;if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGL\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u5C1D\u8BD5Canvas 2D\u56DE\u9000"),this.gl)){if(i=this.applyWebGLEffect(e))return i;console.warn("WebGL\u7279\u6548\u6267\u884C\u5931\u8D25\uFF0C\u5C1D\u8BD5Canvas 2D\u56DE\u9000")}if(this.supportsCanvas2D()){if(i=this.applyCanvas2DEffect(e))return i;console.warn("Canvas 2D\u7279\u6548\u6267\u884C\u5931\u8D25")}return this.supportsWebGL()||this.supportsCanvas2D()||console.error(`\u{7279}\u{6548}\u{7C7B} ${this.constructor.name} \u{672A}\u{5B9E}\u{73B0}\u{4EFB}\u{4F55}\u{6E32}\u{67D3}\u{65B9}\u{6CD5}\u{3002}\u{8BF7}\u{5B9E}\u{73B0} applyWebGLEffect \u{6216} applyCanvas2DEffect \u{65B9}\u{6CD5}\u{3002}`),e}}class tM extends tD{constructor(t,e,i,s,a){super(t,e,i,s,a)}getShaderSources(){return null}applyWebGLEffect(t){return null}}class tB extends tD{constructor(t,e,i,s,a){super(t,e,i,s,a)}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources!==tB.prototype.getShaderSources&&null!==this.getShaderSources()}supportsCanvas2D(){return this.applyCanvas2DEffect!==tB.prototype.applyCanvas2DEffect}afterStageRender(t,e){var i,s;let a=null;if(!1!==(null==(s=null==(i=this.params)?void 0:i.options)?void 0:s.useWebGL)){if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGL\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u5C1D\u8BD5Canvas 2D\u56DE\u9000"),this.gl)){if(a=this.applyWebGLEffect(e))return a;console.warn("WebGL\u7279\u6548\u6267\u884C\u5931\u8D25\uFF0C\u5C1D\u8BD5Canvas 2D\u56DE\u9000")}if(this.supportsCanvas2D()){if(a=this.applyCanvas2DEffect(e))return a;console.warn("Canvas 2D\u7279\u6548\u6267\u884C\u5931\u8D25")}}else if(this.supportsCanvas2D()){if(a=this.applyCanvas2DEffect(e))return a;console.warn("Canvas 2D\u7279\u6548\u6267\u884C\u5931\u8D25")}else console.warn(`${this.constructor.name}: useWebGL=false \u{4F46}\u{672A}\u{5B9E}\u{73B0}Canvas 2D\u{65B9}\u{6CD5}`);return this.supportsWebGL()||this.supportsCanvas2D()||console.error(`\u{7279}\u{6548}\u{7C7B} ${this.constructor.name} \u{672A}\u{5B9E}\u{73B0}\u{4EFB}\u{4F55}\u{6E32}\u{67D3}\u{65B9}\u{6CD5}\u{3002}\u{8BF7}\u{5B9E}\u{73B0} applyWebGLEffect \u{6216} applyCanvas2DEffect \u{65B9}\u{6CD5}\u{3002}`),e}}class tR{static createTempCanvas(t,e,i){return tI.rF.createCanvas({width:t,height:e,dpr:i||tI.rF.devicePixelRatio})}static cloneImageData(t){return new ImageData(new Uint8ClampedArray(t.data),t.width,t.height)}static lerp(t,e,i){return t*(1-i)+e*i}static smoothstep(t,e,i){let s=Math.max(0,Math.min(1,(i-t)/(e-t)));return s*s*(3-2*s)}static distance(t,e,i,s){let a=i-t,r=s-e;return Math.sqrt(a*a+r*r)}static normalizeAngle(t){return(t+Math.PI)/(2*Math.PI)}static pixelNoise(t,e,i){if(i<=0)return 0;let s=43758.5453*Math.sin(Math.floor(t/i)*i*12.9898+Math.floor(e/i)*i*78.233);return s-Math.floor(s)}static generateNoiseTexture(t,e){let i=new Uint8Array(t*e);for(let t=0;t<i.length;t++)i[t]=Math.floor(256*Math.random());return i}static applyCSSFilter(t,e){let i=this.createTempCanvas(t.width,t.height),s=i.getContext("2d");return s?(s.filter=e,s.drawImage(t,0,0),s.filter="none",i):t}static extractChannel(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);for(let t=0;t<i.length;t+=4)r[t]=0,r[t+1]=0,r[t+2]=0,r[t+3]=i[t+3],e>=0&&e<=2&&(r[t+e]=i[t+e]);return new ImageData(r,s,a)}static blendImageData(t,e,i){let{data:s,width:a,height:r}=t,{data:n}=e,o=new Uint8ClampedArray(s.length);for(let t=0;t<s.length;t+=4)o[t]=Math.round(this.lerp(s[t],n[t],i)),o[t+1]=Math.round(this.lerp(s[t+1],n[t+1],i)),o[t+2]=Math.round(this.lerp(s[t+2],n[t+2],i)),o[t+3]=Math.round(this.lerp(s[t+3],n[t+3],i));return new ImageData(o,a,r)}static getLuminance(t,e,i){return .299*t+.587*e+.114*i}static applySepiaToPixel(t,e,i){return[Math.min(255,.393*t+.769*e+.189*i),Math.min(255,.349*t+.686*e+.168*i),Math.min(255,.272*t+.534*e+.131*i)]}static calculateDynamicStrength(t,e){return e/(2*Math.PI)*t}}class tk{}tk.STANDARD_VERTEX_SHADER="\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    varying vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  ",tk.SHADER_FUNCTIONS="\n    // \u4EAE\u5EA6\u8BA1\u7B97\u51FD\u6570\n    float luminance(vec3 color) {\n      return dot(color, vec3(0.299, 0.587, 0.114));\n    }\n\n    // \u8910\u8272\u8C03\u51FD\u6570\n    vec3 sepia(vec3 color) {\n      float r = color.r * 0.393 + color.g * 0.769 + color.b * 0.189;\n      float g = color.r * 0.349 + color.g * 0.686 + color.b * 0.168;\n      float b = color.r * 0.272 + color.g * 0.534 + color.b * 0.131;\n      return vec3(r, g, b);\n    }\n\n    // \u7EBF\u6027\u63D2\u503C\u51FD\u6570\n    float lerp(float a, float b, float t) {\n      return a * (1.0 - t) + b * t;\n    }\n\n\n    // \u7B80\u5355\u566A\u58F0\u51FD\u6570\n    float pixelNoise(vec2 coord, float pixelSize) {\n      vec2 gridCoord = floor(coord / pixelSize) * pixelSize;\n      return fract(sin(dot(gridCoord, vec2(12.9898, 78.233))) * 43758.5453123);\n    }\n\n    // \u52A8\u6001\u5F3A\u5EA6\u8BA1\u7B97\n    float calculateDynamicStrength(float baseStrength, float time) {\n      return baseStrength * (time / 6.28318531); // 2\u03C0\n    }\n  ";class tF extends tB{constructor(t,e,i,s,a){var r,n,o,l;super(t,e,i,s,a),this.noiseData=null;let h=null==(r=null==a?void 0:a.options)?void 0:r.noiseScale,u=void 0!==h?Math.max(0,Math.floor(h)):8;this.dissolveConfig={dissolveType:(null==(n=null==a?void 0:a.options)?void 0:n.dissolveType)||"outward",useWebGL:void 0===(null==(o=null==a?void 0:a.options)?void 0:o.useWebGL)||a.options.useWebGL,noiseScale:u,fadeEdge:void 0===(null==(l=null==a?void 0:a.options)?void 0:l.fadeEdge)||a.options.fadeEdge}}getShaderSources(){return{vertex:tk.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform sampler2D u_noiseTexture;
      uniform float u_time;
      uniform int u_dissolveType;
      uniform vec2 u_resolution;
      uniform float u_noiseScale;
      uniform bool u_fadeEdge;
      varying vec2 v_texCoord;

      ${tk.SHADER_FUNCTIONS}

      // \u{5411}\u{5916}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float outwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        // \u{5F52}\u{4E00}\u{5316}\u{8DDD}\u{79BB} (0\u{4E3A}\u{4E2D}\u{5FC3}\u{FF0C}1\u{4E3A}\u{8FB9}\u{7F18})
        float normalizedDist = distFromCenter / maxDist;

        // \u{5411}\u{5916}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}\u{8FB9}\u{7F18}\u{5F00}\u{59CB}\u{6EB6}\u{89E3}\u{FF0C}time\u{63A7}\u{5236}\u{6EB6}\u{89E3}\u{8FDB}\u{5EA6}
        // \u{589E}\u{52A0}\u{5B89}\u{5168}\u{8FB9}\u{8DDD}\u{FF0C}\u{786E}\u{4FDD}\u{52A8}\u{753B}\u{7ED3}\u{675F}\u{65F6}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}
        float edgeThreshold = 1.2 - time * 1.5;

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          // \u{6DFB}\u{52A0}\u{57FA}\u{4E8E}\u{50CF}\u{7D20}\u{5927}\u{5C0F}\u{7684}\u{566A}\u{58F0}\u{FF0C}\u{8BA9}\u{8FB9}\u{7F18}\u{5448}\u{73B0}\u{9897}\u{7C92}\u{72B6}
          vec2 pixelCoord = uv * resolution; // \u{8F6C}\u{6362}\u{4E3A}\u{50CF}\u{7D20}\u{5750}\u{6807}
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4; // \u{589E}\u{5F3A}\u{566A}\u{58F0}\u{5F71}\u{54CD}
          edgeThreshold += noiseInfluence;
          return normalizedDist > edgeThreshold ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.15; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return 1.0 - smoothstep(edgeThreshold - fadeWidth, edgeThreshold, normalizedDist);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return normalizedDist > edgeThreshold ? 0.0 : 1.0;
          }
        }
      }

      // \u{5411}\u{5185}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float inwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        float normalizedDist = distFromCenter / maxDist;

        // \u{5411}\u{5185}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}\u{4E2D}\u{5FC3}\u{5F00}\u{59CB}\u{6EB6}\u{89E3}\u{FF0C}time\u{63A7}\u{5236}\u{6EB6}\u{89E3}\u{8FDB}\u{5EA6}
        // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{FF0C}\u{786E}\u{4FDD}\u{52A8}\u{753B}\u{7ED3}\u{675F}\u{65F6}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}
        float centerThreshold = time * 1.4;

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4;
          centerThreshold += noiseInfluence;
          return normalizedDist < centerThreshold ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.15; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(centerThreshold, centerThreshold + fadeWidth, normalizedDist);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return normalizedDist < centerThreshold ? 0.0 : 1.0;
          }
        }
      }

      // \u{5F84}\u{5411}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float radialDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float angle = atan(uv.y - center.y, uv.x - center.x);
        float normalizedAngle = (angle + 3.14159) / (2.0 * 3.14159);

        // \u{5F84}\u{5411}\u{6EB6}\u{89E3}\u{FF1A}\u{6309}\u{89D2}\u{5EA6}\u{987A}\u{5E8F}\u{6EB6}\u{89E3}\u{FF0C}time\u{63A7}\u{5236}\u{6EB6}\u{89E3}\u{8FDB}\u{5EA6}
        // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{FF0C}\u{786E}\u{4FDD}\u{52A8}\u{753B}\u{7ED3}\u{675F}\u{65F6}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}
        float angleThreshold = time * 1.2;

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          angleThreshold += noiseInfluence;
          return normalizedAngle < angleThreshold ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.08; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(angleThreshold, angleThreshold + fadeWidth, normalizedAngle);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return normalizedAngle < angleThreshold ? 0.0 : 1.0;
          }
        }
      }

      // \u{4ECE}\u{5DE6}\u{5230}\u{53F3}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float leftToRightDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // \u{5DE6}\u{5230}\u{53F3}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}x=0\u{5F00}\u{59CB}\u{5411}x=1\u{6EB6}\u{89E3}
        float dissolvePosition = time * 1.2; // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{786E}\u{4FDD}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x < dissolvePosition ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.08; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.x);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return uv.x < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // \u{4ECE}\u{53F3}\u{5230}\u{5DE6}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float rightToLeftDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // \u{53F3}\u{5230}\u{5DE6}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}x=1\u{5F00}\u{59CB}\u{5411}x=0\u{6EB6}\u{89E3}
        float dissolvePosition = 1.0 - time * 1.2; // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{786E}\u{4FDD}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x > dissolvePosition ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.08; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.x);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return uv.x > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // \u{4ECE}\u{4E0A}\u{5230}\u{4E0B}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float topToBottomDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // \u{4E0A}\u{5230}\u{4E0B}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}y=0\u{5F00}\u{59CB}\u{5411}y=1\u{6EB6}\u{89E3}
        float dissolvePosition = time * 1.2; // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{786E}\u{4FDD}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y < dissolvePosition ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.08; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.y);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return uv.y < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // \u{4ECE}\u{4E0B}\u{5230}\u{4E0A}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
      float bottomToTopDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // \u{4E0B}\u{5230}\u{4E0A}\u{6EB6}\u{89E3}\u{FF1A}\u{4ECE}y=1\u{5F00}\u{59CB}\u{5411}y=0\u{6EB6}\u{89E3}
        float dissolvePosition = 1.0 - time * 1.2; // \u{589E}\u{52A0}\u{7CFB}\u{6570}\u{786E}\u{4FDD}\u{5B8C}\u{5168}\u{6EB6}\u{89E3}

        // \u{5F53}pixelSize > 0\u{65F6}\u{6DFB}\u{52A0}\u{9897}\u{7C92}\u{6548}\u{679C}
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y > dissolvePosition ? 0.0 : 1.0;
        } else {
          // \u{5E73}\u{6ED1}\u{6EB6}\u{89E3}\u{FF1A}\u{6839}\u{636E}fadeEdge\u{51B3}\u{5B9A}\u{662F}\u{5426}\u{4F7F}\u{7528}\u{6E10}\u{53D8}
          if (u_fadeEdge) {
            // \u{67D4}\u{548C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}\u{6E10}\u{53D8}\u{503C}
            float fadeWidth = 0.08; // \u{6E10}\u{53D8}\u{5BBD}\u{5EA6}
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.y);
          } else {
            // \u{786C}\u{8FB9}\u{7F18}\u{FF1A}\u{8FD4}\u{56DE}0\u{6216}1
            return uv.y > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      void main() {
        vec2 uv = v_texCoord;
        vec4 texColor = texture2D(u_texture, uv);

        float alpha = 1.0;

        // \u{6839}\u{636E}\u{6EB6}\u{89E3}\u{7C7B}\u{578B}\u{9009}\u{62E9}\u{5BF9}\u{5E94}\u{7684}\u{6EB6}\u{89E3}\u{51FD}\u{6570}
        if (u_dissolveType == 0) {
          alpha = outwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 1) {
          alpha = inwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 2) {
          alpha = radialDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 3) {
          alpha = leftToRightDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 4) {
          alpha = rightToLeftDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 5) {
          alpha = topToBottomDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 6) {
          alpha = bottomToTopDissolve(uv, u_time, u_noiseScale, u_resolution);
        }

        gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return t;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return t;this.noiseData||(this.noiseData=tR.generateNoiseTexture(256,256));let i=this.gl.createTexture();this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,256,256,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.noiseData),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let s=this.createFullScreenQuad();return s?(this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setUniforms(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.deleteTexture(e),this.gl.deleteTexture(i),this.gl.deleteBuffer(s),this.webglCanvas):t}setUniforms(){if(!this.gl||!this.program||!this.webglCanvas)return;let t=this.gl.getUniformLocation(this.program,"u_texture"),e=this.gl.getUniformLocation(this.program,"u_noiseTexture"),i=this.gl.getUniformLocation(this.program,"u_time"),s=this.gl.getUniformLocation(this.program,"u_dissolveType"),a=this.gl.getUniformLocation(this.program,"u_resolution"),r=this.gl.getUniformLocation(this.program,"u_noiseScale"),n=this.gl.getUniformLocation(this.program,"u_fadeEdge");this.gl.uniform1i(t,0),this.gl.uniform1i(e,1),this.gl.uniform1f(i,this.currentAnimationRatio),this.gl.uniform2f(a,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1f(r,this.dissolveConfig.noiseScale),this.gl.uniform1i(n,+!!this.dissolveConfig.fadeEdge),this.gl.uniform1i(s,{outward:0,inward:1,radial:2,leftToRight:3,rightToLeft:4,topToBottom:5,bottomToTop:6}[this.dissolveConfig.dissolveType]||0)}applyCanvas2DEffect(t){let e,i=this.createOutputCanvas(t);if(!i)return t;let{canvas:s,ctx:a}=i,r=a.getImageData(0,0,t.width,t.height),n=this.currentAnimationRatio;switch(this.dissolveConfig.dissolveType){case"outward":e=this.applyOutwardDissolve(r,n);break;case"inward":e=this.applyInwardDissolve(r,n);break;case"radial":e=this.applyRadialDissolve(r,n);break;case"leftToRight":e=this.applyLeftToRightDissolve(r,n);break;case"rightToLeft":e=this.applyRightToLeftDissolve(r,n);break;case"topToBottom":e=this.applyTopToBottomDissolve(r,n);break;case"bottomToTop":e=this.applyBottomToTopDissolve(r,n);break;default:e=r}return a.putImageData(e,0,0),s}applyOutwardDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=s/2,o=a/2,l=Math.sqrt(n*n+o*o),h=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let a=i-n,u=t-o,p=Math.sqrt(a*a+u*u)/l,d=1.2-1.4*e,c=1;if(h>0)d+=.4*(tR.pixelNoise(i,t,h)-.5),c=p>d?0:1;else if(this.dissolveConfig.fadeEdge){let t=d-.15;c=p<t?1:p>d?0:1-(p-t)/(d-t)}else c=p>d?0:1;let g=4*(t*s+i);r[g+3]=Math.floor(r[g+3]*c)}return new ImageData(r,s,a)}applyInwardDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=s/2,o=a/2,l=Math.sqrt(n*n+o*o),h=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let a=i-n,u=t-o,p=Math.sqrt(a*a+u*u)/l,d=1.4*e,c=1;if(h>0)d+=.4*(tR.pixelNoise(i,t,h)-.5),c=p<d?0:1;else if(this.dissolveConfig.fadeEdge){let t=d+.15;c=p<d?0:p>t?1:(p-d)/(t-d)}else c=p<d?0:1;let g=4*(t*s+i);r[g+3]=Math.floor(r[g+3]*c)}return new ImageData(r,s,a)}applyRadialDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=s/2,o=a/2,l=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let a=(Math.atan2(t-o,i-n)+Math.PI)/(2*Math.PI),h=1.2*e,u=1;if(l>0)h+=.3*(tR.pixelNoise(i,t,l)-.5),u=a<h?0:1;else if(this.dissolveConfig.fadeEdge){let t=h+.08;u=a<h?0:a>t?1:(a-h)/(t-h)}else u=a<h?0:1;let p=4*(t*s+i);r[p+3]=Math.floor(r[p+3]*u)}return new ImageData(r,s,a)}applyLeftToRightDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let a=i/s,o=1.2*e,l=1;if(n>0)o+=.3*(tR.pixelNoise(i,t,n)-.5),l=a<o?0:1;else if(this.dissolveConfig.fadeEdge){let t=o+.08;l=a<o?0:a>t?1:(a-o)/(t-o)}else l=a<o?0:1;let h=4*(t*s+i);r[h+3]=Math.floor(r[h+3]*l)}return new ImageData(r,s,a)}applyRightToLeftDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let a=i/s,o=1-1.2*e,l=1;if(n>0)o+=.3*(tR.pixelNoise(i,t,n)-.5),l=a>o?0:1;else if(this.dissolveConfig.fadeEdge){let t=o-.08;l=a<t?1:a>o?0:1-(a-t)/(o-t)}else l=a>o?0:1;let h=4*(t*s+i);r[h+3]=Math.floor(r[h+3]*l)}return new ImageData(r,s,a)}applyTopToBottomDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let o=t/a,l=1.2*e,h=1;if(n>0)l+=.3*(tR.pixelNoise(i,t,n)-.5),h=o<l?0:1;else if(this.dissolveConfig.fadeEdge){let t=l+.08;h=o<l?0:o>t?1:(o-l)/(t-l)}else h=o<l?0:1;let u=4*(t*s+i);r[u+3]=Math.floor(r[u+3]*h)}return new ImageData(r,s,a)}applyBottomToTopDissolve(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i.length);r.set(i);let n=this.dissolveConfig.noiseScale;for(let t=0;t<a;t++)for(let i=0;i<s;i++){let o=t/a,l=1-1.2*e,h=1;if(n>0)l+=.3*(tR.pixelNoise(i,t,n)-.5),h=o>l?0:1;else if(this.dissolveConfig.fadeEdge){let t=l-.08;h=o<t?1:o>l?0:1-(o-t)/(l-t)}else h=o>l?0:1;let u=4*(t*s+i);r[u+3]=Math.floor(r[u+3]*h)}return new ImageData(r,s,a)}}class tU extends tB{constructor(t,e,i,s,a){var r,n,o;super(t,e,i,s,a);let l=Math.max(0,Math.min(1,void 0!==(null==(r=null==a?void 0:a.options)?void 0:r.strength)?a.options.strength:1));this.colorConfig={effectType:(null==(n=null==a?void 0:a.options)?void 0:n.effectType)||"grayscale",strength:l,useWebGL:void 0===(null==(o=null==a?void 0:a.options)?void 0:o.useWebGL)||a.options.useWebGL}}getShaderSources(){return{vertex:tk.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_effectType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      ${tk.SHADER_FUNCTIONS}

      void main() {
        vec2 uv = v_texCoord;
        vec4 originalColor = texture2D(u_texture, uv);
        vec3 color = originalColor.rgb;

        // \u{8BA1}\u{7B97}\u{52A8}\u{6001}\u{5F3A}\u{5EA6}
        float dynamicStrength = calculateDynamicStrength(u_strength, u_time);

        if (u_effectType == 0) {
          // \u{7070}\u{5EA6}\u{6548}\u{679C}
          float gray = luminance(color);
          vec3 grayColor = vec3(gray);
          color = mix(color, grayColor, dynamicStrength);
        } else if (u_effectType == 1) {
          // \u{8910}\u{8272}\u{8C03}\u{6548}\u{679C}
          vec3 sepiaColor = sepia(color);
          color = mix(color, sepiaColor, dynamicStrength);
        }

        gl_FragColor = vec4(color, originalColor.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return null;let i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setColorUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setColorUniforms(){if(!this.gl||!this.program)return;let t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),s=this.gl.getUniformLocation(this.program,"u_effectType"),a=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.colorConfig.strength),this.gl.uniform2f(a,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(s,{grayscale:0,sepia:1}[this.colorConfig.effectType]||0)}applyCanvas2DEffect(t){if(this.colorConfig.strength<=0){let e=this.createOutputCanvas(t);return e?e.canvas:null}if(this.canUseCSSFilter())return this.applyCSSFilter(t);let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let s,a=i.getImageData(0,0,t.width,t.height),r=this.getAnimationTime();switch(this.colorConfig.effectType){case"grayscale":default:s=this.applyGrayscaleEffect(a,this.colorConfig.strength,r);break;case"sepia":s=this.applySepiaEffect(a,this.colorConfig.strength,r)}return i.clearRect(0,0,t.width,t.height),i.putImageData(s,0,0),e.canvas}catch(t){return console.warn("Canvas 2D color effect failed:",t),null}}canUseCSSFilter(){var t;return!!window.useFilterAPI&&"undefined"!=typeof CSS&&(null==(t=CSS.supports)?void 0:t.call(CSS,"filter","grayscale(1)"))}applyCSSFilter(t){try{let e=tR.createTempCanvas(t.width,t.height),i=e.getContext("2d");if(!i)return null;let s=this.getAnimationTime(),a=tR.calculateDynamicStrength(this.colorConfig.strength,s),r="";return"grayscale"===this.colorConfig.effectType?r=`grayscale(${Math.min(1,a)})`:"sepia"===this.colorConfig.effectType&&(r=`sepia(${Math.min(1,a)})`),i.filter=r,i.drawImage(t,0,0),i.filter="none",e}catch(t){return console.warn("CSS Filter API failed, falling back to pixel processing:",t),null}}applyGrayscaleEffect(t,e,i){let{data:s,width:a,height:r}=t,n=new Uint8ClampedArray(s.length),o=tR.calculateDynamicStrength(e,i);for(let t=0;t<s.length;t+=4){let e=s[t],i=s[t+1],a=s[t+2],r=s[t+3],l=tR.getLuminance(e,i,a);n[t]=Math.round(tR.lerp(e,l,o)),n[t+1]=Math.round(tR.lerp(i,l,o)),n[t+2]=Math.round(tR.lerp(a,l,o)),n[t+3]=r}return new ImageData(n,a,r)}applySepiaEffect(t,e,i){let{data:s,width:a,height:r}=t,n=new Uint8ClampedArray(s.length),o=tR.calculateDynamicStrength(e,i);for(let t=0;t<s.length;t+=4){let e=s[t],i=s[t+1],a=s[t+2],r=s[t+3],[l,h,u]=tR.applySepiaToPixel(e,i,a);n[t]=Math.round(tR.lerp(e,l,o)),n[t+1]=Math.round(tR.lerp(i,h,o)),n[t+2]=Math.round(tR.lerp(a,u,o)),n[t+3]=r}return new ImageData(n,a,r)}afterStageRender(t,e){if(this.canUseCSSFilter()&&this.colorConfig.strength>0){let t=this.applyCSSFilter(e);if(t)return t}return super.afterStageRender(t,e)}}class tL extends tB{constructor(t,e,i,s,a){var r,n,o;super(t,e,i,s,a),this.distortionConfig={distortionType:(null==(r=null==a?void 0:a.options)?void 0:r.distortionType)||"wave",strength:(null==(n=null==a?void 0:a.options)?void 0:n.strength)||.3,useWebGL:void 0===(null==(o=null==a?void 0:a.options)?void 0:o.useWebGL)||a.options.useWebGL}}getShaderSources(){return{vertex:"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n\n      void main() {\n        gl_Position = vec4(a_position, 0.0, 1.0);\n        v_texCoord = a_texCoord;\n      }\n    ",fragment:"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      uniform float u_time;\n      uniform float u_strength;\n      uniform int u_distortionType;\n      uniform vec2 u_resolution;\n      varying vec2 v_texCoord;\n\n      // \u6CE2\u6D6A\u626D\u66F2\u51FD\u6570\n      vec2 wave(vec2 uv, float time, float strength) {\n        float waveX = sin(uv.y * 10.0 + time * 3.0) * strength * 0.1;\n        float waveY = sin(uv.x * 10.0 + time * 2.0) * strength * 0.1;\n        return uv + vec2(waveX, waveY);\n      }\n\n      // \u6D9F\u6F2A\u626D\u66F2\u51FD\u6570\n      vec2 ripple(vec2 uv, float time, float strength) {\n        vec2 center = vec2(0.5, 0.5);\n        float distance = length(uv - center);\n        float ripple = sin(distance * 20.0 - time * 5.0) * strength * 0.1;\n        vec2 direction = normalize(uv - center);\n        return uv + direction * ripple;\n      }\n\n      // \u6F29\u6DA1\u626D\u66F2\u51FD\u6570\n      vec2 swirl(vec2 uv, float time, float strength) {\n        vec2 center = vec2(0.5, 0.5);\n        vec2 delta = uv - center;\n        float dist = length(delta);\n        float originalAngle = atan(delta.y, delta.x);\n        float rotationAngle = dist * strength * time * 2.0;\n        float finalAngle = originalAngle + rotationAngle;\n        return center + dist * vec2(cos(finalAngle), sin(finalAngle));\n      }\n\n      void main() {\n        vec2 uv = v_texCoord;\n\n        // \u6839\u636E\u626D\u66F2\u7C7B\u578B\u5E94\u7528\u76F8\u5E94\u53D8\u6362\n        if (u_distortionType == 0) {\n          uv = wave(uv, u_time, u_strength);\n        } else if (u_distortionType == 1) {\n          uv = ripple(uv, u_time, u_strength);\n        } else if (u_distortionType == 2) {\n          uv = swirl(uv, u_time, u_strength);\n        }\n\n        // \u8FB9\u754C\u68C0\u67E5\n        if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        } else {\n          gl_FragColor = texture2D(u_texture, uv);\n        }\n      }\n    "}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return null;let i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setDistortionUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setDistortionUniforms(){if(!this.gl||!this.program)return;let t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),s=this.gl.getUniformLocation(this.program,"u_distortionType"),a=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.distortionConfig.strength),this.gl.uniform2f(a,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(s,{wave:0,ripple:1,swirl:2}[this.distortionConfig.distortionType]||0)}applyCanvas2DEffect(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let s,a=i.getImageData(0,0,t.width,t.height),r=this.getAnimationTime();switch(this.distortionConfig.distortionType){case"wave":s=this.applyWaveDistortion(a,this.distortionConfig.strength,r);break;case"ripple":s=this.applyRippleDistortion(a,this.distortionConfig.strength,r);break;case"swirl":s=this.applySwirlDistortion(a,this.distortionConfig.strength,r);break;default:s=a}return i.clearRect(0,0,t.width,t.height),i.putImageData(s,0,0),e.canvas}catch(t){return console.warn("Canvas 2D distortion effect failed:",t),null}}applyWaveDistortion(t,e,i){let{data:s,width:a,height:r}=t,n=new Uint8ClampedArray(s.length);for(let t=0;t<r;t++)for(let o=0;o<a;o++){let l=Math.sin(.1*t+3*i)*e*20,h=Math.sin(.1*o+2*i)*e*20,u=Math.round(o-l),p=Math.round(t-h),d=4*(t*a+o);if(u>=0&&u<a&&p>=0&&p<r){let t=4*(p*a+u);n[d]=s[t],n[d+1]=s[t+1],n[d+2]=s[t+2],n[d+3]=s[t+3]}else n[d+3]=0}return new ImageData(n,a,r)}applyRippleDistortion(t,e,i){let{data:s,width:a,height:r}=t,n=new Uint8ClampedArray(s.length),o=a/2,l=r/2;for(let t=0;t<r;t++)for(let h=0;h<a;h++){let u=h-o,p=t-l,d=Math.sin(.2*Math.sqrt(u*u+p*p)-5*i)*e*10,c=Math.atan2(p,u),g=Math.round(h-Math.cos(c)*d),f=Math.round(t-Math.sin(c)*d),m=4*(t*a+h);if(g>=0&&g<a&&f>=0&&f<r){let t=4*(f*a+g);n[m]=s[t],n[m+1]=s[t+1],n[m+2]=s[t+2],n[m+3]=s[t+3]}else n[m+3]=0}return new ImageData(n,a,r)}applySwirlDistortion(t,e,i){let{data:s,width:a,height:r}=t,n=new Uint8ClampedArray(s.length),o=a/2,l=r/2;for(let t=0;t<r;t++)for(let h=0;h<a;h++){let u=h-o,p=t-l,d=Math.sqrt(u*u+p*p),c=Math.atan2(p,u)+d*e*i*.02,g=Math.round(o+d*Math.cos(c)),f=Math.round(l+d*Math.sin(c)),m=4*(t*a+h);if(g>=0&&g<a&&f>=0&&f<r){let t=4*(f*a+g);n[m]=s[t],n[m+1]=s[t+1],n[m+2]=s[t+2],n[m+3]=s[t+3]}else n[m+3]=0}return new ImageData(n,a,r)}afterStageRender(t,e){return this.distortionConfig.strength<=0?e:super.afterStageRender(t,e)}}class tK extends tB{constructor(t,e,i,s,a){var r,n,o,l,h;super(t,e,i,s,a),this.particles=[],this.positionBuffer=null,this.colorBuffer=null,this.particleConfig={effectType:(null==(r=null==a?void 0:a.options)?void 0:r.effectType)||"gravity",count:(null==(n=null==a?void 0:a.options)?void 0:n.count)||4e3,size:(null==(o=null==a?void 0:a.options)?void 0:o.size)||20,strength:(null==(l=null==a?void 0:a.options)?void 0:l.strength)||1.5,useWebGL:void 0===(null==(h=null==a?void 0:a.options)?void 0:h.useWebGL)||a.options.useWebGL}}getShaderSources(){return{vertex:"\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_size;\n\n      uniform vec2 u_resolution;\n      uniform float u_time;\n      uniform float u_forceStrength;\n      uniform int u_effectType;\n\n      varying vec4 v_color;\n\n      void main() {\n        // \u5C06\u50CF\u7D20\u5750\u6807\u8F6C\u6362\u4E3A\u526A\u8F91\u7A7A\u95F4\u5750\u6807\n        vec2 clipSpace = ((a_position / u_resolution) * 2.0) - 1.0;\n        clipSpace.y = -clipSpace.y; // \u7FFB\u8F6CY\u8F74\n\n        gl_Position = vec4(clipSpace, 0.0, 1.0);\n        gl_PointSize = a_size;\n        v_color = a_color;\n      }\n    ",fragment:"\n      precision mediump float;\n      varying vec4 v_color;\n\n      void main() {\n        // \u521B\u5EFA\u5706\u5F62\u7C92\u5B50\n        vec2 coord = gl_PointCoord - vec2(0.5);\n        float distance = length(coord);\n\n        if (distance > 0.5) {\n          discard;\n        }\n\n        // \u4FDD\u6301\u539F\u59CB\u989C\u8272\uFF0C\u53EA\u8C03\u6574\u900F\u660E\u5EA6\u6E10\u53D8\n        gl_FragColor = vec4(v_color.rgb, v_color.a);\n      }\n    "}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t),0===this.particles.length&&this.extractParticles(t),this.updateParticles(t);let e=this.gl;return e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.program),this.prepareAndDrawParticles(e),this.webglCanvas}applyCanvas2DEffect(t){let e=this.createOutputCanvas(t);if(!e)return null;let{canvas:i,ctx:s}=e,a=this.currentAnimationRatio;switch(this.particleConfig.effectType){case"explode":this.applyCanvas2DExplode(s,t,a);break;case"gravity":this.applyCanvas2DGravity(s,t,a);break;case"vortex":this.applyCanvas2DVortex(s,t,a);break;default:s.globalAlpha=Math.max(0,1-a),s.drawImage(t,0,0)}return i}extractParticles(t){let e=tR.createTempCanvas(t.width,t.height,1),i=e.getContext("2d");if(!i)return;i.drawImage(t,0,0,e.width,e.height);let s=i.getImageData(0,0,e.width,e.height).data;this.particles=[];let a=Math.max(1,Math.floor(Math.sqrt(e.width*e.height/(1.5*this.particleConfig.count))));for(let i=0;i<e.height;i+=a)for(let r=0;r<e.width;r+=a){let a=4*(i*e.width+r),n=s[a],o=s[a+1],l=s[a+2],h=s[a+3];if(h>5){let s=r/e.width*t.width,a=i/e.height*t.height,u={x:s,y:a,originX:s,originY:a,vx:0,vy:0,r:n/255,g:o/255,b:l/255,a:Math.max(.6,h/255),life:1,size:this.particleConfig.size*(1+.5*Math.random())};this.particles.push(u)}}}updateParticles(t){let e=t.width/2,i=t.height/2,s=this.currentAnimationRatio,a=this.getDurationFromParent(),r=a<2e3,n=r?Math.max(1.5,3e3/a):1,o=r?Math.min(2,2e3/a):1;this.particles.forEach(a=>{let l=a.x-e,h=a.y-i,u=Math.sqrt(l*l+h*h),p=Math.atan2(h,l);this.applyParticleForces(a,p,u,s,o,t),this.updateParticleProperties(a,s,r,n,o)})}applyParticleForces(t,e,i,s,a,r){let n=this.getAnimationTime();switch(this.particleConfig.effectType){case"explode":let o=s*this.particleConfig.strength*a*5;t.vx+=Math.cos(e)*o,t.vy+=Math.sin(e)*o;break;case"gravity":this.applyGravityEffect(t,s,a,r,n);break;case"vortex":this.applyVortexEffect(t,s,a,r,e,i)}}applyGravityEffect(t,e,i,s,a){let r=(t.originX+.7*t.originY)/(s.width+s.height)*.8;if(e>r){let s=(e-r)/(1-r),n=this.particleConfig.strength*s*s*12*i;t.vy+=n;let o=Math.sin(3*a+.02*t.originX)*Math.cos(2*a+.015*t.originY);t.vx+=o*this.particleConfig.strength*2*i}}applyVortexEffect(t,e,i,s,a,r){let n=s.width/2,o=s.height/2,l=a+e*Math.PI*.8,h=r+e*Math.max(s.width,s.height)*1.26,u=n+Math.cos(l)*h,p=o+Math.sin(l)*h,d=e*this.particleConfig.strength*.08*i;t.vx+=(u-t.x)*d,t.vy+=(p-t.y)*d}updateParticleProperties(t,e,i,s,a){let r=i?.99:.98;(t.vx*=r,t.vy*=r,t.x+=t.vx,t.y+=t.vy,i)?(t.life=Math.max(0,1-e*Math.max(.1,.5/s)),t.a=Math.max(.2,t.life*Math.min(1,1.2*t.a)),t.size=Math.max(.7*this.particleConfig.size,this.particleConfig.size*(.5+.5*t.life))):(t.life=Math.max(0,1-.2*e),t.a=Math.max(.1,t.life*Math.min(1,1.5*t.a)),t.size=Math.max(.5*this.particleConfig.size,this.particleConfig.size*(.3+.7*t.life)))}prepareAndDrawParticles(t){let e=new Float32Array(2*this.particles.length),i=new Float32Array(4*this.particles.length),s=new Float32Array(this.particles.length);this.particles.forEach((t,a)=>{e[2*a]=t.x,e[2*a+1]=t.y,i[4*a]=t.r,i[4*a+1]=t.g,i[4*a+2]=t.b,i[4*a+3]=Math.max(.1,t.a),s[a]=Math.max(6,1.5*t.size)}),this.updateParticleBuffers(t,e,i,s),this.setParticleUniforms(t),t.drawArrays(t.POINTS,0,this.particles.length),this.cleanupTempBuffers(t)}updateParticleBuffers(t,e,i,s){this.positionBuffer||(this.positionBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW);let a=t.getAttribLocation(this.program,"a_position");t.enableVertexAttribArray(a),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),this.colorBuffer||(this.colorBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW);let r=t.getAttribLocation(this.program,"a_color");t.enableVertexAttribArray(r),t.vertexAttribPointer(r,4,t.FLOAT,!1,0,0);let n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,s,t.DYNAMIC_DRAW);let o=t.getAttribLocation(this.program,"a_size");t.enableVertexAttribArray(o),t.vertexAttribPointer(o,1,t.FLOAT,!1,0,0),this._tempSizeBuffer=n}setParticleUniforms(t){let e=t.getUniformLocation(this.program,"u_resolution"),i=t.getUniformLocation(this.program,"u_time"),s=t.getUniformLocation(this.program,"u_forceStrength"),a=t.getUniformLocation(this.program,"u_effectType");t.uniform2f(e,this.webglCanvas.width,this.webglCanvas.height),t.uniform1f(i,this.getAnimationTime()),t.uniform1f(s,this.particleConfig.strength),t.uniform1i(a,{explode:0,vortex:1,gravity:2}[this.particleConfig.effectType]||0)}cleanupTempBuffers(t){let e=this._tempSizeBuffer;e&&(t.deleteBuffer(e),delete this._tempSizeBuffer)}applyCanvas2DExplode(t,e,i){let s=e.width/2,a=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(s,a);let r=1+.5*i;t.scale(r,r),t.translate(-s,-a),t.drawImage(e,0,0),t.restore()}applyCanvas2DGravity(t,e,i){t.save(),t.globalAlpha=Math.max(0,1-i);let s=i*e.height*.3;t.drawImage(e,0,s),t.restore()}applyCanvas2DVortex(t,e,i){let s=e.width/2,a=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(s,a),t.rotate(i*Math.PI*2),t.translate(-s,-a),t.drawImage(e,0,0),t.restore()}}class tN extends tM{constructor(t,e,i,s,a){var r,n;super(t,e,i,s,a),this.glitchConfig={effectType:(null==(r=null==a?void 0:a.options)?void 0:r.effectType)||"rgb-shift",intensity:void 0!==(null==(n=null==a?void 0:a.options)?void 0:n.intensity)?a.options.intensity:.5}}applyCanvas2DEffect(t){if(this.glitchConfig.intensity<=0){let e=this.createOutputCanvas(t);return e?e.canvas:null}try{switch(this.glitchConfig.effectType){case"rgb-shift":default:return this.applyRGBShiftGlitch(t);case"digital-distortion":return this.applyDigitalDistortionGlitch(t);case"scan-lines":return this.applyScanLineGlitch(t);case"data-corruption":return this.applyDataCorruptionGlitch(t)}}catch(t){return console.warn("Glitch effect failed:",t),null}}applyRGBShiftGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{i.clearRect(0,0,t.width,t.height);let s=tR.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=Math.floor(20*s),r=this.generateRandomOffset(a),n=this.generateRandomOffset(a,.3),o=this.generateRandomOffset(-a),l=tR.createTempCanvas(t.width,t.height),h=l.getContext("2d");h.drawImage(t,0,0);let u=h.getImageData(0,0,t.width,t.height),p=tR.extractChannel(u,0),d=tR.extractChannel(u,1),c=tR.extractChannel(u,2);return i.globalCompositeOperation="screen",h.clearRect(0,0,t.width,t.height),h.putImageData(p,0,0),i.drawImage(l,r.x,r.y),h.clearRect(0,0,t.width,t.height),h.putImageData(d,0,0),i.drawImage(l,n.x,n.y),h.clearRect(0,0,t.width,t.height),h.putImageData(c,0,0),i.drawImage(l,o.x,o.y),i.globalCompositeOperation="source-over",e.canvas}catch(t){return console.warn("RGB shift glitch failed:",t),null}}applyDigitalDistortionGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let s=i.getImageData(0,0,t.width,t.height),a=tR.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),r=this.processDigitalDistortion(s,a);return i.clearRect(0,0,t.width,t.height),i.putImageData(r,0,0),e.canvas}catch(t){return console.warn("Digital distortion glitch failed:",t),null}}applyScanLineGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let s=tR.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),a=Math.max(2,Math.floor(10-8*s));i.globalCompositeOperation="multiply";for(let e=0;e<t.height;e+=a)if(Math.random()<s){let a=.1+.4*s;i.fillStyle=`rgba(0, 0, 0, ${a})`,i.fillRect(0,e,t.width,1)}i.globalCompositeOperation="screen";let r=Math.floor(20*s);for(let e=0;e<r;e++){let e=Math.random()*t.height,a=.3*s;i.fillStyle=`rgba(255, 255, 255, ${a})`,i.fillRect(0,Math.floor(e),t.width,1)}return i.globalCompositeOperation="source-over",e.canvas}catch(t){return console.warn("Scan line glitch failed:",t),null}}applyDataCorruptionGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let s=i.getImageData(0,0,t.width,t.height),a=tR.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),r=this.processDataCorruption(s,a);return i.clearRect(0,0,t.width,t.height),i.putImageData(r,0,0),e.canvas}catch(t){return console.warn("Data corruption glitch failed:",t),null}}generateRandomOffset(t,e=1){return{x:(Math.random()-.5)*t,y:(Math.random()-.5)*t*e}}processDigitalDistortion(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i),n=Math.floor(20*e)+5,o=Math.floor(a/n);for(let t=0;t<n;t++)if(Math.random()<e){let i=t*o,n=Math.min(i+o,a),l=Math.floor((Math.random()-.5)*s*e*.1);this.shiftSliceHorizontal(r,s,a,i,n,l)}let l=.3*e;for(let t=0;t<i.length;t+=4)Math.random()<l&&(r[t]=255*Math.random(),r[t+1]=255*Math.random(),r[t+2]=255*Math.random());return new ImageData(r,s,a)}shiftSliceHorizontal(t,e,i,s,a,r){let n=new Uint8ClampedArray(4*e);for(let i=s;i<a;i++){let s=i*e*4;for(let i=0;i<4*e;i++)n[i]=t[s+i];for(let i=0;i<e;i++){let a=s+4*i,o=(i-r+e)%e*4;t[a]=n[o],t[a+1]=n[o+1],t[a+2]=n[o+2],t[a+3]=n[o+3]}}}processDataCorruption(t,e){let{data:i,width:s,height:a}=t,r=new Uint8ClampedArray(i),n=Math.floor(15*e)+5;for(let t=0;t<n;t++)if(Math.random()<e){let t=Math.floor(Math.random()*s),e=Math.floor(5*Math.random())+1,i=.5>Math.random()?0:255;for(let n=0;n<a;n++)for(let a=0;a<e&&t+a<s;a++){let e=4*(n*s+t+a);r[e]=i,r[e+1]=i,r[e+2]=i}}let o=Math.floor(20*e);for(let t=0;t<o;t++){let t=Math.floor(Math.random()*s),e=Math.floor(Math.random()*a),i=Math.floor(20*Math.random())+5,n=Math.floor(10*Math.random())+2;this.corruptBlock(r,s,a,t,e,i,n)}return new ImageData(r,s,a)}corruptBlock(t,e,i,s,a,r,n){for(let o=0;o<n&&a+o<i;o++)for(let i=0;i<r&&s+i<e;i++){let r=4*((a+o)*e+(s+i));.7>Math.random()&&(t[r]=255*Math.random(),t[r+1]=255*Math.random(),t[r+2]=255*Math.random())}}}class tj extends a._j{constructor(t,e,i,s,a){var r,n;super(t,e,i,s,a),this.blurConfig={blurRadius:(null==(r=null==a?void 0:a.options)?void 0:r.blurRadius)||8,useOptimizedBlur:void 0===(null==(n=null==a?void 0:a.options)?void 0:n.useOptimizedBlur)||a.options.useOptimizedBlur}}applyCSSBlur(t,e){let i=tI.rF.createCanvas({width:t.width,height:t.height,dpr:tI.rF.devicePixelRatio}),s=i.getContext("2d");return s?(s.filter=`blur(${e}px)`,s.drawImage(t,0,0),s.filter="none",i):t}applyDownsampleBlur(t,e){let{width:i,height:s}=t,a=Math.max(1,Math.floor(e/2)),r=Math.floor(i/a),n=Math.floor(s/a),o=tI.rF.createCanvas({width:r,height:n,dpr:1}),l=o.getContext("2d");if(!l)return t;let h=tI.rF.createCanvas({width:i,height:s,dpr:1}),u=h.getContext("2d");return u?(u.putImageData(t,0,0),l.drawImage(h,0,0,r,n),l.filter=`blur(${e/a}px)`,l.drawImage(o,0,0),l.filter="none",u.clearRect(0,0,i,s),u.drawImage(o,0,0,i,s),u.getImageData(0,0,i,s)):t}afterStageRender(t,e){let i;if(this.blurConfig.blurRadius<=0)return e;if(this.blurConfig.useOptimizedBlur)i=this.applyCSSBlur(e,this.blurConfig.blurRadius);else{let t=tI.rF.createCanvas({width:e.width,height:e.height,dpr:tI.rF.devicePixelRatio}),s=t.getContext("2d");if(!s)return!1;s.clearRect(0,0,e.width,e.height),s.drawImage(e,0,0);let a=s.getImageData(0,0,e.width,e.height),r=this.applyDownsampleBlur(a,this.blurConfig.blurRadius);s.putImageData(r,0,0),i=t}let s=i.getContext("2d");return s&&(s.globalCompositeOperation="overlay",s.fillStyle="rgba(255, 255, 255, 0.1)",s.fillRect(0,0,i.width,i.height),s.globalCompositeOperation="source-over"),i}}class tG extends tD{constructor(t,e,i,s,a){var r,n;super(t,e,i,s,a),this.pixelationConfig={maxPixelSize:(null==(r=null==a?void 0:a.options)?void 0:r.maxPixelSize)||20,method:(null==(n=null==a?void 0:a.options)?void 0:n.method)||"out"}}applyDownsamplePixelation(t,e){if(e<=1)return t;let{width:i,height:s}=t,a=Math.ceil(i/e),r=Math.ceil(s/e),n=tI.rF.createCanvas({width:a,height:r,dpr:1}),o=n.getContext("2d");if(!o)return t;let l=tI.rF.createCanvas({width:i,height:s,dpr:tI.rF.devicePixelRatio}),h=l.getContext("2d");return h?(o.imageSmoothingEnabled=!1,h.imageSmoothingEnabled=!1,o.drawImage(t,0,0,a,r),h.drawImage(n,0,0,i,s),l):t}updateAnimationProgress(){return"in"===this.pixelationConfig.method?this.pixelationConfig.maxPixelSize-this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1):1+this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1)}afterStageRender(t,e){let i=this.updateAnimationProgress();return i<=1?e:this.applyDownsamplePixelation(e,i)}}let tZ=()=>{s.a.registerBuiltInAnimate("increaseCount",G),s.a.registerBuiltInAnimate("fromTo",t_),s.a.registerBuiltInAnimate("scaleIn",q),s.a.registerBuiltInAnimate("scaleOut",Q),s.a.registerBuiltInAnimate("growHeightIn",x),s.a.registerBuiltInAnimate("growHeightOut",A),s.a.registerBuiltInAnimate("growWidthIn",F),s.a.registerBuiltInAnimate("growWidthOut",U),s.a.registerBuiltInAnimate("growCenterIn",m),s.a.registerBuiltInAnimate("growCenterOut",v),s.a.registerBuiltInAnimate("clipIn",o),s.a.registerBuiltInAnimate("clipOut",l),s.a.registerBuiltInAnimate("fadeIn",h),s.a.registerBuiltInAnimate("fadeOut",u),s.a.registerBuiltInAnimate("growPointsIn",w),s.a.registerBuiltInAnimate("growPointsOut",C),s.a.registerBuiltInAnimate("growPointsXIn",P),s.a.registerBuiltInAnimate("growPointsXOut",E),s.a.registerBuiltInAnimate("growPointsYIn",D),s.a.registerBuiltInAnimate("growPointsYOut",M),s.a.registerBuiltInAnimate("growAngleIn",c),s.a.registerBuiltInAnimate("growAngleOut",g),s.a.registerBuiltInAnimate("growRadiusIn",R),s.a.registerBuiltInAnimate("growRadiusOut",k),s.a.registerBuiltInAnimate("moveIn",tm),s.a.registerBuiltInAnimate("moveOut",tv),s.a.registerBuiltInAnimate("rotateIn",tA),s.a.registerBuiltInAnimate("rotateOut",tb),s.a.registerBuiltInAnimate("update",tc),s.a.registerBuiltInAnimate("state",$),s.a.registerBuiltInAnimate("labelItemAppear",N),s.a.registerBuiltInAnimate("labelItemDisappear",j),s.a.registerBuiltInAnimate("poptipAppear",Z),s.a.registerBuiltInAnimate("poptipDisappear",X),s.a.registerBuiltInAnimate("inputText",L),s.a.registerBuiltInAnimate("inputRichText",Y),s.a.registerBuiltInAnimate("outputRichText",z),s.a.registerBuiltInAnimate("slideRichText",H),s.a.registerBuiltInAnimate("slideOutRichText",V),s.a.registerBuiltInAnimate("slideIn",tt),s.a.registerBuiltInAnimate("growIn",te),s.a.registerBuiltInAnimate("spinIn",ti),s.a.registerBuiltInAnimate("moveScaleIn",tr),s.a.registerBuiltInAnimate("moveRotateIn",tn),s.a.registerBuiltInAnimate("strokeIn",ts),s.a.registerBuiltInAnimate("slideOut",to),s.a.registerBuiltInAnimate("growOut",tl),s.a.registerBuiltInAnimate("spinOut",th),s.a.registerBuiltInAnimate("moveScaleOut",tu),s.a.registerBuiltInAnimate("moveRotateOut",tp),s.a.registerBuiltInAnimate("strokeOut",ta),s.a.registerBuiltInAnimate("pulse",td),s.a.registerBuiltInAnimate("MotionPath",tT),s.a.registerBuiltInAnimate("streamLight",tE),s.a.registerBuiltInAnimate("dissolve",tF),s.a.registerBuiltInAnimate("grayscale",tU),s.a.registerBuiltInAnimate("distortion",tL),s.a.registerBuiltInAnimate("particle",tK),s.a.registerBuiltInAnimate("glitch",tN),s.a.registerBuiltInAnimate("gaussianBlur",tj),s.a.registerBuiltInAnimate("pixelation",tG)}},198937:function(t,e,i){i.d(e,{a:()=>l});var s=i(817618),a=i(695723),r=i(89530),n=i(796241);function o(t){if(!t||!(0,n.Z)(t))return 0;let e=Function.prototype.toString.call(t);if(/^class\s/.test(e))return 1;if(!t.prototype)return 2;if(t.prototype.constructor===t){let e=Object.getOwnPropertyDescriptor(t,"prototype");if(e&&!e.writable)return 1}return 2}class l{static registerBuiltInAnimate(t,e){l.builtInAnimateMap[t]=e}constructor(t){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=t}get started(){return this._started}onStart(t){t?(this._startCallbacks.push(t),this._started&&this._activeCount>0&&t()):this._startCallbacks.forEach(t=>{t()})}onEnd(t){t?this._endCallbacks.push(t):this._endCallbacks.forEach(t=>{t()})}_trackAnimation(t){this._animates.push(t),this._activeCount++,1!==this._activeCount||this._started||(this._started=!0,this.onStart()),t.onEnd(()=>{this._activeCount--;let e=this._animates.indexOf(t);e>=0&&this._animates.splice(e,1),0===this._activeCount&&this._started&&(this._started=!1,this.onEnd())})}parseParams(t,e,i){var s,n;let h=this.resolveValue(t.totalTime,i,void 0),u=this.resolveValue(t.startTime,i,0),p=Object.assign({},t);p.oneByOneDelay=0,p.startTime=u,p.totalTime=h;let d=this.resolveValue(t.oneByOne,i,!1);if(e){let t=p.timeSlices;(0,a.Z)(t)||(p.timeSlices=[t]);let e=0;p.timeSlices=p.timeSlices.map(t=>{let s=this.resolveValue(t.delay,i,0),a=this.resolveValue(t.delayAfter,i,0),r=this.resolveValue(t.duration,i,300);return e+=s+r+a,Object.assign(Object.assign({},t),{delay:s,delayAfter:a,duration:r})});let s=0;d&&(s="number"==typeof d?d:d?e:0),p.oneByOneDelay=s;let r=1;if(h){let t=e+s*(this._target.count-2);r=h?h/t:1}p.timeSlices=p.timeSlices.map(t=>{let e=t.effects;return Array.isArray(e)||(e=[e]),Object.assign(Object.assign({},t),{delay:t.delay*r,delayAfter:t.delayAfter*r,duration:t.duration*r,effects:e.map(t=>{var e,i;let s=null!=(e=t.custom)?e:l.builtInAnimateMap[null!=(i=t.type)?i:"fromTo"],a=o(s);return Object.assign(Object.assign({},t),{custom:s,customType:a})})})}),p.oneByOneDelay=s*r,p.startTime=u*r}else{let e=this.resolveValue(t.delay,i,0),a=this.resolveValue(t.delayAfter,i,0),c=this.resolveValue(t.duration,i,300),g=0;d&&(g="number"==typeof d?d:d?e+a+c:0),p.oneByOneDelay=g,p.custom=null!=(s=t.custom)?s:l.builtInAnimateMap[null!=(n=t.type)?n:"fromTo"];let f=o(p.custom);p.customType=f;let m=e+a+c+g*(this._target.count-2),v=(0,r.Z)(h)?h/m:1;p.delay=e*v,p.delayAfter=a*v,p.duration=c*v,p.oneByOneDelay=g*v,p.startTime=u}return p}execute(t){Array.isArray(t)?t.forEach(t=>this._execute(t)):this._execute(t)}_execute(t){let e;if(t.selfOnly)return this._executeItem(t,this._target,0,1);let i="timeSlices"in t;i&&t.partitioner&&(e=(null!=e?e:this._target.getChildren()).filter(e=>{var i,s;return t.partitioner(null==(s=null==(i=e.context)?void 0:i.data)?void 0:s[0],e,{})})),i&&t.sort&&(e=null!=e?e:this._target.getChildren()).sort((e,i)=>{var s,a,r,n;return t.sort(null==(a=null==(s=e.context)?void 0:s.data)?void 0:a[0],null==(n=null==(r=i.context)?void 0:r.data)?void 0:n[0],e,i,{})});let s=i?(e,s,a)=>{let r=this.parseParams(t,i,e),n=this.executeTimelineItem(r,e,s,a);n&&this._trackAnimation(n)}:(e,s,a)=>{let r=this.parseParams(t,i,e),n=this.executeTypeConfigItem(r,e,s,a);n&&this._trackAnimation(n)};e?e.forEach((t,i)=>s(t,i,e.length)):this._target.count<=1?s(this._target,0,1):this._target.forEachChildren((t,e)=>s(t,e,this._target.count-1))}executeTypeConfigItem(t,e,i,s){var a,r,o,l,h,u,p,d;let{type:c="fromTo",channel:g,customParameters:f,easing:m="linear",delay:v=0,delayAfter:y=0,duration:x=300,startTime:A=0,oneByOneDelay:b=0,loop:T,bounce:_,priority:S=0,options:w,custom:C,customType:O,controlOptions:P}=t,E=e.animate();E.priority=S;let I=(0,n.Z)(v)?v(null==(r=null==(a=e.context)?void 0:a.data)?void 0:r[0],e,{}):v,D=null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],M=null==(h=e.context)?void 0:h.indexKey;D&&M&&(i=null!=(u=D[M])?u:i),E.startAt(A);let B=i*b+I;B>0&&E.wait(B);let R=null,k=t.to,F=t.from;k||(R||(R=this.createPropsFromChannel(g,e)),k=R.props),F||(R||(R=this.createPropsFromChannel(g,e)),F=R.from),this._handleRunAnimate(E,C,O,F,k,x,m,f,P,w,c,e);let U=0;b&&(U=b*(s-i-1));let L=(0,n.Z)(y)?y(null==(d=null==(p=e.context)?void 0:p.data)?void 0:d[0],e,{}):y;return L>0&&(U+=L),U>0&&E.wait(U),T&&T>0&&E.loop(T),_&&E.bounce(!0),E}_handleRunAnimate(t,e,i,s,a,r,l,h,u,p,d,c){var g,f,m,v,y,x,A,b;if(e&&i){i=o(e);let d=this.resolveValue(h,c);"function"==typeof d&&(d=d(null==(f=null==(g=c.context)?void 0:g.data)?void 0:f[0],c,{})),d=Object.assign({width:(null==(m=c.stage)?void 0:m.width)||0,height:(null==(v=c.stage)?void 0:v.height)||0,group:this._target.parent},d);let T=(0,n.Z)(p)?p.call(null,null!=(x=d&&(null==(y=d.data)?void 0:y[0]))?x:null==(b=null==(A=c.context)?void 0:A.data)?void 0:b[0],c,d):p;d.options=T,d.controlOptions=u,1===i?this.createCustomAnimation(t,e,s,a,r,l,d):2===i&&this.createCustomInterpolatorAnimation(t,e,a,r,l,d)}else"to"===d?t.to(a,r,l):"from"===d&&t.from(a,r,l)}executeTimelineItem(t,e,i,s){var a,r,n,o;let{timeSlices:l,startTime:h=0,loop:u,bounce:p,oneByOneDelay:d,priority:c,controlOptions:g}=t,f=null==(r=null==(a=e.context)?void 0:a.data)?void 0:r[0],m=null==(n=e.context)?void 0:n.indexKey;f&&m&&(i=null!=(o=f[m])?o:i);let v=e.animate();return v.priority=c,v.startAt(h),v.wait(i*d),u&&u>0&&v.loop(u),p&&v.bounce(!0),(Array.isArray(l)?l:[l]).forEach(t=>{this.applyTimeSliceToAnimate(t,v,e,g)}),d&&v.wait(d*(s-i-1)),v}applyTimeSliceToAnimate(t,e,i,s){var a,r,h,u;let{effects:p,duration:d=300,delay:c=0,delayAfter:g=0}=t,f=(0,n.Z)(c)?c(null==(r=null==(a=i.context)?void 0:a.data)?void 0:r[0],i,{}):c,m=(0,n.Z)(g)?g(null==(u=null==(h=i.context)?void 0:h.data)?void 0:u[0],i,{}):g;f>0&&e.wait(f),(Array.isArray(p)?p:[p]).forEach(t=>{var a;let{type:r="fromTo",channel:n,customParameters:h,easing:u="linear",options:p}=t,c=null,g=t.to,f=t.from;g||(c||(c=this.createPropsFromChannel(n,i)),g=c.props),f||(c||(c=this.createPropsFromChannel(n,i)),f=c.from);let m=null!=(a=t.custom)?a:l.builtInAnimateMap[r],v=t.custom?t.customType:o(m);this._handleRunAnimate(e,m,v,f,g,d,u,h,s,p,r,i)}),m>0&&e.wait(m)}createCustomInterpolatorAnimation(t,e,i,s,a,r){let n={};Object.keys(i).forEach(e=>{n[e]=t.target.getComputedAttribute(e)}),t.interpolateUpdateFunction=(i,s,a,n,o)=>{e(a,i,s,n,o,t.target,r)},t.to(i,s,a)}createCustomAnimation(t,e,i,s,a,r,n){let o=new e(i,s,a,r,n);t.play(o)}createPropsFromChannel(t,e){let i={},s=null;return t&&(Array.isArray(t)?t.forEach(t=>{var s,a;let r=null==(a=null==(s=e.context)?void 0:s.diffAttrs)?void 0:a[t];void 0!==r&&(i[t]=r)}):Object.keys(t).forEach(a=>{var r,n,o,l;let h=t[a];void 0!==h.to&&("function"==typeof h.to?i[a]=h.to(null==(n=null==(r=e.context)?void 0:r.data)?void 0:n[0],e,{}):i[a]=h.to),void 0!==h.from&&(s||(s={}),"function"==typeof h.from?s[a]=h.from(null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],e,{}):s[a]=h.from)})),{from:s,props:i}}resolveValue(t,e,i){var s,a;return void 0===t?i:"function"==typeof t&&e?t(null==(a=null==(s=e.context)?void 0:s.data)?void 0:a[0],e,{}):t}executeItem(t,e,i=0,s=1){return Array.isArray(t)?t.map(t=>this._executeItem(t,e,i,s)).filter(Boolean):[this._executeItem(t,e,i,s)].filter(Boolean)}_executeItem(t,e,i=0,s=1){if(!e)return null;let a="timeSlices"in t,r=null,n=this.parseParams(t,a);return(r=a?this.executeTimelineItem(n,e,i,s):this.executeTypeConfigItem(n,e,i,s))&&this._trackAnimation(r),r}stop(t,e=!0){for(;this._animates.length>0;){let i=this._animates.pop();!1===e&&(i.status=s.t.END),null==i||i.stop(t)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,e&&this.onEnd())}}l.builtInAnimateMap={}},357944:function(t,e,i){i.d(e,{d:()=>A});var s=i(426835),a=i(612430);class r{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return r.instance||(r.instance=new r),r.instance}registerDefaultTransitions(){this.registerTransition("appear","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("appear","appear",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("appear","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("appear","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("normal","normal",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("normal","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("exit","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","enter",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","exit",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("enter","enter",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("enter","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("disappear","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("disappear","appear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("update","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("state","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","exit",()=>({allowTransition:!0,stopOriginalTransition:!0}))}isTransitionAllowed(t,e,i){var s,a,r,n;let o=null==(s=this.transitions.get(t))?void 0:s.get(e);return o||(o=null==(a=this.transitions.get(t))?void 0:a.get("*"))||(o=null==(r=this.transitions.get("*"))?void 0:r.get(e))||(o=null==(n=this.transitions.get("*"))?void 0:n.get("*"))?o(i,t):{allowTransition:!0,stopOriginalTransition:!0}}registerTransition(t,e,i){let s=this.transitions.get(t);s||(s=new Map,this.transitions.set(t,s)),s.set(e,i)}}r.getInstance();var n=i(198937),o=i(695723);let l="appear",h="disappear",u="update",p="highlight",d="unhighlight";class c{constructor(t){this.graphic=t}registerState(t){this.states||(this.states=new Map),this.states.set(t.name,t)}clearStates(){var t;null==(t=this.states)||t.clear()}}class g{constructor(t){this.stateList=null,this.graphic=t}applyState(t,e,i){let s=r.getInstance(),a=[],l=[];if(this.stateList&&this.stateList.length?t.forEach((t,i)=>{let r={allowTransition:!0};this.stateList.forEach(e=>{let i=s.isTransitionAllowed(e.state,t,this.graphic);r.allowTransition=r.allowTransition&&i.allowTransition}),r.allowTransition&&(l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new n.a(this.graphic)}),this.stateList.forEach(e=>{s.isTransitionAllowed(e.state,t,this.graphic).stopOriginalTransition&&a.push(e)}))}):t.forEach((t,i)=>{l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new n.a(this.graphic)})}),a.forEach(t=>{t.executor.stop(null,!1)}),l.length){l[0].executor.execute(l[0].animationConfig);for(let t=0;t<l.length;t++){let e=l[t+1],s=l[t];s.executor.onEnd(()=>{e&&e.executor.execute(e.animationConfig),this.stateList=this.stateList.filter(t=>t!==s),t===l.length-1&&i&&i(!1)})}}else i&&i(!0);this.stateList?this.stateList=this.stateList.filter(t=>!a.includes(t)):this.stateList=[],this.stateList.push(...l)}applyAppearState(t,e){this.applyState([l],[{name:l,animation:t}],e)}applyDisappearState(t,e){this.applyState([h],[{name:h,animation:t}],e)}applyUpdateState(t,e){this.applyState([u],[{name:u,animation:t}],e)}applyHighlightState(t,e){this.applyState([p],[{name:p,animation:t}],e)}applyUnhighlightState(t,e){this.applyState([d],[{name:d,animation:t}],e)}stopState(t,e){var i;let s=null==(i=this.stateList)?void 0:i.find(e=>e.state===t);s&&s.executor.stop(e)}clearState(){var t;null==(t=this.stateList)||t.forEach(t=>{t.executor.stop(null,!1)}),this.stateList=null}reApplyState(t){var e;let i=null==(e=this.stateList)?void 0:e.find(e=>e.state===t);if(i&&i.executor.started){let t=this.stateList.slice();i.executor.stop(),this.stateList=t,i.executor.execute(i.animationConfig)}}}class f{_getAnimationStateManager(t){return t._animationStateManager||(t._animationStateManager=new g(t)),t._animationStateManager}_getAnimationStateStore(t){return t._animationStateStore||(t._animationStateStore=new c(t)),t._animationStateStore}registerAnimationState(t){return this._getAnimationStateStore(this).registerState(t),this}applyAnimationState(t,e,i){return this._getAnimationStateManager(this).applyState(t,e,i),this}applyAppearState(t,e){return this._getAnimationStateManager(this).applyAppearState(t,e),this}applyDisappearState(t,e){return this._getAnimationStateManager(this).applyDisappearState(t,e),this}applyUpdateState(t,e){return this._getAnimationStateManager(this).applyUpdateState(t,e),this}applyHighlightState(t,e){return this._getAnimationStateManager(this).applyHighlightState(t,e),this}applyUnhighlightState(t,e){return this._getAnimationStateManager(this).applyUnhighlightState(t,e),this}stopAnimationState(t,e,i=!1){return this._getAnimationStateManager(this).stopState(t,e),i&&this.isContainer&&this.forEachChildren(s=>{s.stopAnimationState(t,e,i)}),this}clearAnimationStates(){let t=this._animationStateManager;return t&&t.clearState(),this}reApplyAnimationState(t,e=!1){let i=this._animationStateManager;return i&&i.reApplyState(t),e&&this.isContainer&&this.forEachChildren(i=>{i.reApplyAnimationState(t,e)}),this}static extend(t){return(new f)._getAnimationStateManager(t),t}}var m=i(767008),v=i(841400),y=i(523173);class x{getAttributes(t=!1){return t&&this.finalAttribute?this.finalAttribute:this.attribute}animate(t){var e,i,s;let a=new m.r(null==t?void 0:t.id,null!=(i=null!=(e=null==t?void 0:t.timeline)?e:this.stage&&this.stage.getTimeline())?i:v.P,null==t?void 0:t.slience);if(a.bind(this),t){let{onStart:e,onEnd:i,onRemove:s}=t;null!=e&&a.onStart(e),null!=i&&a.onEnd(i),null!=s&&a.onRemove(s)}return null==(s=this.stage)||s.ticker.start(),a}createTimeline(){return new v.L}createTicker(t){return new y.H(t)}setFinalAttributes(t){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,t)}initFinalAttributes(t){this.finalAttribute=t}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new n.a(this))}executeAnimation(t){return this.initAnimateExecutor(),this._animateExecutor.execute(t),this}executeAnimations(t){return this.initAnimateExecutor(),t.forEach(t=>{this._animateExecutor.execute(t)}),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(t,e=!1){return!e&&this.finalAttribute?this.finalAttribute[t]:this.attribute[t]}pauseAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.pause()),t&&this.isContainer&&this.forEachChildren(e=>{e.pauseAnimation(t)})}resumeAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.resume()),t&&this.isContainer&&this.forEachChildren(e=>{e.resumeAnimation(t)})}stopAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.stop()),t&&this.isContainer&&this.forEachChildren(e=>{e.stopAnimation(t)})}}function A(){(0,a.jB)(s.zs,f),(0,a.jB)(s.zs,x)}},780702:function(t,e,i){i.d(e,{h:()=>c,o:()=>g});var s=i(203922),a=i(132696),r=i(408830);class n{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0===t?e:t<0?e*(-(e*t)+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return 0===t?0:Math.pow(2,10*t-10)}static expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}static expoInOut(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-n.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)}}static getElasticOut(t,e){return function(i){if(0===i||1===i)return i;let s=e/r.f7*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*r.f7/e)+1}}static getElasticInOut(t,e){return function(i){let s=e/r.f7*Math.asin(1/t);return(i*=2)<1?-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*r.f7/e)*.5+1}}static registerFunc(t,e){n[t]=e}}n.quadIn=n.getPowIn(2),n.quadOut=n.getPowOut(2),n.quadInOut=n.getPowInOut(2),n.cubicIn=n.getPowIn(3),n.cubicOut=n.getPowOut(3),n.cubicInOut=n.getPowInOut(3),n.quartIn=n.getPowIn(4),n.quartOut=n.getPowOut(4),n.quartInOut=n.getPowInOut(4),n.quintIn=n.getPowIn(5),n.quintOut=n.getPowOut(5),n.quintInOut=n.getPowInOut(5),n.backIn=n.getBackIn(1.7),n.backOut=n.getBackOut(1.7),n.backInOut=n.getBackInOut(1.7),n.elasticIn=n.getElasticIn(1,.3),n.elasticOut=n.getElasticOut(1,.3),n.elasticInOut=n.getElasticInOut(1,.3*1.5),n.easeInOutQuad=t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),n.easeOutElastic=t=>{let e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},n.easeInOutElastic=t=>{let e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1};for(let t=0;t<10;t++)n[`flicker${t}`]=e=>(function(t,e){let i=1/e,s=1;for(;t>i;)t-=i,s*=-1;let a=s*t/i;return a>0?a:1+a})(e,t);for(let t=2;t<10;t++)n[`aIn${t}`]=e=>t*e*e+(1-t)*e;var o=i(939840),l=i(780949);let h=new class{constructor(){this.opacity=(t,e,i,s,a,r)=>{r.attribute.opacity=e+(i-e)*s},this.baseOpacity=(t,e,i,s,a,r)=>{r.attribute.baseOpacity=e+(i-e)*s},this.fillOpacity=(t,e,i,s,a,r)=>{r.attribute.fillOpacity=e+(i-e)*s},this.strokeOpacity=(t,e,i,s,a,r)=>{r.attribute.strokeOpacity=e+(i-e)*s},this.zIndex=(t,e,i,s,a,r)=>{r.attribute.zIndex=e+(i-e)*s},this.backgroundOpacity=(t,e,i,s,a,r)=>{r.attribute.backgroundOpacity=e+(i-e)*s},this.shadowOffsetX=(t,e,i,s,a,r)=>{r.attribute.shadowOffsetX=e+(i-e)*s},this.shadowOffsetY=(t,e,i,s,a,r)=>{r.attribute.shadowOffsetY=e+(i-e)*s},this.shadowBlur=(t,e,i,s,a,r)=>{r.attribute.shadowBlur=e+(i-e)*s},this.fill=(t,e,i,s,a,r)=>{r.attribute.fill=(0,o.BM)(e,i,s,!1)},this.fillPure=(t,e,i,s,a,r)=>{r.attribute.fill=a.fromParsedProps.fill?(0,o.Ib)(a.fromParsedProps.fill,a.toParsedProps.fill,s):a.toParsedProps.fill},this.stroke=(t,e,i,s,a,r)=>{r.attribute.stroke=(0,o.BM)(e,i,s,!1)},this.strokePure=(t,e,i,s,a,r)=>{r.attribute.stroke=a.fromParsedProps.stroke?(0,o.Ib)(a.fromParsedProps.stroke,a.toParsedProps.stroke,s):a.toParsedProps.stroke},this.width=(t,e,i,s,a,r)=>{r.attribute.width=e+(i-e)*s,r.addUpdateBoundTag()},this.height=(t,e,i,s,a,r)=>{r.attribute.height=e+(i-e)*s,r.addUpdateBoundTag()},this.x=(t,e,i,s,a,r)=>{r.attribute.x=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.y=(t,e,i,s,a,r)=>{r.attribute.y=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.dx=(t,e,i,s,a,r)=>{r.attribute.dx=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.dy=(t,e,i,s,a,r)=>{r.attribute.dy=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.angle=(t,e,i,s,a,r)=>{r.attribute.angle=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.scaleX=(t,e,i,s,a,r)=>{r.attribute.scaleX=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.scaleY=(t,e,i,s,a,r)=>{r.attribute.scaleY=e+(i-e)*s,r.addUpdateBoundTag(),r.addUpdatePositionTag()},this.lineWidth=(t,e,i,s,a,r)=>{r.attribute.lineWidth=e+(i-e)*s,r.addUpdateBoundTag()},this.startAngle=(t,e,i,s,a,r)=>{r.attribute.startAngle=e+(i-e)*s,r.addUpdateBoundTag()},this.endAngle=(t,e,i,s,a,r)=>{r.attribute.endAngle=e+(i-e)*s,r.addUpdateBoundTag()},this.radius=(t,e,i,s,a,r)=>{r.attribute.radius=e+(i-e)*s,r.addUpdateBoundTag()},this.outerRadius=(t,e,i,s,a,r)=>{r.attribute.outerRadius=e+(i-e)*s,r.addUpdateBoundTag()},this.innerRadius=(t,e,i,s,a,r)=>{r.attribute.innerRadius=e+(i-e)*s,r.addUpdateBoundTag()},this.size=(t,e,i,s,a,r)=>{r.attribute.size=e+(i-e)*s,r.addUpdateBoundTag()},this.points=(t,e,i,s,a,r)=>{r.attribute.points=(0,l.SA)(e,i,s),r.addUpdateBoundTag()}}};function u(t,e,i,s,a,r){if(Number.isFinite(i)&&Number.isFinite(e))return r.attribute[t]=e+(i-e)*s,!0;if(Array.isArray(i)&&Array.isArray(e)&&i.length===e.length){let a=[],n=!0;for(let t=0;t<i.length;t++){let r=e[t],o=r+(i[t]-r)*s;if(!Number.isFinite(o)){n=!1;break}a.push(o)}return n&&(r.attribute[t]=a),!0}return!1}var p=i(83624);function d(){}class c{constructor(t,e,i,a){var r;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=t,this.props=e,this.duration=i,this.easing=a?"function"==typeof a?a:null!=(r=n[a])?r:n.linear:n.linear,"wait"===t&&(this.onUpdate=d),this.id=s.R.GenAutoIncrementId(),this.syncAttributeUpdate=d}bind(t,e){this.target=t,this.animate=e,this.onBind(),this.syncAttributeUpdate()}append(t){this.next=t,t.prev=this,t.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let t=this.next,e=this._startTime+this.duration;for(;t;)t.setStartTime(e,!1),e+=t.duration,t=t.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(t,e=!0){this.duration=t,e&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;let t=[];this.propKeys.forEach(e=>{if("fill"===e||"stroke"===e){let i=this.fromProps[e],s=this.props[e];if((0,p.Z)(i)&&(0,p.Z)(s)){let r=a.VH.Get(i,a.Mr.Color255),n=a.VH.Get(s,a.Mr.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[e]=r,this.toParsedProps[e]=n,t.push(h["fill"===e?"fillPure":"strokePure"])}else h[e]?t.push(h[e]):t.push(u)}else h[e]?t.push(h[e]):t.push(u)}),this.interpolateUpdateFunctions=t}setStartTime(t,e=!0){this._startTime=t,e&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){"glyph"===this.target.type&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.fromProps[e]=null!=(i=this.fromProps[e])?i:t[e]}),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){let t=this.animate;this.target.animates.forEach(e=>{if(e===t||e.priority>t.priority||e.priority===1/0)return;let i=e.getStartProps();this.propKeys.forEach(t=>{null!=i[t]&&e.preventAttr(t)})})}deleteSelfAttr(t){var e;delete this.props[t],this.fromProps&&delete this.fromProps[t];let i=this.propKeys.indexOf(t);-1!==i&&(this.propKeys.splice(i,1),null==(e=this.interpolateUpdateFunctions)||e.splice(i,1))}trySyncStartProps(){this.propKeys.forEach(t=>{this.fromProps[t]=this.animate.target.getComputedAttribute(t)})}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let s=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,s,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],s,this,this.target)}),this.onUpdate(t,s,i),this.syncAttributeUpdate()}onUpdate(t,e,i){}onEnd(t){this.target.setAttributes(this.props),t?this._endCb=t:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class g extends c{constructor(t,e,i,s){super(t,e,i,s)}onStart(){super.onStart();let t=this.getFromProps();this.target.setAttributes(t)}update(t,e,i){this.onStart()}determineInterpolateUpdateFunction(){}}},523173:function(t,e,i){i.d(e,{H:()=>u});var s=i(421883),a=i.n(s),r=i(393661),n=i(778484),o=i(509257);let l=new r.A;class h{constructor(){this.released=!1}tick(t,e){l.addAnimationFrameCb(()=>{if(!this.released)return e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class u extends a(){constructor(t){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(t,e)=>{let{once:i=!1}=null!=e?e:{};if(this.ifCanStop())return this.stop(),!1;let s=t.getTime();this._lastTickTime=s,this.lastFrameTime<0&&(this.lastFrameTime=s-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));let a=s-this.lastFrameTime,r=this.checkSkip(a);return r||(this._handlerTick(a),this.lastFrameTime=s,this.frameTimeHistory.push(this.lastFrameTime)),i||t.tick(this.interval,this.handleTick),!r},this._handlerTick=t=>{this.status===n.Q.RUNNING&&(this.tickCounts++,this.timelines.forEach(e=>{e.tick(t)}),this.emit("tick",t))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=t,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(t){this.stage=t}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=n.Q.INITIAL,o.w.global.hooks.onSetEnv.tap("graph-ticker",()=>{this.initHandler(!1)}),o.w.global.env&&this.initHandler(!1)}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(t=!1){this.setupTickHandler(t)}setupTickHandler(t=!1){if(!t&&this.tickerHandler)return!0;let e=new h;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0}setInterval(t){this.interval=t,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(t){this.setInterval(Math.floor(1e3/t))}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,t=>this.handleTick(t,{once:!0}))}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==n.Q.INITIAL&&(this.status=n.Q.PAUSE,!0)}resume(){return this.status!==n.Q.INITIAL&&(this.status=n.Q.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every(t=>!t.isRunning())))||!1}start(t=!1){return!(this.status===n.Q.RUNNING||!this.tickerHandler||!t&&(this.status===n.Q.PAUSE||this.ifCanStop()))&&(this.status=n.Q.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=n.Q.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===n.Q.INITIAL&&this.timelines.some(t=>t.isRunning())?this.start():this.status===n.Q.RUNNING&&this.timelines.every(t=>!t.isRunning())&&this.stop()}release(){var t;this.stop(),this.timelines=[],null==(t=this.tickerHandler)||t.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(t){var e,i,s;return"performance"!==(null==(s=null==(i=null==(e=this.stage)?void 0:e.params)?void 0:i.optimize)?void 0:s.tickRenderMode)&&t<this.interval+2*(Math.random()-.5)*this._jitter}}},841400:function(t,e,i){i.d(e,{L:()=>o,P:()=>l});var s=i(203922),a=i(817618),r=i(421883),n=i.n(r);class o extends n(){get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=s.R.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(t){let e=this.head,i=0;for(;e;){let s=e.next;t(e.animate,i),i++,e=s}}addAnimate(t){let e={animate:t,next:null,prev:null};this.head?this.tail&&(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.animateMap.set(t,e),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));let e=t*this._playSpeed;this._currentTime+=e,this.forEachAccessAnimate((t,i)=>{t.status===a.t.END?this.removeAnimate(t,!0):t.status!==a.t.RUNNING&&t.status!==a.t.INITIAL||t.advance(e)}),0===this._animateCount&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate(t=>{t.release()}),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(t,e=!0){let i=this.animateMap.get(t);i&&(e&&(t._onRemove&&t._onRemove.forEach(t=>t()),t.release()),i.prev?i.prev.next=i.next:this.head=i.next,i.next?i.next.prev=i.prev:this.tail=i.prev,this.animateMap.delete(t),this._animateCount--,t.getStartTime()+t.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate(t=>{this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())})}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(t){this._playSpeed=t}getPlayState(){return this.paused?"paused":0===this.animateCount?"stopped":"playing"}setStartTime(t){this._startTime=t}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(t){this._currentTime=t}}let l=new o;l.isGlobal=!0}}]);
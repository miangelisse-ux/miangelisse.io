/*! For license information please see vendor-17.7cd94780e6.js.LICENSE.txt */
(window.webpackChunkweb=window.webpackChunkweb||[]).push([["63289"],{577865:function(e,i,r){var s=r(222871),n=r(33272),a=r(730050),o=r(817090),l=s.generate(function(e){var i=a.createInstance({name:e.name||"byted-local-forage",size:0x2f80000});this.storage=i,e&&(this.encrypt=e.encrypt,this.decrypt=e.decrypt)});function h(e){return e}l.definePrototype({encrypt:h,decrypt:h},{writable:!0});var u="SECURE_STORAGE",c="HELLO_STORAGE";l.definePrototype({hash:function(e){return(e=o.SHA256(e,"BUILD_IN_HASH_KEY")).toString()},verify:function(e,i){var r=this;return r.getItem(u,e).then(function(e){return null===e?(i||r.setItem(u,c),!0):e===c}).catch(function(e){return console.error(e),!1})},getItem:function(e,i,r){var s=i&&i.decrypt||this.decrypt;try{r||(e=this.hash(e))}catch(e){return Promise.reject(e)}var a=this.storage.getItem(e);return n(a)?a.then(function(e){if(e)try{e=s(e)}catch(e){return Promise.reject(e)}return e}):"string"!=typeof a?a:s(a)},setItem:function(e,i,r){var s=this;return(r||(e=s.hash(e)),n(i=s.encrypt(i)))?i.then(function(i){return s.storage.setItem(e,i)}).catch(function(e){return console.error(e),!1}):s.storage.setItem(e,i)},removeItem:function(e){return e=this.hash(e),this.storage.removeItem(e)},removeByHashKey:function(e){return this.storage.removeItem(e)},clear:function(){return this.storage.clear()},key:function(e){return this.storage.key(e)},keys:function(){return this.storage.keys()},length:{get:function(){return this.storage.length}},updateEncryption:function(e){if(!e.hasOwnProperty("decrypt"))throw Error("decrypt() method should exist on oldOpts");var i=this;return i.verify(e,!0).then(function(r){return!!r&&i.keys().then(function(r){return Promise.all(r.map(function(r){var s=null;return i.getItem(r,e,!0).then(function(e){return s=e,i.setItem(r,s,!0)})})).then(function(e){return!0})}).catch(function(e){return console.error(e),!1})})}}),e.exports=l},470141:function(e,i,r){"use strict";r.d(i,{Y:()=>n});var s=r(140512);class n{updateRoots=new Set;constructor(e){this.renderManager=e}start(){this.tickerRun()}add(e){this.updateRoots.add(e)}tickerRun=()=>{this.updateRoots.size>0&&(s.R.traverseMindMapTree([...this.updateRoots],e=>{e.clearHotBox(),e.clearLayoutBox(),e.afterUpdateProps()}),this.updateRoots.forEach(e=>e.refreshBox()),this.updateRoots.clear(),this.renderManager.addContentDrawTask()),requestAnimationFrame(this.tickerRun)}}},98837:function(e,i,r){"use strict";r.d(i,{O:()=>s});class s{static getPageUrl="/api/whiteboard/block";static fetchMissUrl="/api/whiteboard/block/op";static async basicGet(e){return e.startsWith("/space")||(e=`/space${e}`),new Promise((i,r)=>fetch(e,{method:"GET"}).then(e=>{e.ok||r(Error("\u8FD4\u56DE\u9519\u8BEF")),i(e.json())}).catch(r))}static async getPage(e){let i=this.getPageUrl+`?blockToken=${e.token}&reqVersion=1`;e.revision&&(i+=`&revision=${e.revision}`),e.clientVersion&&(i+=`&clientVersion=${e.clientVersion}`);let r=await this.basicGet(i);if(r)return r.data}static async fetchMissOp(e){let i=this.fetchMissUrl+`?blockToken=${e.blockToken}&startSeq=${e.startSeq}&endSeq=${e.endSeq}&reqVersion=1`,r=await this.basicGet(i);if(r){if(!r.data)throw Error("\u8FD4\u56DE\u6570\u636E\u7F3A\u5C11\u6839\u8282\u70B9\u4FE1\u606F");return r.data.ops||[]}}static async fetchAllDeviceOrderMsgs(e,i,r,s){let n,a=`/api/whiteboard/room/device_order_msg?blockToken=${e}&reqVersion=1`;i&&(a+=`&userID=${i}`),r&&(a+=`&memberID=${r}`),s&&(a+=`&type=${s}`);try{n=await this.basicGet(a)}catch(e){return}if(n)return n?.userData}}},977106:function(e,i,r){"use strict";var s,n;r.d(i,{R:()=>s}),(n=s||(s={})).orderMessage="orderMessage",n.unorderMessage="unorderMessage",n.DeviceOrderMessage="DeviceOrderMessage"},797615:function(e,i,r){"use strict";let s,n,a,o,l,h,u,c,d,p,f,g,y,x,m,b,v,w,T,C,E,_,A,M,R,P,S,I;r.d(i,{Ah:()=>H,Cs:()=>ts,Dt:()=>X,J3:()=>G,Jq:()=>tt,P0:()=>V,P1:()=>N,Tq:()=>Y,Us:()=>tr,XD:()=>ti,Y_:()=>Q,Zl:()=>j,_g:()=>L,_u:()=>k,bn:()=>Z,fq:()=>W,gd:()=>J,gu:()=>$,jd:()=>K,nD:()=>B,pl:()=>q,qR:()=>F,rC:()=>tn,tZ:()=>te,vB:()=>U,wf:()=>D,yy:()=>z,zo:()=>O});var N=((s=N||{})[s.Join=0]="Join",s[s.Leave=1]="Leave",s[s.Heartbeat=2]="Heartbeat",s),O=((n=O||{})[n.NormalFocus=0]="NormalFocus",n[n.Cell=1]="Cell",n[n.Row=2]="Row",n[n.Col=3]="Col",n[n.Clear=4]="Clear",n),L=((a=L||{})[a.Invalid=0]="Invalid",a[a.Drive=1]="Drive",a[a.PublicUserInfo=115]="PublicUserInfo",a[a.PublicDrawIO=117]="PublicDrawIO",a[a.PublicLark3DEmoji=124]="PublicLark3DEmoji",a[a.PublicLarkEmoji=125]="PublicLarkEmoji",a[a.PublicEmoji=127]="PublicEmoji",a[a.PublicCloudComputing=113]="PublicCloudComputing",a[a.PublicWireframe=112]="PublicWireframe",a[a.PublicProjectManagement=114]="PublicProjectManagement",a[a.PublicQingCloud=116]="PublicQingCloud",a[a.PublicOpenMoji=118]="PublicOpenMoji",a[a.PublicUniverseDesign=119]="PublicUniverseDesign",a[a.PublicSketchValley=120]="PublicSketchValley",a[a.PublicLarkSticker=121]="PublicLarkSticker",a[a.PublicJueJin=122]="PublicJueJin",a[a.PublicUserAvatar=123]="PublicUserAvatar",a[a.PublicIconPark=126]="PublicIconPark",a[a.AllPublic=128]="AllPublic",a),U=((o=U||{})[o.CROP_CUSTOM=0]="CROP_CUSTOM",o[o.CROP_SQUARE=1]="CROP_SQUARE",o[o.CROP_CIRCLE=2]="CROP_CIRCLE",o[o.CROP_4_3=3]="CROP_4_3",o[o.CROP_3_4=4]="CROP_3_4",o[o.CROP_16_9=5]="CROP_16_9",o[o.CROP_9_16=6]="CROP_9_16",o),D=((l=D||{})[l.COLOR_FILL=0]="COLOR_FILL",l[l.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",l[l.RADIAL_GRADIENT=2]="RADIAL_GRADIENT",l[l.IMAGE=3]="IMAGE",l),k=((h=k||{})[h.FILL=0]="FILL",h[h.FIT=1]="FIT",h[h.CROP=2]="CROP",h[h.TILE=3]="TILE",h),B=((u=B||{})[u.NONE=0]="NONE",u[u.LINE_ARROW=1]="LINE_ARROW",u[u.TRIANGLE_ARROW=2]="TRIANGLE_ARROW",u[u.EMPTY_TRIANGLE_ARROW=3]="EMPTY_TRIANGLE_ARROW",u[u.CIRCLE_ARROW=4]="CIRCLE_ARROW",u[u.EMPTY_CIRCLE_ARROW=5]="EMPTY_CIRCLE_ARROW",u[u.DIAMOND_ARROW=6]="DIAMOND_ARROW",u[u.EMPTY_DIAMOND_ARROW=7]="EMPTY_DIAMOND_ARROW",u[u.SINGLE_ARROW=8]="SINGLE_ARROW",u[u.MULTI_ARROW=9]="MULTI_ARROW",u[u.EXACT_SINGLE_ARROW=10]="EXACT_SINGLE_ARROW",u[u.ZERO_OR_SINGLE_ARROW=11]="ZERO_OR_SINGLE_ARROW",u[u.SINGLE_OR_MULTI_ARROW=12]="SINGLE_OR_MULTI_ARROW",u[u.ZERO_OR_MULTI_ARROW=13]="ZERO_OR_MULTI_ARROW",u[u.X_ARROW=14]="X_ARROW",u),z=((c=z||{})[c.READ=0]="READ",c[c.WRITE=1]="WRITE",c[c.NONE_PERMISSION=2]="NONE_PERMISSION",c[c.CURRENT_USER=3]="CURRENT_USER",c),V=((d=V||{})[d.PARAGRAPH=0]="PARAGRAPH",d[d.UNORDERED=1]="UNORDERED",d[d.ORDERED=2]="ORDERED",d),H=((p=H||{})[p.AUTO_WIDTH=0]="AUTO_WIDTH",p[p.AUTO_HEIGHT=1]="AUTO_HEIGHT",p[p.FIXED=2]="FIXED",p),X=((f=X||{})[f.TOP=0]="TOP",f[f.MID=1]="MID",f[f.BOTTOM=2]="BOTTOM",f),F=((g=F||{})[g.LEFT=0]="LEFT",g[g.CENTER=1]="CENTER",g[g.RIGHT=2]="RIGHT",g),Y=((y=Y||{})[y.SNAPTO_AUTO=0]="SNAPTO_AUTO",y[y.SNAPTO_TOP=1]="SNAPTO_TOP",y[y.SNAPTO_RIGHT=2]="SNAPTO_RIGHT",y[y.SNAPTO_BOTTOM=3]="SNAPTO_BOTTOM",y[y.SNAPTO_LEFT=4]="SNAPTO_LEFT",y),Z=((x=Z||{})[x.STRAIGHT=0]="STRAIGHT",x[x.POLYLINE=1]="POLYLINE",x[x.CURVE=2]="CURVE",x[x.RIGHT_ANGLED_POLYLINE=3]="RIGHT_ANGLED_POLYLINE",x),q=((m=q||{})[m.ON_LINE=0]="ON_LINE",m[m.ABOVE_LINE=1]="ABOVE_LINE",m[m.BELLOW_LINE=2]="BELLOW_LINE",m),G=((b=G||{})[b.ATTACH_NONE=0]="ATTACH_NONE",b[b.MAGNET_ANCHOR=1]="MAGNET_ANCHOR",b[b.CONTOUR=2]="CONTOUR",b[b.INNER=3]="INNER",b),W=((v=W||{})[v.UML_ClASS=0]="UML_ClASS",v[v.UML_INTERFACE=1]="UML_INTERFACE",v),$=((w=$||{})[w.ER_ENTITY=0]="ER_ENTITY",w[w.ER_KEY_ENTITY=1]="ER_KEY_ENTITY",w[w.ER_FIELD_FIELD=2]="ER_FIELD_FIELD",w[w.ER_KEY_FIELD_TYPE=3]="ER_KEY_FIELD_TYPE",w),J=((T=J||{})[T.AUTO_LAYOUT=0]="AUTO_LAYOUT",T[T.MINDMAP_LEFT_RIGHT=1]="MINDMAP_LEFT_RIGHT",T[T.MINDMAP_UP_DOWN=2]="MINDMAP_UP_DOWN",T[T.SUB_LEFT=3]="SUB_LEFT",T[T.SUB_RIGHT=4]="SUB_RIGHT",T[T.SUB_UP=5]="SUB_UP",T[T.SUB_DOWN=6]="SUB_DOWN",T[T.TREE_LEFT=7]="TREE_LEFT",T[T.TREE_RIGHT=8]="TREE_RIGHT",T[T.TREE_LEFT_RIGHT=9]="TREE_LEFT_RIGHT",T[T.TIMELINE_RIGHT=10]="TIMELINE_RIGHT",T[T.TIMELINE_DOWN=11]="TIMELINE_DOWN",T[T.SUB_DOWN_LEFT=12]="SUB_DOWN_LEFT",T[T.SUB_DOWN_RIGHT=13]="SUB_DOWN_RIGHT",T[T.SUB_TOP_RIGHT=14]="SUB_TOP_RIGHT",T[T.SUB_LEFT_FOR_TIMELINE_DOWN=15]="SUB_LEFT_FOR_TIMELINE_DOWN",T[T.SUB_RIGHT_FOR_TIMELINE_DOWN=16]="SUB_RIGHT_FOR_TIMELINE_DOWN",T[T.SUB_LEFT_WITH_SHORT_PARENT_CHILD_MARGIN=17]="SUB_LEFT_WITH_SHORT_PARENT_CHILD_MARGIN",T[T.SUB_RIGHT_WITH_SHORT_PARENT_CHILD_MARGIN=18]="SUB_RIGHT_WITH_SHORT_PARENT_CHILD_MARGIN",T),j=((C=j||{})[C.AUTO_LINE_STYLE=0]="AUTO_LINE_STYLE",C[C.CURVE_LINE_STYLE=1]="CURVE_LINE_STYLE",C[C.RIGHT_ANGLE=2]="RIGHT_ANGLE",C[C.ROUND_ANGLE=3]="ROUND_ANGLE",C),Q=((E=Q||{})[E.Invalid=0]="Invalid",E[E.Mark=1]="Mark",E[E.Highlight=2]="Highlight",E),K=((_=K||{})[_.RESOURCE_TOP=0]="RESOURCE_TOP",_[_.RESOURCE_BOTTOM=1]="RESOURCE_BOTTOM",_[_.RESOURCE_LEFT=2]="RESOURCE_LEFT",_[_.RESOURCE_RIGHT=3]="RESOURCE_RIGHT",_),tt=((A=tt||{})[A.Frame=0]="Frame",A[A.Rect=1]="Rect",A[A.Ellipse=2]="Ellipse",A[A.Text=3]="Text",A[A.Line=4]="Line",A[A.LinkLine=5]="LinkLine",A[A.Vector=6]="Vector",A[A.BooleanOperation=7]="BooleanOperation",A[A.FocusGroup=8]="FocusGroup",A[A.DirectFocusGroup=9]="DirectFocusGroup",A[A.Video=11]="Video",A[A.FrameTitle=12]="FrameTitle",A[A.CompositeShape=13]="CompositeShape",A[A.IconSource=14]="IconSource",A[A.Connector=15]="Connector",A[A.Table=17]="Table",A[A.LifelineObject=18]="LifelineObject",A[A.Activation=19]="Activation",A[A.Section=20]="Section",A[A.TableUML=21]="TableUML",A[A.TableER=22]="TableER",A[A.StickyNote=23]="StickyNote",A[A.MindMapNode=24]="MindMapNode",A[A.Paint=25]="Paint",A[A.CombinedFragment=26]="CombinedFragment",A[A.Fallback=99]="Fallback",A),te=((M=te||{})[M.Invalid=0]="Invalid",M[M.Update=1]="Update",M[M.Create=2]="Create",M[M.Delete=3]="Delete",M[M.Relation=4]="Relation",M),ti=((R=ti||{})[R.Invalid=0]="Invalid",R[R.AddRange=1]="AddRange",R[R.MoveRange=2]="MoveRange",R[R.RemoveRange=3]="RemoveRange",R[R.UpdateRangeStyle=4]="UpdateRangeStyle",R[R.UpdateCell=5]="UpdateCell",R),tr=((P=tr||{})[P.Invalid=0]="Invalid",P[P.Page=1]="Page",P[P.Node=3]="Node",P[P.Cursor=4]="Cursor",P[P.Heart=6]="Heart",P[P.LinkLine=8]="LinkLine",P[P.FocusLinkLine=10]="FocusLinkLine",P[P.Message=11]="Message",P[P.BatchRelation=12]="BatchRelation",P[P.BatchNode=13]="BatchNode",P[P.FontPath=14]="FontPath",P[P.Select=15]="Select",P[P.BatchPaste=16]="BatchPaste",P[P.PageGroup=17]="PageGroup",P[P.UpgradeSchema=18]="UpgradeSchema",P[P.Comment=19]="Comment",P[P.NodeV2=20]="NodeV2",P[P.Theme=21]="Theme",P[P.Resource=22]="Resource",P[P.Collaboration=23]="Collaboration",P[P.Room=24]="Room",P[P.DocMeta=25]="DocMeta",P[P.DocRevert=100]="DocRevert",P[P.DocCreate=101]="DocCreate",P[P.DocCopyFrom=102]="DocCopyFrom",P[P.DocCommand=255]="DocCommand",P),ts=((S=ts||{})[S.Replace=0]="Replace",S[S.Difference=1]="Difference",S[S.Reverse=2]="Reverse",S[S.Table=5]="Table",S[S.MindmapRelation=6]="MindmapRelation",S),tn=((I=tn||{})[I.ROW=0]="ROW",I[I.COL=1]="COL",I)},955633:function(e,i,r){"use strict";r.d(i,{D:()=>R});let{abs:s,cos:n,sin:a,acos:o,atan2:l,sqrt:h,pow:u}=Math;function c(e){return e<0?-u(-e,1/3):u(e,1/3)}let d=Math.PI,p=2*d,f=d/2,g=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,y=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,x={x:0,y:0,z:0},m={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,i){let r=i(e),s=r.x*r.x+r.y*r.y;return void 0!==r.z&&(s+=r.z*r.z),h(s)},compute:function(e,i,r){if(0===e)return i[0].t=0,i[0];let s=i.length-1;if(1===e)return i[s].t=1,i[s];let n=1-e,a=i;if(0===s)return i[0].t=e,i[0];if(1===s){let i={x:n*a[0].x+e*a[1].x,y:n*a[0].y+e*a[1].y,t:e};return r&&(i.z=n*a[0].z+e*a[1].z),i}if(s<4){let i=n*n,o=e*e,l,h,u,c=0;2===s?(a=[a[0],a[1],a[2],x],l=i,h=n*e*2,u=o):3===s&&(l=i*n,h=i*e*3,u=n*o*3,c=e*o);let d={x:l*a[0].x+h*a[1].x+u*a[2].x+c*a[3].x,y:l*a[0].y+h*a[1].y+u*a[2].y+c*a[3].y,t:e};return r&&(d.z=l*a[0].z+h*a[1].z+u*a[2].z+c*a[3].z),d}let o=JSON.parse(JSON.stringify(i));for(;o.length>1;){for(let i=0;i<o.length-1;i++)o[i]={x:o[i].x+(o[i+1].x-o[i].x)*e,y:o[i].y+(o[i+1].y-o[i].y)*e},void 0!==o[i].z&&(o[i].z=o[i].z+(o[i+1].z-o[i].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,i,r,s){let n=1-e,a=r[0],o=r[1],l=r[2],h=r[3],u;return(a*=n,o*=e,2===i.length)?(u=a+o,{x:(a*i[0].x+o*i[1].x)/u,y:(a*i[0].y+o*i[1].y)/u,z:!!s&&(a*i[0].z+o*i[1].z)/u,t:e}):(a*=n,o*=2*n,l*=e*e,3===i.length)?(u=a+o+l,{x:(a*i[0].x+o*i[1].x+l*i[2].x)/u,y:(a*i[0].y+o*i[1].y+l*i[2].y)/u,z:!!s&&(a*i[0].z+o*i[1].z+l*i[2].z)/u,t:e}):(a*=n,o*=1.5*n,l*=3*n,h*=e*e*e,4===i.length)?(u=a+o+l+h,{x:(a*i[0].x+o*i[1].x+l*i[2].x+h*i[3].x)/u,y:(a*i[0].y+o*i[1].y+l*i[2].y+h*i[3].y)/u,z:!!s&&(a*i[0].z+o*i[1].z+l*i[2].z+h*i[3].z)/u,t:e}):void 0},derive:function(e,i){let r=[];for(let s=e,n=s.length,a=n-1;n>1;n--,a--){let e=[];for(let r=0,n;r<a;r++)n={x:a*(s[r+1].x-s[r].x),y:a*(s[r+1].y-s[r].y)},i&&(n.z=a*(s[r+1].z-s[r].z)),e.push(n);r.push(e),s=e}return r},between:function(e,i,r){return i<=e&&e<=r||m.approximately(e,i)||m.approximately(e,r)},approximately:function(e,i,r){return s(e-i)<=(r||1e-6)},length:function(e){let i=m.Tvalues.length,r=0;for(let s=0,n;s<i;s++)n=.5*m.Tvalues[s]+.5,r+=m.Cvalues[s]*m.arcfn(n,e);return .5*r},map:function(e,i,r,s,n){return s+(e-i)/(r-i)*(n-s)},lerp:function(e,i,r){let s={x:i.x+e*(r.x-i.x),y:i.y+e*(r.y-i.y)};return void 0!==i.z&&void 0!==r.z&&(s.z=i.z+e*(r.z-i.z)),s},pointToString:function(e){let i=e.x+"/"+e.y;return void 0!==e.z&&(i+="/"+e.z),i},pointsToString:function(e){return"["+e.map(m.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,i,r){let s=i.x-e.x,n=i.y-e.y,a=r.x-e.x,o=r.y-e.y;return l(s*o-n*a,s*a+n*o)},round:function(e,i){let r=""+e,s=r.indexOf(".");return parseFloat(r.substring(0,s+1+i))},dist:function(e,i){let r=e.x-i.x,s=e.y-i.y;return h(r*r+s*s)},closest:function(e,i){let r=u(2,63),s,n;return e.forEach(function(e,a){(n=m.dist(i,e))<r&&(r=n,s=a)}),{mdist:r,mpos:s}},abcratio:function(e,i){if(2!==i&&3!==i)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=u(e,i)+u(1-e,i);return s((r-1)/r)},projectionratio:function(e,i){if(2!==i&&3!==i)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=u(1-e,i),s=u(e,i)+r;return r/s},lli8:function(e,i,r,s,n,a,o,l){let h=(e-r)*(a-l)-(i-s)*(n-o);return 0!=h&&{x:((e*s-i*r)*(n-o)-(e-r)*(n*l-a*o))/h,y:((e*s-i*r)*(a-l)-(i-s)*(n*l-a*o))/h}},lli4:function(e,i,r,s){let n=e.x,a=e.y,o=i.x,l=i.y,h=r.x,u=r.y,c=s.x,d=s.y;return m.lli8(n,a,o,l,h,u,c,d)},lli:function(e,i){return m.lli4(e,e.c,i,i.c)},makeline:function(e,i){return new R(e.x,e.y,(e.x+i.x)/2,(e.y+i.y)/2,i.x,i.y)},findbbox:function(e){let i=g,r=g,s=y,n=y;return e.forEach(function(e){let a=e.bbox();i>a.x.min&&(i=a.x.min),r>a.y.min&&(r=a.y.min),s<a.x.max&&(s=a.x.max),n<a.y.max&&(n=a.y.max)}),{x:{min:i,mid:(i+s)/2,max:s,size:s-i},y:{min:r,mid:(r+n)/2,max:n,size:n-r}}},shapeintersections:function(e,i,r,s,n){if(!m.bboxoverlap(i,s))return[];let a=[],o=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(i){i.virtual||l.forEach(function(s){if(s.virtual)return;let o=i.intersects(s,n);o.length>0&&(o.c1=i,o.c2=s,o.s1=e,o.s2=r,a.push(o))})}),a},makeshape:function(e,i,r){let s=i.points.length,n=e.points.length,a=m.makeline(i.points[s-1],e.points[0]),o=m.makeline(e.points[n-1],i.points[0]),l={startcap:a,forward:e,back:i,endcap:o,bbox:m.findbbox([a,e,i,o])};return l.intersections=function(e){return m.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,i,r){if(!r)return{min:0,max:0};let s=g,n=y,a,o;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,h=r.length;l<h;l++)a=r[l],(o=e.get(a))[i]<s&&(s=o[i]),o[i]>n&&(n=o[i]);return{min:s,mid:(s+n)/2,max:n,size:n-s}},align:function(e,i){let r=i.p1.x,s=i.p1.y,o=-l(i.p2.y-s,i.p2.x-r);return e.map(function(e){return{x:(e.x-r)*n(o)-(e.y-s)*a(o),y:(e.x-r)*a(o)+(e.y-s)*n(o)}})},roots:function(e,i){let r,s,a;i=i||{p1:{x:0,y:0},p2:{x:1,y:0}};let l=e.length-1,u=m.align(e,i),d=function(e){return 0<=e&&e<=1};if(2===l){let e=u[0].y,i=u[1].y,r=u[2].y,s=e-2*i+r;if(0!==s){let n=-h(i*i-e*r),a=-e+i;return[-(n+a)/s,-(-n+a)/s].filter(d)}return i!==r&&0===s?[(2*i-r)/(2*i-2*r)].filter(d):[]}let f=u[0].y,g=u[1].y,y=u[2].y,x=-f+3*g-3*y+u[3].y,b=3*f-6*g+3*y,v=-3*f+3*g,w=f;if(m.approximately(x,0)){if(m.approximately(b,0))return m.approximately(v,0)?[]:[-w/v].filter(d);let e=h(v*v-4*b*w),i=2*b;return[(e-v)/i,(-v-e)/i].filter(d)}b/=x;let T=(3*(v/=x)-b*b)/3,C=T/3,E=(2*b*b*b-9*b*v+27*(w/=x))/27,_=E/2,A=_*_+C*C*C;if(A<0){let e=-T/3,i=h(e*e*e),r=-E/(2*i),l=o(r<-1?-1:r>1?1:r),u=2*c(i);return s=u*n(l/3)-b/3,[s,a=u*n((l+p)/3)-b/3,u*n((l+2*p)/3)-b/3].filter(d)}if(0===A)return[s=2*(r=_<0?c(-_):-c(_))-b/3,a=-r-b/3].filter(d);{let e=h(A);return[(r=c(-_+e))-c(_+e)-b/3].filter(d)}},droots:function(e){if(3===e.length){let i=e[0],r=e[1],s=e[2],n=i-2*r+s;if(0!==n){let e=-h(r*r-i*s),a=-i+r;return[-(e+a)/n,-(-e+a)/n]}return r!==s&&0===n?[(2*r-s)/(2*(r-s))]:[]}if(2===e.length){let i=e[0],r=e[1];if(i!==r)return[i/(i-r)]}return[]},curvature:function(e,i,r,n,a){let o,l,c,d,p=0,f=0,g=m.compute(e,i),y=m.compute(e,r),x=g.x*g.x+g.y*g.y;if(n?(o=h(u(g.y*y.z-y.y*g.z,2)+u(g.z*y.x-y.z*g.x,2)+u(g.x*y.y-y.x*g.y,2)),l=u(x+g.z*g.z,1.5)):(o=g.x*y.y-g.y*y.x,l=u(x,1.5)),0===o||0===l)return{k:0,r:0};if(p=o/l,f=l/o,!a){let a=m.curvature(e-.001,i,r,n,!0).k,o=m.curvature(e+.001,i,r,n,!0).k;d=(o-p+(p-a))/2,c=(s(o-p)+s(p-a))/2}return{k:p,r:f,dk:d,adk:c}},inflections:function(e){if(e.length<4)return[];let i=m.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=i[2].x*i[1].y,s=i[3].x*i[1].y,n=i[1].x*i[2].y,a=18*(-3*r+2*s+3*n-i[3].x*i[2].y),o=18*(3*r-s-3*n),l=18*(n-r);if(m.approximately(a,0)){if(!m.approximately(o,0)){let e=-l/o;if(0<=e&&e<=1)return[e]}return[]}let h=2*a;if(m.approximately(h,0))return[];let u=o*o-4*a*l;if(u<0)return[];let c=Math.sqrt(u);return[(c-o)/h,-(o+c)/h].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,i){let r=["x","y"],n=r.length;for(let a=0,o,l,h,u;a<n;a++)if(l=e[o=r[a]].mid,h=i[o].mid,u=(e[o].size+i[o].size)/2,s(l-h)>=u)return!1;return!0},expandbox:function(e,i){i.x.min<e.x.min&&(e.x.min=i.x.min),i.y.min<e.y.min&&(e.y.min=i.y.min),i.z&&i.z.min<e.z.min&&(e.z.min=i.z.min),i.x.max>e.x.max&&(e.x.max=i.x.max),i.y.max>e.y.max&&(e.y.max=i.y.max),i.z&&i.z.max>e.z.max&&(e.z.max=i.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,i,r){let s=e.bbox(),n=i.bbox(),a=r||.5;if(s.x.size+s.y.size<a&&n.x.size+n.y.size<a)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(i._t1+i._t2)/2|0)/1e5];let o=e.split(.5),l=i.split(.5),h=[{left:o.left,right:l.left},{left:o.left,right:l.right},{left:o.right,right:l.right},{left:o.right,right:l.left}];h=h.filter(function(e){return m.bboxoverlap(e.left.bbox(),e.right.bbox())});let u=[];return 0===h.length?u:(h.forEach(function(e){u=u.concat(m.pairiteration(e.left,e.right,a))}),u=u.filter(function(e,i){return u.indexOf(e)===i}))},getccenter:function(e,i,r){let s=i.x-e.x,o=i.y-e.y,h=r.x-i.x,u=r.y-i.y,c=s*n(f)-o*a(f),d=s*a(f)+o*n(f),g=h*n(f)-u*a(f),y=h*a(f)+u*n(f),x=(e.x+i.x)/2,b=(e.y+i.y)/2,v=(i.x+r.x)/2,w=(i.y+r.y)/2,T=m.lli8(x,b,x+c,b+d,v,w,v+g,w+y),C=m.dist(T,e),E=l(e.y-T.y,e.x-T.x),_=l(i.y-T.y,i.x-T.x),A=l(r.y-T.y,r.x-T.x),M;return E<A?((E>_||_>A)&&(E+=p),E>A&&(M=A,A=E,E=M)):A<_&&_<E?(M=A,A=E,E=M):A+=p,T.s=E,T.e=A,T.r=C,T},numberSort:function(e,i){return e-i}};class b{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return m.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,i){return e+i})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var i=e[0].bbox(),r=1;r<e.length;r++)m.expandbox(i,e[r].bbox());return i}offset(e){let i=[];return this.curves.forEach(function(r){i.push(...r.offset(e))}),new b(i)}}let{abs:v,min:w,max:T,cos:C,sin:E,acos:_,sqrt:A}=Math,M=Math.PI;class R{constructor(e){let i=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof i[0]){r=i.length;let e=[];i.forEach(function(i){["x","y","z"].forEach(function(r){void 0!==i[r]&&e.push(i[r])})}),i=e}let s=!1,n=i.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(6!==n&&8!==n&&9!==n&&12!==n&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let a=this._3d=!s&&(9===n||12===n)||e&&e[0]&&void 0!==e[0].z,o=this.points=[];for(let e=0,r=a?3:2;e<n;e+=r){var l={x:i[e],y:i[e+1]};a&&(l.z=i[e+2]),o.push(l)}let h=this.order=o.length-1,u=this.dims=["x","y"];a&&u.push("z"),this.dimlen=u.length;let c=m.align(o,{p1:o[0],p2:o[h]}),d=m.dist(o[0],o[h]);this._linear=c.reduce((e,i)=>e+v(i.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,i,r,s){if(void 0===s&&(s=.5),0===s)return new R(i,i,r);if(1===s)return new R(e,i,i);let n=R.getABC(2,e,i,r,s);return new R(e,n.A,r)}static cubicFromPoints(e,i,r,s,n){void 0===s&&(s=.5);let a=R.getABC(3,e,i,r,s);void 0===n&&(n=m.dist(i,a.C));let o=n*(1-s)/s,l=m.dist(e,r),h=(r.x-e.x)/l,u=(r.y-e.y)/l,c=n*h,d=n*u,p={x:i.x-c,y:i.y-d},f={x:i.x+o*h,y:i.y+o*u},g=a.A,y={x:g.x+(p.x-g.x)/(1-s),y:g.y+(p.y-g.y)/(1-s)},x={x:g.x+(f.x-g.x)/s,y:g.y+(f.y-g.y)/s},b={x:e.x+(y.x-e.x)/s,y:e.y+(y.y-e.y)/s};return new R(e,b,{x:r.x+(x.x-r.x)/(1-s),y:r.y+(x.y-r.y)/(1-s)},r)}static getUtils(){return m}getUtils(){return R.getUtils()}static get PolyBezier(){return b}valueOf(){return this.toString()}toString(){return m.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,i=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let r=1,s=e.length;r<s;r++)i.push(e[r].x),i.push(e[r].y);return i.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,i){return""+i+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=m.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,i=m.angle(e[0],e[this.order],e[1]);this.clockwise=i>0}length(){return m.length(this.derivative.bind(this))}static getABC(e=2,i,r,s,n=.5){let a=m.projectionratio(n,e),o=1-a,l={x:a*i.x+o*s.x,y:a*i.y+o*s.y},h=m.abcratio(n,e);return{A:{x:r.x+(r.x-l.x)/h,y:r.y+(r.y-l.y)/h},B:r,C:l,S:i,E:s}}getABC(e,i){i=i||this.get(e);let r=this.points[0],s=this.points[this.order];return R.getABC(this.order,r,i,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let i=0,r,s;i<e;i++)s=i/(e-1),(r=this.compute(s)).t=s,this._lut.push(r);return this._lut}on(e,i){i=i||5;let r=this.getLUT(),s=[];for(let n=0,a;n<r.length;n++)a=r[n],m.dist(a,e)<i&&(s.push(a),r.length);return!!s.length&&(t/=s.length)}project(e){let i=this.getLUT(),r=i.length-1,s=m.closest(i,e),n=s.mpos,a=(n-1)/r,o=(n+1)/r,l=.1/r,h=s.mdist,u=a,c=u,d;h+=1;for(let i;u<o+l;u+=l)d=this.compute(u),(i=m.dist(e,d))<h&&(h=i,c=u);return c=c<0?0:c>1?1:c,(d=this.compute(c)).t=c,d.d=h,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?m.computeWithRatios(e,this.points,this.ratios,this._3d):m.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,i=[e[0]],r=e.length;for(let s=1,n,a;s<r;s++)n=e[s],a=e[s-1],i[s]={x:(r-s)/r*n.x+s/r*a.x,y:(r-s)/r*n.y+s/r*a.y};return i[r]=e[r-1],new R(i)}derivative(e){return m.compute(e,this.dpoints[0],this._3d)}dderivative(e){return m.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new R(m.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return m.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return m.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let i=this.derivative(e),r=A(i.x*i.x+i.y*i.y);return{t:e,x:-i.y/r,y:i.x/r}}__normal3(e){let i=this.derivative(e),r=this.derivative(e+.01),s=A(i.x*i.x+i.y*i.y+i.z*i.z),n=A(r.x*r.x+r.y*r.y+r.z*r.z);i.x/=s,i.y/=s,i.z/=s,r.x/=n,r.y/=n,r.z/=n;let a={x:r.y*i.z-r.z*i.y,y:r.z*i.x-r.x*i.z,z:r.x*i.y-r.y*i.x},o=A(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=o,a.y/=o,a.z/=o;let l=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:l[0]*i.x+l[1]*i.y+l[2]*i.z,y:l[3]*i.x+l[4]*i.y+l[5]*i.z,z:l[6]*i.x+l[7]*i.y+l[8]*i.z}}hull(e){let i=this.points,r=[],s=[],n=0;for(s[n++]=i[0],s[n++]=i[1],s[n++]=i[2],3===this.order&&(s[n++]=i[3]);i.length>1;){r=[];for(let a=0,o,l=i.length-1;a<l;a++)o=m.lerp(e,i[a],i[a+1]),s[n++]=o,r.push(o);i=r}return s}split(e,i){if(0===e&&i)return this.split(i).left;if(1===i)return this.split(e).right;let r=this.hull(e),s={left:new R(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new R(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(s.left._t1=m.map(0,0,1,this._t1,this._t2),s.left._t2=m.map(e,0,1,this._t1,this._t2),s.right._t1=m.map(e,0,1,this._t1,this._t2),s.right._t2=m.map(1,0,1,this._t1,this._t2),i)?(i=m.map(i,e,1,0,1),s.right.split(i).left):s}extrema(){let e={},i=[];return this.dims.forEach((function(r){let s=function(e){return e[r]},n=this.dpoints[0].map(s);e[r]=m.droots(n),3===this.order&&(n=this.dpoints[1].map(s),e[r]=e[r].concat(m.droots(n))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),i=i.concat(e[r].sort(m.numberSort))}).bind(this)),e.values=i.sort(m.numberSort).filter(function(e,r){return i.indexOf(e)===r}),e}bbox(){let e=this.extrema(),i={};return this.dims.forEach((function(r){i[r]=m.getminmax(this,r,e[r])}).bind(this)),i}overlaps(e){let i=this.bbox(),r=e.bbox();return m.bboxoverlap(i,r)}offset(e,i){if(void 0!==i){let r=this.get(e),s=this.normal(e),n={c:r,n:s,x:r.x+s.x*i,y:r.y+s.y*i};return this._3d&&(n.z=r.z+s.z*i),n}if(this._linear){let i=this.normal(0);return[new R(this.points.map(function(r){let s={x:r.x+e*i.x,y:r.y+e*i.y};return r.z&&i.z&&(s.z=r.z+e*i.z),s}))]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(3===this.order){let e=m.angle(this.points[0],this.points[3],this.points[1]),i=m.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&i<0||e<0&&i>0)return!1}let e=this.normal(0),i=this.normal(1),r=e.x*i.x+e.y*i.y;return this._3d&&(r+=e.z*i.z),v(_(r))<M/3}reduce(){let e,i=0,r=0,s,n=[],a=[],o=this.extrema().values;for(-1===o.indexOf(0)&&(o=[0].concat(o)),-1===o.indexOf(1)&&o.push(1),i=o[0],e=1;e<o.length;e++)r=o[e],(s=this.split(i,r))._t1=i,s._t2=r,n.push(s),i=r;return n.forEach(function(e){for(i=0,r=0;r<=1;)for(r=i+.01;r<=1.01;r+=.01)if(!(s=e.split(i,r)).simple()){if(r-=.01,.01>v(i-r))return[];(s=e.split(i,r))._t1=m.map(i,0,1,e._t1,e._t2),s._t2=m.map(r,0,1,e._t1,e._t2),a.push(s),i=r;break}i<1&&((s=e.split(i,1))._t1=m.map(i,0,1,e._t1,e._t2),s._t2=e._t2,a.push(s))}),a}translate(e,i,r){r="number"==typeof r?r:i;let s=this.order,n=this.points.map((e,n)=>(1-n/s)*i+n/s*r);return new R(this.points.map((i,r)=>({x:i.x+e.x*n[r],y:i.y+e.y*n[r]})))}scale(e){let i=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===i)return this.raise().scale(r);let s=this.clockwise,n=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let a=r?r(0):e,o=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],h=[],u=m.lli4(l[0],l[0].c,l[1],l[1].c);if(!u)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=h[e*i]=m.copy(n[e*i]);r.x+=(e?o:a)*l[e].n.x,r.y+=(e?o:a)*l[e].n.y}),r)?[0,1].forEach(function(a){if(2!==i||!a){var o=n[a+1],l={x:o.x-u.x,y:o.y-u.y},c=r?r((a+1)/i):e;r&&!s&&(c=-c);var d=A(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,h[a+1]={x:o.x+c*l.x,y:o.y+c*l.y}}}):[0,1].forEach(e=>{if(2===i&&e)return;let r=h[e*i],s=this.derivative(e),a={x:r.x+s.x,y:r.y+s.y};h[e+1]=m.lli4(r,a,u,n[e+1])}),new R(h)}outline(e,i,r,s){if(i=void 0===i?e:i,this._linear){let n,a,o,l=this.normal(0),h=this.points[0],u=this.points[this.points.length-1];void 0===r&&(r=e,s=i),n={x:h.x+l.x*e,y:h.y+l.y*e},o={x:u.x+l.x*r,y:u.y+l.y*r},a={x:(n.x+o.x)/2,y:(n.y+o.y)/2};let c=[n,a,o];n={x:h.x-l.x*i,y:h.y-l.y*i},o={x:u.x-l.x*s,y:u.y-l.y*s},a={x:(n.x+o.x)/2,y:(n.y+o.y)/2};let d=[o,a,n],p=m.makeline(d[2],c[0]),f=m.makeline(c[2],d[0]);return new b([p,new R(c),f,new R(d)])}let n=this.reduce(),a=n.length,o=[],l=[],h,u=0,c=this.length(),d=void 0!==r&&void 0!==s;function p(e,i,r,s,n){return function(a){let o=i-e;return m.map(a,0,1,e+s/r*o,e+(s+n)/r*o)}}n.forEach(function(n){let a=n.length();d?(o.push(n.scale(p(e,r,c,u,a))),l.push(n.scale(p(-i,-s,c,u,a)))):(o.push(n.scale(e)),l.push(n.scale(-i))),u+=a}),l=l.map(function(e){return(h=e.points)[3]?e.points=[h[3],h[2],h[1],h[0]]:e.points=[h[2],h[1],h[0]],e}).reverse();let f=o[0].points[0],g=o[a-1].points[o[a-1].points.length-1],y=l[a-1].points[l[a-1].points.length-1],x=l[0].points[0],v=m.makeline(y,f),w=m.makeline(g,x);return new b([v].concat(o).concat([w]).concat(l))}outlineshapes(e,i,r){i=i||e;let s=this.outline(e,i).curves,n=[];for(let e=1,i=s.length;e<i/2;e++){let a=m.makeshape(s[e],s[i-e],r);a.startcap.virtual=e>1,a.endcap.virtual=e<i/2-1,n.push(a)}return n}intersects(e,i){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof R&&(e=e.reduce()),this.curveintersects(this.reduce(),e,i)):this.selfintersects(i)}lineIntersects(e){let i=w(e.p1.x,e.p2.x),r=w(e.p1.y,e.p2.y),s=T(e.p1.x,e.p2.x),n=T(e.p1.y,e.p2.y);return m.roots(this.points,e).filter(e=>{var a=this.get(e);return m.between(a.x,i,s)&&m.between(a.y,r,n)})}selfintersects(e){let i=this.reduce(),r=i.length-2,s=[];for(let n=0,a,o;n<r;n++)a=i.slice(n,n+1),o=i.slice(n+2),s.push(...this.curveintersects(a,o,e));return s}curveintersects(e,i,r){let s=[];e.forEach(function(e){i.forEach(function(i){e.overlaps(i)&&s.push({left:e,right:i})})});let n=[];return s.forEach(function(e){let i=m.pairiteration(e.left,e.right,r);i.length>0&&(n=n.concat(i))}),n}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,i,r,s){let n=(s-r)/4,a=this.get(r+n),o=this.get(s-n),l=m.dist(e,i),h=m.dist(e,a),u=m.dist(e,o);return v(h-l)+v(u-l)}_iterate(e,i){let r=0,s=1,n;do{n=0,s=1;let a=this.get(r),o,l,h,u,c=!1,d=!1,p,f=s,g=1;do if(d=c,u=h,f=(r+s)/2,o=this.get(f),l=this.get(s),(h=m.getccenter(a,o,l)).interval={start:r,end:s},c=this._error(h,a,r,s)<=e,(p=d&&!c)||(g=s),c){if(s>=1){if(h.interval.end=g=1,u=h,s>1){let e={x:h.x+h.r*C(h.e),y:h.y+h.r*E(h.e)};h.e+=m.angle({x:h.x,y:h.y},e,this.get(1))}break}s+=(s-r)/2}else s=f;while(!p&&n++<100);if(n>=100)break;u=u||h,i.push(u),r=g}while(s<1);return i}}},937912:function(e,i,r){"use strict";r.d(i,{um:()=>P,wh:()=>tD});var s=r(286479),n=r(717568),a=function(e,i){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])})(e,i)};function o(e,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}a(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}function l(e,i){var r=e[0],s=e[1];return[r*Math.cos(i)-s*Math.sin(i),r*Math.sin(i)+s*Math.cos(i)]}function h(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw Error("assertNumbers arguments["+r+"] is not a number. "+typeof e[r]+" == typeof "+e[r]);return!0}var u=Math.PI;function c(e,i,r){e.lArcFlag=+(0!==e.lArcFlag),e.sweepFlag=+(0!==e.sweepFlag);var s=e.rX,n=e.rY,a=e.x,o=e.y;s=Math.abs(e.rX),n=Math.abs(e.rY);var h=l([(i-a)/2,(r-o)/2],-e.xRot/180*u),c=h[0],d=h[1],p=Math.pow(c,2)/Math.pow(s,2)+Math.pow(d,2)/Math.pow(n,2);1<p&&(s*=Math.sqrt(p),n*=Math.sqrt(p)),e.rX=s,e.rY=n;var f=Math.pow(s,2)*Math.pow(d,2)+Math.pow(n,2)*Math.pow(c,2),g=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(n,2)-f)/f)),y=s*d/n*g,x=-n*c/s*g,m=l([y,x],e.xRot/180*u);e.cX=m[0]+(i+a)/2,e.cY=m[1]+(r+o)/2,e.phi1=Math.atan2((d-x)/n,(c-y)/s),e.phi2=Math.atan2((-d-x)/n,(-c-y)/s),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*u),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*u),e.phi1*=180/u,e.phi2*=180/u}function d(e,i,r){h(e,i,r);var s=e*e+i*i-r*r;if(0>s)return[];if(0===s)return[[e*r/(e*e+i*i),i*r/(e*e+i*i)]];var n=Math.sqrt(s);return[[(e*r+i*n)/(e*e+i*i),(i*r-e*n)/(e*e+i*i)],[(e*r-i*n)/(e*e+i*i),(i*r+e*n)/(e*e+i*i)]]}var p,f=Math.PI/180;function g(e,i,r,s){return e+Math.cos(s/180*u)*i+Math.sin(s/180*u)*r}function y(e,i,r,s){var n=i-e,a=r-i,o=3*n+3*(s-r)-6*a,l=6*(a-n),h=3*n;return 1e-6>Math.abs(o)?[-h/l]:function(e,i,r){var s=e*e/4-i;if(s<-1e-6)return[];if(s<=1e-6)return[-e/2];var n=Math.sqrt(s);return[-e/2-n,-e/2+n]}(l/o,h/o,1e-6)}function x(e,i,r,s,n){var a=1-n;return a*a*a*e+3*a*a*n*i+3*a*n*n*r+n*n*n*s}!function(e){function i(){return n(function(e,i,r){return e.relative&&(void 0!==e.x1&&(e.x1+=i),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=i),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=i),void 0!==e.y&&(e.y+=r),e.relative=!1),e})}function r(){var e=NaN,i=NaN,r=NaN,s=NaN;return n(function(n,a,o){return n.type&T.SMOOTH_CURVE_TO&&(n.type=T.CURVE_TO,e=isNaN(e)?a:e,i=isNaN(i)?o:i,n.x1=n.relative?a-e:2*a-e,n.y1=n.relative?o-i:2*o-i),n.type&T.CURVE_TO?(e=n.relative?a+n.x2:n.x2,i=n.relative?o+n.y2:n.y2):(e=NaN,i=NaN),n.type&T.SMOOTH_QUAD_TO&&(n.type=T.QUAD_TO,r=isNaN(r)?a:r,s=isNaN(s)?o:s,n.x1=n.relative?a-r:2*a-r,n.y1=n.relative?o-s:2*o-s),n.type&T.QUAD_TO?(r=n.relative?a+n.x1:n.x1,s=n.relative?o+n.y1:n.y1):(r=NaN,s=NaN),n})}function s(){var e=NaN,i=NaN;return n(function(r,s,n){if(r.type&T.SMOOTH_QUAD_TO&&(r.type=T.QUAD_TO,e=isNaN(e)?s:e,i=isNaN(i)?n:i,r.x1=r.relative?s-e:2*s-e,r.y1=r.relative?n-i:2*n-i),r.type&T.QUAD_TO){e=r.relative?s+r.x1:r.x1,i=r.relative?n+r.y1:r.y1;var a=r.x1,o=r.y1;r.type=T.CURVE_TO,r.x1=((r.relative?0:s)+2*a)/3,r.y1=((r.relative?0:n)+2*o)/3,r.x2=(r.x+2*a)/3,r.y2=(r.y+2*o)/3}else e=NaN,i=NaN;return r})}function n(e){var i=0,r=0,s=NaN,n=NaN;return function(a){if(isNaN(s)&&!(a.type&T.MOVE_TO))throw Error("path must start with moveto");var o=e(a,i,r,s,n);return a.type&T.CLOSE_PATH&&(i=s,r=n),void 0!==a.x&&(i=a.relative?i+a.x:a.x),void 0!==a.y&&(r=a.relative?r+a.y:a.y),a.type&T.MOVE_TO&&(s=i,n=r),o}}function a(e,i,r,s,a,o){return h(e,i,r,s,a,o),n(function(n,l,h,u){var c=n.x1,d=n.x2,p=n.relative&&!isNaN(u),f=void 0!==n.x?n.x:p?0:l,g=void 0!==n.y?n.y:p?0:h;n.type&T.HORIZ_LINE_TO&&0!==i&&(n.type=T.LINE_TO,n.y=n.relative?0:h),n.type&T.VERT_LINE_TO&&0!==r&&(n.type=T.LINE_TO,n.x=n.relative?0:l),void 0!==n.x&&(n.x=n.x*e+g*r+(p?0:a)),void 0!==n.y&&(n.y=f*i+n.y*s+(p?0:o)),void 0!==n.x1&&(n.x1=n.x1*e+n.y1*r+(p?0:a)),void 0!==n.y1&&(n.y1=c*i+n.y1*s+(p?0:o)),void 0!==n.x2&&(n.x2=n.x2*e+n.y2*r+(p?0:a)),void 0!==n.y2&&(n.y2=d*i+n.y2*s+(p?0:o));var y=e*s-i*r;if(void 0!==n.xRot&&(1!==e||0!==i||0!==r||1!==s))if(0===y)delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag,n.type=T.LINE_TO;else{var x,m,b=n.xRot*Math.PI/180,v=Math.sin(b),w=Math.cos(b),C=1/((x=n.rX)*x),E=1/((m=n.rY)*m),_=w*w*C+v*v*E,A=2*v*w*(C-E),M=v*v*C+w*w*E,R=_*s*s-A*i*s+M*i*i,P=A*(e*s+i*r)-2*(_*r*s+M*e*i),S=_*r*r-A*e*r+M*e*e,I=(Math.atan2(P,R-S)+Math.PI)%Math.PI/2,N=Math.sin(I),O=Math.cos(I);n.rX=Math.abs(y)/Math.sqrt(O*O*R+P*N*O+N*N*S),n.rY=Math.abs(y)/Math.sqrt(N*N*R-P*N*O+O*O*S),n.xRot=180*I/Math.PI}return void 0!==n.sweepFlag&&0>y&&(n.sweepFlag=+!n.sweepFlag),n})}e.ROUND=function(e){function i(i){return Math.round(i*e)/e}return void 0===e&&(e=1e13),h(e),function(e){return void 0!==e.x1&&(e.x1=i(e.x1)),void 0!==e.y1&&(e.y1=i(e.y1)),void 0!==e.x2&&(e.x2=i(e.x2)),void 0!==e.y2&&(e.y2=i(e.y2)),void 0!==e.x&&(e.x=i(e.x)),void 0!==e.y&&(e.y=i(e.y)),void 0!==e.rX&&(e.rX=i(e.rX)),void 0!==e.rY&&(e.rY=i(e.rY)),e}},e.TO_ABS=i,e.TO_REL=function(){return n(function(e,i,r){return e.relative||(void 0!==e.x1&&(e.x1-=i),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=i),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=i),void 0!==e.y&&(e.y-=r),e.relative=!0),e})},e.NORMALIZE_HVZ=function(e,i,r){return void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),n(function(s,n,a,o,l){if(isNaN(o)&&!(s.type&T.MOVE_TO))throw Error("path must start with moveto");return i&&s.type&T.HORIZ_LINE_TO&&(s.type=T.LINE_TO,s.y=s.relative?0:a),r&&s.type&T.VERT_LINE_TO&&(s.type=T.LINE_TO,s.x=s.relative?0:n),e&&s.type&T.CLOSE_PATH&&(s.type=T.LINE_TO,s.x=s.relative?o-n:o,s.y=s.relative?l-a:l),s.type&T.ARC&&(0===s.rX||0===s.rY)&&(s.type=T.LINE_TO,delete s.rX,delete s.rY,delete s.xRot,delete s.lArcFlag,delete s.sweepFlag),s})},e.NORMALIZE_ST=r,e.QT_TO_C=s,e.INFO=n,e.SANITIZE=function(e){void 0===e&&(e=0),h(e);var i=NaN,r=NaN,s=NaN,a=NaN;return n(function(n,o,l,h,u){var c=Math.abs,d=!1,p=0,f=0;if(n.type&T.SMOOTH_CURVE_TO&&(p=isNaN(i)?0:o-i,f=isNaN(r)?0:l-r),n.type&(T.CURVE_TO|T.SMOOTH_CURVE_TO)?(i=n.relative?o+n.x2:n.x2,r=n.relative?l+n.y2:n.y2):(i=NaN,r=NaN),n.type&T.SMOOTH_QUAD_TO?(s=isNaN(s)?o:2*o-s,a=isNaN(a)?l:2*l-a):n.type&T.QUAD_TO?(s=n.relative?o+n.x1:n.x1,a=n.relative?l+n.y1:n.y2):(s=NaN,a=NaN),n.type&T.LINE_COMMANDS||n.type&T.ARC&&(0===n.rX||0===n.rY||!n.lArcFlag)||n.type&T.CURVE_TO||n.type&T.SMOOTH_CURVE_TO||n.type&T.QUAD_TO||n.type&T.SMOOTH_QUAD_TO){var g=void 0===n.x?0:n.relative?n.x:n.x-o,y=void 0===n.y?0:n.relative?n.y:n.y-l;p=isNaN(s)?void 0===n.x1?p:n.relative?n.x:n.x1-o:s-o,f=isNaN(a)?void 0===n.y1?f:n.relative?n.y:n.y1-l:a-l;var x=void 0===n.x2?0:n.relative?n.x:n.x2-o,m=void 0===n.y2?0:n.relative?n.y:n.y2-l;c(g)<=e&&c(y)<=e&&c(p)<=e&&c(f)<=e&&c(x)<=e&&c(m)<=e&&(d=!0)}return n.type&T.CLOSE_PATH&&c(o-h)<=e&&c(l-u)<=e&&(d=!0),d?[]:n})},e.MATRIX=a,e.ROTATE=function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),h(e,i,r);var s=Math.sin(e),n=Math.cos(e);return a(n,s,-s,n,i-i*n+r*s,r-i*s-r*n)},e.TRANSLATE=function(e,i){return void 0===i&&(i=0),h(e,i),a(1,0,0,1,e,i)},e.SCALE=function(e,i){return void 0===i&&(i=e),h(e,i),a(e,0,0,i,0,0)},e.SKEW_X=function(e){return h(e),a(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return h(e),a(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),h(e),a(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),h(e),a(1,0,0,-1,0,e)},e.A_TO_C=function(){return n(function(e,i,r){return T.ARC===e.type?function(e,i,r){var s,n,a,o;e.cX||c(e,i,r);for(var h=Math.min(e.phi1,e.phi2),u=Math.max(e.phi1,e.phi2)-h,d=Math.ceil(u/90),p=Array(d),g=i,y=r,x=0;x<d;x++){var m,b,v,w,C,E,_=(m=e.phi1,b=e.phi2,(1-(v=x/d))*m+v*b),A=(w=e.phi1,C=e.phi2,(1-(E=(x+1)/d))*w+E*C),M=4/3*Math.tan((A-_)*f/4),R=[Math.cos(_*f)-M*Math.sin(_*f),Math.sin(_*f)+M*Math.cos(_*f)],P=R[0],S=R[1],I=[Math.cos(A*f),Math.sin(A*f)],N=I[0],O=I[1],L=[N+M*Math.sin(A*f),O-M*Math.cos(A*f)],U=L[0],D=L[1];p[x]={relative:e.relative,type:T.CURVE_TO};var k=function(i,r){var s=l([i*e.rX,r*e.rY],e.xRot),n=s[0],a=s[1];return[e.cX+n,e.cY+a]};s=k(P,S),p[x].x1=s[0],p[x].y1=s[1],n=k(U,D),p[x].x2=n[0],p[x].y2=n[1],a=k(N,O),p[x].x=a[0],p[x].y=a[1],e.relative&&(p[x].x1-=g,p[x].y1-=y,p[x].x2-=g,p[x].y2-=y,p[x].x-=g,p[x].y-=y),g=(o=[p[x].x,p[x].y])[0],y=o[1]}return p}(e,e.relative?0:i,e.relative?0:r):e})},e.ANNOTATE_ARCS=function(){return n(function(e,i,r){return e.relative&&(i=0,r=0),T.ARC===e.type&&c(e,i,r),e})},e.CLONE=function(){return function(e){var i={};for(var r in e)i[r]=e[r];return i}},e.CALCULATE_BOUNDS=function(){var e=function(e){var i={};for(var r in e)i[r]=e[r];return i},a=i(),o=s(),l=r(),h=n(function(i,r,s){var n=l(o(a(e(i))));function u(e){e>h.maxX&&(h.maxX=e),e<h.minX&&(h.minX=e)}function p(e){e>h.maxY&&(h.maxY=e),e<h.minY&&(h.minY=e)}if(n.type&T.DRAWING_COMMANDS&&(u(r),p(s)),n.type&T.HORIZ_LINE_TO&&u(n.x),n.type&T.VERT_LINE_TO&&p(n.y),n.type&T.LINE_TO&&(u(n.x),p(n.y)),n.type&T.CURVE_TO){u(n.x),p(n.y);for(var f=0,m=y(r,n.x1,n.x2,n.x);f<m.length;f++)0<(w=m[f])&&1>w&&u(x(r,n.x1,n.x2,n.x,w));for(var b=0,v=y(s,n.y1,n.y2,n.y);b<v.length;b++)0<(w=v[b])&&1>w&&p(x(s,n.y1,n.y2,n.y,w))}if(n.type&T.ARC){u(n.x),p(n.y),c(n,r,s);for(var w,C=n.xRot/180*Math.PI,E=Math.cos(C)*n.rX,_=Math.sin(C)*n.rX,A=-Math.sin(C)*n.rY,M=Math.cos(C)*n.rY,R=n.phi1<n.phi2?[n.phi1,n.phi2]:-180>n.phi2?[n.phi2+360,n.phi1+360]:[n.phi2,n.phi1],P=R[0],S=R[1],I=function(e){var i=e[0],r=180*Math.atan2(e[1],i)/Math.PI;return r<P?r+360:r},N=0,O=d(A,-E,0).map(I);N<O.length;N++)(w=O[N])>P&&w<S&&u(g(n.cX,E,A,w));for(var L=0,U=d(M,-_,0).map(I);L<U.length;L++)(w=U[L])>P&&w<S&&p(g(n.cY,_,M,w))}return i});return h.minX=1/0,h.maxX=-1/0,h.minY=1/0,h.maxY=-1/0,h}}(p||(p={}));var m,b=function(){function e(){}return e.prototype.round=function(e){return this.transform(p.ROUND(e))},e.prototype.toAbs=function(){return this.transform(p.TO_ABS())},e.prototype.toRel=function(){return this.transform(p.TO_REL())},e.prototype.normalizeHVZ=function(e,i,r){return this.transform(p.NORMALIZE_HVZ(e,i,r))},e.prototype.normalizeST=function(){return this.transform(p.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(p.QT_TO_C())},e.prototype.aToC=function(){return this.transform(p.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(p.SANITIZE(e))},e.prototype.translate=function(e,i){return this.transform(p.TRANSLATE(e,i))},e.prototype.scale=function(e,i){return this.transform(p.SCALE(e,i))},e.prototype.rotate=function(e,i,r){return this.transform(p.ROTATE(e,i,r))},e.prototype.matrix=function(e,i,r,s,n,a){return this.transform(p.MATRIX(e,i,r,s,n,a))},e.prototype.skewX=function(e){return this.transform(p.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(p.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(p.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(p.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(p.ANNOTATE_ARCS())},e}(),v=function(e){return 48<=e.charCodeAt(0)&&57>=e.charCodeAt(0)},w=function(e){function i(){var i=e.call(this)||this;return i.curNumber="",i.curCommandType=-1,i.curCommandRelative=!1,i.canParseCommandOrComma=!0,i.curNumberHasExp=!1,i.curNumberHasExpDigits=!1,i.curNumberHasDecimal=!1,i.curArgs=[],i}return o(i,e),i.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw SyntaxError("Unterminated command at the path end.");return e},i.prototype.parse=function(e,i){var r=this;void 0===i&&(i=[]);for(var s=function(e){i.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},n=0;n<e.length;n++){var a=e[n],o=this.curCommandType===T.ARC&&(3===this.curArgs.length||4===this.curArgs.length)&&1===this.curNumber.length&&("0"===this.curNumber||"1"===this.curNumber),l=v(a)&&("0"===this.curNumber&&"0"===a||o);if(!v(a)||l)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var h=Number(this.curNumber);if(isNaN(h))throw SyntaxError("Invalid number ending at "+n);if(this.curCommandType===T.ARC){if(0===this.curArgs.length||1===this.curArgs.length){if(0>h)throw SyntaxError('Expected positive number, got "'+h+'" at index "'+n+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+n+'"')}this.curArgs.push(h),this.curArgs.length===C[this.curCommandType]&&(T.HORIZ_LINE_TO===this.curCommandType?s({type:T.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):T.VERT_LINE_TO===this.curCommandType?s({type:T.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===T.MOVE_TO||this.curCommandType===T.LINE_TO||this.curCommandType===T.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),T.MOVE_TO===this.curCommandType&&(this.curCommandType=T.LINE_TO)):this.curCommandType===T.CURVE_TO?s({type:T.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===T.SMOOTH_CURVE_TO?s({type:T.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===T.QUAD_TO?s({type:T.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===T.ARC&&s({type:T.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(" "!==a&&"	"!==a&&"\r"!==a&&"\n"!==a)if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(l)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw SyntaxError("Unterminated command at index "+n+".");if(!this.canParseCommandOrComma)throw SyntaxError('Unexpected character "'+a+'" at index '+n+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=T.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=T.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=T.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=T.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=T.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=T.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=T.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=T.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw SyntaxError('Unexpected character "'+a+'" at index '+n+".");this.curCommandType=T.ARC,this.curCommandRelative="a"===a}else i.push({type:T.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return i},i.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,r){void 0===r&&(r=[]);for(var s=0,n=Object.getPrototypeOf(this).parse.call(this,i);s<n.length;s++){var a=e(n[s]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return r}}})},i}(b),T=function(e){function i(r){var s=e.call(this)||this;return s.commands="string"==typeof r?i.parse(r):r,s}return o(i,e),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var e=p.CALCULATE_BOUNDS();return this.transform(e),e},i.prototype.transform=function(e){for(var i=[],r=0,s=this.commands;r<s.length;r++){var n=e(s[r]);Array.isArray(n)?i.push.apply(i,n):i.push(n)}return this.commands=i,this},i.encode=function(e){var i=e,r="";Array.isArray(i)||(i=[i]);for(var s=0;s<i.length;s++){var n=i[s];if(n.type===T.CLOSE_PATH)r+="z";else if(n.type===T.HORIZ_LINE_TO)r+=(n.relative?"h":"H")+n.x;else if(n.type===T.VERT_LINE_TO)r+=(n.relative?"v":"V")+n.y;else if(n.type===T.MOVE_TO)r+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===T.LINE_TO)r+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===T.CURVE_TO)r+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===T.SMOOTH_CURVE_TO)r+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===T.QUAD_TO)r+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===T.SMOOTH_QUAD_TO)r+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==T.ARC)throw Error('Unexpected command type "'+n.type+'" at index '+s+".");r+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return r},i.parse=function(e){var i=new w,r=[];return i.parse(e,r),i.finish(r),r},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(b),C=((m={})[T.MOVE_TO]=2,m[T.LINE_TO]=2,m[T.HORIZ_LINE_TO]=1,m[T.VERT_LINE_TO]=1,m[T.CLOSE_PATH]=0,m[T.QUAD_TO]=4,m[T.SMOOTH_QUAD_TO]=2,m[T.CURVE_TO]=6,m[T.SMOOTH_CURVE_TO]=4,m[T.ARC]=7,m);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],A=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],M=function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},R=r(173656),P=Object.freeze({__proto__:null,offscreen:function(){let{DOMParser:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,createCanvas:(e,i)=>new OffscreenCanvas(e,i),async createImage(e){let i=await fetch(e),r=await i.blob();return await createImageBitmap(r)}};return(void 0!==globalThis.DOMParser||void 0===e)&&Reflect.deleteProperty(i,"DOMParser"),i},node:function(e){let{DOMParser:i,canvas:r,fetch:s}=e;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:i,fetch:s,createCanvas:r.createCanvas,createImage:r.loadImage}}});function S(e){return e.replace(/(?!\u3000)\s+/gm," ")}function I(e){let i=e.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return i?i.map(parseFloat):[]}let N=/^[A-Z-]+$/;function O(e){let i=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(e);return i&&(i[2]||i[3]||i[4])||""}let L=/(\[[^\]]+\])/g,U=/(#[^\s+>~.[:]+)/g,D=/(\.[^\s+>~.[:]+)/g,k=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,B=/(:[\w-]+\([^)]*\))/gi,z=/(:[^\s+>~.[:]+)/g,V=/([^\s+>~.[:]+)/g;function H(e,i){let r=i.exec(e);return r?[e.replace(i," "),r.length]:[e,0]}function X(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function F(e,i){return(e[0]*i[0]+e[1]*i[1])/(X(e)*X(i))}function Y(e,i){return(e[0]*i[1]<e[1]*i[0]?-1:1)*Math.acos(F(e,i))}function Z(e){return 3*e*(1-e)*(1-e)}class q{static empty(e){return new q(e,"EMPTY","")}split(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",{document:i,name:r}=this;return S(this.getString()).trim().split(e).map(e=>new q(i,r,e))}hasValue(e){let i=this.value;return null!==i&&""!==i&&(e||0!==i)&&void 0!==i}isString(e){let{value:i}=this,r="string"==typeof i;return r&&e?e.test(i):r}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;let e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return void 0===e||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return void 0===e?0:parseFloat(e);let{value:i}=this,r=parseFloat(i);return this.isString(/%$/)&&(r/=100),r}getString(e){return void 0===e||this.hasValue()?void 0===this.value?"":String(this.value):String(e)}getColor(e){let i=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,i=function(e){if(!e.startsWith("rgb"))return e;let i=3;return e.replace(/\d+(\.\d+)?/g,(e,r)=>i--&&r?String(Math.round(parseFloat(e))):e)}(i),this.value=i),i}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;let[r,s]="boolean"==typeof e?[void 0,e]:[e],{viewPort:n}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(n.computeSize("x"),n.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(n.computeSize("x"),n.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*n.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*n.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&s:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*n.computeSize(r);default:{let e=this.getNumber();if(i&&e<1)return e*n.computeSize(r);return e}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){let e=this.getString(),i=/#([^)'"]+)/.exec(e),r=(null==i?void 0:i[1])||e;return this.document.definitions[r]}getFillStyleDefinition(e,i){let r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient&&"getBoundingBox"in e)return r.createGradient(this.document.ctx,e,i);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){let e=r.getAttribute("patternTransform");(r=r.getHrefAttribute().getDefinition())&&e.hasValue()&&r.getAttribute("patternTransform",!0).setValue(e.value)}if(r)return r.createPattern(this.document.ctx,e,i)}return null}getTextBaseline(){if(!this.hasValue())return null;let e=this.getString();return q.textBaselineMapping[e]||null}addOpacity(e){let i=this.getColor(),r=i.length,s=0;for(let e=0;e<r&&(","===i[e]&&s++,3!==s);e++);if(e.hasValue()&&this.isString()&&3!==s){let r=new n.Z(i);r.ok&&(r.alpha=e.getNumber(),i=r.toRGBA())}return new q(this.document,this.name,i)}constructor(e,i,r){this.document=e,this.name=i,this.value=r,this.isNormalizedColor=!1}}q.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class G{clear(){this.viewPorts=[]}setCurrent(e,i){this.viewPorts.push({width:e,height:i})}removeCurrent(){this.viewPorts.pop()}getRoot(){let[e]=this.viewPorts;return e||W()}getCurrent(){let{viewPorts:e}=this,i=e[e.length-1];return i||W()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return"number"==typeof e?e:"x"===e?this.width:"y"===e?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}function W(){return{width:G.DEFAULT_VIEWPORT_WIDTH,height:G.DEFAULT_VIEWPORT_HEIGHT}}G.DEFAULT_VIEWPORT_WIDTH=800,G.DEFAULT_VIEWPORT_HEIGHT=600;class ${static parse(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[r=i,s=i]=I(e);return new $(r,s)}static parseScale(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[r=i,s=r]=I(e);return new $(r,s)}static parsePath(e){let i=I(e),r=i.length,s=[];for(let e=0;e<r;e+=2)s.push(new $(i[e],i[e+1]));return s}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){let{x:i,y:r}=this,s=i*e[0]+r*e[2]+e[4],n=i*e[1]+r*e[3]+e[5];this.x=s,this.y=n}constructor(e,i){this.x=e,this.y=i}}class J{isWorking(){return this.working}start(){if(this.working)return;let{screen:e,onClick:i,onMouseMove:r}=this,s=e.ctx.canvas;s.onclick=i,s.onmousemove=r,this.working=!0}stop(){if(!this.working)return;let e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){let e;if(!this.working)return;let{screen:i,events:r,eventElements:s}=this,{style:n}=i.ctx.canvas;n&&(n.cursor=""),r.forEach((i,r)=>{let{run:n}=i;for(e=s[r];e;)n(e),e=e.parent}),this.events=[],this.eventElements=[]}checkPath(e,i){if(!this.working||!i)return;let{events:r,eventElements:s}=this;r.forEach((r,n)=>{let{x:a,y:o}=r;!s[n]&&i.isPointInPath&&i.isPointInPath(a,o)&&(s[n]=e)})}checkBoundingBox(e,i){if(!this.working||!i)return;let{events:r,eventElements:s}=this;r.forEach((r,n)=>{let{x:a,y:o}=r;!s[n]&&i.isPointInBox(a,o)&&(s[n]=e)})}mapXY(e,i){let{window:r,ctx:s}=this.screen,n=new $(e,i),a=s.canvas;for(;a;)n.x-=a.offsetLeft,n.y-=a.offsetTop,a=a.offsetParent;return(null==r?void 0:r.scrollX)&&(n.x+=r.scrollX),(null==r?void 0:r.scrollY)&&(n.y+=r.scrollY),n}onClick(e){let{x:i,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:i,y:r,run(e){e.onClick&&e.onClick()}})}onMouseMove(e){let{x:i,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:i,y:r,run(e){e.onMouseMove&&e.onMouseMove()}})}constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}let j="undefined"!=typeof window?window:null,Q="undefined"!=typeof fetch?fetch.bind(void 0):void 0;class K{wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;let e=this.waits.every(e=>e());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){let{document:i,ctx:r,aspectRatio:s,width:n,desiredWidth:a,height:o,desiredHeight:l,minX:h=0,minY:u=0,refX:c,refY:d,clip:p=!1,clipX:f=0,clipY:g=0}=e,[y,x]=S(s).replace(/^defer\s/,"").split(" "),m=y||"xMidYMid",b=x||"meet",v=n/a,w=o/l,T=Math.min(v,w),C=Math.max(v,w),E=a,_=l;"meet"===b&&(E*=T,_*=T),"slice"===b&&(E*=C,_*=C);let A=new q(i,"refX",c),M=new q(i,"refY",d),R=A.hasValue()&&M.hasValue();if(R&&r.translate(-T*A.getPixels("x"),-T*M.getPixels("y")),p){let e=T*f,i=T*g;r.beginPath(),r.moveTo(e,i),r.lineTo(n,i),r.lineTo(n,o),r.lineTo(e,o),r.closePath(),r.clip()}if(!R){let e="meet"===b&&T===w,i="slice"===b&&C===w,s="meet"===b&&T===v,a="slice"===b&&C===v;m.startsWith("xMid")&&(e||i)&&r.translate(n/2-E/2,0),m.endsWith("YMid")&&(s||a)&&r.translate(0,o/2-_/2),m.startsWith("xMax")&&(e||i)&&r.translate(n-E,0),m.endsWith("YMax")&&(s||a)&&r.translate(0,o-_)}switch(!0){case"none"===m:r.scale(v,w);break;case"meet"===b:r.scale(T,T);break;case"slice"===b:r.scale(C,C)}r.translate(-h,-u)}start(e){let{enableRedraw:i=!1,ignoreMouse:r=!1,ignoreAnimation:n=!1,ignoreDimensions:a=!1,ignoreClear:o=!1,forceRedraw:l,scaleWidth:h,scaleHeight:u,offsetX:c,offsetY:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mouse:p}=this,f=1e3/K.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=f,this.readyPromise=new Promise(e=>{this.resolveReady=e}),this.isReady()&&this.render(e,a,o,h,u,c,d),!i)return;let g=Date.now(),y=g,x=0,m=()=>{(x=(g=Date.now())-y)>=f&&(y=g-x%f,this.shouldUpdate(n,l)&&(this.render(e,a,o,h,u,c,d),p.runEvents())),this.intervalId=(0,s.Z)(m)};r||p.start(),this.intervalId=(0,s.Z)(m)}stop(){this.intervalId&&(s.Z.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,i){if(!e){let{frameDuration:e}=this;if(this.animations.reduce((i,r)=>r.update(e)||i,!1))return!0}return!!("function"==typeof i&&i()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,i,r,s,n,a,o){let{viewPort:l,ctx:h,isFirstRender:u}=this,c=h.canvas;l.clear(),c.width&&c.height&&l.setCurrent(c.width,c.height);let d=e.getStyle("width"),p=e.getStyle("height");!i&&(u||"number"!=typeof s&&"number"!=typeof n)&&(d.hasValue()&&(c.width=d.getPixels("x"),c.style&&(c.style.width="".concat(c.width,"px"))),p.hasValue()&&(c.height=p.getPixels("y"),c.style&&(c.style.height="".concat(c.height,"px"))));let f=c.clientWidth||c.width,g=c.clientHeight||c.height;if(i&&d.hasValue()&&p.hasValue()&&(f=d.getPixels("x"),g=p.getPixels("y")),l.setCurrent(f,g),"number"==typeof a&&e.getAttribute("x",!0).setValue(a),"number"==typeof o&&e.getAttribute("y",!0).setValue(o),"number"==typeof s||"number"==typeof n){let i=I(e.getAttribute("viewBox").getString()),r=0,a=0;if("number"==typeof s){let n=e.getStyle("width");n.hasValue()?r=n.getPixels("x")/s:i[2]&&!isNaN(i[2])&&(r=i[2]/s)}if("number"==typeof n){let r=e.getStyle("height");r.hasValue()?a=r.getPixels("y")/n:i[3]&&!isNaN(i[3])&&(a=i[3]/n)}r||(r=a),a||(a=r),e.getAttribute("width",!0).setValue(s),e.getAttribute("height",!0).setValue(n);let o=e.getStyle("transform",!0,!0);o.setValue("".concat(o.getString()," scale(").concat(1/r,", ").concat(1/a,")"))}r||h.clearRect(0,0,f,g),e.render(h),u&&(this.isFirstRender=!1)}constructor(e,{fetch:i=Q,window:r=j}={}){if(this.ctx=e,this.viewPort=new G,this.mouse=new J(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,!i)throw Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=i}}K.defaultWindow=j,K.defaultFetch=Q,K.FRAMERATE=30,K.MAX_VIRTUAL_PIXELS=3e4;let{defaultFetch:tt}=K,te="undefined"!=typeof DOMParser?DOMParser:void 0;class ti{async parse(e){return e.startsWith("<")?this.parseFromString(e):this.load(e)}parseFromString(e){let i=new this.DOMParser;try{return this.checkDocument(i.parseFromString(e,"image/svg+xml"))}catch(r){return this.checkDocument(i.parseFromString(e,"text/xml"))}}checkDocument(e){let i=e.getElementsByTagName("parsererror")[0];if(i)throw Error(i.textContent||"Unknown parse error");return e}async load(e){let i=await this.fetch(e),r=await i.text();return this.parseFromString(r)}constructor({fetch:e=tt,DOMParser:i=te}={}){if(!e)throw Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!i)throw Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=e,this.DOMParser=i}}class tr{apply(e){let{originX:i,originY:r,matrix:s}=this,n=i.getPixels("x"),a=r.getPixels("y");e.translate(n,a),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),e.translate(-n,-a)}unapply(e){let{originX:i,originY:r,matrix:s}=this,n=s[0],a=s[2],o=s[4],l=s[1],h=s[3],u=s[5],c=1/(n*(h-0*u)-a*(l-0*u)+o*(0*l-0*h)),d=i.getPixels("x"),p=r.getPixels("y");e.translate(d,p),e.transform(c*(h-0*u),c*(0*u-l),c*(0*o-a),c*(n-0*o),c*(a*u-o*h),c*(o*l-n*u)),e.translate(-d,-p)}applyToPoint(e){e.applyTransform(this.matrix)}constructor(e,i,r){this.type="matrix",this.matrix=function(e){let i=I(e);return[i[0]||0,i[1]||0,i[2]||0,i[3]||0,i[4]||0,i[5]||0]}(i),this.originX=r[0],this.originY=r[1]}}class ts extends tr{constructor(e,i,r){super(e,i,r),this.type="skew",this.angle=new q(e,"angle",i)}}class tn{static fromElement(e,i){let r=i.getStyle("transform",!1,!0);if(r.hasValue()){let[s,n=s]=i.getStyle("transform-origin",!1,!0).split();if(s&&n)return new tn(e,r.getString(),[s,n])}return null}apply(e){this.transforms.forEach(i=>i.apply(e))}unapply(e){this.transforms.forEach(i=>i.unapply(e))}applyToPoint(e){this.transforms.forEach(i=>i.applyToPoint(e))}constructor(e,i,r){this.document=e,this.transforms=[],S(i).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).forEach(e=>{if("none"===e)return;let[i,s]=function(e){let[i="",r=""]=e.split("(");return[i.trim(),r.trim().replace(")","")]}(e),n=tn.transformTypes[i];n&&this.transforms.push(new n(this.document,s,r))})}}tn.transformTypes={translate:class{apply(e){let{x:i,y:r}=this.point;e.translate(i||0,r||0)}unapply(e){let{x:i,y:r}=this.point;e.translate(-1*i||0,-1*r||0)}applyToPoint(e){let{x:i,y:r}=this.point;e.applyTransform([1,0,0,1,i||0,r||0])}constructor(e,i){this.type="translate",this.point=$.parse(i)}},rotate:class{apply(e){let{cx:i,cy:r,originX:s,originY:n,angle:a}=this,o=i+s.getPixels("x"),l=r+n.getPixels("y");e.translate(o,l),e.rotate(a.getRadians()),e.translate(-o,-l)}unapply(e){let{cx:i,cy:r,originX:s,originY:n,angle:a}=this,o=i+s.getPixels("x"),l=r+n.getPixels("y");e.translate(o,l),e.rotate(-1*a.getRadians()),e.translate(-o,-l)}applyToPoint(e){let{cx:i,cy:r,angle:s}=this,n=s.getRadians();e.applyTransform([1,0,0,1,i||0,r||0]),e.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),e.applyTransform([1,0,0,1,-i||0,-r||0])}constructor(e,i,r){this.type="rotate";let s=I(i);this.angle=new q(e,"angle",s[0]),this.originX=r[0],this.originY=r[1],this.cx=s[1]||0,this.cy=s[2]||0}},scale:class{apply(e){let{scale:{x:i,y:r},originX:s,originY:n}=this,a=s.getPixels("x"),o=n.getPixels("y");e.translate(a,o),e.scale(i,r||i),e.translate(-a,-o)}unapply(e){let{scale:{x:i,y:r},originX:s,originY:n}=this,a=s.getPixels("x"),o=n.getPixels("y");e.translate(a,o),e.scale(1/i,1/r||i),e.translate(-a,-o)}applyToPoint(e){let{x:i,y:r}=this.scale;e.applyTransform([i||0,0,0,r||0,0,0])}constructor(e,i,r){this.type="scale";let s=$.parseScale(i);(0===s.x||0===s.y)&&(s.x=1e-8,s.y=1e-8),this.scale=s,this.originX=r[0],this.originY=r[1]}},matrix:tr,skewX:class extends ts{constructor(e,i,r){super(e,i,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},skewY:class extends ts{constructor(e,i,r){super(e,i,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}};class ta{getAttribute(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes[e];if(!r&&i){let i=new q(this.document,e,"");return this.attributes[e]=i,i}return r||q.empty(this.document)}getHrefAttribute(){let e;for(let i in this.attributes)if("href"===i||i.endsWith(":href")){e=this.attributes[i];break}return e||q.empty(this.document)}getStyle(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.styles[e];if(s)return s;let n=this.getAttribute(e);if(n.hasValue())return this.styles[e]=n,n;if(!r){let{parent:i}=this;if(i){let r=i.getStyle(e);if(r.hasValue())return r}}if(i){let i=new q(this.document,e,"");return this.styles[e]=i,i}return q.empty(this.document)}render(e){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(e.save(),this.getStyle("mask").hasValue()){let i=this.getStyle("mask").getDefinition();i&&(this.applyEffects(e),i.apply(e,this))}else if("none"!==this.getStyle("filter").getValue("none")){let i=this.getStyle("filter").getDefinition();i&&(this.applyEffects(e),i.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){let i=tn.fromElement(this.document,this);i&&i.apply(e);let r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){let i=r.getDefinition();i&&i.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(i=>{i.render(e)})}addChild(e){let i=e instanceof ta?e:this.document.createElement(e);i.parent=this,ta.ignoreChildTypes.includes(i.type)||this.children.push(i)}matchesSelector(e){var i;let{node:r}=this;if("function"==typeof r.matches)return r.matches(e);let s=null==(i=r.getAttribute)?void 0:i.call(r,"class");return!!s&&""!==s&&s.split(" ").some(i=>".".concat(i)===e)}addStylesFromStyleDefinition(){let e,{styles:i,stylesSpecificity:r}=this.document;for(let s in i)if(!s.startsWith("@")&&this.matchesSelector(s)){let n=i[s],a=r[s];if(n)for(let i in n){let r=this.stylesSpecificity[i];void 0===r&&(r="000"),a&&a>=r&&((e=n[i])&&(this.styles[i]=e),this.stylesSpecificity[i]=a)}}}removeStyles(e,i){return i.reduce((i,r)=>{let s=e.getStyle(r);if(!s.hasValue())return i;let n=s.getString();return s.setValue(""),[...i,[r,n]]},[])}restoreStyles(e,i){i.forEach(i=>{let[r,s]=i;e.getStyle(r,!0).setValue(s)})}isFirstChild(){var e;return(null==(e=this.parent)?void 0:e.children.indexOf(this))===0}constructor(e,i,r=!1){if(this.document=e,this.node=i,this.captureTextNodes=r,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!i||1!==i.nodeType)return;Array.from(i.attributes).forEach(i=>{var r;let s=(r=i.nodeName,N.test(r)?r.toLowerCase():r);this.attributes[s]=new q(e,s,i.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(e=>e.trim()).forEach(i=>{if(!i)return;let[r,s]=i.split(":").map(e=>e.trim());r&&(this.styles[r]=new q(e,r,s))});let{definitions:s}=e,n=this.getAttribute("id");n.hasValue()&&!s[n.getString()]&&(s[n.getString()]=this),Array.from(i.childNodes).forEach(i=>{if(1===i.nodeType)this.addChild(i);else if(r&&(3===i.nodeType||4===i.nodeType)){let r=e.createTextNode(i);r.getText().length>0&&this.addChild(r)}})}}ta.ignoreChildTypes=["title"];class to extends ta{constructor(e,i,r){super(e,i,r)}}function tl(e){let i=e.trim();return/^('|")/.test(i)?i:'"'.concat(i,'"')}class th{static parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,r="",s="",n="",a="",o="",l=S(e).trim().split(" "),h={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(e=>{switch(!0){case!h.fontStyle&&th.styles.includes(e):"inherit"!==e&&(r=e),h.fontStyle=!0;break;case!h.fontVariant&&th.variants.includes(e):"inherit"!==e&&(s=e),h.fontStyle=!0,h.fontVariant=!0;break;case!h.fontWeight&&th.weights.includes(e):"inherit"!==e&&(n=e),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0;break;case!h.fontSize:"inherit"!==e&&(a=e.split("/")[0]||""),h.fontStyle=!0,h.fontVariant=!0,h.fontWeight=!0,h.fontSize=!0;break;default:"inherit"!==e&&(o+=e)}}),new th(r,s,n,a,o,i)}toString(){var e;return[function(e){if(!e)return"";let i=e.trim().toLowerCase();switch(i){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return i;default:if(/^oblique\s+(-|)\d+deg$/.test(i))return i;return""}}(this.fontStyle),this.fontVariant,function(e){if(!e)return"";let i=e.trim().toLowerCase();switch(i){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return i;default:if(/^[\d.]+$/.test(i))return i;return""}}(this.fontWeight),this.fontSize,(e=this.fontFamily,void 0===R?e:e.trim().split(",").map(tl).join(","))].join(" ").trim()}constructor(e,i,r,s,n,a){let o=a?"string"==typeof a?th.parse(a):a:{};this.fontFamily=n||o.fontFamily,this.fontSize=s||o.fontSize,this.fontStyle=e||o.fontStyle,this.fontWeight=r||o.fontWeight,this.fontVariant=i||o.fontVariant}}th.styles="normal|italic|oblique|inherit",th.variants="normal|small-caps|inherit",th.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class tu{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,i){void 0!==e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),void 0!==i&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))}addX(e){this.addPoint(e,0)}addY(e){this.addPoint(0,e)}addBoundingBox(e){if(!e)return;let{x1:i,y1:r,x2:s,y2:n}=e;this.addPoint(i,r),this.addPoint(s,n)}sumCubic(e,i,r,s,n){return Math.pow(1-e,3)*i+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*s+Math.pow(e,3)*n}bezierCurveAdd(e,i,r,s,n){let a=6*i-12*r+6*s,o=-3*i+9*r-9*s+3*n,l=3*r-3*i;if(0===o){if(0===a)return;let o=-l/a;0<o&&o<1&&(e?this.addX(this.sumCubic(o,i,r,s,n)):this.addY(this.sumCubic(o,i,r,s,n)));return}let h=Math.pow(a,2)-4*l*o;if(h<0)return;let u=(-a+Math.sqrt(h))/(2*o);0<u&&u<1&&(e?this.addX(this.sumCubic(u,i,r,s,n)):this.addY(this.sumCubic(u,i,r,s,n)));let c=(-a-Math.sqrt(h))/(2*o);0<c&&c<1&&(e?this.addX(this.sumCubic(c,i,r,s,n)):this.addY(this.sumCubic(c,i,r,s,n)))}addBezierCurve(e,i,r,s,n,a,o,l){this.addPoint(e,i),this.addPoint(o,l),this.bezierCurveAdd(!0,e,r,n,o),this.bezierCurveAdd(!1,i,s,a,l)}addQuadraticCurve(e,i,r,s,n,a){let o=e+2/3*(r-e),l=i+2/3*(s-i);this.addBezierCurve(e,i,o,o+1/3*(n-e),l,l+1/3*(a-i),n,a)}isPointInBox(e,i){let{x1:r,y1:s,x2:n,y2:a}=this;return r<=e&&e<=n&&s<=i&&i<=a}constructor(e=Number.NaN,i=Number.NaN,r=Number.NaN,s=Number.NaN){this.x1=e,this.y1=i,this.x2=r,this.y2=s,this.addPoint(e,i),this.addPoint(r,s)}}class tc extends ta{calculateOpacity(){let e=1,i=this;for(;i;){let r=i.getStyle("opacity",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),i=i.parent}return e}setContext(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i){let i=this.getStyle("fill"),r=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),n=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){let s=i.getFillStyleDefinition(this,r);s&&(e.fillStyle=s)}else if(i.hasValue()){"currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor());let r=i.getColor();"inherit"!==r&&(e.fillStyle="none"===r?"rgba(0,0,0,0)":r)}if(r.hasValue()){let i=new q(this.document,"fill",e.fillStyle).addOpacity(r).getColor();e.fillStyle=i}if(s.isUrlDefinition()){let i=s.getFillStyleDefinition(this,n);i&&(e.strokeStyle=i)}else if(s.hasValue()){"currentColor"===s.getString()&&s.setValue(this.getStyle("color").getColor());let i=s.getString();"inherit"!==i&&(e.strokeStyle="none"===i?"rgba(0,0,0,0)":i)}if(n.hasValue()){let i=new q(this.document,"stroke",e.strokeStyle).addOpacity(n).getString();e.strokeStyle=i}let a=this.getStyle("stroke-width");a.hasValue()&&(e.lineWidth=a.getPixels()||1e-8);let o=this.getStyle("stroke-linecap"),l=this.getStyle("stroke-linejoin"),h=this.getStyle("stroke-miterlimit"),u=this.getStyle("stroke-dasharray"),c=this.getStyle("stroke-dashoffset");if(o.hasValue()&&(e.lineCap=o.getString()),l.hasValue()&&(e.lineJoin=l.getString()),h.hasValue()&&(e.miterLimit=h.getNumber()),u.hasValue()&&"none"!==u.getString()){let i=I(u.getString());void 0!==e.setLineDash?e.setLineDash(i):void 0!==e.webkitLineDash?e.webkitLineDash=i:void 0!==e.mozDash&&(1!==i.length||0!==i[0])&&(e.mozDash=i);let r=c.getPixels();void 0!==e.lineDashOffset?e.lineDashOffset=r:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=r:void 0!==e.mozDashOffset&&(e.mozDashOffset=r)}}if(this.modifiedEmSizeStack=!1,void 0!==e.font){let i=this.getStyle("font"),r=this.getStyle("font-style"),s=this.getStyle("font-variant"),n=this.getStyle("font-weight"),a=this.getStyle("font-size"),o=this.getStyle("font-family"),l=new th(r.getString(),s.getString(),n.getString(),a.hasValue()?"".concat(a.getPixels(!0),"px"):"",o.getString(),th.parse(i.getString(),e.font));r.setValue(l.fontStyle),s.setValue(l.fontVariant),n.setValue(l.fontWeight),a.setValue(l.fontSize),o.setValue(l.fontFamily),e.font=l.toString(),a.isPixels()&&(this.document.emSize=a.getPixels(),this.modifiedEmSizeStack=!0)}i||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...e){super(...e),this.modifiedEmSizeStack=!1}}class td extends tc{setContext(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(e,i);let r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(e.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if("text"!==this.type)return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);let i=null;return this.children.forEach((r,s)=>{let n=this.getChildBoundingBox(e,this,this,s);i?i.addBoundingBox(n):i=n}),i}getFontSize(){let{document:e,parent:i}=this,r=th.parse(e.ctx.font).fontSize;return i.getStyle("font-size").getNumber(r)}getTElementBoundingBox(e){let i=this.getFontSize();return new tu(this.x,this.y-i,this.x+this.measureText(e),this.y)}getGlyph(e,i,r){let s,n=i[r];if(e.isArabic){var a;let o=i.length,l=i[r-1],h=i[r+1],u="isolated";(0===r||" "===l)&&r<o-1&&" "!==h&&(u="terminal"),r>0&&" "!==l&&r<o-1&&" "!==h&&(u="medial"),r>0&&" "!==l&&(r===o-1||" "===h)&&(u="initial"),s=(null==(a=e.arabicGlyphs[n])?void 0:a[u])||e.glyphs[n]}else s=e.glyphs[n];return s||(s=e.missingGlyph),s}getText(){return""}getTextFromNode(e){let i=e||this.node,r=Array.from(i.parentNode.childNodes),s=r.indexOf(i),n=r.length-1,a=S(i.textContent||"");return 0===s&&(a=a.replace(/^[\n \t]+/,"")),s===n&&(a=a.replace(/[\n \t]+$/,"")),a}renderChildren(e){if("text"!==this.type)return void this.renderTElementChildren(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((i,r)=>{this.renderChild(e,this,this,r)});let{mouse:i}=this.document.screen;i.isWorking()&&i.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){let{document:i,parent:r}=this,s=this.getText(),n=r.getStyle("font-family").getDefinition();if(n){let{unitsPerEm:a}=n.fontFace,o=th.parse(i.ctx.font),l=r.getStyle("font-size").getNumber(o.fontSize),h=r.getStyle("font-style").getString(o.fontStyle),u=l/a,c=n.isRTL?s.split("").reverse().join(""):s,d=I(r.getAttribute("dx").getString()),p=c.length;for(let i=0;i<p;i++){let r=this.getGlyph(n,c,i);e.translate(this.x,this.y),e.scale(u,-u);let s=e.lineWidth;e.lineWidth=e.lineWidth*a/l,"italic"===h&&e.transform(1,0,.4,1,0,0),r.render(e),"italic"===h&&e.transform(1,0,-.4,1,0,0),e.lineWidth=s,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=l*(r.horizAdvX||n.horizAdvX)/a,void 0===d[i]||isNaN(d[i])||(this.x+=d[i])}return}let{x:a,y:o}=this;e.fillStyle&&e.fillText(s,a,o),e.strokeStyle&&e.strokeText(s,a,o)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;let e=this.leafTexts[this.textChunkStart],i=e.getStyle("text-anchor").getString("start"),r=0;r="start"===i?e.x-this.minX:"end"===i?e.x-this.maxX:e.x-(this.minX+this.maxX)/2;for(let e=this.textChunkStart;e<this.leafTexts.length;e++)this.leafTexts[e].x+=r;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(e){this.children.forEach((i,r)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,r)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,i,r,s){let n=r.children[s];n.children.length>0?n.children.forEach((r,s)=>{i.adjustChildCoordinatesRecursiveCore(e,i,n,s)}):this.adjustChildCoordinates(e,i,r,s)}adjustChildCoordinates(e,i,r,s){let n=r.children[s];if("function"!=typeof n.measureText)return n;e.save(),n.setContext(e,!0);let a=n.getAttribute("x"),o=n.getAttribute("y"),l=n.getAttribute("dx"),h=n.getAttribute("dy"),u=n.getStyle("font-family").getDefinition(),c=!!(null==u?void 0:u.isRTL);0===s&&(a.hasValue()||a.setValue(n.getInheritedAttribute("x")),o.hasValue()||o.setValue(n.getInheritedAttribute("y")),l.hasValue()||l.setValue(n.getInheritedAttribute("dx")),h.hasValue()||h.setValue(n.getInheritedAttribute("dy")));let d=n.measureText(e);return c&&(i.x-=d),a.hasValue()?(i.applyAnchoring(),n.x=a.getPixels("x"),l.hasValue()&&(n.x+=l.getPixels("x"))):(l.hasValue()&&(i.x+=l.getPixels("x")),n.x=i.x),i.x=n.x,c||(i.x+=d),o.hasValue()?(n.y=o.getPixels("y"),h.hasValue()&&(n.y+=h.getPixels("y"))):(h.hasValue()&&(i.y+=h.getPixels("y")),n.y=i.y),i.y=n.y,i.leafTexts.push(n),i.minX=Math.min(i.minX,n.x,n.x+d),i.maxX=Math.max(i.maxX,n.x,n.x+d),n.clearContext(e),e.restore(),n}getChildBoundingBox(e,i,r,s){let n=r.children[s];if("function"!=typeof n.getBoundingBox)return null;let a=n.getBoundingBox(e);return a&&n.children.forEach((r,s)=>{let o=i.getChildBoundingBox(e,i,n,s);a.addBoundingBox(o)}),a}renderChild(e,i,r,s){let n=r.children[s];n.render(e),n.children.forEach((r,s)=>{i.renderChild(e,i,n,s)})}measureText(e){let{measureCache:i}=this;if(~i)return i;let r=this.getText(),s=this.measureTargetText(e,r);return this.measureCache=s,s}measureTargetText(e,i){if(!i.length)return 0;let{parent:r}=this,s=r.getStyle("font-family").getDefinition();if(s){let e=this.getFontSize(),n=s.isRTL?i.split("").reverse().join(""):i,a=I(r.getAttribute("dx").getString()),o=n.length,l=0;for(let i=0;i<o;i++)l+=(this.getGlyph(s,n,i).horizAdvX||s.horizAdvX)*e/s.fontFace.unitsPerEm,void 0===a[i]||isNaN(a[i])||(l+=a[i]);return l}if(!e.measureText)return 10*i.length;e.save(),this.setContext(e,!0);let{width:n}=e.measureText(i);return this.clearContext(e),e.restore(),n}getInheritedAttribute(e){let i=this;for(;i instanceof td&&i.isFirstChild()&&i.parent;){let r=i.parent.getAttribute(e);if(r.hasValue(!0))return r.getString("0");i=i.parent}return null}constructor(e,i,r){super(e,i,new.target===td||r),this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class tp extends td{getText(){return this.text}constructor(e,i,r){super(e,i,new.target===tp||r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class tf extends tp{constructor(...e){super(...e),this.type="textNode"}}class tg extends T{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new $(0,0),this.control=new $(0,0),this.current=new $(0,0),this.points=[],this.angles=[]}isEnd(){let{i:e,commands:i}=this;return e>=i.length-1}next(){let e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new $(this.command[e],this.command[i]);return this.makeAbsolute(r)}getAsControlPoint(e,i){let r=this.getPoint(e,i);return this.control=r,r}getAsCurrentPoint(e,i){let r=this.getPoint(e,i);return this.current=r,r}getReflectedControlPoint(){let e=this.previousCommand.type;if(e!==T.CURVE_TO&&e!==T.SMOOTH_CURVE_TO&&e!==T.QUAD_TO&&e!==T.SMOOTH_QUAD_TO)return this.current;let{current:{x:i,y:r},control:{x:s,y:n}}=this;return new $(2*i-s,2*r-n)}makeAbsolute(e){if(this.command.relative){let{x:i,y:r}=this.current;e.x+=i,e.y+=r}return e}addMarker(e,i,r){let{points:s,angles:n}=this;r&&n.length>0&&!n[n.length-1]&&(n[n.length-1]=s[s.length-1].angleTo(r)),this.addMarkerAngle(e,i?i.angleTo(e):null)}addMarkerAngle(e,i){this.points.push(e),this.angles.push(i)}getMarkerPoints(){return this.points}getMarkerAngles(){let{angles:e}=this,i=e.length;for(let r=0;r<i;r++)if(!e[r]){for(let s=r+1;s<i;s++)if(e[s]){e[r]=e[s];break}}return e}constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=new $(0,0),this.start=new $(0,0),this.current=new $(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class ty extends tc{path(e){let{pathParser:i}=this,r=new tu;for(i.reset(),e&&e.beginPath();!i.isEnd();)switch(i.next().type){case tg.MOVE_TO:this.pathM(e,r);break;case tg.LINE_TO:this.pathL(e,r);break;case tg.HORIZ_LINE_TO:this.pathH(e,r);break;case tg.VERT_LINE_TO:this.pathV(e,r);break;case tg.CURVE_TO:this.pathC(e,r);break;case tg.SMOOTH_CURVE_TO:this.pathS(e,r);break;case tg.QUAD_TO:this.pathQ(e,r);break;case tg.SMOOTH_QUAD_TO:this.pathT(e,r);break;case tg.ARC:this.pathA(e,r);break;case tg.CLOSE_PATH:this.pathZ(e,r)}return r}getBoundingBox(e){return this.path()}getMarkers(){let{pathParser:e}=this,i=e.getMarkerPoints(),r=e.getMarkerAngles();return i.map((e,i)=>[e,r[i]])}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);let i=this.getStyle("fill-rule");""!==e.fillStyle&&("inherit"!==i.getString("inherit")?e.fill(i.getString()):e.fill()),""!==e.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());let r=this.getMarkers();if(r){let i=r.length-1,s=this.getStyle("marker-start"),n=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(s.isUrlDefinition()){let i=s.getDefinition(),[n,a]=r[0];i.render(e,n,a)}if(n.isUrlDefinition()){let s=n.getDefinition();for(let n=1;n<i;n++){let[i,a]=r[n];s.render(e,i,a)}}if(a.isUrlDefinition()){let s=a.getDefinition(),[n,o]=r[i];s.render(e,n,o)}}}static pathM(e){let i=e.getAsCurrentPoint();return e.start=e.current,{point:i}}pathM(e,i){let{pathParser:r}=this,{point:s}=ty.pathM(r),{x:n,y:a}=s;r.addMarker(s),i.addPoint(n,a),e&&e.moveTo(n,a)}static pathL(e){let{current:i}=e;return{current:i,point:e.getAsCurrentPoint()}}pathL(e,i){let{pathParser:r}=this,{current:s,point:n}=ty.pathL(r),{x:a,y:o}=n;r.addMarker(n,s),i.addPoint(a,o),e&&e.lineTo(a,o)}static pathH(e){let{current:i,command:r}=e,s=new $((r.relative?i.x:0)+r.x,i.y);return e.current=s,{current:i,point:s}}pathH(e,i){let{pathParser:r}=this,{current:s,point:n}=ty.pathH(r),{x:a,y:o}=n;r.addMarker(n,s),i.addPoint(a,o),e&&e.lineTo(a,o)}static pathV(e){let{current:i,command:r}=e,s=new $(i.x,(r.relative?i.y:0)+r.y);return e.current=s,{current:i,point:s}}pathV(e,i){let{pathParser:r}=this,{current:s,point:n}=ty.pathV(r),{x:a,y:o}=n;r.addMarker(n,s),i.addPoint(a,o),e&&e.lineTo(a,o)}static pathC(e){let{current:i}=e,r=e.getPoint("x1","y1");return{current:i,point:r,controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}pathC(e,i){let{pathParser:r}=this,{current:s,point:n,controlPoint:a,currentPoint:o}=ty.pathC(r);r.addMarker(o,a,n),i.addBezierCurve(s.x,s.y,n.x,n.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(n.x,n.y,a.x,a.y,o.x,o.y)}static pathS(e){let{current:i}=e,r=e.getReflectedControlPoint();return{current:i,point:r,controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}pathS(e,i){let{pathParser:r}=this,{current:s,point:n,controlPoint:a,currentPoint:o}=ty.pathS(r);r.addMarker(o,a,n),i.addBezierCurve(s.x,s.y,n.x,n.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(n.x,n.y,a.x,a.y,o.x,o.y)}static pathQ(e){let{current:i}=e;return{current:i,controlPoint:e.getAsControlPoint("x1","y1"),currentPoint:e.getAsCurrentPoint()}}pathQ(e,i){let{pathParser:r}=this,{current:s,controlPoint:n,currentPoint:a}=ty.pathQ(r);r.addMarker(a,n,n),i.addQuadraticCurve(s.x,s.y,n.x,n.y,a.x,a.y),e&&e.quadraticCurveTo(n.x,n.y,a.x,a.y)}static pathT(e){let{current:i}=e,r=e.getReflectedControlPoint();return e.control=r,{current:i,controlPoint:r,currentPoint:e.getAsCurrentPoint()}}pathT(e,i){let{pathParser:r}=this,{current:s,controlPoint:n,currentPoint:a}=ty.pathT(r);r.addMarker(a,n,n),i.addQuadraticCurve(s.x,s.y,n.x,n.y,a.x,a.y),e&&e.quadraticCurveTo(n.x,n.y,a.x,a.y)}static pathA(e){let{current:i,command:r}=e,{rX:s,rY:n,xRot:a,lArcFlag:o,sweepFlag:l}=r,h=Math.PI/180*a,u=e.getAsCurrentPoint(),c=new $(Math.cos(h)*(i.x-u.x)/2+Math.sin(h)*(i.y-u.y)/2,-Math.sin(h)*(i.x-u.x)/2+Math.cos(h)*(i.y-u.y)/2),d=Math.pow(c.x,2)/Math.pow(s,2)+Math.pow(c.y,2)/Math.pow(n,2);d>1&&(s*=Math.sqrt(d),n*=Math.sqrt(d));let p=(o===l?-1:1)*Math.sqrt((Math.pow(s,2)*Math.pow(n,2)-Math.pow(s,2)*Math.pow(c.y,2)-Math.pow(n,2)*Math.pow(c.x,2))/(Math.pow(s,2)*Math.pow(c.y,2)+Math.pow(n,2)*Math.pow(c.x,2)));isNaN(p)&&(p=0);let f=new $(p*s*c.y/n,-(p*n)*c.x/s),g=new $((i.x+u.x)/2+Math.cos(h)*f.x-Math.sin(h)*f.y,(i.y+u.y)/2+Math.sin(h)*f.x+Math.cos(h)*f.y),y=Y([1,0],[(c.x-f.x)/s,(c.y-f.y)/n]),x=[(c.x-f.x)/s,(c.y-f.y)/n],m=[(-c.x-f.x)/s,(-c.y-f.y)/n],b=Y(x,m);return -1>=F(x,m)&&(b=Math.PI),F(x,m)>=1&&(b=0),{currentPoint:u,rX:s,rY:n,sweepFlag:l,xAxisRotation:h,centp:g,a1:y,ad:b}}pathA(e,i){let{pathParser:r}=this,{currentPoint:s,rX:n,rY:a,sweepFlag:o,xAxisRotation:l,centp:h,a1:u,ad:c}=ty.pathA(r),d=1-o?1:-1,p=u+c/2*d,f=new $(h.x+n*Math.cos(p),h.y+a*Math.sin(p));if(r.addMarkerAngle(f,p-d*Math.PI/2),r.addMarkerAngle(s,p-d*Math.PI),i.addPoint(s.x,s.y),e&&!isNaN(u)&&!isNaN(c)){let i=n>a?1:n/a,r=n>a?a/n:1;e.translate(h.x,h.y),e.rotate(l),e.scale(i,r),e.arc(0,0,n>a?n:a,u,u+c,!!(1-o)),e.scale(1/i,1/r),e.rotate(-l),e.translate(-h.x,-h.y)}}static pathZ(e){e.current=e.start}pathZ(e,i){ty.pathZ(this.pathParser),e&&i.x1!==i.x2&&i.y1!==i.y2&&e.closePath()}constructor(e,i,r){super(e,i,r),this.type="path",this.pathParser=new tg(this.getAttribute("d").getString())}}class tx extends tc{setContext(e){var i;let{document:r}=this,{screen:s,window:n}=r,a=e.canvas;if(s.setDefaults(e),"style"in a&&void 0!==e.font&&n&&void 0!==n.getComputedStyle){e.font=n.getComputedStyle(a).getPropertyValue("font");let i=new q(r,"fontSize",th.parse(e.font).fontSize);i.hasValue()&&(r.rootEmSize=i.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:o,height:l}=s.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");let h=this.getAttribute("refX"),u=this.getAttribute("refY"),c=this.getAttribute("viewBox"),d=c.hasValue()?I(c.getString()):null,p=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),f=0,g=0,y=0,x=0;d&&(f=d[0],g=d[1]),this.root||(o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),"marker"===this.type&&(y=f,x=g,f=0,g=0)),s.viewPort.setCurrent(o,l),this.node&&(!this.parent||(null==(i=this.node.parentNode)?void 0:i.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(o=d[2],l=d[3]),r.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s.viewPort.width,desiredWidth:o,height:s.viewPort.height,desiredHeight:l,minX:f,minY:g,refX:h.getValue(),refY:u.getValue(),clip:p,clipX:y,clipY:x}),d&&(s.viewPort.removeCurrent(),s.viewPort.setCurrent(o,l))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.getAttribute("width",!0),n=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),l=s.getNumber(0),h=n.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{let e=this.getAttribute("preserveAspectRatio");e.hasValue()&&e.setValue(e.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(s.setValue(e),n.setValue(i),a.hasValue()||a.setValue("0 0 ".concat(l||e," ").concat(h||i)),o.hasValue()){let r=this.getStyle("width"),s=this.getStyle("height");r.hasValue()&&r.setValue("".concat(e,"px")),s.hasValue()&&s.setValue("".concat(i,"px"))}}constructor(...e){super(...e),this.type="svg",this.root=!1}}class tm extends ty{path(e){let i=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width",!1,!0).getPixels("x"),n=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),l=a.getPixels("x"),h=o.getPixels("y");if(a.hasValue()&&!o.hasValue()&&(h=l),o.hasValue()&&!a.hasValue()&&(l=h),l=Math.min(l,s/2),h=Math.min(h,n/2),e){let a=(Math.sqrt(2)-1)/3*4;e.beginPath(),n>0&&s>0&&(e.moveTo(i+l,r),e.lineTo(i+s-l,r),e.bezierCurveTo(i+s-l+a*l,r,i+s,r+h-a*h,i+s,r+h),e.lineTo(i+s,r+n-h),e.bezierCurveTo(i+s,r+n-h+a*h,i+s-l+a*l,r+n,i+s-l,r+n),e.lineTo(i+l,r+n),e.bezierCurveTo(i+l-a*l,r+n,i,r+n-h+a*h,i,r+n-h),e.lineTo(i,r+h),e.bezierCurveTo(i,r+h-a*h,i+l-a*l,r,i+l,r),e.closePath())}return new tu(i,r,i+s,r+n)}getMarkers(){return null}constructor(...e){super(...e),this.type="rect"}}class tb extends ty{path(e){let{points:i}=this,[{x:r,y:s}]=i,n=new tu(r,s);return e&&(e.beginPath(),e.moveTo(r,s)),i.forEach(i=>{let{x:r,y:s}=i;n.addPoint(r,s),e&&e.lineTo(r,s)}),n}getMarkers(){let{points:e}=this,i=e.length-1,r=[];return e.forEach((s,n)=>{n!==i&&r.push([s,s.angleTo(e[n+1])])}),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}constructor(e,i,r){super(e,i,r),this.type="polyline",this.points=[],this.points=$.parsePath(this.getAttribute("points").getString())}}class tv extends tc{getBoundingBox(e){let i=new tu;return this.children.forEach(r=>{i.addBoundingBox(r.getBoundingBox(e))}),i}constructor(...e){super(...e),this.type="g"}}class tw extends ta{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,i,r){let s=this;this.getHrefAttribute().hasValue()&&(s=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(s));let{stops:n}=s,a=this.getGradient(e,i);if(!a)return this.addParentOpacity(r,n[n.length-1].color);if(n.forEach(e=>{a.addColorStop(e.offset,this.addParentOpacity(r,e.color))}),this.getAttribute("gradientTransform").hasValue()){let{document:e}=this,{MAX_VIRTUAL_PIXELS:i}=K,{viewPort:r}=e.screen,s=r.getRoot(),n=new tm(e);n.attributes.x=new q(e,"x",-i/3),n.attributes.y=new q(e,"y",-i/3),n.attributes.width=new q(e,"width",i),n.attributes.height=new q(e,"height",i);let o=new tv(e);o.attributes.transform=new q(e,"transform",this.getAttribute("gradientTransform").getValue()),o.children=[n];let l=new tx(e);l.attributes.x=new q(e,"x",0),l.attributes.y=new q(e,"y",0),l.attributes.width=new q(e,"width",s.width),l.attributes.height=new q(e,"height",s.height),l.children=[o];let h=e.createCanvas(s.width,s.height),u=h.getContext("2d");return u.fillStyle=a,l.render(u),u.createPattern(h,"no-repeat")}return a}inheritStopContainer(e){this.attributesToInherit.forEach(i=>{!this.getAttribute(i).hasValue()&&e.getAttribute(i).hasValue()&&this.getAttribute(i,!0).setValue(e.getAttribute(i).getValue())})}addParentOpacity(e,i){return e.hasValue()?new q(this.document,"color",i).addOpacity(e).getColor():i}constructor(e,i,r){super(e,i,r),this.attributesToInherit=["gradientUnits"],this.stops=[];let{stops:s,children:n}=this;n.forEach(e=>{"stop"===e.type&&s.push(e)})}}class tT extends ta{getProperty(){let e=this.getAttribute("attributeType").getString(),i=this.getAttribute("attributeName").getString();return"CSS"===e?this.parent.getStyle(i,!0):this.parent.getAttribute(i,!0)}calcValue(){let{initialUnits:e}=this,{progress:i,from:r,to:s}=this.getProgress(),n=r.getNumber()+(s.getNumber()-r.getNumber())*i;return"%"===e&&(n*=100),"".concat(n).concat(e)}update(e){let{parent:i}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){let e=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==e||this.frozen){if("remove"===e&&!this.removed)return this.removed=!0,i&&r&&r.setValue(i.animationFrozen?i.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,i&&r&&(i.animationFrozen=!0,i.animationFrozenValue=r.getString());return!1}this.duration+=e;let s=!1;if(this.begin<this.duration){let e=this.calcValue(),i=this.getAttribute("type");if(i.hasValue()){let r=i.getString();e="".concat(r,"(").concat(e,")")}r.setValue(e),s=!0}return s}getProgress(){let e,i,{document:r,values:s}=this,n=(this.duration-this.begin)/(this.maxDuration-this.begin);if(s.hasValue()){let a,o=n*(s.getValue().length-1),l=Math.floor(o),h=Math.ceil(o);e=new q(r,"from",(a=s.getValue()[l])?parseFloat(a):0),i=new q(r,"to",(a=s.getValue()[h])?parseFloat(a):0),n=(o-l)/(h-l)}else e=this.from,i=this.to;return{progress:n,from:e,to:i}}constructor(e,i,r){super(e,i,r),this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new q(e,"values",null);let s=this.getAttribute("values");s.hasValue()&&this.values.setValue(s.getString().split(";"))}}class tC extends ta{constructor(e,i,r){super(e,i,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class tE extends ty{constructor(e,i,r){super(e,i,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class t_ extends tE{constructor(...e){super(...e),this.type="missing-glyph",this.horizAdvX=0}}let tA=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class tM{async load(e,i){try{let{document:r}=this,s=(await r.canvg.parser.load(i)).getElementsByTagName("font");Array.from(s).forEach(i=>{let s=r.createElement(i);r.definitions[e]=s})}catch(e){console.error('Error while loading font "'.concat(i,'":'),e)}this.loaded=!0}constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}}class tR extends ta{constructor(e,i,r){super(e,i,r),this.type="style",S(Array.from(i.childNodes).map(e=>e.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(i=>{let r=i.trim();if(!r)return;let s=r.split("{"),n=s[0].split(","),a=s[1].split(";");n.forEach(i=>{let r=i.trim();if(!r)return;let s=e.styles[r]||{};if(a.forEach(i=>{let r=i.indexOf(":"),n=i.substr(0,r).trim(),a=i.substr(r+1,i.length-r).trim();n&&a&&(s[n]=new q(e,n,a))}),e.styles[r]=s,e.stylesSpecificity[r]=function(e){let i=[0,0,0],r=e.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[r,s]=H(r,L),i[1]+=s,[r,s]=H(r,U),i[0]+=s,[r,s]=H(r,D),i[1]+=s,[r,s]=H(r,k),i[2]+=s,[r,s]=H(r,B),i[1]+=s,[r,s]=H(r,z),i[1]+=s,r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[r,s]=H(r,V),i[2]+=s,i.join("")}(r),"@font-face"===r){let i=s["font-family"].getString().replace(/"|'/g,"");s.src.getString().split(",").forEach(r=>{if(r.indexOf('format("svg")')>0){let s=O(r);s&&new tM(e).load(i,s)}})}})})}}tR.parseExternalUrl=O;function tP(e,i,r,s){return i+Math.cos(e)*r+Math.sin(e)*s}class tS extends ta{apply(e,i,r,s,n){let{includeOpacity:a,matrix:o}=this,l=e.getImageData(0,0,s,n);for(let e=0;e<n;e++)for(let i=0;i<s;i++){var h,u,c,d,p,f,g,y,x,m,b,v,w,T,C,E,_,A,M,R;let r=(h=l.data,h[e*s*4+4*i+0]),n=(u=l.data,u[e*s*4+4*i+1]),P=(c=l.data,c[e*s*4+4*i+2]),S=(d=l.data,d[e*s*4+4*i+3]),I=o[0]*r+o[1]*n+o[2]*P+o[3]*S+ +o[4],N=o[5]*r+o[6]*n+o[7]*P+o[8]*S+ +o[9],O=o[10]*r+o[11]*n+o[12]*P+o[13]*S+ +o[14],L=o[15]*r+o[16]*n+o[17]*P+o[18]*S+ +o[19];a&&(I=0,N=0,O=0,L*=S/255),p=l.data,f=i,g=e,y=I,p[g*s*4+4*f+0]=y,x=l.data,m=i,b=e,v=N,x[b*s*4+4*m+1]=v,w=l.data,T=i,C=e,E=O,w[C*s*4+4*T+2]=E,_=l.data,A=i,M=e,R=L,_[M*s*4+4*A+3]=R}e.clearRect(0,0,s,n),e.putImageData(l,0,0)}constructor(e,i,r){super(e,i,r),this.type="feColorMatrix";let s=I(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{let e=s[0];s=[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{let e=s[0]*Math.PI/180;s=[tP(e,.213,.787,-.213),tP(e,.715,-.715,-.715),tP(e,.072,-.072,.928),0,0,tP(e,.213,-.213,.143),tP(e,.715,.285,.14),tP(e,.072,-.072,-.283),0,0,tP(e,.213,-.213,-.787),tP(e,.715,-.715,.715),tP(e,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=s,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class tI extends ta{apply(e,i){let{document:r}=this,s=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!a&&!o){let i=new tu;this.children.forEach(r=>{i.addBoundingBox(r.getBoundingBox(e))}),s=Math.floor(i.x1),n=Math.floor(i.y1),a=Math.floor(i.width),o=Math.floor(i.height)}let l=this.removeStyles(i,tI.ignoreStyles),h=r.createCanvas(s+a,n+o),u=h.getContext("2d");r.screen.setDefaults(u),this.renderChildren(u),new tS(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,s+a,n+o);let c=r.createCanvas(s+a,n+o),d=c.getContext("2d");r.screen.setDefaults(d),i.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=u.createPattern(h,"no-repeat"),d.fillRect(0,0,s+a,n+o),e.fillStyle=d.createPattern(c,"no-repeat"),e.fillRect(0,0,s+a,n+o),this.restoreStyles(i,l)}render(e){}constructor(...e){super(...e),this.type="mask"}}tI.ignoreStyles=["mask","transform","clip-path"];let tN=()=>{};class tO extends ta{apply(e,i){let{document:r,children:s}=this,n="getBoundingBox"in i?i.getBoundingBox(e):null;if(!n)return;let a=0,o=0;s.forEach(e=>{let i=e.extraFilterDistance||0;a=Math.max(a,i),o=Math.max(o,i)});let l=Math.floor(n.width),h=Math.floor(n.height),u=l+2*a,c=h+2*o;if(u<1||c<1)return;let d=Math.floor(n.x),p=Math.floor(n.y),f=this.removeStyles(i,tO.ignoreStyles),g=r.createCanvas(u,c),y=g.getContext("2d");r.screen.setDefaults(y),y.translate(-d+a,-p+o),i.render(y),s.forEach(e=>{"function"==typeof e.apply&&e.apply(y,0,0,u,c)}),e.drawImage(g,0,0,u,c,d-a,p-o,u,c),this.restoreStyles(i,f)}render(e){}constructor(...e){super(...e),this.type="filter"}}async function tL(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("img");return i&&(r.crossOrigin="Anonymous"),new Promise((i,s)=>{r.onload=()=>{i(r)},r.onerror=(e,i,r,n,a)=>{s(a)},r.src=e})}tO.ignoreStyles=["filter","transform","clip-path"];class tU{bindCreateImage(e,i){return"boolean"==typeof i?(r,s)=>e(r,"boolean"==typeof s?s:i):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){let{emSizeStack:e}=this;return e[e.length-1]||12}set emSize(e){let{emSizeStack:i}=this;i.push(e)}popEmSize(){let{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){let i=this.createElement(e.documentElement);return i.root=!0,i.addStylesFromStyleDefinition(),this.documentElement=i,i}createElement(e){let i=e.nodeName.replace(/^[^:]+:/,""),r=tU.elementTypes[i];return r?new r(this,e):new to(this,e)}createTextNode(e){return new tf(this,e)}setViewBox(e){this.screen.setViewBox({document:this,...e})}constructor(e,{rootEmSize:i=12,emSize:r=12,createCanvas:s=tU.createCanvas,createImage:n=tU.createImage,anonymousCrossOrigin:a}={}){this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=i,this.emSize=r,this.createCanvas=s,this.createImage=this.bindCreateImage(n,a),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}tU.createCanvas=function(e,i){let r=document.createElement("canvas");return r.width=e,r.height=i,r},tU.createImage=tL,tU.elementTypes={svg:tx,rect:tm,circle:class extends ty{path(e){let i=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),s=this.getAttribute("r").getPixels();return e&&s>0&&(e.beginPath(),e.arc(i,r,s,0,2*Math.PI,!1),e.closePath()),new tu(i-s,r-s,i+s,r+s)}getMarkers(){return null}constructor(...e){super(...e),this.type="circle"}},ellipse:class extends ty{path(e){let i=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),s=this.getAttribute("ry").getPixels("y"),n=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return e&&r>0&&s>0&&(e.beginPath(),e.moveTo(n+r,a),e.bezierCurveTo(n+r,a+i*s,n+i*r,a+s,n,a+s),e.bezierCurveTo(n-i*r,a+s,n-r,a+i*s,n-r,a),e.bezierCurveTo(n-r,a-i*s,n-i*r,a-s,n,a-s),e.bezierCurveTo(n+i*r,a-s,n+r,a-i*s,n+r,a),e.closePath()),new tu(n-r,a-s,n+r,a+s)}getMarkers(){return null}constructor(...e){super(...e),this.type="ellipse"}},line:class extends ty{getPoints(){return[new $(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new $(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){let[{x:i,y:r},{x:s,y:n}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(i,r),e.lineTo(s,n)),new tu(i,r,s,n)}getMarkers(){let[e,i]=this.getPoints(),r=e.angleTo(i);return[[e,r],[i,r]]}constructor(...e){super(...e),this.type="line"}},polyline:tb,polygon:class extends tb{path(e){let i=super.path(e),[{x:r,y:s}]=this.points;return e&&(e.lineTo(r,s),e.closePath()),i}constructor(...e){super(...e),this.type="polygon"}},path:ty,pattern:class extends ta{createPattern(e,i,r){let s=this.getStyle("width").getPixels("x",!0),n=this.getStyle("height").getPixels("y",!0),a=new tx(this.document,null);a.attributes.viewBox=new q(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new q(this.document,"width","".concat(s,"px")),a.attributes.height=new q(this.document,"height","".concat(n,"px")),a.attributes.transform=new q(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;let o=this.document.createCanvas(s,n),l=o.getContext("2d"),h=this.getAttribute("x"),u=this.getAttribute("y");h.hasValue()&&u.hasValue()&&l.translate(h.getPixels("x",!0),u.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(let e=-1;e<=1;e++)for(let i=-1;i<=1;i++)l.save(),a.attributes.x=new q(this.document,"x",e*o.width),a.attributes.y=new q(this.document,"y",i*o.height),a.render(l),l.restore();return e.createPattern(o,"repeat")}constructor(...e){super(...e),this.type="pattern"}},marker:class extends ta{render(e,i,r){if(!i)return;let{x:s,y:n}=i,a=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(s,n),"auto"===a&&e.rotate(r),"strokeWidth"===o&&e.scale(e.lineWidth,e.lineWidth),e.save();let l=new tx(this.document);l.type=this.type,l.attributes.viewBox=new q(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new q(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new q(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new q(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new q(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new q(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new q(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new q(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(e),e.restore(),"strokeWidth"===o&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"===a&&e.rotate(-r),e.translate(-s,-n)}constructor(...e){super(...e),this.type="marker"}},defs:class extends ta{render(){}constructor(...e){super(...e),this.type="defs"}},linearGradient:class extends tw{getGradient(e,i){let r="objectBoundingBox"===this.getGradientUnits(),s=r?i.getBoundingBox(e):null;if(r&&!s)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));let n=r?s.x+s.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=r?s.y+s.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=r?s.x+s.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=r?s.y+s.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return n===o&&a===l?null:e.createLinearGradient(n,a,o,l)}constructor(e,i,r){super(e,i,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}},radialGradient:class extends tw{getGradient(e,i){let r="objectBoundingBox"===this.getGradientUnits(),s=i.getBoundingBox(e);if(r&&!s)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");let n=r?s.x+s.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=r?s.y+s.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=n,l=a;this.getAttribute("fx").hasValue()&&(o=r?s.x+s.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=r?s.y+s.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));let h=r?(s.width+s.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return e.createRadialGradient(o,l,u,n,a,h)}constructor(e,i,r){super(e,i,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}},stop:class extends ta{constructor(e,i,r){super(e,i,r),this.type="stop";let s=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),n=this.getStyle("stop-opacity"),a=this.getStyle("stop-color",!0);""===a.getString()&&a.setValue("#000"),n.hasValue()&&(a=a.addOpacity(n)),this.offset=s,this.color=a.getColor()}},animate:tT,animateColor:class extends tT{calcValue(){let{progress:e,from:i,to:r}=this.getProgress(),s=new n.Z(i.getColor()),a=new n.Z(r.getColor());if(s.ok&&a.ok){let i=s.r+(a.r-s.r)*e,r=s.g+(a.g-s.g)*e,n=s.b+(a.b-s.b)*e;return"rgb(".concat(Math.floor(i),", ").concat(Math.floor(r),", ").concat(Math.floor(n),")")}return this.getAttribute("from").getColor()}constructor(...e){super(...e),this.type="animateColor"}},animateTransform:class extends tT{calcValue(){let{progress:e,from:i,to:r}=this.getProgress(),s=I(i.getString()),n=I(r.getString());return s.map((i,r)=>i+(n[r]-i)*e).join(" ")}constructor(...e){super(...e),this.type="animateTransform"}},font:class extends ta{render(){}constructor(e,i,r){super(e,i,r),this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();let{definitions:s}=e,{children:n}=this;for(let e of n)if(e instanceof tC){this.fontFace=e;let i=e.getStyle("font-family");i.hasValue()&&(s[i.getString()]=this)}else if(e instanceof t_)this.missingGlyph=e;else if(e instanceof tE)if(e.arabicForm){this.isRTL=!0,this.isArabic=!0;let i=this.arabicGlyphs[e.unicode];void 0===i?this.arabicGlyphs[e.unicode]={[e.arabicForm]:e}:i[e.arabicForm]=e}else this.glyphs[e.unicode]=e}},"font-face":tC,"missing-glyph":t_,glyph:tE,text:td,tspan:tp,tref:class extends td{getText(){let e=this.getHrefAttribute().getDefinition();if(e){let i=e.children[0];if(i)return i.getText()}return""}constructor(...e){super(...e),this.type="tref"}},a:class extends td{getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);let{document:i,x:r,y:s}=this,{mouse:n}=i.screen,a=new q(i,"fontSize",th.parse(i.ctx.font).fontSize);n.isWorking()&&n.checkBoundingBox(this,new tu(r,s-a.getPixels("y"),r+this.measureText(e),s))}else if(this.children.length>0){let i=new tv(this.document);i.children=this.children,i.parent=this,i.render(e)}}onClick(){let{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}constructor(e,i,r){super(e,i,r),this.type="a";let{childNodes:s}=i,n=s[0],a=s.length>0&&Array.from(s).every(e=>3===e.nodeType);this.hasText=a,this.text=a?this.getTextFromNode(n):""}},textPath:class extends td{getText(){return this.text}path(e){let{dataArray:i}=this;e&&e.beginPath(),i.forEach(i=>{let{type:r,points:s}=i;switch(r){case tg.LINE_TO:e&&e.lineTo(s[0],s[1]);break;case tg.MOVE_TO:e&&e.moveTo(s[0],s[1]);break;case tg.CURVE_TO:e&&e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case tg.QUAD_TO:e&&e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case tg.ARC:{let[i,r,n,a,o,l,h,u]=s,c=n>a?1:n/a,d=n>a?a/n:1;e&&(e.translate(i,r),e.rotate(h),e.scale(c,d),e.arc(0,0,n>a?n:a,o,o+l,!!(1-u)),e.scale(1/c,1/d),e.rotate(-h),e.translate(-i,-r));break}case tg.CLOSE_PATH:e&&e.closePath()}})}renderChildren(e){this.setTextData(e),e.save();let i=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:s}=this,n=e.fillStyle;"underline"===i&&e.beginPath(),s.forEach((s,n)=>{let{p0:a,p1:o,rotation:l,text:h}=s;e.save(),e.translate(a.x,a.y),e.rotate(l),e.fillStyle&&e.fillText(h,0,0),e.strokeStyle&&e.strokeText(h,0,0),e.restore(),"underline"===i&&(0===n&&e.moveTo(a.x,a.y+r/8),e.lineTo(o.x,o.y+r/5))}),"underline"===i&&(e.lineWidth=r/20,e.strokeStyle=n,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,i,r,s,n,a,o,l,h){let u=a,c=this.measureText(e,l);" "===l&&"justify"===i&&r<s&&(c+=(s-r)/n),h>-1&&(u+=this.getLetterSpacingAt(h));let d=this.textHeight/20,p=this.getEquidistantPointOnPath(u,d,0),f=this.getEquidistantPointOnPath(u+c,d,0),g={p0:p,p1:f},y=p&&f?Math.atan2(f.y-p.y,f.x-p.x):0;if(o){let e=Math.cos(Math.PI/2+y)*o,i=Math.cos(-y)*o;g.p0={...p,x:p.x+e,y:p.y+i},g.p1={...f,x:f.x+e,y:f.y+i}}return{offset:u+=c,segment:g,rotation:y}}measureText(e,i){let{measuresCache:r}=this,s=i||this.getText();if(r.has(s))return r.get(s);let n=this.measureTargetText(e,s);return r.set(s,n),n}setTextData(e){if(this.glyphInfo)return;let i=this.getText(),r=i.split(""),s=i.split(" ").length-1,n=this.parent.getAttribute("dx").split().map(e=>e.getPixels("x")),a=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),h=this.parent.getStyle("letter-spacing"),u=0;l.hasValue()&&"inherit"!==l.getValue()?l.hasValue()&&"initial"!==l.getValue()&&"unset"!==l.getValue()&&(u=l.getPixels()):u=h.getPixels();let c=[],d=i.length;this.letterSpacingCache=c;for(let e=0;e<d;e++)c.push(void 0!==n[e]?n[e]:u);let p=c.reduce((e,i,r)=>0===r?0:e+i||0,0),f=this.measureText(e),g=Math.max(f+p,0);this.textWidth=f,this.textHeight=this.getFontSize(),this.glyphInfo=[];let y=this.getPathLength(),x=this.getStyle("startOffset").getNumber(0)*y,m=0;("middle"===o||"center"===o)&&(m=-g/2),("end"===o||"right"===o)&&(m=-g),m+=x,r.forEach((i,n)=>{let{offset:l,segment:h,rotation:u}=this.findSegmentToFitChar(e,o,g,y,s,m,a,i,n);m=l,h.p0&&h.p1&&this.glyphInfo.push({text:r[n],p0:h.p0,p1:h.p1,rotation:u})})}parsePathData(e){if(this.pathLength=-1,!e)return[];let i=[],{pathParser:r}=e;for(r.reset();!r.isEnd();){let{current:e}=r,s=e?e.x:0,n=e?e.y:0,a=r.next(),o=a.type,l=[];switch(a.type){case tg.MOVE_TO:this.pathM(r,l);break;case tg.LINE_TO:o=this.pathL(r,l);break;case tg.HORIZ_LINE_TO:o=this.pathH(r,l);break;case tg.VERT_LINE_TO:o=this.pathV(r,l);break;case tg.CURVE_TO:this.pathC(r,l);break;case tg.SMOOTH_CURVE_TO:o=this.pathS(r,l);break;case tg.QUAD_TO:this.pathQ(r,l);break;case tg.SMOOTH_QUAD_TO:o=this.pathT(r,l);break;case tg.ARC:l=this.pathA(r);break;case tg.CLOSE_PATH:ty.pathZ(r)}a.type!==tg.CLOSE_PATH?i.push({type:o,points:l,start:{x:s,y:n},pathLength:this.calcLength(s,n,o,l)}):i.push({type:tg.CLOSE_PATH,points:[],pathLength:0})}return i}pathM(e,i){let{x:r,y:s}=ty.pathM(e).point;i.push(r,s)}pathL(e,i){let{x:r,y:s}=ty.pathL(e).point;return i.push(r,s),tg.LINE_TO}pathH(e,i){let{x:r,y:s}=ty.pathH(e).point;return i.push(r,s),tg.LINE_TO}pathV(e,i){let{x:r,y:s}=ty.pathV(e).point;return i.push(r,s),tg.LINE_TO}pathC(e,i){let{point:r,controlPoint:s,currentPoint:n}=ty.pathC(e);i.push(r.x,r.y,s.x,s.y,n.x,n.y)}pathS(e,i){let{point:r,controlPoint:s,currentPoint:n}=ty.pathS(e);return i.push(r.x,r.y,s.x,s.y,n.x,n.y),tg.CURVE_TO}pathQ(e,i){let{controlPoint:r,currentPoint:s}=ty.pathQ(e);i.push(r.x,r.y,s.x,s.y)}pathT(e,i){let{controlPoint:r,currentPoint:s}=ty.pathT(e);return i.push(r.x,r.y,s.x,s.y),tg.QUAD_TO}pathA(e){let{rX:i,rY:r,sweepFlag:s,xAxisRotation:n,centp:a,a1:o,ad:l}=ty.pathA(e);return 0===s&&l>0&&(l-=2*Math.PI),1===s&&l<0&&(l+=2*Math.PI),[a.x,a.y,i,r,o,l,n,s]}calcLength(e,i,r,s){let n=0,a=null,o=null,l=0;switch(r){case tg.LINE_TO:return this.getLineLength(e,i,s[0],s[1]);case tg.CURVE_TO:for(l=.01,n=0,a=this.getPointOnCubicBezier(0,e,i,s[0],s[1],s[2],s[3],s[4],s[5]);l<=1;l+=.01)o=this.getPointOnCubicBezier(l,e,i,s[0],s[1],s[2],s[3],s[4],s[5]),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return n;case tg.QUAD_TO:for(l=.01,n=0,a=this.getPointOnQuadraticBezier(0,e,i,s[0],s[1],s[2],s[3]);l<=1;l+=.01)o=this.getPointOnQuadraticBezier(l,e,i,s[0],s[1],s[2],s[3]),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return n;case tg.ARC:{n=0;let e=s[4],i=s[5],r=s[4]+i,h=Math.PI/180;if(Math.abs(e-r)<h&&(h=Math.abs(e-r)),a=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],e,0),i<0)for(l=e-h;l>r;l-=h)o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=e+h;l<r;l+=h)o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],r,0),n+=this.getLineLength(a.x,a.y,o.x,o.y)}}return 0}getPointOnLine(e,i,r,s,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,l=(n-r)/(s-i+1e-8),h=Math.sqrt(e*e/(1+l*l));s<i&&(h*=-1);let u=l*h,c=null;if(s===i)c={x:a,y:o+u};else if((o-r)/(a-i+1e-8)===l)c={x:a+h,y:o+u};else{let d=0,p=0,f=this.getLineLength(i,r,s,n);if(f<1e-8)return null;let g=(a-i)*(s-i)+(o-r)*(n-r);g/=f*f,d=i+g*(s-i),p=r+g*(n-r);let y=this.getLineLength(a,o,d,p),x=Math.sqrt(e*e-y*y);h=Math.sqrt(x*x/(1+l*l)),s<i&&(h*=-1),u=l*h,c={x:d+h,y:p+u}}return c}getPointOnPath(e){let i=this.getPathLength(),r=0,s=null;if(e<-5e-5||e-5e-5>i)return null;let{dataArray:n}=this;for(let i of n){if(i&&(i.pathLength<5e-5||r+i.pathLength+5e-5<e)){r+=i.pathLength;continue}let n=e-r,a=0;switch(i.type){case tg.LINE_TO:s=this.getPointOnLine(n,i.start.x,i.start.y,i.points[0],i.points[1],i.start.x,i.start.y);break;case tg.ARC:{let e=i.points[4],r=i.points[5],o=i.points[4]+r;if(a=e+n/i.pathLength*r,r<0&&a<o||r>=0&&a>o)break;s=this.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],a,i.points[6]);break}case tg.CURVE_TO:(a=n/i.pathLength)>1&&(a=1),s=this.getPointOnCubicBezier(a,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);break;case tg.QUAD_TO:(a=n/i.pathLength)>1&&(a=1),s=this.getPointOnQuadraticBezier(a,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3])}if(s)return s;break}return null}getLineLength(e,i,r,s){return Math.sqrt((r-e)*(r-e)+(s-i)*(s-i))}getPathLength(){return -1===this.pathLength&&(this.pathLength=this.dataArray.reduce((e,i)=>i.pathLength>0?e+i.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,i,r,s,n,a,o,l,h){return{x:e*e*e*l+3*e*e*(1-e)*a+s*Z(e)+(1-e)*(1-e)*(1-e)*i,y:e*e*e*h+3*e*e*(1-e)*o+n*Z(e)+(1-e)*(1-e)*(1-e)*r}}getPointOnQuadraticBezier(e,i,r,s,n,a,o){return{x:e*e*a+2*e*(1-e)*s+(1-e)*(1-e)*i,y:e*e*o+2*e*(1-e)*n+(1-e)*(1-e)*r}}getPointOnEllipticalArc(e,i,r,s,n,a){let o=Math.cos(a),l=Math.sin(a),h={x:r*Math.cos(n),y:s*Math.sin(n)};return{x:e+(h.x*o-h.y*l),y:i+(h.x*l+h.y*o)}}buildEquidistantCache(e,i){let r=this.getPathLength(),s=i||.25,n=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==s){this.equidistantCache={step:n,precision:s,points:[]};let e=0;for(let i=0;i<=r;i+=s){let r=this.getPointOnPath(i),a=this.getPointOnPath(i+s);r&&a&&(e+=this.getLineLength(r.x,r.y,a.x,a.y))>=n&&(this.equidistantCache.points.push({x:r.x,y:r.y,distance:i}),e-=n)}}}getEquidistantPointOnPath(e,i,r){if(this.buildEquidistantCache(i,r),e<0||e-this.getPathLength()>5e-5)return null;let s=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[s]||null}constructor(e,i,r){super(e,i,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);let s=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(s)}},image:class extends tc{async loadImage(e){try{let i=await this.document.createImage(e);this.image=i}catch(i){console.error('Error while loading image "'.concat(e,'":'),i)}this.loaded=!0}async loadSvg(e){let i=tA.exec(e);if(i){let e=i[5];e&&("base64"===i[4]?this.image=atob(e):this.image=decodeURIComponent(e))}else try{let i=await this.document.fetch(e),r=await i.text();this.image=r}catch(i){console.error('Error while loading image "'.concat(e,'":'),i)}this.loaded=!0}renderChildren(e){let{document:i,image:r,loaded:s}=this,n=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(s&&r&&o&&l){if(e.save(),e.translate(n,a),"string"==typeof r){let s=i.canvg.forkString(e,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:l}),{documentElement:n}=s.document;n&&(n.parent=this),s.render()}else i.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:r.width,height:l,desiredHeight:r.height}),!this.loaded||"complete"in r&&!r.complete||e.drawImage(r,0,0);e.restore()}}getBoundingBox(){let e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y");return new tu(e,i,e+this.getStyle("width").getPixels("x"),i+this.getStyle("height").getPixels("y"))}constructor(e,i,r){super(e,i,r),this.type="image",this.loaded=!1;let s=this.getHrefAttribute().getString();if(!s)return;let n=s.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(s);e.images.push(this),n?this.loadSvg(s):this.loadImage(s)}},g:tv,symbol:class extends tc{render(e){}constructor(...e){super(...e),this.type="symbol"}},style:tR,use:class extends tc{setContext(e){super.setContext(e);let i=this.getAttribute("x"),r=this.getAttribute("y");i.hasValue()&&e.translate(i.getPixels("x"),0),r.hasValue()&&e.translate(0,r.getPixels("y"))}path(e){let{element:i}=this;i&&i.path(e)}renderChildren(e){let{document:i,element:r}=this;if(r){let s=r;if("symbol"===r.type&&((s=new tx(i)).attributes.viewBox=new q(i,"viewBox",r.getAttribute("viewBox").getString()),s.attributes.preserveAspectRatio=new q(i,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),s.attributes.overflow=new q(i,"overflow",r.getAttribute("overflow").getString()),s.children=r.children,r.styles.opacity=new q(i,"opacity",this.calculateOpacity())),"svg"===s.type){let e=this.getStyle("width",!1,!0),r=this.getStyle("height",!1,!0);e.hasValue()&&(s.attributes.width=new q(i,"width",e.getString())),r.hasValue()&&(s.attributes.height=new q(i,"height",r.getString()))}let n=s.parent;s.parent=this,s.render(e),s.parent=n}}getBoundingBox(e){let{element:i}=this;return i?i.getBoundingBox(e):null}elementTransform(){let{document:e,element:i}=this;return i?tn.fromElement(e,i):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...e){super(...e),this.type="use"}},mask:tI,clipPath:class extends ta{apply(e){let{document:i}=this,r=Reflect.getPrototypeOf(e),{beginPath:s,closePath:n}=e;r&&(r.beginPath=tN,r.closePath=tN),Reflect.apply(s,e,[]),this.children.forEach(s=>{if(!("path"in s))return;let a="elementTransform"in s?s.elementTransform():null;a||(a=tn.fromElement(i,s)),a&&a.apply(e),s.path(e),r&&(r.closePath=n),a&&a.unapply(e)}),Reflect.apply(n,e,[]),e.clip(),r&&(r.beginPath=s,r.closePath=n)}render(e){}constructor(...e){super(...e),this.type="clipPath"}},filter:tO,feDropShadow:class extends ta{apply(e,i,r,s,n){}constructor(e,i,r){super(e,i,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}},feMorphology:class extends ta{apply(e,i,r,s,n){}constructor(...e){super(...e),this.type="feMorphology"}},feComposite:class extends ta{apply(e,i,r,s,n){}constructor(...e){super(...e),this.type="feComposite"}},feColorMatrix:tS,feGaussianBlur:class extends ta{apply(e,i,r,s,n){let{document:a,blurRadius:o}=this,l=a.window?a.window.document.body:null,h=e.canvas;h.id=a.getUniqueId(),l&&(h.style.display="none",l.appendChild(h));var u=o;if(!isNaN(u)&&!(u<1)){u|=0;var c=function(e,i,r,s,n){if("string"==typeof e&&(e=document.getElementById(e)),!e||"object"!==E(e)||!("getContext"in e))throw TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=e.getContext("2d");try{return a.getImageData(i,r,s,n)}catch(e){throw Error("unable to access image data: "+e)}}(h,i,r,s,n);c=function(e,i,r,s,n,a){for(var o,l=e.data,h=2*a+1,u=s-1,c=n-1,d=a+1,p=d*(d+1)/2,f=new M,g=f,y=1;y<h;y++)g=g.next=new M,y===d&&(o=g);g.next=f;for(var x=null,m=null,b=0,v=0,w=_[a],T=A[a],C=0;C<n;C++){g=f;for(var E=l[v],R=l[v+1],P=l[v+2],S=l[v+3],I=0;I<d;I++)g.r=E,g.g=R,g.b=P,g.a=S,g=g.next;for(var N=0,O=0,L=0,U=0,D=d*E,k=d*R,B=d*P,z=d*S,V=p*E,H=p*R,X=p*P,F=p*S,Y=1;Y<d;Y++){var Z=v+((u<Y?u:Y)<<2),q=l[Z],G=l[Z+1],W=l[Z+2],$=l[Z+3],J=d-Y;V+=(g.r=q)*J,H+=(g.g=G)*J,X+=(g.b=W)*J,F+=(g.a=$)*J,N+=q,O+=G,L+=W,U+=$,g=g.next}x=f,m=o;for(var j=0;j<s;j++){var Q=F*w>>>T;if(l[v+3]=Q,0!==Q){var K=255/Q;l[v]=(V*w>>>T)*K,l[v+1]=(H*w>>>T)*K,l[v+2]=(X*w>>>T)*K}else l[v]=l[v+1]=l[v+2]=0;V-=D,H-=k,X-=B,F-=z,D-=x.r,k-=x.g,B-=x.b,z-=x.a;var tt=j+a+1;tt=b+(tt<u?tt:u)<<2,N+=x.r=l[tt],O+=x.g=l[tt+1],L+=x.b=l[tt+2],U+=x.a=l[tt+3],V+=N,H+=O,X+=L,F+=U,x=x.next;var te=m,ti=te.r,tr=te.g,ts=te.b,tn=te.a;D+=ti,k+=tr,B+=ts,z+=tn,N-=ti,O-=tr,L-=ts,U-=tn,m=m.next,v+=4}b+=s}for(var ta=0;ta<s;ta++){var to=l[v=ta<<2],tl=l[v+1],th=l[v+2],tu=l[v+3],tc=d*to,td=d*tl,tp=d*th,tf=d*tu,tg=p*to,ty=p*tl,tx=p*th,tm=p*tu;g=f;for(var tb=0;tb<d;tb++)g.r=to,g.g=tl,g.b=th,g.a=tu,g=g.next;for(var tv=s,tw=0,tT=0,tC=0,tE=0,t_=1;t_<=a;t_++){v=tv+ta<<2;var tA=d-t_;tg+=(g.r=to=l[v])*tA,ty+=(g.g=tl=l[v+1])*tA,tx+=(g.b=th=l[v+2])*tA,tm+=(g.a=tu=l[v+3])*tA,tE+=to,tw+=tl,tT+=th,tC+=tu,g=g.next,t_<c&&(tv+=s)}v=ta,x=f,m=o;for(var tM=0;tM<n;tM++){var tR=v<<2;l[tR+3]=tu=tm*w>>>T,tu>0?(tu=255/tu,l[tR]=(tg*w>>>T)*tu,l[tR+1]=(ty*w>>>T)*tu,l[tR+2]=(tx*w>>>T)*tu):l[tR]=l[tR+1]=l[tR+2]=0,tg-=tc,ty-=td,tx-=tp,tm-=tf,tc-=x.r,td-=x.g,tp-=x.b,tf-=x.a,tR=ta+((tR=tM+d)<c?tR:c)*s<<2,tg+=tE+=x.r=l[tR],ty+=tw+=x.g=l[tR+1],tx+=tT+=x.b=l[tR+2],tm+=tC+=x.a=l[tR+3],x=x.next,tc+=to=m.r,td+=tl=m.g,tp+=th=m.b,tf+=tu=m.a,tE-=to,tw-=tl,tT-=th,tC-=tu,m=m.next,v+=s}}return e}(c,0,0,s,n,u),h.getContext("2d").putImageData(c,i,r)}l&&l.removeChild(h)}constructor(e,i,r){super(e,i,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}},title:class extends ta{constructor(...e){super(...e),this.type="title"}},desc:class extends ta{constructor(...e){super(...e),this.type="desc"}}};class tD{static async from(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=new ti(r);return new tD(e,await s.parse(i),r)}static fromString(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new tD(e,new ti(r).parseFromString(i),r)}fork(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return tD.from(e,i,{...this.options,...r})}forkString(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return tD.fromString(e,i,{...this.options,...r})}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.start({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0,...e}),await this.ready(),this.stop()}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{documentElement:i,screen:r,options:s}=this;r.start(i,{enableRedraw:!0,...s,...e})}stop(){this.screen.stop()}resize(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(e,i,r)}constructor(e,i,r={}){this.parser=new ti(r),this.screen=new K(e,r),this.options=r;let s=new tU(this,r),n=s.createDocumentElement(i);this.document=s,this.documentElement=n}}},596334:function(e,i,r){"use strict";r.d(i,{s:()=>u});var s,n,a=r(101120),o=r(189799),l=r(396757),h=r(292993);function u(){var e;if(n)return a.p.exports;return n=1,a.p.exports=(e=function(){var e;if(s)return h.p.exports;return s=1,h.p.exports=e=e||function(e,i){if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==o.t&&o.t.crypto&&(r=o.t.crypto),!r&&"function"==typeof l.o)try{r=require("crypto")}catch(e){}var r,s=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function e(){}return function(i){var r;return e.prototype=i,r=new e,e.prototype=null,r}}(),a={},h=a.lib={},u=h.Base={extend:function(e){var i=n(this);return e&&i.mixIn(e),i.hasOwnProperty("init")&&this.init!==i.init||(i.init=function(){i.$super.init.apply(this,arguments)}),i.init.prototype=i,i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=h.WordArray=u.extend({init:function(e,r){e=this.words=e||[],r!=i?this.sigBytes=r:this.sigBytes=4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var i=this.words,r=e.words,s=this.sigBytes,n=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<n;a++){var o=r[a>>>2]>>>24-a%4*8&255;i[s+a>>>2]|=o<<24-(s+a)%4*8}else for(var l=0;l<n;l+=4)i[s+l>>>2]=r[l>>>2];return this.sigBytes+=n,this},clamp:function(){var i=this.words,r=this.sigBytes;i[r>>>2]&=0xffffffff<<32-r%4*8,i.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var i=[],r=0;r<e;r+=4)i.push(s());return new c.init(i,e)}}),d=a.enc={},p=d.Hex={stringify:function(e){for(var i=e.words,r=e.sigBytes,s=[],n=0;n<r;n++){var a=i[n>>>2]>>>24-n%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var i=e.length,r=[],s=0;s<i;s+=2)r[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new c.init(r,i/2)}},f=d.Latin1={stringify:function(e){for(var i=e.words,r=e.sigBytes,s=[],n=0;n<r;n++){var a=i[n>>>2]>>>24-n%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var i=e.length,r=[],s=0;s<i;s++)r[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new c.init(r,i)}},g=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},y=h.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=g.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(i){var r,s=this._data,n=s.words,a=s.sigBytes,o=this.blockSize,l=a/(4*o),h=(l=i?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*o,u=e.min(4*h,a);if(h){for(var d=0;d<h;d+=o)this._doProcessBlock(n,d);r=n.splice(0,h),s.sigBytes-=u}return new c.init(r,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});h.Hasher=y.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(i,r){return new e.init(r).finalize(i)}},_createHmacHelper:function(e){return function(i,r){return new x.HMAC.init(e,r).finalize(i)}}});var x=a.algo={};return a}(Math),h.p.exports}(),!function(i){for(var r=e.lib,s=r.WordArray,n=r.Hasher,a=e.algo,o=[],l=0;l<64;l++)o[l]=0x100000000*i.abs(i.sin(l+1))|0;var h=a.MD5=n.extend({_doReset:function(){this._hash=new s.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,i){for(var r=0;r<16;r++){var s=i+r,n=e[s];e[s]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00}var a=this._hash.words,l=e[i+0],h=e[i+1],f=e[i+2],g=e[i+3],y=e[i+4],x=e[i+5],m=e[i+6],b=e[i+7],v=e[i+8],w=e[i+9],T=e[i+10],C=e[i+11],E=e[i+12],_=e[i+13],A=e[i+14],M=e[i+15],R=a[0],P=a[1],S=a[2],I=a[3];R=u(R,P,S,I,l,7,o[0]),I=u(I,R,P,S,h,12,o[1]),S=u(S,I,R,P,f,17,o[2]),P=u(P,S,I,R,g,22,o[3]),R=u(R,P,S,I,y,7,o[4]),I=u(I,R,P,S,x,12,o[5]),S=u(S,I,R,P,m,17,o[6]),P=u(P,S,I,R,b,22,o[7]),R=u(R,P,S,I,v,7,o[8]),I=u(I,R,P,S,w,12,o[9]),S=u(S,I,R,P,T,17,o[10]),P=u(P,S,I,R,C,22,o[11]),R=u(R,P,S,I,E,7,o[12]),I=u(I,R,P,S,_,12,o[13]),S=u(S,I,R,P,A,17,o[14]),P=u(P,S,I,R,M,22,o[15]),R=c(R,P,S,I,h,5,o[16]),I=c(I,R,P,S,m,9,o[17]),S=c(S,I,R,P,C,14,o[18]),P=c(P,S,I,R,l,20,o[19]),R=c(R,P,S,I,x,5,o[20]),I=c(I,R,P,S,T,9,o[21]),S=c(S,I,R,P,M,14,o[22]),P=c(P,S,I,R,y,20,o[23]),R=c(R,P,S,I,w,5,o[24]),I=c(I,R,P,S,A,9,o[25]),S=c(S,I,R,P,g,14,o[26]),P=c(P,S,I,R,v,20,o[27]),R=c(R,P,S,I,_,5,o[28]),I=c(I,R,P,S,f,9,o[29]),S=c(S,I,R,P,b,14,o[30]),P=c(P,S,I,R,E,20,o[31]),R=d(R,P,S,I,x,4,o[32]),I=d(I,R,P,S,v,11,o[33]),S=d(S,I,R,P,C,16,o[34]),P=d(P,S,I,R,A,23,o[35]),R=d(R,P,S,I,h,4,o[36]),I=d(I,R,P,S,y,11,o[37]),S=d(S,I,R,P,b,16,o[38]),P=d(P,S,I,R,T,23,o[39]),R=d(R,P,S,I,_,4,o[40]),I=d(I,R,P,S,l,11,o[41]),S=d(S,I,R,P,g,16,o[42]),P=d(P,S,I,R,m,23,o[43]),R=d(R,P,S,I,w,4,o[44]),I=d(I,R,P,S,E,11,o[45]),S=d(S,I,R,P,M,16,o[46]),P=d(P,S,I,R,f,23,o[47]),R=p(R,P,S,I,l,6,o[48]),I=p(I,R,P,S,b,10,o[49]),S=p(S,I,R,P,A,15,o[50]),P=p(P,S,I,R,x,21,o[51]),R=p(R,P,S,I,E,6,o[52]),I=p(I,R,P,S,g,10,o[53]),S=p(S,I,R,P,T,15,o[54]),P=p(P,S,I,R,h,21,o[55]),R=p(R,P,S,I,v,6,o[56]),I=p(I,R,P,S,M,10,o[57]),S=p(S,I,R,P,m,15,o[58]),P=p(P,S,I,R,_,21,o[59]),R=p(R,P,S,I,y,6,o[60]),I=p(I,R,P,S,C,10,o[61]),S=p(S,I,R,P,f,15,o[62]),P=p(P,S,I,R,w,21,o[63]),a[0]=a[0]+R|0,a[1]=a[1]+P|0,a[2]=a[2]+S|0,a[3]=a[3]+I|0},_doFinalize:function(){var e=this._data,r=e.words,s=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var a=i.floor(s/0x100000000);r[(n+64>>>9<<4)+15]=(a<<8|a>>>24)&0xff00ff|(a<<24|a>>>8)&0xff00ff00,r[(n+64>>>9<<4)+14]=(s<<8|s>>>24)&0xff00ff|(s<<24|s>>>8)&0xff00ff00,e.sigBytes=(r.length+1)*4,this._process();for(var o=this._hash,l=o.words,h=0;h<4;h++){var u=l[h];l[h]=(u<<8|u>>>24)&0xff00ff|(u<<24|u>>>8)&0xff00ff00}return o},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,i,r,s,n,a,o){var l=e+(i&r|~i&s)+n+o;return(l<<a|l>>>32-a)+i}function c(e,i,r,s,n,a,o){var l=e+(i&s|r&~s)+n+o;return(l<<a|l>>>32-a)+i}function d(e,i,r,s,n,a,o){var l=e+(i^r^s)+n+o;return(l<<a|l>>>32-a)+i}function p(e,i,r,s,n,a,o){var l=e+(r^(i|~s))+n+o;return(l<<a|l>>>32-a)+i}e.MD5=n._createHelper(h),e.HmacMD5=n._createHmacHelper(h)}(Math),e.MD5),a.p.exports}h.p.exports,a.p.exports},119498:function(){"use strict";class e{constructor(e=1,i=0,r=0,s=1,n=0,a=0){this.a=e,this.b=i,this.c=r,this.d=s,this.e=n,this.f=a}static translation(i,r){return new e(1,0,0,1,i,r)}static scaling(i){return new e(i,0,0,i,0,0)}static scalingAt(i,r){return new e(i,0,0,i,r.x-r.x*i,r.y-r.y*i)}static nonUniformScaling(i,r){return new e(i,0,0,r,0,0)}static nonUniformScalingAt(i,r,s){return new e(i,0,0,r,s.x-s.x*i,s.y-s.y*r)}static rotation(i){let r=Math.cos(i),s=Math.sin(i);return new e(r,s,-s,r,0,0)}static rotationAt(i,r){let s=Math.cos(i),n=Math.sin(i);return new e(s,n,-n,s,r.x-r.x*s+r.y*n,r.y-r.y*s-r.x*n)}static rotationFromVector(i){let r=i.unit(),s=r.x,n=r.y;return new e(s,n,-n,s,0,0)}static xFlip(){return new e(-1,0,0,1,0,0)}static yFlip(){return new e(1,0,0,-1,0,0)}static xSkew(i){return new e(1,0,Math.tan(i),1,0,0)}static ySkew(i){return new e(1,Math.tan(i),0,1,0,0)}multiply(e){return this.isIdentity()?e:e.isIdentity()?this:new this.constructor(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.e+this.c*e.f+this.e,this.b*e.e+this.d*e.f+this.f)}inverse(){if(this.isIdentity())return this;let e=this.a*this.d-this.b*this.c;if(0===e)throw Error("Matrix is not invertible");let i=1/e,r=this.f*this.c-this.e*this.d,s=this.e*this.b-this.f*this.a;return new this.constructor(this.d*i,-this.b*i,-this.c*i,this.a*i,r*i,s*i)}translate(e,i){return new this.constructor(this.a,this.b,this.c,this.d,this.a*e+this.c*i+this.e,this.b*e+this.d*i+this.f)}scale(e){return new this.constructor(this.a*e,this.b*e,this.c*e,this.d*e,this.e,this.f)}scaleAt(e,i){let r=i.x-e*i.x,s=i.y-e*i.y;return new this.constructor(this.a*e,this.b*e,this.c*e,this.d*e,this.a*r+this.c*s+this.e,this.b*r+this.d*s+this.f)}scaleNonUniform(e,i){return new this.constructor(this.a*e,this.b*e,this.c*i,this.d*i,this.e,this.f)}scaleNonUniformAt(e,i,r){let s=r.x-e*r.x,n=r.y-i*r.y;return new this.constructor(this.a*e,this.b*e,this.c*i,this.d*i,this.a*s+this.c*n+this.e,this.b*s+this.d*n+this.f)}rotate(e){let i=Math.cos(e),r=Math.sin(e);return new this.constructor(this.a*i+this.c*r,this.b*i+this.d*r,-(this.a*r)+this.c*i,-(this.b*r)+this.d*i,this.e,this.f)}rotateAt(e,i){let r=Math.cos(e),s=Math.sin(e),n=i.x,a=i.y,o=this.a*r+this.c*s,l=this.b*r+this.d*s,h=this.c*r-this.a*s,u=this.d*r-this.b*s;return new this.constructor(o,l,h,u,(this.a-o)*n+(this.c-h)*a+this.e,(this.b-l)*n+(this.d-u)*a+this.f)}rotateFromVector(e){let i=e.unit(),r=i.x,s=i.y;return new this.constructor(this.a*r+this.c*s,this.b*r+this.d*s,-(this.a*s)+this.c*r,-(this.b*s)+this.d*r,this.e,this.f)}flipX(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)}flipY(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)}skewX(e){let i=Math.tan(e);return new this.constructor(this.a,this.b,this.c+this.a*i,this.d+this.b*i,this.e,this.f)}skewY(e){let i=Math.tan(e);return new this.constructor(this.a+this.c*i,this.b+this.d*i,this.c,this.d,this.e,this.f)}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}isInvertible(){return this.a*this.d-this.b*this.c!=0}getScale(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}}getDecomposition(){let e=(this.a+this.d)*.5,i=(this.a-this.d)*.5,r=(this.b+this.c)*.5,s=(this.b-this.c)*.5,n=Math.sqrt(e*e+s*s),a=Math.sqrt(i*i+r*r),o=Math.atan2(r,i),l=Math.atan2(s,e);return{translation:this.constructor.translation(this.e,this.f),rotation:this.constructor.rotation((l+o)*.5),scale:this.constructor.nonUniformScaling(n+a,n-a),rotation0:this.constructor.rotation((l-o)*.5)}}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}precisionEquals(e,i){return Math.abs(this.a-e.a)<i&&Math.abs(this.b-e.b)<i&&Math.abs(this.c-e.c)<i&&Math.abs(this.d-e.d)<i&&Math.abs(this.e-e.e)<i&&Math.abs(this.f-e.f)<i}toString(){return`matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`}}e.IDENTITY=new e,e.IDENTITY.isIdentity=()=>!0},951920:function(e,i,r){"use strict";r.d(i,{Z:()=>s});class s{constructor(e=0,i=0){this.x=e,this.y=i}clone(){return new this.constructor(this.x,this.y)}add(e){return new this.constructor(this.x+e.x,this.y+e.y)}subtract(e){return new this.constructor(this.x-e.x,this.y-e.y)}multiply(e){return new this.constructor(this.x*e,this.y*e)}divide(e){return new this.constructor(this.x/e,this.y/e)}equals(e){return this.x===e.x&&this.y===e.y}precisionEquals(e,i){return Math.abs(this.x-e.x)<i&&Math.abs(this.y-e.y)<i}lerp(e,i){let r=1-i;return new this.constructor(this.x*r+e.x*i,this.y*r+e.y*i)}distanceFrom(e){let i=this.x-e.x,r=this.y-e.y;return Math.sqrt(i*i+r*r)}min(e){return new this.constructor(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new this.constructor(Math.max(this.x,e.x),Math.max(this.y,e.y))}transform(e){return new this.constructor(e.a*this.x+e.c*this.y+e.e,e.b*this.x+e.d*this.y+e.f)}toString(){return`point(${this.x},${this.y})`}}},417293:function(e,i,r){"use strict";r.d(i,{Z:()=>s});class s{constructor(e=0,i=0){this.x=e,this.y=i}static fromPoints(e,i){return new s(i.x-e.x,i.y-e.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}magnitude(){return this.x*this.x+this.y*this.y}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}determinant(e){return this.x*e.y-this.y*e.x}unit(){return this.divide(this.length())}add(e){return new this.constructor(this.x+e.x,this.y+e.y)}subtract(e){return new this.constructor(this.x-e.x,this.y-e.y)}multiply(e){return new this.constructor(this.x*e,this.y*e)}divide(e){return new this.constructor(this.x/e,this.y/e)}angleBetween(e){let i=this.dot(e)/(this.length()*e.length()),r=Math.acos(i=Math.max(-1,Math.min(i,1)));return 0>this.cross(e)?-r:r}perp(){return new this.constructor(-this.y,this.x)}perpendicular(e){return this.subtract(this.project(e))}project(e){let i=this.dot(e)/e.dot(e);return e.multiply(i)}transform(e){return new this.constructor(e.a*this.x+e.c*this.y,e.b*this.x+e.d*this.y)}equals(e){return this.x===e.x&&this.y===e.y}precisionEquals(e,i){return Math.abs(this.x-e.x)<i&&Math.abs(this.y-e.y)<i}toString(){return`vector(${this.x},${this.y})`}}},629029:function(e,i,r){"use strict";r.d(i,{Z:()=>d});var s=r(951920),n=r(417293);function a(e){return"number"==typeof e?e?e<0?-1:1:e==e?e:NaN:NaN}r(119498);class o{constructor(...e){this.coefs=[];for(let i=e.length-1;i>=0;i--)this.coefs.push(e[i]);this._variable="t",this._s=0}static interpolate(e,i,r,s,n){let a,o;if(e.constructor!==Array||i.constructor!==Array)throw TypeError("xs and ys must be arrays");if(isNaN(r)||isNaN(s)||isNaN(n))throw TypeError("n, offset, and x must be numbers");let l=0,h=Array(r),u=Array(r),c=0,d=Math.abs(n-e[s]);for(a=0;a<r;a++){let r=Math.abs(n-e[s+a]);r<d&&(c=a,d=r),h[a]=u[a]=i[s+a]}o=i[s+c],c--;for(let i=1;i<r;i++){for(a=0;a<r-i;a++){let r=e[s+a]-n,o=e[s+a+i]-n,l=h[a+1]-u[a],c=r-o;if(0===c)throw RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");c=l/c,u[a]=o*c,h[a]=r*c}o+=l=2*(c+1)<r-i?h[c+1]:u[c--]}return{y:o,dy:l}}static newtonSecantBisection(e,i,r,s,n,o){let l,h,u,c,d=0,p,f=0,g,y;c=e;let x="number"==typeof n&&"number"==typeof o;if(x){if(n>o)throw RangeError("Min must be greater than max");if(h=i(n),u=i(o),a(h)===a(u))throw RangeError("Y values of bounds must be of opposite sign")}let m=function(){return Math.abs(g)<=1e-14*Math.abs(c)||f===c-g-c};for(let e=0;e<s;e++){if(0===(p=r(c)))if(0===d)throw RangeError("df(x) is zero");else p=d;if(d=p,g=(l=i(c))/p,y=c-g,m())break;if(x){if(a(l)===a(u))o=c,u=l;else if(a(l)===a(h))n=c,h=l;else{c=y;break}if(y<n||y>o){if(a(h)===a(u))break;let e=u-h,i=o-n;if(g=0===e?c-(n+.5*i):Math.abs(e/Math.min(h,u))>50?c-(n+i*(.5+(Math.abs(h)<Math.abs(u)?-.25:.25))):c-(n-h/e*i),y=c-g,m())break}}f=c-y,c=y}return c}clone(){let e=new o;return e.coefs=this.coefs.slice(),e}eval(e){if(isNaN(e))throw TypeError(`Parameter must be a number. Found '${e}'`);let i=0;for(let r=this.coefs.length-1;r>=0;r--)i=i*e+this.coefs[r];return i}add(e){let i=new o,r=this.getDegree(),s=e.getDegree(),n=Math.max(r,s);for(let a=0;a<=n;a++){let n=a<=r?this.coefs[a]:0,o=a<=s?e.coefs[a]:0;i.coefs[a]=n+o}return i}multiply(e){let i=new o;for(let r=0;r<=this.getDegree()+e.getDegree();r++)i.coefs.push(0);for(let r=0;r<=this.getDegree();r++)for(let s=0;s<=e.getDegree();s++)i.coefs[r+s]+=this.coefs[r]*e.coefs[s];return i}divideEqualsScalar(e){for(let i=0;i<this.coefs.length;i++)this.coefs[i]/=e}simplifyEquals(e=1e-12){for(let i=this.getDegree();i>=0;i--)if(Math.abs(this.coefs[i])<=e)this.coefs.pop();else break}removeZerosEquals(e=1e-15){let i=this.coefs,r=10*e*Math.abs(i.reduce((e,i)=>Math.abs(i)>Math.abs(e)?i:e));for(let e=0;e<i.length-1;e++)Math.abs(i[e])<r&&(i[e]=0);return this}monicEquals(){let e=this.coefs;return 1!==e[e.length-1]&&this.divideEqualsScalar(e[e.length-1]),this}toString(){let e=[],i=[];for(let r=this.coefs.length-1;r>=0;r--){let s=Math.round(1e3*this.coefs[r])/1e3;if(0!==s){let n=s<0?" - ":" + ";s=Math.abs(s),r>0&&(1===s?s=this._variable:s+=this._variable),r>1&&(s+="^"+r),i.push(n),e.push(s)}}i[0]=" + "===i[0]?"":"-";let r="";for(let s=0;s<e.length;s++)r+=i[s]+e[s];return r}bisection(e,i,r=1e-6,s=15){let n,a=this.eval(e),o=this.eval(i);if(Math.abs(a)<=r)n=e;else if(Math.abs(o)<=r)n=i;else if(a*o<=0){let l=Math.ceil((Math.log(i-e)+Math.LN10*s)/Math.LN2);for(let s=0;s<l;s++){n=.5*(e+i);let s=this.eval(n);if(Math.abs(s)<=r)break;s*a<0?(i=n,o=s):(e=n,a=s)}}return n}trapezoid(e,i,r){if(isNaN(e)||isNaN(i)||isNaN(r))throw TypeError("Parameters must be numbers");let s=i-e;if(1===r){let r=this.eval(e),n=this.eval(i);this._s=.5*s*(r+n)}else{let i=1<<r-2,n=s/i,a=e+.5*n,o=0;for(let e=0;e<i;e++)o+=this.eval(a),a+=n;this._s=.5*(this._s+s*o/i)}if(isNaN(this._s))throw TypeError("this._s is NaN");return this._s}simpson(e,i){if(isNaN(e)||isNaN(i))throw TypeError("Parameters must be numbers");let r=i-e,s=.5*r*(this.eval(e)+this.eval(i)),n=s,a=4*s/3,o=a,l=s,h=1;for(let i=2;i<=20;i++){let i=r/h,u=e+.5*i,c=0;for(let e=1;e<=h;e++)c+=this.eval(u),u+=i;if(Math.abs((a=(4*(s=n=.5*(n+r*c/h))-l)/3)-o)<1e-7*Math.abs(o))break;o=a,l=s,h<<=1}return a}romberg(e,i){if(isNaN(e)||isNaN(i))throw TypeError("Parameters must be numbers");let r=Array(21),s=Array(21),n={y:0};s[0]=1;for(let a=1;a<=20&&(r[a-1]=this.trapezoid(e,i,a),!(a>=3&&Math.abs((n=o.interpolate(s,r,3,a-3,0)).dy)<=1e-6*n.y));a++)r[a]=r[a-1],s[a]=.25*s[a-1];return n.y}zeroErrorEstimate(e){if(void 0===e){let i=this.bounds();e=Math.max(Math.abs(i.minX),Math.abs(i.maxX))}if(e<.001)return 2*Math.abs(this.eval(1e-15));let i=this.coefs.length-1,r=this.coefs[i];return 10000000000000002e-30*this.coefs.reduce((i,s,n)=>{let a=s/r*Math.pow(e,n);return a>i?a:i},0)}boundsUpperRealFujiwara(){let e,i=this.coefs,r=i.length-1,s=i[r];1!==s&&(i=this.coefs.map(e=>e/s));let n=i.map((e,i)=>i<r?Math.pow(Math.abs(0===i?e/2:e),1/(r-i)):e),a=function(i,r,s){return e(s)&&(i.max<r?(i.nearmax=i.max,i.max=r):i.nearmax<r&&(i.nearmax=r)),i};e=function(e){return e<r&&i[e]<0};let o=n.reduce(a,{max:0,nearmax:0});return e=function(e){return e<r&&(r%2==e%2?i[e]<0:i[e]>0)},{negX:-2*n.reduce(a,{max:0,nearmax:0}).max,posX:2*o.max}}boundsLowerRealFujiwara(){let e=new o;e.coefs=this.coefs.slice().reverse();let i=e.boundsUpperRealFujiwara();return i.negX=1/i.negX,i.posX=1/i.posX,i}bounds(){let e=this.boundsUpperRealFujiwara(),i={minX:e.negX,maxX:e.posX};return 0===e.negX&&0===e.posX||(0===e.negX?i.minX=this.boundsLowerRealFujiwara().posX:0===e.posX&&(i.maxX=this.boundsLowerRealFujiwara().negX),i.minX>i.maxX&&(i.minX=i.maxX=0)),i}boundUpperAbsRouche(){let e=this.coefs,i=e.length-1;return 1+e.reduce((e,r,s)=>s!==i&&e<(r=Math.abs(r))?r:e,0)/Math.abs(e[i])}boundLowerAbsRouche(){let e=this.coefs,i=e.reduce((e,i,r)=>0!==r&&e<(i=Math.abs(i))?i:e,0);return Math.abs(e[0])/(Math.abs(e[0])+i)}boundsRealLaguerre(){let e=this.coefs,i=e.length-1,r=-e[i-1]/(i*e[i]),s=e[i-1]*e[i-1]-2*i/(i-1)*e[i]*e[i-2],n=(i-1)/(i*e[i])*Math.sqrt(s);return n<0&&(n=-n),{minX:r-n,maxX:r+n}}countRootsDescartes(){let e=this.coefs,i=e.length-1,r=e.reduce((e,i,r)=>(0!==e.prev_a&&0!==i&&(e.prev_a<0==i>0&&e.pos++,r%2==0!=e.prev_a<0==(r%2==1!=i>0)&&e.neg++),e.prev_a=i,e),{pos:0,neg:0,prev_a:0});return{maxRealPos:r.pos,maxRealNeg:r.neg,minComplex:i-(r.pos+r.neg)}}getDegree(){return this.coefs.length-1}getDerivative(){let e=new o;for(let i=1;i<this.coefs.length;i++)e.coefs.push(i*this.coefs[i]);return e}getRoots(){let e;switch(this.simplifyEquals(),this.getDegree()){case 0:default:e=[];break;case 1:e=this.getLinearRoot();break;case 2:e=this.getQuadraticRoots();break;case 3:e=this.getCubicRoots();break;case 4:e=this.getQuarticRoots()}return e}getRootsInInterval(e,i){let r=[];function s(e){"number"==typeof e&&r.push(e)}if(0===this.getDegree())throw RangeError("Unexpected empty polynomial");if(1===this.getDegree())s(this.bisection(e,i));else{let r=this.getDerivative().getRootsInInterval(e,i);if(r.length>0){s(this.bisection(e,r[0]));for(let e=0;e<=r.length-2;e++)s(this.bisection(r[e],r[e+1]));s(this.bisection(r[r.length-1],i))}else s(this.bisection(e,i))}return r}getLinearRoot(){let e=[],i=this.coefs[1];return 0!==i&&e.push(-this.coefs[0]/i),e}getQuadraticRoots(){let e=[];if(2===this.getDegree()){let i=this.coefs[2],r=this.coefs[1]/i,s=r*r-4*(this.coefs[0]/i);if(s>0){let i=Math.sqrt(s);e.push(.5*(-r+i)),e.push(.5*(-r-i))}else 0===s&&e.push(-(.5*r))}return e}getCubicRoots(){let e=[];if(3===this.getDegree()){let i=this.coefs[3],r=this.coefs[2]/i,s=this.coefs[1]/i,n=this.coefs[0]/i,a=(3*s-r*r)/3,o=(2*r*r*r-9*s*r+27*n)/27,l=r/3,h=o*o/4+a*a*a/27,u=o/2;if(Math.abs(h)<=this.zeroErrorEstimate()&&(h=0),h>0){let i,r=Math.sqrt(h),s=-u+r;i=s>=0?Math.pow(s,1/3):-Math.pow(-s,1/3),(s=-u-r)>=0?i+=Math.pow(s,1/3):i-=Math.pow(-s,1/3),e.push(i-l)}else if(h<0){let i=Math.sqrt(-a/3),r=Math.atan2(Math.sqrt(-h),-u)/3,s=Math.cos(r),n=Math.sin(r),o=Math.sqrt(3);e.push(2*i*s-l),e.push(-i*(s+o*n)-l),e.push(-i*(s-o*n)-l)}else{let i;i=u>=0?-Math.pow(u,1/3):Math.pow(-u,1/3),e.push(2*i-l),e.push(-i-l)}}return e}getQuarticRoots(){let e=[],i=this.getDegree();if(4===i){let r=new o;r.coefs=this.coefs.slice(),r.divideEqualsScalar(r.coefs[i]),Math.abs(r.coefs[0])<10000000000000002e-30*Math.abs(r.coefs[3])&&(r.coefs[0]=0);let s=r.getDerivative(),n=s.getRoots().sort((e,i)=>e-i),l=[],h=n.length-1,u=this.bounds(),c=Math.max(Math.abs(u.minX),Math.abs(u.maxX)),d=this.zeroErrorEstimate(c);for(let e=0;e<=h;e++)l.push(r.eval(n[e]));for(let e=0;e<=h;e++)Math.abs(l[e])<d&&(l[e]=0);let p=0,f=Math.max(.1*(u.maxX-u.minX)/i,1e-15),g=[],y=[];if(h>-1){for(0!==l[0]?a(l[0])!==a(r.eval(n[0]-f)-l[0])&&(g.push(n[0]-f),y.push([u.minX,n[0]])):(e.push(n[0],n[0]),p++);p<h;p++)0===l[p+1]?(e.push(n[p+1],n[p+1]),p++):a(l[p])!==a(l[p+1])&&(g.push((n[p]+n[p+1])/2),y.push([n[p],n[p+1]]));0!==l[h]&&a(l[h])!==a(r.eval(n[h]+f)-l[h])&&(g.push(n[h]+f),y.push([n[h],u.maxX]))}let x=function(e){return r.eval(e)},m=function(e){return s.eval(e)};if(g.length>0)for(p=0;p<g.length;p++)g[p]=o.newtonSecantBisection(g[p],x,m,32,y[p][0],y[p][1]);e=e.concat(g)}return e}}var l=r(640285);let h=2*Math.PI,u=new n.Z(1,0);function c(e){let i=e.slice();return i.push(e[0]),i}class d{constructor(e){this.init(e)}init(e){this.status=e,this.points=[]}static intersect(e,i){let r;if(null==e||null==i)r=new d("No Intersection");else if("Path"===e.name)r=d.intersectPathShape(e,i);else if("Path"===i.name)r=d.intersectPathShape(i,e);else if("Arc"===e.name)r=d.intersectArcShape(e,i);else if("Arc"===i.name)r=d.intersectArcShape(i,e);else{let s,n;if(e.name<i.name?(s="intersect"+e.name+i.name,n=e.args.concat(i.args)):(s="intersect"+i.name+e.name,n=i.args.concat(e.args)),!(s in d))throw TypeError("Intersection not available: "+s);r=d[s].apply(null,n)}return r}static intersectPathShape(e,i){let r=new d("No Intersection");for(let s of e.args){let e=d.intersect(s,i);r.appendPoints(e.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectArcShape(e,i){let[r,s,a,o,c]=e.args,p=new l.ZP(l.ZP.ELLIPSE,[r,s,a]);var f=d.intersect(p,i),g=o,y=c;if(0===f.points.length)return f;let x=new d("No Intersection");for(let e of(y<g&&([g,y]=[y,g]),(g<0||y<0)&&(g+=h,y+=h),f.points)){let i=function(e){let i=e%h;return i<0?i+h:i}(u.angleBetween(n.Z.fromPoints(r,e)));i<g&&(i+=h),g<=i&&i<=y&&x.appendPoint(e)}return x.points.length>0&&(x.status="Intersection"),x}static intersectBezier2Bezier2(e,i,r,n,a,l){let h,u,c=new d("No Intersection");h=i.multiply(-2);let p=e.add(h.add(r));h=e.multiply(-2),u=i.multiply(2);let f=h.add(u),g=new s.Z(e.x,e.y);h=a.multiply(-2);let y=n.add(h.add(l));h=n.multiply(-2),u=a.multiply(2);let x=h.add(u),m=new s.Z(n.x,n.y);h=p.x*f.y-f.x*p.y,u=y.x*f.y-f.x*y.y;let b=x.x*f.y-f.x*x.y,v=f.x*(g.y-m.y)+f.y*(-g.x+m.x),w=y.x*p.y-p.x*y.y,T=x.x*p.y-p.x*x.y,C=p.x*(g.y-m.y)+p.y*(-g.x+m.x);for(let e of new o(-w*w,-2*w*T,h*u-T*T-2*w*C,h*b-2*T*C,h*v-C*C).getRoots())if(0<=e&&e<=1){let i=new o(p.x,f.x,g.x-m.x-e*x.x-e*e*y.x);i.simplifyEquals();let r=i.getRoots(),s=new o(p.y,f.y,g.y-m.y-e*x.y-e*e*y.y);s.simplifyEquals();let n=s.getRoots();if(r.length>0&&n.length>0){t:for(let i of r)if(0<=i&&i<=1){for(let r=0;r<n.length;r++)if(1e-4>Math.abs(i-n[r])){c.points.push(y.multiply(e*e).add(x.multiply(e).add(m)));break t}}}}return c.points.length>0&&(c.status="Intersection"),c}static intersectBezier2Bezier3(e,i,r,n,a,l,h){let u,c,p,f,g=new d("No Intersection");u=i.multiply(-2);let y=e.add(u.add(r));u=e.multiply(-2),c=i.multiply(2);let x=u.add(c),m=new s.Z(e.x,e.y);u=n.multiply(-1),c=a.multiply(3),p=l.multiply(-3),f=u.add(c.add(p.add(h)));let b=new s.Z(f.x,f.y);u=n.multiply(3),c=a.multiply(-6),p=l.multiply(3),f=u.add(c.add(p));let v=new s.Z(f.x,f.y);u=n.multiply(-3),c=a.multiply(3),p=u.add(c);let w=new s.Z(p.x,p.y),T=new s.Z(n.x,n.y),C=m.x*m.x,E=m.y*m.y,_=x.x*x.x,A=x.y*x.y,M=y.x*y.x,R=y.y*y.y,P=T.x*T.x,S=T.y*T.y,I=w.x*w.x,N=w.y*w.y,O=v.x*v.x,L=v.y*v.y,U=b.x*b.x,D=b.y*b.y;for(let e of new o(-2*y.x*y.y*b.x*b.y+M*D+R*U,-2*y.x*y.y*v.x*b.y-2*y.x*y.y*v.y*b.x+2*R*v.x*b.x+2*M*v.y*b.y,-2*y.x*w.x*y.y*b.y-2*y.x*y.y*w.y*b.x-2*y.x*y.y*v.x*v.y+2*w.x*R*b.x+R*O+M*(2*w.y*b.y+L),2*m.x*y.x*y.y*b.y+2*m.y*y.x*y.y*b.x+x.x*x.y*y.x*b.y+x.x*x.y*y.y*b.x-2*T.x*y.x*y.y*b.y-2*y.x*T.y*y.y*b.x-2*y.x*w.x*y.y*v.y-2*y.x*y.y*w.y*v.x-2*m.x*R*b.x-2*m.y*M*b.y+2*T.x*R*b.x+2*w.x*R*v.x-A*y.x*b.x-_*y.y*b.y+M*(2*T.y*b.y+2*w.y*v.y),2*m.x*y.x*y.y*v.y+2*m.y*y.x*y.y*v.x+x.x*x.y*y.x*v.y+x.x*x.y*y.y*v.x-2*T.x*y.x*y.y*v.y-2*y.x*T.y*y.y*v.x-2*y.x*w.x*y.y*w.y-2*m.x*R*v.x-2*m.y*M*v.y+2*T.x*R*v.x-A*y.x*v.x-_*y.y*v.y+I*R+M*(2*T.y*v.y+N),2*m.x*y.x*y.y*w.y+2*m.y*y.x*w.x*y.y+x.x*x.y*y.x*w.y+x.x*x.y*w.x*y.y-2*T.x*y.x*y.y*w.y-2*y.x*T.y*w.x*y.y-2*m.x*w.x*R-2*m.y*M*w.y+2*T.x*w.x*R-A*y.x*w.x-_*y.y*w.y+2*M*T.y*w.y,-2*m.x*m.y*y.x*y.y-m.x*x.x*x.y*y.y-m.y*x.x*x.y*y.x+2*m.x*y.x*T.y*y.y+2*m.y*T.x*y.x*y.y+x.x*T.x*x.y*y.y+x.x*x.y*y.x*T.y-2*T.x*y.x*T.y*y.y-2*m.x*T.x*R+m.x*A*y.x+m.y*_*y.y-2*m.y*M*T.y-T.x*A*y.x-_*T.y*y.y+C*R+E*M+P*R+M*S).getRootsInInterval(0,1)){let i=new o(y.x,x.x,m.x-T.x-e*w.x-e*e*v.x-e*e*e*b.x).getRoots(),r=new o(y.y,x.y,m.y-T.y-e*w.y-e*e*v.y-e*e*e*b.y).getRoots();if(i.length>0&&r.length>0){t:for(let s of i)if(0<=s&&s<=1){for(let i=0;i<r.length;i++)if(1e-4>Math.abs(s-r[i])){g.points.push(b.multiply(e*e*e).add(v.multiply(e*e).add(w.multiply(e).add(T))));break t}}}}return g.points.length>0&&(g.status="Intersection"),g}static intersectBezier2Circle(e,i,r,s,n){return d.intersectBezier2Ellipse(e,i,r,s,n,n)}static intersectBezier2Ellipse(e,i,r,n,a,l){let h,u=new d("No Intersection");h=i.multiply(-2);let c=e.add(h.add(r));h=e.multiply(-2);let p=i.multiply(2),f=h.add(p),g=new s.Z(e.x,e.y),y=a*a,x=l*l;for(let e of new o(x*c.x*c.x+y*c.y*c.y,2*(x*c.x*f.x+y*c.y*f.y),x*(2*c.x*g.x+f.x*f.x)+y*(2*c.y*g.y+f.y*f.y)-2*(x*n.x*c.x+y*n.y*c.y),2*(x*f.x*(g.x-n.x)+y*f.y*(g.y-n.y)),x*(g.x*g.x+n.x*n.x)+y*(g.y*g.y+n.y*n.y)-2*(x*n.x*g.x+y*n.y*g.y)-y*x).getRoots())0<=e&&e<=1&&u.points.push(c.multiply(e*e).add(f.multiply(e).add(g)));return u.points.length>0&&(u.status="Intersection"),u}static intersectBezier2Line(e,i,r,a,l){let h,u=a.min(l),c=a.max(l),p=new d("No Intersection");h=i.multiply(-2);let f=e.add(h.add(r));h=e.multiply(-2);let g=i.multiply(2),y=h.add(g),x=new s.Z(e.x,e.y),m=new n.Z(a.y-l.y,l.x-a.x),b=a.x*l.y-l.x*a.y;for(let s of new o(m.dot(f),m.dot(y),m.dot(x)+b).getRoots())if(0<=s&&s<=1){let n=e.lerp(i,s),o=i.lerp(r,s),h=n.lerp(o,s);a.x===l.x?u.y<=h.y&&h.y<=c.y&&(p.status="Intersection",p.appendPoint(h)):a.y===l.y?u.x<=h.x&&h.x<=c.x&&(p.status="Intersection",p.appendPoint(h)):u.x<=h.x&&h.x<=c.x&&u.y<=h.y&&h.y<=c.y&&(p.status="Intersection",p.appendPoint(h))}return p}static intersectBezier2Polygon(e,i,r,s){return d.intersectBezier2Polyline(e,i,r,c(s))}static intersectBezier2Polyline(e,i,r,s){let n=new d("No Intersection"),{length:a}=s;for(let o=0;o<a-1;o++){let a=s[o],l=s[o+1],h=d.intersectBezier2Line(e,i,r,a,l);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n}static intersectBezier2Rectangle(e,i,r,n,a){let o=n.min(a),l=n.max(a),h=new s.Z(l.x,o.y),u=new s.Z(o.x,l.y),c=d.intersectBezier2Line(e,i,r,o,h),p=d.intersectBezier2Line(e,i,r,h,l),f=d.intersectBezier2Line(e,i,r,l,u),g=d.intersectBezier2Line(e,i,r,u,o),y=new d("No Intersection");return y.appendPoints(c.points),y.appendPoints(p.points),y.appendPoints(f.points),y.appendPoints(g.points),y.points.length>0&&(y.status="Intersection"),y}static intersectBezier3Bezier3(e,i,r,n,a,l,h,u){let c,p,f,g,y=new d("No Intersection");c=e.multiply(-1),p=i.multiply(3),f=r.multiply(-3),g=c.add(p.add(f.add(n)));let x=new s.Z(g.x,g.y);c=e.multiply(3),p=i.multiply(-6),f=r.multiply(3),g=c.add(p.add(f));let m=new s.Z(g.x,g.y);c=e.multiply(-3),p=i.multiply(3),f=c.add(p);let b=new s.Z(f.x,f.y),v=new s.Z(e.x,e.y);c=a.multiply(-1),p=l.multiply(3),f=h.multiply(-3),g=c.add(p.add(f.add(u)));let w=new s.Z(g.x,g.y);c=a.multiply(3),p=l.multiply(-6),f=h.multiply(3),g=c.add(p.add(f));let T=new s.Z(g.x,g.y);c=a.multiply(-3),p=l.multiply(3),f=c.add(p);let C=new s.Z(f.x,f.y),E=new s.Z(a.x,a.y);c=x.x*m.y-m.x*x.y,p=x.x*b.y-b.x*x.y;let _=x.x*v.y-v.x*x.y+E.x*x.y-x.x*E.y,A=C.x*x.y-x.x*C.y,M=T.x*x.y-x.x*T.y,R=w.x*x.y-x.x*w.y;g=x.x*b.y-b.x*x.y;let P=x.x*v.y+m.x*b.y-b.x*m.y-v.x*x.y+E.x*x.y-x.x*E.y,S=C.x*x.y-x.x*C.y,I=T.x*x.y-x.x*T.y,N=w.x*x.y-x.x*w.y,O=m.x*v.y-v.x*m.y+E.x*m.y-m.x*E.y,L=C.x*m.y-m.x*C.y,U=T.x*m.y-m.x*T.y,D=w.x*m.y-m.x*w.y,k=x.x*v.y-v.x*x.y+E.x*x.y-x.x*E.y,B=C.x*x.y-x.x*C.y,z=T.x*x.y-x.x*T.y,V=w.x*x.y-x.x*w.y,H=m.x*v.y-v.x*m.y+E.x*m.y-m.x*E.y,X=C.x*m.y-m.x*C.y,F=T.x*m.y-m.x*T.y,Y=w.x*m.y-m.x*w.y,Z=b.x*v.y-v.x*b.y+E.x*b.y-b.x*E.y,q=C.x*b.y-b.x*C.y,G=T.x*b.y-b.x*T.y,W=w.x*b.y-b.x*w.y,$=new o(-R*N*V,-R*N*z-R*I*V-M*N*V,-R*N*B-R*I*z-M*N*z-R*S*V-M*I*V-A*N*V,-R*N*k-R*I*B-M*N*B-R*S*z-M*I*z-A*N*z-R*P*V-M*S*V-A*I*V-_*N*V+p*D*V+R*g*Y-c*D*Y+c*N*W,-R*I*k-M*N*k-R*S*B-M*I*B-A*N*B-R*P*z-M*S*z-A*I*z-_*N*z+p*D*z-M*P*V-A*S*V-_*I*V+p*U*V+R*g*F-c*D*F+M*g*Y-c*U*Y+c*N*G+c*I*W,-R*S*k-M*I*k-A*N*k-R*P*B-M*S*B-A*I*B-_*N*B+p*D*B-M*P*z-A*S*z-_*I*z+p*U*z-A*P*V-_*S*V+p*L*V+R*g*X-c*D*X+M*g*F-c*U*F+A*g*Y-c*L*Y+c*N*q+c*I*G+c*S*W,-R*P*k-M*S*k-A*I*k-_*N*k+p*D*k-M*P*B-A*S*B-_*I*B+p*U*B-A*P*z-_*S*z+p*L*z-_*P*V+p*O*V+R*g*H-c*D*H+M*g*X-c*U*X+A*g*F-c*L*F+_*g*Y-c*O*Y+c*N*Z+c*I*q+c*S*G-p*g*W+c*P*W,-M*P*k-A*S*k-_*I*k+p*U*k-A*P*B-_*S*B+p*L*B-_*P*z+p*O*z+M*g*H-c*U*H+A*g*X-c*L*X+_*g*F-c*O*F+c*I*Z+c*S*q-p*g*G+c*P*G,-A*P*k-_*S*k+p*L*k-_*P*B+p*O*B+A*g*H-c*L*H+_*g*X-c*O*X+c*S*Z-p*g*q+c*P*q,-_*P*k+p*O*k+_*g*H-c*O*H-p*g*Z+c*P*Z);for(let e of($.simplifyEquals(),$.getRootsInInterval(0,1))){let i=new o(x.x,m.x,b.x,v.x-E.x-e*C.x-e*e*T.x-e*e*e*w.x);i.simplifyEquals();let r=i.getRoots(),s=new o(x.y,m.y,b.y,v.y-E.y-e*C.y-e*e*T.y-e*e*e*w.y);s.simplifyEquals();let n=s.getRoots();if(r.length>0&&n.length>0){t:for(let i of r)if(0<=i&&i<=1){for(let r=0;r<n.length;r++)if(1e-4>Math.abs(i-n[r])){y.points.push(w.multiply(e*e*e).add(T.multiply(e*e).add(C.multiply(e).add(E))));break t}}}}return y.points.length>0&&(y.status="Intersection"),y}static intersectBezier3Circle(e,i,r,s,n,a){return d.intersectBezier3Ellipse(e,i,r,s,n,a,a)}static intersectBezier3Ellipse(e,i,r,n,a,l,h){let u,c,p,f,g=new d("No Intersection");u=e.multiply(-1),c=i.multiply(3),p=r.multiply(-3),f=u.add(c.add(p.add(n)));let y=new s.Z(f.x,f.y);u=e.multiply(3),c=i.multiply(-6),p=r.multiply(3),f=u.add(c.add(p));let x=new s.Z(f.x,f.y);u=e.multiply(-3),c=i.multiply(3),p=u.add(c);let m=new s.Z(p.x,p.y),b=new s.Z(e.x,e.y),v=l*l,w=h*h;for(let e of new o(y.x*y.x*w+y.y*y.y*v,2*(y.x*x.x*w+y.y*x.y*v),2*(y.x*m.x*w+y.y*m.y*v)+x.x*x.x*w+x.y*x.y*v,2*y.x*w*(b.x-a.x)+2*y.y*v*(b.y-a.y)+2*(x.x*m.x*w+x.y*m.y*v),2*x.x*w*(b.x-a.x)+2*x.y*v*(b.y-a.y)+m.x*m.x*w+m.y*m.y*v,2*m.x*w*(b.x-a.x)+2*m.y*v*(b.y-a.y),b.x*b.x*w-2*b.y*a.y*v-2*b.x*a.x*w+b.y*b.y*v+a.x*a.x*w+a.y*a.y*v-v*w).getRootsInInterval(0,1))g.points.push(y.multiply(e*e*e).add(x.multiply(e*e).add(m.multiply(e).add(b))));return g.points.length>0&&(g.status="Intersection"),g}static intersectBezier3Line(e,i,r,s,a,l){let h,u,c,p,f=a.min(l),g=a.max(l),y=new d("No Intersection");h=e.multiply(-1),u=i.multiply(3),c=r.multiply(-3),p=h.add(u.add(c.add(s)));let x=new n.Z(p.x,p.y);h=e.multiply(3),u=i.multiply(-6),c=r.multiply(3),p=h.add(u.add(c));let m=new n.Z(p.x,p.y);h=e.multiply(-3),u=i.multiply(3),c=h.add(u);let b=new n.Z(c.x,c.y),v=new n.Z(e.x,e.y),w=new n.Z(a.y-l.y,l.x-a.x),T=a.x*l.y-l.x*a.y;for(let n of new o(w.dot(x),w.dot(m),w.dot(b),w.dot(v)+T).getRoots())if(0<=n&&n<=1){let o=e.lerp(i,n),h=i.lerp(r,n),u=r.lerp(s,n),c=o.lerp(h,n),d=h.lerp(u,n),p=c.lerp(d,n);a.x===l.x?f.y<=p.y&&p.y<=g.y&&(y.status="Intersection",y.appendPoint(p)):a.y===l.y?f.x<=p.x&&p.x<=g.x&&(y.status="Intersection",y.appendPoint(p)):f.x<=p.x&&p.x<=g.x&&f.y<=p.y&&p.y<=g.y&&(y.status="Intersection",y.appendPoint(p))}return y}static intersectBezier3Polygon(e,i,r,s,n){return d.intersectBezier3Polyline(e,i,r,s,c(n))}static intersectBezier3Polyline(e,i,r,s,n){let a=new d("No Intersection"),{length:o}=n;for(let l=0;l<o-1;l++){let o=n[l],h=n[l+1],u=d.intersectBezier3Line(e,i,r,s,o,h);a.appendPoints(u.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectBezier3Rectangle(e,i,r,n,a,o){let l=a.min(o),h=a.max(o),u=new s.Z(h.x,l.y),c=new s.Z(l.x,h.y),p=d.intersectBezier3Line(e,i,r,n,l,u),f=d.intersectBezier3Line(e,i,r,n,u,h),g=d.intersectBezier3Line(e,i,r,n,h,c),y=d.intersectBezier3Line(e,i,r,n,c,l),x=new d("No Intersection");return x.appendPoints(p.points),x.appendPoints(f.points),x.appendPoints(g.points),x.appendPoints(y.points),x.points.length>0&&(x.status="Intersection"),x}static intersectCircleCircle(e,i,r,n){let a,o=Math.abs(i-n),l=e.distanceFrom(r);if(l>i+n)a=new d("Outside");else if(l<o)a=new d("Inside");else{a=new d("Intersection");let o=(i*i-n*n+l*l)/(2*l),h=Math.sqrt(i*i-o*o),u=e.lerp(r,o/l),c=h/l;a.points.push(new s.Z(u.x-c*(r.y-e.y),u.y+c*(r.x-e.x))),a.points.push(new s.Z(u.x+c*(r.y-e.y),u.y-c*(r.x-e.x)))}return a}static intersectCircleEllipse(e,i,r,s,n){return d.intersectEllipseEllipse(e,i,i,r,s,n)}static intersectCircleLine(e,i,r,s){let n,a=(s.x-r.x)*(s.x-r.x)+(s.y-r.y)*(s.y-r.y),o=2*((s.x-r.x)*(r.x-e.x)+(s.y-r.y)*(r.y-e.y)),l=o*o-4*a*(e.x*e.x+e.y*e.y+r.x*r.x+r.y*r.y-2*(e.x*r.x+e.y*r.y)-i*i);if(l<0)n=new d("Outside");else if(0===l)n=new d("Tangent");else{let e=Math.sqrt(l),i=(-o+e)/(2*a),h=(-o-e)/(2*a);(i<0||i>1)&&(h<0||h>1)?n=new d(i<0&&h<0||i>1&&h>1?"Outside":"Inside"):(n=new d("Intersection"),0<=i&&i<=1&&n.points.push(r.lerp(s,i)),0<=h&&h<=1&&n.points.push(r.lerp(s,h)))}return n}static intersectCirclePolygon(e,i,r){return d.intersectCirclePolyline(e,i,c(r))}static intersectCirclePolyline(e,i,r){let s,n=new d("No Intersection"),{length:a}=r;for(let o=0;o<a-1;o++){let a=r[o],l=r[o+1];s=d.intersectCircleLine(e,i,a,l),n.appendPoints(s.points)}return n.points.length>0?n.status="Intersection":n.status=s.status,n}static intersectCircleRectangle(e,i,r,n){let a=r.min(n),o=r.max(n),l=new s.Z(o.x,a.y),h=new s.Z(a.x,o.y),u=d.intersectCircleLine(e,i,a,l),c=d.intersectCircleLine(e,i,l,o),p=d.intersectCircleLine(e,i,o,h),f=d.intersectCircleLine(e,i,h,a),g=new d("No Intersection");return g.appendPoints(u.points),g.appendPoints(c.points),g.appendPoints(p.points),g.appendPoints(f.points),g.points.length>0?g.status="Intersection":g.status=u.status,g}static intersectEllipseEllipse(e,i,r,n,a,l){let h=[r*r,0,i*i,-2*r*r*e.x,-2*i*i*e.y,r*r*e.x*e.x+i*i*e.y*e.y-i*i*r*r],u=[l*l,0,a*a,-2*l*l*n.x,-2*a*a*n.y,l*l*n.x*n.x+a*a*n.y*n.y-a*a*l*l],c=(function(e,i){let r=e[0]*i[1]-i[0]*e[1],s=e[0]*i[2]-i[0]*e[2],n=e[0]*i[3]-i[0]*e[3],a=e[0]*i[4]-i[0]*e[4],l=e[0]*i[5]-i[0]*e[5],h=e[1]*i[2]-i[1]*e[2],u=e[1]*i[4]-i[1]*e[4],c=e[1]*i[5]-i[1]*e[5],d=e[2]*i[3]-i[2]*e[3],p=e[3]*i[4]-i[3]*e[4],f=e[3]*i[5]-i[3]*e[5],g=c+p,y=u-d;return new o(r*h-s*s,r*y+n*h-2*s*a,r*g+n*y-a*a-2*s*l,r*f+n*g-2*a*l,n*f-l*l)})(h,u).getRoots(),p=(h[0]*h[0]+2*h[1]*h[1]+h[2]*h[2])*.001,f=(u[0]*u[0]+2*u[1]*u[1]+u[2]*u[2])*.001,g=new d("No Intersection");for(let e=0;e<c.length;e++){let i=new o(h[0],h[3]+c[e]*h[1],h[5]+c[e]*(h[4]+c[e]*h[2])).getRoots();for(let r=0;r<i.length;r++){let n=(h[0]*i[r]+h[1]*c[e]+h[3])*i[r]+(h[2]*c[e]+h[4])*c[e]+h[5];Math.abs(n)<p&&Math.abs(n=(u[0]*i[r]+u[1]*c[e]+u[3])*i[r]+(u[2]*c[e]+u[4])*c[e]+u[5])<f&&g.appendPoint(new s.Z(i[r],c[e]))}}return g.points.length>0&&(g.status="Intersection"),g}static intersectEllipseLine(e,i,r,s,a){let o,l=new n.Z(s.x,s.y),h=n.Z.fromPoints(s,a),u=new n.Z(e.x,e.y),c=l.subtract(u),p=new n.Z(h.x/(i*i),h.y/(r*r)),f=new n.Z(c.x/(i*i),c.y/(r*r)),g=h.dot(p),y=h.dot(f),x=y*y-g*(e=c.dot(f)-1);if(x<0)o=new d("Outside");else if(x>0){let e=Math.sqrt(x),i=(-y-e)/g,r=(-y+e)/g;(i<0||1<i)&&(r<0||1<r)?o=new d(i<0&&r<0||i>1&&r>1?"Outside":"Inside"):(o=new d("Intersection"),0<=i&&i<=1&&o.appendPoint(s.lerp(a,i)),0<=r&&r<=1&&o.appendPoint(s.lerp(a,r)))}else{let e=-y/g;0<=e&&e<=1?(o=new d("Intersection")).appendPoint(s.lerp(a,e)):o=new d("Outside")}return o}static intersectEllipsePolygon(e,i,r,s){return d.intersectEllipsePolyline(e,i,r,c(s))}static intersectEllipsePolyline(e,i,r,s){let n=new d("No Intersection"),{length:a}=s;for(let o=0;o<a-1;o++){let a=s[o],l=s[o+1],h=d.intersectEllipseLine(e,i,r,a,l);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n}static intersectEllipseRectangle(e,i,r,n,a){let o=n.min(a),l=n.max(a),h=new s.Z(l.x,o.y),u=new s.Z(o.x,l.y),c=d.intersectEllipseLine(e,i,r,o,h),p=d.intersectEllipseLine(e,i,r,h,l),f=d.intersectEllipseLine(e,i,r,l,u),g=d.intersectEllipseLine(e,i,r,u,o),y=new d("No Intersection");return y.appendPoints(c.points),y.appendPoints(p.points),y.appendPoints(f.points),y.appendPoints(g.points),y.points.length>0&&(y.status="Intersection"),y}static intersectLineLine(e,i,r,n){let a,o=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(i.x-e.x)*(e.y-r.y)-(i.y-e.y)*(e.x-r.x),h=(n.y-r.y)*(i.x-e.x)-(n.x-r.x)*(i.y-e.y);if(0!==h){let r=o/h,n=l/h;0<=r&&r<=1&&0<=n&&n<=1?(a=new d("Intersection")).points.push(new s.Z(e.x+r*(i.x-e.x),e.y+r*(i.y-e.y))):a=new d("No Intersection")}else a=new d(0===o||0===l?"Coincident":"Parallel");return a}static intersectLinePolygon(e,i,r){return d.intersectLinePolyline(e,i,c(r))}static intersectLinePolyline(e,i,r){let s=new d("No Intersection"),{length:n}=r;for(let a=0;a<n-1;a++){let n=r[a],o=r[a+1],l=d.intersectLineLine(e,i,n,o);s.appendPoints(l.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectLineRectangle(e,i,r,n){let a=r.min(n),o=r.max(n),l=new s.Z(o.x,a.y),h=new s.Z(a.x,o.y),u=d.intersectLineLine(a,l,e,i),c=d.intersectLineLine(l,o,e,i),p=d.intersectLineLine(o,h,e,i),f=d.intersectLineLine(h,a,e,i),g=new d("No Intersection");return g.appendPoints(u.points),g.appendPoints(c.points),g.appendPoints(p.points),g.appendPoints(f.points),g.points.length>0&&(g.status="Intersection"),g}static intersectPolygonPolygon(e,i){return d.intersectPolylinePolyline(c(e),c(i))}static intersectPolygonPolyline(e,i){return d.intersectPolylinePolyline(c(e),i)}static intersectPolygonRectangle(e,i,r){return d.intersectPolylineRectangle(c(e),i,r)}static intersectPolylinePolyline(e,i){let r=new d("No Intersection"),{length:s}=e;for(let n=0;n<s-1;n++){let s=e[n],a=e[n+1],o=d.intersectLinePolyline(s,a,i);r.appendPoints(o.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectPolylineRectangle(e,i,r){let n=i.min(r),a=i.max(r),o=new s.Z(a.x,n.y),l=new s.Z(n.x,a.y),h=d.intersectLinePolyline(n,o,e),u=d.intersectLinePolyline(o,a,e),c=d.intersectLinePolyline(a,l,e),p=d.intersectLinePolyline(l,n,e),f=new d("No Intersection");return f.appendPoints(h.points),f.appendPoints(u.points),f.appendPoints(c.points),f.appendPoints(p.points),f.points.length>0&&(f.status="Intersection"),f}static intersectRectangleRectangle(e,i,r,n){let a=e.min(i),o=e.max(i),l=new s.Z(o.x,a.y),h=new s.Z(a.x,o.y),u=d.intersectLineRectangle(a,l,r,n),c=d.intersectLineRectangle(l,o,r,n),p=d.intersectLineRectangle(o,h,r,n),f=d.intersectLineRectangle(h,a,r,n),g=new d("No Intersection");return g.appendPoints(u.points),g.appendPoints(c.points),g.appendPoints(p.points),g.appendPoints(f.points),g.points.length>0&&(g.status="Intersection"),g}static intersectRayRay(e,i,r,n){let a,o=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(i.x-e.x)*(e.y-r.y)-(i.y-e.y)*(e.x-r.x),h=(n.y-r.y)*(i.x-e.x)-(n.x-r.x)*(i.y-e.y);if(0!==h){let r=o/h;(a=new d("Intersection")).points.push(new s.Z(e.x+r*(i.x-e.x),e.y+r*(i.y-e.y)))}else a=new d(0===o||0===l?"Coincident":"Parallel");return a}appendPoint(e){this.points.push(e)}appendPoints(e){this.points=this.points.concat(e)}}},640285:function(e,i,r){"use strict";r.d(i,{ZP:()=>y});var s=r(951920);r(119498);class n{constructor(e,i){this.type=e,this.text=i}typeis(e){return this.type===e}}n.UNDEFINED=0,n.COMMAND=1,n.NUMBER=2,n.EOD=3;class a{constructor(e){null==e&&(e=""),this.setPathData(e)}setPathData(e){if("string"!=typeof e)throw TypeError("The first parameter must be a string");this._pathData=e}getNextToken(){let e=null,i=this._pathData;for(;null===e;)if(null===i||""===i)e=new n(n.EOD,"");else if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([AaCcHhLlMmQqSsTtVvZz])/))e=new n(n.COMMAND,RegExp.$1),i=i.substr(RegExp.$1.length);else if(i.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))e=new n(n.NUMBER,RegExp.$1),i=i.substr(RegExp.$1.length);else throw SyntaxError(`Unrecognized path data: ${i}`);return this._pathData=i,e}}class o{constructor(){this._lexer=new a,this._handler=null}parseData(e){if("string"!=typeof e)throw TypeError(`The first parameter must be a string: ${e}`);null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();let i=this._lexer;i.setPathData(e);let r="BOP",s=null,a=i.getNextToken();for(;!1===a.typeis(n.EOD);){let e,l=[];switch(a.type){case n.COMMAND:if("BOP"===r&&"M"!==a.text&&"m"!==a.text)throw SyntaxError(`New paths must begin with a moveto command. Found '${a.text}'`);r=a.text,e=o.PARAMCOUNT[a.text.toUpperCase()],a=i.getNextToken();break;case n.NUMBER:if("BOP"===r)throw SyntaxError(`New paths must begin with a moveto command. Found '${a.text}'`);e=o.PARAMCOUNT[r.toUpperCase()];break;default:throw SyntaxError(`Unrecognized command type: ${a.type}`)}for(let r=0;r<e;r++){switch(a.type){case n.COMMAND:throw SyntaxError(`Parameter must be a number. Found '${a.text}'`);case n.NUMBER:l[r]=parseFloat(a.text);break;case n.EOD:throw SyntaxError("Unexpected end of string");default:throw SyntaxError(`Unrecognized parameter type. Found type '${a.type}'`)}a=i.getNextToken()}if(null!==this._handler){let e=this._handler,i=o.METHODNAME[r];("a"===r||"A"===r)&&(l[3]=0!==l[3],l[4]=0!==l[4]),null!==e&&"function"==typeof e[i]&&e[i](...l)}switch(r){case"M":r="L";break;case"m":r="l";break;case"Z":case"z":r="BOP"}if(a===s)throw SyntaxError(`Parser stalled on '${a.text}'`);s=a}null!==this._handler&&"function"==typeof this._handler.endParse&&this._handler.endParse()}setHandler(e){this._handler=e}}o.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},o.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var l=r(417293);let h=2*Math.PI;function u(e,i,r,s,n,a,o){let u=Math.cos(n=n*Math.PI/180),c=Math.sin(n),d=e.subtract(i).multiply(.5),p=d.x*u+d.y*c,f=-(d.x*c)+d.y*u,g=p*p,y=f*f,x=g/((r=Math.abs(r))*r)+y/((s=Math.abs(s))*s);if(x>1){let e=Math.sqrt(x);r*=e,s*=e}let m=r*r,b=s*s,v=m*y,w=b*g,T=(m*b-v-w)/(v+w);1e-6>Math.abs(T)&&(T=0);let C=Math.sqrt(T);a===o&&(C=-C);let E=e.add(i).multiply(.5),_=C*r*f/s,A=-(C*s)*p/r,M=(p-_)/r,R=(p+_)/r,P=(f-A)/s,S=(f+A)/s,I=new l.Z(1,0).angleBetween(new l.Z(M,P)),N=new l.Z(M,P).angleBetween(new l.Z(-R,-S));return!1===o&&(N-=h),[_*u-A*c+E.x,_*c+A*u+E.y,r,s,I,I+N]}let c=.5*Math.PI,d=new o;function p(e,i){let r=[];for(let[s,n]of e){let e=null;if("Point2D"===n)e=g(s,i);else if("Number"===n)e=f(s,i);else if("Array<Point2D>"===n||"Point2D[]"===n){let r=[];for(;i.length>0;)r.push(g(s,i));r.length>0&&(e=r)}else if("Optional<Number>"===n||"Number?"===n)null===(e=f(s,i))&&(e=void 0);else throw TypeError(`Unrecognized value type: ${n}`);if(null!==e)r.push(e);else throw TypeError(`Unable to extract value for ${s}`)}return r}function f(e,i){let r=null;if(i.length>0){let s=i[0],n=typeof s;if("number"===n)return i.shift();if("object"===n){for(let i of e)if(i in s&&"number"==typeof s[i]){r=s[i];break}}}return r}function g(e,i){let r=null;if(i.length>0){let n=i[0],a=typeof n;if("number"===a){if(i.length>1){let e=i.shift(),n=i.shift();r=new s.Z(e,n)}}else if(Array.isArray(n)&&n.length>1)if(2===n.length){let[e,n]=i.shift();r=new s.Z(e,n)}else throw TypeError(`Unhandled array of length ${n.length}`);else if("object"===a){if("x"in n&&"y"in n)r=new s.Z(n.x,n.y),i.shift();else for(let i of e)if(Array.isArray(i)){if(i.every(e=>e in n)){r=new s.Z(n[i[0]],n[i[1]]);break}}else if(i in n){r=g([],[n[i]]);break}}}return r}class y{constructor(e,i){this.name=e,this.args=i}static arc(...e){let i=p([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"],[["startRadians"],"Number"],[["endRadians"],"Number"]],e);return new y(y.ARC,i)}static quadraticBezier(...e){let i=p([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"]],e);return new y(y.QUADRATIC_BEZIER,i)}static cubicBezier(...e){let i=p([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"],[["p4",["p4x","p4y"]],"Point2D"]],e);return new y(y.CUBIC_BEZIER,i)}static circle(...e){let i=p([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radius","r"],"Number"]],e);return new y(y.CIRCLE,i)}static ellipse(...e){let i=p([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"]],e);return new y(y.ELLIPSE,i)}static line(...e){let i=p([[["p1",["p1x","p1y"],["x1","y1"]],"Point2D"],[["p2",["p2x","p2y"],["x2","y2"]],"Point2D"]],e);return new y(y.LINE,i)}static path(...e){return d.parseData(e[0]),new y(y.PATH,x.shapes)}static polygon(...e){let i=p([[[],"Array<Point2D>"]],1===e.length&&Array.isArray(e[0])?e[0]:e);return new y(y.POLYGON,i)}static polyline(...e){let i=p([[[],"Array<Point2D>"]],1===e.length&&Array.isArray(e[0])?e[0]:e);return new y(y.POLYLINE,i)}static rectangle(...e){let i=p([[["topLeft",["x","y"],["left","top"]],"Point2D"],[["size",["width","height"],["w","h"]],"Point2D"],[["radiusX","rx"],"Optional<Number>"],[["radiusY","ry"],"Optional<Number>"]],e),r=i[0],n=i[1];i[1]=new s.Z(r.x+n.x,r.y+n.y);let a=new y(y.RECTANGLE,i),o=a.args.pop(),l=a.args.pop();if(o=void 0===o?0:o,0===(l=void 0===l?0:l)&&0===o)return a;let{x:h,y:u}=a.args[0],{x:d,y:f}=a.args[1],g=d-h,x=f-u;0===l&&(l=o),0===o&&(o=l),l>.5*g&&(l=.5*g),o>.5*x&&(o=.5*x);let m=h+l,b=u+o,v=d-l,w=f-o,T=[y.arc(m,b,l,o,2*c,3*c),y.line(m,u,v,u),y.arc(v,b,l,o,3*c,4*c),y.line(d,b,d,w),y.arc(v,w,l,o,0,c),y.line(v,f,m,f),y.arc(m,w,l,o,c,2*c),y.line(h,w,h,b)];return new y(y.PATH,T)}}y.ARC="Arc",y.QUADRATIC_BEZIER="Bezier2",y.CUBIC_BEZIER="Bezier3",y.CIRCLE="Circle",y.ELLIPSE="Ellipse",y.LINE="Line",y.PATH="Path",y.POLYGON="Polygon",y.POLYLINE="Polyline",y.RECTANGLE="Rectangle";let x=new class{constructor(e){this.shapeCreator=e,this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}beginParse(){this.shapes=[],this.firstX=null,this.firstY=null,this.lastX=null,this.lastY=null,this.lastCommand=null}addShape(e){this.shapes.push(e)}arcAbs(e,i,r,n,a,o,l){if(0===e||0===i)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,o,l));else{let h=u(new s.Z(this.lastX,this.lastY),new s.Z(o,l),e,i,r,n,a);this.addShape(this.shapeCreator.arc(...h))}this.lastCommand="A",this.lastX=o,this.lastY=l}arcRel(e,i,r,n,a,o,l){if(0===e||0===i)this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+o,this.lastY+l));else{let h=u(new s.Z(this.lastX,this.lastY),new s.Z(this.lastX+o,this.lastY+l),e,i,r,n,a);this.addShape(this.shapeCreator.arc(...h))}this.lastCommand="a",this.lastX+=o,this.lastY+=l}curvetoCubicAbs(e,i,r,s,n,a){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,e,i,r,s,n,a)),this.lastX=n,this.lastY=a,this.lastCommand="C"}curvetoCubicRel(e,i,r,s,n,a){this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,this.lastX+e,this.lastY+i,this.lastX+r,this.lastY+s,this.lastX+n,this.lastY+a)),this.lastX+=n,this.lastY+=a,this.lastCommand="c"}linetoHorizontalAbs(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,e,this.lastY)),this.lastX=e,this.lastCommand="H"}linetoHorizontalRel(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+e,this.lastY)),this.lastX+=e,this.lastCommand="h"}linetoAbs(e,i){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,e,i)),this.lastX=e,this.lastY=i,this.lastCommand="L"}linetoRel(e,i){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX+e,this.lastY+i)),this.lastX+=e,this.lastY+=i,this.lastCommand="l"}movetoAbs(e,i){this.firstX=e,this.firstY=i,this.lastX=e,this.lastY=i,this.lastCommand="M"}movetoRel(e,i){this.firstX+=e,this.firstY+=i,this.lastX+=e,this.lastY+=i,this.lastCommand="m"}curvetoQuadraticAbs(e,i,r,s){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,e,i,r,s)),this.lastX=r,this.lastY=s,this.lastCommand="Q"}curvetoQuadraticRel(e,i,r,s){this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,this.lastX+e,this.lastY+i,this.lastX+r,this.lastY+s)),this.lastX+=r,this.lastY+=s,this.lastCommand="q"}curvetoCubicSmoothAbs(e,i,r,s){let n,a;if(this.lastCommand.match(/^[SsCc]$/)){let e=this.shapes[this.shapes.length-1].args[2];n=2*this.lastX-e.x,a=2*this.lastY-e.y}else n=this.lastX,a=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,n,a,e,i,r,s)),this.lastX=r,this.lastY=s,this.lastCommand="S"}curvetoCubicSmoothRel(e,i,r,s){let n,a;if(this.lastCommand.match(/^[SsCc]$/)){let e=this.shapes[this.shapes.length-1].args[2];n=2*this.lastX-e.x,a=2*this.lastY-e.y}else n=this.lastX,a=this.lastY;this.addShape(this.shapeCreator.cubicBezier(this.lastX,this.lastY,n,a,this.lastX+e,this.lastY+i,this.lastX+r,this.lastY+s)),this.lastX+=r,this.lastY+=s,this.lastCommand="s"}curvetoQuadraticSmoothAbs(e,i){let r,s;if(this.lastCommand.match(/^[QqTt]$/)){let e=this.shapes[this.shapes.length-1].args[1];r=2*this.lastX-e.x,s=2*this.lastY-e.y}else r=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,r,s,e,i)),this.lastX=e,this.lastY=i,this.lastCommand="T"}curvetoQuadraticSmoothRel(e,i){let r,s;if(this.lastCommand.match(/^[QqTt]$/)){let e=this.shapes[this.shapes.length-1].args[1];r=2*this.lastX-e.x,s=2*this.lastY-e.y}else r=this.lastX,s=this.lastY;this.addShape(this.shapeCreator.quadraticBezier(this.lastX,this.lastY,r,s,this.lastX+e,this.lastY+i)),this.lastX+=e,this.lastY+=i,this.lastCommand="t"}linetoVerticalAbs(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,e)),this.lastY=e,this.lastCommand="V"}linetoVerticalRel(e){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.lastX,this.lastY+e)),this.lastY+=e,this.lastCommand="v"}closePath(){this.addShape(this.shapeCreator.line(this.lastX,this.lastY,this.firstX,this.firstY)),this.lastX=this.firstX,this.lastY=this.firstY,this.lastCommand="z"}}(y);d.setHandler(x)},689274:function(e,i,r){"use strict";r.d(i,{s:()=>c});var s,n,a=r(189799),o=r(224833),l=r(249238),h=r(173656),u=l.p.exports;function c(){if(n)return o.p.exports;n=1;for(var e=(s||(s=1,(function(){var e,i,r,s;"undefined"!=typeof performance&&null!==performance&&performance.now?l.p.exports=function(){return performance.now()}:null!=h&&h.hrtime?(l.p.exports=function(){return(e()-s)/1e6},i=h.hrtime,s=(e=function(){var e;return 1e9*(e=i())[0]+e[1]})()-1e9*h.uptime()):Date.now?(l.p.exports=function(){return Date.now()-r},r=Date.now()):(l.p.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(u)),l.p.exports),i="undefined"==typeof window?a.t:window,r=["moz","webkit"],c="AnimationFrame",d=i["request"+c],p=i["cancel"+c]||i["cancelRequest"+c],f=0;!d&&f<r.length;f++)d=i[r[f]+"Request"+c],p=i[r[f]+"Cancel"+c]||i[r[f]+"CancelRequest"+c];if(!d||!p){var g=0,y=0,x=[],m=1e3/60;d=function(i){if(0===x.length){var r=e(),s=Math.max(0,m-(r-g));g=s+r,setTimeout(function(){var e=x.slice(0);x.length=0;for(var i=0;i<e.length;i++)if(!e[i].cancelled)try{e[i].callback(g)}catch(e){setTimeout(function(){throw e},0)}},Math.round(s))}return x.push({handle:++y,callback:i,cancelled:!1}),y},p=function(e){for(var i=0;i<x.length;i++)x[i].handle===e&&(x[i].cancelled=!0)}}return o.p.exports=function(e){return d.call(i,e)},o.p.exports.cancel=function(){p.apply(i,arguments)},o.p.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=d,e.cancelAnimationFrame=p},o.p.exports}},156344:function(e,i,r){"use strict";function s(e,i,r){var s=e[i];e[i]=e[r],e[r]=s}function n(e,i){return e<i?-1:+(e>i)}r.d(i,{Z:()=>a});class a{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let i=this.data,r=[];if(!g(e,i))return r;let s=this.toBBox,n=[];for(;i;){for(let a=0;a<i.children.length;a++){let o=i.children[a],l=i.leaf?s(o):o;g(e,l)&&(i.leaf?r.push(o):f(e,l)?this._all(o,r):n.push(o))}i=n.pop()}return r}collides(e){let i=this.data;if(!g(e,i))return!1;let r=[];for(;i;){for(let s=0;s<i.children.length;s++){let n=i.children[s],a=i.leaf?this.toBBox(n):n;if(g(e,a)){if(i.leaf||f(e,a))return!0;r.push(n)}}i=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){let e=this.data;this.data=i,i=e}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=y([]),this}remove(e,i){let r,s,n;if(!e)return this;let a=this.data,o=this.toBBox(e),l=[],h=[];for(;a||l.length;){if(a||(a=l.pop(),s=l[l.length-1],r=h.pop(),n=!0),a.leaf){let r=function(e,i,r){if(!r)return i.indexOf(e);for(let s=0;s<i.length;s++)if(r(e,i[s]))return s;return -1}(e,a.children,i);if(-1!==r){a.children.splice(r,1),l.push(a),this._condense(l);break}}!n&&!a.leaf&&f(a,o)?(l.push(a),h.push(r),r=0,s=a,a=a.children[0]):s?(r++,a=s.children[r],n=!1):a=null}return this}toBBox(e){return e}compareMinX(e,i){return e.minX-i.minX}compareMinY(e,i){return e.minY-i.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,i){let r=[];for(;e;)e.leaf?i.push(...e.children):r.push(...e.children),e=r.pop();return i}_build(e,i,r,s){let n,a=r-i+1,l=this._maxEntries;if(a<=l)return o(n=y(e.slice(i,r+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,s-1))),(n=y([])).leaf=!1,n.height=s;let h=Math.ceil(a/l),u=h*Math.ceil(Math.sqrt(l));x(e,i,r,u,this.compareMinX);for(let a=i;a<=r;a+=u){let i=Math.min(a+u-1,r);x(e,a,i,h,this.compareMinY);for(let r=a;r<=i;r+=h){let a=Math.min(r+h-1,i);n.children.push(this._build(e,r,a,s-1))}}return o(n,this.toBBox),n}_chooseSubtree(e,i,r,s){for(;;){let o;if(s.push(i),i.leaf||s.length-1===r)break;let l=1/0,h=1/0;for(let r=0;r<i.children.length;r++){var n,a;let s=i.children[r],u=d(s),c=(n=e,(Math.max((a=s).maxX,n.maxX)-Math.min(a.minX,n.minX))*(Math.max(a.maxY,n.maxY)-Math.min(a.minY,n.minY))-u);c<h?(h=c,l=u<l?u:l,o=s):c===h&&u<l&&(l=u,o=s)}i=o||i.children[0]}return i}_insert(e,i,r){let s=r?e:this.toBBox(e),n=[],a=this._chooseSubtree(s,this.data,i,n);for(a.children.push(e),h(a,s);i>=0;)if(n[i].children.length>this._maxEntries)this._split(n,i),i--;else break;this._adjustParentBBoxes(s,n,i)}_split(e,i){let r=e[i],s=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,s);let a=this._chooseSplitIndex(r,n,s),l=y(r.children.splice(a,r.children.length-a));l.height=r.height,l.leaf=r.leaf,o(r,this.toBBox),o(l,this.toBBox),i?e[i-1].children.push(l):this._splitRoot(r,l)}_splitRoot(e,i){this.data=y([e,i]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)}_chooseSplitIndex(e,i,r){let s,n=1/0,a=1/0;for(let o=i;o<=r-i;o++){let i=l(e,0,o,this.toBBox),h=l(e,o,r,this.toBBox),u=function(e,i){let r=Math.max(e.minX,i.minX),s=Math.max(e.minY,i.minY);return Math.max(0,Math.min(e.maxX,i.maxX)-r)*Math.max(0,Math.min(e.maxY,i.maxY)-s)}(i,h),c=d(i)+d(h);u<n?(n=u,s=o,a=c<a?c:a):u===n&&c<a&&(a=c,s=o)}return s||r-i}_chooseSplitAxis(e,i,r){let s=e.leaf?this.compareMinX:u,n=e.leaf?this.compareMinY:c;this._allDistMargin(e,i,r,s)<this._allDistMargin(e,i,r,n)&&e.children.sort(s)}_allDistMargin(e,i,r,s){e.children.sort(s);let n=this.toBBox,a=l(e,0,i,n),o=l(e,r-i,r,n),u=p(a)+p(o);for(let s=i;s<r-i;s++){let i=e.children[s];h(a,e.leaf?n(i):i),u+=p(a)}for(let s=r-i-1;s>=i;s--){let i=e.children[s];h(o,e.leaf?n(i):i),u+=p(o)}return u}_adjustParentBBoxes(e,i,r){for(let s=r;s>=0;s--)h(i[s],e)}_condense(e){for(let i=e.length-1,r;i>=0;i--)0===e[i].children.length?i>0?(r=e[i-1].children).splice(r.indexOf(e[i]),1):this.clear():o(e[i],this.toBBox)}}function o(e,i){l(e,0,e.children.length,i,e)}function l(e,i,r,s,n){n||(n=y(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let a=i;a<r;a++){let i=e.children[a];h(n,e.leaf?s(i):i)}return n}function h(e,i){return e.minX=Math.min(e.minX,i.minX),e.minY=Math.min(e.minY,i.minY),e.maxX=Math.max(e.maxX,i.maxX),e.maxY=Math.max(e.maxY,i.maxY),e}function u(e,i){return e.minX-i.minX}function c(e,i){return e.minY-i.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,i){return e.minX<=i.minX&&e.minY<=i.minY&&i.maxX<=e.maxX&&i.maxY<=e.maxY}function g(e,i){return i.minX<=e.maxX&&i.minY<=e.maxY&&i.maxX>=e.minX&&i.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(e,i,r,a,o){let l=[i,r];for(;l.length;){if((r=l.pop())-(i=l.pop())<=a)continue;let h=i+Math.ceil((r-i)/a/2)*a;(function e(i,r,n,a,o){for(;a>n;){if(a-n>600){var l=a-n+1,h=r-n+1,u=Math.log(l),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(l-c)/l)*(h-l/2<0?-1:1),p=Math.max(n,Math.floor(r-h*c/l+d)),f=Math.min(a,Math.floor(r+(l-h)*c/l+d));e(i,r,p,f,o)}var g=i[r],y=n,x=a;for(s(i,n,r),o(i[a],g)>0&&s(i,n,a);y<x;){for(s(i,y,x),y++,x--;0>o(i[y],g);)y++;for(;o(i[x],g)>0;)x--}0===o(i[n],g)?s(i,n,x):s(i,++x,a),x<=r&&(n=x+1),r<=x&&(a=x-1)}})(e,h,i||0,r||e.length-1,o||n),l.push(i,h,h,r)}}},880399:function(e,i,r){"use strict";var s,n;function a(){return n?s:(n=1,s=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6));var i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=i[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],s=0;s<r.length;s++){var n=r[s].re,a=r[s].process,o=n.exec(e);if(o){var l=a(o);this.r=l[0],this.g=l[1],this.b=l[2],l.length>3&&(this.alpha=l[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+e+i+r},this.getHelpXML=function(){for(var e=[],s=0;s<r.length;s++)for(var n=r[s].example,a=0;a<n.length;a++)e[e.length]=n[a];for(var o in i)e[e.length]=o;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var s=0;s<e.length;s++)try{var h=document.createElement("li"),u=new RGBColor(e[s]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var d=document.createTextNode(" "+e[s]+" -> "+u.toRGB()+" -> "+u.toHex());h.appendChild(c),h.appendChild(d),l.appendChild(h)}catch(e){}return l}})}r.d(i,{s:()=>a})},304780:function(e,i,r){"use strict";var s,n,a,o,l,h;function u(){if(h)return l;h=1;let e=function(){if(n)return s;function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function i(i,r){this.source=i,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new e,this.dtree=new e}n=1;var r,a=new e,o=new e,l=new Uint8Array(30),h=new Uint16Array(30),u=new Uint8Array(30),c=new Uint16Array(30),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=new e,f=new Uint8Array(320);function g(e,i,r,s){var n,a;for(n=0;n<r;++n)e[n]=0;for(n=0;n<30-r;++n)e[n+r]=n/r|0;for(a=s,n=0;n<30;++n)i[n]=a,a+=1<<e[n]}var y=new Uint16Array(16);function x(e,i,r,s){var n,a;for(n=0;n<16;++n)e.table[n]=0;for(n=0;n<s;++n)e.table[i[r+n]]++;for(a=0,e.table[0]=0,n=0;n<16;++n)y[n]=a,a+=e.table[n];for(n=0;n<s;++n)i[r+n]&&(e.trans[y[i[r+n]]++]=n)}function m(e,i,r){if(!i)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var s=e.tag&65535>>>16-i;return e.tag>>>=i,e.bitcount-=i,s+r}function b(e,i){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,s=0,n=0,a=e.tag;do s=2*s+(1&a),a>>>=1,++n,r+=i.table[n],s-=i.table[n];while(s>=0);return e.tag=a,e.bitcount-=n,i.trans[r+s]}function v(e,i,r){for(;;){var s,n,a,o,d=b(e,i);if(256===d)return 0;if(d<256)e.dest[e.destLen++]=d;else for(d-=257,s=m(e,l[d],h[d]),n=b(e,r),o=a=e.destLen-m(e,u[n],c[n]);o<a+s;++o)e.dest[e.destLen++]=e.dest[o]}}for(r=0;r<7;++r)a.table[r]=0;for(r=0,a.table[7]=24,a.table[8]=152,a.table[9]=112;r<24;++r)a.trans[r]=256+r;for(r=0;r<144;++r)a.trans[24+r]=r;for(r=0;r<8;++r)a.trans[168+r]=280+r;for(r=0;r<112;++r)a.trans[176+r]=144+r;for(r=0;r<5;++r)o.table[r]=0;for(r=0,o.table[5]=32;r<32;++r)o.trans[r]=r;return g(l,h,4,3),g(u,c,2,1),l[28]=0,h[28]=258,s=function(e,r){var s,n,l=new i(e,r);do{switch(s=function(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var i=1&e.tag;return e.tag>>>=1,i}(l),m(l,2,0)){case 0:n=function(e){for(var i,r,s;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((i=256*(i=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return -3;for(e.sourceIndex+=4,s=i;s;--s)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}(l);break;case 1:n=v(l,a,o);break;case 2:!function(e,i,r){for(o=0,s=m(e,5,257),n=m(e,5,1),a=m(e,4,4);o<19;++o)f[o]=0;for(o=0;o<a;++o){var s,n,a,o,l,h,u=m(e,3,0);f[d[o]]=u}for(x(p,f,0,19),l=0;l<s+n;){var c=b(e,p);switch(c){case 16:var g=f[l-1];for(h=m(e,2,3);h;--h)f[l++]=g;break;case 17:for(h=m(e,3,3);h;--h)f[l++]=0;break;case 18:for(h=m(e,7,11);h;--h)f[l++]=0;break;default:f[l++]=c}}x(i,f,0,s),x(r,f,s,n)}(l,l.ltree,l.dtree),n=v(l,l.ltree,l.dtree);break;default:n=-3}if(0!==n)throw Error("Data error")}while(!s);if(l.destLen<l.dest.length)if("function"==typeof l.dest.slice)return l.dest.slice(0,l.destLen);else return l.dest.subarray(0,l.destLen);return l.dest}}(),{swap32LE:i}=function(){if(o)return a;o=1;let e=18===new Uint8Array(new Uint32Array([0x12345678]).buffer)[0],i=(e,i,r)=>{let s=e[i];e[i]=e[r],e[r]=s};return a={swap32LE:r=>{e&&(e=>{let r=e.length;for(let s=0;s<r;s+=4)i(e,s,s+3),i(e,s+1,s+2)})(r)}}}(),r=2112;return l=class{constructor(r){let s="function"==typeof r.readUInt32BE&&"function"==typeof r.slice;if(s||r instanceof Uint8Array){let n;if(s)this.highStart=r.readUInt32LE(0),this.errorValue=r.readUInt32LE(4),n=r.readUInt32LE(8),r=r.slice(12);else{let e=new DataView(r.buffer);this.highStart=e.getUint32(0,!0),this.errorValue=e.getUint32(4,!0),n=e.getUint32(8,!0),r=r.subarray(12)}r=e(r,new Uint8Array(n)),i(r=e(r,new Uint8Array(n))),this.data=new Uint32Array(r.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=r)}get(e){let i;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(i=(this.data[e>>5]<<2)+(31&e),this.data[i]):e<=65535?(i=(this.data[2048+(e-55296>>5)]<<2)+(31&e),this.data[i]):e<this.highStart?(i=this.data[r-32+(e>>11)],i=((i=this.data[i+(e>>5&63)])<<2)+(31&e),this.data[i]):this.data[this.data.length-4]}}}r.d(i,{s:()=>u})},539020:function(e,i,r){"use strict";r(361173)},818856:function(e,i,r){"use strict";r(808687),r(976780)},397172:function(e,i,r){"use strict";r(515599),r(489597)},829836:function(e,i,r){"use strict";r.d(i,{N:()=>s});class s{plugins=[];start(){for(let e of this.plugins)e.start()}stop(){for(let e of this.plugins)e.stop()}getPlugin(e){let i=function(e,i){for(let r of e)if(r instanceof i)return r;return null}(this.plugins,e);return i||(console.error("Plugin not registed!"),null)}registerPlugin(e){this.plugins.push(e)}}},276890:function(e,i,r){"use strict";r(255078),r(78485)},255078:function(e,i,r){"use strict";r.d(i,{I:()=>n});var s=r(805433);let n={scroll(e,i,r){let n=r.getViewPortBounds();r.translation(-e,-i);let a=r.getViewPortBounds();s.G.getBounds([n,a]);let o=r.canvas.getContext("2d"),{a:l,b:h,c:u,d:c,e:d,f:p}=r.globalTransform;o.setTransform(l,h,u,c,d,p)},zoomScale(e,i,r,s){let a=2*Math.abs(e)/100;n.zoomScaleV2(e>0?1-a:1+a,i,r,s)},zoomScaleV2(e,i,r,s){i.scale(e,e,s);let n=i.canvas.getContext("2d"),{a,b:o,c:l,d:h,e:u,f:c}=i.globalTransform;n.setTransform(a,o,l,h,u,c);let d=i.getScale();r.afterScale(d)}}},558040:function(e,i,r){"use strict";r(583977),r(805433),r(255078),r(78485)},958926:function(e,i,r){"use strict";r.d(i,{D:()=>a});var s=r(49104);let n={padding:[24,24,24,24]};class a{resizeObserver=null;auxiliaryResizeObserver=null;isFirstResize=!0;isAuxFirstResize=!0;rezoom=!0;constructor(e){this.app=e}start(){let{application:e,auxiliaryApplication:i}=this.app;this.resizeObserver=this.getResizeObserver(e),this.resizeObserver.observe(e.gmlRender.canvas),this.auxiliaryResizeObserver=this.getResizeObserver(i),this.auxiliaryResizeObserver.observe(i.gmlRender.canvas)}stop(){let{application:e,auxiliaryApplication:i}=this.app;this.resizeObserver?.unobserve(e.gmlRender.canvas),this.auxiliaryResizeObserver?.unobserve(i.gmlRender.canvas)}registerAppResizeCallback(e){this.onAppResizeCallback=e}unregisterAppResizeCallback(){this.onAppResizeCallback=void 0}setRezoom(e){this.rezoom=e}notifyApplicationResize=e=>{let i=e.gmlRender.canvas;i&&e===this.app.application&&this.onAppResizeCallback?.({width:i.width,height:i.height})};onResize=e=>{if(e===this.app.application&&this.isFirstResize){this.isFirstResize=!1,this.notifyApplicationResize(e);return}if(e===this.app.auxiliaryApplication&&this.isAuxFirstResize){this.isAuxFirstResize=!1;return}this.resizeCanvas(e),this.notifyApplicationResize(e),e.gmlRender.applyTransformToCtx(),this.rezoom?this.app.renderManager.zoomAndSynDraw(s.c.ZoomToFit,n):(this.app.renderManager.contentDirectDraw(),this.app.auxiliaryManager.redraw())};resizeCanvas=e=>{let i=e.gmlRender.canvas;if(!i)return;let r=window.devicePixelRatio;i.width=r*i.clientWidth,i.height=r*i.clientHeight};getResizeObserver=e=>new ResizeObserver(i=>{window.requestAnimationFrame(()=>{Array.isArray(i)&&i.length&&i.forEach(({contentRect:{width:i,height:r}})=>{0!==i&&0!==r&&this.onResize(e)})})})}},733999:function(){"use strict";var e;function i(e,r,s,n,a=0){let o,l,h;if("number"==typeof a&&(a=[a]),1===a.length&&0===a[0])return this.rect(e,r,s,n);let u=Math.min(s,n)/2,c=o=l=h=Math.min(u,a[0]);2===a.length&&(o=h=Math.min(u,a[1])),3===a.length&&(o=h=Math.min(u,a[1]),l=Math.min(u,a[2])),4===a.length&&(o=Math.min(u,a[1]),l=Math.min(u,a[2]),h=Math.min(u,a[3])),this.moveTo(e,r+n-h),this.arcTo(e,r,e+c,r,c),this.arcTo(e+s,r,e+s,r+o,o),this.arcTo(e+s,r+n,e+s-l,r+n,l),this.arcTo(e,r+n,e,r+n-h,h),this.moveTo(e,r)}!function(e){if(!e?.CanvasRenderingContext2D)return;let{CanvasRenderingContext2D:r,Path2D:s}=e;r&&!r.prototype.roundRect&&(r.prototype.roundRect=i),s&&!s.prototype.roundRect&&(s.prototype.roundRect=i)}(window),e=window,e?.CanvasRenderingContext2D&&e.CanvasRenderingContext2D.prototype&&"function"!=typeof e.CanvasRenderingContext2D.prototype.reset&&(e.CanvasRenderingContext2D.prototype.reset=function(){this?.clearRect(0,0,this?.canvas?.width||1024,this?.canvas?.height||1024),this?.setTransform(1,0,0,1,0,0)})},380647:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(180960),r.b).href},706898:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(343857),r.b).href},306338:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(59556),r.b).href},432670:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(263867),r.b).href},711913:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(110896),r.b).href},513425:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(712728),r.b).href},98460:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(921017),r.b).href},707490:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(372603),r.b).href},725585:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(34165),r.b).href},837227:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(680746),r.b).href},557071:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(289067),r.b).href},450577:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(755111),r.b).href},991320:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(83),r.b).href},207697:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(680538),r.b).href},645375:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(943945),r.b).href},593152:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(859194),r.b).href},422017:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(70025),r.b).href},81211:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(687820),r.b).href},837525:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(799192),r.b).href},656448:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(742878),r.b).href},535259:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(262441),r.b).href},204801:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(302498),r.b).href},809852:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(786355),r.b).href},979133:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(527371),r.b).href},381380:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(785627),r.b).href},864231:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(75390),r.b).href},309783:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(392603),r.b).href},165796:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(210972),r.b).href},241474:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(539867),r.b).href},138408:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(844568),r.b).href},465365:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(637277),r.b).href},325320:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(876274),r.b).href},492071:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(385812),r.b).href},228669:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(703616),r.b).href},691375:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(136967),r.b).href},549296:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(79840),r.b).href},383574:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(329348),r.b).href},658557:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(884127),r.b).href},964698:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(902749),r.b).href},146011:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(110063),r.b).href},716893:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(544629),r.b).href},405349:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(511188),r.b).href},516896:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(209864),r.b).href},305717:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(274743),r.b).href},245190:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(997653),r.b).href},403879:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(467047),r.b).href},985869:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(759495),r.b).href},518216:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(532625),r.b).href},804898:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(446690),r.b).href},838013:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(652039),r.b).href},614634:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(817546),r.b).href},466918:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(549784),r.b).href},309982:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(245762),r.b).href},270369:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(559504),r.b).href},35387:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(21211),r.b).href},733624:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(31653),r.b).href},513937:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(471897),r.b).href},853188:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(71523),r.b).href},509085:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(776080),r.b).href},89421:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(547930),r.b).href},256268:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(652680),r.b).href},94256:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(289266),r.b).href},606414:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(727468),r.b).href},448740:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(558054),r.b).href},726437:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(946871),r.b).href},788121:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(815125),r.b).href},698404:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(295442),r.b).href},929083:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(799758),r.b).href},971933:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(920600),r.b).href},957894:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(283636),r.b).href},706829:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(3594),r.b).href},251535:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(507750),r.b).href},284626:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(668832),r.b).href},824038:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(264731),r.b).href},874323:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(377360),r.b).href},795324:function(e,i,r){"use strict";r.d(i,{Z:()=>s});var s=new URL(r(349411),r.b).href},373669:function(e,i,r){"use strict";var s,n;function a(e=s.Board){return{mode:e,backgroundColor:"#FFFFFF",seq:0,savedSeq:0}}r.d(i,{o:()=>a,y:()=>s}),(n=s||(s={})).Document="Document",n.Board="Board",n.Slide="Slide"},184318:function(e,i,r){"use strict";r.d(i,{G:()=>s});class s{prev=null;next=null;data=null;constructor(e){this.data=e}breakOff(){this.prev=null,this.next=null}toString(){return this.data?this.data.toString():""}add(e){let{next:i}=this;this.next=e,e.prev=this,e.next=i,i&&(i.prev=e)}pushAdd(e){this.next=e,e.prev=this}removeSelf(){let{next:e}=this,{prev:i}=this;this.next=null,this.prev=null,e.prev=i,i.next=e}getIndex(){let e=this.prev,i=0;for(;e&&e.data;)i++,e=e.prev;return i}static generateLink(){let e=new s(null),i=new s(null);return e.add(i),e}}},652260:function(e,i,r){"use strict";r.d(i,{t:()=>s});class s{static head(){return new s(0,0,-1)}constructor(e,i,r){this.paragraphIndex=e,this.lineIndex=i,this.charIndex=r}clone(){return new s(this.paragraphIndex,this.lineIndex,this.charIndex)}equal(e){return this.paragraphIndex===e.paragraphIndex&&this.lineIndex===e.lineIndex&&this.charIndex===e.charIndex}compare(e){return this.paragraphIndex>e.paragraphIndex||!(this.paragraphIndex<e.paragraphIndex)&&(this.lineIndex>e.lineIndex||!(this.lineIndex<e.lineIndex)&&(this.charIndex>e.charIndex||!(this.charIndex<e.charIndex)))}}},479047:function(e,i,r){"use strict";r.d(i,{H:()=>s,w:()=>n});let s="Noto Sans SC",n=5},3406:function(e,i,r){"use strict";r.d(i,{M:()=>n});var s=r(652260);class n{static cursorMoveToCharIndex(e,i){let r=0,n=e.paragraphs;for(let e=0;e<n.length;e++){let a=n[e];for(let n=0;n<a.lines.length;n++){let o=a.lines[n];for(let a=0;a<o.chars.length;a++){if(r===i)return new s.t(e,n,a);r++}}}return new s.t(0,0,-1)}static cursorMovePrev(e,i){let{paragraphIndex:r,lineIndex:n,charIndex:a}=i;if(a>0)return a--,new s.t(r,n,a);if(n>0){let i=e.paragraphs[r];return n--,a=i.lines[n].chars.length-1,new s.t(r,n,a)}if(r>0){if(-1===a){r--;let i=e.paragraphs[r];0===i.lines.length?(n=-1,a=-1):(n=i.lines.length-1,a=i.lines[n].chars.length-2)}else a=-1;return new s.t(r,n,a)}return 0===a&&(a=-1),new s.t(r,n,a)}static cursorMoveNext(e,i){let{paragraphIndex:r,lineIndex:n,charIndex:a}=i,o=e.paragraphs[r];if(0===o.lines.length)return r<e.paragraphs.length-1&&(r++,n=0===e.paragraphs[r].lines.length?-1:0,a=-1),new s.t(r,n,a);let l=o.lines[n].isTail(a),h=o.isTail(n,a),u=e.isTail(r,n,a);if(!l)return a++,new s.t(r,n,a);if(l&&!h)return a=0,n++,new s.t(r,n,a);if(h&&!u){if(r++,0===e.paragraphs[r].lines.length)return n=-1,a=-1,new s.t(r,n,a);n=0,a=-1}return new s.t(r,n,a)}static cursorMoveUp(e,i){let{paragraphIndex:r,lineIndex:n,charIndex:a}=i,{point:o}=e.getTextPosition(i);if(n>0)n--,a=this.computeCharIndex(o,e,r,n,a);else if(r>0){r--;let i=e.paragraphs[r];n=i.lines.length>0?i.lines.length-1:-1,a=this.computeCharIndex(o,e,r,n,a)}return new s.t(r,n,a)}static cursorMoveDown(e,i){let{paragraphIndex:r,lineIndex:n,charIndex:a}=i,{point:o}=e.getTextPosition(i);return n<e.paragraphs[r].lines.length-1?(n++,a=this.computeCharIndex(o,e,r,n,a)):r<e.paragraphs.length-1&&(r++,n=e.paragraphs[r].lines.length>0?0:-1,a=this.computeCharIndex(o,e,r,n,a)),new s.t(r,n,a)}static computeCharIndex(e,i,r,s,n){let a=i.paragraphs[r];if(0===a.lines.length)return -1;let o=a.lines[s].detectCursor(e.x-i.baseProps.x-a.x);return o<-1?n:o}}},578931:function(e,i,r){"use strict";r.d(i,{$:()=>m});var s=r(797615);class n{renderDom=null;inputDom=null;renderCursorHeight=14;auxiliaryApp=null;isFocusing=!1;init(e,i,r){this.inputDom=e,this.renderDom=r,this.auxiliaryApp=i}focus(e){setTimeout(()=>{this.inputDom.focus()},30),this.isFocusing=!0,this.renderCursorHeight=e,document.body.style.cursor="text"}blur(){this.isFocusing=!1,this.inputDom.blur(),this.renderDom.style.display="none",document.body.style.cursor="default"}updateCursor(e,i,r,s=0){let n=i.globalTransform.crossPoint(e),a=i.canvas.getBoundingClientRect(),o=window.devicePixelRatio,l=n.x/o,h=n.y/o;l>a.width&&(l=0),h>a.height&&(h=0),this.renderDom.style.left=`${l}px`,this.renderDom.style.top=`${h}px`,this.renderDom.style.display="unset",this.renderDom.style.height=`${r*i.getScale()}px`,this.renderDom.style.transform=`rotate(${s}deg)`,this.renderDom.style.transformOrigin="top left"}}var a=r(889171),o=r(215702);class l{isBlurHandlerRunning=!1;blurHandlers=new Map;update(e){this.node=e.node,this.inputableText=e.inputableText,this.cursorPos=e.cursorPos}registerBlurHandler(e){if(this.isBlurHandlerRunning)return;let i=(0,o.Z)();return this.blurHandlers.set(i,e),i}removeBlurHandler(e){this.blurHandlers.delete(e)}reset(){for(let[e,i]of(this.node=void 0,this.inputableText=void 0,this.cursorPos=void 0,this.isBlurHandlerRunning=!0,this.blurHandlers))i();this.isBlurHandlerRunning=!1}}var h=r(140512),u=r(513665),c=r(976780),d=r(78485),p=r(808687),f=r(943451);class g{mentionPlaceHolder="*";mentionTrigger="@";mentionDisableTextType=[f.P.Title];startPos=null;eventCtx=null;handleMention(e){let{inputText:i,eventCtx:r}=e,{gmlRender:s,inputManager:n}=r,{editTextInfo:a}=n;if(a)if(this.startPos)if(this.startPos.compare(a.cursorPos)&&!this.startPos.equal(a.cursorPos))r.auxiliaryManager.addOrUpdateAuxiliaryDomState(d.l.MentionEnd,{type:"userMention",action:"mentionEnd"}),this.resetMentionState();else{let e=this.startPos.clone();e.charIndex=this.startPos.charIndex+1;let i=a.inputableText.graphicText.renderText.getText({suffix:"",position:{startPos:e,endPos:a.cursorPos.clone()}});r.auxiliaryManager.addOrUpdateAuxiliaryDomState(d.l.MentionUpdate,{type:"userMention",action:"mentionUpdate",searchText:i})}else{if(i!==this.mentionTrigger||this.mentionDisableTextType.includes(a.inputableText.type))return;let e=a.inputableText.graphicText.renderText.getTextPosition(a.cursorPos),n=a.inputableText.graphicText.toGlobalPoint(e.point),o=s.transformToLocal(n);this.startPos=a.cursorPos,this.eventCtx=r,r.auxiliaryManager.addOrUpdateAuxiliaryDomState(d.l.MentionStart,{type:"userMention",action:"mentionStart",editTextType:a.inputableText.type,editTextNodeId:a.node.id,cursorPosition:o,lineHeight:e.lineHeight})}}insertMention({nodeId:e,mentionUser:i}){if(!this.eventCtx?.inputManager?.editTextInfo)return void this.resetMentionState();let{inputableText:r,node:s,cursorPos:n}=this.eventCtx.inputManager.editTextInfo;if(e!==s.id||!this.startPos)return void this.resetMentionState();let{renderText:a,textProps:o}=r.graphicText,l=this.startPos.clone();l.charIndex=l.charIndex-1;let h=p.D.splitText(a,l),u=p.D.splitText(a,n),d=`${h.prev}${this.mentionPlaceHolder}${u.next}`,f=o.splitTextCharProps(),g=o.calculateCharIndex(this.startPos,a),y=f.get(g);if(!y)return;y.mentionUser=i;let x=o.mergeTextCharProps(f);this.eventCtx.inputManager.execTextUpdateAction({type:c.d.Text,text:d,textCharProps:x},this.eventCtx),this.eventCtx.inputManager.cursorMove(this.startPos),this.resetMentionState()}resetMentionState(){this.startPos=null,this.eventCtx=null}}var y=r(138743),x=r(765487);class m{inputState=new l;get editTextInfo(){return this.inputState.node?Object.freeze({node:this.inputState.node,inputableText:this.inputState.inputableText,cursorPos:this.inputState.cursorPos}):null}constructor(e,i){this.gmlRender=e,this.renderInput=new n,this.mentionManager=new g,this.nodeManager=i}init(e,i,r){this.renderInput?.init(e,i,r)}focus(e,i){this.inputState.update(e),this.renderInput.focus(i),this.updateEditPositionCursor()}selectionFocus(e){this.inputState.update(e),this.renderInput.focus(14),this.renderInput.renderDom.style.display="none"}focusEnd(){}blur(){this.editTextInfo&&(this.renderInput?.blur(),this.inputState.reset()),this.mentionManager.resetMentionState()}updateEditPositionCursor(){if(!this.editTextInfo)return void console.warn("\u6CA1\u6709\u6B63\u5728\u7F16\u8F91\u7684\u6587\u5B57\u4FE1\u606F");let{inputableText:e,cursorPos:i}=this.editTextInfo,{graphicText:r}=e,{point:s,lineHeight:n}=r.renderText.getTextPosition(i),o=r.toGlobalPoint(s),{angle:l}=r.baseProps;this.renderInput?.updateCursor(new a.E(o.x,o.y),this.gmlRender,n,l)}cursorMove(e){this.inputState.cursorPos=e,this.updateEditPositionCursor()}execTextUpdateAction(e,i){if(!this.editTextInfo)return;let{node:r,inputableText:n}=this.editTextInfo,a=(0,x.m)(r,n,e);if(a){if(i.execAction(a),r.type===s.Jq.MindMapNode){let{width:e,height:s}=r.modifyBaseProps(),n={type:c.d.Base,width:e,height:s};i.execAction(new u.x({id:r.id,props:[n]})),h.R.updateMindMapTreeAndSendMsg(r.mindMapRoot,i)}else if(r.type===s.Jq.Text){let{graphicText:e}=n,{width:s,height:a}=e.getContentRect(!0),{sizeMode:o}=r.textProps,l={type:c.d.Base};o===y.A.AUTO_WIDTH?l.width=s:o===y.A.AUTO_HEIGHT&&(l.height=a),i.execAction(new u.x({id:r.id,props:[l]}))}}}}},161921:function(e,i,r){"use strict";r.d(i,{I:()=>n});var s=r(78485);class n{static getInstance(){return this.instance||(this.instance=new n),this.instance}mentionPermissionMap=new Map;mentionInfoMap=new Map;getMentionPermission(e){return this.mentionPermissionMap.get(e)}updateMentionPermissions(e){if(e?.length)for(let i of e)this.mentionPermissionMap.set(i.uid,i.docPermission)}updateMentionUserFromProps(e){let{textCharProps:i}=e;i?.length&&i.forEach(e=>{e.mentionUser?.uid&&this.mentionInfoMap.set(e.mentionUser.uid,{...e.mentionUser})})}updateMentionUserFromPropsAndNotify(e){let{props:i,preMentionUser:r,auxiliaryManager:s}=e;this.updateMentionUserFromProps(i);let n=this.checkMentionUserHasChanged(r||[]);this.notifyMentionUserChange({auxiliaryManager:s,shouldNotify:n})}checkMentionUserHasChanged(e){let i=this.getAllMentionUsers();if(e.length!==i.length)return!0;let r=new Map;for(let s of(e.forEach(e=>{r.set(e.uid,e)}),i))if(!r.get(s.uid))return!0;return!1}getAllMentionUsers(){return[...this.mentionInfoMap.values()]}getMentionUserSize(){return this.mentionInfoMap.size}notifyMentionUserChange(e){try{let{auxiliaryManager:i,shouldNotify:r=!0}=e;if(!r)return;let n=this.getAllMentionUsers();i.addOrUpdateAuxiliaryDomState(s.l.MentionSetChange,{type:"mentionUserSetChange",mentionUserSet:n})}catch(e){console.log("MentionUser notifyMentionUserChange error",e)}}}},849664:function(e,i,r){"use strict";r.d(i,{W:()=>f});var s=r(318440),n=r(943451),a=r(460146),o=r(49104),l=r(976780),h=r(765487),u=r(513665),c=r(944379),d=r(455360),p=r(917588);class f{matchedItems=[];highlightItems=new Map;constructor(e,i,r,s,n){this.nodeManager=e,this.auxiliaryManager=i,this.actionManager=r,this.renderManager=s,this.inputState=n}find(e){return(this.reset(),this.currentKeyword=e,e)?(this.findAndHighlight(e),this.inputBlurHandlerId=this.inputState.registerBlurHandler(()=>{this.currentKeyword&&this.findAndHighlight(this.currentKeyword)}),this.matchedItems.map(e=>({nodeId:e.node.id,text:e.text,startIndex:e.startIndex,endIndex:e.endIndex,replaceable:e.replaceable}))):[]}findAndHighlight(e){let i=[];for(let[,r]of this.nodeManager.nodeMap)"getGraphicTexts"in r&&r.getGraphicTexts().forEach(s=>{i.push(...this.findInInputableText(r,s,e))});this.matchedItems=(0,p.a8)(i),this.highlight()}highlight(){let e=[];for(let i of this.matchedItems){if((0,p.lM)(i.node))continue;let r=this.splitToHighlightItems(i);e.push(...r),this.highlightItems.has(i)?this.highlightItems.get(i).push(...r):this.highlightItems.set(i,r)}e.length>0&&(this.auxiliaryManager.addOrUpdateAuxiliaryGraphic(s.T.HighlightMatchedTexts,{keyword:this.currentKeyword,highlightItems:e,inputState:this.inputState,nodeMap:this.nodeManager.nodeMap}),this.renderManager.addAuxiliaryDrawTask())}focus(e){let i=this.matchedItems[e];if(!i||!this.nodeManager.nodeMap.get(i.node.id))return!1;this.expandMindmapNode(i),this.moveInViewport(i);let r=this.highlightItems.get(i);if(void 0===r){r=this.splitToHighlightItems(i),this.highlightItems.set(i,r);let e=[];for(let[i,r]of this.highlightItems)e.push(...r);this.auxiliaryManager.addOrUpdateAuxiliaryGraphic(s.T.HighlightMatchedTexts,{keyword:this.currentKeyword,highlightItems:e,inputState:this.inputState,nodeMap:this.nodeManager.nodeMap})}return r.length>0?this.auxiliaryManager.addOrUpdateAuxiliaryGraphic(s.T.FocusMatchedText,{keyword:this.currentKeyword,highlightItems:r,inputState:this.inputState,nodeMap:this.nodeManager.nodeMap}):this.auxiliaryManager.removeAuxiliaryGraphic(s.T.FocusMatchedText),this.renderManager.addAuxiliaryDrawTask(),!0}replace(e,i){let r=this.matchedItems[e];r&&(this.actionManager.execAction(new c.M),this._replace(r,i),this.actionManager.execAction(new d.q))}replaceAll(e){this.actionManager.execAction(new c.M),this.matchedItems.forEach(i=>{this._replace(i,e)}),this.actionManager.execAction(new d.q)}_replace(e,i){let r=this.nodeManager.nodeMap.get(e.node.id);if(!r)return;let{inputableText:s,paragraphIndex:n,startIndex:a,endIndex:o}=e,u=(0,p.Co)(s),c=u[n];if(c.slice(a,o)!==this.currentKeyword)return;u[n]=c.substring(0,a)+i+c.substring(o);let d=u.join("\n"),f={type:l.d.Text,text:d},g=(0,h.m)(r,s,f);g&&this.actionManager.execAction(g)}splitToHighlightItems(e){let i=[],{graphicText:r}=e.inputableText,{paragraphIndex:s,startIndex:n}=e,a=e.endIndex-e.startIndex,o=0,l=a,{lines:h}=r.renderText.paragraphs[s];for(let r of h){let s=r.chars.length;if(n<o+s){let h=l<a?0:n-o,u=h+l,c=(0,p.s3)({line:r,startIndex:h,endIndex:Math.min(u,s)});if(c.chars.length>0&&i.push({matchedItem:e,line:c}),u<s)break;l-=s-h,o+=s}else o+=s}return i}expandMindmapNode(e){if(!(0,p.lM)(e.node))return;let{mindMapParent:i}=e.node;for(;i?.mindMapProps.collapsed;){let e={type:l.d.MindMap,collapsed:!1};this.actionManager.execActionWithoutNetwork(new u.x({id:i.id,props:[e]})),{mindMapParent:i}=i}}moveInViewport(e){let i=this.renderManager.gmlRender.getViewPortBounds(),r=(i.maxX-i.minX)*.05,s=(i.maxY-i.minY)*.05,{minX:n,minY:a,maxX:l,maxY:h}=(0,p.BD)(e);(n<=i.minX+r||l>=i.maxX-r||a<=i.minY+s||h>=i.maxY-s)&&this.renderManager.zoom(o.c.ZoomToFitRect,{rect:{x:n,y:a,width:l-n,height:h-a}})}findInInputableText(e,i,r){let{graphicText:s}=i;if(i.type===n.P.Title&&s instanceof a.l){if(s.isEmpty()||!s.needRender())return[]}else if(!s.hasText())return[];let o=[];return(0,p.Co)(i).forEach((n,a)=>{let l=0;for(;l<n.length;){let h=n.indexOf(r,l);if(-1===h)break;l=h+r.length,o.push({node:e,inputableText:i,paragraphIndex:a,text:n,startIndex:h,endIndex:l,replaceable:!0,sortPosition:(0,p.MR)(e,s)})}}),o}reset(){this.currentKeyword=void 0,this.highlightItems.clear(),this.matchedItems=[],this.inputBlurHandlerId&&(this.inputState.removeBlurHandler(this.inputBlurHandlerId),this.inputBlurHandlerId=void 0),this.auxiliaryManager.removeAuxiliaryGraphic(s.T.HighlightMatchedTexts),this.auxiliaryManager.removeAuxiliaryGraphic(s.T.FocusMatchedText),this.renderManager.addAuxiliaryDrawTask()}}},917588:function(e,i,r){"use strict";r.d(i,{BD:()=>f,Co:()=>g,MR:()=>d,a8:()=>p,lM:()=>y,s3:()=>x});var s=r(889171),n=r(428202),a=r(805433),o=r(943451),l=r(460146),h=r(50552),u=r(313842),c=r(797615);let d=(e,i)=>{let{topLeft:r,topRight:o,bottomRight:l,bottomLeft:h}=i.getRectPoint(),{minX:u,minY:c}=a.G.getBoundsByPoints([r,o,l,h]),d=new s.E(u,c),p=(e=>{let{parent:i}=e;for(;i?.parent&&i.parent.id!==n.r.id;)({parent:i}=i);return i?.id===n.r.id?void 0:i})(e);return{firstly:p?new s.E(p.globalBaseProps.x,p.globalBaseProps.y):d,secondly:d}},p=e=>e.sort((e,i)=>{let{firstly:r,secondly:s}=e.sortPosition,{firstly:n,secondly:a}=i.sortPosition;return r.y!==n.y?r.y-n.y:r.x!==n.x?r.x-n.x:s.y!==a.y?s.y-a.y:s.x-a.x}),f=e=>{let{inputableText:i,paragraphIndex:r,startIndex:n,endIndex:o}=e,{graphicText:l}=i,{paragraphs:h}=l.renderText,u=((e,i)=>{let r=0;for(let s=0;s<i;s++)r+=e[s].lines.reduce((e,i)=>e+i.chars.length,0);return r})(h,r),{x:c,y:d}=l.globalBaseProps,p=h[r],f=new s.E(c+p.x,d+p.y),g=[];for(let e of p.lines)for(let i of e.chars)if(!(i.charIndex<n+u)){if(i.charIndex>=o+u)break;g.push({x:f.x+e.x+i.x,y:f.y+e.y+i.y})}let y=a.G.getBoundsByPoints(g),[x,m,b,v]=[new s.E(y.minX,y.minY),new s.E(y.maxX,y.minY),new s.E(y.maxX,y.maxY),new s.E(y.minX,y.maxY)].map(e=>l.transform.crossPoint(e));return a.G.getBoundsByPoints([x,m,b,v])},g=e=>{let{graphicText:i}=e;return e.type===o.P.Title&&i instanceof l.l?i.titleProps.title.split("\n"):i.textProps.text.split("\n")},y=e=>e.type===c.Jq.MindMapNode&&!e.needRender(),x=({line:e,startIndex:i,endIndex:r})=>{let s=new h.b;s.x=e.x,s.y=e.y,s.width=e.width,s.height=e.height,s.boxAscent=e.boxAscent,s.boxDescent=e.boxDescent;let n=e.chars.slice(i,r),a=n.map(e=>e.charIndex);return e.textCharStyleList.forEach(e=>{let i=a.findIndex(i=>i>=e.startIndex&&i<=e.endIndex);if(-1!==i){let r=a.findLastIndex(i=>i>=e.startIndex&&i<=e.endIndex);s.textCharStyleList.push({...e,backgroundColor:"",color:"",startIndex:i,endIndex:r})}}),s.chars=n.map((e,i)=>{let r=new u.c(e.text,e.x,e.y,e.width,e.height);return r.charIndex=i,r.boxAscent=e.boxAscent,r.boxDescent=e.boxDescent,r}),s}},218453:function(e,i,r){"use strict";r.d(i,{Z:()=>a});var s=r(652260),n=r(889171);class a{selectionInfo=null;clear(){this.selectionInfo=null}generateSelect(e,i,r,s){let a,o;s.compare(r)?(a=r,o=s):(o=r,a=s);let{globalBaseProps:l,renderText:h}=i,u=new n.E(l.x+h.baseProps.x,l.y+h.baseProps.y),c=this.baseGenerateSelect(i,a,o,u);return this.selectionInfo={graphicText:i,node:e,selectionList:c,start:a,end:o},c}baseGenerateSelect(e,i,r,s){let{paragraphs:a}=e.renderText,o=[];if(i.equal(r))return o;let l=i.paragraphIndex,h=i.lineIndex,u=i.charIndex,c=a[l],d=c.lines[h],p=r.paragraphIndex,f=r.lineIndex,g=r.charIndex,y=a[p];if(l===p&&h===f){let e=d.getCharRect(u,g,new n.E(s.x+c.x,s.y+c.y));return o.push(e),o}if(l===p&&h!==f)return o.push(...c.getCharRect(h,u,f,g,s)),o;if(l!==p){let e=c.getCharRect(h,u,-1,-1,s);o.push(...e);let i=y.getCharRect(-1,-1,f,g,s);o.push(...i);for(let e=l+1;e<p;e++){let i=a[e].getRect(s);o.push(...i)}return o}return[]}selectAllNodeText(e,i){let r=s.t.head(),n=i.renderText.tailCursorPosition();return this.generateSelect(e,i,r,n)}}},70978:function(e,i,r){"use strict";r.d(i,{CR:()=>n,Hj:()=>h,L:()=>p,LF:()=>a,LV:()=>y,PL:()=>s,T:()=>g,U5:()=>l,V:()=>f,_r:()=>c,oT:()=>o,u8:()=>d,w9:()=>x,wf:()=>u});let s=0,n=1,a=2,o=3,l=4,h=5,u=6,c=7,d=8,p=9,f=10,g=11,y=12,x=13},546185:function(e,i,r){"use strict";r.d(i,{Y:()=>o});var s=r(268073);let n=new Uint8Array([0,16,14,0,0,0,0,0,64,138,0,0,1,137,7,118,248,237,154,11,136,85,69,24,199,103,219,123,247,222,117,119,93,9,131,165,12,122,130,189,64,138,68,11,44,42,21,236,253,50,162,50,34,122,145,68,15,145,180,48,81,91,72,51,72,169,116,37,36,67,133,232,65,101,246,2,163,2,41,2,13,202,20,12,196,34,180,232,161,165,129,148,213,255,112,230,178,95,179,51,115,102,206,153,153,115,92,231,131,31,51,119,102,206,204,55,51,223,124,51,103,238,153,210,206,216,85,96,58,152,1,102,131,121,36,173,104,216,15,158,1,139,193,50,131,242,3,96,141,38,127,29,120,29,108,4,155,192,102,176,5,124,13,190,37,229,118,131,31,193,175,224,79,240,55,168,213,24,107,7,93,96,20,232,3,3,224,37,176,182,150,62,123,18,15,95,69,56,22,108,0,27,193,38,176,25,108,1,91,193,118,176,11,236,1,123,193,62,112,144,252,62,12,234,245,180,124,15,194,227,234,233,243,39,34,124,7,225,233,245,180,157,115,234,105,254,249,245,193,250,47,68,252,82,112,57,184,30,220,8,198,145,246,147,231,110,67,218,212,102,26,191,11,241,153,188,190,132,7,17,127,148,255,126,28,225,66,30,95,130,112,57,24,0,99,72,249,53,136,191,2,222,2,31,144,244,132,251,155,131,204,226,204,5,79,115,104,89,29,47,27,150,115,205,39,232,207,103,160,141,147,164,109,65,248,13,143,207,170,253,191,252,68,164,239,20,198,224,251,186,186,254,159,120,222,126,132,135,120,124,1,248,139,231,183,117,192,238,64,55,56,22,28,15,78,233,72,243,206,224,225,184,142,161,245,142,71,218,36,73,122,139,126,78,209,241,153,139,254,207,231,99,48,141,164,39,125,120,81,211,239,136,127,38,11,243,191,85,98,3,46,218,233,36,243,60,77,99,115,145,72,36,18,137,68,34,145,72,36,18,137,84,129,107,241,238,90,39,247,57,243,12,238,47,110,198,51,119,144,119,222,159,27,140,93,209,100,236,62,164,61,196,211,231,32,156,15,102,54,211,251,192,39,17,191,1,241,165,60,127,57,194,85,96,53,255,189,30,225,239,8,223,200,120,151,126,23,249,207,161,158,231,193,11,96,5,88,9,6,192,170,102,204,139,121,49,47,230,197,60,215,121,11,192,83,96,105,179,252,61,43,18,137,12,95,62,244,252,127,202,178,246,193,255,213,69,102,72,210,232,249,120,81,205,143,78,54,172,232,73,217,1,38,24,208,55,146,177,177,35,135,166,223,43,164,173,192,239,29,160,175,151,177,107,122,211,180,69,8,223,3,251,64,247,40,198,46,6,151,117,49,54,11,124,215,201,216,201,35,24,107,182,165,220,74,226,34,111,118,169,243,40,79,240,58,246,163,252,6,196,207,238,198,59,4,88,7,182,119,155,213,17,137,68,34,145,225,201,1,236,11,53,236,15,191,225,156,112,0,251,225,97,240,7,255,78,104,60,246,231,73,124,143,254,7,28,66,218,45,120,103,249,151,231,215,26,140,77,33,123,120,119,35,189,119,162,251,107,242,205,200,232,198,224,119,100,99,16,63,173,33,223,139,207,68,250,185,36,239,2,196,47,81,148,77,152,138,188,171,73,254,77,136,247,18,125,110,39,121,201,247,95,247,104,234,154,169,201,75,152,134,122,175,19,206,43,143,224,153,199,192,66,48,29,121,139,121,29,51,114,156,107,158,37,237,175,68,124,181,160,207,90,252,190,155,215,251,90,134,174,148,183,81,246,1,60,247,62,194,143,45,158,243,201,195,224,243,138,232,66,249,5,58,93,25,176,189,37,201,119,154,104,243,7,201,25,189,126,132,222,13,36,223,239,246,19,102,11,244,107,88,86,27,90,254,104,163,200,216,127,154,241,174,215,43,248,165,47,42,248,173,221,87,208,105,187,66,175,137,142,190,7,221,102,217,239,93,188,60,253,134,184,139,143,229,30,207,99,184,149,251,201,109,21,240,151,59,161,195,157,240,75,187,137,46,123,43,160,151,111,18,223,116,176,145,158,141,92,212,213,211,76,195,209,8,79,0,167,30,65,190,254,44,232,122,30,209,151,73,230,223,214,86,63,226,107,104,66,193,113,40,250,188,9,98,223,230,12,211,111,212,47,42,56,150,95,86,160,15,147,219,219,24,2,35,142,33,241,54,195,103,76,136,82,158,196,241,119,103,199,33,237,223,229,188,213,142,114,92,74,168,118,170,38,101,207,97,222,121,167,161,42,62,220,165,161,192,84,108,199,188,202,123,78,21,253,75,40,27,212,245,161,145,81,70,172,67,86,214,135,80,189,202,146,42,217,74,149,229,104,24,7,87,125,115,57,6,89,254,220,116,78,26,22,101,93,210,148,164,49,158,222,66,252,77,125,150,78,92,140,179,216,174,168,59,77,111,137,76,55,27,93,108,246,231,44,105,141,159,206,78,84,227,239,106,127,107,74,96,66,156,234,65,231,184,73,194,178,125,135,206,134,101,235,71,38,170,243,88,209,181,99,171,115,35,227,57,87,66,219,107,102,148,13,165,75,66,59,115,223,255,86,157,117,230,238,254,203,247,221,154,139,251,12,153,31,167,34,243,157,173,57,208,225,98,127,169,234,253,165,204,87,200,244,23,211,117,229,66,73,158,118,93,159,27,84,254,176,44,161,107,128,49,253,185,65,166,183,88,158,238,141,186,103,109,244,11,109,39,180,109,113,175,15,217,182,168,131,106,12,69,29,105,121,155,182,76,203,134,156,143,154,16,47,107,189,232,214,135,172,172,76,111,177,172,203,113,44,90,191,106,189,211,186,197,243,175,15,59,240,109,95,69,253,145,75,61,168,62,62,214,119,94,127,91,134,168,124,109,214,251,180,105,221,54,237,151,241,206,38,219,79,91,233,186,51,84,86,157,101,206,103,34,226,185,64,118,70,144,205,175,175,254,185,24,147,60,251,143,120,102,42,83,68,123,178,209,71,181,223,201,206,40,180,188,236,46,197,245,90,19,109,46,175,175,207,58,247,186,18,83,125,139,216,121,89,123,93,136,182,68,27,147,181,231,114,189,153,204,145,12,147,179,85,209,246,138,232,231,138,162,98,58,110,98,127,109,246,140,162,98,122,246,247,49,30,121,235,72,196,244,206,181,136,248,24,123,209,30,124,213,239,123,79,54,177,105,106,203,186,189,210,244,126,198,214,118,124,174,29,93,31,101,233,162,200,250,175,170,199,183,15,144,249,29,31,66,251,107,226,251,105,200,50,158,49,29,71,19,155,82,213,29,82,178,250,169,234,47,77,47,75,124,236,173,101,205,3,21,153,45,201,214,188,207,117,43,182,33,155,123,153,126,182,98,226,183,77,214,162,143,179,131,248,219,20,219,247,40,157,222,52,207,245,89,45,148,223,87,181,235,170,158,60,243,37,171,75,247,91,149,230,82,100,107,220,183,14,170,245,22,74,242,172,47,23,126,190,213,118,94,189,124,136,173,143,113,189,71,201,252,169,110,255,81,181,95,150,63,49,213,57,239,28,154,60,163,90,183,161,196,245,216,203,252,42,19,210,84,207,217,234,98,106,95,121,223,29,84,239,130,226,61,122,104,251,149,73,153,58,132,104,219,198,167,170,246,120,147,122,125,75,222,115,157,174,46,31,18,122,92,90,66,215,88,25,98,234,175,84,207,202,246,148,50,206,6,45,125,92,138,237,221,69,209,247,59,213,222,108,115,199,106,163,179,15,161,186,139,123,148,234,183,233,184,217,232,44,214,107,58,14,33,237,181,37,69,222,231,169,125,248,20,87,245,171,250,32,235,143,106,13,148,241,30,38,19,93,95,90,162,122,127,44,171,15,174,219,204,107,187,121,108,86,101,27,58,27,178,169,219,100,31,115,45,121,246,152,144,115,216,18,113,14,105,121,177,174,208,98,50,110,33,214,153,105,27,54,190,189,136,152,220,179,186,90,63,89,98,58,71,50,29,179,250,225,219,175,154,216,147,56,158,76,82,70,39,178,187,125,177,190,162,254,51,75,68,59,244,33,58,95,167,42,87,230,157,131,174,221,188,54,237,219,54,93,138,207,62,136,118,157,7,27,221,139,232,104,42,62,215,142,169,152,248,119,83,251,44,98,227,121,234,244,37,33,218,200,106,215,53,174,218,50,233,131,77,127,125,137,74,247,50,253,112,86,221,33,215,77,86,187,62,196,87,27,29,129,112,37,190,252,190,235,61,49,132,132,212,163,200,217,193,5,157,21,128,202,136,146,233,242,76,143,128,173,184,236,171,40,190,251,110,130,40,221,108,232,152,249,36,116,123,162,252,7]),a=new s.Z(n);function o(){return a}},266187:function(e,i,r){"use strict";r.d(i,{Y:()=>l});var s,n,a=r(70978),o=r(141171);(s=n||(n={}))[s.PE=0]="PE",s[s.PEZ=1]="PEZ",s[s.Other=2]="Other";let l=()=>{let e=n.Other;return{next(i,r){let s=/^\p{Extended_Pictographic}$/u.test(String.fromCodePoint(r)),l=e===n.PEZ&&s;return e=e===n.PE&&i===a.U5?n.PE:e===n.PE&&i===a.Hj?n.PEZ:s?n.PE:n.Other,l?o._.DO_NOT_BREAK:o._.CONTINUE}}}},141171:function(e,i,r){"use strict";var s,n;r.d(i,{_:()=>s}),(n=s||(s={}))[n.CONTINUE=0]="CONTINUE",n[n.BREAK=1]="BREAK",n[n.DO_NOT_BREAK=2]="DO_NOT_BREAK"},72765:function(e,i,r){"use strict";r.d(i,{b:()=>g});var s=r(268073);let n=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4],[0,4,4,1,1,4,4,4,4,1,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,4,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[4,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,0,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,1,1,1,1,0,0,4,2,4,1,1,1,1,1,0,1,1,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,1,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,4,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,1,1,1,1,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,1,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,1,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0]],a=[8220],o=[8221],l=[8221],h=[8220],u=new Uint8Array([0,8,14,0,0,0,0,0,64,230,0,0,1,120,15,135,240,237,157,123,140,93,69,29,199,231,178,187,119,247,222,189,187,237,221,178,165,82,150,210,46,21,88,64,44,104,128,16,2,13,49,148,160,129,2,134,87,20,196,40,143,226,31,149,34,98,195,31,72,48,16,148,240,16,8,24,49,128,52,80,65,165,90,240,5,42,164,74,208,38,109,164,10,34,42,164,32,34,21,37,20,12,242,240,59,156,25,239,236,116,158,103,30,231,150,222,77,62,153,115,206,60,126,191,249,205,111,30,103,206,57,119,239,236,35,228,94,176,22,60,8,158,3,91,192,86,240,22,232,235,39,100,184,223,63,28,3,187,130,5,96,10,28,0,14,118,200,119,4,56,218,16,255,49,240,113,240,9,240,25,176,12,92,0,46,6,151,10,233,190,2,174,6,55,128,111,130,59,192,119,192,106,176,6,252,4,60,12,30,3,27,193,38,150,247,105,22,62,7,182,128,87,193,107,224,109,80,31,32,100,20,204,4,115,192,30,96,111,48,5,22,129,67,193,98,22,127,12,88,202,226,233,249,41,224,76,112,14,56,15,124,30,92,12,46,101,241,87,130,107,193,205,236,252,54,112,247,64,33,255,62,132,63,6,191,100,229,83,253,30,69,184,1,60,1,254,8,158,5,155,250,138,243,23,193,203,236,252,117,132,239,176,60,131,117,66,102,128,89,96,110,189,136,127,145,165,159,172,23,225,94,245,34,45,231,128,122,135,131,25,135,131,35,24,98,90,19,71,35,237,113,82,250,115,33,239,100,143,50,92,56,67,40,239,108,28,47,3,23,128,149,224,178,122,167,190,87,225,248,122,240,13,73,254,29,56,191,73,56,191,19,231,247,130,181,66,94,202,79,89,190,71,132,235,191,193,241,239,192,83,245,194,239,41,180,125,39,16,62,75,211,129,87,192,27,44,111,109,176,8,135,16,206,4,187,12,118,228,206,195,241,194,65,125,61,247,71,220,34,67,188,11,135,34,255,98,112,12,88,10,78,5,159,2,231,130,229,224,66,112,9,184,28,92,1,174,1,55,49,153,183,178,112,21,194,239,130,251,193,67,224,87,96,61,139,219,132,240,41,240,172,70,207,231,133,235,47,225,248,85,137,173,194,241,91,160,54,68,72,3,180,193,28,176,7,216,27,124,16,28,2,142,4,75,192,241,224,20,112,38,56,103,168,40,255,124,132,43,192,151,216,249,165,8,175,24,242,183,217,53,44,207,77,8,111,245,200,191,170,132,172,123,165,60,107,133,243,59,153,143,61,136,107,235,192,250,161,162,63,111,26,114,231,247,224,207,224,121,240,79,240,26,120,27,212,27,197,241,104,195,156,127,182,16,191,187,37,109,143,30,61,226,193,199,129,170,245,232,209,163,71,143,30,61,122,244,232,177,125,177,160,75,239,219,246,105,76,223,15,209,241,129,70,177,151,71,143,15,194,241,61,66,220,97,13,123,254,163,144,230,88,150,238,4,132,139,251,139,253,154,211,112,124,22,43,251,60,132,203,193,197,141,98,63,238,34,186,127,128,227,43,89,190,107,17,222,220,152,190,63,68,185,13,215,86,25,100,223,141,248,251,192,26,240,3,240,67,176,22,220,15,30,232,197,245,226,122,113,189,184,94,92,244,184,135,192,58,240,40,120,119,207,180,66,54,52,170,165,234,250,247,232,209,213,4,174,99,159,64,31,251,43,216,220,40,255,156,238,5,77,222,127,225,250,127,0,105,18,50,8,102,52,167,199,207,194,249,92,48,9,246,5,7,129,67,154,133,94,71,34,92,210,172,126,252,217,121,70,193,215,193,227,160,53,83,207,18,112,5,248,153,34,238,77,233,252,67,109,66,86,128,123,192,230,118,113,109,206,24,33,39,129,175,130,187,192,11,224,25,232,48,15,118,56,3,124,11,252,133,218,112,152,144,69,128,224,254,227,164,225,226,92,228,50,112,125,173,195,35,44,45,231,37,156,239,215,34,228,163,96,57,184,8,172,1,175,128,3,71,112,13,220,7,254,61,50,189,156,29,141,246,232,116,187,245,232,209,163,199,142,196,210,81,243,220,127,60,230,163,83,154,250,248,211,154,219,174,89,120,220,89,136,59,79,202,251,57,156,95,200,174,157,168,121,247,138,190,151,117,125,228,247,178,76,92,164,169,223,37,134,122,83,46,167,235,26,250,46,151,34,221,117,236,218,45,150,50,108,220,174,176,175,10,158,126,53,75,255,61,65,238,3,236,248,231,194,181,135,155,197,187,96,187,225,248,49,28,111,100,231,79,34,124,6,252,141,157,191,140,240,117,240,95,118,78,247,30,233,26,132,239,43,14,227,120,214,112,71,135,185,56,94,129,112,114,184,120,247,112,95,132,7,129,195,134,213,58,111,69,153,71,13,119,244,218,29,28,171,72,203,211,127,145,250,141,32,143,166,63,29,231,159,102,101,44,67,120,1,139,167,123,160,43,217,122,73,87,222,85,195,106,187,243,61,221,235,16,127,203,240,244,60,183,227,124,53,88,3,238,7,15,177,50,214,33,92,207,142,55,34,124,82,35,87,174,207,51,72,247,2,216,2,94,81,200,122,131,149,185,83,171,83,55,27,77,164,29,107,21,123,201,187,182,58,215,231,227,120,33,216,191,149,175,127,185,240,225,46,211,167,10,14,103,54,248,136,193,22,75,52,113,199,225,250,201,45,55,223,72,73,217,186,159,17,177,253,233,187,137,103,183,58,199,116,46,57,159,157,175,64,184,50,147,175,125,89,35,231,202,86,241,238,228,213,66,123,221,216,10,191,215,183,81,182,30,183,50,61,87,117,129,127,85,201,106,199,54,162,247,218,15,128,7,61,219,148,190,15,91,117,29,125,251,247,186,86,231,93,243,29,149,245,158,227,201,227,72,255,39,234,31,138,181,225,230,237,108,30,252,59,244,221,18,65,103,106,199,173,204,151,222,164,229,141,96,13,51,82,189,191,139,126,79,191,17,208,197,83,189,199,70,138,116,187,32,220,109,100,219,252,123,226,218,126,35,238,54,89,196,210,30,26,96,7,186,222,91,156,216,142,58,253,143,25,153,30,191,52,67,123,158,202,108,246,73,15,59,155,152,237,162,179,101,92,255,44,202,88,54,82,124,71,178,156,133,95,24,41,226,46,25,177,231,151,185,28,121,190,6,110,0,55,11,249,111,195,241,93,224,251,224,71,194,245,95,224,248,215,96,61,216,0,254,192,226,158,70,184,89,72,247,15,28,191,204,206,95,71,248,14,59,22,237,49,40,236,23,156,192,242,205,96,215,198,89,56,129,240,183,66,185,11,112,62,53,90,28,31,200,194,67,16,30,49,58,189,252,193,209,233,245,60,26,231,199,26,246,39,104,127,60,113,212,223,126,239,37,78,71,253,151,246,151,159,187,186,105,140,45,203,183,251,106,255,103,156,16,43,109,176,16,44,96,236,233,144,199,149,125,0,110,55,8,212,34,24,122,9,123,60,246,238,49,189,70,255,118,18,226,208,132,100,38,11,233,150,220,176,35,67,140,150,64,93,58,79,13,97,117,216,41,163,76,89,62,109,203,26,59,31,39,189,191,169,29,28,85,159,124,191,230,122,10,250,89,59,208,62,223,16,160,254,57,159,193,143,249,24,209,38,29,159,230,249,120,218,49,41,175,72,159,116,78,72,218,254,54,63,113,249,221,46,191,219,224,254,33,250,0,63,119,181,153,236,83,98,158,49,75,222,28,228,234,183,219,3,253,37,243,232,40,163,67,217,118,148,215,42,182,182,173,218,239,82,66,109,65,199,124,62,103,241,235,13,162,159,195,186,157,182,208,110,227,138,227,58,11,109,243,247,72,23,81,182,125,155,2,242,58,221,199,166,117,33,228,84,237,187,169,199,102,215,251,159,166,112,44,235,148,178,206,117,98,175,187,205,62,114,188,42,45,79,227,106,143,216,237,250,94,240,41,121,124,125,47,225,99,135,22,41,127,63,85,133,255,165,180,137,156,135,142,205,188,79,139,247,144,226,125,91,14,93,117,250,203,215,117,233,114,250,122,14,185,62,247,247,166,246,141,209,127,202,144,67,70,72,253,83,250,68,204,186,219,202,242,213,175,205,200,57,174,201,253,165,138,246,17,251,79,140,246,49,245,81,81,150,124,205,102,163,178,243,14,95,111,171,202,230,215,27,10,121,170,113,180,234,246,137,129,169,93,108,58,132,172,3,84,253,210,213,95,84,54,200,221,30,161,246,142,173,71,153,254,208,32,246,246,207,53,31,229,234,255,101,124,90,246,185,42,250,189,78,207,88,118,55,217,192,54,78,164,186,15,224,227,176,235,250,110,123,232,255,174,109,146,186,255,155,218,208,117,63,95,212,57,247,51,128,156,99,145,105,76,10,177,127,72,93,170,176,117,12,187,187,202,75,237,255,46,101,235,214,137,50,49,199,99,95,159,244,237,239,98,59,184,142,233,156,189,186,4,89,175,70,96,121,45,15,59,242,251,194,110,181,13,183,143,175,95,168,108,50,38,33,94,235,23,142,219,236,188,174,160,159,229,147,159,73,216,198,131,216,247,221,242,115,39,30,210,191,154,16,134,140,175,177,214,102,109,135,235,185,231,68,215,49,138,247,143,208,177,93,244,45,221,218,130,63,159,14,25,23,117,250,134,246,65,87,249,186,252,239,171,152,93,43,102,110,197,164,90,75,153,198,13,121,157,100,234,71,169,169,82,118,110,249,244,175,70,166,143,31,190,186,218,198,189,178,184,174,3,203,234,238,35,95,183,246,73,169,131,79,189,99,203,159,10,144,31,123,77,199,109,63,32,156,115,223,19,215,191,177,246,1,98,181,31,95,7,114,253,199,164,235,178,143,241,247,205,82,232,95,197,189,179,205,175,114,174,205,100,251,136,231,188,61,66,215,45,161,247,114,190,254,107,186,167,75,133,201,190,60,77,85,247,125,220,183,92,237,23,74,236,241,47,244,222,73,94,67,217,250,97,200,253,66,155,148,155,251,99,232,46,202,87,173,29,171,32,164,141,98,221,239,199,26,31,109,243,73,202,241,89,246,43,159,247,16,116,58,199,222,79,73,133,107,95,178,181,151,236,99,49,198,15,83,223,26,151,142,109,125,177,140,62,101,223,197,143,129,44,187,10,223,224,107,71,93,31,225,244,75,231,59,51,157,231,9,250,203,233,102,145,233,223,182,244,145,206,119,152,125,138,115,49,45,101,134,0,45,143,127,51,170,179,101,211,130,168,3,149,51,192,208,217,102,136,233,86,19,210,154,210,155,250,95,83,97,211,150,116,62,91,145,215,103,222,150,251,177,203,55,91,188,126,226,247,71,242,55,73,46,249,203,222,223,136,227,75,195,64,211,18,239,155,183,169,56,14,145,209,240,104,167,144,57,211,117,62,229,254,46,183,97,147,184,181,139,152,207,231,93,92,87,191,73,241,61,161,73,182,234,187,60,213,119,157,38,116,242,124,243,185,218,69,110,223,20,242,124,116,42,91,23,149,94,242,53,85,60,15,229,239,120,109,109,171,178,133,92,7,147,237,76,62,228,226,15,101,218,218,38,55,70,127,48,217,198,116,30,195,127,98,149,239,106,179,80,219,133,234,229,203,140,8,58,208,63,241,185,107,89,93,71,25,62,50,83,216,116,84,34,164,172,144,121,85,135,239,252,145,146,86,201,60,178,95,164,208,203,167,15,197,144,85,86,7,87,91,250,148,163,58,119,189,46,151,17,90,63,87,187,187,230,73,209,191,77,245,182,217,141,151,195,227,71,21,114,38,72,156,241,164,76,29,117,54,140,97,203,144,118,87,249,28,183,159,42,77,12,157,115,217,223,86,239,220,200,62,111,67,238,155,42,159,158,175,73,175,234,15,114,156,216,239,116,118,82,233,161,42,71,165,207,132,65,174,10,149,173,38,36,114,249,136,120,222,167,129,198,241,231,124,178,254,244,175,86,34,76,49,15,151,245,119,174,83,206,62,226,106,167,42,100,250,134,85,218,45,167,236,92,190,18,203,175,101,76,251,168,242,51,125,121,15,183,78,220,158,175,216,112,125,15,72,247,108,70,55,70,217,48,237,251,139,251,212,68,170,167,56,6,138,231,244,207,212,39,228,242,249,59,43,170,125,113,149,157,102,49,116,123,233,68,33,67,87,39,157,44,62,166,187,212,133,183,129,239,220,30,27,217,39,248,239,51,214,132,52,3,194,177,173,110,68,202,107,75,55,32,28,139,249,108,232,246,194,117,105,85,215,249,179,25,217,30,147,236,216,22,166,38,151,28,155,124,151,122,219,226,38,201,182,207,132,7,36,120,155,116,155,253,99,213,95,229,127,147,68,237,135,162,63,250,48,25,136,205,38,182,245,98,138,118,208,217,198,134,239,243,175,144,57,56,214,124,174,91,95,248,190,63,17,91,7,113,206,19,113,181,175,172,147,239,123,29,41,236,169,211,193,199,63,92,159,141,150,133,127,127,195,215,22,46,107,186,50,207,136,67,222,111,114,145,239,139,143,125,92,252,199,38,47,197,119,3,169,159,229,83,25,85,124,147,36,183,183,174,254,46,239,100,150,245,55,158,191,202,239,195,92,231,143,148,239,117,248,142,159,114,217,190,246,119,109,87,87,59,168,202,9,169,191,173,143,135,214,95,102,23,48,39,35,185,229,249,174,63,99,126,123,40,151,93,197,247,135,178,14,123,87,76,202,181,70,75,211,166,244,183,117,199,137,223,239,240,118,219,111,252,134,194,247,44,114,203,149,215,151,161,235,170,33,210,217,107,225,191,117,44,239,91,209,247,74,82,173,239,84,247,105,92,174,107,40,231,51,221,3,214,132,144,234,207,239,181,197,231,47,54,57,54,248,123,160,170,123,206,42,124,149,203,158,205,66,94,79,89,87,149,13,107,82,232,115,143,46,223,167,215,61,203,8,133,148,212,61,149,124,110,219,154,116,204,237,20,107,79,38,7,166,61,170,212,136,253,137,250,110,67,138,231,239,122,218,250,155,235,26,70,28,175,246,32,197,190,86,21,253,217,116,159,174,218,123,169,106,110,20,215,211,169,234,237,211,118,85,217,65,182,137,203,253,92,85,250,113,95,170,66,238,148,36,63,199,62,81,89,127,115,121,38,232,234,11,46,109,175,147,99,90,147,229,240,39,87,155,216,250,129,77,255,208,251,113,159,250,136,251,2,114,254,144,49,40,20,23,255,206,221,71,82,148,25,179,159,170,108,231,178,215,148,10,87,63,22,109,41,218,54,215,92,87,214,143,228,126,239,186,95,151,98,140,170,106,60,41,59,103,249,232,165,26,95,171,234,131,92,166,248,253,111,25,31,149,223,167,81,249,25,63,246,249,94,126,76,42,191,76,95,247,109,75,221,251,71,114,191,174,106,46,113,169,179,233,57,110,206,241,37,119,255,141,61,6,169,252,55,100,140,152,18,202,214,245,45,215,58,135,234,99,107,167,50,243,177,110,92,16,251,145,239,56,201,235,175,107,7,85,187,165,156,63,168,76,254,251,153,252,61,17,249,55,88,109,247,24,101,214,219,162,124,57,173,79,251,133,214,95,254,237,90,23,114,143,127,33,125,196,102,211,80,251,133,18,250,59,96,174,250,203,191,143,215,46,33,43,5,169,231,127,211,216,146,122,190,212,173,155,196,114,124,222,213,138,225,175,85,219,128,215,127,76,40,43,135,159,137,245,207,233,47,101,237,168,138,87,173,159,219,158,182,244,109,191,92,62,33,207,153,226,124,227,211,63,82,248,187,13,147,252,42,230,84,185,254,101,222,11,245,29,111,98,217,143,191,75,25,187,109,66,253,211,5,23,123,218,250,123,183,140,255,33,99,123,174,254,168,27,171,92,236,223,146,242,228,66,53,230,249,60,107,205,189,94,205,109,31,74,147,108,251,27,111,177,198,1,31,66,247,162,121,25,101,199,222,28,246,23,255,106,2,114,58,249,26,79,79,52,233,83,235,172,211,211,151,126,3,92,142,234,26,15,77,99,72,234,185,36,196,63,98,181,91,217,241,40,246,179,30,211,252,234,211,231,66,245,240,89,227,170,224,113,177,215,103,57,198,146,208,54,85,205,213,161,253,40,198,189,141,136,252,77,164,238,255,234,216,214,31,221,54,31,187,202,247,125,31,44,54,161,117,140,165,103,232,119,156,177,136,209,94,38,82,143,25,166,49,84,245,236,209,119,142,140,169,143,110,236,72,61,62,197,30,195,124,235,156,179,237,125,231,181,212,164,106,91,149,93,83,205,99,62,109,40,166,85,61,203,10,25,51,99,216,44,116,254,8,149,21,219,207,99,18,195,62,161,117,41,235,167,190,253,62,85,187,136,253,32,70,155,132,140,187,227,1,246,160,248,252,198,119,10,249,49,218,37,246,252,111,243,79,57,127,217,250,243,191,42,124,72,164,105,57,247,165,204,111,212,137,235,201,216,191,123,23,187,188,86,2,125,83,124,115,179,91,38,84,178,39,52,215,99,160,106,131,156,50,116,215,197,223,170,84,217,65,21,159,155,221,21,200,250,169,244,181,17,67,55,31,121,62,250,168,244,147,211,186,214,101,194,80,166,143,111,169,66,157,44,93,222,178,125,192,52,118,135,182,161,235,28,145,178,236,84,117,179,249,173,75,251,149,45,223,85,102,12,114,219,177,140,28,83,95,207,245,187,193,226,111,105,154,254,79,84,108,159,240,29,119,125,101,198,246,171,216,118,79,45,63,182,254,177,244,75,213,95,67,235,167,91,239,184,248,175,207,90,194,199,223,125,214,8,57,215,101,169,100,168,214,50,33,242,76,235,163,144,53,97,21,107,224,208,245,107,232,189,121,232,254,72,46,59,185,214,251,127]),c=new s.Z(u),d=function(e){switch(e){case 33:case 39:case 40:case 42:return 12;case 35:return 5;default:return e}},p=function(e){switch(e){case 37:case 38:return 34;case 41:return 22;default:return e}};class f{constructor(e,i=!1){this.position=e,this.required=i}}class g{constructor(e){this.string=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null,this.curCode=null,this.nextCode=null,this.LB8a=!1,this.LB21a=!1,this.LB30a=0}nextCodePoint(){let e=this.string.charCodeAt(this.pos++),i=this.string.charCodeAt(this.pos),r=e;return 55296<=e&&e<=56319&&56320<=i&&i<=57343&&(this.pos++,r=(e-55296)*1024+(i-56320)+65536),null===this.curCode?this.curCode=r:this.curCode=this.nextCode,this.nextCode=r,r}nextCharClass(){return d(c.get(this.nextCodePoint()))}getSimpleBreak(){switch(this.nextClass){case 41:return!1;case 34:case 37:case 38:return this.curClass=34,!1;case 36:return this.curClass=36,!1}return null}getPairTableBreak(e){let i=!1;switch(n[this.curClass][this.nextClass]){case 0:i=!0;break;case 1:i=!!l.includes(this.curCode)||!h.includes(this.curCode)&&(!!a.includes(this.nextCode)||!o.includes(this.nextCode)&&41===e);break;case 2:if(!(i=41===e))return!1;break;case 3:if(41!==e)return i}return this.LB8a&&(i=!1),this.LB21a&&(16===this.curClass||17===this.curClass)?(i=!1,this.LB21a=!1):this.LB21a=13===this.curClass,28===this.curClass?(this.LB30a++,2==this.LB30a&&28===this.nextClass&&(i=!0,this.LB30a=0)):this.LB30a=0,this.curClass=this.nextClass,i}nextBreak(){if(null==this.curClass){let e=this.nextCharClass();this.curClass=p(e),this.nextClass=e,this.LB8a=31===e,this.LB30a=0}for(;this.pos<this.string.length;){this.lastPos=this.pos;let e=this.nextClass;if(this.nextClass=this.nextCharClass(),34===this.curClass||36===this.curClass&&37!==this.nextClass)return this.curClass=p(d(this.nextClass)),new f(this.lastPos,!0);let i=this.getSimpleBreak();if(null===i&&(i=this.getPairTableBreak(e)),this.LB8a=31===this.nextClass,i)return new f(this.lastPos)}return this.lastPos<this.string.length?(this.lastPos=this.string.length,new f(this.string.length)):null}}},470608:function(e,i,r){"use strict";r.d(i,{P:()=>g});let s=e=>e>=55296&&e<=56319,n=e=>e>=56320&&e<=57343,a=(e,i)=>(e-55296)*1024+(i-56320)+65536;var o=r(70978),l=r(141171);let h=[()=>{let e=o.PL;return{next(i){let r=e===o.CR&&i===o.LF;return e=i,r?l._.DO_NOT_BREAK:l._.CONTINUE}}},()=>{let e=o.PL;return{next(i){let r=e===o.oT||e===o.CR||e===o.LF;return e=i,r?l._.BREAK:l._.CONTINUE}}},()=>({next:e=>e===o.oT||e===o.CR||e===o.LF?l._.BREAK:l._.CONTINUE}),()=>{let e=o.PL;return{next(i){let r=e===o.L&&(i===o.L||i===o.V||i===o.LV||i===o.w9);return e=i,r?l._.DO_NOT_BREAK:l._.CONTINUE}}},()=>{let e=o.PL;return{next(i){let r=(e===o.LV||e===o.V)&&(i===o.V||i===o.T);return e=i,r?l._.DO_NOT_BREAK:l._.CONTINUE}}},()=>{let e=o.PL;return{next(i){let r=(e===o.w9||e===o.T)&&i===o.T;return e=i,r?l._.DO_NOT_BREAK:l._.CONTINUE}}},()=>{let e=o.PL;return{next(i){var r,s;let n=(r=i,s=e,r===o.U5||r===o.u8||r===o.U5||r===o.Hj||r===o.u8||s===o._r?l._.DO_NOT_BREAK:l._.CONTINUE);return e=i,n}}},r(266187).Y,()=>{let e=0;return{next(i){let r=!1;return i===o.wf?(e%2==1&&(r=!0),e+=1):e=0,r?l._.DO_NOT_BREAK:l._.CONTINUE}}}],u=(0,r(546185).Y)();class c{_current=0;_lastBreak=0;constructor(e){this.content=e,this._rules=h.map(e=>e())}nextBreak(){for(let e=this._current;e<this.content.length;e++){let i=this.content.charCodeAt(e);this._current=e,s(i)&&e+1<this.content.length&&n(this.content.charCodeAt(e+1))&&(i=a(i,this.content.charCodeAt(++e)));let r=u.get(i),o=l._.CONTINUE;for(let e of this._rules){let s=e.next(r,i);s!==l._.CONTINUE&&o===l._.CONTINUE&&(o=s)}if(o!==l._.DO_NOT_BREAK){let i=this._current;if(this._current=e+1,0!==i)return this._lastBreak=i,i}}return(this._current=this.content.length,this._lastBreak>=this.content.length)?null:(this._lastBreak=this._current,this._current)}}let d={"Noto Sans SC":1.448,"Noto Sans JP":1.448,"Noto Sans KR":1.448,"Noto Sans TC":1.448,"Noto Sans Thai":1.511,"Noto Sans Devanagari":1.304,"Noto Sans Georgian":1.36,"Noto Sans Khmer":1.362,"Noto Sans Myanmar":2.184,Inter:1.21,"Noto Sans SC SubSet 1":1.448,"Noto Sans SC SubSet 2":1.448,"Noto Sans SC SubSet 3":1.448,embed:1.171},p=[{start:0,end:127,script:"USCRIPT_LATIN"},{start:128,end:255,script:"USCRIPT_LATIN"},{start:19968,end:40959,script:"USCRIPT_HAN"},{start:12352,end:12447,script:"USCRIPT_HIRAGANA"},{start:12448,end:12543,script:"USCRIPT_KATAKANA"},{start:44032,end:55215,script:"USCRIPT_HANGUL"},{start:3584,end:3711,script:"USCRIPT_THAI"},{start:2304,end:2431,script:"USCRIPT_DEVANAGARI"},{start:4256,end:4351,script:"USCRIPT_GEORGIAN"},{start:8192,end:8303,script:"USCRIPT_COMMON"},{start:12288,end:12351,script:"USCRIPT_COMMON"},{start:128512,end:128591,script:"USCRIPT_COMMON"}],f={USCRIPT_COMMON:"Noto Sans SC",USCRIPT_LATIN:"Noto Sans SC",USCRIPT_HAN:"Noto Sans SC",USCRIPT_HIRAGANA:"Noto Sans JP",USCRIPT_KATAKANA:"Noto Sans JP",USCRIPT_HANGUL:"Noto Sans KR",USCRIPT_THAI:"Noto Sans Thai",USCRIPT_DEVANAGARI:"Noto Sans Devanagari",USCRIPT_GEORGIAN:"Noto Sans Georgian"},g={getMatchFontFamily(e){let i="USCRIPT_COMMON",r=e.codePointAt(0);if(r)for(let e of p)r>=e.start&&r<=e.end&&(i=e.script);return f[i]||f.USCRIPT_COMMON},getLineHeightRatio:e=>d[e]||d.embed,splitIntlText(e){return this.splitIntlTextWithGraphemeBreaks(e)},splitIntlTextWithSegmenter:e=>e&&"string"==typeof e?[...new Intl.Segmenter("en",{granularity:"grapheme"}).segment(e)].map(e=>e.segment):[],splitIntlTextWithGraphemeBreaks(e){if(!e||"string"!=typeof e)return[];let i=[],r=(e=>{let i=[],r=new c(e),s=r.nextBreak();for(;s;)i.push(s),s=r.nextBreak();return i})(e),s=0;for(let n=0;n<r.length;n++){let a=r[n];i.push(e.substring(s,a)),s=a}return i}}},765487:function(e,i,r){"use strict";r.d(i,{m:()=>u});var s=r(513665),n=r(457063),a=r(943451),o=r(891763),l=r(976780);let h=[new class{enable(e){return e.type===a.P.Main}buildUpdateLog(e,i,r){return new s.x({id:e.id,props:[r]})}},new class{enable(e){return e.type===a.P.Extra}buildUpdateLog(e,i,r){let n={...r,type:l.d.ExtraText};return new s.x({id:e.id,props:[n]})}},new class{enable(e){return e.type===a.P.SubExtra}buildUpdateLog(e,i,r){let n={...r,type:l.d.ExtraText2};return new s.x({id:e.id,props:[n]})}},new class{enable(e){return e.type===a.P.Title}buildUpdateLog(e,i,r){let n={type:l.d.Title,title:r.text};return new s.x({id:e.id,props:[n]})}},new class{enable(e){return e.type===a.P.LineCaption}buildUpdateLog(e,i,r){let n=e.captionsProps.clone();return 0===n.captions.length&&n.captions.push(new o.A),n.captions[0].textProps.update(r),new s.x({id:e.id,props:[n]})}},new class{enable(e){return e.type===a.P.TableCell}buildUpdateLog(e,i,r){if(i.type!==a.P.TableCell)return;let s={i:i.i,j:i.j,textProps:r};return new n.g({id:e.id,infos:[s]})}}],u=(e,i,r)=>{for(let s of h)if(s.enable(i))return s.buildUpdateLog(e,i,r)}},799473:function(e,i,r){"use strict";var s,n,a,o;r.d(i,{c:()=>n,w:()=>s}),(a=s||(s={}))[a.DEFAULT=0]="DEFAULT",a[a.TEXT=1]="TEXT",a[a.SHAPE=2]="SHAPE",a[a.LINE=3]="LINE",a[a.PEN=4]="PEN",a[a.ERASER=5]="ERASER",a[a.IMAGE=6]="IMAGE",a[a.ICON=7]="ICON",a[a.WIRE_FRAME=8]="WIRE_FRAME",a[a.ADD_COMMENT=9]="ADD_COMMENT",a[a.HAND_TOOL=10]="HAND_TOOL",a[a.TABLE=11]="TABLE",a[a.TABLE_UML=12]="TABLE_UML",a[a.TABLE_ER=13]="TABLE_ER",a[a.LIFE_LINE_OBJECT=14]="LIFE_LINE_OBJECT",a[a.ACTIVATION=15]="ACTIVATION",a[a.COMBINED_FRAGMENT=16]="COMBINED_FRAGMENT",a[a.STICKY_NOTE=17]="STICKY_NOTE",a[a.SECTION=18]="SECTION",(o=n||(n={}))[o.IMAGE=0]="IMAGE",o[o.SVG=1]="SVG",o[o.WIRE_FRAME=2]="WIRE_FRAME"},838629:function(e,i,r){"use strict";r.d(i,{k:()=>h});var s=r(799473),n=r(797615);class a{constructor(e,i=0){this.tool=e,this.subTool=i,this.grabMode=!1,this.paintType=n.Y_.Invalid}}let o={width:20,colorCode:8,colorType:0,colorVersion:0};class l{constructor(){this.paintBrushConfig={[n.Y_.Invalid]:o,[n.Y_.Mark]:o,[n.Y_.Highlight]:o}}}class h{constructor(e,i){this.nodeManager=e,this.inputManager=i,this.currentTool=new a(s.w.DEFAULT),this.toolConfig=new l}setCurrentTool(e,i={}){let{shapeType:r=0,grabMode:s=!1,paintStrokeInfo:n,paintType:o,iconSourceInfo:l,wireFrameInfo:h}=i;this.currentTool=new a(e,r),this.currentTool.grabMode=s,n&&n.type&&(this.currentTool.paintType=n.type,this.toolConfig.paintBrushConfig[n.type]={width:n.width,colorCode:n.colorCode,colorType:n.colorType,colorVersion:n.colorVersion}),o&&(this.currentTool.paintType=o),l&&(this.currentTool.iconSourceInfo=l),h&&(this.currentTool.wireFrameInfo=h),this.toolChangeCallback&&this.toolChangeCallback(this.currentTool)}resetTool(){this.setCurrentTool(s.w.DEFAULT,{shapeType:0,grabMode:!1})}}},848790:function(e,i,r){"use strict";r.d(i,{O:()=>u});var s=r(752195),n=r(471890),a=r(976780),o=r(943451),l=r(460146),h=r(765487);class u{callbacks=[];_originalContentsMap=new Map;_isTranslating=!1;constructor(e){this._nodeManager=e}isTranslating(){return this._isTranslating}setActionManager(e){this._actionManager=e}onNodePropsUpdate(e){let i=[];for(let{nodeId:r,props:s}of e){let e=this._nodeManager.nodeMap.get(r);if(!e)continue;let n=[];s.forEach(e=>{e.type===a.d.Text?n.push({type:o.P.Main}):e.type===a.d.ExtraText?n.push({type:o.P.Extra}):e.type===a.d.ExtraText2?n.push({type:o.P.SubExtra}):e.type===a.d.Title?n.push({type:o.P.Title}):e.type===a.d.LineCaptions&&n.push({type:o.P.LineCaption})}),n.length>0&&i.push(...this.getTranslateContents(e,n))}i.length>0&&this.callbacks.forEach(e=>e(i))}onTableCellPropsUpdate({nodeId:e,cellInfos:i}){let r=this._nodeManager.nodeMap.get(e);if(!r)return;let s=[];if(i.forEach(({i:e,j:i,textProps:n})=>{n&&r.tableProps.cellMatrix.getCell(e,i)?.textProps&&s.push({type:o.P.TableCell,i:e,j:i})}),0===s.length)return;let n=this.getTranslateContents(r,s);n.length>0&&this.callbacks.forEach(e=>e(n))}registerTextChangeCallback(e){return -1===this.callbacks.indexOf(e)&&this.callbacks.push(e),()=>{let i=this.callbacks.indexOf(e);-1!==i&&this.callbacks.splice(i,1)}}handleStartTranslate(){if(this._isTranslating)return[...this._originalContentsMap].map(([,{nodeId:e,inputableTextMeta:i,textProps:r}])=>({nodeId:e,inputableTextMeta:i,text:(0,s.w)(r)}));this._isTranslating=!0;let e=[];for(let[,i]of this._nodeManager.nodeMap)e.push(...this.getTranslateContents(i));return e}getTranslateContents(e,i){if(!("getGraphicTexts"in e))return[];let r=[];return e.getGraphicTexts().forEach(n=>{let{graphicText:a,...h}=n;if(i&&!i.some(e=>h.type===o.P.TableCell&&e.type===o.P.TableCell?h.i===e.i&&h.j===e.j:h.type!==e.type))return;let u=a.textProps.clone();n.type===o.P.Title&&a instanceof l.l&&(u.text=a.titleProps.title);let c=this.getTranslatableTextPath(e.id,n);if(!u.text)return void this._originalContentsMap.delete(c);this._originalContentsMap.set(this.getTranslatableTextPath(e.id,n),{nodeId:e.id,inputableTextMeta:h,textProps:u}),r.push({nodeId:e.id,inputableTextMeta:h,text:(0,s.w)(u)})}),r}getOriginTextProps(e,i){let r=this.getTranslatableTextPath(e,i);return this._originalContentsMap.get(r)?.textProps}getTranslatableTextPath(e,i){let r=`${i.type}-${e}`;return i.type===o.P.TableCell&&(r+=`-${i.i}-${i.j}`),r}handleUpdateTranslate(e){for(let{nodeId:i,inputableTextMeta:r,text:s}of e){let e=this._nodeManager.getNode(i);if(!e)continue;let o=new n.i,l={type:a.d.Text,textCharProps:[]};o.convertTextV2(s,l);let u=(0,h.m)(e,r,l);u&&this._actionManager?.execActionWithoutNetwork(u)}}handleExitTranslate(){this._isTranslating=!1,this._originalContentsMap.forEach(({nodeId:e,inputableTextMeta:i,textProps:r})=>{let s=this._nodeManager.getNode(e);if(!s)return;let n=(0,h.m)(s,i,r);n&&this._actionManager?.execActionWithoutNetwork(n)}),this._originalContentsMap.clear()}}},107671:function(e,i,r){"use strict";r.d(i,{R:()=>o});var s=r(291418),n=r(797615),a=r(215702);class o{prefix="001";map=new Map;zIndex=0;resourceCount=0;constructor(e){this.nodeManager=e}static getTypeWithId(e){switch(e.charAt(0)){case"b":return n.Jq.Frame;case"d":return n.Jq.Rect;case"e":return n.Jq.Line;case"f":return n.Jq.CombinedFragment;case"g":case"h":return n.Jq.Ellipse;case"k":return n.Jq.Vector;case"m":return n.Jq.FocusGroup;case"n":return n.Jq.DirectFocusGroup;case"c":return n.Jq.Connector;case"a":return n.Jq.Text;case"o":return n.Jq.CompositeShape;case"p":return n.Jq.IconSource;case"q":return n.Jq.Table;case"r":return n.Jq.LifelineObject;case"s":return n.Jq.Activation;case"t":return n.Jq.Section;case"u":return n.Jq.TableUML;case"v":return n.Jq.TableER;case"w":return n.Jq.StickyNote;case"y":return n.Jq.Paint;case"z":return n.Jq.MindMapNode;default:return n.Jq.Fallback}}setPrefix(e){this.prefix=e}genId(e){let i=(this.map.get(e)||0)+1;return this.map.set(e,i),`${o.type2NodePrefix(e)+this.prefix}:${i}`}genFakeId(e){return`${o.type2NodePrefix(e)+"_fake_"}:${(0,a.Z)()}`}static genImgFileName(e,i){let r=`img:${e}|${i}`;return(0,s.Z)(r).toString()}loadNode(e,i){this.loadNodeId(e),this.recordZIndex(i)}loadNodeId(e){let i=o.nodePrefix2Type(e[0]),r=e.split(":");try{let e=Math.max(parseInt(r[1]),this.map.get(i)||0);this.map.set(i,e)}catch(e){console.error("id\u9519\u8BEF",e)}}loadResourceId(e){if(void 0===e)return;let i=e.split(":");try{let e=Math.max(parseInt(i[1]),this.resourceCount);this.resourceCount=e}catch(e){console.error("id\u9519\u8BEF",e)}}genResourceId(){let e=this.resourceCount+1;return this.resourceCount=e,`${"r"+this.prefix}:${e}`}recordZIndex(e){this.zIndex<e&&(this.zIndex=e)}genZIndex(e){return(this.nodeManager.getNode(e||"")||this.nodeManager.root).children.length}static type2NodePrefix(e){switch(e){case n.Jq.Text:return"a";case n.Jq.Frame:return"b";case n.Jq.Rect:return"d";case n.Jq.Line:return"e";case n.Jq.Ellipse:return"h";case n.Jq.Vector:return"k";case n.Jq.DirectFocusGroup:return"n";case n.Jq.Connector:return"c";case n.Jq.CompositeShape:return"o";case n.Jq.IconSource:return"p";case n.Jq.Table:return"q";case n.Jq.LifelineObject:return"r";case n.Jq.CombinedFragment:return"f";case n.Jq.Activation:return"s";case n.Jq.Section:return"t";case n.Jq.StickyNote:return"w";case n.Jq.TableUML:return"u";case n.Jq.TableER:return"v";case n.Jq.Paint:return"y";case n.Jq.MindMapNode:return"z";default:return"x"}}static nodePrefix2Type(e){switch(e){case"a":return n.Jq.Text;case"b":return n.Jq.Frame;case"d":return n.Jq.Rect;case"e":return n.Jq.Line;case"g":case"h":return n.Jq.Ellipse;case"k":return n.Jq.Vector;case"m":return n.Jq.FocusGroup;case"n":return n.Jq.DirectFocusGroup;case"c":return n.Jq.Connector;case"o":return n.Jq.CompositeShape;case"p":return n.Jq.IconSource;case"q":return n.Jq.Table;case"r":return n.Jq.LifelineObject;case"f":return n.Jq.CombinedFragment;case"s":return n.Jq.Activation;case"t":return n.Jq.Section;case"u":return n.Jq.TableUML;case"v":return n.Jq.TableER;case"w":return n.Jq.StickyNote;case"y":return n.Jq.Paint;case"z":return n.Jq.MindMapNode;default:return n.Jq.Fallback}}}},50629:function(e,i,r){"use strict";function s(){return window?.__whiteboardGlobal?.customLarkDriveProtocol?window?.__whiteboardGlobal?.customLarkDriveProtocol:"https://"}function n(){return window?.__whiteboardGlobal?.customLarkDriveHost?window?.__whiteboardGlobal?.customLarkDriveHost:window?.globalConfig?.drive_api?.[0]?window?.globalConfig?.drive_api?.[0]:""}function a(){return`${navigator?.cdn_host||"//lf-package-cn.feishucdn.com/obj/feishu-static"}/whiteboard_icon_source`}r.d(i,{Dy:()=>n,HK:()=>a,_o:()=>s})}}]);
"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["93903"],{686302:function(t,e,n){n.d(e,{Po:()=>a,ZP:()=>s});var i,r=n(520925),o=n(95523),a={1:"network",2:"network",3:"decoder",4:"format"},s=(Object.defineProperty(i=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null,src:null};if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var i=e&&e.i18n?e.i18n.ERROR_TYPES:null;if(e.video){var a=n.mediaError?n.mediaError:e.video.error||{},s=e.duration,u=e.currentTime,c=e.ended,l=e.src,f=e.currentSrc,p=e.video,h=p.readyState,d=p.networkState,y={playerVersion:r.Z,domain:document.domain,currentTime:u,duration:s,ended:c,readyState:h,networkState:d,src:n.src||l||f,errorType:n.errorType,errorCode:n.errorCode||a.code,message:n.errorMessage||a.message,mediaError:a,originError:n.originError?n.originError.stack:"",host:o.ZP.getHostFromUrl(l||f)};return n.ext&&Object.keys(n.ext).map(function(t){y[t]=n.ext[t]}),y}if(arguments.length>1){for(var v={playerVersion:r.Z,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],m=0;m<arguments.length;m++)v[g[m]]=arguments[m];return v.ex=i?(i[arguments[0]]||{}).msg:"",v}},"prototype",{writable:!1}),i)},486704:function(t,e,n){n.r(e),n.d(e,{ABORT:()=>E,AFTER_DEFINITION_CHANGE:()=>G,AUTOPLAY_PREVENTED:()=>A,AUTOPLAY_STARTED:()=>R,BEFORE_DEFINITION_CHANGE:()=>H,BUFFER_CHANGE:()=>O,BUFFER_CONTROLS:()=>M,CANPLAY:()=>p,CANPLAY_THROUGH:()=>h,COMPLETE:()=>j,CSS_FULLSCREEN_CHANGE:()=>B,DEFINITION_CHANGE:()=>U,DESTROY:()=>L,DOWNLOAD_SPEED_CHANGE:()=>N,DURATION_CHANGE:()=>d,EMPTIED:()=>_,ENDED:()=>o,ERROR:()=>s,FPS_STUCK:()=>ta,FULLSCREEN_CHANGE:()=>F,LOADED_DATA:()=>v,LOADED_METADATA:()=>g,LOAD_START:()=>P,MINI_STATE_CHANGE:()=>Z,PAUSE:()=>a,PIP_CHANGE:()=>Y,PLAY:()=>i,PLAYER_BLUR:()=>T,PLAYER_FOCUS:()=>w,PLAYING:()=>r,PLAYNEXT:()=>q,PROGRESS:()=>b,RATE_CHANGE:()=>m,READY:()=>C,REPLAY:()=>I,RESET:()=>tt,RETRY:()=>W,ROTATE:()=>z,SCREEN_SHOT:()=>X,SEEKED:()=>c,SEEKING:()=>u,SEI_PARSED:()=>V,SHORTCUT:()=>J,SOURCE_ERROR:()=>te,SOURCE_SUCCESS:()=>tn,STALLED:()=>k,STATS_EVENTS:()=>to,SUSPEND:()=>S,SWITCH_SUBTITLE:()=>ti,TIME_UPDATE:()=>l,URL_CHANGE:()=>D,URL_NULL:()=>x,USER_ACTION:()=>Q,VIDEO_EVENTS:()=>tr,VIDEO_RESIZE:()=>K,VOLUME_CHANGE:()=>y,WAITING:()=>f,XGLOG:()=>$});var i="play",r="playing",o="ended",a="pause",s="error",u="seeking",c="seeked",l="timeupdate",f="waiting",p="canplay",h="canplaythrough",d="durationchange",y="volumechange",v="loadeddata",g="loadedmetadata",m="ratechange",b="progress",P="loadstart",_="emptied",k="stalled",S="suspend",E="abort",O="bufferedChange",w="focus",T="blur",C="ready",x="urlNull",R="autoplay_started",A="autoplay_was_prevented",j="complete",I="replay",L="destroy",D="urlchange",N="download_speed_change",M="buffer_control",F="fullscreen_change",B="cssFullscreen_change",Z="mini_state_change",U="definition_change",H="before_definition_change",G="after_definition_change",V="SEI_PARSED",W="retry",K="video_resize",Y="pip_change",z="rotate",X="screenShot",q="playnext",J="shortcut",$="xglog",Q="user_action",tt="reset",te="source_error",tn="source_success",ti="switch_subtitle",tr=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],to={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},ta="fps_stuck"},67934:function(t,e,n){n.d(e,{Z:()=>oO});var i,r=n(421883),o=n.n(r),a=n(95523),s=n(928243),u=n(686302),c=n(486704);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==l(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){this&&this.emit&&("error"===t?this.errorHandler(t,e.error):this.emit(t,e))}var v=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&h(r,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=d(r);return t=e?Reflect.construct(n,arguments,d(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function r(t){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");(e=i.call(this,t))._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype=t.vtype||"MP4",e._rate=-1,e.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:0|t.tabindex,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var e,n=t["x5-video-player-type"]||t.x5VideoPlayerType;return s.Z.isWeixin&&s.Z.os.isAndroid&&n&&(e.videoConfig["x5-video-player-type"]=n,delete e.videoConfig.playsinline,delete e.videoConfig["webkit-playsinline"],delete e.videoConfig["x5-playsinline"]),t.loop&&(e.videoConfig.loop="loop"),e.video=a.ZP.createDom(e.videoConfig.mediaType,"",e.videoConfig,""),t.defaultPlaybackRate&&(e.video.defaultPlaybackRate=e.video.playbackRate=t.defaultPlaybackRate),"Number"===a.ZP.typeOf(t.volume)&&(e.volume=t.volume),t.autoplayMuted&&(e.video.muted=!0,e._lastMuted=!0),t.autoplay&&(e.video.autoplay=!0),e._interval={},e.videoEventMiddleware={},e.attachVideoEvents(),e}return n=[{key:"setEventsMiddleware",value:function(t){var e=this;Object.keys(t).map(function(n){e.videoEventMiddleware[n]=t[n]})}},{key:"removeEventsMiddleware",value:function(t){var e=this;Object.keys(t).map(function(t){delete e.videoEventMiddleware[t]})}},{key:"attachVideoEvents",value:function(t){var e=this;this.evHandlers||(this._evHandlers=c.VIDEO_EVENTS.map(function(t){var n,i,r,o;return i={},r=t,e[n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1))]&&"function"==typeof e[n]&&e.on(t,e[n]),o=function(n,i){var r={player:e,eventName:t,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:e.currentTime,duration:e.duration,paused:e.paused,ended:e.ended,isInternalOp:!!e._internalOp[n.type],muted:e.muted,volume:e.volume,host:a.ZP.getHostFromUrl(e.currentSrc),vtype:e.vtype};if(e.removeInnerOP(n.type),"timeupdate"===t&&(e._currentTime=e.video&&e.video.currentTime),"ratechange"===t){var o=e.video?e.video.playbackRate:0;if(o&&e._rate===o)return;e._rate=e.video&&e.video.playbackRate}if("durationchange"===t&&(e._duration=e.video.duration),"volumechange"===t&&(r.isMutedChange=e._lastMuted!==e.muted,e._lastMuted=e.muted),"error"===t&&(r.error=i||e.video.error),e.videoEventMiddleware[t]){var s=y.bind(e,t,r);try{e.videoEventMiddleware[t].call(e,r,s)}catch(n){throw y.call(e,t,r),n}}else y.call(e,t,r)},(r=f(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,i})),t||(t=this.video),this._evHandlers.forEach(function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)})}},{key:"detachVideoEvents",value:function(t){t||(t=this.video),this._evHandlers.map(function(e){var n=Object.keys(e)[0];t.removeEventListener(Object.keys(e)[0],e[n],!1)})}},{key:"_attachSourceEvents",value:function(t,e){var n=this;t.removeAttribute("src"),t.load(),t.removeEventListener("loadeddata",this._vLoadeddata),e.forEach(function(t){n.video.appendChild(a.ZP.createDom("source","",{src:"".concat(t.src),type:"".concat(t.type||"")}))});var i=t.children;if(i){this._videoSourceCount=i.length,this._vLoadeddata=function(t){n.emit(c.SOURCE_SUCCESS,{src:t.target.currentSrc,host:a.ZP.getHostFromUrl(t.target.currentSrc)})};for(var r=null,o=0;o<this._evHandlers.length;o++)if("error"===Object.keys(this._evHandlers[o])[0]){r=this._evHandlers[o];break}this._sourceError||(this._sourceError=function(t){if(n._videoSourceCount--,0===n._videoSourceCount){var e={code:4,message:"sources_load_error"};r?r.error(t,e):n.errorHandler("error",e)}var i=u.Po["4"];n.emit(c.SOURCE_ERROR,new u.ZP(n,{errorType:i,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:t.target.src}))});for(var s=0;s<i.length;s++)i[s].addEventListener("error",this._sourceError);t.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(t){var e=t.children;if(e&&0!==e.length&&this._sourceError){for(var n=0;n<e.length;n++)e[n].removeEventListener("error",this._sourceError);for(;e.length>0;)t.removeChild(e[0]);this._vLoadeddata&&t.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||e)){var n=this.video.error||e,i=n.code?u.Po[n.code]:"other",r=n.message||"";this.video.currentSrc||(n={code:6,message:"empty_src_".concat(n.message)}),this.emit(t,new u.ZP(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(t){"boolean"==typeof t&&(this._hasStart=t,this.emit("hasstart"))}},{key:"destroy",value:function(){var t=this;for(var e in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this._evHandlers.map(function(e){var n=Object.keys(e)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof t[i]&&t.off(n,t[i])}),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"canPlayType",value:function(t){return!!this.video&&this.video.canPlayType(t)}},{key:"getBufferedRange",value:function(t){var e=[0,0];if(!this.video)return e;t||(t=this.video.buffered);var n=this.video.currentTime;if(t)for(var i=0,r=t.length;i<r&&(e[0]=t.start(i),e[1]=t.end(i),!(e[0]<=n)||!(n<=e[1]));i++);return e[0]-n<=0&&n-e[1]<=0?e:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(t){this.video&&(this.video.autoplay=t)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?a.ZP.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var t={start:0,end:0};if(!this.video)return t;var e=this.video.buffered;if(!e||0===e.length)return t;for(var n=0;n<e.length;n++)if((e.start(n)<=this.currentTime||.1>e.start(n))&&e.end(n)>=this.currentTime)return{start:e.start(n),end:e.end(n)};return t}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(t){this.video&&(this.video.crossOrigin=t)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(t){this.video&&(this.video.currentSrc=t)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(t){this.video&&(this.video.currentTime=t)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(t){this.video&&(this.video.defaultMuted=t)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video&&this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:null}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(t){this.video&&(this.video.loop=t)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(t){this.video&&this.video.muted!==t&&(this._lastMuted=this.video.muted,this.video.muted=t)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(t){this.video&&t!==1/0&&(this.video.defaultPlaybackRate=t,this.video.playbackRate=t)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(t){this.video&&(this.video.preload=t)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(t){if(this.video){if(this.emit(c.URL_CHANGE,t),this.emit(c.WAITING),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src))return void this.onWaiting();this._detachSourceEvents(this.video),"Array"===a.ZP.typeOf(t)?this._attachSourceEvents(this.video,t):t?this.video.src=t:this.video.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(t){t!==1/0&&this.video&&(this.video.volume=t)}},{key:"addInnerOP",value:function(t){this._internalOp[t]=!0}},{key:"removeInnerOP",value:function(t){delete this._internalOp[t]}},{key:"emit",value:function(t,e){for(var n,i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=p(d(r.prototype),"emit",this)).call.apply(n,[this,t,e].concat(o))}},{key:"on",value:function(t,e){for(var n,i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=p(d(r.prototype),"on",this)).call.apply(n,[this,t,e].concat(o))}},{key:"once",value:function(t,e){for(var n,i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=p(d(r.prototype),"once",this)).call.apply(n,[this,t,e].concat(o))}},{key:"off",value:function(t,e){for(var n,i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=p(d(r.prototype),"off",this)).call.apply(n,[this,t,e].concat(o))}},{key:"offAll",value:function(){p(d(r.prototype),"removeAllListeners",this).call(this)}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,f(i.key),i)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(o());function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return t=[{key:"openDB",value:function(t){var e=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(t){},r.onsuccess=function(i){e.myDB.db=i.target.result,t.call(n)},r.onupgradeneeded=function(t){var e=t.target.result;t.target.transaction,e.objectStoreNames.contains(n.myDB.ojstore.name)||e.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.add(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.put(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(t,e,n){var i=this,r=this.myDB.db.transaction(t,"readwrite").objectStore(t).get(e);r.onerror=function(){n.call(i,null)},r.onsuccess=function(t){var e=t.target.result;n.call(i,e)}}},{key:"deleteData",value:function(t,e){this.myDB.db.transaction(t,"readwrite").objectStore(t).delete(e)}},{key:"clearData",value:function(t){this.myDB.db.transaction(t,"readwrite").objectStore(t).clear()}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==g(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(),b=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],P=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],_=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],k="data-xgplayerid",S={BUFFER_CONTROLS:"buffer_control"},E={PLAYING:"playing",WAITING:"waiting"},O=n(249860),w=n(184734),T=n(546738),C=n.n(T);function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==I(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===I(e)?e:String(e)}(i.key),i)}}function R(){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function A(t,e){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var L={CONTROLS:"controls",ROOT:"root"},D={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},N="xg-icon-disable";function M(t){return!!t&&t.indexOf&&/^(?:http|data:|\/)/.test(t)}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(t instanceof window.Element)return a.ZP.addClass(t,n),Object.keys(i).map(function(e){t.setAttribute(e,i[e])}),t;if(M(t)||M(t.url))return i.src=M(t)?t:t.url||"",o=a.ZP.createDom(t.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof t)try{if((o=t())instanceof window.Element)return a.ZP.addClass(o,n),Object.keys(i).map(function(t){o.setAttribute(t,i[t])}),o;return O.Z.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null}catch(t){return O.Z.logError("Plugin named [".concat(r,"]:createIcon"),t),null}return"string"==typeof t?a.ZP.createDomFromHtml(t,i,n):(O.Z.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is invalid")),null)}var B=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&A(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=j(o);return t=e?Reflect.construct(n,arguments,j(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return(t=r.call(this,e)).__delegates=[],t}return n=[{key:"__init",value:function(t){if(R(j(o.prototype),"__init",this).call(this,t),t.root){var e,n,i,r,s,u=t.root,c=null;this.icons={},this.root=null,this.parent=null,e=this.registerIcons()||{},n=this,i=n.config.icons||n.playerConfig.icons,Object.keys(e).map(function(t){var r,o,a,s,u=e[t],c=u&&u.class?u.class:"",l=u&&u.attr?u.attr:{},f=null;i&&i[t]&&(r=i[t],o=c,c="object"===I(r)&&r.class&&"string"==typeof r.class?"".concat(o," ").concat(r.class):o,a=i[t],s=l,"object"===I(a)&&a.attr&&"object"===I(a.attr)&&Object.keys(a.attr).map(function(t){s[t]=a.attr[t]}),l=s,f=F(i[t],t,c,l,n.pluginName)),!f&&u&&(f=F(u.icon?u.icon:u,l,c,{},n.pluginName)),n.icons[t]=f}),this.langText={},r=this.registerLanguageTexts()||{},s=this,Object.keys(r).map(function(t){Object.defineProperty(s.langText,t,{get:function(){var e=s.lang,n=s.i18n;return n[t]?n[t]:r[t]&&r[t][e]||""}})});var l="";try{l=this.render()}catch(t){throw O.Z.logError("Plugin:".concat(this.pluginName,":render"),t),Error("Plugin:".concat(this.pluginName,":render:").concat(t.message))}if(l)(c=o.insert(l,u,t.index)).setAttribute("data-index",t.index);else{if(!t.tag)return;(c=a.ZP.createDom(t.tag,"",t.attr,t.name)).setAttribute("data-index",t.index),u.appendChild(c)}this.root=c,this.parent=u;var f=this.config.attr||{},p=this.config.style||{};this.setAttr(f),this.setStyle(p),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var t=this;if(this.root){this._children=[];var e=this.children();e&&"object"===I(e)&&Object.keys(e).length>0&&Object.keys(e).map(function(n){var i,r,o=e[n],s={root:t.root};"function"==typeof o?(i=t.config[n]||{},r=o):"object"===I(o)&&"function"==typeof o.plugin&&(i=o.options?a.ZP.deepCopy(t.config[n]||{},o.options):t.config[n]||{},r=o.plugin),s.config=i,void 0!==i.index&&(s.index=i.index),i.root&&(s.root=i.root),t.registerPlugin(r,s,n)})}}},{key:"updateLang",value:function(t){t||(t=this.lang);var e=this.root,n=this.i18n,i=this.langText;e&&function t(e,n){for(var i=0;i<e.children.length;i++)e.children[i].children.length>0?t(e.children[i],n):n(e.children[i])}(e,function(e){var r=e.getAttribute&&e.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(e.innerHTML="function"==typeof o?o(t):o)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;t.setAttribute&&t.setAttribute("lang-key",e);var r=n[e]||i[e]||"";r&&(t.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,a.ZP.addClass(this.find(".xgplayer-icon"),N)}},{key:"enable",value:function(){this.config.disable=!1,a.ZP.removeClass(this.find(".xgplayer-icon"),N)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.root=e.root||this.root;var i=R(j(o.prototype),"registerPlugin",this).call(this,t,e,n);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(t){if(this.root)return this.root.querySelector(t)}},{key:"bind",value:function(t,e,n){var i=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach(function(t){i.bindEL(t,e)}):this.bindEL(t,e);else{var r=o.delegate.call(this,this.root,t,e,n);this.__delegates=this.__delegates.concat(r)}}},{key:"unbind",value:function(t,e){var n=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach(function(t){n.unbindEL(t,e)}):this.unbindEL(t,e);else for(var i="".concat(t,"_").concat(e),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(t,e){var n=this;if(this.root)if("String"===a.ZP.typeOf(t))return this.root.style[t]=e;else"Object"===a.ZP.typeOf(t)&&Object.keys(t).map(function(e){n.root.style[e]=t[e]})}},{key:"setAttr",value:function(t,e){var n=this;if(this.root)if("String"===a.ZP.typeOf(t))return this.root.setAttribute(t,e);else"Object"===a.ZP.typeOf(t)&&Object.keys(t).map(function(e){n.root.setAttribute(e,t[e])})}},{key:"setHtml",value:function(t,e){this.root&&(this.root.innerHTML=t,"function"==typeof e&&e())}},{key:"bindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.addEventListener(t,e,n)}},{key:"unbindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.removeEventListener(t,e,n)}},{key:"show",value:function(t){if(this.root&&(this.root.style.display=void 0!==t?t:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")))return this.root.style.display="block"}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(t,e){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!e||!(e instanceof window.Element))return null;try{if("string"==typeof t)return this.find(t).appendChild(e);return t.appendChild(e)}catch(t){return O.Z.logError("Plugin:appendChild",t),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var t=this,e=this.player;this.__delegates.map(function(t){t.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(t){e.unRegisterPlugin(t.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),R(j(o.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(e){t[e]=null})}}],i=[{key:"insert",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.children.length,r=Number(n),o=t instanceof window.Node;if(!i)return o?e.appendChild(t):e.insertAdjacentHTML("beforeend",t),e.children[e.children.length-1];for(var a=0,s=null,u="";a<i;a++){var c=Number((s=e.children[a]).getAttribute("data-index"));if(c>=r){u="beforebegin";break}c<r&&(u="afterend")}return o?"afterend"===u?e.appendChild(t):e.insertBefore(t,s):s.insertAdjacentHTML(u,t),"afterend"===u?e.children[e.children.length-1]:e.children[a]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(t instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach(function(n){var a=C()(t,e,n,i,r);a.key="".concat(e,"_").concat(n),o.push(a)});else{var a=C()(t,e,n,i,r);a.key="".concat(e,"_").concat(n),o.push(a)}return o}},{key:"ROOT_TYPES",get:function(){return L}},{key:"POSITIONS",get:function(){return D}}],n&&x(o.prototype,n),i&&x(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(w.ZP);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t){var e=function(t,e){if("object"!==Z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Z(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Z(e)?e:String(e)}var H=function(){var t;function e(){var t,n,i=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(t="__trigger",n=function(t){i.timeStamp=new Date().getTime();for(var e=0;e<t.length;e++)i.__runHandler(t[e].target)},(t=U(t))in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((0,a.P2)(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(t){console.error(t)}}return t=[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=t.getAttribute(k),i=this.__handlers,r=-1,o=0;o<i.length;o++)i[o]&&t===i[o].target&&(r=o);r>-1?this.__handlers[r].handler=e:this.__handlers.push({target:t,handler:e,playerId:n})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map(function(n,i){t===n.target&&(e=i)});try{this.observer&&this.observer.unobserve(t)}catch(t){}this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t){for(var e=this.__handlers,n=0;n<e.length;n++)if(e[n]&&t===e[n].target){try{e[n].handler(t)}catch(t){console.error(t)}return!0}return!1}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,U(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(),G=null,V={pluginGroup:{},init:function(t){var e,n=t._pluginInfoId;n||(t._pluginInfoId=n=new Date().getTime()),t.config.closeResizeObserver||(e=t.root,G||(G=new H),G.addObserver(e,function(){t.getVideoSize()})),0===Object.keys(this.pluginGroup).length&&(t.isUserActive=!0),this.pluginGroup[n]={_player:t,_originalOptions:t.config||{},_plugins:{}}},checkPlayerRoot:function(t){if(this.pluginGroup)for(var e=Object.keys(this.pluginGroup),n=0;n<e.length;n++){var i=this.pluginGroup[e[n]]._player;if(i.root===t)return i}return null},formatPluginInfo:function(t,e){var n=null,i=null;return t.plugin&&"function"==typeof t.plugin?(n=t.plugin,i=t.options):(n=t,i={}),e&&(i.config=e||{}),{PLUFGIN:n,options:i}},checkPluginIfExits:function(t,e){for(var n=0;n<e.length;n++)if(t.toLowerCase()===e[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(t,e){for(var n=Object.keys(e),i=null,r=0;r<n.length;r++)if(t.toLowerCase()===n[r].toLowerCase()){i=e[n[r]];break}return"Object"===a.ZP.typeOf(i)?{root:i.root,position:i.position}:{}},lazyRegister:function(t,e){var n=this,i=e.timeout||1500;return Promise.race([e.loader().then(function(e){var i;i=e&&e.__esModule?e.default:e,n.register(t,i,e.options)}),new Promise(function(t,e){setTimeout(function(){e(Error("timeout"))},i)})])},register:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e&&"function"==typeof e&&void 0!==e.prototype){var i=t._pluginInfoId;if(i&&this.pluginGroup[i]){this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins={});var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||e.pluginName;if(!s)throw Error("The property pluginName is necessary");if(e.isSupported&&!e.isSupported())return void console.warn("not supported plugin [".concat(s,"]"));n.config||(n.config={});for(var u=Object.keys(o),c=0;c<u.length;c++)if(s.toLowerCase()===u[c].toLowerCase()){var l=o[u[c]];"Object"===a.ZP.typeOf(l)&&(n.config=Object.assign({},n.config,o[u[c]]));break}e.defaultConfig&&Object.keys(e.defaultConfig).forEach(function(t){void 0===n.config[t]&&(n.config[t]=e.defaultConfig[t])}),n.root?"string"==typeof n.root&&(n.root=t[n.root]):n.root=t.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var f=new e(n);return r[s.toLowerCase()]=f,r[s.toLowerCase()].func=e,f&&"function"==typeof f.afterCreate&&f.afterCreate(),f}catch(t){throw console.error(t),t}}}},unRegister:function(t,e){t._pluginInfoId&&(t=t._pluginInfoId),e=e.toLowerCase();try{var n=this.pluginGroup[t]._plugins[e];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[t]._plugins[e])}catch(n){console.error("[unRegister:".concat(e,"] cgid:[").concat(t,"] error"),n)}},deletePlugin:function(t,e){var n=t._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[e]},getPlugins:function(t){var e=t._pluginInfoId;return e&&this.pluginGroup[e]?this.pluginGroup[e]._plugins:{}},findPlugin:function(t,e){var n=t._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var i=e.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(t){var e=this;function n(t){return t&&t.then?t:new Promise(function(t){t()})}return new Promise(function(i){if(e.pluginGroup)return(t._loadingPlugins&&t._loadingPlugins.length?Promise.all(t._loadingPlugins):Promise.resolve()).then(function(){var r=t._pluginInfoId;if(!e.pluginGroup[r])return void i();var o=e.pluginGroup[r]._plugins,a=[];Object.keys(o).forEach(function(t){if(o[t]&&o[t].beforePlayerInit)try{var e=o[t].beforePlayerInit();a.push(n(e))}catch(t){throw a.push(n(null)),t}}),Promise.all([].concat(a)).then(function(){i()}).catch(function(t){console.error(t),i()})})})},afterInit:function(t){var e=t._pluginInfoId;if(e&&this.pluginGroup[e]){var n=this.pluginGroup[e]._plugins;Object.keys(n).forEach(function(t){n[t]&&n[t].afterPlayerInit&&n[t].afterPlayerInit()})}},setLang:function(t,e){var n=e._pluginInfoId;if(n&&this.pluginGroup[n]){var i=this.pluginGroup[n]._plugins;Object.keys(i).forEach(function(e){if(i[e].updateLang)i[e].updateLang(t);else try{i[e].lang=t}catch(t){console.warn("".concat(e," setLang"))}})}},reRender:function(t){var e=this,n=t._pluginInfoId;if(n&&this.pluginGroup[n]){var i=[],r=this.pluginGroup[n]._plugins;Object.keys(r).forEach(function(t){"controls"!==t&&r[t]&&(i.push({plugin:r[t].func,options:r[t].__args}),e.unRegister(n,t))}),i.forEach(function(n){e.register(t,n.plugin,n.options)})}},onPluginsReady:function(t){var e=t._pluginInfoId;if(e&&this.pluginGroup[e]){var n=this.pluginGroup[e]._plugins||{};Object.keys(n).forEach(function(t){n[t].onPluginsReady&&"function"==typeof n[t].onPluginsReady&&n[t].onPluginsReady()})}},setCurrentUserActive:function(t,e){if(this.pluginGroup[t]){if(!e)return this.pluginGroup[t]._player.isUserActive=e,t;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];r&&r._player&&(this.pluginGroup[n[i]]._player.isUserActive=!1)}return this.pluginGroup[t]._player.isUserActive=e,t}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var n=this.pluginGroup[t[e]];if(n&&n._player&&n._player.isUserActive)return t[e]}return null}},destroy:function(t){var e=t._pluginInfoId;if(this.pluginGroup[e]){n=t.root,G.unObserver(n,void 0);for(var n,i=this.pluginGroup[e]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var a=o[r];this.unRegister(e,a)}var s=t.isUseActive;if(delete this.pluginGroup[e],delete t._pluginInfoId,s){var u=Object.keys(this.pluginGroup);u.length>0&&this.setCurrentUserActive(u[u.length-1],!0)}}}},W={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function K(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(0,a.VQ)(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function Y(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return z(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var X=function(t,e){var n,i,r=e.preset&&e.options?new e.preset(e.options,t.config):new e({},t.config),o=r.plugins,a=r.ignores,s=r.icons,u=void 0===s?{}:s,c=r.i18n,l=void 0===c?[]:c;t.config.plugins||(t.config.plugins=[]),t.config.ignores||(t.config.ignores=[]),(n=t.config.plugins).push.apply(n,Y(void 0===o?[]:o)),(i=t.config.ignores).push.apply(i,Y(void 0===a?[]:a)),Object.keys(u).map(function(e){t.config.icons[e]||(t.config.icons[e]=u[e])});var f=t.config.i18n||[];l.push.apply(l,Y(f)),t.config.i18n=l},q=n(559146);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tr(i.key),i)}}function Q(){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tt(t,e){return(tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function te(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ti(t,e,n){return(e=tr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tr(t){var e=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==J(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===J(e)?e:String(e)}var to=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&tt(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tn(o);return t=e?Reflect.construct(n,arguments,tn(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return te(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return ti(te(t=r.call.apply(r,[this].concat(n))),"onMouseEnter",function(e){var n=te(t),i=n.player;n.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})}),ti(te(t),"onMouseLeave",function(){te(t).player.focus()}),t}return i=[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}],n=[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.controls&&(t.config.disable=!t.player.config.controls),t.config.mode||"mobile"!==s.Z.device||(t.config.mode="flex"),t.player.config.marginControls&&(t.config.autoHide=!1)}},{key:"afterCreate",value:function(){var t=this,e=this.config,n=e.disable,i=e.height,r=e.mode,o=e.autoHide;if(!n){"flex"===r&&this.player.addClass(W.FLEX_CONTROLS),o&&this.player.addClass(W.AUTOHIDE);var u={height:"".concat(i,"px")};Object.keys(u).map(function(e){t.root.style[e]=u[e]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(c.MINI_STATE_CHANGE,function(e){e?a.ZP.addClass(t.root,"mini-controls"):a.ZP.removeClass(t.root,"mini-controls")});var l=this.playerConfig.isMobileSimulateMode;"mobile"!==s.Z.device&&"mobile"!==l&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&a.ZP.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){a.ZP.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var i=t.defaultConfig||{};if(!e.root){switch(e.position?e.position:e.config&&e.config.position?e.config.position:i.position){case D.CONTROLS_LEFT:e.root=this.left;break;case D.CONTROLS_RIGHT:e.root=this.right;break;case D.CONTROLS_CENTER:e.root=this.center;break;case D.CONTROLS:e.root=this.root;break;default:e.root=this.left}return Q(tn(o.prototype),"registerPlugin",this).call(this,t,e,n)}}}},{key:"destroy",value:function(){"mobile"!==s.Z.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var t=this.config,e=t.mode,n=t.autoHide,i=t.initShow;if(!t.disable){var r=a.ZP.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===e},{"bottom-controls":"bottom"===e},{control_autohide:n},{controls_permanent:!n},{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],$(o.prototype,n),i&&$(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B),ta=n(642476),ts=n(520925);function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function tl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tc(Object(n),!0).forEach(function(e){tg(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tc(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function tf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tm(i.key),i)}}function tp(){return(tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tv(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function th(t,e){return(th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function td(t,e){if(e&&("object"===tu(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ty(t)}function ty(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tv(t){return(tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tg(t,e,n){return(e=tm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tm(t){var e=function(t,e){if("object"!==tu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tu(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tu(e)?e:String(e)}var tb=["play","pause","replay","retry","playnext"],tP=0,t_=0,tk=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&th(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tv(o);return t=e?Reflect.construct(n,arguments,tv(this).constructor):n.apply(this,arguments),td(this,t)});function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");var e,n=a.ZP.deepMerge(K(),t);tg(ty(e=r.call(this,n)),"canPlayFunc",function(){if(e.config){var t=e.config,n=t.autoplay,i=t.startTime,r=t.defaultPlaybackRate;O.Z.logInfo("player","canPlayFunc, startTime",i),i&&(e.currentTime=i>e.duration?e.duration:i,e.config.startTime=0),e.playbackRate=r,n&&e.videoPlay(),e.off(c.CANPLAY,e.canPlayFunc),e.removeClass(W.ENTER)}}),tg(ty(e),"onFullscreenChange",function(t,n){var i=function(){a.ZP.setTimeout(ty(e),function(){e.getVideoSize()},100)},r=a.ZP.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(c.USER_ACTION,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=(0,a.F7)(r,e.playerId,k);if(n||r&&(r===e._fullscreenEl||o))i(),e.config.closeFocusVideoFocus||e.video.focus(),e.fullscreen=!0,e.emit(c.FULLSCREEN_CHANGE,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){i();var s=ty(e),u=s._fullScreenOffset;s.config.needFullscreenScroll?(window.scrollTo(u.left,u.top),a.ZP.setTimeout(ty(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(e.config.closeFocusVideoFocus||e.video.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(W.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,W.FULLSCREEN),e._fullscreenEl=null,e.emit(c.FULLSCREEN_CHANGE,!1)}}),tg(ty(e),"_onWebkitbeginfullscreen",function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)}),tg(ty(e),"_onWebkitendfullscreen",function(t){e.onFullscreenChange(t,!1)}),(0,q.ZP)(ty(e),tb),e.config=n,e._pluginInfoId=a.ZP.generateSessionId(),(0,O.w)(ty(e));var i=e.constructor.defaultPreset;if(e.config.presets.length){var u=e.config.presets.indexOf("default");u>=0&&i&&(e.config.presets[u]=i)}else i&&e.config.presets.push(i);return(e.userTimer=null,e.waitTimer=null,e.isReady=!1,e.isPlaying=!1,e.isError=!1,e.isSeeking=!1,e.isCanplay=!1,e._runPending=!1,e.rotateDeg=0,e.isActive=!1,e.isBufferControlPaused=!1,e.isCssfullScreen=!1,e.fullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.topBar=null,e.root=null,e.__i18n=ta.Z.init(),s.Z.os.isAndroid&&s.Z.osVersion>0&&s.Z.osVersion<6&&(e.config.autoplay=!1),e.database=new m,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e._initDOM())?(e._bindEvents(),e._registerPresets(),e._registerPlugins(),V.onPluginsReady(ty(e)),a.ZP.setTimeout(ty(e),function(){e.emit(c.READY),e.onReady&&e.onReady(),e.isReady=!0},0),e.getInitDefinition(),(e.config.videoInit||e.config.autoplay)&&!e.hasStart&&e.start(),e):(console.error(Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),td(e))}return n=[{key:"_initDOM",value:function(){var t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit(c.ERROR,new u.ZP("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=e}var n=V.checkPlayerRoot(this.root);n&&(O.Z.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(k,this.playerId),V.init(this),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.video.setAttribute(k,this.playerId),this.config.controls){var a=V.register(this,to);this.controls=a}var l="mobile"===this.config.isMobileSimulateMode?"mobile":s.Z.device;if(this.addClass("".concat(W.DEFAULT," ").concat(W.ACTIVE," xgplayer-").concat(l," ").concat(this.config.controls?"":W.NO_CONTROLS)),this.config.autoplay?this.addClass(W.ENTER):this.addClass(W.NO_START),this.config.fluid){var f={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(100*this.config.height/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(f).map(function(e){t.root.style[e]=f[e]})}else["width","height"].map(function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=a.ZP.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=a.ZP.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=a.ZP.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=a.ZP.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var t=this;["focus","blur"].forEach(function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),b.forEach(function(e){document&&document.addEventListener(e,t.onFullscreenChange)}),s.Z.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){t.config.closeFocusVideoFocus||t.video.focus()},this.once("play",this.playFunc),this.on(c.BUFFER_CONTROLS,this.onBufferControl)}},{key:"_unbindEvents",value:function(){var t=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),b.forEach(function(e){document.removeEventListener(e,t.onFullscreenChange)}),this.playFunc&&this.off("play",this.playFunc),this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(t){var e=this;if(this.video){if((!t||""===t||"Array"===a.ZP.typeOf(t)&&0===t.length)&&(t="",this.emit(c.URL_NULL),O.Z.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))return;this._detachSourceEvents(this.video),"Array"===a.ZP.typeOf(t)&&t.length>0?this._attachSourceEvents(this.video,t):this.video.src&&this.video.src===t?t||this.video.removeAttribute("src"):this.video.src=t,"Number"===a.ZP.typeOf(this.config.volume)&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;O.Z.logInfo("_startInit readyState",i),this.config.autoplay&&(/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)||this.load(),(s.Z.os.isIpad||s.Z.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(c.CANPLAY,this.canPlayFunc),a.ZP.setTimeout(this,function(){e.emit(c.COMPLETE)},1),this.hasStart||V.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var t=this,e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],i=this.config.plugins||[],r=this.config.i18n||[];e&&ta.Z.extend(r,this.__i18n);var o=n.join("||").toLowerCase().split("||"),s=this.plugins;i.forEach(function(n){try{var i=n.plugin?n.plugin.pluginName:n.pluginName;if(!i)return;var r=i.toLowerCase(),u=t.config[r]||t.config[i];if("Boolean"===a.ZP.typeOf(u)&&!u||o.indexOf(r)>-1||!e&&s[r])return;if(n.lazy&&n.loader){var c=V.lazyRegister(t,n);n.forceBeforeInit&&(c.then(function(){t._loadingPlugins.splice(t._loadingPlugins.indexOf(c),1)}).catch(function(e){O.Z.logError("_registerPlugins:loadingPlugin",e),t._loadingPlugins.splice(t._loadingPlugins.indexOf(c),1)}),t._loadingPlugins.push(c));return}return t.registerPlugin(n)}catch(t){O.Z.logError("_registerPlugins:",t)}})}},{key:"_registerPresets",value:function(){var t=this;this.config.presets.forEach(function(e){X(t,e)})}},{key:"_getRootByPosition",value:function(t){var e=null;switch(t){case D.ROOT_RIGHT:e=this.rightBar;break;case D.ROOT_LEFT:e=this.leftBar;break;case D.ROOT_TOP:e=this.topBar;break;default:e=this.innerContainer||this.root}return e}},{key:"registerPlugin",value:function(t,e){var n=V.formatPluginInfo(t,e),i=n.PLUFGIN,r=n.options,o=this.config.plugins;V.checkPluginIfExits(i.pluginName,o)||o.push(i);var a=V.getRootByConfig(i.pluginName,this.config);a.root&&(r.root=a.root),a.position&&(r.position=a.position);var s=r.position?r.position:r.config&&r.config.position||i.defaultConfig&&i.defaultConfig.position;return!r.root&&"string"==typeof s&&s.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(i,r,i.pluginName):(r.root||(r.root=this._getRootByPosition(s)),V.register(this,i,r))}},{key:"deregister",value:function(t){"string"==typeof t?V.unRegister(this,t):t instanceof w.ZP&&V.unRegister(this,t.pluginName)}},{key:"unRegisterPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(t),e&&this.removePluginFromConfig(t)}},{key:"removePluginFromConfig",value:function(t){var e;if("string"==typeof t?e=t:t instanceof w.ZP&&(e=t.pluginName),e){for(var n=this.config.plugins.length-1;n>-1;n--)if(this.config.plugins[n].pluginName.toLowerCase()===e.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return V.getPlugins(this)}},{key:"getPlugin",value:function(t){var e=V.findPlugin(this,t);return e&&e.pluginName?e:null}},{key:"addClass",value:function(t){this.root&&(a.ZP.hasClass(this.root,t)||a.ZP.addClass(this.root,t))}},{key:"removeClass",value:function(t){this.root&&a.ZP.removeClass(this.root,t)}},{key:"hasClass",value:function(t){if(this.root)return a.ZP.hasClass(this.root,t)}},{key:"setAttribute",value:function(t,e){this.root&&this.root.setAttribute(t,e)}},{key:"removeAttribute",value:function(t,e){this.root&&this.root.removeAttribute(t,e)}},{key:"start",value:function(t){var e=this;if(!this.hasStart)return t||this.config.url||this.getInitDefinition(),this.hasStart=!0,this._registerPlugins(!1),V.beforeInit(this).then(function(){if(e.config)return t||(t=e.url||e.config.url),e._startInit(t)}).catch(function(t){throw t.fileName="player",t.lineNumber="236",O.Z.logError("start:beforeInit:",t),t})}},{key:"switchURL",value:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=t;"Object"===a.ZP.typeOf(t)&&(n=t.url);var i=this.currentTime,r=this.paused&&!this.isError;return this.src=n,new Promise(function(t){var n=function(){e.currentTime=i,r&&e.once("canplay",function(){e.pause()}),t()};s.Z.os.isAndroid?e.once("timeupdate",function(){n()}):e.once("canplay",function(){n()}),e.play()})}},{key:"videoPlay",value:function(){var t=this;if(!this.hasStart){this.removeClass(W.NO_START),this.addClass(W.ENTER);var e=this.start();e&&e.then(function(e){t.config.autoplay||t.videoPlay()});return}!this.isPlaying&&(this.removeClass(W.NO_START),this.isCanplay||this.addClass(W.ENTER));var n=tp(tv(o.prototype),"play",this).call(this);return void 0!==n&&n&&n.then?n.then(function(){t.removeClass(W.NOT_ALLOW_AUTOPLAY),t.addClass(W.PLAYING),t.isPlaying||(O.Z.logInfo(">>>>playPromise.then"),t.isPlaying=!0,t.emit(c.AUTOPLAY_STARTED))}).catch(function(e){if(O.Z.logWarn(">>>>playPromise.catch",e.name),t.video&&t.video.error){t.onError(),t.removeClass(W.ENTER);return}"NotAllowedError"===e.name&&(t._errorTimer=a.ZP.setTimeout(t,function(){t._errorTimer=null,t.emit(c.AUTOPLAY_PREVENTED),t.addClass(W.NOT_ALLOW_AUTOPLAY),t.removeClass(W.ENTER),t.pause()},0))}):(O.Z.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(W.NOT_ALLOW_AUTOPLAY),this.removeClass(W.NO_START),this.removeClass(W.ENTER),this.addClass(W.PLAYING),this.emit(c.AUTOPLAY_STARTED))),n}},{key:"videoPause",value:function(){tp(tv(o.prototype),"pause",this).call(this)}},{key:"play",value:function(){var t=this;this.removeClass(W.PAUSED),(0,q.rl)(this,"play",function(){t.videoPlay()})}},{key:"pause",value:function(t){var e=this;(0,q.rl)(this,"pause",function(){t===S.BUFFER_CONTROLS?e.isBufferControlPaused||(e.isBufferControlPaused=!0,e.emit(c.BUFFER_CONTROLS,{type:E.WAITING})):e.isBufferControlPaused&&(e.isBufferControlPaused=!1,e.emit(c.BUFFER_CONTROLS,{type:E.PLAYING})),tp(tv(o.prototype),"pause",e).call(e)},t)}},{key:"seek",value:function(t,e){var n=this;if(!(!this.video||Number.isNaN(Number(t)))&&this.hasStart){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,a=e||(r?"play":o);t=t<0?0:t>this.duration?parseInt(this.duration,10):t,this._isPauseBeforeSeek||(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(c.SEEKED,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(W.ENTER),n.isSeeking=!1,a){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once(c.SEEKED,this._onceSeekCanplay),this.isPlaying?this.currentTime=t:(this.removeClass(W.NO_START),this.currentTime=t,this.play())}}},{key:"getInitDefinition",value:function(){var t=this,e=this.config,n=e.definition;!e.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map(function(e){e.definition===n.defaultDefinition&&(t.config.url=e.url,t.curDefinition=e.definition)})}},{key:"changeDefinition",value:function(t,e){var n=this;if(this.emit(c.DEFINITION_CHANGE,{from:e,to:t}),this.curDefinition=t.definition,!this.hasStart){this.config.url=t.url;return}var i=this.switchURL(t.url);i&&i.then?i.then(function(){n.emit(c.AFTER_DEFINITION_CHANGE,{from:e,to:t})}):this.emit(c.AFTER_DEFINITION_CHANGE,{from:e,to:t})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var t=this,e=W.NOT_ALLOW_AUTOPLAY,n=W.PLAYING,i=W.NO_START,r=W.PAUSED,o=W.REPLAY,a=W.ENTER,s=W.ENDED,u=W.ERROR,l=W.LOADING;this.hasStart=!1,this.isError=!1,this.isPlaying=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,[e,n,i,r,o,a,s,u,l].forEach(function(e){t.removeClass(e)}),this.addClass(W.ENTER),this.emit(c.RESET)}},{key:"reset",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(this.resetState(),this.plugins&&(e.map(function(e){t.deregister(e)}),n)){var i=K();Object.keys(this.config).keys(function(e){"undefined"!==t.config[e]&&("plugins"===e||"presets"===e||"el"===e||"id"===e)&&(t.config[e]=i[e])})}}},{key:"destroy",value:function(){var t=this,e=this.innerContainer,n=this.root,i=this.video;if(n&&i){if(n.removeAttribute(k),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),a.ZP.clearAllTimers(this),this.emit(c.DESTROY),V.destroy(this),(0,q.Qs)(this),tp(tv(o.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(t){}if(e)for(var r=e.children,s=0;s<r.length;s++)e.removeChild(r[s]);!e&&i instanceof window.Node&&n.contains(i)&&n.removeChild(i),["topBar","leftBar","rightBar","innerContainer"].map(function(e){t[e]&&n.removeChild(t[e]),t[e]=null});var u=n.className.split(" ");u.length>0?n.className=u.filter(function(t){return 0>t.indexOf("xgplayer")}).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map(function(e){t[e]=!1})}}},{key:"replay",value:function(){var t=this;this.removeClass(W.ENDED),this.currentTime=0,this.isSeeking=!1,(0,q.rl)(this,"replay",function(){t.once(c.SEEKED,function(){var e=t.videoPlay();e&&e.catch&&e.catch(function(t){console.log(t)})}),t.play(),t.emit(c.REPLAY),t.onPlay()})}},{key:"retry",value:function(){var t=this;this.removeClass(W.ERROR),this.addClass(W.LOADING),(0,q.rl)(this,"retry",function(){var e=t.currentTime;t.src=t.config.url,t.config.isLive||(t.currentTime=e),t.once(c.CANPLAY,function(){t.videoPlay()})})}},{key:"changeFullStyle",value:function(t,e,n,i){t&&(i||(i=W.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=a.ZP.filterStyleFromText(t)),a.ZP.addClass(t,n),e&&e!==t&&!this._orgPCss&&(this._orgPCss=a.ZP.filterStyleFromText(e),a.ZP.addClass(e,i),e.setAttribute(k,this.playerId)))}},{key:"recoverFullStyle",value:function(t,e,n,i){i||(i=W.PARENT_FULLSCREEN),this._orgCss&&(a.ZP.setStyleFromCsstext(t,this._orgCss),this._orgCss=""),a.ZP.removeClass(t,n),e&&e!==t&&this._orgPCss&&(a.ZP.setStyleFromCsstext(e,this._orgPCss),this._orgPCss="",a.ZP.removeClass(e,i),e.removeAttribute(k))}},{key:"getFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,e=this.root,n=this.video;if(t||(t=e),this._fullScreenOffset={top:a.ZP.scrollTop(),left:a.ZP.scrollLeft()},this._fullscreenEl=t,this._fullActionFrom="get",a.ZP.getFullScreenEl()===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{this.changeFullStyle(this.root,t,W.FULLSCREEN);for(var i=0;i<P.length;i++){var r=P[i];if(t[r]){var o="webkitRequestFullscreen"===r?t.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):t[r]();if(o&&o.then)return o;return Promise.resolve()}}if(n.fullscreenEnabled||n.webkitSupportsFullscreen)return n.webkitEnterFullscreen(),Promise.resolve();return this.recoverFullStyle(this.root,this._fullscreenEl,W.FULLSCREEN),Promise.reject(Error("call getFullscreen fail"))}catch(t){return this.recoverFullStyle(this.root,this._fullscreenEl,W.FULLSCREEN),Promise.reject(t)}}},{key:"exitFullscreen",value:function(t){if(this._fullscreenEl||a.ZP.getFullScreenEl()){var e=this.root,n=this.video;t&&(t=e),this._fullActionFrom="exit";for(var i=0;i<_.length;i++){var r=_[i];if(document[r]){var o=document[r]();if(o&&o.then)return o;return Promise.resolve()}}return n&&n.webkitSupportsFullscreen?(n.webkitExitFullScreen(),Promise.resolve()):Promise.reject(Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=t,this.changeFullStyle(this.root,t,t?W.INNER_FULLSCREEN:W.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(c.CSS_FULLSCREEN_CHANGE,!0)}},{key:"exitCssFullscreen",value:function(){var t=this._cssfullscreenEl?W.INNER_FULLSCREEN:W.CSS_FULLSCREEN;this.fullscreen?this.removeClass(t):this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(c.CSS_FULLSCREEN_CHANGE,!1)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive)return void this.onFocus(t);this.emit(c.PLAYER_FOCUS,tl({paused:this.paused,ended:this.ended},t))}},{key:"blur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(!this.isActive)return void this.onBlur(t);this.emit(c.PLAYER_BLUR,tl({paused:this.paused,ended:this.ended},t))}},{key:"onFocus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},n=this.innerStates;if(this.isActive=!0,this.removeClass(W.ACTIVE),this.userTimer&&(a.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),void 0!==e.isLock&&(n.isActiveLocked=e.isLock),!1===e.autoHide||!0===e.isLock||n.isActiveLocked){this.userTimer&&(a.ZP.clearTimeout(this,this.userTimer),this.userTimer=null);return}var i=e&&e.delay?e.delay:this.config.inactive;this.userTimer=a.ZP.setTimeout(this,function(){t.userTimer=null,t.blur()},i)}},{key:"onBlur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(this.isActive&&!this.innerStates.isActiveLocked){var e=this.config.closePauseVideoFocus;this.isActive=!1,(t.ignorePaused||e||!this.paused&&!this.ended)&&this.addClass(W.ACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(W.ENTER),this.isBufferControlPaused||this.removeClass(W.LOADING),this.isCanplay=!0,this.waitTimer&&a.ZP.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1}},{key:"onPlay",value:function(){this.removeClass(W.PAUSED),this.ended&&this.removeClass(W.ENDED),this.config.closePlayVideoFocus||this.focus()}},{key:"onPause",value:function(){this.isBufferControlPaused||this.addClass(W.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(a.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.isBufferControlPaused=!1,this.updateAcc("ended"),this.addClass(W.ENDED)}},{key:"onError",value:function(){this.isBufferControlPaused=!1,this.isError=!0,this.updateAcc("error"),this.removeClass(W.NOT_ALLOW_AUTOPLAY),this.removeClass(W.NO_START),this.removeClass(W.ENTER),this.removeClass(W.LOADING),this.addClass(W.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(W.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&a.ZP.clearTimeout(this,this.waitTimer),this.removeClass(W.LOADING),this.removeClass(W.SEEKING)}},{key:"onWaiting",value:function(){var t=this;this.waitTimer&&a.ZP.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=a.ZP.setTimeout(this,function(){t.addClass(W.LOADING),a.ZP.clearTimeout(t,t.waitTimer),t.waitTimer=null},200)}},{key:"onPlaying",value:function(){var t=this;this.isError=!1,[W.NO_START,W.PAUSED,W.ENDED,W.ERROR,W.REPLAY,W.LOADING].forEach(function(e){t.removeClass(e)})}},{key:"onTimeupdate",value:function(){this._videoHeight||this.getVideoSize(),(this.waitTimer||this.hasClass(W.LOADING))&&this.video.readyState>2&&(this.isBufferControlPaused||this.removeClass(W.LOADING),a.ZP.clearTimeout(this,this.waitTimer),this.waitTimer=null),this.paused||this.isPlaying||!this.duration||(this.isPlaying=!0,this.emit(c.AUTOPLAY_STARTED)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){"Number"===a.ZP.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"onBufferControl",value:function(t){this.isPlaying&&("waiting"===t.type?(this.isBufferControlPaused=!0,this.addClass(W.LOADING),this.removeClass(W.PAUSED)):"playing"===t.type&&(this.isBufferControlPaused=!1,this.removeClass(W.LOADING),this.paused&&this.addClass(W.PAUSED)))}},{key:"emitUserAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.video&&e&&t){var i="String"===a.ZP.typeOf(t)?t:t.type||"";"switch_play_pause"===e&&("Undefined"===a.ZP.typeOf(n.paused)&&(n.paused=this.paused),n.isFirstStart=!this.playing),this.emit(c.USER_ACTION,tl({eventType:i,action:e,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:t},n))}}},{key:"updateAcc",value:function(t){if(this._accPlayed.t){var e=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=e,this._accPlayed.t=0,("ended"===t||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(t){var e=this.video.buffered;if(!e||0===e.length||!this.duration)return!0;for(var n=parseInt(1e3*(t||this.video.currentTime||0),10),i=e.length,r=0;r<i;r++)if(parseInt(1e3*e.start(r),10)+200<=n&&parseInt(1e3*e.end(r),10)-200>n)return!0;return!1}},{key:"position",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&t&&t.h){var e=1/t.h,n=1!==e?"scale(".concat(e,")"):"",i=0,r=0;t.y&&(r=(100-100*t.h)/2-100*t.y),t.w&&t.x&&(i=(100-100*t.w)/2-100*t.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(t){var e=this;t&&Object.keys(t).map(function(n){if("plugins"!==n){e.config[n]=t[n];var i=e.plugins[n.toLowerCase()];i&&"Function"===a.ZP.typeOf(i.setConfig)&&i.setConfig(t[n])}})}},{key:"playNext",value:function(t){var e=this;this.resetState(),this._currentTime=0,this._duration=0,this.isPlaying=!1,this.setConfig(t),(0,q.rl)(this,"playnext",function(){e.start(),e.emit(c.PLAYNEXT,t)})}},{key:"getVideoSize",value:function(){var t=this;if(this.video){var e=this.video,n=e.videoWidth,i=e.videoHeight,r=this.config,o=r.fitVideoSize,a=r.videoFillMode;if(("fill"===a||"cover"===a)&&this.setAttribute("data-xgfill",a),i&&n){this._videoHeight=i,this._videoWidth=n;var s=this.root.getBoundingClientRect(),u=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=s.width,f=s.height-u,p=parseInt(n/i*1e3,10),h=parseInt(l/f*1e3,10),d=l,y=f,v={};"auto"===o&&h>p||"fixWidth"===o?(y=l/p*1e3,this.config.fluid?v.paddingTop="".concat(100*y/d,"%"):v.height="".concat(y+u,"px")):("auto"===o&&h<p||"fixHeight"===o)&&(d=p*f/1e3,v.width="".concat(d,"px")),this.fullscreen||this.isCssfullScreen||Object.keys(v).map(function(e){t.root.style[e]=v[e]}),("fillHeight"===a&&h<p||"fillWidth"===a&&h>p)&&this.setAttribute("data-xgfill","cover");var g={videoScale:p,vWidth:d,vHeight:y,cWidth:d,cHeight:y+u};this.emit(c.VIDEO_RESIZE,g)}}}},{key:"updateObjectPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.video.updateObjectPosition)return void this.video.updateObjectPosition(t,e);this.video.style.objectPosition="".concat(100*t,"% ").concat(100*e,"%")}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(t){var e=this,n=this.config.definition;n.list=t,this.emit("resourceReady",t);var i=null,r=null;t.map(function(t){e.curDefinition===t.definition&&(i=t),n.defaultDefinition===t.definition&&(r=t)}),!r&&t.length>0&&(r=t[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var t={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.video||!this.video.getVideoPlaybackQuality)return t;var e=this.video.getVideoPlaybackQuality();return t.dropped=e.droppedVideoFrames||0,t.total=e.totalVideoFrames||0,t.corrupted=e.corruptedVideoFrames||0,t.total>0&&(t.droppedRate=t.dropped/t.total*100,t.droppedDuration=parseInt(this.cumulateTime/t.total*t.dropped,0)),t}},{key:"lang",get:function(){return this.config.lang},set:function(t){if(0===ta.Z.langKeys.filter(function(e){return e===t}).length&&"zh"!==t)return void console.error("Sorry, set lang fail, because the language [".concat(t,"] is not supported now, list of all supported languages is [").concat(ta.Z.langKeys.join(),"] "));this.config.lang=t,V.setLang(t,this)}},{key:"i18n",get:function(){var t=this.config.lang;return"zh"===t&&(t="zh-cn"),this.__i18n.lang[t]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return ts.Z}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(t){this.__url=t}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(t){this.plugins.poster&&this.plugins.poster.update(t)}},{key:"readyState",get:function(){var t=tp(tv(o.prototype),"readyState",this);return this.i18n[t]||t}},{key:"error",get:function(){var t=tp(tv(o.prototype),"error",this);return this.i18n[t]||t}},{key:"networkState",get:function(){var t=tp(tv(o.prototype),"networkState",this);return this.i18n[t]||t}},{key:"fullscreenChanging",get:function(){return null!==this._fullScreenOffset}},{key:"cumulateTime",get:function(){var t=this._accPlayed;return this.updateAcc("get"),t.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(t){this.config.zoom=t}},{key:"avgSpeed",get:function(){return t_},set:function(t){t_=t}},{key:"realTimeSpeed",get:function(){return tP},set:function(t){tP=t}},{key:"hook",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],q.z3.call.apply(q.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){return q.xn.call.apply(q.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(t,e){return q.v8.call.apply(q.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return q.bR.call.apply(q.bR,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return q.g2.call.apply(q.g2,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(t,e){"boolean"==typeof e&&e!==this.muted&&(this.addInnerOP("volumechange"),this.muted=e),V.setCurrentUserActive(this.playerId,t)}}],i=[{key:"debugger",get:function(){return O.Z.config.debug},set:function(t){O.Z.config.debug=t}},{key:"pluginsManager",get:function(){return V}},{key:"getCurrentUserActivePlayerId",value:function(){return V.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(t,e){V.setCurrentUserActive(t,e)}},{key:"isHevcSupported",value:function(){return s.Z.isHevcSupported()}},{key:"probeConfigSupported",value:function(t){return s.Z.probeConfigSupported(t)}},{key:"install",value:function(t,e){o.plugins||(o.plugins={}),o.plugins[t]||(o.plugins[t]=e)}},{key:"use",value:function(t,e){o.plugins||(o.plugins={}),o.plugins[t]=e}}],n&&tf(o.prototype,n),i&&tf(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(v);function tS(t){return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function tO(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tR(i.key),i)}}function tw(t,e){return(tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tT(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tC(t){return(tC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tx(t,e,n){return(e=tR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tR(t){var e=function(t,e){if("object"!==tS(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tS(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tS(e)?e:String(e)}function tA(){return new Date().getTime()}tg(tk,"defaultPreset",null),tg(tk,"XgVideoProxy",null);var tj={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd",WAIT_END_EXT:"waitingEndExt",SEEK_END_EXT:"seekEndEndExt"},tI=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&tw(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tC(o);return t=e?Reflect.construct(n,arguments,tC(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===tS(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return tT(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return tx(tT(t=r.call.apply(r,[this].concat(n))),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(O.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),tx(tT(t),"_onAutoplayStart",function(){O.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),tx(tT(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=tA(),t.loadedCostTime=0,t.startCostTime=0,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&a.ZP.clearTimeout(tT(t),t._waitTimer),t._waittTimer&&a.ZP.clearTimeout(tT(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),tx(tT(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=tA(),t.emitLog(tj.SEEK_START,{start:tA()}))}),tx(tT(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),tx(tT(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=tA(),t.fixedWaitingStart=tA(),t._waitType=1,t.emitLog(tj.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),tx(tT(t),"_onWaiting",function(){!t._isWaiting&&t.vt&&(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=tA(),t._waitTimer=a.ZP.setTimeout(tT(t),function(){t._isWaiting&&(t.waitingStart=tA(),a.ZP.clearTimeout(tT(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(tj.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:2===t._waitType?"seek":"playing"}))},200))}),tx(tT(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),tx(tT(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return i=[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}],n=[{key:"afterCreate",value:function(){var t=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=tA(),this.loadedCostTime=0,this.startCostTime=0,this.on(c.LOAD_START,function(){var e=t._state,n=e.autoplayStart,i=e.isFFSend;t.startCostTime=tA()-t.newPointTime,O.Z.logInfo("[xgLogger]".concat(t.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(i," startCostTime:").concat(t.startCostTime," newPointTime").concat(t.newPointTime)),i||(e.isLs||t.emitLog(tj.LOAD_START,{}),e.isLs=!0,e.isTimeUpdate=!1,e.isFFLoading=!0,t.pt=tA(),t.vt=0,t.fvt=0,t._initOnceEvents(),t._onWaitingLoadStart())}),this.on(c.LOADED_DATA,function(){t.vt=tA(),t.fvt=t.vt-t.pt,t.loadedCostTime=t.vt-t.newPointTime;var e=t._state,n=e.isTimeUpdate,i=e.isFFSend,r=e.autoplayStart;O.Z.logInfo("[xgLogger]".concat(t.player.playerId," LOADED_DATA"),"fvt:".concat(t.fvt," isTimeUpdate:").concat(t._state.isTimeUpdate," loadedCostTime:").concat(t.loadedCostTime)),(n||r)&&t._sendFF("loadedData"),i||t.emitLog(tj.LOADED_DATA,{}),t.suspendWaitingStatus("loadeddata")}),this.on(c.SEEKING,this._onSeeking),this.on(c.SEEKED,this._onSeeked),this.on(c.DESTROY,function(){t.endState("destroy")}),this.on(c.ENDED,function(){t.endState("ended")}),this.on(c.PAUSE,function(){t.endState("pause")}),this.on(c.URL_CHANGE,function(){t.endState("urlChange"),O.Z.logInfo("[xgLogger]".concat(t.player.playerId," URL_CHANGE")),t._state.isFFSend&&t._onReset()}),this.on([c.PLAYING,c.CANPLAY],this._onPlaying),this.on(c.WAITING,this._onWaiting),this.on(c.ERROR,this._onError),this.on(c.RESET,function(){O.Z.logInfo("[xgLogger]".concat(t.player.playerId," RESET")),t.endState("reset"),t._initOnceEvents(),t._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(c.AUTOPLAY_STARTED,this._onAutoplayStart),this.off(c.TIME_UPDATE,this._onTimeupdate),this.once(c.AUTOPLAY_STARTED,this._onAutoplayStart),this.once(c.TIME_UPDATE,this._onTimeupdate)}},{key:"_sendFF",value:function(t){this.s=tA();var e=this._state,n=e.isFFLoading,i=e.isFFSend;O.Z.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(t," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!i)),this.vt>0&&n&&!i&&(O.Z.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),t),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(tj.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var t=this;this._waittTimer&&a.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=a.ZP.setTimeout(this,function(){t.suspendWaitingStatus("timeout"),a.ZP.clearTimeout(t,t._waittTimer),t._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(t){var e=this.player,n=e.currentTime,i=e.duration,r=i-n,o=!(i>0&&n>0&&r<1);O.Z.logInfo("[xgLogger]".concat(this.player.playerId," endState"),"".concat(t," duration - currentTime:").concat(r," _emit:").concat(o)),this.suspendWaitingStatus(t,o),this.suspendSeekingStatus(t,o)}},{key:"suspendSeekingStatus",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.seekingStart){var n=tA(),i=n-this.seekingStart;this.seekingStart=0;var r=e?tj.SEEK_END:tj.SEEK_END_EXT;this.emitLog(r,{end:n,costTime:i,endType:t})}}},{key:"suspendWaitingStatus",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this._waitTimer&&(a.ZP.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(a.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var n=tA(),i=n-this.waitingStart,r=n-this.fixedWaitingStart,o=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0;var s=e?tj.WAIT_END:tj.WAIT_END_EXT;this.emitLog(s,{fixedCostTime:r>o?o:r,costTime:i>o?o:i,type:"loadeddata"===t?1:this._waitType,endType:2===this._waitType?"seek":t})}}},{key:"emitLog",value:function(t,e){var n=this.player;this.emit(c.XGLOG,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tE(Object(n),!0).forEach(function(e){tx(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({t:tA(),host:a.ZP.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:t,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},e))}}],tO(o.prototype,n),i&&tO(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function tL(t){return(tL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tD(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tL(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tL(e)?e:String(e)}(i.key),i)}}function tN(t,e){return(tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tM(t){return(tM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tF=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&tN(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tM(o);return t=e?Reflect.construct(n,arguments,tM(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===tL(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}],n=[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>'}}},{key:"afterCreate",value:function(){var t=this;B.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",function(){t.player.replay()},{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(c.ENDED,function(){if(t.playerConfig.loop||a.ZP.addClass(t.player.root,"replay"),!t.config.disable){t.show();var e=t.root.querySelector("path");if(e){var n=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;e.setAttribute("transform",n)}}}),this.on(c.PLAY,function(){t.hide()})}},{key:"handleReplay",value:function(t){t.preventDefault(),t.stopPropagation(),this.player.replay(),a.ZP.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],tD(o.prototype,n),i&&tD(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function tB(t){return(tB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tZ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tB(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tB(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tB(e)?e:String(e)}(i.key),i)}}function tU(t,e){return(tU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tH(t){return(tH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tG=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&tU(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tH(o);return t=e?Reflect.construct(n,arguments,tH(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===tB(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}],n=[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(t){this.config.isEndedShow=t}},{key:"hide",value:function(){a.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){a.ZP.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(t){"string"==typeof t.player.config.poster&&(t.config.poster=t.player.config.poster)}},{key:"afterCreate",value:function(){var t=this;this.on(c.ENDED,function(){t.isEndedShow&&a.ZP.removeClass(t.root,"hide")}),this.config.hideCanplay?(this.once(c.TIME_UPDATE,function(){t.onTimeUpdate()}),this.on(c.URL_CHANGE,function(){a.ZP.removeClass(t.root,"hide"),a.ZP.addClass(t.root,"xg-showplay"),t.once(c.TIME_UPDATE,function(){t.onTimeUpdate()})})):this.on(c.PLAY,function(){a.ZP.addClass(t.root,"hide")})}},{key:"onTimeUpdate",value:function(){var t=this;this.player.currentTime?a.ZP.removeClass(this.root,"xg-showplay"):this.once(c.TIME_UPDATE,function(){t.onTimeUpdate()})}},{key:"update",value:function(t){t&&(this.config.poster=t,this.root.style.backgroundImage="url(".concat(t,")"))}},{key:"render",value:function(){var t=this.config,e=t.poster,n=t.hideCanplay;return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(e?"background-image:url(".concat(e,");"):"",'">\n    </xg-poster>')}}],tZ(o.prototype,n),i&&tZ(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function tV(t){return(tV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tW(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tq(i.key),i)}}function tK(t,e){return(tK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tY(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tz(t){return(tz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tX(t,e,n){return(e=tq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tq(t){var e=function(t,e){if("object"!==tV(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tV(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tV(e)?e:String(e)}var tJ={},t$=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&tK(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tz(o);return t=e?Reflect.construct(n,arguments,tz(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===tV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return tY(t)}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return tX(tY(e=r.call(this,t)),"onPlayerReset",function(){e.autoPlayStart=!1;var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),a.ZP.removeClass(e.root,t),e.show()}),tX(tY(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var t="auto"===e.config.mode?"auto-hide":"hide";a.ZP.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e._lastState="",e}return i=[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}],n=[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.playerConfig;this.initIcons(),this.once(c.READY,function(){n&&(n.lang&&"en"===n.lang?a.ZP.addClass(e.root,"lang-is-en"):"jp"===n.lang&&a.ZP.addClass(e.root,"lang-is-jp"))}),this.on(c.AUTOPLAY_STARTED,this.onAutoplayStart),n.autoplay||this.show(),this.on(c.AUTOPLAY_PREVENTED,function(){var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),a.ZP.removeClass(t.root,e),t.show()}),this.on(c.PLAY,function(){t.onPlayPause("play")}),this.on(c.PAUSE,function(){t.onPlayPause("pause")}),this.on(c.BUFFER_CONTROLS,function(){t.onPlayPause(e.paused?"pause":"play")}),this.on(c.RESET,function(){t.onPlayerReset()}),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation(),t.emitUserAction(e,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},startPause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild("xg-start-inner",t.startPlay),this.appendChild("xg-start-inner",t.startPause)}},{key:"hide",value:function(){a.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){a.ZP.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){a.ZP.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){a.ZP.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(t){t?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(t){var e=this;!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};tJ[t]&&window.clearTimeout(tJ[t].id),tJ[t]={},n.start&&n.start(),tJ[t].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(tJ[t].id),delete tJ[t]},e)}("pauseplay",400,{start:function(){a.ZP.addClass(e.root,"interact"),e.show(),e.switchStatus(!0)},end:function(){a.ZP.removeClass(e.root,"interact"),t||e.hide()}})}},{key:"switchPausePlay",value:function(t){var e=this.player;t.cancelable&&t.preventDefault(),t.stopPropagation(),e.isReady&&(!this.player.paused&&e.isPlaying?e.pause():e.play())}},{key:"onPlayPause",value:function(t){var e=this.config,n=this.player;if(n.isPlaying&&this.autoPlayStart&&("pause"!==t||this._lastState!==t&&!n.isBufferControlPaused)){if(this._lastState=t,"show"===e.mode){this.switchStatus(),this.show();return}if("auto"===e.mode)return void this.switchStatus();if(e.isShowPause&&n.paused&&!n.ended||e.isShowEnd&&n.ended){this.switchStatus(),this.show();return}if(e.disableAnimate){this.switchStatus(),this.hide();return}if("play"===t)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(tJ).map(function(t){window.clearTimeout(tJ[t].id),delete tJ[t]})}},{key:"render",value:function(){var t=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(t,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],tW(o.prototype,n),i&&tW(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function tQ(t){return(tQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t0(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tQ(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==tQ(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tQ(e)?e:String(e)}(i.key),i)}}function t1(t,e){return(t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function t2(t){return(t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var t3=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&t1(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=t2(o);return t=e?Reflect.construct(n,arguments,t2(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===tQ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}],n=[{key:"render",value:function(){var t=this.config.innerHtml,e=a.ZP.createDom("xg-enter","",{},"xgplayer-enter");if(t&&t instanceof window.HTMLElement)e.appendChild(t);else if(t&&"string"==typeof t)e.innerHTML=t;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');e.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return e}}],t0(o.prototype,n),i&&t0(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function t4(t){return(t4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==t4(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==t4(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===t4(e)?e:String(e)}(i.key),i)}}function t6(t,e){return(t6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function t8(t){return(t8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var t9=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&t6(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=t8(o);return t=e?Reflect.construct(n,arguments,t8(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===t4(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var t="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span></div>\n      </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:10}}}],n&&t5(o.prototype,n),i&&t5(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function t7(t,e){return(t7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function et(t,e){if(e&&("object"===en(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t){var e=parseFloat(t);return -1===t.indexOf("%")&&!Number.isNaN(e)&&e}var er=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],eo=er.length;function ea(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"===en(t)&&t.nodeType){var e,n=(e=t,window.getComputedStyle(e));if("none"===n.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},r=0;r<eo;r++)i[er[r]]=0;return i}var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var a=o.isBorderBox="border-box"===n.boxSizing,s=0;s<eo;s++){var u=er[s],c=parseFloat(n[u]);o[u]=Number.isNaN(c)?0:c}var l=o.paddingLeft+o.paddingRight,f=o.paddingTop+o.paddingBottom,p=o.marginLeft+o.marginRight,h=o.marginTop+o.marginBottom,d=o.borderLeftWidth+o.borderRightWidth,y=o.borderTopWidth+o.borderBottomWidth,v=ei(n.width);!1!==v&&(o.width=v+(a?0:l+d));var g=ei(n.height);return!1!==g&&(o.height=g+(a?0:f+y)),o.innerWidth=o.width-(l+d),o.innerHeight=o.height-(f+y),o.outerWidth=o.width+p,o.outerHeight=o.height+h,o}}function es(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.identifier===e)return i}}var eu={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},ec={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},el=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&t7(r,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ee(r);return t=e?Reflect.construct(n,arguments,ee(this).constructor):n.apply(this,arguments),et(this,t)});function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return((e=i.call(this)).isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=n.handle instanceof Element?n.handle:document.querySelector(n.handle),e._root&&e._handlerDom)?(e._bindStartEvent(),e):et(e)}return n=[{key:"_bindStartEvent",value:function(){var t=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),ec[this._startKey].map(function(e){t["on".concat(e)]=t["on".concat(e)].bind(t)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(t){var e=this;if(t){var n=ec[this._startKey];n.map(function(t){window.addEventListener(t,e["on".concat(t)])}),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var t=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(e){window.removeEventListener(e,t["on".concat(e)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(t){this.onUp()}},{key:"animate",value:function(){var t=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){t.animate()}))}},{key:"positionDrag",value:function(){var t="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=t,this._root.style.webKitTransform=t}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(t){this.dragStart(t,t)}},{key:"onmousemove",value:function(t){this.dragMove(t,t)}},{key:"onmouseup",value:function(t){this.dragEnd(t,t)}},{key:"ontouchstart",value:function(t){var e=t.changedTouches[0];this.dragStart(t,e),this.touchIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,t.preventDefault()}},{key:"ontouchmove",value:function(t){var e=es(t.changedTouches,this.touchIdentifier);e&&this.dragMove(t,e)}},{key:"ontouchend",value:function(t){var e=es(t.changedTouches,this.touchIdentifier);e&&this.dragEnd(t,e),t.preventDefault()}},{key:"ontouchcancel",value:function(t){var e=es(t.changedTouches,this.touchIdentifier);e&&this.dragCancel(t,e)}},{key:"dragStart",value:function(t,e){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=e,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=ea(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(t)}}},{key:"dragRealStart",value:function(t,e){this.isDragging=!0,this.animate(),this.emit(eu.START,this.startPos)}},{key:"dragEnd",value:function(t,e){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(eu.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(t,e){var n={x:e.pageX-this.downPoint.pageX,y:e.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(t,e),n}},{key:"dragMove",value:function(t,e){if(t=t||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(t,e),a=o.x,s=o.y;a=this.checkContain("x",a,i),s=this.checkContain("y",s,r),this.position.x=i+a,this.position.y=r+s,this.dragPoint.x=a,this.dragPoint.y=s,this.emit(eu.MOVE,this.position)}}},{key:"dragCancel",value:function(t,e){this.dragEnd(t,e)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3}},{key:"checkContain",value:function(t,e,n){return e+n<0?0-n:"x"===t&&e+n>this.startPos.maxX?this.startPos.maxX-n:"y"===t&&e+n>this.startPos.maxY?this.startPos.maxY-n:e}},{key:"_getPosition",value:function(){var t=window.getComputedStyle(this._root),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=Number.isNaN(e)?0:e,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(t)}},{key:"_addTransformPosition",value:function(t){var e=t.transform;if(0===e.indexOf("matrix")){var n=e.split(","),i=0===e.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(t,e){if(-1!==t.indexOf("%")){var n=ea(this._root.parentNode);return n?parseFloat(t)/100*n[e]:0}return parseInt(t,10)}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==en(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==en(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===en(e)?e:String(e)}(i.key),i)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(o());function ef(t){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ep(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,eg(i.key),i)}}function eh(t,e){return(eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ed(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ey(t){return(ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ev(t,e,n){return(e=eg(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eg(t){var e=function(t,e){if("object"!==ef(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ef(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ef(e)?e:String(e)}var em=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&eh(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ey(o);return t=e?Reflect.construct(n,arguments,ey(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===ef(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ed(t)}(this,t)});function o(t){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");ev(ed(e=r.call(this,t)),"onCancelClick",function(t){e.exitMini(),e.isClose=!0}),ev(ed(e),"onCenterClick",function(t){var n=ed(e).player;n.paused?n.play():n.pause()}),ev(ed(e),"onScroll",function(t){if(!(!window.scrollY&&0!==window.scrollY||50>Math.abs(window.scrollY-e.pos.scrollY))){var n=parseInt(a.ZP.getCss(e.player.root,"height"));n+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>n+5?e.isMini||e.isClose||e.getMini():window.scrollY<=n&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var e,n=ed(e).config;return e.pos={left:n.left<0?window.innerWidth-n.width-20:n.left,top:n.top<0?window.innerHeight-n.height-20:n.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return i=[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}],n=[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.mini&&(t.config.isShowIcon=t.player.config.mini)}},{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.on(c.PAUSE,function(){t.setAttr("data-state","pause")}),this.on(c.PLAY,function(){t.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var t=this,e=this.player;if(!this.config.disable){this.config.isShowIcon&&e.controls.registerPlugin(t9,{config:{onClick:function(){t.getMini()}}},t9.pluginName);var n=a.ZP.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",n,this.onCancelClick),this.bind(".play-icon",n,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new el(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},pause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".play-icon",t.play),this.appendChild(".play-icon",t.pause)}},{key:"getMini",value:function(){var t=this;if(!this.isMini){var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},a.ZP.addClass(e.root,"xgplayer-mini"),["width","height","top","left"].map(function(e){t.lastStyle[e]=i.style[e],i.style[e]="".concat(t.pos[e],"px")}),n.fluid&&(i.style["padding-top"]=""),this.emit(c.MINI_STATE_CHANGE,!0),e.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var t=this;if(!this.isMini)return!1;var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;a.ZP.removeClass(e.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(e){i.style[e]=t.lastStyle[e]}),this.lastStyle=null,n.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(c.MINI_STATE_CHANGE,!1),this.isMini=e.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var t=a.ZP.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",t,this.onCancelClick),this.unbind(".play-icon",t,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],ep(o.prototype,n),i&&ep(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function eb(t){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eP(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,eO(i.key),i)}}function e_(t,e){return(e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ek(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eS(t){return(eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eE(t,e,n){return(e=eO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eO(t){var e=function(t,e){if("object"!==eb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==eb(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eb(e)?e:String(e)}var ew={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},eT=["videoClick","videoDbClick"],eC=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&e_(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=eS(o);return t=e?Reflect.construct(n,arguments,eS(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===eb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ek(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return eE(ek(t=r.call.apply(r,[this].concat(n))),"onMouseMove",function(e){var n=ek(t),i=n.player,r=n.playerConfig;!i.isActive&&(i.focus({autoHide:!r.closeDelayBlur}),r.closeFocusVideoFocus||i.video.focus())}),eE(ek(t),"onMouseEnter",function(e){var n=ek(t),i=n.playerConfig,r=n.player;i.closeFocusVideoFocus||r.video.focus(),i.closeDelayBlur?r.focus({autoHide:!1}):r.focus()}),eE(ek(t),"onMouseLeave",function(e){var n=t.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime,o=n.closeDelayBlur;i||o||(r?t.player.focus({autoHide:!0,delay:r}):t.player.blur())}),eE(ek(t),"onVideoClick",function(e){var n=ek(t),i=n.player,r=n.playerConfig;e.target&&r.closeVideoClick||(e.target===i.video||e.target===i.innerContainer||e.target===i.video.__canvas)&&(e.preventDefault(),r.closeVideoStopPropagation||e.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,(0,q.rl)(ek(t),eT[0],function(e,n){t.switchPlayPause(n.e)},{e:e,paused:i.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),eE(ek(t),"onVideoDblClick",function(e){var n=ek(t),i=n.player;if(!n.playerConfig.closeVideoDblclick&&e.target&&(e.target===i.video||e.target===i.video.__canvas)){if(t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),e.preventDefault(),e.stopPropagation(),(0,q.rl)(ek(t),eT[1],function(e,n){t.emitUserAction(n.e,"switch_fullscreen",{fullscreen:i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()},{e:e,fullscreen:i.fullscreen})}}),t}return i=[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}],n=[{key:"afterCreate",value:function(){var t=this;this._clickCount=0,eT.map(function(e){t.__hooks[e]=null}),"mobile"!==this.playerConfig.isMobileSimulateMode&&("mobile"!==s.Z.device||s.Z.os.isIpad)&&this.initEvents()}},{key:"initEvents",value:function(){var t=this,e=this.player,n=e.video,i=e.root,r=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(ew).map(function(e){i.addEventListener(e,t[ew[e]],!1)}),r&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(t){var e=this.player;this.emitUserAction(t,"switch_play_pause"),e.ended?e.duration!==1/0&&e.duration>0&&e.replay():e.paused?e.play():e.pause()}},{key:"onContextmenu",value:function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.stopPropagation?t.stopPropagation():(t.returnValue=!1,t.cancelBubble=!0)}},{key:"destroy",value:function(){var t=this,e=this.player,n=e.video,i=e.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(ew).map(function(e){i.removeEventListener(e,t[ew[e]],!1)})}}],eP(o.prototype,n),i&&eP(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(w.ZP);function ex(t){return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eR(t,e,n){return(e=eA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eA(t){var e=function(t,e){if("object"!==ex(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ex(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ex(e)?e:String(e)}var ej={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},eI={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},eL={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function eD(t){return t&&t.length>0?t[t.length-1]:null}function eN(t){var e=navigator.userAgent;/(?:iPhone|iPad)/.test(e)&&t.cancelable&&t.preventDefault()}var eM=function(){var t;function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};if(!(this instanceof e))throw TypeError("Cannot call a class as a function");eR(this,"onTouchStart",function(t){var e=n._pos,i=n.root;n.config.needPreventDefault&&eN(t);var r=eD(t.touches);e.x=r?parseInt(r.pageX,10):t.pageX,e.y=r?parseInt(r.pageX,10):t.pageX,e.start=!0,n.__setPress(t),i.addEventListener(n.events.end,n.onTouchEnd),i.addEventListener(n.events.cancel,n.onTouchCancel),i.addEventListener(n.events.move,n.onTouchMove),n.trigger(ej.TOUCH_START,t)}),eR(this,"onTouchCancel",function(t){n.onTouchEnd(t)}),eR(this,"onTouchEnd",function(t){var e=n._pos,i=n.root;n.config.needPreventDefault&&eN(t),n.__clearPress(),i.removeEventListener(n.events.cancel,n.onTouchCancel),i.removeEventListener(n.events.end,n.onTouchEnd),i.removeEventListener(n.events.move,n.onTouchMove),t.moving=e.moving,t.press=e.press,e.press&&n.trigger(ej.PRESS_END,t),n.trigger(ej.TOUCH_END,t),e.press||e.moving||n.__setDb(t),e.press=!1,e.start=!1,e.moving=!1}),eR(this,"onTouchMove",function(t){var e=n._pos,i=n.config,r=eD(t.touches),o=r?parseInt(r.pageX,10):t.pageX,a=r?parseInt(r.pageY,10):t.pageX,s=o-e.x;Math.abs(a-e.y)<i.miniStep&&Math.abs(s)<i.miniStep||(n.__clearPress(),e.press&&n.trigger(ej.PRESS_END,t),e.press=!1,e.moving=!0,n.trigger(ej.TOUCH_MOVE,t))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map(function(t){n.config[t]=i[t]}),this.root=t,this.events="mouse"===i.eventType?eL:eI,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return t=[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(t){var e=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){e.trigger(ej.PRESS,t),e._pos.press=!0,e.__clearPress()},n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(t){var e=this,n=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(ej.DOUBlE_CLICK,t);return}this.dbIntrvalId=setTimeout(function(){e.__clearDb(),e._pos.start||e._pos.press||e._pos.moving||e.trigger(ej.CLICK,t)},n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}},{key:"off",value:function(t,e){if(this.__handlers[t]){for(var n=this.__handlers[t],i=-1,r=0;r<n.length;r++)if(n[r]===e){i=r;break}i>=0&&this.__handlers[t].splice(i,1)}}},{key:"trigger",value:function(t,e){this.__handlers[t]&&this.__handlers[t].map(function(n){try{n(e)}catch(e){console.error("trigger>>:".concat(t),e)}})}},{key:"destroy",value:function(){var t=this,e={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(e).forEach(function(n){t.root.removeEventListener(n,t[e[n]])})}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,eA(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function eF(t){return(eF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eB(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,eV(i.key),i)}}function eZ(t,e){return(eZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eU(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eH(t){return(eH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eG(t,e,n){return(e=eV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eV(t){var e=function(t,e){if("object"!==eF(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==eF(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eF(e)?e:String(e)}var eW={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate"},eK=["videoClick","videoDbClick"],eY=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&eZ(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=eH(o);return t=e?Reflect.construct(n,arguments,eH(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===eF(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return eU(t)}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return eG(eU(e=r.call(this,t)),"onTouchStart",function(t){var n=eU(e),i=n.player,r=n.config,o=n.pos,s=n.playerConfig,u=e.getTouche(t);if(u&&!r.disableGesture&&e.duration>0&&!i.ended){o.isStart=!0,a.ZP.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),e.find(".xg-dur").innerHTML=a.ZP.format(e.duration);var c=e.root.getBoundingClientRect();90===i.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(u.pageX-o.left,10),f=parseInt(u.pageY-o.top,10);o.x=90===i.rotateDeg?f:l,o.y=90===i.rotateDeg?l:f,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}}),eG(eU(e),"onTouchMove",function(t){var n=e.getTouche(t),i=eU(e),r=i.pos,o=i.config,a=i.player;if(n&&!o.disableGesture&&e.duration&&r.isStart){var s=o.miniMoveStep,u=o.hideControlsActive,c=parseInt(n.pageX-r.left,10),l=parseInt(n.pageY-r.top,10),f=90===a.rotateDeg?l:c,p=90===a.rotateDeg?c:l;if(Math.abs(f-r.x)>s||Math.abs(p-r.y)>s){var h=f-r.x,d=p-r.y,y=r.scope;if(-1===y&&(0===(y=e.checkScope(f,p,h,d,r))&&(u?a.blur():a.focus({autoHide:!1}),r.time||(r.time=parseInt(1e3*a.currentTime,10)+1e3*e.timeOffset)),r.scope=y),-1===y||y>0&&!o.gestureY||0===y&&!o.gestureX)return;t.cancelable&&t.preventDefault(),e.executeMove(h,d,y,r.width,r.height),r.x=f,r.y=p}}}),eG(eU(e),"onTouchEnd",function(t){var n=eU(e),i=n.player,r=n.pos,o=n.playerConfig;r.isStart&&(r.scope>-1&&t.cancelable&&t.preventDefault(),e.endLastMove(r.scope),setTimeout(function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()},10),r.scope=-1,e.resetPos(),a.ZP.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),e.changeAction(eW.AUTO))}),eG(eU(e),"onRootTouchMove",function(t){!e.config.disableGesture&&e.config.gestureX&&e.checkIsRootTarget(t)&&(t.stopPropagation(),e.pos.isStart?e.onTouchMove(t):e.onTouchStart(t))}),eG(eU(e),"onRootTouchEnd",function(t){if(e.pos.isStart&&e.checkIsRootTarget(t)){t.stopPropagation(),e.onTouchEnd(t);var n=e.player.controls;n&&n.recoverAutoHide()}}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return i=[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}],n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:'<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var t=this;eK.map(function(e){t.__hooks[e]=null});var e=this.playerConfig,n=this.config,i=this.player;!0===e.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),a.ZP.isUndefined(e.disableGesture)||(n.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=a.ZP.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r="mouse"===this.domEventType?"mouse":"touch";this.touch=new eM(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(t){t.preventDefault()}),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(c.DURATION_CHANGE,function(){var e=t.player,n=t.config;1e3*e.duration<n.moveDuration&&(n.moveDuration=1e3*e.duration)}),this.on([c.CANPLAY,c.ENDED],function(){var e=t.pos,n=e.time;!e.isStart&&n>0&&(t.pos.time=0)});var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).forEach(function(e){t.touch.on(e,function(n){t[o[e]](n)})}),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",function(e){t.activeSeekNote(e.currentTime,e.forward)}),s.addCallBack("dragend",function(){t.changeAction(eW.AUTO)}))}}},{key:"registerThumbnail",value:function(){var t=this.player.plugins.thumbnail;if(t&&t.usable){this.thumbnail=t.createThumbnail(null,"mobile-thumbnail");var e=this.find(".time-preview");e.insertBefore(this.thumbnail,e.children[0])}}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle,e=t.playedColor,n=t.progressColor;e&&(this.find(".xg-curbar").style.backgroundColor=e,this.find(".xg-cur").style.color=e),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&a.ZP.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(e){t.pos[e]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(t){var e=this.player;this.root.setAttribute("data-xg-action",t);var n=e.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(t){this.player.rotateDeg;var e=t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(t,e,n,i,r){var o=r.width,a=-1;if(t<0||t>o)return a;var s=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&s>=1.73&&t>r.scopeM1&&t<r.scopeM2?a=0:(0===Math.abs(n)||s<=.57)&&(a=t<r.scopeL?1:t>r.scopeR?2:3),a}},{key:"executeMove",value:function(t,e,n,i,r){switch(n){case 0:this.updateTime(t/i*this.config.scopeM);break;case 1:this.updateBrightness(e/r);break;case 2:s.Z.os.isIos||this.updateVolume(e/r)}}},{key:"endLastMove",value:function(t){var e=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;0===t&&(i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout(function(){e.pos.time=0},500)),this.changeAction(eW.AUTO)}},{key:"checkIsRootTarget",value:function(t){var e=this.player.plugins||{};return!(e.progress&&e.progress.root.contains(t.target))&&(e.start&&e.start.root.contains(t.target)||e.controls&&e.controls.root.contains(t.target))}},{key:"clickHandler",value:function(t){var e=this.player,n=this.config,i=this.playerConfig;if(!e.isPlaying){i.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),e.play());return}!n.closedbClick||i.closeVideoClick?e.isActive?e.blur():e.focus():i.closeVideoClick||((e.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),e.focus())}},{key:"dbClickHandler",value:function(t){var e=this.config,n=this.player;!e.closedbClick&&n.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onClick",value:function(t){var e=this,n=this.player;(0,q.rl)(this,eK[0],function(t,n){e.clickHandler(n.e)},{e:t,paused:n.paused})}},{key:"onDbClick",value:function(t){var e=this,n=this.player;(0,q.rl)(this,eK[1],function(t,n){e.dbClickHandler(n.e)},{e:t,paused:n.paused})}},{key:"onPress",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(e.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction(eW.PLAYBACK))}},{key:"onPressEnd",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{from:i.playbackRate,to:e.rate}),i.playbackRate=e.rate,e.rate=1,this.changeAction(eW.AUTO))}},{key:"updateTime",value:function(t){var e=this.player,n=this.config,i=this.player.duration,r=parseInt((t=Number(t.toFixed(4)))*n.moveDuration,10)+this.timeOffset;r+=this.pos.time,r=r<0?0:r>1e3*i?1e3*i-200:r,e.getPlugin("time")&&e.getPlugin("time").updateTime(r/1e3),e.getPlugin("progress")&&e.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,t>0),n.isTouchingSeek&&e.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.player,n=this.pos;if(t=parseInt(100*t,10),n.volume+=t,!(10>Math.abs(n.volume))){var i=parseInt(10*e.volume,10)-parseInt(n.volume/10,10);e.volume=(i=i>10?10:i<1?0:i)/10,n.volume=0}}},{key:"updateBrightness",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.pos,n=this.config,i=this.xgMask,r=e.light+.8*t;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),e.light=r}},{key:"activeSeekNote",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(t&&"number"==typeof t&&!r&&!i.disableActive){t<0?t=0:t>n.duration&&(t=n.duration-.2),this.changeAction(eW.SEEKING);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=a.ZP.format(this.duration),this.find(".xg-cur").innerHTML=a.ZP.format(t),this.find(".xg-curbar").style.width="".concat(t/this.duration*100,"%"),e?a.ZP.removeClass(this.find(".xg-seek-show"),"xg-back"):a.ZP.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(t)}}},{key:"updateThumbnails",value:function(t){var e=this.player.plugins.thumbnail;e&&e.usable&&this.thumbnail&&e.update(this.thumbnail,t,160,90)}},{key:"switchPlayPause",value:function(){var t=this.player;if(!t.hasStart)return!1;t.ended||(t.paused?t.play():t.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var t=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,t.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,t.root.removeEventListener("touchmove",this.onRootTouchMove,!0),t.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var t="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(t,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],eB(o.prototype,n),i&&eB(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function ez(t){return(ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function eq(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e1(i.key),i)}}function eJ(t,e){return(eJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function e$(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eQ(t){return(eQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e0(t,e,n){return(e=e1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e1(t){var e=function(t,e){if("object"!==ez(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ez(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ez(e)?e:String(e)}var e2=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&eJ(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=eQ(o);return t=e?Reflect.construct(n,arguments,eQ(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===ez(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return e$(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return e0(e$(t=r.call.apply(r,[this].concat(n))),"onBodyKeyDown",function(e){if(t.player){var n,i,r=e||window.event,o=r.keyCode,a=e$(t)._keyState;if(!e.repeat){if(a.isKeyDown||t.config.disable||t.config.disableBodyTrigger||!t.player.isUserActive&&!t.config.isIgnoreUserActive||!t.checkIsVisible()||r.metaKey||r.altKey||r.ctrlKey)return;(r.target===document.body||t.config.isGlobalTrigger&&!("INPUT"===(i=(n=r.target).tagName)||"TEXTAREA"===i||n.isContentEditable))&&t.checkCode(o,!0)&&(a.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)}a.isBodyKeyDown&&t.handleKeyDown(r)}}),e0(e$(t),"onBodyKeyUp",function(e){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(e))}),e0(e$(t),"onKeydown",function(e){if(t.player){var n=e||window.event,i=e$(t)._keyState;if(!n.repeat){if(t.config.disable||t.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey||!t.player.isUserActive&&!t.config.isIgnoreUserActive)return;n&&(37===n.keyCode||t.checkCode(n.keyCode))&&(n.target===t.player.root||n.target===t.player.video||n.target===t.player.controls.el)&&(i.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}i.isKeyDown&&t.handleKeyDown(n)}}),e0(e$(t),"onKeyup",function(e){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(e))}),t}return i=[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!1}}}],n=[{key:"mergekeyCodeMap",value:function(){var t=this,e=this.config.keyCodeMap;e&&Object.keys(e).map(function(n){t.keyCodeMap[n]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(i){e[n][i]&&(t.keyCodeMap[n][i]=e[n][i])}):t.keyCodeMap[n]=e[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var t="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;t&&"number"==typeof t&&(this.seekStep=t),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var t=this.player.root.getBoundingClientRect(),e=t.height,n=t.top,i=t.bottom,r=window.innerHeight;return(!(n<0)||!(n<0-.9*e))&&(!(i>0)||!(i-r>.9*e))}},{key:"checkCode",value:function(t,e){var n=this,i=!1;return Object.keys(this.keyCodeMap).map(function(r){n.keyCodeMap[r]&&t===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!e||e&&!n.keyCodeMap[r].noBodyTarget)}),i}},{key:"downVolume",value:function(t){var e=this.player;if(!(e.volume<=0)){var n=parseFloat((e.volume-.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),n>=0?e.volume=n:e.volume=0}}},{key:"upVolume",value:function(t){var e=this.player;if(!(e.volume>=1)){var n=parseFloat((e.volume+.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),n<=1?e.volume=n:e.volume=1}}},{key:"seek",value:function(t){var e=this.player,n=e.currentTime,i=e.duration,r=n,o=t.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;r=n+o<=i?n+o:i;var a={currentTime:{from:n,to:r}};this.emitUserAction(t,"seek",{props:a}),this.player.currentTime=r}},{key:"seekBack",value:function(t){var e=this.player.currentTime,n=t.repeat?parseInt(this.seekStep/2,10):this.seekStep,i=0;e-n>=0&&(i=e-n);var r={currentTime:{from:e,to:i}};this.emitUserAction(t,"seek",{props:r}),this.player.currentTime=i}},{key:"changePlaybackRate",value:function(t){var e=this._keyState,n=this.config,i=this.player;0===e.playbackRate&&(e.playbackRate=i.playbackRate,i.playbackRate=n.playbackRate)}},{key:"playPause",value:function(t){var e=this.player;e&&(this.emitUserAction(t,"switch_play_pause"),e.paused?e.play():e.pause())}},{key:"exitFullscreen",value:function(t){var e=this.player,n=e.fullscreen,i=e.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),e.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),e.exitCssFullscreen())}},{key:"handleKeyDown",value:function(t){var e=this._keyState;if(t.repeat){e.isPress=!0;var n=Date.now();if(n-e.tt<200)return;e.tt=n}t.preventDefault(),t.returnValue=!1,this.handleKeyCode(t.keyCode,t,e.isPress)}},{key:"handleKeyUp",value:function(t){var e=this._keyState;e.playbackRate>0&&(this.player.playbackRate=e.playbackRate,e.playbackRate=0),e.isKeyDown=!1,e.isPress=!1,e.tt=0}},{key:"handleKeyCode",value:function(t,e,n){for(var i=Object.keys(this.keyCodeMap),r=0;r<i.length;r++){var o=this.keyCodeMap[i[r]],a=o.action,s=o.keyCode,u=o.disable,l=o.pressAction,f=o.disablePress;if(s===t){if(!u&&!(n&&f)){var p=n&&l||a;"function"==typeof p?a(e,this.player,n):"string"==typeof p&&"function"==typeof this[p]&&this[p](e,this.player,n),this.emit(c.SHORTCUT,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(e){e0(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({key:i[r],target:e.target,isPress:n},this.keyCodeMap[i[r]]))}break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],eq(o.prototype,n),i&&eq(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(w.ZP);function e3(t){return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e4(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==e3(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==e3(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===e3(e)?e:String(e)}(i.key),i)}}function e5(t,e){return(e5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function e6(t){return(e6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var e8=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&e5(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=e6(o);return t=e?Reflect.construct(n,arguments,e6(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===e3(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"registerIcons",value:function(){return{loadingIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110"><path d="M100 50A50 50 0 1150 0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"/></svg>'}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],i=[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:D.ROOT}}}],n&&e4(o.prototype,n),i&&e4(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function e9(t){return(e9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e7=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],nt=function(){var t;function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.fragments=t.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=t.actionCallback,this.fragConfig={fragFocusClass:t.fragFocusClass||"inner-focus-point",fragAutoFocus:!!t.fragAutoFocus,fragClass:t.fragClass||""},this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return t=[{key:"updateDuration",value:function(t){var e=this;this.duration=t;var n=0,i=this.fragments;this.fragments=i.map(function(t){return t.start=parseInt(n,10),t.end=parseInt(n+t.percent*e.duration,10),t.duration=parseInt(t.percent*e.duration,10),n+=t.percent*e.duration,t})}},{key:"updateProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments;if(!(n.length<1)){var r=e.newIndex,o=e.curIndex,a=e.millisecond;r!==o&&n.map(function(e,n){n<r?e[t].style.width="100%":n>r&&(e[t].style.width=0)});var s=i[r],u=0===a?0:(a-s.start)/s.duration;n[r][t].style.width=u<0?0:"".concat(100*u,"%")}}},{key:"updateFocus",value:function(t){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2)){if(!t){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var e={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(e),this.focusIndex=-1}return}var n=this.findIndex(1e3*t.currentTime,this.focusIndex);if(n>=0&&n!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(n);var i={index:n,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=n,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*e,10)!==this.duration){if(!e&&0!==e)return;this.updateDuration(parseInt(1e3*e,10))}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==a.ZP.typeOf(t.played)){var r=this.findIndex(1e3*t.played,n);if(r<0)return;this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*t.played,10)}),this.playedIndex=r}if("Undefined"!==a.ZP.typeOf(t.cached)){var o=this.findIndex(1e3*t.cached,i);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*t.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(t,e){var n=this.fragments;if(!n||0===n.length)return -1;if(1===n.length)return 0;if(e>-1&&e<n.length&&t>n[e].start&&t<n[e].end)return e;if(t>n[n.length-1].start)return n.length-1;for(var i=0;i<n.length;i++)if(t>n[i].start&&t<=n[i].end){e=i;break}return e}},{key:"findHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)if(a.ZP.hasClass(t[e],this.fragConfig.fragFocusClass))return{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"findFragment",value:function(t){var e=this.root.children;return t<0||t>=e.length?null:{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)a.ZP.removeClass(t[e],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(t){var e=this.root.children;if(t<e.length)return a.ZP.addClass(e[t],this.fragConfig.fragFocusClass),{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(t){var e=this;if(Object.keys(this.fragConfig).forEach(function(n){void 0!==t[n]&&(e.fragConfig[n]=t[n])}),t.fragments){if(this.fragments=0===t.fragments.length?[{percent:1}]:t.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var n=this.root.children;n.length>0;)this.root.removeChild(n[0]);this.render()}}},{key:"render",value:function(){var t=this,e=this.style.progressColor;if(this.root||(this.root=a.ZP.createDom("xg-inners","",{},"progress-list")),this.fragments){var n=this.fragConfig,i=n.fragClass,r=n.fragFocusClass;this.progressList=this.fragments.map(function(n){var o=a.ZP.createDom("xg-inner","",{style:e?"background:".concat(e,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?r:""," xgplayer-progress-inner ").concat(i));return t.root.appendChild(o),e7.forEach(function(e){o.appendChild(a.ZP.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))}),{cached:o.children[0],played:o.children[1]}})}return this.root}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==e9(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==e9(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===e9(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach(function(e){nu(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nc(i.key),i)}}function no(t,e){return(no=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function na(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ns(t){return(ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nu(t,e,n){return(e=nc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nc(t){var e=function(t,e){if("object"!==ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ne(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ne(e)?e:String(e)}var nl={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},nf=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&no(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ns(o);return t=e?Reflect.construct(n,arguments,ns(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===ne(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return na(t)}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return nu(na(e=r.call(this,t)),"onMoveOnly",function(t,n){var i=na(e),r=i.pos,o=i.config,s=i.player,u=n;if(t){a.ZP.event(t);var c=a.ZP.getEventPos(t,s.zoom),l=90===s.rotateDeg?c.clientY:c.clientX;if(r.moving&&Math.abs(r.x-l)<o.miniMoveStep)return;r.moving=!0,r.x=l,u=e.computeTime(t,l)}e.triggerCallbacks("dragmove",u,t),e._updateInnerFocus(u)}),nu(na(e),"onBodyClick",function(t){t.preventDefault(),t.stopPropagation()}),nu(na(e),"_mouseDownHandler",function(t,n){e._state.time=n.currentTime,e.updateWidth(n.currentTime,n.percent,0),e._updateInnerFocus(n)}),nu(na(e),"_mouseUpHandler",function(t,n){na(e).pos.moving&&e.updateWidth(n.currentTime,n.percent,2)}),nu(na(e),"_mouseMoveHandler",function(t,n){var i=na(e),r=i._state,o=i.pos,a=i.config,s=i.player;r.time<n.currentTime?n.forward=!0:n.forward=!1,r.time=n.currentTime,o.isDown&&!o.moving&&(o.moving=!0,a.isPauseMoving&&s.pause(),e.triggerCallbacks("dragstart",n,t),e.emitUserAction("drag","dragstart",n)),e.updateWidth(n.currentTime,n.percent,1),e.triggerCallbacks("dragmove",n,t),e._updateInnerFocus(n)}),nu(na(e),"onMouseDown",function(t){var n=na(e),i=n._state,r=n.player,o=n.pos,s=n.config,u=n.playerConfig,c=a.ZP.getEventPos(t,r.zoom),l=90===r.rotateDeg?c.clientY:c.clientX;if(!r.isMini&&!s.closeMoveSeek&&(u.allowSeekAfterEnded||!r.ended)){t.stopPropagation(),e.focus(),a.ZP.checkIsFunction(u.disableSwipeHandler)&&u.disableSwipeHandler(),a.ZP.checkIsFunction(s.onMoveStart)&&s.onMoveStart(),a.ZP.event(t),o.x=l,o.isDown=!0,o.moving=!1,i.prePlayTime=r.currentTime,r.focus({autoHide:!1}),e.isProgressMoving=!0,a.ZP.addClass(e.progressBtn,"active");var f=e.computeTime(t,l);return f.prePlayTime=i.prePlayTime,e._mouseDownHandlerHook(t,f),"touchstart"===t.type?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1),r.root.addEventListener("click",e.onBodyClick,!1)),!0}}),nu(na(e),"onMouseUp",function(t){var n=na(e),i=n.player,r=n.config,o=n.pos,s=n.playerConfig,u=n._state;t.stopPropagation(),t.preventDefault(),a.ZP.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),a.ZP.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),a.ZP.event(t),a.ZP.removeClass(e.progressBtn,"active");var c=e.computeTime(t,o.x);c.prePlayTime=u.prePlayTime,o.moving?(e.triggerCallbacks("dragend",c,t),e.emitUserAction("drag","dragend",c)):(e.triggerCallbacks("click",c,t),e.emitUserAction("click","click",c)),e._mouseUpHandlerHook(t,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,u.prePlayTime=0,u.time=0,"touchend"===t.type?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),i.root.removeEventListener("click",e.onBodyClick,!1),o.isEnter?"mobile"!==s.isMobileSimulateMode&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(t)),a.ZP.setTimeout(na(e),function(){e.resetSeekState()},10),i.focus()}),nu(na(e),"onMouseMove",function(t){var n=na(e),i=n._state,r=n.pos,o=n.player,s=n.config;a.ZP.checkTouchSupport()&&t.preventDefault(),a.ZP.event(t);var u=a.ZP.getEventPos(t,o.zoom),c=90===o.rotateDeg?u.clientY:u.clientX,l=Math.abs(r.x-c);if((!r.moving||!(l<s.miniMoveStep))&&(r.moving||!(l<s.miniStartStep))){r.x=c;var f=e.computeTime(t,c);f.prePlayTime=i.prePlayTime,e._mouseMoveHandlerHook(t,f)}}),nu(na(e),"onMouseOut",function(t){e.triggerCallbacks("mouseout",null,t)}),nu(na(e),"onMouseOver",function(t){e.triggerCallbacks("mouseover",null,t)}),nu(na(e),"onMouseEnter",function(t){var n=na(e),i=n.player,r=n.pos;if(!r.isDown&&!r.isEnter&&!i.isMini&&(i.config.allowSeekAfterEnded||!i.ended)){r.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),a.ZP.event(t);var o=a.ZP.getEventPos(t,i.zoom),s=90===i.rotateDeg?o.clientY:o.clientX,u=e.computeTime(t,s);e.triggerCallbacks("mouseenter",u,t),e.focus()}}),nu(na(e),"onMouseLeave",function(t){e.triggerCallbacks("mouseleave",null,t),e.unlock(),e._updateInnerFocus(null)}),nu(na(e),"onVideoResize",function(){var t=e.pos,n=t.x,i=t.isDown;if(t.isEnter&&!i){var r=e.computeTime(null,n);e.onMoveOnly(null,r)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.useable=t}},{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.progress&&(t.config.disable=!t.player.config.progress)}},{key:"_initInner",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&0!==e.length||(e=[{percent:1}]);var i=ni(ni({fragments:e},n),{},{actionCallback:function(e){t.emitUserAction("fragment_focus","fragment_focus",e)}});this.innerList?this.innerList.reset(i):(this.innerList=new nt(i),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(e){t[e]=t.innerList[e].bind(t.innerList)}))}},{key:"_updateInnerFocus",value:function(t){this.innerList&&this.innerList.updateFocus(t)}},{key:"afterCreate",value:function(){var t=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer");var e=this.config,n=e.fragFocusClass,i=e.fragAutoFocus,r=e.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:i,fragClass:r,style:this.playerConfig.commonStyle||{}}),"mobile"===s.Z.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(c.DURATION_CHANGE,function(){t.onMouseLeave()}),this.on(c.TIME_UPDATE,function(){t.onTimeupdate()}),this.on(c.SEEKED,function(){t.onTimeupdate(),t.onCacheUpdate()}),this.on(c.PROGRESS,function(){t.onCacheUpdate()}),this.on(c.ENDED,function(){t.onCacheUpdate(!0),t.onTimeupdate(!0),t._state.now=0}),this.on(c.EMPTIED,function(){t.onReset()}),this.on(c.VIDEO_RESIZE,function(){t.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(t){var e=this,n=null;Object.keys(t).forEach(function(i){e.config[i]=t[i],"fragments"===i&&(n=t[i])}),n&&this._initInner(n,t)}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,e=this.progressBtn;t&&("string"==typeof t?e.style.boxShadow=t:"object"===ne(t)&&Object.keys(t).map(function(n){e.style[n]=t[n]}))}},{key:"triggerCallbacks",value:function(t,e,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(i){if(i&&i.handler&&i.type===t)try{i.handler(e,n)}catch(t){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),t)}})}},{key:"addCallBack",value:function(t,e){e&&"function"==typeof e&&this.__dragCallBacks.push({type:t,handler:e})}},{key:"removeCallBack",value:function(t,e){var n=this.__dragCallBacks,i=-1;n.map(function(n,r){n&&n.type===t&&n.handler===e&&(i=r)}),i>-1&&n.splice(i,1)}},{key:"unlock",value:function(){var t=this.player,e=this.pos;if(e.isEnter=!1,!t.isMini){if(this.unbind("mousemove",this.onMoveOnly),e.isDown)return void this.unbind("mouseleave",this.onMouseLeave);this.blur()}}},{key:"bindDomEvents",value:function(){var t=this.player,e=t.controls,n=t.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),("touch"===this.domEventType||"compatible"===this.domEventType)&&(this.root.addEventListener("touchstart",this.onMouseDown),e&&(e.root&&e.root.addEventListener("touchmove",a.ZP.stopPropagation),e.center&&e.center.addEventListener("touchend",a.ZP.stopPropagation))),("mouse"===this.domEventType||"compatible"===this.domEventType)&&(this.bind("mousedown",this.onMouseDown),"mobile"!==n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),a.ZP.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),a.ZP.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(t,e,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=t>=r.duration?r.duration-i.endedDiff:Number(t).toFixed(1);this.updatePercent(e),this.updateTime(t),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(t,e){var n,i,r=this.player,o=this.root.getBoundingClientRect(),a=o.width,s=o.height,u=o.top,c=o.left;90===r.rotateDeg?(n=s,i=u):(n=a,i=c);var l=e-i,f=(l=l>n?n:l<0?0:l)/n,p=parseInt((f=f<0?0:f>1?1:f)*this.duration*1e3,10)/1e3;return{percent:f,currentTime:p,offset:l,width:n,left:i,e:t}}},{key:"updateTime",value:function(t){var e=this.player,n=this.duration;t>n?t=n:t<0&&(t=0);var i=e.plugins.time;i&&i.updateTime(t)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var t=this.player.plugins.time;t&&t.resetActive()}},{key:"updatePercent",value:function(t,e){if(this.isProgressMoving=!0,!this.config.disable){t=t>1?1:t<0?0:t,this.progressBtn.style.left="".concat(100*t,"%"),this.innerList.update({played:t*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:t*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(t){var e=this.player,n=this._state,i=this.duration;if((!e.isSeeking||!e.video.seeking)&&!this.isProgressMoving&&e.hasStart){if(n.now>-1){var r=parseInt(1e3*n.now,10)-parseInt(1e3*e.currentTime,10);if(0===n.direc&&r>300||1===n.direc&&r>-300){n.now=-1;return}n.now=-1}var o=this.timeOffset+e.currentTime;o=a.ZP.adjustTimeByDuration(o,i,t),this.innerList.update({played:o},i),this.progressBtn.style.left="".concat(o/i*100,"%");var s=this.player.plugins.miniprogress;s&&s.update({played:o},i)}}},{key:"onCacheUpdate",value:function(t){var e=this.player,n=this.duration;if(e){var i=e.bufferedPoint.end;i=a.ZP.adjustTimeByDuration(i,n,t),this.innerList.update({cached:i},n);var r=this.player.plugins.miniprogress;r&&r.update({cached:i},n)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var t=this.player.plugins.miniprogress;t&&t.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var t=this.player,e=t.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;("touch"===n||"compatible"===n)&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),e&&(e.root&&e.root.removeEventListener("touchmove",a.ZP.stopPropagation),e.center&&e.center.removeEventListener("touchend",a.ZP.stopPropagation))),("mouse"===n||"compatible"===n)&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),t.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var t=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===t?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],i=[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:nl.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return nl}}],n&&nr(o.prototype,n),i&&nr(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function np(t){return(np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nh(t,e){return(nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nd(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ny(t){return(ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nv(t,e,n){return(e=ng(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ng(t){var e=function(t,e){if("object"!==np(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==np(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===np(e)?e:String(e)}var nm=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&nh(r,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ny(r);return t=e?Reflect.construct(n,arguments,ny(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===np(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nd(t)}(this,t)});function r(){var t;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return nv(nd(t=i.call.apply(i,[this].concat(n))),"_onMouseenter",function(e){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),nv(nd(t),"_onMouseLeave",function(e){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return n=[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ng(i.key),i)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(B);function nb(t){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nP(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nO(i.key),i)}}function n_(){return(n_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nE(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nk(t,e){return(nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nS(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nE(t){return(nE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nO(t){var e=function(t,e){if("object"!==nb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nb(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nb(e)?e:String(e)}var nw=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&nk(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nE(o);return t=e?Reflect.construct(n,arguments,nE(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===nb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nS(t)}(this,t)});function o(){var t,e,n,i;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return e=nS(t=r.call.apply(r,[this].concat(s))),n="btnClick",i=function(e){var n=nS(t),i=n.player;if(!n.config.disable)return e.preventDefault(),e.stopPropagation(),t.emitUserAction(e,"switch_play_pause"),i.ended?i.replay():i.paused&&!i.isBufferControlPaused?(i.play(),t.animate(!1)):(i.pause(),t.animate(!0)),!1},(n=nO(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,t}return n=[{key:"afterCreate",value:function(){var t=this;n_(nE(o.prototype),"afterCreate",this).call(this);var e=this.player;this._isPaused=!1,this.initIcons(),this.bind(["touchend","click"],this.btnClick),this.on([c.PAUSE,c.EMPTIED,c.PLAY],function(){t.animate(e.paused)}),this.on(c.BUFFER_CONTROLS,function(){t.animate(e.paused)}),this.animate(!0)}},{key:"registerIcons",value:function(){return{play:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},pause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.play),this.appendChild(".xgplayer-icon",t.pause)}},{key:"animate",value:function(t){var e=this.i18nKeys,n=this.player;t&&n.isBufferControlPaused||(t?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),e.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),e.PAUSE_TIPS)))}},{key:"destroy",value:function(){n_(nE(o.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_LEFT,index:0,disable:!1}}}],n&&nP(o.prototype,n),i&&nP(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function nT(t){return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nC(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nT(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nT(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nT(e)?e:String(e)}(i.key),i)}}function nx(t,e){return(nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nR(t){return(nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nA=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&nx(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nR(o);return t=e?Reflect.construct(n,arguments,nR(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===nT(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.onClick=function(e){e.preventDefault(),e.stopPropagation(),t.config.onClick(e)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:'<svg width="32" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M11.237 14l6.382-6.381A.875.875 0 1016.38 6.38l-7 7a.875.875 0 000 1.238l7 7a.875.875 0 101.238-1.238L11.237 14z" fill="#FFF" fill-rule="evenodd"/></svg>',class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(this.root,t.screenBack)}},{key:"show",value:function(){a.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){a.ZP.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],i=[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:D.ROOT_TOP,index:0}}}],n&&nC(o.prototype,n),i&&nC(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function nj(t){return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nI(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,nF(i.key),i)}}function nL(){return(nL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nM(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nD(t,e){return(nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nN(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nM(t){return(nM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nF(t){var e=function(t,e){if("object"!==nj(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nj(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nj(e)?e:String(e)}var nB=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&nD(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nM(o);return t=e?Reflect.construct(n,arguments,nM(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===nj(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nN(t)}(this,t)});function o(){var t,e,n,i;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return e=nN(t=r.call.apply(r,[this].concat(s))),n="_onOrientationChange",i=function(e){t.player.fullscreen&&t.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?t.setRotateDeg(0):t.setRotateDeg(90))},(n=nF(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,t}return n=[{key:"afterCreate",value:function(){var t=this;nL(nM(o.prototype),"afterCreate",this).call(this);var e=this.config,n=this.playerConfig;e.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=a.ZP.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen().catch(function(){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(e){t.config.disable||t.emitUserAction(e,"switch_fullscreen",{fullscreen:t.player.fullscreen})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(c.FULLSCREEN_CHANGE,function(e){t.changeLangTextKey(t.find(".xg-tips"),e?t.i18nKeys.EXITFULLSCREEN_TIPS:t.i18nKeys.FULLSCREEN_TIPS),t.animate(e),t.config.needBackIcon&&t.show()}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:nA,options:{config:{onClick:function(e){t.handleFullscreen(e)}}}})),"mobile"===s.Z.device&&window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"registerIcons",value:function(){return{fullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M19.173 6.861h6.798v6.798h-2.694V9.555h-4.104V6.86zm4.104 16.416v-4.104h2.694v6.798h-6.798v-2.694h4.104zM6.861 13.66V6.86h6.798v2.694H9.555v4.104H6.86zm2.694 5.514v4.104h4.104v2.694H6.86v-6.798h2.694z"/></svg>',class:"xg-get-fullscreen"},exitFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M21.867 10.965h4.104v2.694h-6.798V6.86h2.694v4.104zm-2.694 15.006v-6.798h6.798v2.694h-4.104v4.104h-2.694zm-8.208-15.006V6.861h2.694v6.798H6.86v-2.694h4.104zM6.861 21.867v-2.694h6.798v6.798h-2.694v-4.104H6.861z"/></svg>',class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){nL(nM(o.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===s.Z.device?"touchend":"click",this.handleFullscreen),"mobile"===s.Z.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.fullscreen),this.appendChild(".xgplayer-icon",t.exitFullscreen)}},{key:"setRotateDeg",value:function(t){var e=this.player;90===window.orientation||-90===window.orientation?e.rotateDeg=0:e.rotateDeg=t}},{key:"getRotateFullscreen",value:function(t){var e=this.player;e.isCssfullScreen&&e.exitCssFullscreen(t);var n=t?W.INNER_FULLSCREEN:W.ROTATE_FULLSCREEN;e._fullscreenEl=t||e.root,e.changeFullStyle(e.root,t,n,W.PARENT_ROTATE_FULLSCREEN),e.fullscreen=!0,this.setRotateDeg(90),this.emit(c.FULLSCREEN_CHANGE,!0)}},{key:"exitRotateFullscreen",value:function(t){var e=this.player;e.fullscreen=!1;var n=e._fullscreenEl!==e.root?W.INNER_FULLSCREEN:W.ROTATE_FULLSCREEN;e.recoverFullStyle(e.root,e._fullscreenEl,n,W.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(c.FULLSCREEN_CHANGE,!1)}},{key:"changeFullScreen",value:function(t){var e=this.player,n=this.config;if(!n.disable){t&&(t.preventDefault(),t.stopPropagation());var i=!1;if((!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen())&&(i=!0),i)e.fullscreen?(e.fullscreen=!1,e.exitCssFullscreen(),this.emit(c.FULLSCREEN_CHANGE,!1)):(e.fullscreen=!0,e.getCssFullscreen(),this.emit(c.FULLSCREEN_CHANGE,!0)),this.animate(e.fullscreen);else if(n.rotateFullscreen)e.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(e.fullscreen);else{if(n.switchCallback&&"function"==typeof n.switchCallback)return void n.switchCallback(e.fullscreen);e.fullscreen?e.exitFullscreen():e.getFullscreen().catch(function(){})}}}},{key:"animate",value:function(t){t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(t?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){nL(nM(o.prototype),"show",this).call(this)}},{key:"hide",value:function(){nL(nM(o.prototype),"hide",this).call(this)}},{key:"render",value:function(){var t="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}],n&&nI(o.prototype,n),i&&nI(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function nZ(t){return(nZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nU(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nZ(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nZ(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nZ(e)?e:String(e)}(i.key),i)}}function nH(){return(nH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nV(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nG(t,e){return(nG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nV(t){return(nV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nW=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&nG(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nV(o);return t=e?Reflect.construct(n,arguments,nV(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===nZ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return(e=r.call(this,t)).isActiving=!1,e}return n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var t=this,e=this.player.controls.config.mode;this.mode="flex"===e?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(c.DURATION_CHANGE,function(){t.onTimeUpdate()}),this.on(c.TIME_UPDATE,function(){t.onTimeUpdate()}),this.on(c.ENDED,function(){t.onTimeUpdate(!0)}),this.on(c.EMPTIED,function(){t.onReset()}))}},{key:"show",value:function(){"flex"!==this.mode&&nH(nV(o.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(t){var e=this.player,n=this.config,i=this.duration;if(!n.disable&&!this.isActiving&&e.hasStart){var r=e.currentTime+this.timeOffset;r=a.ZP.adjustTimeByDuration(r,i,t),"flex"===this.mode?(this.centerCurDom.innerHTML=a.ZP.format(r),i!==1/0&&i>0&&(this.centerDurDom.innerHTML=a.ZP.format(i))):(this.timeDom.innerHTML=a.ZP.format(r),i!==1/0&&i>0&&(this.durationDom.innerHTML=a.ZP.format(i)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=a.ZP.format(0),this.centerDurDom.innerHTML=a.ZP.format(0)):(this.timeDom.innerHTML=a.ZP.format(0),this.durationDom.innerHTML=a.ZP.format(0))}},{key:"createCenterTime",value:function(){var t=this.player;if(t.controls&&t.controls.center){var e=t.controls.center;this.centerCurDom=a.ZP.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=a.ZP.createDom("xg-icon","00:00",{},"xgplayer-time right"),e.children.length>0?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var t=this.config;if(this.duration===1/0||this.playerConfig.isLive?(a.ZP.hide(this.durationDom),a.ZP.hide(this.timeDom),a.ZP.hide(this.find(".time-separator")),a.ZP.show(this.find(".time-live-tag"))):a.ZP.hide(this.find(".time-live-tag")),t.hide)return void this.hide();this.show()}},{key:"changeLiveState",value:function(t){t?(a.ZP.hide(this.durationDom),a.ZP.hide(this.timeDom),a.ZP.hide(this.find(".time-separator")),a.ZP.show(this.find(".time-live-tag"))):(a.ZP.hide(this.find(".time-live-tag")),a.ZP.show(this.find(".time-separator")),a.ZP.show(this.durationDom),a.ZP.show(this.timeDom))}},{key:"updateTime",value:function(t){if(this.isActiving=!0,(t||0===t)&&!(t>this.duration)){if("flex"===this.mode){this.centerCurDom.innerHTML=a.ZP.format(t);return}this.timeDom.innerHTML=a.ZP.format(t)}}},{key:"resetActive",value:function(){var t=this,e=this.player,n=function(){t.isActiving=!1};this.off(c.SEEKED,n),e.isSeeking?this.once(c.SEEKED,n):this.isActiving=!1}},{key:"destroy",value:function(){var t=this.player.controls.center;this.centerCurDom&&t.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&t.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_LEFT,index:2,disable:!1}}}],n&&nU(o.prototype,n),i&&nU(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function nK(t){return(nK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nY(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n$(i.key),i)}}function nz(t,e){return(nz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nX(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nq(t){return(nq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nJ(t,e,n){return(e=n$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n$(t){var e=function(t,e){if("object"!==nK(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==nK(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nK(e)?e:String(e)}var nQ=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&nz(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nq(o);return t=e?Reflect.construct(n,arguments,nq(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===nK(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nX(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return nJ(nX(t=r.call.apply(r,[this].concat(n))),"onBarMousedown",function(e){var n=nX(t).player,i=t.find(".xgplayer-bar");a.ZP.event(e);var r=i.getBoundingClientRect(),o=a.ZP.getEventPos(e,n.zoom),s=r.height-(o.clientY-r.top);if(o.h=s,o.barH=r.height,t.pos=o,!(s<-2))return t.updateVolumePos(s,e),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),nJ(nX(t),"onBarMouseMove",function(e){var n=nX(t)._d;if(n.isStart){var i=nX(t),r=i.pos,o=i.player;e.preventDefault(),e.stopPropagation(),a.ZP.event(e);var s=a.ZP.getEventPos(e,o.zoom);n.isMoving=!0;var u=r.h-s.clientY+r.clientY;u>r.barH||t.updateVolumePos(u,e)}}),nJ(nX(t),"onBarMouseUp",function(e){a.ZP.event(e),document.removeEventListener("mouseup",t.onBarMouseUp);var n=nX(t)._d;n.isStart=!1,n.isMoving=!1}),nJ(nX(t),"onMouseenter",function(e){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),nJ(nX(t),"onMouseleave",function(e){t._d.isActive=!1,t.unFocus(100,!1,e),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),nJ(nX(t),"onVolumeChange",function(e){if(t.player){var n=t.player,i=n.muted,r=n.volume;!t._d.isMoving&&(t.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(i,r)}}),t}return n=[{key:"registerIcons",value:function(){return{volumeSmall:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM17.554 15.295L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998zm0 0L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',class:"xg-volume-small"},volumeLarge:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.753 18.48l-1.593-1.592c1.437-1.429 2.326-3.407 2.326-5.592s-.89-4.163-2.326-5.591l1.593-1.593c1.845 1.835 2.987 4.376 2.987 7.184s-1.142 5.349-2.987 7.184zm-3.199-3.185L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',class:"xg-volume"},volumeMuted:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.306 9.703l-2.394-2.406-1.604 1.604 2.417 2.395-2.406 2.395 1.604 1.604 2.383-2.418 2.395 2.406 1.604-1.604-2.417-2.383 2.406-2.395-1.604-1.604-2.384 2.418z"/></svg>',class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var t=this;this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.initIcons();var e=this.playerConfig,n=e.commonStyle,i=e.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(e){t.changeMuted(e)},{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==s.Z.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(c.VOLUME_CHANGE,this.onVolumeChange),this.once(c.LOADED_DATA,this.onVolumeChange),"Number"!==a.ZP.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange(),this.config.disable&&this.disable()}},{key:"updateVolumePos",value:function(t,e){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(t/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(t,"px");var a=Math.max(Math.min(o/1e3,1),0),s={volume:{from:n.volume,to:a}};n.muted&&(s.muted={from:!0,to:!1}),this.emitUserAction(e,"change_volume",{muted:n.muted,volume:n.volume,props:s}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var t=this.player,e=t.volume,n=t.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(e,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"focus",value:function(){var t=this.player;this.config.disable||(t.focus({autoHide:!1}),this._timerId&&(a.ZP.clearTimeout(this,this._timerId),this._timerId=null),a.ZP.addClass(this.root,"slide-show"))}},{key:"unFocus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=this._d,o=this.player;r.isActive||(this._timerId&&(a.ZP.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=a.ZP.setTimeout(this,function(){!r.isActive&&(n?o.blur():o.focus(),a.ZP.removeClass(t.root,"slide-show"),r.isStart&&t.onBarMouseUp(i)),t._timerId=null},e))}},{key:"changeMuted",value:function(t){if(!this.config.disable){t&&t.stopPropagation();var e=this.player;this._d.isStart&&this.onBarMouseUp(t),this.emitUserAction(t,"change_muted",{muted:e.muted,volume:e.volume,props:{muted:{from:e.muted,to:!e.muted}}}),e.volume>0&&(e.muted=!e.muted),e.volume<.01&&(e.volume=this.config.miniVolume)}}},{key:"animate",value:function(t,e){t||0===e?this.setAttr("data-state","mute"):e<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.volumeSmall),this.appendChild(".xgplayer-icon",t.volumeLarge),this.appendChild(".xgplayer-icon",t.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(a.ZP.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===s.Z.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){var t=this.config.default||this.player.volume,e=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(e?'<div class="xgplayer-value-label">'.concat(100*t,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*t,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}],i=[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}],n&&nY(o.prototype,n),i&&nY(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function n0(t){return(n0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n6(i.key),i)}}function n2(){return(n2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n5(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function n3(t,e){return(n3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function n4(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n5(t){return(n5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n6(t){var e=function(t,e){if("object"!==n0(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==n0(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n0(e)?e:String(e)}var n8=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&n3(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=n5(o);return t=e?Reflect.construct(n,arguments,n5(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===n0(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return n4(t)}(this,t)});function o(t){var e,n,i,a;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return n=n4(e=r.call(this,t)),i="onBtnClick",a=function(t){e.config.disable||(t.preventDefault(),t.stopPropagation(),e.emitUserAction(t,"rotate"),e.rotate(e.config.clockwise,e.config.innerRotate,1))},(i=n6(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,e.rotateDeg=e.config.rotateDeg||0,e}return n=[{key:"afterCreate",value:function(){var t=this;n2(n5(o.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(c.VIDEO_RESIZE,function(){t.rotateDeg&&a.ZP.setTimeout(t,function(){t.updateRotateDeg(t.rotateDeg,t.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}},{key:"destroy",value:function(){n2(n5(o.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"updateRotateDeg",value:function(t,e){var n=this.player;t||(t=0);var i=this.player,r=i.root,o=i.innerContainer,a=i.video,s=r.offsetWidth,u=o&&e?o.offsetHeight:r.offsetHeight,c="100%",l="100%",f=0,p=0;(.75===t||.25===t)&&(c="".concat(u,"px"),l="".concat(s,"px"),f=-(u-s)/2,p=-(s-u)/2);var h="translate(".concat(f,"px,").concat(p,"px) rotate(").concat(t,"turn)"),d={transformOrigin:"center center",transform:h,webKitTransform:h,height:l,width:c},y=e?a:r,v=e?n.getPlugin("poster"):null;Object.keys(d).map(function(t){y.style[t]=d[t],v&&v.root&&(v.root.style[t]=d[t])})}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0),this.rotateDeg=(this.rotateDeg+1+.25*(t?1:-1)*n)%1,this.updateRotateDeg(this.rotateDeg,e),i.emit(c.ROTATE,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none"><g clip-path="url(#clip0)" fill="#fff"><path d="M17.5 13.75H6.25A3.75 3.75 0 002.5 17.5v6.25a3.75 3.75 0 003.75 3.75H17.5a3.75 3.75 0 003.75-3.75V17.5a3.75 3.75 0 00-3.75-3.75z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.822 6.094a1.247 1.247 0 00.156 1.79l4.509 4.204a1.25 1.25 0 101.705-1.828L9.93 8.152l4.799-.018.039-.001a10 10 0 019.521 13.983 1.25 1.25 0 002.292.998 12.5 12.5 0 00-11.88-17.48l-5.05.019 2.293-2.46a1.25 1.25 0 10-1.829-1.705L5.854 6.06l-.032.036z"/></g><defs><clipPath id="RotateSvg-clip0"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>'}}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}],n&&n1(o.prototype,n),i&&n1(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function n9(t){return(n9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n7(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,io(i.key),i)}}function it(){return(it="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ir(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ie(t,e){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ii(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t){var e=function(t,e){if("object"!==n9(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==n9(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n9(e)?e:String(e)}var ia={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},is=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&ie(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ir(o);return t=e?Reflect.construct(n,arguments,ir(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===n9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ii(t)}(this,t)});function o(){var t,e,n,i;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return e=ii(t=r.call.apply(r,[this].concat(s))),n="switchPIP",i=function(e){if(!t.isPIPAvailable()||t.config.disable)return!1;e.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(e,"change_pip",{from:"pip",to:"normal"}),t.setAttr("data-state","normal")):4===t.player.video.readyState&&(t.requestPIP(),t.emitUserAction(e,"change_pip",{from:"normal",to:"pip"}),t.setAttr("data-state","pip"))},(n=io(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,t}return n=[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.pip&&(t.config.showIcon=t.player.config.pip)}},{key:"afterCreate",value:function(){var t=this;this.isPIPAvailable()&&(it(ir(o.prototype),"afterCreate",this).call(this),this.pMode=ia.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(c.COMPLETE,function(){t.config.showIcon&&(a.ZP.removeClass(t.find(".xgplayer-icon"),"xg-icon-disable"),t.bind("click",t.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/></svg>',class:"xg-get-pip"},pipIconExit:{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 7.7a.5.5 0 00.5-.5v-.7a.5.5 0 00-.5-.5h-4a.5.5 0 00-.5.5v3.96a.5.5 0 00.5.5h.7a.5.5 0 00.5-.5V8.83l2.07 2.109a.5.5 0 00.707.006l.5-.49a.5.5 0 00.006-.707L7.973 7.7H9.5z" fill="#fff"/></svg>',class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.pipIcon),this.appendChild(".xgplayer-icon",t.pipIconExit)}},{key:"initPipEvents",value:function(){var t=this,e=this.player;this.leavePIPCallback=function(){var n=e.paused;a.ZP.setTimeout(t,function(){n||e.videoPlay()},0),n||e.videoPlay(),t.setAttr("data-state","normal"),e.emit(c.PIP_CHANGE,!1)},this.enterPIPCallback=function(n){e.emit(c.PIP_CHANGE,!0),t.pipWindow=n.pictureInPictureWindow,t.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=e.video.webkitPresentationMode;t.pMode===ia.FULLSCREEN&&i!==ia.FULLSCREEN&&e.onFullscreenChange(null,!1),t.pMode=i,i===ia.PIP?t.enterPIPCallback(n):i===ia.INLINE&&t.leavePIPCallback(n)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),o.checkWebkitSetPresentationMode(e.video)&&e.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var t=this.player,e=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var n=e.poster;return n&&(t.video.poster="String"===a.ZP.typeOf(n)?n:n.poster),o.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("picture-in-picture"):t.video.requestPictureInPicture(),!0}catch(t){return console.error("requestPiP",t),!1}}},{key:"exitPIP",value:function(){var t=this.player;try{return this.isPIPAvailable()&&this.isPip&&(o.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var t=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===t.video||t.video.webkitPresentationMode===ia.PIP}},{key:"isPIPAvailable",value:function(){var t=this.player.video;return("Boolean"!==a.ZP.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===a.ZP.typeOf(t.disablePictureInPicture)&&!t.disablePictureInPicture||t.webkitSupportsPresentationMode&&"Function"===a.ZP.typeOf(t.webkitSetPresentationMode))}},{key:"destroy",value:function(){it(ir(o.prototype),"destroy",this).call(this);var t=this.player;t.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),o.checkWebkitSetPresentationMode(t.video)&&t.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(t){return"function"==typeof t.webkitSetPresentationMode}}],n&&n7(o.prototype,n),i&&n7(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,id(i.key),i)}}function il(t,e){return(il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ip(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ih(t){return(ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function id(t){var e=function(t,e){if("object"!==iu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iu(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iu(e)?e:String(e)}var iy=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&il(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ih(o);return t=e?Reflect.construct(n,arguments,ih(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===iu(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ip(t)}(this,t)});function o(t){var e,n,i,a;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return n=ip(e=r.call(this,t)),i="playNext",a=function(t){var n=ip(e).player;t.preventDefault(),t.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,n.emit(c.PLAYNEXT,e.idx+1),e.nextHandler(e.config.urlList[e.idx],e.idx)):(e.nextHandler(),n.emit(c.PLAYNEXT))},(i=id(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,e.idx=-1,e}return n=[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>'}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var t="mobile"===s.Z.device?"touchend":"click";this.bind(t,this.playNext),this.show()}},{key:"changeSrc",value:function(t){var e=this.player;t&&(e.pause(),e.currentTime=0,e.autoplay=!0,e.src=t)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],i=[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}],n&&ic(o.prototype,n),i&&ic(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B),iv=n(763300),ig=n.n(iv);function im(t){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ib(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,iE(i.key),i)}}function iP(){return(iP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iS(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function i_(t,e){return(i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ik(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iS(t){return(iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iE(t){var e=function(t,e){if("object"!==im(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==im(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===im(e)?e:String(e)}var iO=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&i_(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iS(o);return t=e?Reflect.construct(n,arguments,iS(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===im(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ik(t)}(this,t)});function o(t){var e,n,i,a;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return n=ik(e=r.call(this,t)),i="download",a=function(t){if(!e.isLock&&!e.config.disable){e.emitUserAction(t,"download");var n=e.getAbsoluteURL(e.player.src);ig()(n),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}},(i=iE(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,e.timer=null,e.isLock=!1,e}return n=[{key:"afterCreate",value:function(){iP(iS(o.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>'}}},{key:"getAbsoluteURL",value:function(t){if(!t.match(/^https?:\/\//)){var e=document.createElement("div");e.innerHTML='<a href="'.concat(t,'">x</a>'),t=e.firstChild.href}return t}},{key:"destroy",value:function(){iP(iS(o.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:3,disable:!0}}}],n&&ib(o.prototype,n),i&&ib(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function iw(t){return(iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iT(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iw(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iw(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iw(e)?e:String(e)}(i.key),i)}}function iC(){return(iC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iR(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ix(t,e){return(ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iR(t){return(iR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iA=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&ix(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iR(o);return t=e?Reflect.construct(n,arguments,iR(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===iw(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.screenShot&&(t.config.disable=!t.player.config.screenShot)}},{key:"afterCreate",value:function(){iC(iR(o.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(c.VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(t,e){var n=document.createElement("a");n.href=t,n.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(t,e){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=t||this.config.width,n.height=e||this.config.height}},{key:"onClickBtn",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"shot"),this.shot().then(function(t){e.emit(c.SCREEN_SHOT,t),e.saveScreenShot(t,e.config.name+e.config.format)})}},{key:"shot",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,a=i.quality||r.quality,s=i.type||r.type;return new Promise(function(i,u){n.canvas?(n.canvas.width=t||r.width,n.canvas.height=e||r.height):n.createCanvans(t,e),n.canvasCtx.drawImage(o.video,0,0,t||r.width,e||r.height);var c=n.canvas.toDataURL(s,a).replace(s,"image/octet-stream");i(c=c.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){iC(iR(o.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(c.VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var t=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",e="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(t,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span>")," \n      </div>\n    </xg-icon>")}}}],i=[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}],n&&iT(o.prototype,n),i&&iT(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function ij(t){return(ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var iI=function(){var t;function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.config=t.config,this.parent=t.root,this.root=a.ZP.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===s.Z.device?"touchend":"click";this._delegates=B.delegate.call(this,this.root,"li",n,this.onItemClick)}return t=[{key:"renderItemList",value:function(t){var e=this,n=this.config,i=this.root;t?n.data=t:t=n.data,n.style&&Object.keys(n.style).map(function(t){i.style[t]=n[t]}),t.length>0&&(this.attrKeys=Object.keys(t[0])),this.root.innerHTML="",t.map(function(t,n){var i=t.selected?"option-item selected":"option-item";t["data-index"]=n,e.root.appendChild(a.ZP.createDom("li","<span>".concat(t.showText,"</span>"),t,i))})}},{key:"onItemClick",value:function(t){t.delegateTarget||(t.delegateTarget=t.target);var e=t.delegateTarget;if(e&&a.ZP.hasClass(e,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");a.ZP.addClass(e,"selected"),i&&a.ZP.removeClass(i,"selected"),n(t,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(e,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){if(!t||!e)return{};var n={};e.map(function(e){n[e]=t.getAttribute(e)});var i=t.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){a.ZP.removeClass(this.root,"hide"),a.ZP.addClass(this.root,"active")}},{key:"hide",value:function(){a.ZP.removeClass(this.root,"active"),a.ZP.addClass(this.root,"hide")}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).forEach(function(n){e.root.style[n]=t[n]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(t){t.destroy&&t.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ij(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ij(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ij(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function iL(t){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iD(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,iZ(i.key),i)}}function iN(t,e){return(iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iM(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iF(t){return(iF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iB(t,e,n){return(e=iZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iZ(t){var e=function(t,e){if("object"!==iL(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iL(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iL(e)?e:String(e)}var iU="mobile"===s.Z.device,iH=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&iN(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iF(o);return t=e?Reflect.construct(n,arguments,iF(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===iL(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return iM(t)}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return iB(iM(e=r.call(this,t)),"onEnter",function(t){t.preventDefault(),t.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.onToggle(!0)}),iB(iM(e),"onLeave",function(t){t.preventDefault(),t.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.isActive&&e.onToggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return n=[{key:"updateLang",value:function(t){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var t=this,e=this.config;this.initIcons(),iU&&"middle"!==e.listType&&(e.listType="rightSide"),e.hidePortrait&&a.ZP.addClass(this.root,"portrait"),this.once(c.CANPLAY,function(){e.list&&e.list.length>0&&(t.renderItemList(e.list),t.show())}),iU&&this.on(c.PLAYER_FOCUS,function(){t.isActive&&(t.optionsList&&t.optionsList.hide(),t.isActive=!1)}),this.activeEvent=iU?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick),this.config.disable&&this.disable()}},{key:"initIcons",value:function(){var t=this,e=this.icons,n=Object.keys(e),i=!1;n.length>0&&(n.forEach(function(n){t.appendChild(".xgplayer-icon",e[n]),i||(i=e[n])}),this.isIcons=i),i||(this.appendChild(".xgplayer-icon",a.ZP.createDom("span","",{},"icon-text")),a.ZP.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){this.config.list&&!(this.config.list.length<1)&&a.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){a.ZP.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(t,e,n){if(void 0===t)return"";var i=this.config.list;n||(n=this.player.lang),e=!e||a.ZP.isUndefined(t[e])?"text":e,"number"==typeof t&&(t=i[t]);try{if("object"===iL(t[e]))return t[e][n]||t[e].zh;return t[e]}catch(t){return console.warn(t),""}}},{key:"onToggle",value:function(t){if(t!==this.isActive&&!this.config.disable){var e=this.player.controls,n=this.config.listType;t?("rightSide"===n?e.blur():e.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?e.focus():e.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=t}}},{key:"onItemClick",value:function(t,e){t.preventDefault(),t.stopPropagation();var n=this.config,i=n.listType,r=n.list;(iU||"rightSide"===i)&&this.onToggle(!1),this.curIndex=e.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"onIconClick",value:function(t){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var t=this.config.list,e=this.curIndex<t.length?this.curIndex:0,n=t[e];n&&(this.find(".icon-text").innerHTML=this.getTextByLang(n,"iconText"))}}},{key:"renderItemList",value:function(t,e){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof e&&(this.curIndex=e,this.curItem=i.list[e]),r){r.renderItemList(t),this.changeCurrentText();return}var a={config:{data:t||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(t,e){n.onItemClick(t,e)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new iI(a),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],i=[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}],n&&iD(o.prototype,n),i&&iD(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function iG(t){return(iG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iV(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iG(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iG(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iG(e)?e:String(e)}(i.key),i)}}function iW(){return(iW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iY(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function iK(t,e){return(iK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iY(t){return(iY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iz=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&iK(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iY(o);return t=e?Reflect.construct(n,arguments,iY(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===iG(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return(e=r.call(this,t)).curTime=0,e.isPaused=!0,e}return n=[{key:"beforeCreate",value:function(t){var e=t.config.list;Array.isArray(e)&&e.length>0&&(t.config.list=e.map(function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t}))}},{key:"afterCreate",value:function(){var t=this;iW(iY(o.prototype),"afterCreate",this).call(this);var e=this.config,n=e.list,i=e.defaultDefinition,r=this.playerConfig.defaultConfig;n.forEach(function(t){(t.definition===i||t.definition===r)&&(t.selected=!0)}),this.on("resourceReady",function(e){t.changeDefinitionList(e)}),this.on(c.DEFINITION_CHANGE,function(e){t.renderItemList(t.config.list,e.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var t=this.config,e=t.list,n=t.defaultDefinition,i=this.playerConfig.defaultConfig;if(e.length>0){var r=null;e.map(function(t){(t.definition===n||t.definition===i)&&(r=t,t.selected=!0)}),r||(r=e[0]),this.changeDefinition(r)}}},{key:"renderItemList",value:function(t,e){var n=this,i=e&&e.definition?e.definition:"";e&&!Array.isArray(e)&&t.forEach(function(t){t.selected=!1});var r=0,s=t.map(function(t,e){var o={url:t.url,definition:t.definition||"",showText:n.getTextByLang(t)||t.definition,selected:!1};return(t.selected||!a.ZP.isUndefined(t.definition)&&t.definition===i)&&(o.selected=!0,r=e),o});iW(iY(o.prototype),"renderItemList",this).call(this,s,r)}},{key:"changeDefinitionList",value:function(t){if(Array.isArray(t)){var e=this.playerConfig,n=e.definition,i=e.defaultDefinition,r=n||this.config.defaultDefinition||"";this.config.list=t.map(function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),(t.definition===r||t.definition===i)&&(t.selected=!0),t}),n.list=t,this.renderItemList(t),this.config.list.length<2?this.hide():this.show()}}},{key:"changeDefinition",value:function(t,e){var n=this.player;n.switchURL?n.switchUrl(t.url):n.changeDefinition(t,e)}},{key:"onItemClick",value:function(t,e){var n=this.player.definitionList;iW(iY(o.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(t,"change_definition",{from:e.from,to:e.to});for(var i=0;i<n.length;i++)e.to&&n[i].definition===e.to.definition&&(e.to.url=n[i].url),e.from&&n[i].definition===e.from.definition&&(e.from.url=n[i].url);this.player.changeDefinition(e.to,e.from)}}],i=[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}],n&&iV(o.prototype,n),i&&iV(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(iH);function iX(t){return(iX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iq(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iX(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==iX(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iX(e)?e:String(e)}(i.key),i)}}function iJ(){return(iJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iQ(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function i$(t,e){return(i$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iQ(t){return(iQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i0=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&i$(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iQ(o);return t=e?Reflect.construct(n,arguments,iQ(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===iX(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return(e=r.call(this,t)).curRate=1,e}return n=[{key:"beforeCreate",value:function(t){var e=t.player.config.playbackRate,n=e?Array.isArray(e)?e:t.config.list:[];Array.isArray(n)&&(t.config.list=n.map(function(t){return"number"==typeof t?t={rate:t,text:"".concat(t,"x")}:!t.text&&t.rate&&(t.text="".concat(t.rate,"x")),t}))}},{key:"afterCreate",value:function(){var t=this;iJ(iQ(o.prototype),"afterCreate",this).call(this),this.on(c.RATE_CHANGE,function(){t.curValue!==t.player.playbackRate&&t.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&iJ(iQ(o.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(t,e){iJ(iQ(o.prototype),"onItemClick",this).apply(this,arguments);var n=Number(t.delegateTarget.getAttribute("rate"));if(!n||n===this.curValue)return!1;var i={playbackRate:{from:this.player.playbackRate,to:n}};this.emitUserAction(t,"change_rate",{props:i}),this.curValue=n,this.player.playbackRate=n}},{key:"renderItemList",value:function(){var t=this,e=this.player.playbackRate||1;this.curValue=e;var n=0,i=this.config.list.map(function(i,r){var o={rate:i.rate};return o.rate===e&&(o.selected=!0,n=r),o.showText=t.getTextByLang(i),o});iJ(iQ(o.prototype),"renderItemList",this).call(this,i,n)}},{key:"destroy",value:function(){iJ(iQ(o.prototype),"destroy",this).call(this)}}],i=[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}],n&&iq(o.prototype,n),i&&iq(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(iH);function i1(t){return(i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i2(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==i1(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==i1(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i1(e)?e:String(e)}(i.key),i)}}function i3(){return(i3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i5(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function i4(t,e){return(i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i5(t){return(i5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i6=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&i4(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=i5(o);return t=e?Reflect.construct(n,arguments,i5(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===i1(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"afterCreate",value:function(){var t=this;i3(i5(o.prototype),"afterCreate",this).call(this),this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(c.CSS_FULLSCREEN_CHANGE,function(e){t.animate(e)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen)}},{key:"initIcons",value:function(){var t=this.icons,e=this.find(".xgplayer-icon");e.appendChild(t.cssFullscreen),e.appendChild(t.exitCssFullscreen)}},{key:"btnClick",value:function(t){if(!this.config.disable){t.preventDefault(),t.stopPropagation();var e=this.player.isCssfullScreen;this.emitUserAction(t,"switch_cssfullscreen",{cssfullscreen:e}),e?this.player.exitCssFullscreen():this.player.getCssFullscreen()}}},{key:"animate",value:function(t){this.root&&(t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(t))}},{key:"switchTips",value:function(t){var e=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),t?e.EXITCSSFULLSCREEN_TIPS:e.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-get-cssfull"},exitCssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){i3(i5(o.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.CSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:D.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}],n&&i2(o.prototype,n),i&&i2(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(nm);function i8(t){return(i8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i9(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==i8(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==i8(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i8(e)?e:String(e)}(i.key),i)}}function i7(t,e){return(i7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&i7(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rt(o);return t=e?Reflect.construct(n,arguments,rt(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===i8(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"error"}}],n=[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(c.CANPLAY,function(){t.handleCanPlay()}),this.on(c.ERROR,function(e){t.onError(e)})}},{key:"errorRetry",value:function(t){this.emitUserAction(t,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){a.ZP.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.player,n=t.errorType,i=e.error;if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],i9(o.prototype,n),i&&i9(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==rn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rn(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rn(e)?e:String(e)}(i.key),i)}}function rr(t,e){return(rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ra=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rr(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ro(o);return t=e?Reflect.construct(n,arguments,ro(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rn(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}],n=[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))}),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).map(function(n){e.root.style[n]=t[n]})}},{key:"show",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){this.customOnClick=i;var r=this.config.interval;if(this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),a.ZP.addClass(this.root,"show"),"arrow"===n.mode&&a.ZP.addClass(this.root,"arrow"),"string"==typeof t?this.find(".xgplayer-prompt-detail").innerHTML=t:this.find(".xgplayer-prompt-detail").innerHTML="".concat(t.text||"")+"".concat(t.highlight?'<i class="highlight">'.concat(t.highlight,"</i>"):""),n.style&&this.setStyle(n.style),"boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide){var o=n.interval||r;this.intervalId=setTimeout(function(){e.hide()},o)}}}},{key:"hide",value:function(){a.ZP.removeClass(this.root,"show"),a.ZP.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(W.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],ri(o.prototype,n),i&&ri(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B),rs={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function ru(t){Object.keys(rs).map(function(e){void 0===t[e]&&(t[e]=rs[e])})}var rc={initDots:function(){var t=this;this._ispots.map(function(e){t.createDot(e,!1)}),this._ispotsInit=!0},createDot:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.player.plugins.progress;if(n&&(e&&(ru(t),this._ispots.push(t)),this._ispotsInit||!e)){var i=this.calcuPosition(t.time,t.duration),r=t.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(t.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=a.ZP.createDom("xg-spot",t.template||"",{"data-text":t.text,"data-time":t.time,"data-id":t.id},o);Object.keys(r).map(function(t){s.style[t]=r[t]}),n.outer&&n.outer.appendChild(s)}},findDot:function(t){if(this.player.plugins.progress){var e=this._ispots.filter(function(e,n){return e.id===t});return e.length>0?e[0]:null}},updateDot:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(t.id);if(i&&Object.keys(t).map(function(e){i[e]=t[e]}),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(t.id,'"]'));if(r){var o=this.calcuPosition(t.time,t.duration),s=t.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",t.text),r.setAttribute("data-time",t.time),o.isMini?a.ZP.addClass(r,"mini"):a.ZP.removeClass(r,"mini"),Object.keys(s).map(function(t){r.style[t]=s[t]}),e&&this.showDot(t.id)}}}},deleteDot:function(t){var e=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<e.length;r++)e[r].id===t&&i.push(r);for(var o=i.length,a=o-1;a>=0;a--)if(e.splice(i[a],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(t,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var t=this.player.plugins.progress;if(t){if(!this._ispotsInit){this._ispots=[];return}for(var e=t.root.getElementsByTagName("xg-spot"),n=e.length-1;n>=0;n--)t.outer.removeChild(e[n]);this._ispots=[]}},updateAllDots:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n){if(!this._ispotsInit){this._ispots=e;return}this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>e.length)for(var o=r-1;o>e.length-1;o--)n.outer.removeChild(i[o]);e.map(function(e,n){n<r?(i[n].setAttribute("data-id","".concat(e.id)),t._ispots.push(e),t.updateDot(e)):t.createDot(e)})}},getAllDotsDom:function(){var t=this.player.plugins.progress;return t?t.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(t){var e=this.player.plugins.progress;if(e)return e.find('xg-spot[data-id="'.concat(t,'"]'))}};function rl(t){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rv(i.key),i)}}function rp(t,e){return(rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rh(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rd(t){return(rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ry(t,e,n){return(e=rv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rv(t){var e=function(t,e){if("object"!==rl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rl(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rl(e)?e:String(e)}var rg={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},rm=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rp(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rd(o);return t=e?Reflect.construct(n,arguments,rd(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rl(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return rh(t)}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return ry(rh(e=r.call(this,t)),"onMousemove",function(t){if(!e.config.disable){if(a.ZP.hasClass(t.target,"xg-spot-content")&&e.config.isHideThumbnailHover)return void e.player.plugins.progress.onMouseLeave(t);(e._state.f||a.ZP.hasClass(t.target,"xg-spot-content"))&&(a.ZP.event(t),t.stopPropagation())}}),ry(rh(e),"onMousedown",function(t){!e.config.disable&&(e._state.f||a.ZP.hasClass(t.target,"xg-spot-content"))&&(a.ZP.event(t),t.stopPropagation())}),ry(rh(e),"onMouseup",function(t){if(e.isDrag){var n=e.player.plugins.progress;n&&n.pos&&(n.onMouseUp(t),n.pos.isEnter||n.onMouseLeave(t))}}),ry(rh(e),"onDotMouseLeave",function(t){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(t.target),e._curDot=null;var n=e.player.plugins.progress;n&&n.enableBlur(),e.show()}}),ry(rh(e),"onProgressMouseOver",function(t,n){if(!e.config.disable&&a.ZP.hasClass(n.target,"xgplayer-spot")&&!e._curDot){e._curDot=n.target,e.focusDot(n.target),e._curDot.children.length>0&&e.hide();var i=e.player.plugins.progress;i&&i.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e._state={now:0,f:!1},e}return i=[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}],n=[{key:"beforeCreate",value:function(t){var e=t.player.plugins.progress;e&&(t.root=e.root)}},{key:"afterCreate",value:function(){var t,e,n,i=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(t,e){e.time&&i.player.seek(e.time)}),t=this,e=t.config,n=t.player,Object.keys(rc).map(function(e){t[e]=rc[e].bind(t)}),t._ispots=(n.config.progressDot||e.ispots||[]).map(function(t){return ru(t),t}),t._ispotsInit=!1,n.once(c.DURATION_CHANGE,function(){t.initDots()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(t){var e=this;t&&Object.keys(t).map(function(n){e.config[n]=t[n]})}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t=this,e=this.player.plugins.progress;if(e&&(Object.keys(rg).map(function(n){t[rg[n]]=t[rg[n]].bind(t),e.addCallBack(n,t[rg[n]])}),"mobile"!==s.Z.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",function(){});this.handlerPreviewClick=function(e){e.stopPropagation(),n(parseInt(1e3*t._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(t,e){!this.config.disable&&this.player.duration&&this.updatePosition(t.offset,t.width,t.currentTime,t.e)}},{key:"onProgressDragStart",value:function(t){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&a.ZP.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(t){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&a.ZP.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(t,e){if(!this.config.disable&&a.ZP.hasClass(e.target,"xgplayer-spot")){e.stopPropagation(),e.preventDefault();var n={};["time","id","text"].map(function(t){n[t]=e.target.getAttribute("data-".concat(t))}),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(e,n)}}},{key:"updateLinePos",value:function(t,e){var n,i,r=this.root,o=this.previewLine,a=this.timePoint,s=this.player,u=this.config,c="flex"===s.controls.mode,l=r.getBoundingClientRect().width;if(l||!this._hasThumnail){var f=a.getBoundingClientRect().width,p=t-(l=this._hasThumnail&&l<u.width?u.width:l)/2;p<0&&!c?(p=0,n=t-l/2,this.thumbnail||(i=t-l/2-f/2)):p>e-l&&!c?(n=p-(e-l),this.thumbnail||(i=p-(e-l)-f/2),p=e-l):(n=0,this.thumbnail||(i=-f/2)),void 0!==n&&(o.style.transform="translateX(".concat(n.toFixed(2),"px)")),void 0!==i&&(a.style.transform="translateX(".concat(i.toFixed(2),"px)")),r.style.transform="translateX(".concat(p.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(t){var e=this.timeText,n=this.timePoint;e.textContent=t,this.thumbnail||(n.textContent=t)}},{key:"updatePosition",value:function(t,e,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(t,e),s.now=n;var u=a.ZP.format(n);i&&i.target&&a.ZP.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,u),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,u)):(s.f=!1,this.hideTips("")),this.updateTimeText(u),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(t){var e=this.player,n=this.videoPreview,i=this.config,r=e.plugins.thumbnail;if(r&&r.usable){this.thumbnail&&r.update(this.thumbnail,t,i.width,i.height);var o=n&&n.getBoundingClientRect();this.videothumbnail&&r.update(this.videothumbnail,t,o.width,o.height)}}},{key:"registerThumbnail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==s.Z.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i&&i.setConfig(t),!i||!i.usable||!n.isShowThumbnail)return void a.ZP.addClass(this.root,"short-line no-thumbnail");a.ZP.removeClass(this.root,"short-line no-thumbnail"),"short"===n.mode&&a.ZP.addClass(this.root,"short-line"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=a.ZP.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(t,e){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6,a={};return t+e>i.duration&&(e=i.duration-t),a.left=t/i.duration*100,a.width=e/i.duration,a.isMini=o>e,{left:t/i.duration*100,width:e/i.duration*100,isMini:e<o}}},{key:"showDot",value:function(t){var e=this.findDot(t);if(e){var n=this.root.getBoundingClientRect().width,i=e.time/this.player.duration*n;this.updatePosition(i,n,e.time)}}},{key:"focusDot",value:function(t,e){t&&(e||(e=t.getAttribute("data-id")),a.ZP.addClass(t,"active"),this._activeDotId=e)}},{key:"blurDot",value:function(t){if(!t){var e=this._activeDotId;t=this.getDotDom(e)}t&&(a.ZP.removeClass(t,"active"),this._activeDotId=null)}},{key:"showTips",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.ZP.addClass(this.root,"no-timepoint"),t&&(a.ZP.addClass(this.find(".xg-spot-content"),"show-text"),e&&"production"===this.config.mode?(a.ZP.addClass(this.root,"product"),this.tipText.textContent=t):(a.ZP.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?t:"".concat(n," ").concat(t)))}},{key:"hideTips",value:function(){a.ZP.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",a.ZP.removeClass(this.find(".xg-spot-content"),"show-text"),a.ZP.removeClass(this.root,"product")}},{key:"hide",value:function(){a.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){a.ZP.removeClass(this.root,"hide")}},{key:"enable",value:function(){var t=this.config,e=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&t.isShowThumbnail&&this.registerThumbnail(e.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var t=this,e=this.player.plugins.progress;e&&Object.keys(rg).map(function(n){e.removeCallBack(n,t[rg[n]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===s.Z.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],rf(o.prototype,n),i&&rf(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function rb(t){return(rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rP(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==rb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rb(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rb(e)?e:String(e)}(i.key),i)}}function r_(t,e){return(r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rk(t){return(rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rS=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&r_(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rk(o);return t=e?Reflect.construct(n,arguments,rk(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(t){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return(e=r.call(this,t)).ratio=1,e.interval=null,e._preloadMark={},e}return i=[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}],n=[{key:"afterCreate",value:function(){var t=this;this.usable&&this.initThumbnail(),this.on([c.DURATION_CHANGE],function(){var e=t.config,n=e.pic_num,i=e.interval;t.usable&&(t.interval=i>0?i:Math.round(1e3*t.player.duration/n)/1e3)})}},{key:"setConfig",value:function(t){var e=this;if(t){var n=Object.keys(t);!(n.length<1)&&(n.forEach(function(n){e.config[n]=t[n]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var t=this.config,e=t.urls,n=t.pic_num;return e&&e.length>0&&n>0}},{key:"initThumbnail",value:function(){var t=this.config,e=t.width,n=t.height,i=t.pic_num,r=t.interval;this.ratio=e/n*100,this.interval=r||Math.round(this.player.duration/i),this._preloadMark={}}},{key:"getUrlByIndex",value:function(t){return t>=0&&t<this.config.urls.length?this.config.urls[t]:""}},{key:"preload",value:function(t){var e=this;if(!this._preloadMark[t]){var n=this.config.urls,i=n.length,r=[];t>0&&r.push(t-1),r.push(t),t>0&&t<i-1&&r.push(t+1),r.map(function(t){!e._preloadMark[t]&&t>=0&&t<i&&(e._preloadMark[t]=1,a.ZP.preloadImg(n[t],function(){e._preloadMark[t]=2}))})}}},{key:"getPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,a=i.col,s=i.width,u=i.height;this.interval=Math.round(this.player.duration/r);var c=Math.ceil(t/this.interval),l=(c=c>r?r:c)<o*a?0:Math.ceil(c/(o*a))-1,f=c-a*o*l,p=f>0?Math.ceil(f/a)-1:0,h=f>0?f-p*a-1:0,d=0,y=0;e&&n?e/n<s/u?d=s/u*(y=n):y=(d=e)/(s/u):n?e||(y=n||u,d=s/u*y):y=(d=e||s)/(s/u);var v=this.getUrlByIndex(l);return{urlIndex:l,rowIndex:p,colIndex:h,url:v,height:y,width:d,style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"".concat(d*a,"px auto"),backgroundPosition:"-".concat(h*d,"px -").concat(p*y,"px"),width:"".concat(d,"px"),height:"".concat(y,"px")}}}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=this.config,a=o.pic_num,s=o.urls;if(!(a<=0)&&s&&0!==s.length){var u=this.getPosition(e,n,i);this.preload(u.urlIndex),Object.keys(u.style).map(function(e){t.style[e]=u.style[e]}),Object.keys(r).map(function(e){t.style[e]=r[e]})}}},{key:"changeConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setConfig(t)}},{key:"createThumbnail",value:function(t,e){var n=a.ZP.createDom("xg-thumbnail","",{},"thumbnail ".concat(e));return t&&t.appendChild(n),n}}],rP(o.prototype,n),i&&rP(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function rE(t){return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rO(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==rE(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rE(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rE(e)?e:String(e)}(i.key),i)}}function rw(t,e){return(rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rT(t){return(rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rC=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rw(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rT(o);return t=e?Reflect.construct(n,arguments,rT(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rE(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}],n=[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;e&&this.root&&(t.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(t.cached/e*100,"%")),t.played&&(this.find("xg-mini-progress-played").style.width="".concat(t.played/e*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],rO(o.prototype,n),i&&rO(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function rx(t){return(rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rR(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rD(i.key),i)}}function rA(t,e){return(rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rj(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rI(t){return(rI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rL(t,e,n){return(e=rD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rD(t){var e=function(t,e){if("object"!==rx(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rx(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rx(e)?e:String(e)}var rN={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",POSTER:"poster"},rM=null,rF=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rA(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rI(o);return t=e?Reflect.construct(n,arguments,rI(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rx(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return rj(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return rL(rj(t=r.call.apply(r,[this].concat(n))),"onLoadedData",function(e){t.player&&(t._frameCount=t.config.startFrameCount,t.stop(),t.renderOnTimeupdate(e),t.off(c.TIME_UPDATE,t.renderOnTimeupdate),t.on(c.TIME_UPDATE,t.renderOnTimeupdate))}),rL(rj(t),"onVisibilitychange",function(e){"visible"===document.visibilityState?t._checkIfCanStart()&&t.start():"hidden"===document.visibilityState&&t.stop()}),rL(rj(t),"renderOnTimeupdate",function(e){if(t._frameCount>0)t.renderOnce(),t._frameCount--;else{t._isLoaded=!0,t.off(c.TIME_UPDATE,t.renderOnTimeupdate);var n=t.config.startInterval;!t.player.paused&&t._checkIfCanStart()&&t.start(n)}}),rL(rj(t),"start",function(e){var n=t.player.video,i=function(){try{return parseInt(window.performance.now(),10)}catch(t){return new Date().getTime()}}(),r=t.checkVideoIsSupport(n);r&&t.canvasCtx&&(e||(e=t.interval),t.stop(),n.videoWidth&&n.videoHeight&&(t.videoPI=n.videoHeight>0?parseInt(n.videoWidth/n.videoHeight*100,10):0,t.config.mode===rN.REAL_TIME?(n&&n.videoWidth&&t.update(r,t.videoPI),t.preTime=i):i-t.preTime>=e&&(n&&n.videoWidth&&t.update(r,t.videoPI),t.preTime=i)),t.frameId="timer"===t._loopType?a.ZP.setTimeout(rj(t),t.start,e):a.ZP.requestAnimationFrame(t.start))}),rL(rj(t),"stop",function(){t.frameId&&("timer"===t._loopType?a.ZP.clearTimeout(rj(t),t.frameId):a.ZP.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return n=[{key:"afterCreate",value:function(){var t=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),o.isSupport||(this.config.disable=!0);var e=this.config,n=e.disable,i=e.mode,r=e.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/r,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==rN.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(c.COMPLETE,function(){t.player&&(t.init(),t.player.paused||t.start())}),i!==rN.POSTER&&(i!==rN.FIRST_FRAME&&(this.on(c.EMPTIED,function(){t.stop()}),this.on(c.PLAY,function(){var e=t.config.startInterval;t._checkIfCanStart()&&t.start(e)}),this.on(c.PAUSE,function(){t.stop()})),this.on(c.LOADED_DATA,this.onLoadedData),this.on(c.LOAD_START,function(){t._isLoaded=!1,t.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"init",value:function(){var t=this.player,e=this.config;this.canvasFilter=o.supportCanvasFilter();try{var n=this.config.isInnerRender&&t.innerContainer||t.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(e.index,'"><canvas>\n        </canvas><xgmask></xgmask></div>')),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=e.filter,this.canvas.style.webkitFilter=e.filter),this.mask=this.find("xgmask"),e.addMask&&(this.mask.style.background=e.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(t){O.Z.logError("plugin:DynamicBg",t)}}},{key:"checkVideoIsSupport",value:function(t){if(!t)return null;var e=t&&t instanceof window.HTMLVideoElement?t:t.canvas?t.canvas:t.flyVideo?t.flyVideo:null;if(e&&!("safari"===s.Z.browser&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))))return e;var n=e?e.tagName.toLowerCase():"";return"canvas"===n||"img"===n?e:null}},{key:"renderByPoster",value:function(){var t=this.playerConfig.poster;if(t){var e="String"===a.ZP.typeOf(t)?t:"String"===a.ZP.typeOf(t.poster)?t.poster:null;this.updateImg(e)}}},{key:"_checkIfCanStart",value:function(){var t=this.config.mode;return this._isLoaded&&!this.player.paused&&t!==rN.FIRST_FRAME&&t!==rN.POSTER}},{key:"renderOnce",value:function(){var t=this.player.video;if(t.videoWidth&&t.videoHeight){this.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10);var e=this.checkVideoIsSupport(t);e&&t.videoWidth&&this.update(e,this.videoPI)}}},{key:"updateImg",value:function(t){var e=this;if(t){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){if(e.canvas&&!e.frameId&&!e.isStart){e.canvas.height=r,e.canvas.width=i;var t=parseInt(i/r*100,10);e.update(o,t),o=null}},o.src=t}}},{key:"update",value:function(t,e){if(this.canvas&&this.canvasCtx&&e)try{var n=this._pos,i=this.config,r=this.canvas.getBoundingClientRect(),o=r.width,a=r.height;if(o!==n.width||a!==n.height||n.pi!==e){var s=parseInt(o/a*100,10);n.pi=e,n.width!==o&&(n.width=this.canvas.width=o),n.height!==a&&(n.height=this.canvas.height=a);var u=a,c=o;s<e?c=parseInt(a*e/100,10):s>e&&(u=parseInt(100*o/e,10)),n.rwidth=c*i.multiple,n.rheight=u*i.multiple,n.x=(o-n.rwidth)/2,n.y=(a-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=i.filter),this.canvasCtx.drawImage(t,n.x,n.y,n.rwidth,n.rheight)}catch(t){O.Z.logError("plugin:DynamicBg",t)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],i=[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:1,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof rM?rM:rM=function(){try{if(document.createElement("canvas").getContext)return!0;return!1}catch(t){return!1}}()}},{key:"supportCanvasFilter",value:function(){return"safari"!==s.Z.browser&&"firefox"!==s.Z.browser}}],n&&rR(o.prototype,n),i&&rR(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function rB(t){return(rB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function rU(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rZ(Object(n),!0).forEach(function(e){rK(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rZ(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rH(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rY(i.key),i)}}function rG(t,e){return(rG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rV(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rW(t){return(rW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rK(t,e,n){return(e=rY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rY(t){var e=function(t,e){if("object"!==rB(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rB(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rB(e)?e:String(e)}var rz="info",rX=c.STATS_EVENTS,rq=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rG(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rW(o);return t=e?Reflect.construct(n,arguments,rW(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rB(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return rV(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return rK(rV(t=r.call.apply(r,[this].concat(n))),"_recordUserActions",function(e){var n=t._getTime(),i=Object.assign({},e,{msg:e.msg||e.action});t._stats[rz].push(rU(rU({type:"userAction"},n),{},{payload:i}))}),rK(rV(t),"_onReset",function(){t.reset()}),rK(rV(t),"_recordInfo",function(e){t.info(e)}),rK(rV(t),"_downloadStats",function(){var e=new Blob([JSON.stringify(t.getStats())],{type:"application/json"}),n=window.URL.createObjectURL(e),i=document.createElement("a");i.style.display="none",i.href=n,i.download="player.txt",i.disabled=!1,i.click()}),t}return i=[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}],n=[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(c.USER_ACTION,this._recordUserActions),this.on(rX.STATS_INFO,this._recordInfo),this.on(rX.STATS_DOWNLOAD,this._downloadStats),this.on(rX.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(t){t.profile?this._infoProfile(t):this._info(t)}},{key:"_info",value:function(t){var e=this._getTime();this._stats[rz].push(rU(rU({},e),{},{payload:t}))}},{key:"_infoProfile",value:function(t){if(t&&t.startMs){var e=rU({cat:"function",dur:Date.now()-t.startMs,name:t.name||t.msg,ph:"X",pid:0,tid:0,ts:t.startMs,profile:!0},t);this._info(e)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var t;this._stats=(rK(t={},rz,[]),rK(t,"media",{}),t)}},{key:"getStats",value:function(){for(var t=this.player.video,e=[],n=0;n<t.buffered.length;n++)e.push({start:t.buffered.start(n),end:t.buffered.end(n)});var i={currentTime:t.currentTime,readyState:t.readyState,buffered:e,paused:t.paused,ended:t.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats[rz].map(function(t){var e=t.payload.data,n="";try{e instanceof Error?n=e.msg:void 0!==e&&(n=JSON.stringify(e))}catch(t){console.log("err",t)}return"[".concat(t.timeFormat,"] : ").concat(t.payload.msg," ").concat(n," ")})}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats[rz].forEach(function(e){e.payload.profile&&t.traceEvents.push(e.payload)}),t}}],rH(o.prototype,n),i&&rH(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(w.ZP);function rJ(t){return(rJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r$(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r2(i.key),i)}}function rQ(t,e){return(rQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r0(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r1(t){return(r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r2(t){var e=function(t,e){if("object"!==rJ(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rJ(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rJ(e)?e:String(e)}var r3=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&rQ(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=r1(o);return t=e?Reflect.construct(n,arguments,r1(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===rJ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return r0(t)}(this,t)});function o(){var t,e,n,i;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return e=r0(t=r.call.apply(r,[this].concat(s))),n="onGapJump",i=function(){var e=r0(t),n=e.player,i=e.config;if(n.video.readyState===HTMLMediaElement.HAVE_NOTHING)return;if(n.video.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(n.video.paused&&0!==n.video.currentTime&&t.hasPlayed)return;var r=n.video.buffered,a=i.smallGapLimit||.5,s=i.gapDetectionThreshold||.3,u=n.video.currentTime,c=t._getIndex(r,u,s);if(null!==c&&0!==c){console.log("GapJump  bufferRange ",r.start(c),r.end(c));var l=r.start(c)+.1;if(!(l>n.video.duration)){var f=l-u,p=f<=a;!(f<o.BROWSER_GAP_TOLERANCE)&&p&&(!1!==i.useGapJump&&(n.video.currentTime=t.isSafari?l+.1:l),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",c," isGapSamll:",p," currentTime:",n.video.currentTime," jumpSize:",u-n.video.currentTime),.08!==l&&n&&n.emit("log",{type:"oneevent",end_type:"gap",vid:n.config.vid,ext:{video_postion:Math.floor(1e3*l)}}))}}},(n=r2(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,t}return i=[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}],n=[{key:"afterCreate",value:function(){var t=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(c.WAITING,this.onGapJump),this.on(c.PLAY,function(){t.hasPlayed=!0}),this.on(c.SEEKING,function(){t.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(t,e,n){if(!t||!t.length||1===t.length&&t.end(0)-t.start(0)<1e-6)return null;for(var i=this._getBuffered(t),r=null,o=0;o<i.length;o++)if(i[o].start>e&&(0===o||i[o-1].end-e<=n)){r=o;break}return r}},{key:"_getBuffered",value:function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}}],r$(o.prototype,n),i&&r$(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function r4(t){return(r4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ot(i.key),i)}}function r6(t,e){return(r6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r8(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r9(t){return(r9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r7(t,e,n){return(e=ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){var e=function(t,e){if("object"!==r4(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r4(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r4(e)?e:String(e)}r3.BROWSER_GAP_TOLERANCE=.001;var oe=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&r6(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=r9(o);return t=e?Reflect.construct(n,arguments,r9(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===r4(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return r8(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return r7(r8(t=r.call.apply(r,[this].concat(n))),"onWaiting",function(){var e=r8(t).config;t.jumpCnt>e.jumpCntMax||t.timer||!1===e.useWaitingTimeoutJump||(t.timer=setTimeout(t.onJump,1e3*e.waitingTime))}),r7(r8(t),"onJump",function(){var e=r8(t),n=e.player,i=e.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>i.jumpCntMax)&&!1!==i.useWaitingTimeoutJump&&(!n.video.paused||0===n.video.currentTime||!t.hasPlayed)){t.jumpSize=i.jumpSize*(t.jumpCnt+1),t.jumpCnt===i.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var r=n.currentTime+t.jumpSize;r>n.video.duration||(t.jumpCnt++,n.currentTime=r)}}),t}return i=[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}],n=[{key:"afterCreate",value:function(){var t=this,e=this.config,n=e.useWaitingTimeoutJump,i=e.jumpSize;!1!==n&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=i,this.on(c.WAITING,this.onWaiting),this.on([c.PLAYING,c.CANPLAY],function(){clearTimeout(t.timer),t.timer=null,t.jumpSize=t.config.jumpSize}),this.on(c.PLAY,function(){t.hasPlayed=!0}))}}],r5(o.prototype,n),i&&r5(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function or(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,oc(i.key),i)}}function oo(t,e){return(oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oa(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ou(t,e,n){return(e=oc(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oc(t){var e=function(t,e){if("object"!==on(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==on(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===on(e)?e:String(e)}var ol=["cdn"],of=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&oo(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=os(o);return t=e?Reflect.construct(n,arguments,os(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===on(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return oa(t)}(this,t)});function o(){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return ou(oa(t=r.call.apply(r,[this].concat(n))),"getSpeed",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cdn";if(!t.speedListCache||!t.speedListCache[e]||t.speedListCache[e].length<=0)return 0;var n=0;return t.speedListCache[e].map(function(t){n+=t}),Math.floor(n/t.speedListCache[e].length)}),ou(oa(t),"startTimer",function(){a.ZP.isMSE(t.player.video)||(t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),ou(oa(t),"initSpeedList",function(){t.speedListCache={},ol.forEach(function(e){t.speedListCache[e]=[]})}),ou(oa(t),"_onRealSpeedChange",function(e){e.speed&&t.appendList(e.speed,e.type||"cdn")}),ou(oa(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,t.player&&t.config.openSpeed){var e=t.config,n=e.url,i=e.loadSize,r=e.testCnt,o=e.testTimeStep,a=n+(0>n.indexOf("?")?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=r)){t.cnt++;try{var s=new Date().getTime(),u=null,c=new XMLHttpRequest;t.xhr=c,c.open("GET",a);var l={},f=Math.floor(10*Math.random());l.Range="bytes="+f+"-"+(i+f),l&&Object.keys(l).forEach(function(t){c.setRequestHeader(t,l[t])}),c.onreadystatechange=function(){if(4===c.readyState){t.xhr=null,u=new Date().getTime();var e=c.getResponseHeader("Content-Length")/1024*8,n=Math.round(1e3*e/(u-s));t.appendList(n),t.timer=setTimeout(t.testSpeed,o)}},c.send()}catch(t){console.error(t)}}}}),ou(oa(t),"appendList",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cdn";if(t.speedListCache&&t.speedListCache[n]){var i=t.config.saveSpeedMax;t.speedListCache[n].length>=i&&t.speedListCache[n].shift(),t.speedListCache[n].push(e);var r=oa(t).player;r&&("cdn"===n?r.realTimeSpeed=e:r[t.getSpeedName("realTime",n)]=e),t.updateSpeed(n)}}),ou(oa(t),"updateSpeed",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cdn",n=t.getSpeed(e),i=oa(t).player;if(i)if("cdn"===e)i.avgSpeed&&n===i.avgSpeed||(i.avgSpeed=n,i.emit(c.DOWNLOAD_SPEED_CHANGE,{speed:n,realTimeSpeed:i.realTimeSpeed}));else{var r=t.getSpeedName("avg",e);i[r]&&n===i[r]||(i[r]=n,i.emit(c.DOWNLOAD_SPEED_CHANGE,{speed:n,realTimeSpeed:i.realTimeSpeed}))}}),t}return i=[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}],n=[{key:"afterCreate",value:function(){var t=this.config,e=t.openSpeed,n=t.addSpeedTypeList,i=t.testCnt;(null==n?void 0:n.length)>0&&ol.push.apply(ol,function(t){if(Array.isArray(t))return oi(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return oi(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oi(t,e)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.initSpeedList(),e&&(this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,i>0&&this.on([c.LOADED_DATA,c.REPLAY],this.startTimer))}},{key:"getSpeedName",value:function(t,e){return t+"Speed"+e.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(t){if(this.config.openSpeed=t,!t&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var t=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([c.LOADED_DATA,c.REPLAY],this.startTimer),ol.forEach(function(e){t.speedListCache&&t.speedListCache[e]&&(t.speedListCache[e]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],or(o.prototype,n),i&&or(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function op(t){return(op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==op(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==op(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===op(e)?e:String(e)}(i.key),i)}}function od(t,e){return(od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oy(t){return(oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ov=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),t&&od(o,t);var e,n,i,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=oy(o);return t=e?Reflect.construct(n,arguments,oy(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===op(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return i=[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}],n=[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.config;this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!n.disabled&&e.video.getVideoPlaybackQuality&&(this.on(c.PLAY,function(){t._startTick()}),this.on(c.PAUSE,function(){t._stopTick()}),this.on(c.ENDED,function(){t._stopTick()}),this.on(c.EMPTIED,function(){t._stopTick()}))}},{key:"_startTick",value:function(){var t=this;this._stopTick(),this._timer=setTimeout(function(){t._checkDecodeFPS(),t._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(t,e,n,i){var r=this.player.video,o=document.hidden,a=r.paused;if("boolean"==typeof o&&!o&&!a){for(var s=r.currentTime,u=r.buffered,l=!1,f=[],p=0;p<u.length;p++){var h=u.start(p),d=u.end(p);if(f.push({start:h,end:d}),h<=s&&s<=d-1){l=!0;break}}4===r.readyState&&l&&(this._currentStuckCount>this.config.stuckCount?(this.emit(c.FPS_STUCK,this._payload),this._reset()):t<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:f,currentTime:r.currentTime,curDecodedFrames:t,totalVideoFrames:e,droppedVideoFrames:n,checkInterval:i})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.video){var t=this.player.video.getVideoPlaybackQuality(),e=t.totalVideoFrames,n=t.droppedVideoFrames,i=performance.now();if(e&&this._lastCheckPoint){var r=e-this._lastDecodedFrames,o=i-this._lastCheckPoint;this._checkStuck(r,e,n,o)}this._lastDecodedFrames=e,this._lastCheckPoint=i}}},{key:"destroy",value:function(){this._stopTick()}}],oh(o.prototype,n),i&&oh(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}(B);function og(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}ta.Z.use({LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u89C6\u9891\u4E0B\u8F7D\u9519\u8BEF"},mse:{code:2,msg:"\u6D41\u8FFD\u52A0\u9519\u8BEF"},parse:{code:3,msg:"\u89E3\u6790\u9519\u8BEF"},format:{code:4,msg:"\u683C\u5F0F\u9519\u8BEF"},decoder:{code:5,msg:"\u89E3\u7801\u9519\u8BEF"},runtime:{code:6,msg:"\u8BED\u6CD5\u9519\u8BEF"},timeout:{code:7,msg:"\u64AD\u653E\u8D85\u65F6"},other:{code:8,msg:"\u5176\u4ED6\u9519\u8BEF"}},HAVE_NOTHING:"\u6CA1\u6709\u5173\u4E8E\u97F3\u9891/\u89C6\u9891\u662F\u5426\u5C31\u7EEA\u7684\u4FE1\u606F",HAVE_METADATA:"\u97F3\u9891/\u89C6\u9891\u7684\u5143\u6570\u636E\u5DF2\u5C31\u7EEA",HAVE_CURRENT_DATA:"\u5173\u4E8E\u5F53\u524D\u64AD\u653E\u4F4D\u7F6E\u7684\u6570\u636E\u662F\u53EF\u7528\u7684\uFF0C\u4F46\u6CA1\u6709\u8DB3\u591F\u7684\u6570\u636E\u6765\u64AD\u653E\u4E0B\u4E00\u5E27/\u6BEB\u79D2",HAVE_FUTURE_DATA:"\u5F53\u524D\u53CA\u81F3\u5C11\u4E0B\u4E00\u5E27\u7684\u6570\u636E\u662F\u53EF\u7528\u7684",HAVE_ENOUGH_DATA:"\u53EF\u7528\u6570\u636E\u8DB3\u4EE5\u5F00\u59CB\u64AD\u653E",NETWORK_EMPTY:"\u97F3\u9891/\u89C6\u9891\u5C1A\u672A\u521D\u59CB\u5316",NETWORK_IDLE:"\u97F3\u9891/\u89C6\u9891\u662F\u6D3B\u52A8\u7684\u4E14\u5DF2\u9009\u53D6\u8D44\u6E90\uFF0C\u4F46\u5E76\u672A\u4F7F\u7528\u7F51\u7EDC",NETWORK_LOADING:"\u6D4F\u89C8\u5668\u6B63\u5728\u4E0B\u8F7D\u6570\u636E",NETWORK_NO_SOURCE:"\u672A\u627E\u5230\u97F3\u9891/\u89C6\u9891\u6765\u6E90",MEDIA_ERR_ABORTED:"\u53D6\u56DE\u8FC7\u7A0B\u88AB\u7528\u6237\u4E2D\u6B62",MEDIA_ERR_NETWORK:"\u7F51\u7EDC\u9519\u8BEF",MEDIA_ERR_DECODE:"\u89E3\u7801\u9519\u8BEF",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4E0D\u652F\u6301\u7684\u97F3\u9891/\u89C6\u9891\u683C\u5F0F",REPLAY:"\u91CD\u64AD",ERROR:"\u7F51\u7EDC\u8FDE\u63A5\u4F3C\u4E4E\u51FA\u73B0\u4E86\u95EE\u9898",PLAY_TIPS:"\u64AD\u653E",PAUSE_TIPS:"\u6682\u505C",PLAYNEXT_TIPS:"\u4E0B\u4E00\u96C6",DOWNLOAD_TIPS:"\u4E0B\u8F7D",ROTATE_TIPS:"\u65CB\u8F6C",RELOAD_TIPS:"\u91CD\u65B0\u8F7D\u5165",FULLSCREEN_TIPS:"\u8FDB\u5165\u5168\u5C4F",EXITFULLSCREEN_TIPS:"\u9000\u51FA\u5168\u5C4F",CSSFULLSCREEN_TIPS:"\u8FDB\u5165\u6837\u5F0F\u5168\u5C4F",EXITCSSFULLSCREEN_TIPS:"\u9000\u51FA\u6837\u5F0F\u5168\u5C4F",TEXTTRACK:"\u5B57\u5E55",PIP:"\u753B\u4E2D\u753B",SCREENSHOT:"\u622A\u56FE",LIVE:"\u6B63\u5728\u76F4\u64AD",OFF:"\u5173\u95ED",OPEN:"\u5F00\u542F",MINI_DRAG:"\u70B9\u51FB\u6309\u4F4F\u53EF\u62D6\u52A8\u89C6\u9891",MINISCREEN:"\u5C0F\u5C4F\u5E55",REFRESH_TIPS:"\u8BF7\u8BD5\u8BD5",REFRESH:"\u5237\u65B0",FORWARD:"\u5FEB\u8FDB\u4E2D",LIVE_TIP:"\u76F4\u64AD"}});var om=(Object.defineProperty(i=function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var i,r,o,a=n&&"mobile"===n.isMobileSimulateMode,u=[].concat(n.isLive?[]:[nf,rC,rm,nW],[nw,nB,n8,iy,iz,i0,iO,iA,nQ,is]);this.plugins=[tI,rq,oe,r3].concat(function(t){if(Array.isArray(t))return og(t)}(u)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(u)||function(t,e){if(t){if("string"==typeof t)return og(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return og(t,e)}}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[tF,tG,t$,e8,t3,re,ra,rS,em]);var c=a?"mobile":s.Z.device;switch(c){case"pc":(i=this.plugins).push.apply(i,[e2,eC,i6,of,ov]);break;case"mobile":(r=this.plugins).push.apply(r,[eY]);break;default:(o=this.plugins).push.apply(o,[e2,eC,i6])}(s.Z.os.isIpad||"pc"===c)&&this.plugins.push(rF),s.Z.os.isIpad&&this.plugins.push(eC),this.ignores=[],this.i18n=[]},"prototype",{writable:!1}),i);function ob(t){return(ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oP(t,e){return(oP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ok(t,e,n){return(e=oS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oS(t){var e=function(t,e){if("object"!==ob(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ob(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ob(e)?e:String(e)}var oE=function(t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&oP(i,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=o_(i);return t=e?Reflect.construct(n,arguments,o_(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===ob(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");var n=t;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,t)});function i(){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");return n.apply(this,arguments)}return Object.defineProperty(i,"prototype",{writable:!1}),i}(tk);ok(oE,"defaultPreset",om),ok(oE,"Util",a.ZP),ok(oE,"Sniffer",s.Z),ok(oE,"Errors",u.ZP),ok(oE,"Events",c),ok(oE,"Plugin",B),ok(oE,"BasePlugin",w.ZP),ok(oE,"I18N",ta.Z),ok(oE,"STATE_CLASS",W),ok(oE,"PAUSE_TYPES",S),ok(oE,"BUFFER_CONTROL_TYPES",E);var oO=oE},642476:function(t,e,n){n.d(e,{Z:()=>l});var i=n(95523);function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var a={lang:{},langKeys:[],textKeys:[]};function s(t,e){return Object.keys(e).forEach(function(n){var o,a=i.ZP.typeOf(e[n]),u=i.ZP.typeOf(t[n]);"Array"===a?("Array"!==u&&(t[n]=[]),(o=t[n]).push.apply(o,r(e[n]))):"Object"===a?("Object"!==u&&(t[n]={}),s(t[n],e[n])):t[n]=e[n]}),t}function u(){Object.keys(a.lang.en).map(function(t){a.textKeys[t]=t})}function c(t,e){var n=t.LANG;if(e||(e=a),e.lang){var i=t.TEXT||{};"zh"===n&&(n="zh-cn"),e.lang[n]?s(e.lang[n],i):(e.langKeys.push(n),e.lang[n]=i),u()}}c({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var l={get textKeys(){return a.textKeys},get langKeys(){return a.langKeys},get lang(){var f={};return a.langKeys.map(function(t){f[t]=a.lang[t]}),a.lang["zh-cn"]&&(f.zh=a.lang["zh-cn"]||{}),f},extend:function(t,e){var n=[];if(e||(e=a),e.lang){n="Array"!==i.ZP.typeOf(t)?Object.keys(t).map(function(e){return{LANG:"zh"===e?"zh-cn":e,TEXT:t[e]}}):t;var r=e.lang;n.map(function(t){"zh"===t.LANG&&(t.LANG="zh-cn"),r[t.LANG]?s(r[t.LANG]||{},t.TEXT||{}):c(t,e)}),u()}},use:c,init:function(t){var e,n={lang:{},langKeys:[],textKeys:{},pId:t};return s(n.lang,a.lang),(e=n.langKeys).push.apply(e,r(a.langKeys)),s(n.textKeys,a.textKeys),n}}},184734:function(t,e,n){n.d(e,{ZP:()=>p});var i=n(95523),r=n(249860),o=n(559146);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){var i,r,o;i=t,r=e,o=n[e],(r=l(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}function f(t,e){r.Z.logError("[".concat(t,"] event or callback cant be undefined or null when call ").concat(e))}var p=function(){var t,e;function n(t){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");i.ZP.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),(0,o.ZP)(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return t=[{key:"beforeCreate",value:function(t){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(t){this.player=t.player,this.playerConfig=t.player&&t.player.config,this.pluginName=t.pluginName?t.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=t.player&&t.player.logger}},{key:"updateLang",value:function(t){t||(t=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var t=i.ZP.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&("touch"===this.playerConfig.domEventType||"mouse"===this.playerConfig.domEventType)&&(t=this.playerConfig.domEventType),t}},{key:"on",value:function(t,e){var n=this;if(!t||!e||!this.player)return void f(this.pluginName,"plugin.on(event, callback)");"string"==typeof t?(this.__events[t]=e,this.player.on(t,e)):Array.isArray(t)&&t.forEach(function(t){n.__events[t]=e,n.player.on(t,e)})}},{key:"once",value:function(t,e){var n=this;if(!t||!e||!this.player)return void f(this.pluginName,"plugin.once(event, callback)");"string"==typeof t?(this.__onceEvents[t]=e,this.player.once(t,e)):Array.isArray(t)&&t.forEach(function(i){n.__onceEvents[i]=e,n.player.once(t,e)})}},{key:"off",value:function(t,e){var n=this;if(!t||!e||!this.player)return void f(this.pluginName,"plugin.off(event, callback)");"string"==typeof t?(delete this.__events[t],this.player.off(t,e)):Array.isArray(t)&&t.forEach(function(i){delete n.__events[t],n.player.off(i,e)})}},{key:"offAll",value:function(){var t=this;["__events","__onceEvents"].forEach(function(e){Object.keys(t[e]).forEach(function(n){t[e][n]&&t.off(n,t[e][n]),n&&delete t[e][n]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(t){var e;if(this.player){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.player).emit.apply(e,[t].concat(i))}}},{key:"emitUserAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var i=u(u({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(t,e,i)}}},{key:"hook",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],o.z3.call.apply(o.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return o.xn.call.apply(o.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return o.v8.call.apply(o.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(e.pluginName=n),this.player.registerPlugin({plugin:t,options:e})}},{key:"getPlugin",value:function(t){return this.player?this.player.getPlugin(t):null}},{key:"__destroy",value:function(){var t=this,e=this.player,n=this.pluginName;this.offAll(),i.ZP.clearAllTimers(this),i.ZP.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(e){t[e]=null}),e.unRegisterPlugin(n),(0,o.Qs)(this)}}],e=[{key:"defineGetterOrSetter",value:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(t,n,e[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}],t&&c(n.prototype,t),e&&c(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}()},559146:function(t,e,n){function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a=e.call.apply(e,[t].concat(r));n&&"function"==typeof n&&(a&&a.then?a.then(function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];n.call.apply(n,[t].concat(i))}):n.call.apply(n,[t].concat(r)))}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),this.__hooks[t]||(this.__hooks[t]=null),(function(){var o=arguments,a=this;if(n.pre)try{(s=n.pre).call.apply(s,[this].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,":pre error] >> ").concat(e.message),e}if(this.__hooks&&this.__hooks[t])try{var s,u,c=(u=this.__hooks[t]).call.apply(u,[this,this].concat(Array.prototype.slice.call(arguments)));c?c.then?c.then(function(t){!1!==t&&r.apply(void 0,[a,e,n.next].concat(function(t){if(Array.isArray(t))return i(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}).catch(function(t){throw t}):r.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments))):void 0===c&&r.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,"] >> ").concat(e.message),e}else r.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function a(t,e){var n=this.__hooks;if(n)return n.hasOwnProperty(t)?(n&&(n[t]=e),!0):(console.warn("has no supported hook which name [".concat(t,"]")),!1)}function s(t,e){var n=this.__hooks;n&&delete n[t]}function u(t){if(this.plugins&&this.plugins[t.toLowerCase()]){for(var e=this.plugins[t.toLowerCase()],n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.useHooks&&e.useHooks.apply(e,i)}}function c(t){if(this.plugins&&this.plugins[t.toLowerCase()]){var e=this.plugins[t.toLowerCase()];if(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.removeHooks&&e.removeHooks.apply(e,i)}}}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.__hooks={},e&&e.map(function(e){t.__hooks[e]=null}),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map(function(e){if(t.__hooks[e])return e})}})}function f(t){t.__hooks=null}function p(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!t.__hooks||!t.__hooks[e])return n.call.apply(n,[t,t].concat(r));var a,s=(a=t.__hooks[e]).call.apply(a,[t,t].concat(r));if(s&&s.then)s.then(function(e){return!1===e?null:n.call.apply(n,[t,t].concat(r))}).catch(function(t){console.warn("[runHooks]".concat(e," reject"),t.message)});else if(!1!==s)return n.call.apply(n,[t,t].concat(r))}n.d(e,{Qs:()=>f,ZP:()=>l,bR:()=>u,g2:()=>c,rl:()=>p,v8:()=>s,xn:()=>a,z3:()=>o})},249860:function(t,e,n){n.d(e,{Z:()=>a,w:()=>s});var i="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,r={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},o="%c[xgplayer]",a={config:{debug:i?3:1},logInfo:function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.config.debug>=3&&(e=console).log.apply(e,[o,r.info,t].concat(i))},logWarn:function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];this.config.debug>=1&&(e=console).warn.apply(e,[o,r.warn,t].concat(i))},logError:function(t){if(!(this.config.debug<1)){for(var e,n=this.config.debug>=2?"trace":"error",i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];(e=console)[n].apply(e,[o,r.error,t].concat(a))}}};function s(t){t.logInfo=a.logInfo.bind(t),t.logWarn=a.logWarn.bind(t),t.logError=a.logError.bind(t)}},928243:function(t,e){var n={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},i=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],r={get device(){return r.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var o=navigator.userAgent.toLowerCase(),a={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(a).filter(function(t){return a[t].test(o)}))[0]},get os(){if("undefined"==typeof navigator)return{};var s=navigator.userAgent,u=/(?:Windows Phone)/.test(s),c=/(?:SymbianOS)/.test(s)||u,l=/(?:Android)/.test(s),f=/(?:Firefox)/.test(s),p=/(?:iPad|PlayBook)/.test(s)||l&&!/(?:Mobile)/.test(s)||f&&/(?:Tablet)/.test(s),h=/(?:iPhone)/.test(s)&&!p,d=/(?:iPad|PlayBook)/.test(s);return{isTablet:p,isPhone:h,isIpad:d,isIos:h||d,isAndroid:l,isPc:!h&&!l&&!c&&!p,isSymbian:c,isWindowsPhone:u,isFireFox:f}},get osVersion(){if("undefined"==typeof navigator)return 0;var y=navigator.userAgent,v="",g=(v=/(?:iPhone)|(?:iPad|PlayBook)/.test(y)?n.ios:n.android)?v.exec(y):[];if(g&&g.length>=3){var m=g[2].split(".");return m.length>0?parseInt(m[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;if(/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase()))return!0;return!1},isSupportMP4:function(){var t={isSupport:!1,mime:""};if("undefined"==typeof document)return t;if(this.supportResult)return this.supportResult;var e=document.createElement("video");return"function"==typeof e.canPlayType&&i.map(function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))}),this.supportResult=t,e=null,t},isHevcSupported:function(){return"undefined"!=typeof MediaSource&&!!MediaSource.isTypeSupported&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(t){var e={supported:!1,smooth:!1,powerEfficient:!1};if(!t||"undefined"==typeof navigator)return Promise.resolve(e);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(t);var n=t.video||{},i=t.audio||{};try{var r=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(i.contentType);return Promise.resolve({supported:r&&o,smooth:!1,powerEfficient:!1})}catch(t){return Promise.resolve(e)}}};e.Z=r},95523:function(t,e,n){n.d(e,{F7:()=>p,VQ:()=>f,ZP:()=>u,P2:()=>l});var i=n(249860);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(){var t;function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.bufferedList=t}return t=[{key:"start",value:function(t){return this.bufferedList[t].start}},{key:"end",value:function(t){return this.bufferedList[t].end}},{key:"length",get:function(){return this.bufferedList.length}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u={};function c(t){var e=s(t);return null!==t&&("object"===e||"function"===e)}function l(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw TypeError("Expected a function");return c(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),function(t,e,n){var i,r,o,a,s,u,l=0,f=!1,p=!1,h=!0,d=!e&&0!==e&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof t)throw TypeError("Expected a function");function y(e){var n=i,o=r;return i=r=void 0,l=e,a=t.apply(o,n)}function v(t,e){return d?(window.cancelAnimationFrame(s),window.requestAnimationFrame(t)):setTimeout(t,e)}function g(t){var n=t-u,i=t-l;return void 0===u||n>=e||n<0||p&&i>=o}function m(){var t,n,i,r=Date.now();if(g(r))return b(r);s=v(m,(t=r-u,n=r-l,i=e-t,p?Math.min(i,o-n):i))}function b(t){return(s=void 0,h&&i)?y(t):(i=r=void 0,a)}function P(){for(var t,n=Date.now(),o=g(n),c=arguments.length,h=Array(c),d=0;d<c;d++)h[d]=arguments[d];if(i=h,r=this,u=n,o){if(void 0===s)return l=t=u,s=v(m,e),f?y(t):a;if(p)return s=v(m,e),y(u)}return void 0===s&&(s=v(m,e)),a}return e=+e||0,c(n)&&(f=!!n.leading,o=(p="maxWait"in n)?Math.max(+n.maxWait||0,e):o,h="trailing"in n?!!n.trailing:h),P.cancel=function(){void 0!==s&&function(t){if(d)return window.cancelAnimationFrame(t);clearTimeout(t)}(s),l=0,i=u=r=s=void 0},P.flush=function(){return void 0===s?a:b(Date.now())},P.pending=function(){return void 0!==s},P}(t,e,{leading:i,trailing:r,maxWait:e})}function f(){var t=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===t&&(t="zh"),t}function p(t,e,n){if(t){var i=t.getAttribute(n);return!!i&&i===e&&("VIDEO"===t.tagName||"AUDIO"===t.tagName)}}u.createDom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(t);return r.className=i,r.innerHTML=e,Object.keys(n).forEach(function(e){var i=n[e];"video"===t||"audio"===t||"live-video"===t?i&&r.setAttribute(e,i):r.setAttribute(e,i)}),r},u.createDomFromHtml=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var r=document.createElement("div");r.innerHTML=t;var o=r.children;if(r=null,o.length>0)return o=o[0],n&&u.addClass(o,n),e&&Object.keys(e).forEach(function(t){o.setAttribute(t,e[t])}),o;return null}catch(t){return i.Z.logError("util.createDomFromHtml",t),null}},u.hasClass=function(t,e){if(!t||!e)return!1;try{return Array.prototype.some.call(t.classList,function(t){return t===e})}catch(i){var n=t.className&&"object"===s(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(RegExp("(\\s|^)"+e+"(\\s|$)"))}},u.addClass=function(t,e){if(t&&e)try{e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)})}catch(n){u.hasClass(t,e)||(t.className&&"object"===s(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e)}},u.removeClass=function(t,e){if(t&&e)try{e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.remove(e)})}catch(n){u.hasClass(t,e)&&e.split(/\s+/g).forEach(function(e){var n=RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===s(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")})}},u.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach(function(e){u.hasClass(t,e)?u.removeClass(t,e):u.addClass(t,e)})},u.classNames=function(){for(var t=arguments,e=[],n=function(n){"String"===u.typeOf(t[n])?e.push(t[n]):"Object"===u.typeOf(t[n])&&Object.keys(t[n]).map(function(i){t[n][i]&&e.push(i)})},i=0;i<arguments.length;i++)n(i);return e.join(" ")},u.findDom=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{t=e.querySelector(n)}catch(r){i.Z.logError("util.findDom",r),0===n.indexOf("#")&&(t=e.getElementById(n.slice(1)))}return t},u.getCss=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]},u.padStart=function(t,e,n){for(var i=String(n),r=0|e,o=Math.ceil(r/i.length),a=[],s=String(t);o--;)a.push(i);return a.join("").substring(0,r-s.length)+s},u.format=function(t){if(window.isNaN(t))return"";t=Math.round(t);var e=u.padStart(Math.floor(t/3600),2,0),n=u.padStart(Math.floor((t-3600*e)/60),2,0),i=u.padStart(Math.floor(t-3600*e-60*n),2,0);return("00"===e?[n,i]:[e,n,i]).join(":")},u.event=function(t){if(t.touches){var e=t.touches[0]||t.changedTouches[0];t.clientX=e.clientX||0,t.clientY=e.clientY||0,t.offsetX=e.pageX-e.target.offsetLeft,t.offsetY=e.pageY-e.target.offsetTop}t._target=t.target||t.srcElement},u.typeOf=function(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]},u.deepCopy=function(t,e){if("Object"===u.typeOf(e)&&"Object"===u.typeOf(t))return Object.keys(e).forEach(function(n){"Object"!==u.typeOf(e[n])||e[n]instanceof Node?"Array"===u.typeOf(e[n])?t[n]="Array"===u.typeOf(t[n])?t[n].concat(e[n]):e[n]:t[n]=e[n]:void 0===t[n]||void 0===t[n]?t[n]=e[n]:u.deepCopy(t[n],e[n])}),t},u.deepMerge=function(t,e){return Object.keys(e).map(function(n){if("Array"===u.typeOf(e[n])&&"Array"===u.typeOf(t[n])){if("Array"===u.typeOf(t[n])){var i,r;(i=t[n]).push.apply(i,function(t){if(Array.isArray(t))return a(t)}(r=e[n])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return a(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}else u.typeOf(t[n])!==u.typeOf(e[n])||null===t[n]||"Object"!==u.typeOf(t[n])||e[n]instanceof window.Node?null!==e[n]&&(t[n]=e[n]):u.deepMerge(t[n],e[n])}),t},u.getBgImage=function(t){var e=(t.currentStyle||window.getComputedStyle(t,null)).backgroundImage;if(!e||"none"===e)return"";var n=document.createElement("a");return n.href=e.replace(/url\("|"\)/g,""),n.href},u.copyDom=function(t){if(!t||1!==t.nodeType)return"";var e=document.createElement(t.tagName);return Array.prototype.forEach.call(t.attributes,function(t){e.setAttribute(t.name,t.value)}),t.innerHTML&&(e.innerHTML=t.innerHTML),e},u.setInterval=function(t,e,n,i){t._interval[e]||(t._interval[e]=window.setInterval(n.bind(t),i))},u.clearInterval=function(t,e){clearInterval(t._interval[e]),t._interval[e]=null},u.setTimeout=function(t,e,n){t._timers||(t._timers=[]);var i=setTimeout(function(){e(),u.clearTimeout(t,i)},n);return t._timers.push(i),i},u.clearTimeout=function(t,e){var n=t._timers;if("Array"===u.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1),clearTimeout(e);break}}else clearTimeout(e)},u.clearAllTimers=function(t){var e=t._timers;"Array"===u.typeOf(e)&&(e.map(function(t){clearTimeout(t)}),t._timerIds=[])},u.createImgBtn=function(t,e,n,i){var r,o,a,s=u.createDom("xg-".concat(t),"",{},"xgplayer-".concat(t,"-img"));return s.style.backgroundImage='url("'.concat(e,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(t){return!(n.indexOf(t)>-1&&i.indexOf(t)>-1)||(r=parseFloat(n.slice(0,n.indexOf(t)).trim()),o=parseFloat(i.slice(0,i.indexOf(t)).trim()),a=t,!1)}),s.style.width="".concat(r).concat(a),s.style.height="".concat(o).concat(a),s.style.backgroundSize="".concat(r).concat(a," ").concat(o).concat(a),"start"===t?s.style.margin="-".concat(o/2).concat(a," auto auto -").concat(r/2).concat(a):s.style.margin="auto 5px auto 5px"),s},u.Hex2RGBA=function(t,e){var n=[];if(/^\#[0-9A-F]{3}$/i.test(t)){var i="#";t.replace(/[0-9A-F]/ig,function(t){i+=t+t}),t=i}return/^#[0-9A-F]{6}$/i.test(t)?(t.replace(/[0-9A-F]{2}/ig,function(t){n.push(parseInt(t,16))}),"rgba(".concat(n.join(","),", ").concat(e,")")):"rgba(255, 255, 255, 0.1)"},u.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},u.checkIsFunction=function(t){return t&&"function"==typeof t},u.checkIsObject=function(t){return null!==t&&"object"===s(t)},u.hide=function(t){t.style.display="none"},u.show=function(t,e){t.style.display=e||"block"},u.isUndefined=function(t){if(null==t)return!0},u.setStyleFromCsstext=function(t,e){e&&("String"===u.typeOf(e)?e.replace(/\s+/g,"").split(";").map(function(e){if(e){var n=e.split(":");n.length>1&&(t.style[n[0]]=n[1])}}):Object.keys(e).map(function(n){t.style[n]=e[n]}))},u.filterStyleFromText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=t.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map(function(t){if(t){var n=t.split(":");n.length>1&&(function(t,e){for(var n=0,i=e.length;n<i;n++)if(t.indexOf(e[n])>-1)return!0;return!1}(n[0],e)?r[n[0]]=n[1]:o[n[0]]=n[1])}}),t.setAttribute("style",""),Object.keys(o).map(function(e){t.style[e]=o[e]}),r},u.getStyleFromCsstext=function(t){var e=t.style.cssText;if(!e)return{};var n=e.replace(/\s+/g,"").split(";"),i={};return n.map(function(t){if(t){var e=t.split(":");e.length>1&&(i[e[0]]=e[1])}}),i},u.preloadImg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){var i=new window.Image;i.onload=function(t){i=null,e&&e(t)},i.onerror=function(t){i=null,n&&n(t)},i.src=t}},u.stopPropagation=function(t){t&&(t.stopPropagation(),t.cancelable&&t.preventDefault())},u.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},u.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},u.checkTouchSupport=function(){return"ontouchstart"in window},u.getBuffered2=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<t.length;i++)n.push({start:.5>t.start(i)?0:t.start(i),end:t.end(i)});n.sort(function(t,e){var n=t.start-e.start;return n||e.end-t.end});var r=[];if(e)for(var a=0;a<n.length;a++){var s=r.length;if(s){var u=r[s-1].end;n[a].start-u<e?n[a].end>u&&(r[s-1].end=n[a].end):r.push(n[a])}else r.push(n[a])}else r=n;return new o(r)},u.getEventPos=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.touches&&t.touches.length>0&&(t=t.touches[0]),{x:t.x/e,y:t.y/e,clientX:t.clientX/e,clientY:t.clientY/e,offsetX:t.offsetX/e,offsetY:t.offsetY/e,pageX:t.pageX/e,pageY:t.pageY/e}},u.requestAnimationFrame=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return e(t)},u.getHostFromUrl=function(t){if("String"!==u.typeOf(t))return"";var e=t.split("/"),n="";return e.length>3&&e[2]&&(n=e[2]),n},u.cancelAnimationFrame=function(t){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;e&&e(t)},u.isMSE=function(t){return!!t&&t instanceof HTMLMediaElement&&(/^blob/.test(t.currentSrc)||/^blob/.test(t.src))},u.generateSessionId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new Date().getTime();try{t=parseInt(t)}catch(e){t=0}return e+=t,window.performance&&"function"==typeof window.performance.now&&(e+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},u.adjustTimeByDuration=function(t,e,n){return e&&t&&(t>e||n&&t<e)?e:t}},520925:function(t,e){e.Z=JSON.parse('"3.0.0-alpha.115-2"')},155235:function(t,e){e.default=void 0,e.default={LANG:"jp",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u30D3\u30C7\u30AA\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u30A8\u30E9\u30FC"},mse:{code:2,msg:"\u30B9\u30C8\u30EA\u30FC\u30E0\u8FFD\u52A0\u30A8\u30E9\u30FC"},parse:{code:3,msg:"\u89E3\u6790\u30A8\u30E9\u30FC"},format:{code:4,msg:"\u9593\u9055\u3063\u305F\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8"},decoder:{code:5,msg:"\u30C7\u30B3\u30FC\u30C9\u30A8\u30E9\u30FC"},runtime:{code:6,msg:"\u6587\u6CD5\u30A8\u30E9\u30FC"},timeout:{code:7,msg:"\u518D\u751F\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8"},other:{code:8,msg:"\u305D\u306E\u4ED6\u306E\u30A8\u30E9\u30FC"}},HAVE_NOTHING:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA\u304C\u6E96\u5099\u3067\u304D\u3066\u3044\u308B\u304B\u60C5\u5831\u304C\u3042\u308A\u307E\u305B\u3093",HAVE_METADATA:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA\u306E\u30E1\u30BF\u30C7\u30FC\u30BF\u306F\u6E96\u5099\u3067\u304D\u3066\u3044\u307E\u3059",HAVE_CURRENT_DATA:"\u73FE\u5728\u306E\u518D\u751F\u4F4D\u7F6E\u306B\u95A2\u3059\u308B\u30C7\u30FC\u30BF\u306F\u5229\u7528\u53EF\u80FD\u3067\u3059\u304C\u3001\u6B21\u306E\u30D5\u30EC\u30FC\u30E0/\u30DF\u30EA\u79D2\u3092\u518D\u751F\u3059\u308B\u306E\u306B\u5341\u5206\u306A\u30C7\u30FC\u30BF\u304C\u3042\u308A\u307E\u305B\u3093",HAVE_FUTURE_DATA:"\u73FE\u5728\u3001\u5C11\u306A\u304F\u3068\u3082\u6B21\u306E\u30D5\u30EC\u30FC\u30E0\u306E\u30C7\u30FC\u30BF\u304C\u5229\u7528\u53EF\u80FD\u3067\u3059",HAVE_ENOUGH_DATA:"\u5229\u7528\u53EF\u80FD\u306A\u30C7\u30FC\u30BF\u306F\u518D\u751F\u3092\u958B\u59CB\u3059\u308B\u306E\u306B\u5341\u5206\u3067\u3059",NETWORK_EMPTY:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA\u304C\u521D\u671F\u5316\u3055\u308C\u3066\u3044\u307E\u305B\u3093",NETWORK_IDLE:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA\u306F\u30A2\u30AF\u30C6\u30A3\u30D6\u3067\u30EA\u30BD\u30FC\u30B9\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u3059\u304C\u3001\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u304C\u4F7F\u7528\u3055\u308C\u3066\u3044\u307E\u305B\u3093",NETWORK_LOADING:"\u30D6\u30E9\u30A6\u30B6\u30FC\u306F\u30C7\u30FC\u30BF\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059",NETWORK_NO_SOURCE:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA \u306E\u30BD\u30FC\u30B9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",MEDIA_ERR_ABORTED:"\u30E6\u30FC\u30B6\u30FC\u306B\u3088\u3063\u3066\u30D5\u30A7\u30C3\u30C1\u30D7\u30ED\u30BB\u30B9\u304C\u4E2D\u6B62\u3055\u308C\u307E\u3057\u305F",MEDIA_ERR_NETWORK:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",MEDIA_ERR_DECODE:"\u30C7\u30B3\u30FC\u30C9\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u30AA\u30FC\u30C7\u30A3\u30AA/\u30D3\u30C7\u30AA \u306E\u5F62\u5F0F\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093",REPLAY:"\u30EA\u30D7\u30EC\u30A4",ERROR:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u63A5\u7D9A\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F",PLAY_TIPS:"\u30D7\u30EC\u30A4",PAUSE_TIPS:"\u4E00\u6642\u505C\u6B62",PLAYNEXT_TIPS:"\u6B21\u3092\u30D7\u30EC\u30A4",DOWNLOAD_TIPS:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",ROTATE_TIPS:"\u56DE\u8EE2",RELOAD_TIPS:"\u518D\u8AAD\u307F\u8FBC\u307F",FULLSCREEN_TIPS:"\u30D5\u30EB\u30B9\u30AF\u30EA\u30FC\u30F3",EXITFULLSCREEN_TIPS:"\u30D5\u30EB\u30B9\u30AF\u30EA\u30FC\u30F3\u3092\u7D42\u4E86",CSSFULLSCREEN_TIPS:"\u30B7\u30A2\u30BF\u30FC\u30E2\u30FC\u30C9",EXITCSSFULLSCREEN_TIPS:"\u30B7\u30A2\u30BF\u30FC\u30E2\u30FC\u30C9\u3092\u7D42\u4E86",TEXTTRACK:"\u5B57\u5E55",PIP:"\u30DF\u30CB\u30D7\u30EC\u30FC\u30E4\u30FC",SCREENSHOT:"\u30B9\u30AF\u30EA\u30FC\u30F3\u30B7\u30E7\u30C3\u30C8",LIVE:"\u751F\u653E\u9001",OFF:"\u30AA\u30D5",OPEN:"\u958B\u3044\u305F",MINI_DRAG:"\u30DC\u30BF\u30F3\u3092\u62BC\u3057\u3066\u50CD\u753B\u3092\u30C9\u30E9\u30C3\u30B0\u3059\u308B",MINISCREEN:"\u5C0F\u3055\u306A\u753B\u9762",REFRESH:"\u30EA\u30D5\u30EC\u30C3\u30B7\u30E5",REFRESH_TIPS:"\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044",FORWARD:"\u65E9\u9001\u308A",LIVE_TIP:"\u751F\u653E\u9001"}}},62383:function(t,e){e.default=void 0,e.default={LANG:"zh-hk",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u8996\u983B\u4E0B\u8F09\u932F\u8AA4"},mse:{code:2,msg:"\u5289\u8FFD\u52A0\u932F\u8AA4"},parse:{code:3,msg:"\u89E3\u6790\u932F\u8AA4"},format:{code:4,msg:"\u683C\u5F0F\u932F\u8AA4"},decoder:{code:5,msg:"\u89E3\u78BC\u932F\u8AA4"},runtime:{code:6,msg:"\u8A9E\u6CD5\u932F\u8AA4"},timeout:{code:7,msg:"\u64AD\u653E\u8D85\u6642"},other:{code:8,msg:"\u5176\u4ED6\u932F\u8AA4"}},HAVE_NOTHING:"\u6C92\u6709\u95DC\u65BC\u97F3\u983B/\u8996\u983B\u662F\u5426\u5C31\u7DD2\u7684\u4FE1\u606F",HAVE_METADATA:"\u97F3\u983B/\u8996\u983B\u7684\u5143\u6578\u64DA\u5DF2\u5C31\u7DD2",HAVE_CURRENT_DATA:"\u95DC\u65BC\u7576\u524D\u64AD\u653E\u4F4D\u7F6E\u7684\u6578\u64DA\u662F\u53EF\u7528\u7684\uFF0C\u4F46\u6C92\u6709\u8DB3\u5920\u7684\u6578\u64DA\u4F86\u64AD\u653E\u4E0B\u58F9\u5E40/\u6BEB\u79D2",HAVE_FUTURE_DATA:"\u7576\u524D\u53CA\u81F3\u5C11\u4E0B\u58F9\u5E40\u7684\u6578\u64DA\u662F\u53EF\u7528\u7684",HAVE_ENOUGH_DATA:"\u53EF\u7528\u6578\u64DA\u8DB3\u4EE5\u958B\u59CB\u64AD\u653E",NETWORK_EMPTY:"\u97F3\u983B/\u8996\u983B\u5C1A\u672A\u521D\u59CB\u5316",NETWORK_IDLE:"\u97F3\u983B/\u8996\u983B\u662F\u6D3B\u52D5\u7684\u4E14\u5DF2\u9078\u53D6\u8CC7\u6E90\uFF0C\u4F46\u4E26\u672A\u4F7F\u7528\u7DB2\u7D61",NETWORK_LOADING:"\u700F\u89BD\u5668\u6B63\u5728\u4E0B\u8F09\u6578\u64DA",NETWORK_NO_SOURCE:"\u672A\u627E\u5230\u97F3\u983B/\u8996\u983B\u4F86\u6E90",MEDIA_ERR_ABORTED:"\u53D6\u56DE\u904E\u7A0B\u88AB\u7528\u6236\u4E2D\u6B62",MEDIA_ERR_NETWORK:"\u4E0B\u8F09\u932F\u8AA4",MEDIA_ERR_DECODE:"\u89E3\u78BC\u932F\u8AA4",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4E0D\u652F\u6301\u7684\u97F3\u983B/\u8996\u983B\u683C\u5F0F",REPLAY:"\u91CD\u64AD",ERROR:"\u7DB2\u7D61\u9023\u63A5\u4F3C\u4E4E\u51FA\u73FE\u4E86\u554F\u984C",PLAY_TIPS:"\u64AD\u653E",PAUSE_TIPS:"\u66AB\u505C",PLAYNEXT_TIPS:"\u4E0B\u58F9\u96C6",DOWNLOAD_TIPS:"\u4E0B\u8F09",ROTATE_TIPS:"\u65CB\u8F49",RELOAD_TIPS:"\u91CD\u65B0\u8F09\u5165",FULLSCREEN_TIPS:"\u9032\u5165\u5168\u5C4F",EXITFULLSCREEN_TIPS:"\u9000\u51FA\u5168\u5C4F",CSSFULLSCREEN_TIPS:"\u9032\u5165\u6A23\u5F0F\u5168\u5C4F",EXITCSSFULLSCREEN_TIPS:"\u9000\u51FA\u6A23\u5F0F\u5168\u5C4F",TEXTTRACK:"\u5B57\u5E55",PIP:"\u756B\u4E2D\u756B",SCREENSHOT:"\u622A\u5716",LIVE:"\u6B63\u5728\u76F4\u64AD",OFF:"\u95DC\u9589",OPEN:"\u958B\u555F",MINI_DRAG:"\u9EDE\u64CA\u6309\u4F4F\u53EF\u62D6\u52D5\u8996\u983B",MINISCREEN:"\u5C0F\u5C4F\u5E55",REFRESH_TIPS:"\u8ACB\u8A66\u8A66",REFRESH:"\u5237\u65B0",FORWARD:"\u5FEB\u8FDB\u4E2D",LIVE_TIP:"\u76F4\u64AD"}}}}]);
"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["49391"],{128893:function(t,e,i){i.d(e,{T:()=>r});var a=i(933248),s=i(522269);class r{constructor(t){this._option=t,this.type=t.type}_initTheme(t,e){return this._theme=this.getTheme(t,e),this._mergeThemeToSpec(t,e)}getTheme(t,e){}transformSpec(t,e,i){this._transformSpecBeforeMergingTheme(t,e,i);let a=this._initTheme(t,e);return this._transformSpecAfterMergingTheme(a.spec,e,i),a}_transformSpecBeforeMergingTheme(t,e,i){}_transformSpecAfterMergingTheme(t,e,i){}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let r=this._getDefaultSpecFromChart(e),l=t=>(0,s.H)({},i,r,t);return(0,a.Z)(t)?{spec:t.map(t=>l(t)),theme:i}:{spec:l(t),theme:i}}return{spec:t,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(t){}}},595075:function(t,e,i){i.d(e,{g:()=>c});var a=i(207997),s=i(368231),r=i(777678),l=i(279090),n=i(406823),o=i(805041),h=i(145004),d=i(128893),u=i(646459),p=function(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&0>e.indexOf(a)&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(t);s<a.length;s++)0>e.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(i[a[s]]=t[a[s]])}return i};class c extends o.H{getSpec(){return this._spec||{}}getSpecPath(){var t;return null==(t=this._option)?void 0:t.specPath}getSpecInfoPath(){var t,e,i;return null!=(e=null==(t=this._option)?void 0:t.specInfoPath)?e:null==(i=this._option)?void 0:i.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var t,e;return null!=(e=null==(t=this._marks)?void 0:t.getMarks())?e:[]}getMarkNameMap(){var t;return null==(t=this._marks)?void 0:t.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var t;return null==(t=this.getSpecInfo())?void 0:t.theme}constructor(t,e){var i;super(e),this.transformerConstructor=d.T,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new n.D,this._lastLayoutRect=null,this.id=(0,a.a)(),this.userId=t.id,this._spec=t,this.effect={},this.event=new s.j(e.eventDispatcher,e.mode),null==(i=e.map)||i.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(t){}afterInit(){}getVisible(){var t;return!1!==(null==(t=this._spec)?void 0:t.visible)}onLayoutStart(t,e){var i;null==(i=this._layout)||i.onLayoutStart(t,e)}onLayoutEnd(){var t;null==(t=this._layout)||t.onLayoutEnd(),this.getMarks().forEach(t=>t.commit(!1,!0))}onEvaluateEnd(t){}onBeforeRender(){}onDataUpdate(){}beforeRelease(){}clear(){this.getMarks().forEach(t=>{var e;return null==(e=t.clear)?void 0:e.call(t)})}release(){var t;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(t=>t.release()),null==(t=this._data)||t.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(t){var e;let i=this._compareSpec(t,this._spec);return(i.reRender||i.reMake||i.reCompile)&&(null==(e=this._layout)||e.setWillLayoutTag()),this._spec=t,i}_compareSpec(t,e){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(t){t&&(this._spec=t),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var t;null==(t=this._layout)||t.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(t){return Object.assign({},t)}setMarkStyle(t,e,i,a){(0,r.Z)(t)&&(0,r.Z)(e)&&t.setStyle(this._convertMarkStyle(e),i,a)}initMarkStyleWithSpec(t,e){if(!(0,r.Z)(t)||!(0,r.Z)(e))return;let{style:i,state:a}=e,s=Object.assign({},e);i&&(s.style=this._convertMarkStyle(i)),a&&(s.state={},Object.keys(a).forEach(t=>{s.state[t]=this._convertMarkStyle(a[t])})),t.initStyleWithSpec(s)}stateKeyToSignalName(t,e){let i=`${h.Bq}_${this.modelType}_${this.type}_${this.id}_${t}`;return e&&(i+=`_${e}`),i}compileData(){var t;null==(t=this._data)||t.compile()}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t})})}_createMark(t,e={},i){let{type:a,name:s}=t,{parent:r}=e,n=p(e,["parent"]),o=l.F.createMark(a,s,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},n));return r?r.addMark(o):this.getCompiler().addRootMark(o),o&&(o.created(),i&&o.setMarkConfig(i)),o}_getDataIdKey(){}getColorScheme(){var t,e;return null==(e=(t=this._option).getTheme)?void 0:e.call(t,"colorScheme")}getSpecInfo(){var t,e,i;let a=null!=(i=null==(e=(t=this._option).getSpecInfo)?void 0:e.call(t))?i:{};return(0,u.$s)(a,this.getSpecInfoPath())}getSpecIndex(){let t=this.getSpecPath();if(!(null==t?void 0:t.length))return 0;let e=Number(t[t.length-1]);return isNaN(e)?0:e}updateAnimateStateCallback(t){this._aniamtionStateCallback=t}getAnimationStateCallback(){return this._aniamtionStateCallback}}},237731:function(t,e,i){i.d(e,{r:()=>n});var a=i(971800),s=i(27203),r=i(595075),l=i(840892);class n extends r.g{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null,this._transformLayoutPadding=null}get layoutOrient(){return this._orient}set layoutOrient(t){this._orient=t,this._layout&&(this._layout.layoutOrient=t)}initLayout(){"none"!==this.layoutType&&(this._layout=new l.c(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition,transformLayoutPadding:this._transformLayoutPadding}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(t,e){this._isLayout=!0,super.onLayoutStart(t,e)}onLayoutEnd(){super.onLayoutEnd(),this.updateLayoutAttribute();let t=this.getLayoutRect();!this._forceLayoutTag&&(0,a.X)(this._lastLayoutRect,t)||(this._lastLayoutRect=Object.assign({},t)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(t){}_forceLayout(){var t,e;this._isLayout||(null==(t=this._layout)||t.setWillLayoutTag(),this._forceLayoutTag=!0,null==(e=this._option.globalInstance.getChart())||e.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(t){return this._layout?this._layout.setLayoutStartPosition(t):this._layoutStartPos=(0,s.Z)(this._layoutStartPos,t)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(t,e){return this._layout?this._layout.setLayoutRect(t):this._lastLayoutRect=(0,s.Z)(this._layoutRect,t)}getLastComputeOutBounds(){var t;return null==(t=this._layout)?void 0:t.getLastComputeOutBounds()}setAttrFromSpec(){var t,e,i,a,s;super.setAttrFromSpec(),this.layoutClip=null!=(t=this._spec.clip)?t:this.layoutClip,this.layoutZIndex=null!=(e=this._spec.zIndex)?e:this.layoutZIndex,this.layoutType=null!=(i=this._spec.layoutType)?i:this.layoutType,this._orient=null!=(a=this._spec.orient)?a:this._orient,this.layoutLevel=null!=(s=this._spec.layoutLevel)?s:this.layoutLevel}}},22897:function(t,e,i){i.d(e,{I:()=>r});var a=i(207997),s=i(588712);class r{constructor(){this.id=(0,a.a)(),this._plugins=[]}add(t){if(!t||0===t.length)return null;let e=[];return t.forEach(t=>{this._plugins.find(e=>e.id===t.id)?(0,s.ZK)("\u4E0D\u8981\u91CD\u590D\u6DFB\u52A0\u76F8\u540C\u7684plugin"):(this._plugins.push(t),e.push(t),t.onAdd&&t.onAdd(this))}),e}load(t){let e=this.add(t);e&&e.length&&this.activate(t)}activate(t){t.length&&t.forEach(t=>{t.init&&t.init()})}get(t){return this._plugins.find(e=>e.id===t)}getAll(){return this._plugins.slice()}release(t){let e=this.get(t);e&&(e.release(this),this._plugins=this._plugins.filter(t=>t!==e))}releaseAll(){this._plugins.forEach(t=>{t.release(this)}),this._plugins=[]}clear(t){let e=this.get(t);e&&e.clear(this)}clearAll(){this._plugins.forEach(t=>{var e;null==(e=t.clear)||e.call(t,this)})}}},513206:function(t,e,i){i.d(e,{v:()=>s});var a=i(207997);class s{constructor(t){this.id=(0,a.a)(),this.name=`${t}_${this.id}`}onAdd(t){this.service=t}release(){this.service=null}}},177134:function(t,e,i){i.d(e,{$:()=>g});var a=i(531324),s=i(240582),r=i(896294),l=i(933248),n=i(853604),o=i(513206),h=i(279090);let d=/\{([^}]+)\}/,u=/\{([^}]+)\}/g,p=/:/;class c extends o.v{constructor(){super(c.type),this.type="formatterPlugin",this._timeModeFormat={utc:a.k.getInstance().timeUTCFormat,local:a.k.getInstance().timeFormat},this._formatter=this._format,this._timeFormatter=this._timeModeFormat.local,this._numericFormatter=s.C6.getInstance().format,this._numericSpecifier=s.C6.getInstance().formatter,this._numericFormatterCache=new Map,this._isNumericFormatterCache=new Map}onInit(t,e){var i;let{globalInstance:a}=t;if(!a)return;this._spec=null!=(i=null==e?void 0:e[c.specKey])?i:{};let{timeMode:s,customFormatter:l,numericFormatter:n,timeFormatter:o}=this._spec;(0,r.Z)(l)?this._formatter=l:(this._formatter=this._format.bind(this),(0,r.Z)(o)?this._timeFormatter=o:s&&this._timeModeFormat[s]&&(this._timeFormatter=this._timeModeFormat[s]),n&&(this._numericFormatter=n,this._numericSpecifier=null,this._numericFormatterCache=null)),h.F.registerFormatter(this._formatter)}_format(t,e,i){return(0,l.Z)(t)?t.map((t,a)=>{let s=(0,l.Z)(i)?i[a]:i;return s?this._formatSingleLine(t,e,s):t}):(0,l.Z)(i)?i.map(i=>this._formatSingleLine(t,e,i)):this._formatSingleLine(t,e,i)}_formatSingleLine(t,e,i){let a;return(this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(i)?a=this._isNumericFormatterCache.get(i):(a=d.test(i),this._isNumericFormatterCache.set(i,a))),a)?i.replace(u,(t,i)=>{if(!p.test(i)){let a=e[i.trim()];return void 0!==a?a:t}let a=i.split(":"),s=e[a.shift()],r=a.join(":");return this._formatSingleText(s,r)}):this._formatSingleText(t,i)}_formatSingleText(t,e){if(n.DC.test(e)&&this._numericFormatter){let i;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(e)?i=this._numericFormatterCache.get(e):(i=this._numericSpecifier(e),this._numericFormatterCache.set(e,i)),i(Number(t))):this._numericFormatter(e,Number(t))}return e.includes("%")&&this._timeFormatter?this._timeFormatter(e,t):e.startsWith("calc(")?this._calcFormatter(e,t):t}_calcFormatter(t,e){try{let i=t.slice(5,-1).replace(/v/g,String(e));return this._calculateMathExpression(i,e)}catch(t){return e}}_calculateMathExpression(t,e){let i=t.replace(/\s+/g,"");if(!this._isValidMathExpression(i))return e;try{let t=Function("return ("+i+")")();if("number"!=typeof t||isNaN(t)||!isFinite(t))throw Error("Invalid calculation result");return t}catch(t){return e}}_isValidMathExpression(t){return/^[0-9+\-*/().]+$/.test(t)}release(){super.release(),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null}}c.pluginType="chart",c.specKey="formatter",c.type="formatterPlugin";let g=()=>{h.F.registerChartPlugin(c.type,c)}},992707:function(t,e,i){i.d(e,{f:()=>s});var a=i(22897);class s extends a.I{constructor(t){super(),this.globalInstance=t}onInit(t){this._plugins.forEach(e=>{e.onInit&&e.onInit(this,t)})}onBeforeResize(t,e){this._plugins.forEach(i=>{i.onBeforeResize&&i.onBeforeResize(this,t,e)})}onAfterChartSpecTransform(t,e){this._plugins.forEach(i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,t,e)})}onAfterModelSpecTransform(t,e,i){this._plugins.forEach(a=>{a.onAfterModelSpecTransform&&a.onAfterModelSpecTransform(this,t,e,i)})}onBeforeInitChart(t,e){this._plugins.forEach(i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,t,e)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}},251871:function(t,e,i){i.d(e,{e:()=>k});var a=i(75464),s=i(50026),r=i(835151);function l(t){return t.length>=2&&(0,s.Z)(t[0])&&(0,s.Z)((0,r.Z$)(t))&&(0,r.Z$)(t)>=t[0]}function n(t,e){var i;let a=(0,r.Z$)(e)-e[0],l=(0,r.Z$)(e)*e[0]<0,n=e[0]<=0?0-e[0]:0,o=(0,r.Z$)(e)>0?(0,r.Z$)(e)-0:0;0===a?e[0]<0?(n=1,o=0):e[0]>0&&(n=0,o=1):(n/=a,o/=a);let h=t.getDomainSpec(),d={total:a,negative:n,positive:o,includeZero:l,domain:e,extendable_min:!(0,s.Z)(h.min),extendable_max:!(0,s.Z)(h.max)};if(null==(i=t._break)?void 0:i.scope){let i,a,s=e.findIndex(t=>t>=0);0===s?(i=t._break.scope[s],a=[e[0],e[1]],d.positive=1,d.negative=0):0>=(0,r.Z$)(e)?(d.positive=0,d.negative=1,a=[e[e.length-2],e[e.length-1]]):(i=t._break.scope[s-1],a=[e[s-1],e[s]],d.negative=i[0]+(0-a[0])/(a[1]-a[0])*(i[1]-i[0]),d.positive=1-d.negative),d.break=!0,d.extendable_max=!1,d.extendable_min=!1,d.domain=a}return d}function o(t,e){let{positive:i,negative:a,extendable_min:s,extendable_max:r,domain:l}=t,{positive:n,negative:o,extendable_min:h,extendable_max:d,domain:u}=e;if(n>0){if(!h)return!1;let t=a/i;r&&(t=a/Math.max(i,n),l[1]=-l[0]/t),u[0]=-u[1]*t}else if(o>0){if(!d)return!1;let t=i/a;s&&(t=i/Math.max(a,a),l[0]=-l[1]/t),u[1]=-u[0]*t}return!0}function h(t,e){let{extendable_min:i,extendable_max:a,domain:s}=t,{positive:r,negative:l,domain:n}=e;return(0!==r||0!==l)&&!(r>0&&!a)&&!(l>0&&!i)&&(s[0]=n[0],s[1]=n[1],!0)}function d(t,e){let{positive:i,negative:a,extendable_max:s,domain:r}=t,{positive:l,negative:n,extendable_min:o,domain:h}=e;if(s&&o){let t=Math.max(a,n)/Math.max(i,l);r[1]=-r[0]/t,h[0]=-h[1]*t}else if(o)h[0]=-h[1]*(a/i);else{if(!s)return!1;r[1]=-r[0]/(n/l)}return!0}function u(t,e){let{extendable_min:i,domain:a}=t,{extendable_max:s,domain:r}=e;return!(!i||!s)&&(a[0]=-a[1],r[1]=-r[0],!0)}var p=i(459774),c=i(924706),g=i(510396),_=i(796327);let m=(t,e)=>{var i,a,s,l,n;if(!t)return t;let o=null==(i=null==e?void 0:e.targetAxis)?void 0:i.call(e);if(!o)return t;let h=null==(a=null==e?void 0:e.currentAxis)?void 0:a.call(e);if(!h)return t;let d=null==(s=h.getTickData())?void 0:s.getDataView();if(!d||!d.transformsArr.find(t=>t.type.includes("ticks")))return t;let u=h.getScale();if(!u)return t;let p=null==(n=null==(l=o.getTickData())?void 0:l.getDataView())?void 0:n.latestData;if(!(null==p?void 0:p.length))return t;let c=o.getScale();if(!c)return t;let m=c.domain(),y=(0,r.Z$)(m)-m[0];if(0===y)return t;let k=u.domain(),f=(0,r.Z$)(k)-k[0];if(0===y)return t;let v=p.map(t=>(function(t,e,i,a,s){let r=(0,_.f2)(t,e),l=Math.max((0,_.i4)(i),(0,_.i4)(r));return Math.round(r*10**l)/Math.round(i*10**l)*s+a})(t.value,m[0],y,k[0],f));return(0,g.KV)(v)};var y=i(513206);class k extends y.v{constructor(){super(k.type),this.type="AxisSyncPlugin"}_checkEnableSync(t){if(!(0,p.z2)(t.getScale().type))return!1;let e=t.getSpec().sync;return!!(null==e?void 0:e.axisId)&&e}_getTargetAxis(t,e){let i=t.getOption().getChart().getComponentByUserId(e.axisId);return(null==i?void 0:i.type.startsWith("cartesianAxis"))?i:null}onInit(t,e){let i=this._checkEnableSync(e);if(!i||!i.zeroAlign)return;let s=this._getTargetAxis(e,i);s&&e.event.on(a.$7.scaleDomainUpdate,{filter:({model:t})=>t.id===e.id||t.id===s.id},()=>{((t,e)=>{var i,a,s,r;let p=t.getScale(),c=e.getScale();if(!p||!c)return;let g=null!=(a=null==(i=t.getDomainAfterSpec)?void 0:i.call(t))?a:[0,1],_=null!=(r=null==(s=e.getDomainAfterSpec)?void 0:s.call(e))?r:[0,1];if(!(g&&_&&l(g)&&l(_)))return;let m=n(t,g),y=n(e,_);if(!0===m.break&&!0===y.break)return;let{positive:k,negative:f,extendable_min:v,extendable_max:S,includeZero:b}=m,{positive:M,negative:x,extendable_min:A,extendable_max:F,includeZero:C}=y;if(0===k&&0===f){if(!h(m,y))return}else if(0===M&&0===x){if(!h(y,m))return}else if(b||C)if(b&&!C){if(!o(m,y))return}else if(C&&!b){if(!o(y,m))return}else{if(f===x)return;if(f>x){if(!d(m,y))return}else if(!d(y,m))return}else{if(0===f&&0===M){if(!u(m,y))return}else if(0===x&&0===k&&!u(y,m))return;if(0===f&&0===x)if(0===g[0]&&_[0]>0){if(!A)return;_[0]=0}else{if(!(0===_[0]&&g[0]>0)||!v)return;g[0]=0}if(0===k&&0===M)if(0===g[1]&&_[1]>0){if(!F)return;_[1]=0}else{if(!(0===_[1]&&g[1]>0)||!S)return;g[1]=0}}p.domain(g),c.domain(_)})(s,e)})}onDidCompile(t,e){var i;let a=this._checkEnableSync(e);if(!a)return;let s=this._getTargetAxis(e,a);if(s&&a.tickAlign){(0,c.U)(e.getOption().dataSet,"tickAlign",m);let t=null==(i=s.getTickData())?void 0:i.getDataView();t&&t.target.addListener("change",()=>{var t,i;null==(i=null==(t=e.getTickData())?void 0:t.getDataView())||i.reRunAllTransform({skipEqual:!0})}),e.addTransformToTickData({type:"tickAlign",options:{targetAxis:()=>s,currentAxis:()=>e},level:Number.MAX_SAFE_INTEGER},!1)}}}k.pluginType="component",k.type="AxisSyncPlugin"},681611:function(t,e,i){i.d(e,{s:()=>s});var a=i(22897);class s extends a.I{constructor(t){super(),this.component=t}releaseAll(){super.releaseAll(),this.component=null}}},305592:function(t,e,i){i.d(e,{D:()=>s});var a=i(279090);let s=t=>{a.F.registerComponentPlugin(t.type,t)}},536834:function(t,e,i){i.d(e,{j:()=>y});var a=i(145004),s=i(747005),r=i(453375),l=i(580739),n=i(777678),o=i(591431),h=i(896294),d=i(521107);let u=(t,e)=>{let i;if((0,n.Z)(t)){if((0,o.Z)(t))i=t;else if((0,h.Z)(t)){let a=t(e);(0,o.Z)(a)&&(i=a)}}return i},p={left:[-2,0],right:[2,0],top:[0,-2],bottom:[0,2],insideTop:[0,-1.5],insideBottom:[0,1.5],insideLeft:[-1.5,0],insideRight:[1.5,0],insideTopLeft:[-1.5,-1.5],insideTopRight:[1.5,-1.5],insideBottomLeft:[-1.5,1.5],insideBottomRight:[1.5,1.5],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},c=(t,e,i=2)=>{var a,s;return null!=(s=null==(a=p[t])?void 0:a[+("x"!==e)])?s:i};var g=i(50026),_=i(513206),m=i(950613);class y extends _.v{constructor(){super(...arguments),this._visible=!0,this._isReleased=!1,this.showTooltip=(t,e,i)=>{let{changePositionOnly:a}=i;return a?this.changeTooltipPosition(i,e):this.changeTooltip(!0,i,e)},this.changeTooltip=(t,e,i)=>this._isReleased?1:t?this.changeTooltipPosition(e,i):(this._updateTooltip(!1,e),0),this.changeTooltipPosition=(t,e)=>{var i,a,s,r,l;if(this._isReleased)return 1;let n=t.event,{tooltipSpec:o,activeTooltipSpec:h,changePositionOnly:d}=t;if(!h)return 1;let u=h.activeType;if(h.handler)return null!=(s=null==(a=(i=h.handler).showTooltip)?void 0:a.call(i,u,e,t))?s:0;let p=this._getActualTooltipPosition(h,t,this._getTooltipBoxSize(h,d));h.position=p;let c=null!=(r=h.updatePosition)?r:null==(l=o[u])?void 0:l.updatePosition;c&&(h.position=c(h.position,e,t));let g=!1!==(null==h?void 0:h.visible);return e&&"pointerout"!==n.type&&h.visible&&(h.title||h.content)||(g=!1),this._updateTooltip(g,Object.assign(Object.assign({},t),{changePositionOnly:d})),0},this._getActualTooltipPosition=(t,e,i)=>{var s,p,_,y,k,f,v,S,b;let M=this._chartOption.getRectByDimensionData,{tooltipSpec:x}=e,A={x:1/0,y:1/0};if(!x)return A;let F=e.event,{activeType:C,data:T}=t,D="dimension"===C?null==(p=null==(s=T[0])?void 0:s.data)?void 0:p[0]:null==T?void 0:T[0],{offsetX:w,offsetY:P}=this._option,L=x[C],R=(0,m.sE)(null==L?void 0:L.position,T,e),E=null!=(_=(0,m.sE)(null==L?void 0:L.positionMode,T,e))?_:"mark"===C?"mark":"pointer",{width:I=0,height:O=0}=null!=i?i:{},H="canvas"===x.renderMode,B=null==(y=null==e?void 0:e.chart)?void 0:y.getCanvasRect(),V=null!=(k=null==B?void 0:B.width)?k:a.rV,Z=null!=(f=null==B?void 0:B.height)?f:a.b,W=!1,z={width:0,height:0},N,Y={x:0,y:0},j={x:0,y:0},X=1,K=1,$=(0,r.qe)(this._env);if($&&!x.confine?(z.width=window.innerWidth,z.height=window.innerHeight):(z.width=V,z.height=Z),$&&!H){let t=this._getParentElement(x);j=null!=(S=null==(v=null==t?void 0:t.getBoundingClientRect)?void 0:v.call(t))?S:A;let e=null!=(b=this._compiler.getCanvas())?b:this._chartContainer;Y={x:(N=null==e?void 0:e.getBoundingClientRect()).x-j.x,y:N.y-j.y},X=(0,l.yZ)(e,N),K=(0,l.yZ)(t,j)}let G=K/X,U={},q={x:R,y:R},Q={x:["left","right"],y:["top","bottom"]},J=({orient:t,mode:i,offset:a},s)=>{var r;let l,n,o=e.model,h=null==o?void 0:o.getLayoutStartPoint(),d=null!=a?a:"x"===s?w:P;if("mark"===i){W=!0;let t=e.item,i=null==t?void 0:t.AABBBounds;i&&h&&(l=("x"===s?i.x1:i.y1)+h[s],n=("x"===s?i.x2:i.y2)+h[s])}else if(M&&"crosshair"===i&&"cartesian"===(null==(r=null==D?void 0:D.series)?void 0:r.coordinate)&&D.datum&&D.datum.length){W=!0;let t=M(D,h);t&&(l=t.start[s],n=t.end[s])}else q[s]=t;if(W){let e=Q[s][0],i="x"===s?I:O;switch(c(t,s)){case -2:U[e]=l-i*G-d;break;case -1.5:U[e]=l+d;break;case 0:U[e]=(l+n)/2-i*G/2;break;case -1:U[e]=(l+n)/2-i*G-d;break;case 1:U[e]=(l+n)/2+d;break;case 1.5:U[e]=n-i*G-d;break;case 2:U[e]=n+d}}},tt=["x","y"];if((0,d.Z)(R))if((0,d.Z)(R)&&((0,n.Z)(R.left)||(0,n.Z)(R.right)||(0,n.Z)(R.top)||(0,n.Z)(R.bottom))){let{left:t,right:e,top:i,bottom:a}=R;U.left=u(t,F),U.top=u(i,F),U.right=u(e,F),U.bottom=u(a,F)}else(0,d.Z)(R)&&((0,n.Z)(R.x)||(0,n.Z)(R.y))&&tt.forEach(t=>{let e=R[t];(0,o.Z)(e)||(0,h.Z)(e)?U[Q[t][0]]=u(e,F):J(e,t)});else(0,n.Z)(R)&&(J({orient:R,mode:E},"x"),J({orient:R,mode:E},"y"));let te={x:null,y:null};return tt.forEach(t=>{var e;let i="x"===t?I:O,a="x"===t?V:Z,s="x"===t?w:P,r=c(q[t],t);if((0,g.Z)(U[Q[t][0]]))te[t]=U[Q[t][0]];else if((0,g.Z)(U[Q[t][1]]))te[t]=a-i*G-U[Q[t][1]];else{let e="x"===t?F.canvasX:F.canvasY;te[t]=r>0?e+s:0===r?e-i*G/2:e-i*G-s}te[t]*=X,$&&(te[t]+=Y[t]),te[t]/=K;let l="x"===t?z.width:z.height,n=x.confine?-(j[t]-(null!=(e=null==N?void 0:N[t])?e:0)/X)/K:-j[t]/K,o=l/K+n-i;2!==r&&te[t]<n?W?te[t]=n:(te[t]+=0===r?s+i/2:2*s+i,te[t]>o&&(te[t]=o)):-2!==r&&te[t]>o&&(W?te[t]=o:(te[t]-=0===r?s+i/2:2*s+i,te[t]<n&&(te[t]=n)))}),te}}get env(){return this._env}onAdd(t){super.onAdd(t);let e=t.component;this._component=e,this._chartOption=e.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=e.getCompiler(),this._initFromSpec()}hideTooltip(t){return this.changeTooltip(!1,t)}release(){var t,e,i,a;let s=null!=(e=null==(t=this._component)?void 0:t.getSpec())?e:{};s.handler?null==(a=(i=s.handler).release)||a.call(i):(this._removeTooltip(),this._isReleased=!0,this._chartOption=null,this._component=null)}_getDefaultOption(){var t,e;let{offset:i}=this._component.getSpec();return i?{offsetX:null!=(t=i.x)?t:s.WN.offsetX,offsetY:null!=(e=i.y)?e:s.WN.offsetY}:s.WN}_getParentElement(t){return t.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}y.specKey="tooltip"},97132:function(t,e,i){i.d(e,{j:()=>f});var a=i(536834),s=i(768901),r=i(576225),l=i(777678),n=i(305592),o=i(375156),h=i(889897),d=i(835151),u=i(522269),p=i(505441),c=i(249722),g=i(21577);let _={fontFamily:c.r.fontFamily,spacing:10,wordBreak:"break-word"},m=(t,e)=>{var i;let a,s;"rich"!==(null==t?void 0:t.type)&&"html"!==(null==t?void 0:t.type)?(t=(null!=t?t:"").toString(),s=(a=e.multiLine?(a=t.split("\n")).map((t,e)=>e<a.length-1?t+"\n":t):[t]).map(t=>Object.assign(Object.assign({},e),{text:t}))):(s=t.text,a=t);let r=(0,g.X)({wordBreak:null!=(i=e.wordBreak)?i:"break-word",maxWidth:e.maxWidth?e.maxWidth:void 0,width:0,height:0,textConfig:s});return{width:r.width(),height:r.height(),text:a}};function y(t={},e,i){var a,s;return Object.assign(Object.assign({},null!=i?i:_),{fill:null!=(a=t.fill)?a:t.fontColor,textAlign:t.textAlign,textBaseline:t.textBaseline,fontFamily:null!=(s=t.fontFamily)?s:e,fontSize:t.fontSize,fontWeight:t.fontWeight,lineHeight:t.lineHeight,spacing:t.spacing,multiLine:(0,l.Z)(t.maxWidth)?!1!==t.multiLine:t.multiLine,maxWidth:t.maxWidth,wordBreak:t.wordBreak,autoWidth:t.autoWidth})}class k extends a.j{constructor(){super(k.type),this.type=o.a.canvas,this._attributes=null}onAdd(t){var e;super.onAdd(t),this._tooltipCanvasId=null==(e=this._chartOption.modeParams)?void 0:e.tooltipCanvasId}_initTooltipComponent(t){let e=this._getLayer(t);this._tooltipComponent=new s.u({autoCalculatePosition:!1,autoMeasure:!1}),e.add(this._tooltipComponent)}_getLayer(t){if(this._layer)return this._layer;this._layer=t.createLayer(this._tooltipCanvasId);let e=this._layer.layerHandler.canvas.nativeCanvas;return e&&e.style&&(e.style.touchAction="none",e.style.pointerEvents="none"),this._layer}_getTooltipBoxSize(t,e){var i,a;if(!e||(0,r.Z)(this._attributes)){let e=null==(i=this._chartOption)?void 0:i.getTheme("fontFamily");this._attributes=((t,e,i)=>{var a,s,r,n,o;let{style:c={},enterable:g,transitionDuration:_}=e,{panel:k={},titleLabel:f,shape:v,keyLabel:S,valueLabel:b,spaceRow:M,align:x}=c,A=(0,h.o)(k.padding),F=(0,p.Ek)(k.padding),C=y(Object.assign({textAlign:"right"===x?"right":"left"},f),i),T=y(Object.assign({textAlign:"right"===x?"right":"left"},S),i),D=y(b,i),w={fill:!0,size:null!=(a=null==v?void 0:v.size)?a:8,spacing:null!=(s=null==v?void 0:v.spacing)?s:6},P={panel:(t=>{var e;let{backgroundColor:i,border:a,shadow:s}=t,r={lineWidth:null!=(e=null==a?void 0:a.width)?e:0,shadow:!!s};(null==a?void 0:a.color)&&(r.stroke=a.color),i&&(r.fill=i),s&&(r.shadowColor=s.color,r.shadowBlur=s.blur,r.shadowOffsetX=s.x,r.shadowOffsetY=s.y,r.shadowSpread=s.spread);let{radius:n}=null!=a?a:{};return(0,l.Z)(n)&&(r.cornerRadius=[n,n,n,n]),r})(k),padding:A,title:{},content:[],titleStyle:{value:C,spaceRow:M},contentStyle:{shape:w,key:T,value:D,spaceRow:M},hasContentShape:!1,keyWidth:0,valueWidth:0,enterable:g,transitionDuration:_,align:x},{title:L={},content:R=[]}=t,E=F.left+F.right,I=F.top+F.bottom,O=0,H=!!R.length,B=0,V=0,Z=0,W=0;if(H){let t=[],e=[],i=[],a=[],s=0;P.content=R.map((r,n)=>{let o=0,{hasShape:h,key:d,shapeType:p="",shapeFill:c,shapeStroke:g,shapeLineWidth:_,shapeSize:k,value:f,isKeyAdaptive:v,spaceRow:S,keyStyle:b,valueStyle:x,shapeHollow:A}=r,F={height:0,spaceRow:null!=S?S:M};if((0,l.Z)(d)){let i=(0,u.H)({},T,y(b,void 0,{})),{width:a,height:s,text:r}=m(d,i);F.key=Object.assign(Object.assign({width:a,height:s},i),{text:r}),v?e.push(a):t.push(a),o=Math.max(o,s)}if((0,l.Z)(f)){let t=(0,u.H)({},D,y(x,void 0,{})),{width:e,height:a,text:s}=m(f,t);F.value=Object.assign(Object.assign({width:e,height:a},t),{text:s}),i.push(e),o=Math.max(o,a)}if(h){let t={visible:!0,symbolType:p};A?t.stroke=c:t.fill=c,t.stroke=null!=g?g:c,t.lineWidth=_,F.shape=t;let e=null!=k?k:w.size;o=Math.max(e,o),a.push(e)}else F.shape={visible:!1};return F.height=o,s+=o,n<R.length-1&&(s+=F.spaceRow),F}),I+=s,B=t.length?(0,d.CE)(t):0,V=e.length?(0,d.CE)(e):0,Z=i.length?(0,d.CE)(i):0,O=Math.max((W=a.length?(0,d.CE)(a)+w.spacing:0)+B+T.spacing+Z+D.spacing,W+V,O),P.hasContentShape=!!a.length,P.keyWidth=B,P.valueWidth=Z}let z=0,N=0,Y=0,{visible:j=!0,value:X="",valueStyle:K,spaceRow:$}=L;P.title.visible=j,P.title.spaceRow=null!=$?$:M;let G={},U=()=>G.autoWidth&&!1!==G.multiLine;if(j){G=(0,u.H)({},C,y(K,void 0,{})),U()&&(G.multiLine=null==(r=G.multiLine)||r,G.maxWidth=null!=(n=G.maxWidth)?n:H?Math.ceil(O):void 0);let{text:t,width:e,height:i}=m(X,G);P.title.value=Object.assign(Object.assign({width:U()?Math.min(e,null!=(o=G.maxWidth)?o:Number.MAX_VALUE):e,height:i},G),{text:t}),z=P.title.value.width,Y=(N=P.title.value.height)+(H?P.title.spaceRow:0)}return I+=Y,P.title.width=z,P.title.height=N,U()?E+=O||z:E+=Math.max(z,O),H&&P.content.forEach(t=>{var e;let i=t.value;i&&(null==(e=i.autoWidth)||e)&&(i.width=E-F.left-F.right-W-B-T.spacing-D.spacing,i.maxWidth||(i.maxWidth=Math.ceil(i.width)),P.valueWidth=Math.max(P.valueWidth,i.width))}),P.panel.width=E,P.panel.height=I,P})(t,this._component.getSpec(),e)}let{panel:s}=null!=(a=this._attributes)?a:{};return{width:s.width+s.lineWidth,height:s.height+s.lineWidth}}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(t,e){this._visible=t;let i=this._compiler.getStage();if(!i)return;if(!t)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(i);let{activeTooltipSpec:a}=e,s=a.position;e.changePositionOnly?(0,l.Z)(s)&&this._tooltipComponent.setAttributes(s):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),s)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var t;return null==(t=this._tooltipComponent)?void 0:t.attribute.visibleAll}release(){var t;super.release(),null==(t=this._layer)||t.release()}}k.type=o.a.canvas;let f=()=>{(0,n.D)(k)}},747005:function(t,e,i){i.d(e,{BL:()=>l,WN:()=>o,bl:()=>r,jG:()=>s,lH:()=>a,s2:()=>n,u7:()=>h});let a="vchart-tooltip",s=`${a}-container`,r=`${a}-title`,l=`${a}-content-box`,n="",o={offsetX:10,offsetY:10},h="99999999999999"},977994:function(t,e,i){i.d(e,{v:()=>F});var a=i(536834),s=i(777678),r=i(933248),l=i(50026),n=i(576225),o=i(889897),h=i(505441);let d=(t,e)=>(0,s.Z)(t)?(0,r.Z)(t)?t.map(t=>`${t}px`).join(" "):`${t}px`:null!=e?e:"initial",u=(t={},e={})=>{var i,a;(0,s.Z)(t.fontFamily)&&(e.fontFamily=t.fontFamily);let r=null!=(i=t.fill)?i:t.fontColor;return(0,s.Z)(r)&&(e.color=r),(0,s.Z)(t.fontWeight)&&(e.fontWeight=t.fontWeight),(0,s.Z)(t.textAlign)&&(e.textAlign=t.textAlign),(0,s.Z)(t.fontSize)&&(e.fontSize=d(t.fontSize)),(0,s.Z)(t.maxWidth)&&(e.maxWidth=d(t.maxWidth)),t.multiLine||(0,s.Z)(t.maxWidth)&&!1!==t.multiLine?(e.whiteSpace="initial",e.wordBreak=null!=(a=t.wordBreak)?a:"break-word"):(e.wordBreak="normal",e.whiteSpace="nowrap"),e},p=(t={})=>{let{lineHeight:e}=t;return t.fontSize?(0,h.Mv)(e,t.fontSize):0};function c(t,e){t&&t.style&&e&&Object.keys(e).forEach(i=>{t.style[i]=e[i]})}var g=i(747005),_=i(453375),m=i(305592),y=i(375156),k=i(580739),f=i(897210),v=i(319823),S=i(522610),b=i(342279),M=i(521107),x=i(249722);class A extends a.j{getVisibility(){return!!this._rootDom&&"visible"===this._rootDom.style.visibility}setVisibility(t){t!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=t?"visible":"hidden")}getRootDom(){return this._rootDom}constructor(){super(A.type),this.type=y.a.dom,this._tooltipContainer=null==_.Eh?void 0:_.Eh.body}onAdd(t){super.onAdd(t),this._initStyle(),this.initEl()}initEl(){let t=this._component.getSpec().parentElement;if(_.Eh&&t&&t.children&&t.children.length){for(let e=0;e<t.children.length;e++)if(t.children[e].classList.contains(g.jG)){this._container=t.children[e];break}this._container||(this._container=_.Eh.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=g.u7,this._container.classList.add(g.jG),t.appendChild(this._container))}}initRootDom(){var t;let e=this._component.getSpec(),i=document.createElement("div"),a=null==(t=this._chartOption)?void 0:t.getTheme("fontFamily");c(i,Object.assign({left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:g.u7,fontFamily:null!=a?a:x.r.fontFamily,fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh",visibility:"hidden"},this._domStyle.panel)),i.classList.add(e.className),i.setAttribute("vchart-tooltip-id",`${this.id}`),this._container.appendChild(i),this._rootDom=i}_getTooltipBoxSize(t,e){var i;this._rootDom||this.initRootDom(),e||this._updateDomStringByCol(t),this._updateDomStyle("height",e);let a=null==(i=this._rootDom)?void 0:i.getBoundingClientRect();return{width:null==a?void 0:a.width,height:null==a?void 0:a.height}}_removeTooltip(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null}_updateTooltip(t,e){var i,a;if(t&&this._rootDom){let{tooltipSpec:s,activeTooltipSpec:r}=e;e.changePositionOnly||(this._tooltipActual=r);let l=this._rootDom;if(l){let{x:n=0,y:o=0}=null!=(i=r.position)?i:{},h={x:n,y:o},d=this.getVisibility();s.updateElement&&(this._updatePosition(null!=(a=this._cacheCustomTooltipPosition)?a:{x:n,y:o}),s.updateElement(l,r,e),h=this._getActualTooltipPosition(r,e,{width:l.offsetWidth,height:l.offsetHeight}),this._cacheCustomTooltipPosition=h),!d&&t&&(this._rootDom.style.transition="none",this._updatePosition(h,!1),this._rootDom.getBoundingClientRect()),this._updatePosition(h)}this.setVisibility(t)}else this.setVisibility(t),this._cacheCustomTooltipPosition=void 0}_initStyle(){let t=this._component.getSpec();this._domStyle=((t={})=>{var e,i,a,r;let{style:h={},enterable:c,transitionDuration:g}=t,{panel:_={},titleLabel:m,shape:y,keyLabel:k,valueLabel:f,spaceRow:v,align:S}=h,{panelStyle:b,panelPadding:M}=(t=>{var e;let{backgroundColor:i,border:a,shadow:r,padding:n}=t,h={borderWidth:`${null!=(e=null==a?void 0:a.width)?e:0}px`},u=null;(null==a?void 0:a.color)&&(h.borderColor=a.color),i&&(h.backgroundColor=i),h.boxShadow=r?`${r.x}px ${r.y}px ${r.blur}px ${r.spread}px ${r.color}`:"initial";let{radius:p}=null!=a?a:{};return(0,s.Z)(p)&&(h.borderRadius=(0,l.Z)(p)?`${p}px`:`${p}`),n&&(h.padding=d(u=(0,o.o)(n))),{panelStyle:h,panelPadding:u}})(_),x={marginTop:"0px",marginBottom:"0px"};b.pointerEvents=c?"auto":"none",g&&(b.transitionDuration=g?`${g}ms`:"initial",b.transitionProperty=g?"transform":"initial",b.transitionTimingFunction=g?"ease-out":"initial"),(0,l.Z)(v)&&(x.marginBottom=`${v}px`);let A={width:d(null!=(e=null==y?void 0:y.size)?e:8)},F=u(m),C=u(k),T=u(f),D="right"===S?"marginLeft":"marginRight";"right"===S&&(b.direction="rtl"),(0,n.Z)(F.textAlign)&&(F.textAlign="right"===S?"right":"left"),(0,n.Z)(C.textAlign)&&(C.textAlign="right"===S?"right":"left"),(0,n.Z)(T.textAlign)&&(T.textAlign="right"===S?"left":"right"),A[D]=d(null!=(i=y.spacing)?i:8),C[D]=d(null!=(a=k.spacing)?a:26),T[D]=d(null!=(r=f.spacing)?r:0);let w=Math.max(p(f),p(k));return x.lineHeight=w>0?`${w}px`:"20px",{panelPadding:M,row:x,panel:b,title:F,shape:A,key:C,value:T}})(t)}_updateDomStringByCol(t){var e;let{title:i={},content:a}=t,s=a&&a.length,r=this._domStyle.row,l=[...this._rootDom.children],n=l.find(t=>t.className.includes(g.bl)),o=l.find(t=>t.className.includes(g.BL));if(!n&&!1!==i.visible){n=document.createElement("h2");let t=document.createElement("span");n.appendChild(t),n.classList.add(g.bl),this._rootDom.firstChild?this._rootDom.insertBefore(n,this._rootDom.firstChild):this._rootDom.appendChild(n)}n&&!1!==i.visible?(c(n,Object.assign(Object.assign(Object.assign({},this._domStyle.title),s?r:{marginBottom:"0px"}),{marginTop:"0px"})),n.firstChild.innerHTML=`${null!=(e=i.value)?e:""}`):n&&!1===i.visible&&n.parentNode.removeChild(n);let h=["shape","key","value"];if(!o&&s&&(o=document.createElement("div"),h.forEach(t=>{let e=document.createElement("div");e.classList.add(`${g.lH}-column`),e.classList.add(`${g.lH}-${t}-column`),e.setAttribute("data-col",t),o.appendChild(e)}),o.classList.add(g.BL),this._rootDom.appendChild(o)),o&&s){let t=[...o.children];c(o,{whiteSpace:"nowrap"}),t.forEach((t,e)=>{let i=t.getAttribute("data-col");if(i&&h.includes(i)){let e="shape"===i&&a.every(t=>!t.hasShape||!t.shapeType);c(t,Object.assign(Object.assign({},this._domStyle[i]),{display:e?"none":"inline-block",verticalAlign:"top"}));let s=[...t.children];s.slice(a.length).forEach(t=>{t.parentNode.removeChild(t)}),a.forEach((e,l)=>{let n=s[l];n||((n=document.createElement("div")).classList.add(`${g.lH}-${i}`),t.appendChild(n));let o=Object.assign({},r);l===a.length-1&&(o.marginBottom="0px"),o.display=!1===e.visible?"none":"block",o.height="initial","key"===i?(n.innerHTML=(0,k.Nq)(e.key),e.keyStyle&&u(e.keyStyle,o)):"value"===i?(n.innerHTML=(0,k.Nq)(e.value),e.valueStyle&&u(e.valueStyle,o)):"shape"===i&&(n.innerHTML=function(t,e){var i,a,s,r,l,n;let o,h;if(!t||!t.hasShape||!t.shapeType)return"";let d='style="display:inline-block;vertical-align:middle;"',{shapeType:u,shapeStroke:p,shapeHollow:c=!1,shapeFill:g}=t,_=null!=(i=t.shapeSize)?i:8,m=t.shapeLineWidth?(0,k.r)(t.shapeLineWidth)+"px":"0px",y="currentColor",x=()=>p?(0,k.r)(p):y,A=t=>new f.m({symbolType:t,size:_,fill:!0}),F=A(u),C=F.getParsedPath();if(!C.path&&C.pathStr&&(F=A(C.pathStr)),F.getParsedPath().path){let t=F.getParsedPath().path;h=t.toString(),o=t.bounds}else C.isSvg&&C.svgCache&&(h=C.svgCache.map(t=>t.path.toString()).join(),o=C.svgCache.reduce((t,e)=>t.union(e.path.bounds),new S.YZ));let T=`${o.x1} ${o.y1} ${o.width()} ${o.height()}`;if("0px"!==m){let[t,e,i,a]=T.split(" ").map(t=>Number(t)),s=Number(m.slice(0,-2));T=`${t-s/2} ${e-s/2} ${i+s} ${a+s}`}let D=v.a.IsGradientStr(g);if(!g||(0,b.Z)(g)&&!D||c)return y=c?"none":g?(0,k.r)(g):"currentColor",`
    <svg ${d} width="${_}" height="${_}" viewBox="${T}">
      <path
        d="${h}"
        style="fill: ${y}; stroke: ${x()}; stroke-width: ${m}"
      >
      </path>
    </svg>`;let w=D?v.a.Parse(g):(0,M.Z)(g)?g:null;if(w){y="gradientColor"+(null!=e?e:"");let t="",i=(null!=(a=w.stops)?a:[]).map(t=>`<stop offset="${(0,k.r)(t.offset.toString())}" stop-color="${(0,k.r)(t.color)}"/>`).join("");return"radial"===w.gradient?t=`<radialGradient id="${y}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${i}
      </radialGradient>`:"linear"===w.gradient&&(t=`<linearGradient id="${y}" x1="${100*(null!=(s=w.x0)?s:0)}%" y1="${100*(null!=(r=w.y0)?r:0)}%" x2="${100*(null!=(l=w.x1)?l:0)}%" y2="${100*(null!=(n=w.y1)?n:0)}%">
      ${i}
      </linearGradient>`),`
    <svg ${d} width="${_}" height="${_}" viewBox="-0.5 -0.5 1 1">
      ${t}
      <path
        d="${h}"
        style="fill: url(#${y}); stroke: ${x()}; stroke-width: ${m}"
      >
      </path>
    </svg>`}return""}(e,`${this.id}_${l}`)),c(n,o)})}})}else o&&!s&&o.parentNode.removeChild(o)}_updateDomStyle(t="width",e){var i,a,r,l,n;let o=this._rootDom,d=[...o.children].find(t=>t.className.includes(g.BL)),u=[...o.children].find(t=>t.className.includes(g.bl));if(d){let o=this._component.getSpec(),p={},_=null==(i=o.style)?void 0:i.titleLabel;if(_&&_.autoWidth&&!1!==_.multiLine&&u){let e=[...d.children].reduce((e,i)=>"height"===t?e+i.getBoundingClientRect().width:Math.max(e,i.getBoundingClientRect().width),0);e>0&&(u.style.maxWidth=`${e}px`,u.style.maxWidth=`${Math.ceil(d.getBoundingClientRect().width)}px`)}if((0,s.Z)(null==(a=null==o?void 0:o.style)?void 0:a.maxContentHeight)){let t=u&&u.className.includes(g.bl)?u.getBoundingClientRect().height+(null!=(r=o.style.spaceRow)?r:0):0,e=this._chartOption.getChartViewRect(),i=(0,h.Mv)(o.style.maxContentHeight,Math.min(e.height,document.body.clientHeight)-t-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));i>0&&(p.maxHeight=`${i}px`,p.overflowY="auto",p.width=`calc(100% + ${this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px"})`,c(d,p))}let m=d.children,y=[];if(m){for(let i=0;i<m.length;i++){let a=null!=(l=m[i].children)?l:[];for(let i=0;i<a.length;i++){e&&(a[i].style[t]="initial");let s=a[i].getBoundingClientRect()[t];(void 0===y[i]||y[i]<s)&&(y[i]=s)}}for(let e=0;e<m.length;e++){let i=null!=(n=m[e].children)?n:[];for(let e=0;e<i.length;e++)i[e].style[t]=`${y[e]}px`}}}}_getParentElement(t){var e;return null!=(e=this._container)?e:super._getParentElement(t)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle(),this._rootDom&&c(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height",!1))}_updatePosition({x:t,y:e},i=!0){this._rootDom&&(this._rootDom.style.transform=`translate3d(${t}px, ${e}px, 0)`,i&&""!==this._rootDom.style.transition&&(this._rootDom.style.transition="",Object.assign(this._rootDom.style,this._domStyle.panel)))}}A.type=y.a.dom;let F=()=>{(0,m.D)(A)}},580739:function(t,e,i){i.d(e,{Nq:()=>o,r:()=>l,yZ:()=>n});var a=i(342279),s=i(591431),r=i(747005);function l(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}let n=(t,e)=>t?(e||(e=t.getBoundingClientRect()),t.offsetWidth>0?e.width/t.offsetWidth:t.offsetHeight>0?e.height/t.offsetHeight:1):1,o=t=>(0,a.Z)(t)&&""!==(null==t?void 0:t.trim())||(0,s.Z)(t)?l(t):r.s2},171624:function(t,e,i){i.d(e,{BQ:()=>o,dz:()=>n});var a=i(409194),s=i(976840),r=i(279090),l=i(642800);let n=()=>{(0,a.d)(),(0,l.oI)()},o=()=>{r.F.registerStageEventPlugin("gesture",s.o)}},32657:function(t,e,i){i.d(e,{m:()=>s});var a=i(22897);class s extends a.I{constructor(t){super(),this.globalInstance=t}onInit(){this._plugins.forEach(t=>{t.onInit&&t.onInit(this)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}},886956:function(t,e,i){i.d(e,{y:()=>c});var a=i(7234),s=i(971800),r=i(835151),l=i(777678),n=i(75464),o=i(663787),h=i(459338),d=i(237731),u=i(128893);class p extends u.T{_initTheme(t,e){return{spec:t,theme:this._theme}}}class c extends d.r{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(t){this._layout.maxWidth=t}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(t){this._layout.maxHeight=t}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return!0===this._spec.stackInverse}getStackSort(){return!0===this._spec.stackSort}constructor(t,e){var i;super(t,e),this.transformerConstructor=p,this.modelType="region",this.specKey="region",this.type=c.type,this._series=[],this.layoutType="region",this.layoutZIndex=o.Ai.Region,this.seriesDataFilterOver=()=>{this.event.emit(n.$7.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(t=>{t.getViewDataFilter()&&t.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=t.id,this.coordinate=null!=(i=t.coordinate)?i:"cartesian"}_getClipDefaultValue(){var t,e,i,a;let s=this._option.getChart().getSpec(),r=null==(e=null==(t=s.dataZoom)?void 0:t.some)?void 0:e.call(t,t=>{var e;return"axis"===(null!=(e=t.filterMode)?e:"filter")}),l=null==(a=null==(i=s.scrollBar)?void 0:i.some)?void 0:a.call(i,t=>{var e;return"axis"===(null!=(e=t.filterMode)?e:"axis")});return!(!r&&!l)||this._layout.layoutClip}created(){var t,e;this.initLayout(),super.created();let i=null!=(t=this._spec.clip)?t:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({interactive:!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",(null!=(e=this.userId)?e:this.type)+"_interaction",o.Ai.Interaction),(0,a.Z)(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"},{parent:this._groupMark}),i&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"},{parent:this._groupMark})),[this._backgroundMark,this._foregroundMark].forEach(t=>{t&&(t.created(),this.setMarkStyle(t,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",h.W.Built_In),this._groupMark.addMark(t))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:o.Ai.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:o.Ai.Mark+1}))}_createGroupMark(t,e,i){var a,s;let r=this._createMark({type:"group",name:t});r.setUserId(e),r.setMarkConfig({zIndex:i});let l=null!=(a=this._spec.clip)?a:this._getClipDefaultValue();return this.setMarkStyle(r,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:l},"normal",h.W.Built_In),this.setMarkStyle(r,{cornerRadius:null==(s=this._spec.style)?void 0:s.cornerRadius},"normal",h.W.User_Mark),this._marks.addMark(r),r}init(t){super.init(t),this.initMark(),this.initSeriesDataflow()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var t,e;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:+(null!=(t=this._spec.style)&&!!t.fill)},this._spec.style),"normal",h.W.User_Mark),(null!=(e=this._spec.clip)?e:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",h.W.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0,pickable:!1}),"normal",h.W.User_Mark)}_compareSpec(t,e){let i=super._compareSpec(t,e);return(0,s.X)(null==e?void 0:e.style,null==t?void 0:t.style)||(i.reMake=!0),i}reInit(t){super.reInit(t),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(t){t&&(this._series.includes(t)||this._series.push(t))}removeSeries(t){if(!t)return;let e=this._series.findIndex(e=>e===t);e>=0&&this._series.splice(e,1)}getSeries(t={}){return this._series.filter(e=>{var i,a;return(!t.name||(null==e?void 0:e.name)===t.name)&&(!t.userId||(0,r.IX)(t.userId).includes(e.userId))&&(!(0,l.Z)(t.specIndex)||(0,r.IX)(t.specIndex).includes(e.getSpecIndex()))&&(!t.id||e.id===t.id)&&(!t.type||e.type===t.type)&&(!t.coordinateType||e.coordinate===t.coordinateType)&&(!t.dataName||(null==(a=null==(i=e.getRawData)?void 0:i.call(e))?void 0:a.name)===t.dataName)})}getSeriesInName(t){return this.getSeries({name:t})[0]}getSeriesInUserId(t){return this.getSeries({userId:t})[0]}getSeriesInId(t){return this.getSeries({id:t})[0]}getSeriesInType(t){return this.getSeries({type:t})}getSeriesInCoordinateType(t){return this.getSeries({coordinateType:t})}getSeriesInDataName(t){return this.getSeries({dataName:t})}initSeriesDataflow(){let t=this._series.map(t=>{var e;return null!=(e=t.getViewDataFilter())?e:t.getViewData()}).filter(t=>!!t);this._option.dataSet.multipleDataViewAddListener(t,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}compileMarks(t){this.getMarks().forEach(e=>{e.compile({group:t,context:{model:this}})})}compile(){this.compileMarks()}onLayoutEnd(){this._series.forEach(t=>t.onLayoutEnd()),super.onLayoutEnd()}}c.type="region",c.transformerConstructor=p,c.specKey="region"},358639:function(t,e,i){i.d(e,{m:()=>r});var a=i(743601),s=i(981081);class r extends a.J{range(t){return t?(this._range=t,this._resetRange(),this):super.range()}domain(t){return t?(super.domain(t),this._resetRange(),this):super.domain()}_resetRange(){if(!(0,s.zE)(this._range))return void super.range(this._range);let t=(0,s._t)(this._range,this._domain);super.range(t)}}},763658:function(t,e,i){i.d(e,{r:()=>u});var a=i(933248),s=i(971800),r=i(576225),l=i(7234),n=i(459774),o=i(672796),h=i(841126),d=i(462940);class u{constructor(t,e){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=t=>{let e=[];return this._scaleSpecMap.forEach((i,a)=>{(0,h.S5)(i.domain)&&i.domain.forEach(a=>{a.dataId===t&&a.fields.forEach(t=>{(0,d.kL)(e,[{key:t,operations:(0,n.z2)(i.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((i,a)=>{let s=this.getScale(a);i.forEach(i=>{this._getSeriesBySeriesId(i.seriesId).getRawData().name===t&&i.field&&(0,d.kL)(e,[{key:i.field,operations:(0,n.z2)(s.type)?["max","min"]:["values"]}])})}),e},this._spec=t,this._chart=e,this._setAttrFromSpec()}_createFromSpec(t){if(!t.id)return null;let e=this._scaleMap.get(t.id);return e||(e="ordinal"===t.type&&"color"===t.id?(0,o.Mo)("colorOrdinal"):(0,o.Mo)(t.type)),e?((0,a.Z)(t.range)&&e.range(t.range),(0,a.Z)(t.domain)&&((0,h.S5)(t.domain)||e.domain(t.domain)),t.specified&&e.specified&&e.specified(t.specified),t.clamp&&e.clamp&&e.clamp(t.clamp),e):null}_setAttrFromSpec(){var t;if(!(null==(t=this._spec)?void 0:t.length))return;let e=new Map,i=new Map;this._spec.forEach(t=>{let a=this._createFromSpec(t);a&&(e.set(t.id,a),i.set(t.id,t))}),this._modelScaleSpecMap.forEach(t=>{let a=this._createFromSpec(t);a&&(e.set(t.id,a),i.set(t.id,t))}),this._scaleSpecMap=i,this._scaleMap=e}updateSpec(t){let e={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if((0,s.X)(t,this._spec))return e;e.change=!0;for(let i=0;i<t.length;i++){let a=t[i],r=this._scaleMap.get(a.id);if(!r)return e.reMake=!0,e;let l=this._spec.find(t=>t.id===a.id);if(!l.id||l.type!==a.type||!(0,s.X)(l.specified,a.specified))return e.reMake=!0,e;a.range&&!(0,s.X)(a.range,r.range())&&(r.range(a.range),e.reRender=!0),(0,h.S5)(a.domain)?e.reRender=!0:(0,s.X)(a.domain,r.domain())||(r.domain(a.domain),e.reRender=!0),this._scaleSpecMap.set(a.id,a)}return this._spec=t,e}registerModelScale(t){let e=this._createFromSpec(t);e&&(this._modelScaleSpecMap.set(t.id,t),this._scaleSpecMap.set(t.id,t),this._scaleMap.set(t.id,e))}removeModelScale(t){this._modelScaleSpecMap.forEach(e=>{t(e)&&(this._modelScaleSpecMap.delete(e.id),this._scaleSpecMap.delete(e.id),this._scaleMap.delete(e.id))})}getScale(t){return this._scaleMap.get(t)}getScaleSpec(t){return this._scaleSpecMap.get(t)}_getSeriesByRawDataId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let a=e[i];if(a.getRawData().name===t)return a}return null}_getSeriesBySeriesId(t){let e=this._chart.getAllSeries();for(let i=0;i<e.length;i++){let a=e[i];if(a.id===t)return a}return null}updateScaleDomain(t){this._scaleSpecMap.forEach((e,i)=>{let a,s=this._scaleMap.get(i);if(!s)return;if(!(0,h.S5)(e.domain))return e.domain&&0!==e.domain.length||s.domain(t),void this._updateMarkScale(i,s,s.domain().slice());a=(0,n.z2)(e.type)?[null,null]:new Set,e.domain.forEach(t=>{let i=this._getSeriesByRawDataId(t.dataId);if(!i)return;let s=(0,n.z2)(e.type);t.fields.forEach(t=>{let e=i.getRawDataStatisticsByField(t,s);e&&(s?((0,r.Z)(a[0])?a[0]=e.min:a[0]=Math.min(e.min,a[0]),(0,r.Z)(a[1])?a[1]=e.max:a[1]=Math.max(e.max,a[1])):e.values.forEach(t=>{a.add(t)}))})});let l=a;(0,n.z2)(e.type)||(a=Array.from(a)),s.domain(a),this._updateMarkScale(i,s,l)})}_updateMarkScale(t,e,i){let a=this._markAttributeScaleMap.get(t);a&&0!==a.length&&a.forEach(t=>{if(!t.field||!t.markScale||t.markScale===e)return;if((0,r.Z)(t.changeDomain)||"none"===t.changeDomain||(0,r.Z)(t.seriesId))return void((0,n.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i)));let a=this._getSeriesBySeriesId(t.seriesId),s=(0,n.z2)(e.type),o=a.getRawDataStatisticsByField(t.field,s);if(!(0,l.Z)(o))return"expand"===t.changeDomain?(s?(i[0]=Math.min(i[0],o.min),i[1]=Math.max(i[1],o.max)):(o.values.forEach(t=>{i.add(t)}),i=Array.from(i)),void t.markScale.domain(i)):void("replace"!==t.changeDomain||(s?t.markScale.domain([o.min,o.max]):t.markScale.domain(o.values)));(0,n.z2)(e.type)?t.markScale.domain(i):e.domain(Array.from(i))})}registerMarkAttributeScale(t,e){let i=this._scaleMap.get(t.scale),a=this._markAttributeScaleMap.get(t.scale);a||(a=[],this._markAttributeScaleMap.set(t.scale,a));let s=i;return!(0,r.Z)(t.field)&&((0,r.Z)(t.changeDomain)||"none"===t.changeDomain||(0,r.Z)(e))||(s=i.clone()),a.push(Object.assign(Object.assign({},t),{seriesId:e,markScale:s})),s}}},861318:function(t,e,i){i.d(e,{f:()=>P,w:()=>L});var a=i(933248),s=i(563554),r=i(206065),l=i(459338),n=i(672796),o=i(75387),h=i(800466),d=i(122487),u=i(790863),p=i(173294),c=i(757737),g=i(460038),_=i(434998),m=i(835151),y=i(777678);class k extends _.O{constructor(){super(...arguments),this._getSeriesStyle=(t,e,i)=>{var a,s,r,l;for(let i of(0,m.IX)(e)){let e=null==(a=this.series.getSeriesStyle(t))?void 0:a(i);if(!1!==e||"fill"!==i&&"stroke"!==i||(e="fill"===i?null==(r=null==(s=this.series.getSeriesStyle(t))?void 0:s("stroke"))?void 0:r[0]:null==(l=this.series.getSeriesStyle(t))?void 0:l("fill")),(0,y.Z)(e))return e}return i}}}var f=i(938873),v=i(279090),S=i(642800),b=i(14536),M=i(522269);class x extends b.n{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){var e,i,a;let s=!1!==(null==(e=t.point)?void 0:e.visible)&&!1!==(null==(a=null==(i=t.point)?void 0:i.style)?void 0:a.visible);this._addMarkLabelSpec(t,t=>{let e="inside-middle"===t.position;return!s||e?"area":"point"}),this._addMarkLabelSpec(t,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)}_transformSpecAfterMergingTheme(t,e,i){var a,s,r,l,n;super._transformSpecAfterMergingTheme(t,e,i);let{area:o={},line:h={},seriesMark:d}=t,u=!1!==o.visible&&!1!==(null==(a=o.style)?void 0:a.visible),p=!1!==h.visible&&!1!==(null==(s=h.style)?void 0:s.visible);o.support3d=!(!o.support3d&&!h.support3d),o.zIndex=(0,y.Z)(o.zIndex)||(0,y.Z)(h.zIndex)?Math.max(null!=(r=o.zIndex)?r:0,null!=(l=h.zIndex)?l:0):void 0,o.style&&delete o.style.stroke,o.state&&Object.keys(o.state).forEach(t=>{"style"in o.state[t]?delete o.state[t].style.stroke:delete o.state[t].stroke});let c=o,g=h;("line"===d||p&&!u)&&(c=h,g=o),o.style=(0,M.H)({},g.style,c.style),o.state=(0,M.H)({},g.state,c.state),!1===o.interactive&&(o.style.fillPickable=!1),!1===h.interactive&&(h.style.strokePickable=!1),o.interactive=!(!o.interactive&&null!=(n=h.interactive)&&!n),t.area=o,t.line=h}}var A=i(846070),F=i(519636),C=i(711805),T=i(241854),D=i(349282),w=i(453429);class P extends r.i{constructor(){super(...arguments),this.type=o.A.area,this.transformerConstructor=x,this._sortDataByAxis=!1}initMark(){var t;let e=null!=(t=this._spec.seriesMark)?t:"area",i=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(P.mark.area,{groupKey:this._seriesField,isSeriesMark:i&&"point"!==e},{morphElementKey:this.getDimensionField()[0]}),this.initSymbolMark("point"===e)}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var t,e,i,a,s;let r=null!=(i=null==(e=null==(t=this.getSpec().area)?void 0:t.style)?void 0:e.curveType)?i:null==(s=null==(a=this.getSpec().line)?void 0:a.style)?void 0:s.curveType,o=r===u.l?"horizontal"===this._direction?"monotoneY":"monotoneX":r,h=this._areaMark;if(h){let t=this._isAreaVisible(),e=this._isLineVisible();t||e?h.setVisible(!0):h.setVisible(!1),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:t=>{var e,i;return(0,n.Ol)(this.dataToPositionX1(t),null==(i=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),y1:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",l.W.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:this.dataToPositionX.bind(this),y1:t=>{var e,i;return(0,n.Ol)(this.dataToPositionY1(t),null==(i=null==(e=this._yAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",l.W.Series),this.setMarkStyle(h,{fill:!!t&&this.getColorAttribute(),stroke:!!e&&this.getColorAttribute()},"normal",l.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(h,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",l.W.Series),this.getStack()&&this.setMarkStyle(h,{zIndex:t=>-t[T.Uq]},"normal",l.W.Series),this.setMarkStyle(h,{curveType:o},"normal",l.W.Built_In),Object.keys(h.stateStyle).forEach(t=>{h.stateStyle[t].stroke&&h.setPostProcess("stroke",t=>[t,!1,!1,!1],t)})}}initAnimation(){var t,e,i,a;let s={direction:this.direction},r=null==(t=this._spec.animationAppear)?void 0:t.preset;if(this._lineMark&&this._lineMark.setAnimationConfig((0,d._8)(null==(e=v.F.getAnimationInKey("line"))?void 0:e(s,r),(0,d.hT)("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig((0,d._8)(null==(i=v.F.getAnimationInKey("area"))?void 0:i(s,r),(0,d.hT)("area",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,A.mh)(this);this._symbolMark.setAnimationConfig((0,d._8)(null==(a=v.F.getAnimationInKey("scaleInOut"))?void 0:a(),(0,d.hT)("point",this._spec,this._markAttributeContext),t))}}_isAreaVisible(){var t;let e=this._spec.area||{};return!1!==e.visible&&!1!==(null==(t=e.style)?void 0:t.visible)}_isLineVisible(){var t;let e=this._spec.line||{};return!1!==e.visible&&!1!==(null==(t=e.style)?void 0:t.visible)}initTooltip(){this._tooltipHelper=new k(this);let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._areaMark&&t.add(this._areaMark),this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(t){return e=>{var i,s,r,l,n;let o=null!=(i=this._spec.seriesMark)?i:"area",h=null!=(r=null==(s=this._seriesMark)?void 0:s.getAttribute(e,t))?r:void 0;return"fill"!==e||h&&"line"!==o||(e="stroke",h=null!=(n=null==(l=this._seriesMark)?void 0:l.getAttribute(e,t))?n:void 0),"stroke"===e&&(0,a.Z)(h)?h[0]:h}}}P.type=o.A.area,P.builtInTheme={area:{label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"}},P.mark=f.y,P.transformerConstructor=x,(0,h.jB)(P,s.t);let L=()=>{(0,w.k)(),(0,D.Tq)(),(0,p.i)(),(0,c.k)(),(0,g.O)(),(0,S.zC)(),(0,S.rt)(),(0,S.BV)(),(0,F.N)(),(0,C.E)(),v.F.registerSeries(P.type,P)}},938873:function(t,e,i){i.d(e,{y:()=>r});var a=i(268278),s=i(107548);let r=Object.assign(Object.assign(Object.assign({},a.UI),s.j),{area:{name:"area",type:"area"}})},506219:function(t,e,i){i.d(e,{$t:()=>l,TW:()=>r,rU:()=>h});var a=i(279090);function s(t,e=!0){return(i,a,s)=>{let r="vertical"===t.direction?t.yField:t.xField,l=null==i?void 0:i[r];return"vertical"===t.direction?{overall:e?t.growFrom():e,orient:l>0?"negative":"positive"}:{overall:!!e&&t.growFrom(),orient:l>0?"positive":"negative"}}}let r=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:s(t,e)}),l=(t,e=!0)=>({type:"horizontal"===t.direction?"growWidthOut":"growHeightOut",options:s(t,e)}),n={type:"fadeIn"},o={type:"growCenterIn"},h=()=>{a.F.registerAnimation("bar",(t,e)=>({appear:function(t,e){if(!1===e)return{};switch(e){case"fadeIn":return n;case"scaleIn":return o;default:return r(t)}}(t,e),enter:r(t,!1),exit:l(t,!1),disappear:l(t)}))}},695630:function(t,e,i){i.d(e,{w:()=>s});var a=i(306474);class s extends a.G{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar")}}},954594:function(t,e,i){i.d(e,{QG:()=>E,QD:()=>I});var a=i(459774),s=i(206065),r=i(241854),l=i(459338),n=i(672796),o=i(462940),h=i(505441),d=i(506219),u=i(122487),p=i(75387),c=i(267953),g=i(576225),_=i(777678),m=i(896294),y=i(835151),k=i(202676);function f(t,e,i,a,s,r){let l=i.getSpec().barMinHeight,o=i[a.axisHelper].isInverse(),h=(0,n.Ol)(i[a.startMethod](t),s),d=(0,n.Ol)(i[a.endMethod](t),s);r&&(e=h);let u=Math.abs(h-d);u<l&&(u=l);let p=1;return d<h?p=-1:d===h&&(p=a.isVertical?o?1:-1:o?-1:1),d=e+p*u,t[a.start]=e,t[a.end]=d,d}var v=i(279090),S=i(924706),b=i(102094),M=i(766410),x=i(369643),A=i(846070),F=i(695630),C=i(72754),T=i(268278),D=i(312555),w=i(519636),P=i(711805),L=i(687404),R=i(453429);class E extends s.i{constructor(){super(...arguments),this.type=p.A.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=F.w,this._bandPosition=0,this._getLinearBarRange=(t,e)=>{let[i,a]=[t,e].sort((t,e)=>t-e),s=a-i;if(this._spec.barGap){let t=.5*this._spec.barGap;i+=t,a-=t}let r=a-i,l=(0,h.uj)(this._spec.barMinWidth||2,s);if(r<l){let t=(l-r)/2;i-=t,a+=t}return[i,a]},this._getBarXStart=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[T.DO]):this._spec.barMinHeight?this._calculateRectPosition(t,!1,i):(0,n.Ol)(this._dataToPosX(t),e,i),this._getBarXEnd=(t,e,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),t[T.V0]):(0,n.Ol)(this._dataToPosX1(t),e,i),this._getLinearBarXRange=(t,e,i)=>{let a=(0,n.Ol)(this._dataToPosX(t),e,i),s=(0,n.Ol)(this._dataToPosX1(t),e,i);return this._getLinearBarRange(a,s)},this._getBarYStart=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[T.aS]):this._spec.barMinHeight?this._calculateRectPosition(t,!0):(0,n.Ol)(this._dataToPosY(t),e),this._getBarYEnd=(t,e)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),t[T.Aj]):(0,n.Ol)(this._dataToPosY1(t),e),this._getLinearBarYRange=(t,e,i)=>{let a=(0,n.Ol)(this._dataToPosY(t),e,i),s=(0,n.Ol)(this._dataToPosY1(t),e,i);return this._getLinearBarRange(a,s)},this._getBarBackgroundXStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundXEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundYStart=t=>{let e=t.range();return Math.min(e[0],e[e.length-1])},this._getBarBackgroundYEnd=t=>{let e=t.range();return Math.max(e[0],e[e.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var t;return null==(t=this._barBackgroundPositionXEncoder)?void 0:t.bind(this)},this._setBarBackgroundPositionXEncoder=t=>{this._barBackgroundPositionXEncoder=t.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var t;return null==(t=this._barBackgroundPositionYEncoder)?void 0:t.bind(this)},this._setBarBackgroundPositionYEncoder=t=>{this._barBackgroundPositionYEncoder=t.bind(this)}}initMark(){this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},E.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0],morph:(0,u.yx)(this._spec,this._barMarkName)})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(E.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId()}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",l.W.Series)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();let{mark:t,group:e}=this._tooltipHelper.activeTriggerSet;this._barMark&&(t.add(this._barMark),e.add(this._barMark))}_statisticViewData(){var t,e;let i;super._statisticViewData();let a=null!=(t=this._spec.barBackground)?t:{};if(!a.visible)return;let s=this._getRelatedComponentSpecInfo("axes").some(t=>t.type===C.L.cartesianBandAxis);if((0,S.U)(this._option.dataSet,"addVChartProperty",M.E),s)(0,S.U)(this._option.dataSet,"dimensionItems",([t],{scaleDepth:e})=>{var i,a;let s=[{}],l=this.getDimensionField(),n=(0,g.Z)(e)?l.length:Math.min(l.length,e);for(let e=0;e<n;e++){let n=l[e],o=null==(i=t.latestData[n])?void 0:i.values;if(!(null==o?void 0:o.length))continue;let h=[],d=null!=(a=this._spec.dataKey)?a:r.XW;for(let t=0;t<o.length;t++)for(let e=0;e<s.length;e++)h.push(Object.assign(Object.assign({},s[e]),{[n]:o[t],[d]:o[t]}));s=h}return s}),i=new b.V(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:(0,g.Z)(a.fieldLevel)?void 0:a.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:x.cJ.bind(this),call:x.CL}},!1),null==(e=this._viewDataStatistics)||e.target.addListener("change",i.reRunAllTransform);else{(0,S.U)(this._option.dataSet,"dimensionItems",([e])=>{let i=[],[a,s]=this.getDimensionContinuousField(),r={};return t.latestData.forEach(t=>{let e=`${t[a]}-${t[s]}`;r[e]||(r[e]={[a]:t[a],[s]:t[s]},i.push(r[e]))}),i});let t=this.getViewData();i=new b.V(this._option.dataSet).parse([t],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:x.cJ.bind(this),call:x.CL}},!1),null==t||t.target.addListener("change",i.reRunAllTransform)}this._barBackgroundViewData=new L.O(this._option,i)}init(t){var e,i;super.init(t),"vertical"===this.direction?"band"===(null==(e=this._xAxisHelper)?void 0:e.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null==(i=this._yAxisHelper)?void 0:i.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){let t=this.getRegion();return this.getStack()&&t.getSeries().filter(t=>t.type===this.type&&t.getSpec().barMinHeight).length}_calculateStackRectPosition(t){let e,i,a,s,r,l=this.getRegion();if(l._bar_series_position_calculated)return;l._bar_series_position_calculated=!0,t?(e=T.Aj,i=T.aS,a="_dataToPosY1",s="_dataToPosY",r="_yAxisHelper"):(e=T.V0,i=T.DO,a="_dataToPosX1",s="_dataToPosX",r="_xAxisHelper");let n=(0,o.oW)(l,!1,t=>t.type===this.type);for(let o in n)for(let h in n[o].nodes)!function t(e,i,a){var s,r;if(e.values.length>0){let t;if(e.sortDatums.length){let l=e.sortDatums;i&&(l=e.sortDatums.slice().reverse());for(let e=0;e<l.length;e++)t=f(l[e].datum,t,l[e].series,a,null==(r=(s=l[e].series[a.axisHelper]).getScale)?void 0:r.call(s,0),0===e)}else{let s=e.series;i&&(s=s.slice().reverse()),s.forEach(({s:e,values:s},r)=>{var l,n;let o=null==(n=(l=e[a.axisHelper]).getScale)?void 0:n.call(l,0);for(let l=0;l<s.length;l++)t=f(s[i?s.length-1-l:l],t,e,a,o,0===l&&0===r)})}}for(let s in e.nodes)t(e.nodes[s],i,a)}(n[o].nodes[h],l.getStackInverse(),{isVertical:t,start:e,end:i,startMethod:a,endMethod:s,axisHelper:r})}_calculateRectPosition(t,e,i){var a,s;let r,l,o;e?(r="_dataToPosY1",l="_dataToPosY",o="_yAxisHelper"):(r="_dataToPosX1",l="_dataToPosX",o="_xAxisHelper");let h=null==(s=(a=this[o]).getScale)?void 0:s.call(a,0),d=this[o].isInverse(),u=this._spec.barMinHeight,p=(0,n.Ol)(this[r](t),h,i),c=(0,n.Ol)(this[l](t),h,i),g=Math.abs(p-c);g<u&&(g=u);let _=1;return c<p?_=-1:c===p&&(_=e?d?1:-1:d?-1:1),p+_*g}_dataToPosX(t){return this.dataToPositionX(t)}_dataToPosX1(t){return this.dataToPositionX1(t)}_dataToPosY(t){return this.dataToPositionY(t)}_dataToPosY1(t){return this.dataToPositionY1(t)}initBandRectMarkStyle(){var t,e,i,a;let s=null==(e=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:e.call(t,0),r=null==(a=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:a.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{x:t=>this._getBarXStart(t,s),x1:t=>this._getBarXEnd(t,s),y:t=>this._getPosition(this.direction,t),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",l.W.Series):this.setMarkStyle(this._barMark,{y:t=>this._getBarYStart(t,r),y1:t=>this._getBarYEnd(t,r),x:t=>this._getPosition(this.direction,t),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",l.W.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var t,e,i,a;if(!this._spec.stackCornerRadius)return;let s=null==(e=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:e.call(t,0),l=null==(a=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:a.call(i,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{let t=[];return this._forEachStackGroup(e=>{let i=1/0,a=-1/0,n=!1,o=1/0,h=-1/0;e.values.forEach(t=>{let e=t[r.cQ],s=t[r.Uq],l=t[r.x0],d=t[r.fB];i=Math.min(i,e,s),a=Math.max(a,e,s),(0,_.Z)(l)&&(0,_.Z)(d)&&(n=!0,o=Math.min(o,l,d),h=Math.max(h,l,d))});let d=Object.assign(Object.assign(Object.assign({},e.values[0]),{[r.cQ]:i,[r.Uq]:a}),n?{[r.x0]:o,[r.fB]:h}:void 0),u="horizontal"===this.direction?{x:this._getBarXStart(d,s),x1:this._getBarXEnd(d,s),y:this._getPosition(this.direction,d),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(d,l),y1:this._getBarYEnd(d,l),x:this._getPosition(this.direction,d),width:this._getBarWidth(this._xAxisHelper)};t.push((0,D.f)(Object.assign(Object.assign({},u),{cornerRadius:(0,m.Z)(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(u,d,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),t}})}initLinearRectMarkStyle(){var t,e,i,a;let s=null==(e=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:e.call(t,0),r=null==(a=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:a.call(i,0);if("horizontal"===this.direction){let t=(0,_.Z)(this._fieldY2)?{y:t=>this._getLinearBarYRange(t,r,!0)[0],y1:t=>this._getLinearBarYRange(t,r,!0)[1]}:{y:t=>(0,n.Ol)(this._dataToPosY(t)-this._getBarWidth(this._yAxisHelper)/2,r,!0),height:t=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:t=>this._getBarXStart(t,s,!0),x1:t=>this._getBarXEnd(t,s,!0)},t),"normal",l.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(s),x1:()=>this._getBarBackgroundXEnd(s)},t),"normal",l.W.Series)}else{let t=(0,_.Z)(this._fieldX2)?{x:t=>this._getLinearBarXRange(t,s,!0)[0],x1:t=>this._getLinearBarXRange(t,s,!0)[1]}:{x:t=>(0,n.Ol)(this._dataToPosX(t)-this._getBarWidth(this._xAxisHelper)/2,s,!0),width:t=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},t),{y:t=>this._getBarYStart(t,r),y1:t=>this._getBarYEnd(t,r)}),"normal",l.W.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},t),{y:()=>this._getBarBackgroundYStart(r),y1:()=>this._getBarBackgroundYEnd(r)}),"normal",l.W.Series)}}_initBandBarBackgroundMarkStyle(){var t,e,i,a,s;if(!this._barBackgroundMark)return;let r=null==(e=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:e.call(t,0),n=null==(a=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:a.call(i,0),o=null!=(s=this._spec.barBackground)?s:{},h=(0,g.Z)(o.fieldLevel)?void 0:o.fieldLevel+1;"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(r),x1:()=>this._getBarBackgroundXEnd(r),y:t=>this._getPosition(this.direction,t,h,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,h),width:()=>{},y1:()=>{}},"normal",l.W.Series):this.setMarkStyle(this._barBackgroundMark,{x:t=>this._getPosition(this.direction,t,h,"barBackground"),y:()=>this._getBarBackgroundYStart(n),y1:()=>this._getBarBackgroundYEnd(n),width:()=>this._getBarWidth(this._xAxisHelper,h),x1:()=>{},height:()=>{}},"normal",l.W.Series)}initAnimation(){var t,e;let i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var t;let e="horizontal"===this.direction?null==(t=this._xAxisHelper)?void 0:t.getScale(0):this._yAxisHelper.getScale(0);if(e){let t=e.domain(),i=(0,y.iH)(t),a=(0,y.CE)(t);return a<0?e.scale(a):i>0?e.scale(i):e.scale(0)}}},a=null==(t=this._spec.animationAppear)?void 0:t.preset,s=(0,A.mh)(this);this._barMark.setAnimationConfig((0,u._8)(null==(e=v.F.getAnimationInKey("bar"))?void 0:e(i,a),(0,u.hT)(this._barMarkName,this._spec,this._markAttributeContext),s))}_getBarWidth(t,e){var i,a;let s=this._groups?this._groups.fields.length:1,r=(0,g.Z)(e)?s:Math.min(s,e),l=null!=(a=null==(i=t.getBandwidth)?void 0:i.call(t,r-1))?a:6,n=(0,_.Z)(this._spec.barWidth)&&r===s,o=(0,_.Z)(this._spec.barMinWidth),d=(0,_.Z)(this._spec.barMaxWidth),u=l;return n&&(u=(0,h.uj)(this._spec.barWidth,l)),o&&(u=Math.max(u,(0,h.uj)(this._spec.barMinWidth,l))),d&&(u=Math.min(u,(0,h.uj)(this._spec.barMaxWidth,l))),u}_getPosition(t,e,i,s){var r,l,n,o,d;let u,p,c;"horizontal"===t?(u=this.getYAxisHelper(),p="height",c="barBackground"===s?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(u=this.getXAxisHelper(),p="width",c="barBackground"===s?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));let m=u.getScale(0),k=this._groups?this._groups.fields.length:1,f=(0,g.Z)(i)?k:Math.min(k,i),v=null!=(l=null==(r=u.getBandwidth)?void 0:r.call(u,f-1))?l:6,S=f===k?this._barMark.getAttribute(p,e):v;if(f>1&&(0,_.Z)(this._spec.barGapInGroup)){let t=this._groups.fields,i=(0,y.IX)(this._spec.barGapInGroup),a=0,s=0;for(let r=t.length-1;r>=1;r--){let l=t[r],p=null!=(o=null==(n=u.getScale(r))?void 0:n.domain())?o:[],c=p.length,g=(0,h.uj)(null!=(d=i[r-1])?d:(0,y.Z$)(i),v),_=p.indexOf(e[l]);r===t.length-1?(a+=c*S+(c-1)*g,s+=_*(S+g)):(s+=_*(a+g),a+=a+(c-1)*g)}return m.scale(e[t[0]])+u.getBandwidth(0)/2-a/2+s}let b=(0,a.z2)(m.type||"band");return c(e,f)+.5*(v-S)+(b?-v/2:0)}dataToBarBackgroundPositionX(t,e){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,e,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(t,e){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,e,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(){super.onLayoutEnd(),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}onDataUpdate(){super.onDataUpdate(),this.getRegion()._bar_series_position_calculated=!1}compile(){if(super.compile(),this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=this._fieldY,a=this._fieldX;this._data.setTransform([{type:"sampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?a[0]:i[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var t;super.compileData(),null==(t=this._barBackgroundViewData)||t.compile()}fillData(){var t,e;super.fillData(),null==(e=null==(t=this._barBackgroundViewData)?void 0:t.getDataView())||e.reRunAllTransform()}viewDataUpdate(t){var e,i,a;super.viewDataUpdate(t),null==(i=null==(e=this._barBackgroundViewData)?void 0:e.getDataView())||i.reRunAllTransform(),null==(a=this._barBackgroundViewData)||a.updateData()}release(){var t;super.release(),null==(t=this._barBackgroundViewData)||t.release(),this._barBackgroundViewData=null}}E.type=p.A.bar,E.builtInTheme={bar:{label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}}},E.mark=k.w,E.transformerConstructor=F.w;let I=()=>{(0,R.k)(),(0,c.Y)(),(0,d.rU)(),(0,w.N)(),(0,P.E)(),v.F.registerSeries(E.type,E)}},202676:function(t,e,i){i.d(e,{w:()=>a});let a=Object.assign(Object.assign({},i(268278).UI),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}})},306474:function(t,e,i){i.d(e,{G:()=>_});var a=i(557999),s=i(576225),r=i(896294),l=i(521107),n=i(128893),o=i(835151),h=i(826268),d=i(777678),u=i(933248),p=i(522269),c=i(550853),g=i(279090);class _ extends n.T{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(t){return this.markLabelSpec[t]}setLabelSpec(t,e){this.markLabelSpec[t]=(0,o.IX)(e)}addLabelSpec(t,e,i=!1){this.markLabelSpec[t]||(this.markLabelSpec[t]=[]),i?this.markLabelSpec[t].unshift(e):this.markLabelSpec[t].push(e)}getTheme(t,e){var i,a,s;let r=(0,c.V)(t),l=null==(i=this._option)?void 0:i.getTheme,n=this._option.type,o=g.F.getSeriesMarkMap(n)?(0,h.sj)(l("series",n),n,l):{},d=l("series",`${n}_${r}`),u=(null!=(s=null!=(a=this.stack)?a:null==d?void 0:d.stack)?s:null==o?void 0:o.stack)?l("series",`${n}_stack`):void 0;return(0,p.H)({},o,d,u)}transformSpec(t,e,i){this._transformStack(t);let a=super.transformSpec(t,e,i);return this._transformLabelSpec(a.spec),Object.assign(Object.assign({},a),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(t){}_transformStack(t){(0,a.Z)(t.stack)&&(this.stack=t.stack),(0,a.Z)(t.percent)&&(this.stack=t.percent||this.stack),(0,s.Z)(this.stack)&&this._supportStack&&t.seriesField&&(this.stack=!0)}_addMarkLabelSpec(t,e,i="label",a="initLabelMarkStyle",s=!0,l){t&&(0,o.IX)(t[i]).forEach(i=>{var n,o,h;if(i&&i.visible){let{animation:d=!0,animationUpdate:u=!0,animationEnter:p=!0,animationExit:c=!0}=i,{animationUpdate:g=!0,animationEnter:_=!0,animationExit:m=!0}=t,y=!!(null!=(h=null!=(o=null==(n=this._option.globalInstance)?void 0:n.isAnimationEnable())?o:t.animation)?h:i.animation)&&!!s;this.addLabelSpec((0,r.Z)(e)?e(i):e,Object.assign(Object.assign({},i),{animation:!!y&&d,animationUpdate:!!(y&&g&&u)&&g,animationEnter:!!(y&&_&&p)&&_,animationExit:!!(y&&_&&c)&&m,getStyleHandler:t=>{var e;return null==(e=t[a])?void 0:e.bind(t)}}),l)}})}_getDefaultSpecFromChart(t){var e;let i=null!=(e=super._getDefaultSpecFromChart(t))?e:{},{outerRadius:a,innerRadius:s,direction:r}=t;return(0,d.Z)(a)&&(i.outerRadius=a),(0,d.Z)(s)&&(i.innerRadius=s),(0,d.Z)(r)&&(i.direction=r),Object.keys(i).length>0?i:void 0}_mergeThemeToSpec(t,e){let i=this._theme;if(this._shouldMergeThemeToSpec()){let a=this._getDefaultSpecFromChart(e),s=t=>{let e=(0,p.H)({},i,a,t),s=i.label;return s&&(0,l.Z)(s)&&(0,u.Z)(e.label)&&(e.label=e.label.map(t=>(0,p.H)({},s,t))),e};return(0,u.Z)(t)?{spec:t.map(t=>s(t)),theme:i}:{spec:s(t),theme:i}}return{spec:t,theme:i}}}},504681:function(t,e,i){i.d(e,{y:()=>Z});var a=i(75464),s=i(241854),r=i(459338),l=i(145004),n=i(102094),o=i(595075),h=i(586673),d=i(462940),u=i(841126),p=i(522269),c=i(766410),g=i(924706),_=i(434998),m=i(558595),y=i(23642),k=i(981081),f=i(369643),v=i(64510),S=i(777678),b=i(576225),M=i(835151),x=i(27203),A=i(342279),F=i(933248),C=i(896294),T=i(557999),D=i(521107),w=i(971800),P=i(50026),L=i(358639),R=i(268278),E=i(122487),I=i(306474),O=i(507281),H=i(663787),B=i(687404),V=i(815945);class Z extends o.g{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var t;return null==(t=this._data)?void 0:t.getDataView()}getViewDataProductId(){var t;return null==(t=this._data)?void 0:t.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(t){(0,S.Z)(t)&&(this._seriesField=t)}getGroups(){return this._groups}getStack(){var t;return null==(t=this.getSpecInfo())?void 0:t.stack}getStackValue(){var t;return null!=(t=this._spec.stackValue)?t:`${l.Bq}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(t){var e;this._invalidType=t,null==(e=this.getViewData())||e.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(t,e){var i;super(t,e),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=I.G,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var t,e;return{width:null!=(t=this._layoutRect.width)?t:this._region.getLayoutRect().width,height:null!=(e=this._layoutRect.height)?e:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=H.Ai.SeriesGroup,this._invalidType="break",this._region=e.region,this._dataSet=e.dataSet,(null==(i=this._spec)?void 0:i.name)&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(a.$7.afterInitData,{model:this}),this.initRootMark(),this.initMark();let t=(0,E.sB)(this);this._initExtensionMark({hasAnimation:t}),this.initMarkStyle(),this.initMarkState(),t&&this.initAnimation(),this.afterInitMark(),this.initEvent(),this.event.emit(a.$7.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(t,e)=>{var i;return null==(i=this._option.globalScale.getScale(t))?void 0:i.scale(e)},seriesColor:t=>{var e;return(0,b.Z)(t)&&(t=this.getSeriesKeys()[0]),null==(e=this._option.globalScale.getScale("color"))?void 0:e.scale(t)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),(0,S.Z)(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var t,e;"zero"===this._invalidType&&(null==(t=this._rawData)?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"invalidTravel",y.U),null==(e=this._rawData)||e.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var t,e,i;let a=null!=(t=this._spec.data)?t:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(a&&(this._rawData=(0,h.J3)(a,this._dataSet,this._option.sourceDataList)),null==(i=null==(e=this._rawData)?void 0:e.target)||i.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=(0,h.uj)(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));let t=(0,h.uj)(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new B.O(this._option,t),this.getStack()&&this._viewDataFilter.target.removeListener("change",t.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){let t=this.getGroupFields();t&&t.length&&(this._groups={fields:t})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(t,e){var i,a,s;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]||e&&((0,b.Z)(this._rawStatisticsCache[t].min)||(0,b.Z)(this._rawStatisticsCache[t].max))||!e&&(0,b.Z)(this._rawStatisticsCache[t].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null==(i=this._viewDataStatistics.latestData)?void 0:i[t]))this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t];else if(this._rawData){let i=null==(a=this._rawData.getFields())?void 0:a[t];if(i&&i.lockStatisticsByDomain&&i.domain)this._rawStatisticsCache[t]={},e?(this._rawStatisticsCache[t].min=(0,M.iH)(i.domain),this._rawStatisticsCache[t].max=(0,M.CE)(i.domain)):this._rawStatisticsCache[t].values=i.domain;else{let i=(0,m.Z)(this._rawData.latestData,[{key:t,operations:e?["min","max"]:["values"]}])[t];this._rawStatisticsCache[t]=(0,x.Z)(null!=(s=this._rawStatisticsCache[t])?s:{},i)}}}return this._rawStatisticsCache[t]}_statisticViewData(){(0,g.U)(this._dataSet,"dimensionStatistics",m.T);let t=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new n.V(this._dataSet,{name:t}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{let t=this.getStatisticFields();return this._seriesField&&(0,d.kL)(t,[{key:this._seriesField,operations:["values"]}]),t},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(t,e,i){(0,g.U)(this._dataSet,"dimensionStatistics",m.T);let a=new n.V(this._dataSet,{name:t});return a.parse([e],{type:"dataview"}),a.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var t;let a=(0,d.kL)(this.getStatisticFields(),null!=(t=null==i?void 0:i(e.name))?t:[]);return this._seriesField&&(0,d.kL)(a,[{key:this._seriesField,operations:["values"]}]),a},target:"latest"}},!1),a}createdStackData(){let t=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new n.V(this._dataSet,{name:t}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(t,e){return e}generateDefaultDataKey(t){var e;return(0,b.Z)(t)?(t,e,i)=>{if(!1===this._spec.animation){let i=this._noAnimationDataKey(t,e);if(void 0!==i)return i}let{keyMap:a}=i,s=this._getSeriesDataKey(t);return void 0===a.get(s)?(a.set(s,0),s):(a.set(s,a.get(s)+1),`${s}_${a.get(s)}`)}:(0,A.Z)(t)?e=>e[t]:(0,F.Z)(t)&&t.every(t=>(0,A.Z)(t))?e=>t.map(t=>e[t]).join("-"):(0,C.Z)(t)?(e,i)=>t(e,i):(null==(e=this._option)||e.onError(`invalid dataKey: ${t}`),(t,e)=>{})}_addDataIndexAndKey(){var t;(null==(t=this._rawData)?void 0:t.dataSet)&&((0,g.U)(this._rawData.dataSet,"addVChartProperty",c.E),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:f.cJ.bind(this),call:f.CL}},!1))}updateRawData(t){this._rawData&&this._rawData.updateRawData(t)}rawDataUpdate(t){var e;null==(e=this._rawDataStatistics)||e.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(a.$7.rawDataUpdate,{model:this})}viewDataFilterOver(t){this.event.emit(a.$7.viewDataFilterOver,{model:this})}viewDataUpdate(t){var e;this.event.emit(a.$7.viewDataUpdate,{model:this}),null==(e=this._data)||e.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(t){this.event.emit(a.$7.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(t,e){return!t||(0,b.Z)(e)?null:t[e]}getDatumPositionValues(t,e){return!t||(0,b.Z)(e)?[]:(0,A.Z)(e)?[t[e]]:e.map(e=>t[e])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var t,e,i;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:null==(e=(t=this._region).getGroupMark)?void 0:e.call(t),dataView:!1}),this._rootMark.setMarkConfig({zIndex:null!=(i=this._spec.zIndex)?i:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(t){var e;this._spec.extensionMark&&(null==(e=this._spec.extensionMark)||e.forEach((e,i)=>{this._createExtensionMark(e,null,this._getExtensionMarkNamePrefix(),i,t)}))}_createExtensionMark(t,e,i,a,s){var r;let l=this._createMark({type:t.type,name:(0,S.Z)(t.name)?`${t.name}`:`${i}_${a}`},{skipBeforeLayouted:!0,markSpec:t,parent:e,dataView:!1,componentType:t.componentType,key:t.dataKey});if(l){if((0,S.Z)(t.id)&&l.setUserId(t.id),s.hasAnimation){let e=(0,E._8)({},(0,E.hT)(t.type,t,this._markAttributeContext));l.setAnimationConfig(e)}if("group"===t.type)i=`${i}_${a}`,null==(r=t.children)||r.forEach((t,e)=>{this._createExtensionMark(t,l,i,e,s)});else if(!(e||(0,b.Z)(t.dataId)&&(0,b.Z)(t.dataIndex))){let e=this._option.getSeriesData(t.dataId,t.dataIndex);e===this._rawData?l.setData(this._data):(l.setDataView(e),e.target.addListener("change",()=>{l.getData().updateData()}))}}}_updateExtensionMarkSpec(){var t;null==(t=this._spec.extensionMark)||t.forEach((t,e)=>{let i=this._marks.getMarkWithInfo({name:(0,S.Z)(t.name)?`${t.name}`:`${this._getExtensionMarkNamePrefix()}_${e}`});i&&(this.initMarkStyleWithSpec(i,t),i.commit(!1,!0))})}getStackData(){var t;return null==(t=this._viewStackData)?void 0:t.latestData}_parseDefaultInteractionConfig(t){if(!(null==t?void 0:t.length))return[];let e=(0,O.V)(this._option.mode),i=Object.assign({},null==e?void 0:e.hover),a=Object.assign({},null==e?void 0:e.select),s=this._spec.hover;(0,T.Z)(s)?i.enable=s:(0,D.Z)(s)&&(i.enable=!0,i=(0,p.H)(i,s));let r=this._spec.select;(0,T.Z)(r)?a.enable=r:(0,D.Z)(r)&&(a.enable=!0,a=(0,p.H)(a,r));let l=[{trigger:{type:"dimension-hover"},marks:t}];if(i.enable){let e=(0,V.ww)(i,t);e.length&&l.push({trigger:this._defaultHoverConfig(i),marks:e})}if(a.enable){let e=(0,V.ww)(a,t);e.length&&l.push({trigger:this._defaultSelectConfig(a),marks:e})}return l}_defaultHoverConfig(t){return{type:"element-highlight",trigger:t.trigger,triggerOff:t.triggerOff,blurState:v.q.STATE_HOVER_REVERSE,highlightState:v.q.STATE_HOVER}}_defaultSelectConfig(t){let e="multiple"===t.mode,i=(0,S.Z)(t.triggerOff)?t.triggerOff:e?["empty"]:["empty",t.trigger];return{type:"element-select",trigger:t.trigger,triggerOff:i,reverseState:v.q.STATE_SELECTED_REVERSE,state:v.q.STATE_SELECTED,isMultiple:e}}_parseInteractionConfig(t){let{interactions:e}=this._spec,i=this._parseDefaultInteractionConfig(t);return e&&e.length&&e.forEach(t=>{let e=(0,V.ww)(t,this.getMarks());e.length&&i.push({trigger:t,marks:e})}),i}getInteractionTriggers(){if(!0!==this._option.disableTriggerEvent){let t=this.getMarksWithoutRoot();return this._parseInteractionConfig(t)}return[]}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var t;let e=this._spec.seriesStyle;if(!e||!e.length)return;let i=null!=(t=this._seriesField)?t:s.lb;this.getMarksWithoutRoot().forEach(t=>{let a={},l={},n={};e.forEach(e=>{var i;let s=null==(i=e[t.name])?void 0:i.style;s&&(a[e.name]=!0,n[e.name]=n[e.name]||{},Object.keys(s).forEach(t=>{l[t]=!0,n[e.name][t]=s[t]}))}),t.state.addStateInfo({stateValue:s.Ti,level:-1,filter:t=>Array.isArray(t)?0!==t.length&&!0===a[t[0][i]]:!0===a[t[i]]});let o={};Object.keys(l).forEach(e=>{o[e]=a=>{var s,r;let l;if(Array.isArray(a)){if(0===a.length)return;l=null==(s=n[a[0][i]])?void 0:s[e]}return l=null==(r=n[a[i]])?void 0:r[e],(0,S.Z)(l)?l:t.getAttribute(e,a)}}),this.setMarkStyle(t,o,s.Ti,r.W.User_SeriesStyle)})}afterInitMark(){this.event.emit(a.$7.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(t=>{var e,i;(null==(i=null==(e=t.stateStyle)?void 0:e.normal)?void 0:i.lineWidth)&&t.setAttribute("stroke",this.getColorAttribute(),"normal",r.W.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(t=>{var e;return!(null==(e=t.name)?void 0:e.includes("seriesGroup"))})}getMarksInType(t){return this._marks.getMarksInType(t)}getMarkInName(t){return this._marks.get(t)}getMarkInId(t){return this.getMarks().find(e=>e.id===t)}initEvent(){var t,e,i;null==(e=null==(t=this._data)?void 0:t.getDataView())||e.target.addListener("change",this.viewDataUpdate.bind(this)),null==(i=this._viewDataStatistics)||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent()}initTooltip(){this._tooltipHelper=new _.O(this)}_compareExtensionMarksSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.type!==t[i].type||e.id!==t[i].id||e.name!==t[i].name)?i.reMake=!0:e.some((e,i)=>e.visible!==t[i].visible)&&(i.reCompile=!0)}_compareLabelSpec(t,e,i){t.length!==e.length||e.some((e,i)=>e.labelLayout!==t[i].labelLayout||e.visible!==t[i].visible)?i.reMake=!0:!i.reCompile&&e.some((e,i)=>!(0,w.X)(e,t[i]))&&(i.reCompile=!0)}_compareSpec(t,e,i){let a=super._compareSpec(t,e),s=Object.keys(e||{}).sort(),r=Object.keys(t||{}).sort();if(!(0,w.X)(s,r))return a.reMake=!0,a;let l=Object.assign(Object.assign(Object.assign(Object.assign({},R.V2),R.yF),i),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec((0,M.IX)(t.extensionMark),(0,M.IX)(e.extensionMark),a),a.reMake||this._compareLabelSpec((0,M.IX)(t.label),(0,M.IX)(e.label),a),a.reMake||this._compareLabelSpec((0,M.IX)(t.totalLabel),(0,M.IX)(e.totalLabel),a),a.reMake||(!a.reCompile&&this._marks.getMarks().some(i=>{var a,s;return l[i.name]=!0,(null==(a=e[i.name])?void 0:a.visible)!==(null==(s=t[i.name])?void 0:s.visible)})&&(a.reCompile=!0),!a.reCompile&&s.some(i=>R.yF[i]&&!(0,w.X)(t[i],e[i]))&&(a.reCompile=!0),s.some(i=>!l[i]&&!(0,w.X)(t[i],e[i]))&&(a.reMake=!0)),a}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof n.V||(0,h.kk)(this._rawData,this._spec.data,!0)}reInit(t){super.reInit(t);let e=this.getMarksWithoutRoot();e.forEach(t=>{this._spec[t.name]&&this.initMarkStyleWithSpec(t,this._spec[t.name])}),this.initMarkStyle(),e.forEach(t=>{t.commit(!1)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),(0,E.sB)(this)&&this.initAnimation()}onEvaluateEnd(t){this._data.updateData()}release(){var t,e;super.release(),this._viewDataMap.clear();let i=null==(e=null==(t=this._rawData)?void 0:t.transformsArr)?void 0:e.findIndex(t=>"addVChartProperty"===t.type);i>=0&&this._rawData.transformsArr.splice(i,1),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(t){(0,P.Z)(t.x)&&(this._layoutStartPoint.x=t.x),(0,P.Z)(t.y)&&(this._layoutStartPoint.y=t.y)}setLayoutRect({width:t,height:e},i){(0,P.Z)(t)&&(this._layoutRect.width=t),(0,P.Z)(e)&&(this._layoutRect.height=e)}getSeriesKeys(){var t,e;return this._seriesField?null!=(e=null==(t=this.getRawDataStatisticsByField(this._seriesField))?void 0:t.values)?e:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(t){return e=>{var i,a;return null!=(a=null==(i=this._seriesMark)?void 0:i.getAttribute(e,t))?a:void 0}}_getSeriesInfo(t,e){let i=this.getDefaultShapeType();return e.map(e=>({key:e,originalKey:e,style:this.getSeriesStyle({[t]:e}),shapeType:i}))}getSeriesInfoInField(t){var e,i;return this._getSeriesInfo(t,null!=(i=null==(e=this.getRawDataStatisticsByField(t))?void 0:e.values)?i:[])}getSeriesInfoList(){var t;return this._getSeriesInfo(null!=(t=this._seriesField)?t:s.lb,this.getSeriesKeys())}_getDefaultColorScale(){var t,e;let i=this.getDefaultColorDomain(),a=this._getDataScheme();return null==(e=(t=(new L.m).domain(i)).range)?void 0:e.call(t,a)}_getDataScheme(){return(0,k.wW)(this.getColorScheme(),this.type)}getDefaultColorDomain(){var t,e;return this._seriesField?null==(e=null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._seriesField])?void 0:e.values:[]}getColorAttribute(){var t,e;return{scale:null!=(t=this._option.globalScale.getScale("color"))?t:this._getDefaultColorScale(),field:null!=(e=this._seriesField)?e:s.lb}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(t){}_createMark(t,e={},i={}){var a,s,r,l,n;let{key:o,groupKey:h,skipBeforeLayouted:d,themeSpec:u={},markSpec:c,dataView:g,parent:_,isSeriesMark:m,noSeparateStyle:y=!1}=e,k=super._createMark(t,{key:null!=o?o:this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:e.componentType,noSeparateStyle:y,parent:!1!==_?null!=_?_:this._rootMark:null});if((0,S.Z)(k)){let e=this.getSpec()||{};this._marks.addMark(k,{name:t.name}),m&&(this._seriesMark=k),(0,b.Z)(g)?k.setData(this._data):!1!==g&&k.setDataView(g),k.setSkipBeforeLayouted(!1!==d),(0,b.Z)(h)||k.setGroupKey(h);let o=Object.assign(Object.assign({},i),{progressiveStep:e.progressiveStep,progressiveThreshold:e.progressiveThreshold,large:e.large,largeThreshold:e.largeThreshold,morph:null!=(a=i.morph)&&a,useSequentialAnimation:e.useSequentialAnimation,support3d:null!=(s=i.support3d)?s:e.support3d||!!e.zField,morphKey:(null==(r=e.morph)?void 0:r.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:null!=(n=null==(l=e.morph)?void 0:l.morphElementKey)?n:i.morphElementKey});k.setMarkConfig(o),this.initMarkStyleWithSpec(k,(0,p.H)({},u,c||e[k.name]))}return k}_getDataIdKey(){var t;return null!=(t=super._getDataIdKey())?t:s.XW}_getSeriesDataKey(t){let e="";if(!t)return e;let i=this.getDimensionField();e=i.map(e=>t[e]).join("_");let a=this.getSeriesField();return a&&!i.includes(a)&&(e+=`_${t[a]}`),e}addViewDataFilter(t){var e,i;null==(i=null!=(e=this._viewDataFilter)?e:this.getViewData())||i.transform(t,!1)}reFilterViewData(){var t,e;null==(e=null!=(t=this._viewDataFilter)?t:this.getViewData())||e.reRunAllTransform()}reTransformViewData(){var t,e;null==(e=null==(t=this._data)?void 0:t.getDataView())||e.reRunAllTransform()}fillData(){var t;null==(t=this.getRawData())||t.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(t){var e;return t!==s.Uq&&t!==s.fB&&t!==s.cQ&&t!==s.x0||(t=this.getStackValueField()),null!=(e=(0,d.tW)(this.getRawData(),t))?e:t}_getInvalidConnectType(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"}_getInvalidDefined(t){let e=this.getInvalidCheckFields();return!e.length||e.every(e=>(0,u.hi)(t[e]))}_getRelatedComponentSpecInfo(t){var e;let i=this.getSpecIndex(),a=null==(e=this._option.getSpecInfo().component[t])?void 0:e.filter(t=>t.seriesIndexes.includes(i));return null!=a?a:[]}_forEachStackGroup(t,e){var i,a;(e=null!=e?e:null==(i=this._viewStackData)?void 0:i.latestData)&&((null==(a=e.values)?void 0:a.length)?t(e):e.nodes&&Object.values(e.nodes).forEach(e=>{this._forEachStackGroup(t,e)}))}isDatumInViewData(t){if(!t)return!1;let e=this.getViewData().latestData;return!!e&&(!!e.includes(t)||e.some(e=>Object.keys(t).every(i=>t[i]===e[i])))}getSeriesFieldValue(t,e){var i;return t[null!=(i=null!=e?e:this.getSeriesField())?i:s.lb]}}Z.mark=R.UI,Z.transformerConstructor=I.G},268278:function(t,e,i){i.d(e,{Aj:()=>o,DO:()=>r,UI:()=>s,V0:()=>l,V2:()=>h,aS:()=>n,yF:()=>d});var a=i(145004);let s={label:{name:"label",type:"text"}},r=`${a.Bq}_rect_x`,l=`${a.Bq}_rect_x1`,n=`${a.Bq}_rect_y`,o=`${a.Bq}_rect_y1`,h={data:!0},d={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0}},434998:function(t,e,i){i.d(e,{O:()=>h});var a=i(777678),s=i(835151),r=i(896294),l=i(923010),n=i(950613),o=i(576225);class h{constructor(t){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var t,e,i;let{series:r}=this,l=r.getSeriesField();return{seriesFields:(0,a.Z)(l)?(0,s.IX)(l):null!=(t=r.getSeriesKeys())?t:[],dimensionFields:null!=(e=r.getDimensionField())?e:[],measureFields:null!=(i=r.getMeasureField())?i:[],type:r.type}},this._getDimensionData=t=>{let{dimensionFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getMeasureData=t=>{let{measureFields:e}=this._seriesCacheInfo;return e[0]&&(null==t?void 0:t[e[0]])},this._getSeriesFieldData=t=>{let{dimensionFields:e,seriesFields:i}=this._seriesCacheInfo;if((0,a.Z)(i[0])&&(null==t?void 0:t[i[0]]))return null==t?void 0:t[i[0]];let s=e[e.length-1];return e.length>1&&(0===i.length||this.series.getSeriesKeys().length),null==t?void 0:t[s]},this._getSeriesStyle=(t,e,i)=>{var r;for(let i of(0,s.IX)(e)){let e=null==(r=this.series.getSeriesStyle(t))?void 0:r(i);if((0,a.Z)(e))return e}return i},this.markTooltipKeyCallback=(t,e)=>this._getSeriesFieldData(t),this.markTooltipValueCallback=(t,e)=>this._getMeasureData(t),this.shapeTypeCallback=(t,e)=>{var i;return null!=(i=this._getSeriesStyle(t,"shape",null))?i:this._getSeriesStyle(t,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(t,e)=>this._getSeriesStyle(t,["fill","stroke"]),this.shapeStrokeCallback=(t,e)=>this._getSeriesStyle(t,["stroke","fill"]),this.dimensionTooltipTitleCallback=(t,e)=>this._getDimensionData(t),this.groupTooltipTitleCallback=(t,e)=>this._getSeriesFieldData(t),this.groupTooltipKeyCallback=(t,e)=>{let{seriesFields:i}=this._seriesCacheInfo,a=this._seriesCacheInfo.dimensionFields;return i[0]&&(a=a.filter(t=>t!==i[0])),a.map(e=>null==t?void 0:t[e]).join("-")},this.getHasShape=t=>!!t,this.series=t,this.updateTooltipSpec()}updateTooltipSpec(){var t;let e=null==(t=this.series.getSpec())?void 0:t.tooltip;this.spec=e,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(t,e,i){var a,s,r,l,n,o,h,d,u,p,c,g;let _=e?"content":"title",m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},null==(a=null==i?void 0:i.style)?void 0:a.shape),null==i?void 0:i[t]),null==(s=null==i?void 0:i[t])?void 0:s[_]),null==(r=this.spec)?void 0:r[t]),null==(n=null==(l=this.spec)?void 0:l[t])?void 0:n[_]);return{shapeType:null!=(o=m.shapeType)?o:this.shapeTypeCallback,shapeFill:null!=(d=null!=(h=m.shapeFill)?h:m.shapeColor)?d:this.shapeColorCallback,shapeStroke:null!=(u=m.shapeStroke)?u:this.shapeStrokeCallback,shapeHollow:null!=(p=m.shapeHollow)&&p,shapeLineWidth:m.shapeLineWidth,shapeSize:null!=(c=m.shapeSize)?c:m.size,hasShape:null!=(g=m.hasShape)?g:this.getHasShape(e)}}enableByType(t){return!0}getDefaultContentList(t){return[this.getDefaultContentPattern(t)]}getContentList(t,e,i,a,s,r){var n;return(0,l.nK)(null!=(n=null==e?void 0:e.content)?n:this.getDefaultContentList(t),this.getDefaultContentPattern(t),i,a,s,r)}getTitleResult(t,e,i,a,s){let h=(0,r.Z)(e)?e(a,s):e;if(h?(0,o.Z)(h.value)&&(h=Object.assign(Object.assign({},this.getDefaultTitlePattern(t)),h)):h=this.getDefaultTitlePattern(t),h&&!1!==h.visible){let t=(0,n.lg)(a),e={visible:(0,n.Xb)(h.visible,t,s),value:(0,l.u6)((0,n.Xb)(h.value,t,s,h.valueFormatter),h.valueTimeFormat,h.valueTimeFormatMode),valueStyle:(0,n.Xb)(h.valueStyle,t,s),hasShape:h.hasShape};return Object.keys(i).forEach(a=>{e[a]=(0,n.Xb)(i[a],t,s)}),e}return{hasShape:!1,visible:!1}}getTooltipData(t,e,i,a,s){var r,n;let o;if(!(this.enableByType(t)&&(0,l.Lw)(t,this.spec)&&("dimension"!==t||a&&a.length)))return null;let h=null!=(n=null==(r=this.spec)?void 0:r[t])?n:null==e?void 0:e[t],d=this.getShapeAttrs(t,!0,e),u=this.getShapeAttrs(t,!1,e);return"dimension"===t?(o=[],this.getContentList(t,h,d,i,a,s).forEach(t=>{o.push(t)})):o=this.getContentList(t,h,d,i,a,s),{visible:!0,activeType:t,data:i,title:this.getTitleResult(t,null==h?void 0:h.title,u,i,s),content:o}}getDefaultTitlePattern(t){return{key:void 0,value:"group"===t?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(t){return{seriesId:this.series.id,key:"group"===t?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}},954663:function(t,e,i){i.d(e,{JF:()=>Y});var a=i(459338),s=i(241854),r=i(145004),l=i(672796),n=i(206065),o=i(75387),h=i(64510),d=i(924706),u=i(102094),p=i(151924),c=i(370612),g=i(434998),_=i(777678);class m extends g.O{constructor(){super(...arguments),this.getContentKey=t=>e=>{if(this.isOutlierMark(e))return t===c.l.OUTLIER?this.series.getOutliersField():t===c.l.SERIES_FIELD?this.series.getSeriesField():null;switch(t){case c.l.MIN:return this.series.getMinField();case c.l.MAX:return this.series.getMaxField();case c.l.MEDIAN:return this.series.getMedianField();case c.l.Q1:return this.series.getQ1Field();case c.l.Q3:return this.series.getQ3Field();case c.l.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=t=>e=>{if(this.isOutlierMark(e))return t===c.l.OUTLIER?e[c.H]:t===c.l.SERIES_FIELD?e[this.series.getSeriesField()]:null;switch(t){case c.l.MIN:return e[this.series.getMinField()];case c.l.MAX:return e[this.series.getMaxField()];case c.l.MEDIAN:return e[this.series.getMedianField()];case c.l.Q1:return e[this.series.getQ1Field()];case c.l.Q3:return e[this.series.getQ3Field()];case c.l.SERIES_FIELD:return e[this.series.getSeriesField()]}return null},this.shapeColorCallback=t=>"line"===this.series.getShaftShape()?this.series.getMarkInName("boxPlot").getAttribute("stroke",t):this.series.getMarkInName("boxPlot").getAttribute("fill",t),this.getOutlierFillColor=t=>{var e,i;let a=this.series.getOutliersStyle();return null!=(e=null==a?void 0:a.fill)?e:null==(i=this.series.getMarkInName("outlier"))?void 0:i.getAttribute("fill",t)},this.isOutlierMark=t=>(0,_.Z)(t[c.H])}getDefaultContentList(t){return[{key:this.getContentKey(c.l.OUTLIER),value:this.getContentValue(c.l.OUTLIER),shapeType:this.shapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor},{key:this.getContentKey(c.l.MAX),value:this.getContentValue(c.l.MAX)},{key:this.getContentKey(c.l.Q3),value:this.getContentValue(c.l.Q3)},{key:this.getContentKey(c.l.MEDIAN),value:this.getContentValue(c.l.MEDIAN)},{key:this.getContentKey(c.l.Q1),value:this.getContentValue(c.l.Q1)},{key:this.getContentKey(c.l.MIN),value:this.getContentValue(c.l.MIN)},{key:this.getContentKey(c.l.SERIES_FIELD),value:this.getContentValue(c.l.SERIES_FIELD)}]}}var y=i(766410),k=i(369643),f=i(122487),v=i(642800),S=i(686978),b=i(460038);let M=Object.assign(Object.assign({},i(268278).UI),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}});var x=i(279090),A=i(591431),F=i(27203),C=i(846070),T=i(519636),D=i(711805),w=i(687404),P=i(50026),L=i(672968),R=i(552029);let E=t=>(e,i,a)=>{var s;let r=e.getFinalAttribute(),l=t(e,null!=(s=r.direction)?s:"vertical",i);if(!(0,P.Z)(l))return{};let{x:n,y:o,min:h,max:d,q1:u,q3:p,median:c}=r,g={from:{x:n,y:o},to:{x:n,y:o}};return(0,P.Z)(h)&&(g.from.min=l,g.to.min=h),(0,P.Z)(d)&&(g.from.max=l,g.to.max=d),(0,P.Z)(u)&&(g.from.q1=l,g.to.q1=u),(0,P.Z)(p)&&(g.from.q3=l,g.to.q3=p),(0,P.Z)(c)&&(g.from.median=l,g.to.median=c),g},I=t=>(e,i,a)=>{var s;let r=e.getFinalAttribute(),l=t(e,null!=(s=r.direction)?s:"vertical",i);if(!(0,P.Z)(l))return{};let{x:n,y:o,min:h,max:d,q1:u,q3:p,median:c}=r,g={from:{x:n,y:o},to:{x:n,y:o}};return(0,P.Z)(h)&&(g.to.min=l,g.from.min=h),(0,P.Z)(d)&&(g.to.max=l,g.from.max=d),(0,P.Z)(u)&&(g.to.q1=l,g.from.q1=u),(0,P.Z)(p)&&(g.to.q3=l,g.from.q3=p),(0,P.Z)(c)&&(g.to.median=l,g.from.median=c),g},O=(t,e)=>t.getSubGraphic().find(t=>t.name===e),H=(t,e,i)=>{var a,s,r,l,n,o,h,d,u,p,c,g,_,m,y,k,f,v,S,b,M,x;let A,F,C,T,D;if(i&&(0,P.Z)(i.center))return i.center;if("horizontal"===e){A=null==(r=null==(s=(null==(a=O(t,"median"))?void 0:a.attribute).points)?void 0:s[0])?void 0:r.x,F=null==(h=null==(o=null==(n=null==(l=O(t,"max"))?void 0:l.attribute)?void 0:n.points)?void 0:o[0])?void 0:h.x,C=null==(c=null==(p=null==(u=null==(d=O(t,"min"))?void 0:d.attribute)?void 0:u.points)?void 0:p[0])?void 0:c.x;let e=O(t,"box").attribute.width,i=O(t,"box").attribute.x;T=i,D=i+e}else{A=null==(m=null==(_=(null==(g=O(t,"median"))?void 0:g.attribute).points)?void 0:_[0])?void 0:m.y,F=null==(v=null==(f=null==(k=null==(y=O(t,"max"))?void 0:y.attribute)?void 0:k.points)?void 0:f[0])?void 0:v.y,C=null==(x=null==(M=null==(b=null==(S=O(t,"min"))?void 0:S.attribute)?void 0:b.points)?void 0:M[0])?void 0:x.y;let e=O(t,"box").attribute.height,i=O(t,"box").attribute.y;T=i,D=i+e}return(0,P.Z)(A)?A:(0,P.Z)(T)&&(0,P.Z)(D)?(T+D)/2:(0,P.Z)(F)&&(0,P.Z)(C)?(F+C)/2:(0,P.Z)(C)?C:(0,P.Z)(F)?F:NaN},B=(t,e,i)=>{var a,s,r,l,n,o,h,d,u,p,c,g,_,m;let y,k,f,v,S;if((0,P.Z)(null==i?void 0:i.center))return i.center;if("horizontal"===e){y=null==(r=null==(s=(null==(a=O(t,"median"))?void 0:a.attribute).points)?void 0:s[0])?void 0:r.x;let e=(null==(l=O(t,"minMaxBox"))?void 0:l.attribute).width,i=null==(n=O(t,"minMaxBox"))?void 0:n.attribute.x;f=i,k=i+e;let d=(null==(o=O(t,"q1q3Box"))?void 0:o.attribute).width,u=null==(h=O(t,"q1q3Box"))?void 0:h.attribute.x;v=u,S=u+d}else{y=null==(p=null==(u=(null==(d=O(t,"median"))?void 0:d.attribute).points)?void 0:u[0])?void 0:p.y;let e=(null==(c=O(t,"minMaxBox"))?void 0:c.attribute).height,i=null==(g=O(t,"minMaxBox"))?void 0:g.attribute.y;f=i,k=i+e;let a=(null==(_=O(t,"q1q3Box"))?void 0:_.attribute).height,s=null==(m=O(t,"q1q3Box"))?void 0:m.attribute.y;v=s,S=s+a}return(0,P.Z)(y)?y:(0,P.Z)(v)&&(0,P.Z)(S)?(v+S)/2:(0,P.Z)(k)&&(0,P.Z)(f)?(k+f)/2:(0,P.Z)(f)?f:(0,P.Z)(k)?k:NaN};class V extends L.rd{constructor(t,e,i,a,s){super(t,e,i,a,s)}onBind(){super.onBind();let t=this.target.getFinalAttribute();t&&this.target.setAttributes(t);let{from:e,to:i}=this.computeAttribute();this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.animate.reSyncProps(),this.from=e,this.to=i,this.target.setAttributes(this.from)}computeAttribute(){return E(H)(this.target,this.params,this.params.options)}onUpdate(t,e,i){let a=this.target.attribute;this.propKeys.forEach(t=>{a[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.setAttributes(a)}}class Z extends L.rd{constructor(t,e,i,a,s){super(t,e,i,a,s)}onBind(){var t;(null==(t=this.params)?void 0:t.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:e,to:i}=this.computeAttribute();this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.animate.reSyncProps(),this.from=e,this.to=i,this.target.setAttributes(this.from)}computeAttribute(){return I(H)(this.target,this.params,this.params.options)}onUpdate(t,e,i){let a=this.target.attribute;this.propKeys.forEach(t=>{a[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.setAttributes(a)}}class W extends V{computeAttribute(){return E(B)(this.target,this.params,this.params.options)}}class z extends Z{computeAttribute(){return I(B)(this.target,this.params,this.params.options)}}class N extends n.i{constructor(){super(...arguments),this.type=o.A.boxPlot}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var t,e,i,a,s;super.setAttrFromSpec();let r=null!=(e=null==(t=this._spec.boxPlot)?void 0:t.style)?e:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=null!=(i=r.lineWidth)?i:2,this._boxWidth=r.boxWidth,this._shaftShape=null!=(a=r.shaftShape)?a:"line",this._shaftWidth=r.shaftWidth,this._boxFillColor=r.boxFill,this._strokeColor=r.stroke,this._shaftFillOpacity="bar"===this._shaftShape?null!=(s=r.shaftFillOpacity)?s:.5:void 0,this._outliersStyle=this._spec.outliersStyle}initMark(){this._boxPlotMark=this._createMark(N.mark.boxPlot,{groupKey:this._seriesField,isSeriesMark:!0}),this._outliersField&&(this._outlierMark=this._createMark(N.mark.outlier,{key:s.vM,groupKey:this._seriesField,dataView:this._outlierDataView.getDataView(),dataProductId:this._outlierDataView.getProductId()}))}initMarkStyle(){var t,e,i,s,r;let l=this._boxPlotMark;if(l){let i={lineWidth:this._lineWidth,fill:null!=(t=this._boxFillColor)?t:"line"===this._shaftShape?"#FFF":this.getColorAttribute(),minMaxFillOpacity:this._shaftFillOpacity,stroke:null!=(e=this._strokeColor)?e:"line"===this._shaftShape?this.getColorAttribute():"#000"};l.setGlyphConfig({direction:this._direction,shaftShape:this._shaftShape});let s="horizontal"===this._direction?Object.assign(Object.assign({y:this.dataToPositionY.bind(this)},i),{boxHeight:()=>{var t;return null!=(t=this._boxWidth)?t:this._getMarkWidth()},ruleHeight:()=>{var t;return null!=(t=this._shaftWidth)?t:this._getMarkWidth()},q1q3Height:()=>{var t;return null!=(t=this._boxWidth)?t:this._getMarkWidth()},minMaxHeight:()=>{var t;return null!=(t=this._shaftWidth)?t:this._getMarkWidth()}}):Object.assign(Object.assign({x:this.dataToPositionX.bind(this)},i),{boxWidth:()=>{var t;return null!=(t=this._boxWidth)?t:this._getMarkWidth()},ruleWidth:()=>{var t;return null!=(t=this._shaftWidth)?t:this._getMarkWidth()},q1q3Width:()=>{var t;return null!=(t=this._boxWidth)?t:this._getMarkWidth()},minMaxWidth:()=>{var t;return null!=(t=this._shaftWidth)?t:this._getMarkWidth()}});this.setMarkStyle(l,s,h.q.STATE_NORMAL,a.W.Series)}let n=this._outlierMark;n&&this.setMarkStyle(n,{fill:null!=(s=null==(i=this._outliersStyle)?void 0:i.fill)?s:this.getColorAttribute(),size:(0,A.Z)(null==(r=this._outliersStyle)?void 0:r.size)?this._outliersStyle.size:10,symbolType:"circle"},h.q.STATE_NORMAL,a.W.Series)}initBoxPlotMarkStyle(){var t,e;let i=this._boxPlotMark,s="horizontal"===this._direction?this._xAxisHelper:this._yAxisHelper;if(i&&s){let{dataToPosition:e}=s,r=null==(t=null==s?void 0:s.getScale)?void 0:t.call(s,0);this.setMarkStyle(i,{min:t=>(0,l.Ol)(e(this.getDatumPositionValues(t,this._minField),{bandPosition:this._bandPosition}),r),q1:t=>(0,l.Ol)(e(this.getDatumPositionValues(t,this._q1Field),{bandPosition:this._bandPosition}),r),median:t=>(0,l.Ol)(e(this.getDatumPositionValues(t,this._medianField),{bandPosition:this._bandPosition}),r),q3:t=>(0,l.Ol)(e(this.getDatumPositionValues(t,this._q3Field),{bandPosition:this._bandPosition}),r),max:t=>(0,l.Ol)(e(this.getDatumPositionValues(t,this._maxField),{bandPosition:this._bandPosition}),r)},h.q.STATE_NORMAL,a.W.Series)}let r=this._outlierMark;if(r&&s){let{dataToPosition:t}=s,i=null==(e=null==s?void 0:s.getScale)?void 0:e.call(s,0),n="horizontal"===this._direction?{y:this.dataToPositionY.bind(this),x:e=>(0,l.Ol)(t(this.getDatumPositionValues(e,c.H),{bandPosition:this._bandPosition}),i)}:{x:this.dataToPositionX.bind(this),y:e=>(0,l.Ol)(t(this.getDatumPositionValues(e,c.H),{bandPosition:this._bandPosition}),i)};this.setMarkStyle(r,n,h.q.STATE_NORMAL,a.W.Series)}}initData(){if(super.initData(),!this._data)return;(0,d.U)(this._dataSet,"foldOutlierData",p.$),(0,d.U)(this._dataSet,"addVChartProperty",y.E);let t=new u.V(this._dataSet,{name:`${this.type}_outlier_${this.id}_data`});t.parse([this.getViewData()],{type:"dataview"}),t.name=`${r.Bq}_series_${this.id}_outlierData`,t.transform({type:"foldOutlierData",options:{dimensionField:"horizontal"===this._direction?this._fieldY:this._fieldX,outliersField:this._outliersField}}),t.transform({type:"addVChartProperty",options:{beforeCall:k.cJ.bind(this),call:k.CL}},!1),this._outlierDataView=new w.O(this._option,t)}compileData(){var t;super.compileData(),null==(t=this._outlierDataView)||t.compile()}init(t){super.init(t),this.initBoxPlotMarkStyle()}_getMarkWidth(){if(this._autoBoxWidth)return this._autoBoxWidth;let t="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,e="horizontal"===this._direction?this._fieldY:this._fieldX,i=t.getBandwidth(e.length-1)/e.length;return this._autoBoxWidth=i,this._autoBoxWidth}onLayoutEnd(){super.onLayoutEnd(),this._autoBoxWidth=null}_initAnimationSpec(t={}){let e=(0,F.Z)({},t);return["appear","enter","update","exit","disappear"].forEach(t=>{e[t]&&"scaleIn"===e[t].type?e[t].type="line"===this._shaftShape?"boxplotScaleIn":"barBoxplotScaleIn":e[t]&&"scaleOut"===e[t].type&&(e[t].type="line"===this._shaftShape?"boxplotScaleOut":"barBoxplotScaleOut")}),e}initAnimation(){var t,e,i,a,s,r,l;let n=(0,C.mh)(this);if(this._boxPlotMark){let e=this._initAnimationSpec(null==(t=x.F.getAnimationInKey("scaleInOut"))?void 0:t()),i=this._initAnimationSpec((0,f.hT)("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig((0,f._8)(e,i,n))}if(this._outlierMark){let t={appear:null==(e=this._spec.animationAppear)?void 0:e.symbol,disappear:null==(i=this._spec.animationDisappear)?void 0:i.symbol,enter:null==(a=this._spec.animationEnter)?void 0:a.symbol,exit:null==(s=this._spec.animationExit)?void 0:s.symbol,update:null==(r=this._spec.animationUpdate)?void 0:r.symbol};this._outlierMark.setAnimationConfig((0,f._8)(null==(l=x.F.getAnimationInKey("scaleInOut"))?void 0:l(),t,n))}}initTooltip(){this._tooltipHelper=new m(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){let t=super.getStatisticFields(),e=t.find(t=>t.key===this._outliersField);return e&&(e.operations=["array-min","array-max"]),t}onEvaluateEnd(t){super.onEvaluateEnd(t),this._outlierDataView.updateData()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}N.type=o.A.boxPlot,N.builtInTheme={boxPlot:{boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}}},N.mark=M;let Y=()=>{(0,S.u)(),(0,b.O)(),(0,v.BV)(),(0,T.N)(),(0,D.E)(),R.a.registerBuiltInAnimate("boxplotScaleIn",V),R.a.registerBuiltInAnimate("boxplotScaleOut",Z),R.a.registerBuiltInAnimate("barBoxplotScaleIn",W),R.a.registerBuiltInAnimate("barBoxplotScaleOut",z),x.F.registerSeries(N.type,N)}},206065:function(t,e,i){i.d(e,{i:()=>p});var a=i(504681),s=i(241854),r=i(835151),l=i(777678),n=i(459774),o=i(846070),h=i(72754),d=i(75464),u=i(145004);class p extends a.y{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var t;return null==(t=this._positionXEncoder)?void 0:t.bind(this)},this._setPositionXEncoder=t=>{this._positionXEncoder=t.bind(this)},this._getPositionYEncoder=()=>{var t;return null==(t=this._positionYEncoder)?void 0:t.bind(this)},this._setPositionYEncoder=t=>{this._positionYEncoder=t.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(t){this._fieldX=(0,r.IX)(t)}get fieldY(){return this._fieldY}setFieldY(t){this._fieldY=(0,r.IX)(t)}get fieldZ(){return this._fieldZ}setFieldZ(t){this._fieldZ=t&&(0,r.IX)(t)}get fieldX2(){return this._fieldX2}setFieldX2(t){this._fieldX2=t}get fieldY2(){return this._fieldY2}setFieldY2(t){this._fieldY2=t}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(t){this._scaleX=t}get scaleY(){return this._scaleY}setScaleY(t){this._scaleY=t}get scaleZ(){return this._scaleZ}setScaleZ(t){this._scaleZ=t}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(t){this._xAxisHelper=t,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(t){this._yAxisHelper=t,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(t){this._zAxisHelper=t,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){let t=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(e=>{e.axisHelper&&e.axisHelper.getScale&&e.fields&&e.fields.forEach(i=>{let a={key:i,operations:[]},s=e.axisHelper.getScale(0);(0,n.z2)(s.type)?(a.operations=["max","min"],"log"===s.type&&(a.filter=t=>t>0)):a.operations=["values"],t.push(a)})}),this.getStack()&&t.push({key:this.getStackValueField(),operations:["allValid"]}),t}getGroupFields(){return"vertical"===this.direction?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var t,e;let i=null==(t="horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper())?void 0:t.getAxisId();return null!=(e=this._spec.stackValue)?e:`${u.Bq}_series_${this.type}_${i}`}getStackValueField(){return"horizontal"===this.direction?(0,r.IX)(this._spec.xField)[0]:(0,r.IX)(this._spec.yField)[0]}setValueFieldToStack(){"horizontal"===this.direction?(this.setFieldX(s.Uq),this.setFieldX2(s.cQ)):(this.setFieldY(s.Uq),this.setFieldY2(s.cQ))}setValueFieldToPercent(){"horizontal"===this.direction?(this.setFieldX(s.fB),this.setFieldX2(s.x0)):(this.setFieldY(s.fB),this.setFieldY2(s.x0))}setValueFieldToStackOffsetSilhouette(){"horizontal"===this.direction?(this.setFieldX(s.AF),this.setFieldX2(s.Jl)):(this.setFieldY(s.AF),this.setFieldY2(s.Jl))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=(0,r.IX)(this._spec.xField),this._specYField=(0,r.IX)(this._spec.yField),(0,l.Z)(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null==(t=this._spec)?void 0:t.x2Field),this.setFieldY2(null==(e=this._spec)?void 0:e.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),(0,l.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}dataToPosition(t,e){return t?e&&!this.isDatumInViewData(t)?null:{x:this.dataToPositionX(t),y:this.dataToPositionY(t)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(t=0)=>{var e,i,a;return null!=(a=null==(i=(e=this.getXAxisHelper()).getBandwidth)?void 0:i.call(e,t))?a:0},this._markAttributeContext.yBandwidth=(t=0)=>{var e,i,a;return null!=(a=null==(i=(e=this.getYAxisHelper()).getBandwidth)?void 0:i.call(e,t))?a:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(t,e){return{x:this.valueToPositionX(t),y:this.valueToPositionY(e)}}_axisPosition(t,e,i){return this._scaleConfig.datum=i,t.isContinuous?t.valueToPosition(e,this._scaleConfig):t.dataToPosition((0,r.IX)(e),this._scaleConfig)}valueToPositionX(t,e){return this._axisPosition(this._xAxisHelper,t,e)}valueToPositionY(t,e){return this._axisPosition(this._yAxisHelper,t,e)}_dataToPosition(t,e,i,a,s,l){let n=s();if(n)return n(t);if(!e)return l(t=>Number.NaN),Number.NaN;let o=(e.getFields?e.getFields():i).slice(0,a);return o&&0!==o.length?(e.isContinuous?l(t=>(this._scaleConfig.datum=t,e.valueToPosition(this.getDatumPositionValue(t,o[0]),this._scaleConfig))):l(t=>(this._scaleConfig.datum=t,e.dataToPosition((0,r.IX)(this.getDatumPositionValues(t,o)),this._scaleConfig))),s()(t)):(l(t=>null),null)}dataToPositionX(t){return this._dataToPosition(t,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(t){return this._dataToPosition(t,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(t){if(!this._zAxisHelper)return Number.NaN;let{dataToPosition:e}=this._zAxisHelper;return e(this.getDatumPositionValues(t,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(t){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in t?this.valueToPositionX(this.getDatumPositionValues(t,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(t){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in t?this.valueToPositionY(this.getDatumPositionValues(t,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(t){return t?{x:this.positionToDataX(t.x),y:this.positionToDataY(t.y)}:null}positionToDataX(t){return this._scaleX?this._scaleX.invert(t):null}positionToDataY(t){return this._scaleY?this._scaleY.invert(t):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;let{getScale:t}=this._xAxisHelper;return t(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return"horizontal"===this._direction?this._specYField:this._specXField}getDimensionContinuousField(){return"horizontal"===this._direction?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return"horizontal"===this._direction?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(d.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null==(e="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper)?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e,i;(null==(e=null==(t=this.getViewData())?void 0:t.latestData)?void 0:e.length)&&((0,o.fd)("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null==(i=this._data)||i.updateData(!0))}getInvalidCheckFields(){let t=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(e=>{t.push(e)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==h.L.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(e=>{t.push(e)}),t}reInit(t){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(t)}}},642467:function(t,e,i){i.d(e,{P:()=>C});var a=i(576225),s=i(800466),r=i(279090),l=i(75387),n=i(206065),o=i(924706),h=i(646860),d=i(64510),u=i(241854),p=i(459338),c=i(699603),g=i(703494),_=i(434998);class m extends _.O{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>null==t?void 0:t[this.series.getDimensionField()[0]]}}var y=i(369643),k=i(766410),f=i(122487),v=i(642800),S=i(251423),b=i(224712),M=i(249297);let x=Object.assign(Object.assign({},i(268278).UI),{circlePacking:{name:"circlePacking",type:"arc"}});var A=i(508095);class F extends n.i{constructor(){super(...arguments),this.type=l.A.circlePacking}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(t=this._spec.seriesField)?t:c.Ko),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t;return null!=(t=this._spec.drillField)?t:u.XW},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();let t=this.getRawData();(0,a.Z)(t)||(this._spec.drill&&this.initDrillableData(this._dataSet),(0,o.U)(this._dataSet,"circlePackingLayout",h.Y),(0,o.U)(this._dataSet,"flatten",g.x),t.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),t.transform({type:"flatten",options:{callback:t=>{if(t.datum){let e=t.datum[t.depth];return Object.assign(Object.assign({},t),e)}return t}}}))}_addDataIndexAndKey(){let t=this.getRawData();(0,a.Z)(null==t?void 0:t.dataSet)||((0,o.U)(t.dataSet,"addVChartProperty",k.E),t.transform({type:"addVChartProperty",options:{beforeCall:y.Fe.bind(this),call:y.Au}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var t;if(!1===(null==(t=this._circlePacking)?void 0:t.visible))return;let e=this._createMark(F.mark.circlePacking,{isSeriesMark:!0});this._circlePackingMark=e}_initCirclePackingMarkStyle(){(0,a.Z)(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:t=>t.x,y:t=>t.y,outerRadius:t=>t.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:t=>t.depth},d.q.STATE_NORMAL,p.W.Series)}_initLabelMark(){var t;if(!1===(null==(t=this._label)?void 0:t.visible))return;let e=this._createMark(F.mark.label,{isSeriesMark:!1});this._labelMark=e}_initLabelMarkStyle(){(0,a.Z)(this._labelMark)||this.setMarkStyle(this._labelMark,{x:t=>t.x,y:t=>t.y,text:t=>t.key,cursor:"pointer"},d.q.STATE_NORMAL,p.W.Series)}getStatisticFields(){return(0,A.B)(super.getStatisticFields(),this._categoryField,this._valueField)}initTooltip(){this._tooltipHelper=new m(this),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t;let e=null==(t=this._spec.animationAppear)?void 0:t.preset;this.getMarksInType("arc").forEach(t=>{var i;t.setAnimationConfig((0,f._8)(null==(i=r.F.getAnimationInKey("circlePacking"))?void 0:i(void 0,e),(0,f.hT)(t.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(t=>{var e;t.setAnimationConfig((0,f._8)(null==(e=r.F.getAnimationInKey("scaleInOut"))?void 0:e(),(0,f.hT)(t.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._circlePackingMark]}getMarkData(t){return(null==t?void 0:t.datum)?t.datum[t.datum.length-1]:t}}F.type=l.A.circlePacking,F.mark=x,F.builtInTheme={circlePacking:{layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}}},(0,s.jB)(F,S.F);let C=()=>{r.F.registerSeries(F.type,F),(0,b.sp)(),(0,M.k)(),(0,v.BV)(),r.F.registerAnimation("circlePacking",(t,e)=>({appear:"fadeIn"===e?{type:"fadeIn"}:{type:"growRadiusIn"},enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{type:"growRadiusOut"}}))}},383071:function(t,e,i){i.d(e,{m:()=>T});var a=i(727891),s=i(75387);let r=Object.assign(Object.assign({},i(268278).UI),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}});var l=i(924706),n=i(133590),o=i(521168),h=i(522610),d=i(777678),u=i(460038),p=i(241854),c=i(459338),g=i(663787),_=i(586831),m=i(736299),y=i(102094),k=i(64510),f=i(309155),v=i(873604),S=i(122487),b=i(279090),M=i(642800),x=i(306474);class A extends x.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nodePoint"),this._addMarkLabelSpec(t,"centerPoint","centerLabel")}}var F=i(687404);class C extends a.H{constructor(){super(...arguments),this.type=s.A.correlation,this.transformerConstructor=A,this._viewBox=new h.YZ}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(t){(0,d.Z)(t)&&(this._seriesField=t)}getSizeField(){return this._sizeField}setSizeField(t){(0,d.Z)(t)&&(this._sizeField=t)}getSizeRange(){return this._sizeRange}setSizeRange(t){(0,d.Z)(t)&&(this._sizeRange=t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var t,e,i;if(super.initData(),!this._data)return;(0,l.U)(this._dataSet,"correlation",n.Q);let a=new _.q;(0,l.I)(a,"dataview",m.i),(0,l.U)(a,"correlationCenter",o.z);let s=new y.V(a,{name:`${this.type}_${this.id}_center`});s.parse([this.getViewData()],{type:"dataview"}),s.transform({type:"correlationCenter",options:{keyword:null!=(i=null==(e=null==(t=this._spec.centerLabel)?void 0:t.style)?void 0:e.text)?i:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new F.O(this._option,s)}compileData(){var t;super.compileData(),null==(t=this._centerSeriesData)||t.compile()}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){let t=this._createMark(C.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:p.vM});t&&(t.setMarkConfig({zIndex:g.Ai.Node}),this._nodePointMark=t);let e=this._createMark(C.mark.ripplePoint,{key:p.vM,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});e&&(this._ripplePointMark=e);let i=this._createMark(C.mark.centerPoint,{key:p.vM,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});i&&(i.setMarkConfig({zIndex:g.Ai.Node}),this._centerPointMark=i)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var t,e,i,a;let s=this._nodePointMark;if(!s)return;let r=null!=(e=null==(t=this._spec.nodePoint)?void 0:t.style)?e:{};this.setMarkStyle(s,{x:t=>t[v.wj],y:t=>t[v.Rg],size:t=>t[v.hs],fill:null!=(i=r.fill)?i:this.getColorAttribute(),fillOpacity:null!=(a=r.fillOpacity)?a:1,lineWidth:0},k.q.STATE_NORMAL,c.W.Series)}_initRipplePointMarkStyle(){var t,e,i,a,s;let r=this._ripplePointMark;if(!r)return;let l=null!=(e=null==(t=this._spec.ripplePoint)?void 0:t.style)?e:{};this.setMarkStyle(r,{x:()=>{var t;return null!=(t=this._spec.centerX)?t:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var t;return null!=(t=this._spec.centerY)?t:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!=(i=l.fill)?i:this.getColorAttribute(),opacity:null!=(a=l.fillOpacity)?a:.2,ripple:null!=(s=l.ripple)?s:0},k.q.STATE_NORMAL,c.W.Series)}_initCenterPointMarkStyle(){var t,e,i,a,s,r;let l=this._centerPointMark;l&&this.setMarkStyle(l,{x:()=>{var t;return null!=(t=this._spec.centerX)?t:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var t;return null!=(t=this._spec.centerY)?t:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!=(i=null==(e=null==(t=this._spec.centerPoint)?void 0:t.style)?void 0:e.fill)?i:this.getColorAttribute(),fillOpacity:null!=(r=null==(s=null==(a=this._spec.centerPoint)?void 0:a.style)?void 0:s.fillOpacity)?r:1},k.q.STATE_NORMAL,c.W.Series)}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this._categoryField],z:this.dataToPositionZ.bind(this)},k.q.STATE_NORMAL,c.W.Series)}initAnimation(){var t,e;let i=null==(t=this._spec.animationAppear)?void 0:t.preset;this._nodePointMark.setAnimationConfig((0,S._8)(null==(e=b.F.getAnimationInKey("correlation"))?void 0:e({},i),(0,S.hT)("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}C.type=s.A.correlation,C.mark=r,C.builtInTheme={correlation:{centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}}},C.transformerConstructor=A;let T=()=>{(0,u.O)(),(0,f.K)(),b.F.registerSeries(C.type,C),b.F.registerAnimation("correlation",(t,e)=>Object.assign({appear:"fadeIn"===e?{type:"fadeIn"}:{type:"scaleIn"}},M.tF))}},157813:function(t,e,i){i.d(e,{m:()=>F});var a=i(241854),s=i(206065),r=i(522269),l=i(777678),n=i(75387),o=i(736299),h=i(924706),d=i(434998),u=i(531324);class p extends d.O{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(t){return"mark"===t}getDefaultTitlePattern(t){return{key:"event info",value:"event info"}}getDefaultContentList(){return[{key:t=>t.type,value:t=>t.id},{key:"event_time",value:t=>u.k.getInstance().timeFormat("%Y%m%d",t.event_time)},{key:"action_type",value:t=>t.action_type},{key:"children",value:t=>t.children}]}getTooltipData(t,e,i,a,s){var r,l,n,o;let h=super.getTooltipData(t,e,i,a,s),d=null!=(n=null==(l=null==(r=this.spec)?void 0:r[t])?void 0:l.updateContent)?n:null==(o=null==e?void 0:e[t])?void 0:o.updateContent;return h&&!d&&(h.updateContent=(t,e,i)=>{let a=[],s=t.filter(t=>"children"===t.key);return s.length>0&&s[0].value.forEach(t=>{let e=!0;for(let i in t)a.push(Object.assign(Object.assign({},s[0]),{shapeType:"circle",hasShape:e,key:i,value:t[i]+""})),e=!1}),t.concat(a)}),h}}var c=i(212264),g=i(998613);let _={fill:"#bbb",fillOpacity:.2};var m=i(358639),y=i(460038),k=i(249297),f=i(511084),v=i(267953);let S=Object.assign(Object.assign({},i(268278).UI),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}});var b=i(279090),M=i(586673),x=i(459338);class A extends s.i{constructor(){super(...arguments),this.type=n.A.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(t){(0,l.Z)(t)&&(this._seriesGroupField=t)}getTitleField(){return this._titleField}setTitleField(t){(0,l.Z)(t)&&(this._titleField=t)}getSubTitleField(){return this._subTitleField}setSubTitleField(t){(0,l.Z)(t)&&(this._subTitleField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){(0,l.Z)(t)&&(this._dotTypeField=t)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(t){(0,l.Z)(t)&&(this._highLightSeriesGroup=t)}setGridBackground(t){(0,l.Z)(t)&&(this._gridBackground=t)}initData(){var t;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map(t=>t[this._fieldY[0]]),(0,h.U)(this._option.dataSet,"objFlat",g.V),(0,h.U)(this._option.dataSet,"copyDataView",c.Y),(0,h.I)(this._option.dataSet,"dataview",o.i),null==(t=this.getViewData())||t.transform({type:"objFlat",options:"dots",level:M.BV.dotObjFlat},!1)}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground((0,r.H)(_,(null==(t=this._spec.grid)?void 0:t.background)||{}))}initMark(){this._clipMark=this._createMark(A.mark.group),this._containerMark=this._createMark(A.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(A.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(A.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(A.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(A.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(A.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(A.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){let t=this._clipMark;t&&(this.setMarkStyle(t,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",x.W.Series),t.setMarkConfig({interactive:!1,clip:!0}));let e=this._containerMark;e&&(this.setMarkStyle(e,{x:this._spec.leftAppendPadding},"normal",x.W.Series),e.setMarkConfig({interactive:!1}));let i=this._gridBackgroundMark;i&&this.setMarkStyle(i,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",x.W.Series);let a=this._gridMark;a&&this.setMarkStyle(a,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",x.W.Series);let s=this._dotMark;s&&this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),stroke:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",x.W.Series);let r=this._titleMark;r&&this.setMarkStyle(r,{fill:this.getColorAttribute(),text:t=>t[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",x.W.Series);let l=this._subTitleMark;l&&this.setMarkStyle(l,{fill:this.getColorAttribute(),text:t=>t[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",x.W.Series);let n=this._symbolMark;n&&this.setMarkStyle(n,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",x.W.Series)}dataToGridBackgroundPositionY(t){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:e,getBandwidth:i}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})-i(0)/2}dataToGridBackgroundPositionY1(t){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:e,getBandwidth:i}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fieldY),{bandPosition:this._bandPosition})+i(0)/2}dataToOpacity(t){var e,i,a,s;if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:r,getScale:l}=this._xAxisHelper;return r(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})<l(0).range()[0]||r(this.getDatumPositionValues(t,this._fieldX),{bandPosition:this._bandPosition})>l(0).range()[1]?0:null!=(s=null==(a=null==(i=null==(e=this._theme)?void 0:e.dot)?void 0:i.style)?void 0:a.fillOpacity)?s:1}dataToGridBackgroundOpacity(t){return t[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(){var t,e;super.onLayoutEnd();let i=null!=(e=null==(t=this._spec)?void 0:t.leftAppendPadding)?e:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+i},"normal",x.W.Series)}getDefaultColorDomain(){var t,e;return this._seriesGroupField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,i;return{scale:null!=(t=this._option.globalScale.getScale("color"))?t:this._getDefaultColorScale(),field:null!=(i=null!=(e=this._seriesGroupField)?e:this._seriesField)?i:a.lb}}getDotColorScale(){var t,e,i;let a=this._dotTypeField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._dotTypeField].values:this._seriesGroupField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?null==(i=this.getViewDataStatistics())?void 0:i.latestData[this._seriesField].values:[],s=this._getDataScheme();return(new m.m).domain(a).range(s)}getDotColorAttribute(){var t,e,i,s;return{scale:null!=(t=this._option.globalScale.getScale("color"))?t:this.getDotColorScale(),field:null!=(s=null!=(i=null!=(e=this._dotTypeField)?e:this._seriesGroupField)?i:this._seriesField)?s:a.lb}}initTooltip(){this._tooltipHelper=new p(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(t){super.onEvaluateEnd(t)}onMarkTreePositionUpdate(t){t.forEach(t=>{t.commit(!1,!0)})}getDotData(){var t;return null==(t=this._dotMark)?void 0:t.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}A.type=n.A.dot,A.mark=S,A.builtInTheme={dot:{dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}}};let F=()=>{(0,y.O)(),(0,f.e)(),(0,v.Y)(),(0,k.k)(),b.F.registerSeries(A.type,A)}},780615:function(t,e,i){i.d(e,{F:()=>L});var a=i(75387),s=i(504681),r=i(459338),l=i(241854),n=i(145004),o=i(924706),h=i(102094),d=i(116670),u=i(914433),p=i(505441),c=i(181645),g=i(434998),_=i(777678);class m extends g.O{constructor(t){var e,i;super(t),this.dimensionTooltipTitleCallback=(t,e)=>{var i,a,s;let r=this.series;return"transform"===(null==(i=null==e?void 0:e.mark)?void 0:i.name)?this._transformRatioText:null!=(a=this._getDimensionData(t))?a:null==(s=t.properties)?void 0:s[`${r.getCategoryField()}`]},this.markTooltipValueCallback=(t,e)=>{var i;return"transform"===(null==(i=null==e?void 0:e.mark)?void 0:i.name)?`${(100*(null==t?void 0:t[u.Er])).toFixed(1)}%`:this._getMeasureData(t)},this.markTooltipKeyCallback=(t,e)=>{var i;if("transform"===(null==(i=null==e?void 0:e.mark)?void 0:i.name))return this._transformRatioText;let{dimensionFields:a,seriesFields:s}=this._seriesCacheInfo,r=a[a.length-1];return(0,_.Z)(s[0])?null==t?void 0:t[s[0]]:null==t?void 0:t[r]},this._transformRatioText=null!=(i=null==(e=t.getSpec())?void 0:e.transformRatioText)?i:"\u8F6C\u5316\u7387"}}var y=i(896294),k=i(591431),f=i(642800),v=i(122487),S=i(701637),b=i(249297),M=i(511084);let x=Object.assign(Object.assign({},i(268278).UI),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}});var A=i(279090),F=i(306474);class C extends F.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"funnel"),t.isTransform&&this._addMarkLabelSpec(t,"transform","transformLabel")}}var T=i(687404),D=i(419063);let w=(t=>{let e={label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}};return e[t?"transform3d":"transform"]={style:{fill:{type:"palette",key:"axisGridColor"}}},e})();class P extends s.y{constructor(){super(...arguments),this.type=a.A.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=C,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t,e,i,a,s;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=null!=(t=this._spec.funnelOrient)?t:"top",this._shape=null!=(e=this._spec.shape)?e:"trapezoid",this._minLabelLineWidth=null!=(s=null==(a=null==(i=this._spec.outerLabel)?void 0:i.line)?void 0:a.minLength)?s:u.wr,this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",!this._seriesField&&this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;(0,o.U)(this._dataSet,"funnel",d.q),(0,o.U)(this._dataSet,"funnelTransform",d.z);let t=new h.V(this._dataSet,{name:`${n.Bq}_series_${this.id}_viewDataTransform`});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new T.O(this._option,t)}compile(){var t,e;super.compile(),this._funnelOuterLabelMark&&(null==(t=this._funnelOuterLabelMark.label)||t.compile({group:this._rootMark.getProduct()}),null==(e=this._funnelOuterLabelMark.line)||e.compile({group:this._rootMark.getProduct()}))}compileData(){var t;super.compileData(),null==(t=this._viewDataTransform)||t.compile()}getStatisticFields(){let t=[];return t.push({key:this._categoryField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}_statisticViewData(){var t,e,i,a,s,r,l,n,o;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:u.zT,asTransformRatio:u.ad,asReachRatio:u.Er,asHeightRatio:u.Ce,asValueRatio:u.u8,asNextValueRatio:u.VX,asLastValueRatio:u.zl,asLastValue:u.dS,asNextValue:u.L4,range:{min:null!=(e=null==(t=this._spec.range)?void 0:t.min)?e:null==(a=null==(i=this.getViewDataStatistics().latestData)?void 0:i[this.getValueField()])?void 0:a.min,max:null!=(r=null==(s=this._spec.range)?void 0:s.max)?r:null==(n=null==(l=this.getViewDataStatistics().latestData)?void 0:l[this.getValueField()])?void 0:n.max}}}),null==(o=this._viewDataTransform.getDataView())||o.transform({type:"funnelTransform",options:{asIsTransformLevel:u.o1}})}initMark(){var t,e,i,a,s,r,l,n;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},P.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:null==(t=this._theme)?void 0:t.funnel,groupKey:this._seriesField,isSeriesMark:!0,noSeparateStyle:!0},{morph:(0,v.yx)(this._spec,this._funnelMarkName),morphElementKey:this._seriesField}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},P.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:null==(e=this._theme)?void 0:e.transform,noSeparateStyle:!0}),this._funnelTransformMark&&this._funnelTransformMark.setData(this._viewDataTransform)),null==(a=null==(i=this._spec)?void 0:i.outerLabel)?void 0:a.visible){let{line:t}=null!=(s=this._spec.outerLabel)?s:{},{line:e}=null!=(l=null==(r=this._theme)?void 0:r.outerLabel)?l:{};this._funnelOuterLabelMark.label=this._createMark(P.mark.outerLabel,{themeSpec:null==(n=this._theme)?void 0:n.outerLabel,markSpec:this._spec.outerLabel,noSeparateStyle:!0,parent:!1}),this._funnelOuterLabelMark.line=this._createMark(P.mark.outerLabelLine,{themeSpec:e,markSpec:t,noSeparateStyle:!0,parent:!1})}}initTooltip(){this._tooltipHelper=new m(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){var t,e,i,a;let s=this._funnelMark;s&&this.setMarkStyle(s,{points:t=>this.getPoints(t),visible:t=>(0,_.Z)(t[this._valueField]),fill:this.getColorAttribute()},"normal",r.W.Series);let l=this._funnelTransformMark;l&&this.setMarkStyle(l,{points:t=>this.getPoints(t)},"normal",r.W.Series);let n=this._funnelOuterLabelMark.label;n&&(this.setMarkStyle(n,{text:t=>`${t[this.getCategoryField()]}`,x:t=>this._computeOuterLabelPosition(t).x,y:t=>this._computeOuterLabelPosition(t).y,textAlign:t=>this._computeOuterLabelPosition(t).align,textBaseline:t=>this._computeOuterLabelPosition(t).textBaseline,maxLineWidth:t=>this._computeOuterLabelLimit(t),width:0,height:0},"normal",r.W.Series),(0,y.Z)(this._spec.outerLabel.formatMethod)&&this.setMarkStyle(n,{text:t=>this._spec.outerLabel.formatMethod(`${t[this.getCategoryField()]}`,t)},"normal",r.W.User_Mark));let o=this._funnelOuterLabelMark.line;if(o&&n){this.setMarkStyle(o,{x:t=>this._computeOuterLabelLinePosition(t).x1,y:t=>this._computeOuterLabelLinePosition(t).y1,x1:t=>this._computeOuterLabelLinePosition(t).x2,y1:t=>this._computeOuterLabelLinePosition(t).y2},"normal",r.W.Series);let s=null!=(i=null==(e=null==(t=this._spec.outerLabel)?void 0:t.line)?void 0:e.visible)?i:null==(a=this._spec.outerLabel)?void 0:a.visible;(0,_.Z)(s)&&o.setVisible(s)}}initLabelMarkStyle(t){var e;if(!t)return;let i=t.getTarget(),a=t.getComponent();if(i===this._funnelMark){this._labelMark=t,this.setMarkStyle(t,{text:t=>`${t[this.getCategoryField()]} ${t[this.getValueField()]}`,x:t=>this._computeLabelPosition(t).x,y:t=>this._computeLabelPosition(t).y,maxLineWidth:t=>this._computeLabelLimit(t,this._spec.label),stroke:this.getColorAttribute()},"normal",r.W.Series);let i=this.getCompiler().getRootMarks();this._funnelOuterLabelMark.label&&(0,D.Ax)(i,this._funnelOuterLabelMark.label,a),this._funnelOuterLabelMark.line&&(0,D.Ax)(i,this._funnelOuterLabelMark.line,null!=(e=this._funnelOuterLabelMark.label)?e:a)}else this._funnelTransformMark&&i===this._funnelTransformMark&&(this._transformLabelMark=t,this.setMarkStyle(t,{text:t=>`${(100*(0,c.EP)(u.Er).bind(this)(t)).toFixed(1)}%`,x:t=>this._computeLabelPosition(t).x,y:t=>this._computeLabelPosition(t).y,maxLineWidth:t=>this._computeLabelLimit(t,this._spec.transformLabel)},"normal",r.W.Series))}initAnimation(){var t,e,i,a,s,r,l;let n=null!=(i=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset)?i:"clipIn";"clipIn"===n&&this._rootMark&&this._rootMark.setAnimationConfig((0,v._8)(null==(a=A.F.getAnimationInKey("cartesianGroupClip"))?void 0:a({direction:()=>this._isHorizontal()?"x":"y",width:()=>{let t=this.getRootMark().getProduct();if(t){let{x1:e,x2:i}=t.AABBBounds;return Math.max(e,i)}return this.getLayoutRect().width},height:()=>{let t=this.getRootMark().getProduct();if(t){let{y1:e,y2:i}=t.AABBBounds;return Math.max(e,i)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},n),(0,v.hT)("group",this._spec,this._markAttributeContext))),[null==(s=this._funnelOuterLabelMark)?void 0:s.label].forEach(t=>{t&&t.setAnimationConfig((0,v._8)(A.F.getAnimationInKey("fadeInOut")(),(0,v.hT)(t.name,this._spec,this._markAttributeContext)))}),[this._funnelMark,this._funnelTransformMark].forEach(t=>{t&&t.setAnimationConfig((0,v._8)(A.F.getAnimationInKey("funnel")({},n),(0,v.hT)(t.name,this._spec,this._markAttributeContext)))}),(null==(r=this._funnelOuterLabelMark)?void 0:r.line)&&this._funnelOuterLabelMark.line.setAnimationConfig((0,v._8)(null==(l=A.F.getAnimationInKey("fadeInOut"))?void 0:l(),(0,v.hT)("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var t;super.initEvent(),null==(t=this._viewDataTransform.getDataView())||t.target.addListener("change",t=>{this._viewDataTransform.updateData()})}getPoints(t){let e,i,a=this.isTransformLevel(t),s=this._getMainAxisLength(a)/2;a?(e="rect"===this._shape?this._getSecondaryAxisLength(t[u.zl])/2:this._getSecondaryAxisLength(t[u.u8])/2,i=this._getSecondaryAxisLength(t[u.u8])/2):(e=this._getSecondaryAxisLength(t[u.u8])/2,i="rect"===this._shape?e:this._getSecondaryAxisLength(t[u.VX])/2);let{x:r,y:l}=this._getPositionByData(t),n=this._getPolygonPoints([r,l],e,i,e,i,s);return"center"!==this._funnelAlign&&this._adjustPoints(n),n}isTransformLevel(t){return!!(null==t?void 0:t[u.o1])}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)}valueToPosition(t){var e,i,a;let s=null==(a=null==(i=null==(e=this.getViewData())?void 0:e.latestData)?void 0:i.find)?void 0:a.call(i,e=>e[this._categoryField]===t);return(0,_.Z)(s)?this._getPolygonCenter(this.getPoints(s)):null}dataToPosition(t,e){return e&&!this.isDatumInViewData(t)?null:this.valueToPosition(t[this._categoryField])}dataToPositionX(t){var e;return null==(e=this.dataToPosition(t))?void 0:e.x}dataToPositionY(t){var e;return null==(e=this.dataToPosition(t))?void 0:e.y}dataToPositionZ(t){return 0}_getMainAxisLength(t=!1){var e;let i=this.getViewData().latestData.length,a=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,s=!!this._spec.isTransform,r=s?0:null!=(e=this._spec.gap)?e:0,l=s?Math.max(0,i-1):0,n=this._spec.heightRatio||.5,o=(a-r*Math.max(0,i-1))/(i+n*l);return t?s?o*n:0:o}_getSecondaryAxisLength(t){let e=Number.isNaN(t)||!Number.isFinite(t)?0:t,i=this._computeMaxSize(),a=this._computeMinSize();return a+(i-a)*e}_getPositionByData(t){var e;let i=null==(e=this.getViewData().latestData)?void 0:e.findIndex(e=>e[this._categoryField]===t[this._categoryField]&&e[l.XW]===t[l.XW]);if(!(0,_.Z)(i)||i<0)return{};let a=this.isTransformLevel(t),s=this._isHorizontal(),r=s?this.getLayoutRect().height:this.getLayoutRect().width,n=s?this.getLayoutRect().width:this.getLayoutRect().height,o=r/2,h=0,d=this._getMainAxisLength(),u=this._getMainAxisLength(!0);return h+=i*(d+u)+(a?-u/2:d/2),!this._spec.isTransform&&this._spec.gap&&(h+=this._spec.gap*i),this._isReverse()&&(h=n-h),this._isHorizontal()?{x:h,y:o}:{x:o,y:h}}_getPolygonPoints(t,e,i,a,s,r){let l=t[0],n=t[1];switch(this._funnelOrient){case"left":return[{x:l-r,y:n+e},{x:l-r,y:n-a},{x:l+r,y:n-s},{x:l+r,y:n+i}];case"right":return[{x:l+r,y:n-a},{x:l+r,y:n+a},{x:l-r,y:n+i},{x:l-r,y:n-i}];case"bottom":return[{x:l+e,y:n+r},{x:l-a,y:n+r},{x:l-s,y:n-r},{x:l+i,y:n-r}];default:return[{x:l-e,y:n-r},{x:l+a,y:n-r},{x:l+s,y:n+r},{x:l-i,y:n+r}]}}_getPolygonCenter(t){if(this._isHorizontal()){let e=(t[0].x+t[3].x)/2,i=(t[0].y+t[3].y)/2;return{x:(e+(t[1].x+t[2].x)/2)/2,y:(i+(t[1].y+t[2].y)/2)/2}}let e=(t[0].x+t[3].x)/2,i=(t[0].y+t[3].y)/2;return{x:(e+(t[1].x+t[2].x)/2)/2,y:(i+(t[1].y+t[2].y)/2)/2}}_adjustPoints(t){let e,i,a;return this._isHorizontal()?(a="y","left"===this._funnelOrient?(e="bottom"===this._funnelAlign?-t[1].y:t[1].y,i="bottom"===this._funnelAlign?-t[2].y:t[2].y):(e="bottom"===this._funnelAlign?-t[0].y:t[0].y,i="bottom"===this._funnelAlign?-t[3].y:t[3].y)):(a="x","top"===this._funnelOrient?(e="left"===this._funnelAlign?t[0].x:-t[0].x,i="left"===this._funnelAlign?t[3].x:-t[3].x):(e="left"===this._funnelAlign?t[1].x:-t[1].x,i="left"===this._funnelAlign?t[2].x:-t[2].x)),t[0][a]-=e,t[1][a]-=e,t[2][a]-=i,t[3][a]-=i,t}_computeLabelPosition(t){let e=this.getPoints(t);return this._getPolygonCenter(e)}_computeLabelLimit(t,e){let i=null==e?void 0:e.limit;if((0,k.Z)(i))return i;let a=this.getPoints(t);return"shapeSize"===i?this._isHorizontal()?Math.abs(a[3].x-a[0].x):(Math.abs(a[0].x-a[1].x)+Math.abs(a[2].x-a[3].x))/2:this._isHorizontal()?Math.abs(a[3].x-a[0].x):void 0}_computeOuterLabelPosition(t){var e,i;let a,s,r=null==(e=this._spec.outerLabel)?void 0:e.position,l="center",n="middle";if(r=this._isHorizontal()?["top","bottom"].includes(r)?r:"bottom"===this._funnelAlign?"top":"bottom":["left","right"].includes(r)?r:"left"===this._funnelAlign?"right":"left",!1!==(null==(i=this._spec.outerLabel)?void 0:i.alignLabel))({x:a,y:s}=this._getPositionByData(t)),"left"===r?(a=0,l="left"):"right"===r?(a=this.getLayoutRect().width,l="right"):"top"===r?(s=0,n="top"):"bottom"===r&&(s=this.getLayoutRect().height,n="bottom");else{let{x2:e,y2:i}=this._computeOuterLabelLinePosition(t);a=e,s=i,"left"===r?(a-=u._0,l="right"):"right"===r?(a+=u._0,l="left"):"top"===r?(s-=u._0,n="bottom"):"bottom"===r&&(s+=u._0,n="top")}return{x:a,y:s,align:l,textBaseline:n}}_computeOuterLabelLimit(t){var e,i,a,s,r,l;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(t));let n=this.getPoints(t),o=(Math.abs(n[0].x-n[1].x)+Math.abs(n[2].x-n[3].x))/2,h=this.getCategoryField(),d=null==(s=null==(a=null==(i=null==(e=this._labelMark)?void 0:e.getComponent())?void 0:i.getComponent())?void 0:a.find(({attribute:e,type:i})=>{var a;return"text"===i&&(null==(a=e.data)?void 0:a[h])===t[h]},!0))?void 0:s.AABBBounds,p=d?d.x2-d.x1:0,c=this._funnelOuterLabelMark.line?this._minLabelLineWidth:0,g=this.getLayoutRect().width-Math.max(o,p);return"center"===this._funnelAlign&&(g/=2),g-c-(null!=(l=null==(r=this._spec.outerLabel)?void 0:r.spaceWidth)?l:u._0)}_computeOuterLabelLinePosition(t){var e,i,a,s,r,l,n,o,h,d;let p,c,g,_,m=this.getCategoryField(),y=null==(s=null==(a=null==(i=null==(e=this._funnelOuterLabelMark)?void 0:e.label)?void 0:i.getGraphics())?void 0:a.find(e=>{var i;return(null==(i=e.context.data[0])?void 0:i[m])===t[m]}))?void 0:s.AABBBounds,k=null==(l=null==(r=this._labelMark)?void 0:r.getComponent())?void 0:l.getComponent(),f=null==(n=null==k?void 0:k.find(({attribute:e,type:i})=>{var a;return"text"===i&&(null==(a=e.data)?void 0:a[m])===t[m]},!0))?void 0:n.AABBBounds,v=null!=(o=this._spec.outerLabel)?o:{};if(this._isHorizontal()){let e=null!=(h=v.spaceWidth)?h:u._0,i=this.getPoints(t),a=(Math.abs(i[0].y-i[1].y)+Math.abs(i[2].y-i[3].y))/2;return"top"===this._spec.outerLabel.position||"bottom"===this._funnelAlign?(g=this._getPolygonCenter(i).y-a/2-e,_=!1!==v.alignLabel?(null==y?void 0:y.y2)+e:g-e,p=this._getPolygonCenter(i).x,g-_<this._minLabelLineWidth&&(_=g-this._minLabelLineWidth)):(g=this._getPolygonCenter(i).y+a/2+e,_=!1!==v.alignLabel?(null==y?void 0:y.y1)-e:g+e,p=this._getPolygonCenter(i).x,_-g<this._minLabelLineWidth&&(_=g+this._minLabelLineWidth)),c=p,{x1:p,x2:c,y1:g,y2:_}}let S=this.getPoints(t),b=(Math.abs(S[0].x-S[1].x)+Math.abs(S[2].x-S[3].x))/2,M=(null==f?void 0:f.x2)-(null==f?void 0:f.x1)||0,x=null!=(d=v.spaceWidth)?d:u._0;return"right"===this._spec.outerLabel.position||"left"===this._funnelAlign?(p=this._getPolygonCenter(S).x+Math.max(M/2,b/2)+x,c=!1!==v.alignLabel?(null==y?void 0:y.x1)-x:p+x,g=this._getPolygonCenter(S).y,c-p<this._minLabelLineWidth&&(c=p+this._minLabelLineWidth)):(p=this._getPolygonCenter(S).x-Math.max(M/2,b/2)-x,c=!1!==v.alignLabel?(null==y?void 0:y.x2)+x:p-x,g=this._getPolygonCenter(S).y,p-c<this._minLabelLineWidth&&(c=p-this._minLabelLineWidth)),_=g,{x1:p,x2:c,y1:g,y2:_}}_computeMaxSize(){var t;let e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,i=null!=(t=this._spec.maxSize)?t:u.nr;return(0,p.Mv)(i,e)}_computeMinSize(){var t;let e=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width,i=null!=(t=this._spec.minSize)?t:u.Jt;return(0,p.Mv)(i,e)}_isHorizontal(){return"left"===this._funnelOrient||"right"===this._funnelOrient}_isReverse(){return"bottom"===this._funnelOrient||"right"===this._funnelOrient}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}P.type=a.A.funnel,P.mark=x,P.builtInTheme={funnel:w},P.transformerConstructor=C;let L=()=>{(0,S.c)(),(0,b.k)(),(0,M.e)(),A.F.registerSeries(P.type,P),A.F.registerAnimation("funnel",(t,e)=>Object.assign({appear:"clipIn"===e?void 0:{type:"fadeIn"}},f.Vs)),(0,f.BF)(),(0,f.wy)()}},122001:function(t,e,i){i.d(e,{B:()=>r,i:()=>s});var a=i(268278);let s=Object.assign(Object.assign({},i(336837).w),{segment:{name:"segment",type:"arc"},track:{name:"track",type:"arc"}}),r=Object.assign(Object.assign({},a.UI),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}})},604255:function(t,e,i){i.d(e,{R:()=>b});var a=i(777678),s=i(835151),r=i(535315),l=i(75387),n=i(122487),o=i(550145),h=i(572062),d=i(267953),u=i(122001),p=i(279090);let c={type:"fadeIn"};var g=i(306474);class _ extends g.G{constructor(){super(...arguments),this._supportStack=!1}}var m=i(568302),y=i(33829),k=i(434998);class f extends k.O{enableByType(t){return"dimension"!==t}}let v="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z";class S extends o.V{constructor(){super(...arguments),this.type=l.A.gaugePointer,this.transformerConstructor=_,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType="rect"===(null==(t=this._spec.pointer)?void 0:t.type)?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(S.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},S.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(S.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){let t=this._pointerMark,e=this._spec.pointer;t&&(this.setMarkStyle(t,{x:t=>{var i,a;let{x:s}=this._getPointerAnchor(t,e);return s-this._getPointerWidth()*(null!=(a=null==(i=null==e?void 0:e.center)?void 0:i[0])?a:0)},y:t=>{var i,a;let{y:s}=this._getPointerAnchor(t,e);return s-this._getPointerHeight(t)*(null!=(a=null==(i=null==e?void 0:e.center)?void 0:i[1])?a:0)},anchor:t=>{let{x:i,y:a}=this._getPointerAnchor(t,e);return[i,a]},fill:this.getColorAttribute(),zIndex:200}),"path"===this._pointerType?this.setMarkStyle(t,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:t=>this._getPointerAngle(t)+Math.PI/2}):this.setMarkStyle(t,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:t=>this._getPointerAngle(t)-Math.PI/2}))}initTooltip(){this._tooltipHelper=new f(this),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(t,e){var i;return null==(i=e.isOnCenter)||i?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([t[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(t){var e,i;let s=this._spec.pointer,r=this._radiusField[0];return(0,a.Z)(this.radiusAxisHelper)&&(0,a.Z)(r)?this.radiusAxisHelper.dataToPosition([t[r]])-(null!=(e=null==s?void 0:s.innerPadding)?e:0)-(null!=(i=null==s?void 0:s.outerPadding)?i:10):s.height*this._computeLayoutRadius()}_getPointerAngle(t){let e=this.angleAxisHelper.getScale().domain(),i=(0,s.CE)(e),a=(0,s.iH)(e),l=(0,r.Z)(t[this._angleField[0]],a,i);return this.angleAxisHelper.dataToPosition([l])}_getRotatedPointerCenterOffset(t){var e,i,a,s;let r=this._spec.pointer,l=this._getPointerWidth()*(null!=(i=null==(e=null==r?void 0:r.center)?void 0:e[0])?i:0),n=-this._getPointerHeight(t)*(null!=(s=null==(a=null==r?void 0:r.center)?void 0:a[1])?s:0),o=this._getPointerAngle(t)-Math.PI/2,h=Math.cos(o),d=Math.sin(o);return{x:l*h+n*d,y:-(n*h-l*d)}}initPinBackgroundMarkStyle(){let t=this._pinBackgroundMark,e=this._spec.pinBackground;t&&this.setMarkStyle(t,{x:t=>this._getPointerAnchor(t,e).x,y:t=>this._getPointerAnchor(t,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){let t=this._pinMark,e=this._spec.pin;t&&this.setMarkStyle(t,{x:t=>this._getPointerAnchor(t,e).x,y:t=>this._getPointerAnchor(t,e).y,scaleX:()=>e.width*this._computeLayoutRadius(),scaleY:()=>e.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}getInteractionTriggers(){return this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])}initAnimation(){var t,e,i;let a=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._pointerMark.setAnimationConfig((0,n._8)(null==(i=p.F.getAnimationInKey("gaugePointer"))?void 0:i({startAngle:this._startAngle},a),(0,n.hT)("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}S.type=l.A.gaugePointer,S.mark=u.B,S.builtInTheme={gaugePointer:{pointer:{type:"path",width:.4,height:.4,style:{path:"M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z"}},pin:{width:.025,height:.025,style:{path:v,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:v,fill:"#ddd"}}}},S.transformerConstructor=_;let b=()=>{p.F.registerSeries(S.type,S),(0,h.n)(),(0,d.Y)(),p.F.registerAnimation("gaugePointer",(t,e)=>{var i;let a=(i=t,"fadeIn"===e?c:{channel:{angle:{from:i.startAngle+Math.PI/2}}});return{appear:a,enter:a,disappear:{type:"fadeOut"}}}),(0,m.P)(),(0,y.$)()}},109278:function(t,e,i){i.d(e,{b:()=>S});var a=i(75387),s=i(550145),r=i(924706),l=i(241854),n=i(122487),o=i(122001),h=i(988539),d=i(384290),u=i(777678),p=i(279090),c=i(271890),g=i(306474);class _ extends g.G{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"segment")}}var m=i(224712),y=i(33829),k=i(459338),f=i(672796);class v extends s.V{constructor(){super(...arguments),this.type=a.A.gauge,this.transformerConstructor=_,this._segmentMark=null,this._trackMark=null,this._padAngle=0}setAttrFromSpec(){var t;super.setAttrFromSpec(),this._padAngle=(0,h.M4)(null!=(t=this._spec.padAngle)?t:0)}initData(){var t;super.initData(),(0,r.U)(this._option.dataSet,"spiltSegment",(t,e)=>{let i=t.slice();return i.sort((t,e)=>t[this._angleField[0]]-e[this._angleField[0]]),i.forEach((t,e)=>{t[l.Io]=t[this._angleField[0]],t[l.mh]=e>0?i[e-1][l.Io]:void 0}),i}),null==(t=this.getViewData())||t.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(v.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(v.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var t;let e=this._segmentMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var t;return this._computeLayoutRadius()*(null!=(t=this._spec.innerRadius)?t:0)},outerRadius:()=>{var t,e;return this._computeLayoutRadius()*(null!=(e=null!=(t=this._spec.radius)?t:this._spec.outerRadius)?e:1)},cap:null!=(t=this._spec.roundCap)&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0})}generateRadiusStyle(t){if(!t)return;let e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),e}initMarkStyleWithSpec(t,e){if(super.initMarkStyleWithSpec(t,e),t&&"segment"===t.name){let e=this.getSpec().segment;if(e)for(let i in e.state||{})this.setMarkStyle(t,this.generateRadiusStyle(e.state[i]),i,k.W.User_Mark)}}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var t;let e=this._trackMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var t;return this._computeLayoutRadius()*(null!=(t=this._spec.innerRadius)?t:0)},outerRadius:()=>{var t,e;return this._computeLayoutRadius()*(null!=(e=null!=(t=this._spec.radius)?t:this._spec.outerRadius)?e:1)},cap:null!=(t=this._spec.roundCap)&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100})}_getAngleValueStartWithoutMask(t){let e=this._getAngleValueStartWithoutPadAngle(t),i=this._getAngleValueEndWithoutPadAngle(t),a=(0,d.i)(e,(e+i)/2)(e+(i>e?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?(0,f.Ol)(a,this.angleAxisHelper.getScale(0)):a}_getAngleValueEndWithoutMask(t){let e=this._getAngleValueStartWithoutPadAngle(t),i=this._getAngleValueEndWithoutPadAngle(t),a=(0,d.i)(i,(e+i)/2)(i-(i>e?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?(0,f.Ol)(a,this.angleAxisHelper.getScale(0)):a}_getAngleValueStartWithoutPadAngle(t){return(0,u.Z)(t[l.mh])?this.angleAxisHelper.dataToPosition([t[l.mh]]):this._startAngle}_getAngleValueEndWithoutPadAngle(t){return this.angleAxisHelper.dataToPosition([t[l.Io]])}initAnimation(){var t,e,i;let a=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._segmentMark.setAnimationConfig((0,n._8)(null==(i=p.F.getAnimationInKey("circularProgress"))?void 0:i({startAngle:this._startAngle},a),(0,n.hT)("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}v.type=a.A.gauge,v.mark=o.i,v.builtInTheme={gauge:{outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}}},v.transformerConstructor=_;let S=()=>{p.F.registerSeries(v.type,v),(0,m.sp)(),(0,c.K)(),(0,y.$)()}},709797:function(t,e,i){i.d(e,{CC:()=>b});var a=i(102760),s=i(206065),r=i(459338),l=i(279090),n=i(642800),o=i(122487),h=i(249297),d=i(75387),u=i(835151),p=i(889897),c=i(434998);class g extends c.O{enableByType(t){return"dimension"!==t}}let _=Object.assign(Object.assign({},i(268278).UI),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}});var m=i(846070),y=i(306474);class k extends y.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"cell")}}var f=i(519636),v=i(711805);class S extends s.i{constructor(){super(...arguments),this.type=d.A.heatmap,this.transformerConstructor=k}getFieldValue(){return this._fieldValue}setFieldValue(t){this._fieldValue=(0,u.IX)(t)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){this._cellMark=this._createMark(S.mark.cell,{isSeriesMark:!0},{morph:(0,o.yx)(this._spec,S.mark.cell.name),morphElementKey:this.getDimensionField()[0]}),this._backgroundMark=this._createMark(S.mark.cellBackground)}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:t=>this.dataToPositionX(t),y:t=>this.dataToPositionY(t),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",r.W.Series)}initCellBackgroundMarkStyle(){var t,e,i;let a=(0,p.o)(null!=(i=null==(e=null==(t=this._spec.cellBackground)?void 0:t.style)?void 0:e.padding)?i:0);this.setMarkStyle(this._backgroundMark,{x:t=>{let e=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(t)-e/2+a[3]},y:t=>{let e=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(t)-e/2+a[0]},width:()=>this.getCellSize(this._xAxisHelper)-a[1]-a[3],height:()=>this.getCellSize(this._yAxisHelper)-a[0]-a[2]},"normal",r.W.Series)}getColorAttribute(){var t;return{scale:null!=(t=this._option.globalScale.getScale("color"))?t:this._getDefaultColorScale(),field:this.getFieldValue[0]}}getInteractionTriggers(){return this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])}initAnimation(){var t,e,i;let a=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset,s=(0,m.mh)(this);this._cellMark.setAnimationConfig((0,o._8)(null==(i=l.F.getAnimationInKey("heatmap"))?void 0:i(a),(0,o.hT)("cell",this._spec,this._markAttributeContext),s))}getCellSize(t){var e,i;return null!=(i=null==(e=t.getBandwidth)?void 0:e.call(t,0))?i:6}initTooltip(){this._tooltipHelper=new g(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"square"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}S.type=d.A.heatmap,S.mark=_,S.builtInTheme={heatmap:{cell:{style:{shape:"square",fillOpacity:1}},cellBackground:{visible:!1}}},S.transformerConstructor=k;let b=()=>{(0,h.k)(),(0,a.o)(),l.F.registerAnimation("heatmap",(t,e)=>Object.assign(Object.assign({},n.Vs),{appear:!1===e?{}:{type:"fadeIn"}})),(0,f.N)(),(0,v.E)(),l.F.registerSeries(S.type,S)}},75387:function(t,e,i){var a,s,r,l;i.d(e,{A:()=>a}),(r=a||(a={})).area="area",r.line="line",r.bar="bar",r.rangeColumn="rangeColumn",r.rangeArea="rangeArea",r.dot="dot",r.geo="geo",r.link="link",r.map="map",r.pie="pie",r.radar="radar",r.rose="rose",r.scatter="scatter",r.circularProgress="circularProgress",r.wordCloud="wordCloud",r.funnel="funnel",r.linearProgress="linearProgress",r.boxPlot="boxPlot",r.sankey="sankey",r.gaugePointer="gaugePointer",r.gauge="gauge",r.treemap="treemap",r.sunburst="sunburst",r.circlePacking="circlePacking",r.waterfall="waterfall",r.heatmap="heatmap",r.correlation="correlation",r.liquid="liquid",r.venn="venn",r.mosaic="mosaic",r.pictogram="pictogram",(l=s||(s={})).label="label",l.point="point",l.line="line",l.area="area",l.bar="bar",l.boxPlot="boxPlot",l.outlier="outlier",l.circlePacking="circlePacking",l.group="group",l.gridBackground="gridBackground",l.grid="grid",l.dot="dot",l.title="title",l.subTitle="subTitle",l.symbol="symbol",l.funnel="funnel",l.transform="transform",l.transformLabel="transformLabel",l.outerLabel="outerLabel",l.outerLabelLine="outerLabelLine",l.pin="pin",l.pinBackground="pinBackground",l.pointer="pointer",l.segment="segment",l.track="track",l.cell="cell",l.cellBackground="cellBackground",l.link="link",l.arrow="arrow",l.pie="pie",l.labelLine="labelLine",l.progress="progress",l.minLabel="minLabel",l.maxLabel="maxLabel",l.rose="rose",l.node="node",l.sunburst="sunburst",l.nonLeaf="nonLeaf",l.leaf="leaf",l.nonLeafLabel="nonLeafLabel",l.leaderLine="leaderLine",l.stackLabel="stackLabel",l.word="word",l.fillingWord="fillingWord",l.wordMask="wordMask",l.nodePoint="nodePoint",l.ripplePoint="ripplePoint",l.centerPoint="centerPoint",l.centerLabel="centerLabel",l.barBackground="barBackground",l.lineLabel="lineLabel",l.areaLabel="areaLabel",l.liquidGroup="liquidGroup",l.liquid="liquid",l.liquidBackground="liquidBackground",l.liquidOutline="liquidOutline",l.circle="circle",l.overlap="overlap",l.overlapLabel="overlapLabel"},955617:function(t,e,i){i.d(e,{d:()=>s});let a={type:"fadeIn"};function s(t,e){switch(e){case"grow":return{type:"horizontal"===t.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===t.direction?"positive":"negative"}};case"fadeIn":return a;default:return{type:"clipIn",options:{clipDimension:"horizontal"===t.direction?"y":"x"}}}}},74789:function(t,e,i){i.d(e,{i:()=>b});var a=i(206065),s=i(75387),r=i(563554),l=i(800466),n=i(122487),o=i(642800),h=i(268278),d=i(107548);let u=Object.assign(Object.assign({},h.UI),d.j);var p=i(173294),c=i(460038),g=i(279090),_=i(14536),m=i(846070),y=i(519636),k=i(711805),f=i(349282),v=i(453429);class S extends a.i{constructor(){super(...arguments),this.type=s.A.line,this.transformerConstructor=_.n,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var t;let e=null!=(t=this._spec.seriesMark)?t:"line";this.initLineMark("line"===e),this.initSymbolMark("point"===e)}initTooltip(){super.initTooltip();let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var t,e,i,a;let s={direction:this.direction},r=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;if(this._lineMark.setAnimationConfig((0,n._8)(null==(i=g.F.getAnimationInKey("line"))?void 0:i(s,r),(0,n.hT)("line",this._spec,this._markAttributeContext))),this._symbolMark){let t=(0,m.mh)(this);this._symbolMark.setAnimationConfig((0,n._8)(null==(a=g.F.getAnimationInKey("scaleInOut"))?void 0:a(),(0,n.hT)("point",this._spec,this._markAttributeContext),t))}}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(t){var e;let i="point"!==(null==(e=this._spec)?void 0:e.seriesMark);return e=>{var a,s;return i&&"fill"===e&&(e="stroke"),null!=(s=null==(a=this._seriesMark)?void 0:a.getAttribute(e,t))?s:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}S.type=s.A.line,S.mark=u,S.builtInTheme={line:{label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}}},S.transformerConstructor=_.n,(0,l.jB)(S,r.t);let b=()=>{(0,v.k)(),(0,f.Tq)(),(0,p.i)(),(0,c.O)(),(0,o.rt)(),(0,o.BV)(),(0,y.N)(),(0,k.E)(),g.F.registerSeries(S.type,S)}},332061:function(t,e,i){i.d(e,{c:()=>S});var a=i(241854),s=i(206065),r=i(777678),l=i(75387),n=i(924706),o=i(434998),h=i(531324);class d extends o.O{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(t){return"mark"===t}getDefaultTitlePattern(t){return{key:"link info",value:"link info"}}getDefaultContentList(){return[{key:"time",value:t=>h.k.getInstance().timeFormat("%Y%m%d %H:%M",t.from.split("_")[1])},{key:"type",value:t=>t.action_type},{key:"from",value:t=>t.from},{key:"to",value:t=>t.to}]}}var u=i(511084),p=i(460038);let c=Object.assign(Object.assign({},i(268278).UI),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}});var g=i(894641),_=i(279090),m=i(586673),y=i(519636),k=i(711805),f=i(459338);class v extends s.i{constructor(){super(...arguments),this.type=l.A.link}getFromField(){return this._fromField}setFromField(t){(0,r.Z)(t)&&(this._fromField=t)}getToField(){return this._toField}setToField(t){(0,r.Z)(t)&&(this._toField=t)}getDotTypeField(){return this._dotTypeField}setDotTypeField(t){(0,r.Z)(t)&&(this._dotTypeField=t)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(t){(0,r.Z)(t)&&(this._dotSeriesSpec=t)}_getDotData(){let t=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return t?t.getRawData().latestData:[]}initData(){var t;super.initData(),(0,n.U)(this._option.dataSet,"linkDotInfo",g.P),null==(t=this.getViewData())||t.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:m.BV.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(v.mark.group),this._containerMark=this._createMark(v.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(v.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(v.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var t,e,i,a;let s=this._clipMark;s&&(this.setMarkStyle(s,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",f.W.Series),s.setMarkConfig({interactive:!1,clip:!0}));let r=this._containerMark;r&&(this.setMarkStyle(r,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",f.W.Series),r.setMarkConfig({interactive:!1}));let l=this._linkMark;l&&this.setMarkStyle(l,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",f.W.Series);let n=this._arrowMark;if(n){let s=null!=(a=null==(i=null==(e=null==(t=this._theme)?void 0:t.arrow)?void 0:e.style)?void 0:i.size)?a:10;this.setMarkStyle(n,{x:this.dataToPositionXTo.bind(this),y:t=>this.dataToPositionArrowYTo(t,s),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:s,symbolType:t=>this.isPositionYFromHigher(t)?"triangleDown":"triangleUp"},"normal",f.W.Series)}}afterInitMark(){super.afterInitMark()}dataToPositionXFrom(t){if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(t){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._fromField+"_yField"))}dataToPositionXTo(t){if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(t){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(t,e){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:i}=this._yAxisHelper,a=this.isPositionYFromHigher(t)?-e/2:e/2;return i(this.getDatumPositionValues(t,this._toField+"_yField"),{bandPosition:this._bandPosition})+a}dataToOpacity(t){return this.isPositionXOuterRange(t,this._fromField+"_xField")||this.isPositionXOuterRange(t,this._toField+"_xField")||t[this._fromField]===t[this._toField]?0:1}isPositionYFromHigher(t){return this.dataToPositionYFrom(t)<this.dataToPositionYTo(t)}isPositionXOuterRange(t,e){if(!this._xAxisHelper)return!1;let{dataToPosition:i,getScale:a}=this._xAxisHelper;return i(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})<a(0).range()[0]||i(this.getDatumPositionValues(t,e),{bandPosition:this._bandPosition})>a(0).range()[1]}getDefaultColorDomain(){var t,e;return this._dotTypeField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._dotTypeField].values:this._seriesField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._seriesField].values:[]}getColorAttribute(){var t,e,i;return{scale:null!=(t=this._option.globalScale.getScale("color"))?t:this._getDefaultColorScale(),field:null!=(i=null!=(e=this._dotTypeField)?e:this._seriesField)?i:a.lb}}getInteractionTriggers(){let t=[];return this._linkMark&&t.push(this._linkMark),this._arrowMark&&t.push(this._arrowMark),this._parseInteractionConfig(t)}initTooltip(){this._tooltipHelper=new d(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(t){t.forEach(t=>{t.commit(!1,!0)})}getDotInfoData(){var t,e;return null==(e=null!=(t=this._linkMark)?t:this._arrowMark)?void 0:e.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}v.type=l.A.link,v.mark=c,v.builtInTheme={link:{arrow:{style:{size:10}}}};let S=()=>{(0,u.e)(),(0,p.O)(),(0,y.N)(),(0,k.E)(),_.F.registerSeries(v.type,v)}},110838:function(t,e,i){let a;i.d(e,{Jw:()=>m,LO:()=>g,OO:()=>c,uU:()=>_});var s=i(586831),r=i(813215),l=i(131386),n=i(468342),o=i(102094),h=i(588712),d=i(924706),u=i(27203),p=i(521107);let c=new Map;function g(t,e,i={type:"geojson",centroid:!0}){c.has(t)&&(0,h.ZK)(`map type of '${t}' already exists, will be overwritten.`),a||(a=new s.q,(0,d.I)(a,"geojson",r.bL),(0,d.I)(a,"topojson",l.Q),(0,d.U)(a,"simplify",n.o));let _=new o.V(a),m=(0,u.Z)({},{centroid:!0,simplify:!1},i);"topojson"===i.type?_.parse(e,{type:"topojson",options:m}):_.parse(e,{type:"geojson",options:m});let{simplify:y}=i;!0===y?_.transform({type:"simplify"}):(0,p.Z)(y)&&_.transform({type:"simplify",options:y}),c.set(t,_)}function _(t){c.has(t)?c.delete(t):(0,h.ZK)(`map type of '${t}' does not exists.`)}function m(t){return c.get(t)}},892332:function(t,e,i){i.d(e,{p:()=>L});var a=i(777678),s=i(93774),r=i(50026),l=i(102094),n=i(110838),o=i(929697),h=i(75387),d=i(504681),u=i(576225),p=i(145004);class c extends d.y{constructor(){super(...arguments),this.type=h.A.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var t;return null==(t=this._mapViewData)?void 0:t.getDataView()}get nameField(){return this._nameField}set nameField(t){this._nameField=t}get valueField(){return this._valueField}set valueField(t){this._valueField=t}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(t){this._coordinateHelper=t}getStatisticFields(){let t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}getGroupFields(){return null}dataToPosition(t,e){var i;let a=null;if(!t||e&&!this.isDatumInViewData(t))return a;let{dataToPosition:s,latitudeField:r,longitudeField:l}=this._coordinateHelper;if(null===(a=this.nameToPosition(t))){let e=l?null==t?void 0:t[l]:Number.NaN,n=r?null==t?void 0:t[r]:Number.NaN;a=null!=(i=null==s?void 0:s([e,n]))?i:null}return a}nameToPosition(t){let e=this.getDatumName(t);return(0,u.Z)(e)?null:this.nameValueToPosition(e)}nameValueToPosition(t){var e,i;let a=null==(i=null==(e=this.getMapViewData())?void 0:e.latestData)?void 0:i.filter(e=>this.getDatumName(e)===t)[0];if((0,u.Z)(a))return null;let{dataToPosition:s}=this._coordinateHelper,r=this.getDatumCenter(a),l=null==s?void 0:s(r);return(0,u.Z)(l)||isNaN(l.x)||isNaN(l.y)?null:l}dataToLatitude(t){if(!this._coordinateHelper)return Number.NaN;let{dataToLatitude:e}=this._coordinateHelper;return e(t)}dataToLongitude(t){if(!this._coordinateHelper)return Number.NaN;let{dataToLatitude:e}=this._coordinateHelper;return e(t)}valueToPosition(t,e){return{x:this.dataToLongitude(t),y:this.dataToLatitude(e)}}positionToData(t){}latitudeToData(t){}longitudeToData(t){}dataToPositionX(t){var e;return null==(e=this._option)||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return null==(e=this._option)||e.onError("Method not implemented."),0}dataToPositionZ(t){var e;return null==(e=this._option)||e.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var t;null==(t=this._mapViewData)||t.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){let t=`${p.Bq}_series_${this.id}_mapViewDataStatic`;this._mapViewDataStatistics=this.createStatisticalData(t,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var t,e,i,a,s;return this._seriesField?null!=(s=null!=(e=null==(t=this.getRawDataStatisticsByField(this._seriesField))?void 0:t.values)?e:null==(a=null==(i=this._mapViewDataStatistics)?void 0:i.latestData[this._seriesField])?void 0:a.values)?s:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}fillData(){var t,e;super.fillData(),null==(t=this._mapViewData.getDataView())||t.reRunAllTransform(),null==(e=this._mapViewDataStatistics)||e.reRunAllTransform()}getActiveMarks(){return[]}}var g=i(45554),_=i(212264),m=i(924706),y=i(434998);class k extends y.O{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=t=>{var e;let i=this.series;return null!=(e=this._getDimensionData(t))?e:i.getDatumName(t)}}}var f=i(241854),v=i(459338),S=i(122487),b=i(642800),M=i(572062);let x=Object.assign(Object.assign({},i(268278).UI),{area:{name:"area",type:"path"}});var A=i(279090),F=i(597287),C=i(586673),T=i(306474);class D extends T.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"area",void 0,void 0,!1)}}var w=i(687404);class P extends c{constructor(){super(...arguments),this.type=h.A.map,this.transformerConstructor=D,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var t,e;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||null==(t=this._option)||t.onError(`map type '${this.map}' is not specified !`),n.OO.get(this.map)||null==(e=this._option)||e.onError(`'${this.map}' data is not registered !`)}initData(){var t,e;super.initData(),(0,m.U)(this._dataSet,"copyDataView",_.Y),(0,m.U)(this._dataSet,"map",g.U),(0,m.U)(this._dataSet,"lookup",o.P);let i=n.OO.get(this.map);i||null==(t=this._option)||t.onError("no valid map data found!");let a=new l.V(this._dataSet,{name:`map_${this.id}_data`});a.parse([i],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:C.BV.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var t;return null==(t=this._data)?void 0:t.getLatestData()},key:g.v,fields:this._nameField,set:(t,e)=>{e&&Object.keys(e).forEach(i=>{i in t||(t[i]=e[i])})}}}),null==(e=this._data)||e.getDataView().target.addListener("change",a.reRunAllTransform),this._mapViewData=new w.O(this._option,a)}compileData(){var t;super.compileData(),null==(t=this._mapViewData)||t.compile()}initMark(){this._pathMark=this._createMark(P.mark.area,{groupKey:this.getDimensionField()[0],isSeriesMark:!0},{morph:(0,S.yx)(this._spec,P.mark.area.name),morphElementKey:this.getDimensionField()[0]}),this._pathMark.setData(this._mapViewData)}initMarkStyle(){let t=this._pathMark;t&&(this.setMarkStyle(t,{fill:t=>{var e,i,s,r;return(0,a.Z)(t[null!=(e=this._seriesField)?e:f.lb])?(null!=(i=this._option.globalScale.getScale("color"))?i:this._getDefaultColorScale()).scale(t[null!=(s=this._seriesField)?s:f.lb]):null==(r=this._spec)?void 0:r.defaultFillColor},path:this.getPath.bind(this)},"normal",v.W.Series),t.setPostProcess("fill",t=>(0,a.Z)(t)?t:this._spec.defaultFillColor),this.setMarkStyle(t,{smoothScale:!0},"normal",v.W.Built_In))}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{text:t=>this.getDatumName(t),x:t=>{var e;return null==(e=this.dataToPosition(t))?void 0:e.x},y:t=>{var e;return null==(e=this.dataToPosition(t))?void 0:e.y}}))}initAnimation(){var t;this._pathMark.setAnimationConfig((0,S._8)(null==(t=A.F.getAnimationInKey("fadeInOut"))?void 0:t(),(0,S.hT)("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new k(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(t){var e;let i=this._areaCache.get(t[f.vM]);if(i)return i.shape;let a=null==(e=this._coordinateHelper)?void 0:e.shape(t);return this._areaCache.set(t[f.vM],{shape:a}),a}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._mapViewData=null}handleZoom(t){var e;let{scale:i,scaleCenter:a}=t;if(1===i)return;let r=this.getRootMark().getProduct();r&&(r.attribute.postMatrix||r.setAttributes({postMatrix:new s.y}),r.scale(i,i,a));let l=null==(e=this._labelMark)?void 0:e.getComponent();l&&l.renderInner()}handlePan(t){var e;let{delta:i}=t;if(0===i[0]&&0===i[1])return;let a=this.getRootMark().getProduct();a&&(a.attribute.postMatrix||a.setAttributes({postMatrix:new s.y}),a.translate(i[0],i[1]));let r=null==(e=this._labelMark)?void 0:e.getComponent();r&&r.renderInner()}getDatumCenter(t){var e,i,a,s;return this._centroidProperty&&(null==(e=t.properties)?void 0:e[this._centroidProperty])?null==(i=t.properties)?void 0:i[this._centroidProperty]:(0,r.Z)(t.centroidX*t.centroidY)?[t.centroidX,t.centroidY]:(null==(a=t.properties)?void 0:a.center)?t.properties.center:(null==(s=t.properties)?void 0:s.centroid)?t.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(t){var e;if(t[this.nameField])return t[this.nameField];let i=null==(e=t.properties)?void 0:e[this._nameProperty];if(i){if(this._spec.nameMap&&this._spec.nameMap[i])return this._spec.nameMap[i];if(this._spec.showDefaultName||!this._spec.nameMap)return i}return""}dataToPositionX(t){var e;return null==(e=this._option)||e.onError("Method not implemented."),0}dataToPositionY(t){var e;return null==(e=this._option)||e.onError("Method not implemented."),0}viewDataUpdate(t){var e,i,a;super.viewDataUpdate(t),null==(i=null==(e=this._mapViewData)?void 0:e.getDataView())||i.reRunAllTransform(),null==(a=this._mapViewData)||a.updateData()}_getDataIdKey(){return f.vM}getActiveMarks(){return[this._pathMark]}}P.type=h.A.map,P.mark=x,P.builtInTheme={map:{defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}}},P.transformerConstructor=D;let L=()=>{(0,F.zW)(),(0,M.n)(),A.F.registerSeries(P.type,P),A.F.registerImplement("registerMap",n.LO),A.F.registerImplement("unregisterMap",n.uU),(0,b.wy)()}},107548:function(t,e,i){i.d(e,{j:()=>a});let a={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}}},14536:function(t,e,i){i.d(e,{n:()=>s});var a=i(306474);class s extends a.G{_transformLabelSpec(t){var e,i,a;!1!==(null==(e=t.point)?void 0:e.visible)&&!1!==(null==(a=null==(i=t.point)?void 0:i.style)?void 0:a.visible)?this._addMarkLabelSpec(t,"point"):this._addMarkLabelSpec(t,"line"),this._addMarkLabelSpec(t,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}},563554:function(t,e,i){i.d(e,{t:()=>c});var a=i(145004),s=i(102094),r=i(75464),l=i(459338),n=i(790863),o=i(122487),h=i(26982),d=i(64510),u=i(107548),p=i(522269);class c{addSamplingCompile(){if(this._spec.sampling){let{width:t,height:e}=this._region.getLayoutRect(),i=this._fieldY,a=this._fieldX;this._data&&this._data.setTransform([{type:"dataSampling",size:"horizontal"===this._direction?e:t,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?a[0]:i[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}addOverlapCompile(){var t;if(this._spec.markOverlap){let e=[];e.push({type:"symbolOverlap",direction:"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),null==(t=this._symbolMark)||t.setTransform(e)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(t){return this._lineMark=this._createMark(u.j.line,{groupKey:this._seriesField,isSeriesMark:null==t||t},{morphElementKey:this.getDimensionField()[0]}),this._lineMark}initLineMarkStyle(t,e){var i,a;let s=this._lineMark;if(s){if(this.setMarkStyle(s,{stroke:this.getColorAttribute()},"normal",l.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(s,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",l.W.Series),this.event.on(r.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(s,"defined")}),"polar"===this.coordinate)this.setMarkStyle(s,{lineJoin:"bevel",curveType:n.s,closePath:!0},"normal",l.W.Series);else{let r=null!=e?e:null==(a=null==(i=this.getSpec().line)?void 0:i.style)?void 0:a.curveType,o=r===n.l?"horizontal"===t?"monotoneY":"monotoneX":r;this.setMarkStyle(s,{curveType:o},"normal",l.W.Built_In)}this.setMarkStyle(s,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",l.W.Series)}return s}_getEventElement(t,e=!1){let i=[];return t.dimensionInfo.some(t=>(t.data.some(t=>t.series===this&&(i=t.datum,!0)),!i.length)),i}_dimensionTrigger(t){let e=this._getEventElement(t);switch(t.action){case"enter":this._symbolActiveMark.getDataView().parse(e),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(t){if(!1!==(this._spec.point||{}).visible&&(this._symbolMark=this._createMark(u.j.point,{groupKey:this._seriesField,isSeriesMark:!!t},{morph:(0,o.yx)(this._spec,u.j.point.name),morphElementKey:this.getDimensionField()[0]})),!0===this._spec.activePoint){let t=new s.V(this._option.dataSet,{name:`${a.Bq}_series_${this.id}_active_point`});t.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:t,parent:this._region.getInteractionMark()},{morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){let t=this._symbolMark;if(!t)return this._initSymbolActiveMarkAlone(),t;if(this._initSymbolMark(t),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){for(let e in this._symbolActiveMark.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this._symbolMark.stateStyle)for(let i in this._symbolActiveMark.stateStyle[e]={},this._symbolMark.stateStyle[e])"visible"!==i&&(this._symbolActiveMark.stateStyle[e][i]={style:null,level:l.W.Series,referer:t});this._symbolActiveMark.state.changeStateInfo({stateValue:d.q.STATE_DIMENSION_HOVER,filter:()=>!0})}return t}_initSymbolMark(t){t&&(this.setMarkStyle(t,{fill:this.getColorAttribute()},"normal",l.W.Series),this.setMarkStyle(t,{x:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionX(t):Number.NaN,y:t=>"zero"===this._invalidType||this._getInvalidDefined(t)?this.dataToPositionY(t):Number.NaN,z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",l.W.Series))}_initSymbolActiveMarkAlone(){var t,e;let i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(null==(e=null==(t=this._spec[u.j.point.name])?void 0:t.state)?void 0:e.dimension_hover)&&(i.setVisible(!0),this.event.on(h.C.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,(0,p.H)({},this._spec[u.j.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:d.q.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(t){var e;t&&("symbol"!==(null==(e=t.getTarget())?void 0:e.type)&&t.setRule("line-data"),this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},"normal",l.W.Series),this.event.on(r.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(t,"visible")}))}initLineLabelMarkStyle(t){t&&this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>{var e;return null!=(e=t[this.getSeriesField()])?e:this.getSeriesKeys()[0]},z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(t,e){var i,a,s,r;if(!t)return;let n=this._isFieldAllValid();if("zero"===this._invalidType||n){if(!0===(null==(a=null==(i=t.stateStyle.normal)?void 0:i[e])?void 0:a.style))return;this.setMarkStyle(t,{[e]:!0},"normal",l.W.Series)}else{if(!0!==(null==(r=null==(s=t.stateStyle.normal)?void 0:s[e])?void 0:r.style))return;this.setMarkStyle(t,{[e]:this._getInvalidDefined.bind(this)},"normal",l.W.Series)}t.compileEncode()}_isFieldAllValid(){let t=this.getViewDataStatistics(),e=this.getStackValueField();return!!(t&&t.latestData&&e)&&t.latestData[e]&&t.latestData[e].allValid}}},825760:function(t,e,i){i.d(e,{iA:()=>V});var a=i(777678),s=i(988539),r=i(102094),l=i(248038),n=i(459338),o=i(241854),h=i(145004),d=i(62209),u=i(672796),p=i(181645),c=i(727891),g=i(75387),_=i(935488),m=i(924706),y=i(194457),k=i(279090);function f(t,e,i){return(a,s,r)=>e?"radius"===t.growField?{overall:0}:{overall:t.growFrom(a,s,i)}:{overall:!1}}let v=t=>({type:"radius"===t.growField?"growRadiusIn":"growAngleIn",options:f(t,!0,y.h.appear)}),S={type:"fadeIn"};function b(t,e){if(!1===e)return{};switch(e){case"fadeIn":return S;case"growRadius":return v(Object.assign(Object.assign({},t),{growField:"radius"}));default:return v(Object.assign(Object.assign({},t),{growField:"angle"}))}}var M=i(122487),x=i(50026),A=i(224712);let F=Object.assign(Object.assign({},i(268278).UI),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}});var C=i(576225),T=i(933248),D=i(522269),w=i(306474);class P extends w.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"pie")}_mergeThemeToSpec(t,e){let i=this._theme,a=t;if(this._shouldMergeThemeToSpec()){let i=this._getDefaultSpecFromChart(e);a=(0,D.H)({},this._theme,i,t);let s=(t,e)=>(0,D.H)({},"inside"===t||"inside-center"===t?this._theme.innerLabel:this._theme.outerLabel,e);(0,T.Z)(a.label)?a.label=a.label.map(t=>s(t.position,t)):a.label=s(a.label.position,a.label)}return{spec:a,theme:i}}_getDefaultSpecFromChart(t){var e;let i=null!=(e=super._getDefaultSpecFromChart(t))?e:{},{centerX:s,centerY:r}=t;return(0,a.Z)(s)&&(i.centerX=s),(0,a.Z)(r)&&(i.centerY=r),Object.keys(i).length>0?i:void 0}}var L=i(238218),R=i(75464),E=i(2837),I=i(505441),O=i(687404);class H extends c.H{constructor(){super(...arguments),this.transformerConstructor=P,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var t,e;let i=this._region.getLayoutRect();return{x:(0,I.Mv)(null==(t=this._spec)?void 0:t.centerX,i.width,i,i.width/2),y:(0,I.Mv)(null==(e=this._spec)?void 0:e.centerY,i.height,i,i.height/2)}},this._startAngle=l.JK,this._endAngle=l.Uw,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=t=>{let e=t[l.yz];if((0,C.Z)(e))return null;let i=this.computeDatumRadius(t),a=this.computeDatumInnerRadius(t),r=this.computeCenter(t);return(0,s.op)(r,(i+a)/2,e)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}setAttrFromSpec(){var t,e,i,r,l,n;super.setAttrFromSpec(),this._centerOffset=null!=(t=this._spec.centerOffset)?t:0,this._cornerRadius=null!=(e=this._spec.cornerRadius)?e:0;let o=(0,d.kq)((0,a.Z)(this._spec.startAngle)?(0,s.M4)(this._spec.startAngle):this._startAngle,(0,a.Z)(this._spec.endAngle)?(0,s.M4)(this._spec.endAngle):this._endAngle);this._startAngle=o.startAngle,this._endAngle=o.endAngle,this._padAngle=(0,a.Z)(this._spec.padAngle)?(0,s.M4)(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=null!=(r=null==(i=this._spec.emptyPlaceholder)?void 0:i.showEmptyCircle)&&r,this._showAllZero=null!=(l=this._spec.showAllZero)&&l,this._supportNegative=null!=(n=this._spec.supportNegative)&&n}initData(){super.initData();let t=this.getViewData();if(!t)return;(0,m.U)(this._dataSet,"pie",_.v),t.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>(0,a.Z)(this._spec.minAngle)?(0,s.M4)(this._spec.minAngle):0,asStartAngle:l.FI,asEndAngle:l.A8,asRatio:l.Y1,asMiddleAngle:l.yz,asRadian:l.xt,asQuadrant:l.hk,asK:l.dr,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);let e=new r.V(this._dataSet,{name:`${h.Bq}_series_${this.id}_viewDataLabel`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new O.O(this._option,e)}compileData(){var t;super.compileData(),null==(t=this._viewDataLabel)||t.compile()}initMark(){this._pieMark=this._createMark(Object.assign(Object.assign({},H.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:o.XW,groupKey:this._seriesField,isSeriesMark:!0},{morph:(0,M.yx)(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}),this._data.addRelatedMark(this._emptyArcMark))}startAngleScale(t){return(0,p.EP)(l.FI)(t)}endAngleScale(t){return(0,p.EP)(l.A8)(t)}_computeLayoutRadius(){return(0,E.C5)(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){let t={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:(0,u.My)(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:(0,u.My)(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:t=>this.startAngleScale(t),endAngle:t=>this.endAngleScale(t),padAngle:this._padAngle,centerOffset:this._centerOffset},e=this._pieMark;e&&this.setMarkStyle(e,t,"normal",n.W.Series);let i=this._emptyArcMark;i&&this.setMarkStyle(i,Object.assign(Object.assign({},t),{visible:()=>{let t=this.getViewData().latestData;return!t||!t.length}}),"normal",n.W.Series)}getInteractionTriggers(){return this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(t,e){if(super.initMarkStyleWithSpec(t,e),t.name===this._pieMarkName){let e=this.getSpec()[t.name];if(e)for(let i in e.state||{})this.setMarkStyle(t,this.generateRadiusStyle(e.state[i]),i,n.W.User_Mark)}"emptyCircle"===t.name&&this.setMarkStyle(t,this.generateRadiusStyle(e.style),"normal",n.W.User_Mark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{visible:(0,p.EP)(L.EY).bind(this),text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var t;super.initEvent(),null==(t=this._viewDataLabel.getDataView())||t.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd()}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(R.$7.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(t){if(!t)return;let e={};return t.outerRadius&&(e.outerRadius=()=>this._computeLayoutRadius()*t.outerRadius),t.innerRadius&&(e.innerRadius=()=>this._computeLayoutRadius()*t.innerRadius),t.cornerRadius&&(e.cornerRadius=()=>this._computeLayoutRadius()*t.cornerRadius),e}computeCenter(t){return{x:this._pieMark.getAttribute("x",t,"normal"),y:this._pieMark.getAttribute("y",t,"normal")}}getRadius(t="normal"){var e,i,a,s,r,l,n;let o="normal"===t?null==(a=null==(i=this.getSpec()[(null==(e=this._pieMark)?void 0:e.name)||"pie"])?void 0:i.style)?void 0:a.outerRadius:null==(n=null==(l=null==(r=this.getSpec()[(null==(s=this._pieMark)?void 0:s.name)||"pie"])?void 0:r.state)?void 0:l[t])?void 0:n.outerRadius;return null!=o?o:this._outerRadius}getInnerRadius(t="normal"){var e,i,a,s,r,l,n;let o="normal"===t?null==(a=null==(i=this.getSpec()[(null==(e=this._pieMark)?void 0:e.name)||"pie"])?void 0:i.style)?void 0:a.innerRadius:null==(n=null==(l=null==(r=this.getSpec()[(null==(s=this._pieMark)?void 0:s.name)||"pie"])?void 0:r.state)?void 0:l[t])?void 0:n.innerRadius;return null!=o?o:this._innerRadius}computeRadius(t,e){return this._computeLayoutRadius()*t*((0,C.Z)(e)?1:e)+this._centerOffset}computeDatumRadius(t,e){return this._computeLayoutRadius()*this.getRadius(e)+this._centerOffset}_compareSpec(t,e,i){i=null!=i?i:{data:!0};let a=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];a.forEach(t=>{i[t]=!0});let s=super._compareSpec(t,e,i);return t=null!=t?t:{},a.some(i=>t[i]!==e[i])&&(s.reRender=!0,s.change=!0),s}computeDatumInnerRadius(t,e){return this._computeLayoutRadius()*this.getInnerRadius(e)+this._centerOffset}dataToPosition(t,e){let i=t[l.yz];if((0,C.Z)(i)||e&&!this.isDatumInViewData(t))return null;let a=this.computeDatumRadius(t),r=this.computeCenter(t);return(0,s.op)(r,a,i)}initAnimation(){var t,e,i;let a={growFrom:(t,e,i)=>{var a,s;if(i===y.h.appear)return this._startAngle;if(i===y.h.disappear)return this._endAngle;let r=[y.h.disappear,y.h.exit],l=this._pieMark.getGraphics(),n=null==t?void 0:t[o.vM];if(void 0===l.find(t=>{var e;return(null==(e=t.context.data[0])?void 0:e[o.vM])<n}))return this._startAngle;if(void 0===l.find(t=>{var e;return(null==(e=t.context.data[0])?void 0:e[o.vM])>n}))return this._endAngle;let h=[...l].reverse().find(t=>{var e;return(null==(e=t.context.data[0])?void 0:e[o.vM])<n});return r.includes(i)?null==(a=null==h?void 0:h.getFinalAttribute())?void 0:a.endAngle:null==(s=null==h?void 0:h.attribute)?void 0:s.endAngle}},r=null==(t=this._spec.animationAppear)?void 0:t.preset;if(this._pieMark){let t=(0,M._8)(null==(e=k.F.getAnimationInKey("pie"))?void 0:e(a,r),(0,M.hT)("pie",this._spec,this._markAttributeContext));t.normal&&t.normal.type&&(t.normal=function(t,e){var i,a,r,n;let o=null!=(a=null==(i=e.options)?void 0:i.distance)?a:10,h=(0,x.Z)(e.duration)?e.duration/2:1e3,d=null!=(r=e.options.easing)?r:"cubicOut";return{oneByOne:e.oneByOne,loop:null!=(n=e.loop)&&n,timeSlices:[{duration:h,effects:{easing:d,channel:{x:{from:e=>t.getAttribute("x",e),to:e=>t.getAttribute("x",e)+(0,s.op)({x:0,y:0},o,e[l.yz]).x},y:{from:e=>t.getAttribute("y",e),to:e=>t.getAttribute("y",e)+(0,s.op)({x:0,y:0},o,e[l.yz]).y}}}},{duration:h,effects:{easing:d,channel:{x:{to:e=>t.getAttribute("x",e),from:e=>t.getAttribute("x",e)+(0,s.op)({x:0,y:0},o,e[l.yz]).x},y:{to:e=>t.getAttribute("y",e),from:e=>t.getAttribute("y",e)+(0,s.op)({x:0,y:0},o,e[l.yz]).y}}}}]}}(this._pieMark,t.normal)),this._pieMark.setAnimationConfig(t)}if(this._emptyArcMark){let t=(0,M._8)(null==(i=k.F.getAnimationInKey("emptyCircle"))?void 0:i(a,null!=r?r:"fadeIn"));this._emptyArcMark.setAnimationConfig(t)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){return e}getActiveMarks(){return[this._pieMark]}}H.transformerConstructor=P,H.mark=F,H.builtInTheme={pie:{outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}},emptyCircle:{style:{fill:{type:"palette",key:"emptyCircleColor"},fillOpacity:1}}}};class B extends H{constructor(){super(...arguments),this.type=g.A.pie}}B.type=g.A.pie;let V=()=>{(0,A.sp)(),k.F.registerAnimation("pie",(t,e)=>({appear:b(t,e),enter:{type:"radius"===t.growField?"growRadiusIn":"growAngleIn",easing:"linear",options:f(t,!0,y.h.enter)},exit:{type:"radius"===t.growField?"growRadiusOut":"growAngleOut",easing:"linear",options:f(t,!0,y.h.exit)},disappear:{type:"radius"===t.growField?"growRadiusOut":"growAngleOut",options:f(t,!0,y.h.exit)}})),k.F.registerAnimation("emptyCircle",(t,e)=>({appear:b(t,e)})),k.F.registerSeries(B.type,B)}},727891:function(t,e,i){i.d(e,{H:()=>u});var a=i(777678),s=i(835151),r=i(576225),l=i(459774),n=i(248038),o=i(504681),h=i(846070),d=i(75464);class u extends o.y{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=n.KZ,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(t){return this._angleField=(0,a.Z)(t)?(0,s.IX)(t):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(t){return this._radiusField=(0,a.Z)(t)?(0,s.IX)(t):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(t){return this._innerRadiusField=(0,s.IX)(t),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(t){return this._radiusScale=t,t}get angleScale(){return this._angleScale}setAngleScale(t){return this._angleScale=t,t}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(t){this._angleAxisHelper=t,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(t){this._radiusAxisHelper=t,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(t,e){if((0,r.Z)(t)||(0,r.Z)(e)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};let i=this.radiusAxisHelper.dataToPosition((0,s.IX)(e));if(i<0){if("break"===this._invalidType||"link"===this._invalidType)return{x:Number.NaN,y:Number.NaN};if("zero"===this._invalidType)return this.angleAxisHelper.center()}let a=this.angleAxisHelper.dataToPosition((0,s.IX)(t));return this.angleAxisHelper.coordToPoint({angle:a,radius:i})}dataToPosition(t,e){return t&&this.angleAxisHelper&&this.radiusAxisHelper?e&&!this.isDatumInViewData(t)?null:this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getDatumPositionValues(t,this._radiusField)):null}dataToPositionX(t){var e;return null==(e=this.dataToPosition(t))?void 0:e.x}dataToPositionY(t){var e;return null==(e=this.dataToPosition(t))?void 0:e.y}dataToPositionZ(t){return 0}positionToData(t){}radiusToData(t){}angleToData(t){}getStatisticFields(){var t,e;let i=[];return(null==(t=this.radiusAxisHelper)?void 0:t.getScale)&&this._radiusField.forEach(t=>{let e={key:t,operations:[]};(0,l.z2)(this.radiusAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),(null==(e=this.angleAxisHelper)?void 0:e.getScale)&&this._angleField.forEach(t=>{let e={key:t,operations:[]};(0,l.z2)(this.angleAxisHelper.getScale(0).type)?e.operations=["max","min"]:e.operations=["values"],i.push(e)}),i}setAttrFromSpec(){super.setAttrFromSpec(),(0,a.Z)(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),(0,a.Z)(this._spec.radius)&&(this._outerRadius=this._spec.radius),(0,a.Z)(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),(0,a.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){let t=this._angleAxisHelper||this._radiusAxisHelper;if(t)return t.layoutRadius();let{width:e,height:i}=this._region.getLayoutRect();return Math.min(e/2,i/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(d.$7.scaleDomainUpdate,{filter:t=>{var e;return t.model.id===(null==(e=this._angleAxisHelper)?void 0:e.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var t,e;(null==(e=null==(t=this.getViewData())?void 0:t.latestData)?void 0:e.length)&&(0,h.fd)(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){let t=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(e=>{t.push(e)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(e=>{t.push(e)}),t}}},271890:function(t,e,i){i.d(e,{K:()=>r});var a=i(279090);let s={type:"fadeIn"},r=()=>{a.F.registerAnimation("circularProgress",(t,e)=>{var i;return{appear:(i=t,"fadeIn"===e?s:{type:"growAngleIn",options:{overall:i.startAngle}}),enter:{type:"growAngleIn"},disappear:{type:"growAngleOut"}}})}},336837:function(t,e,i){i.d(e,{w:()=>a});let a=Object.assign(Object.assign({},i(268278).UI),{group:{name:"group",type:"group"}})},550145:function(t,e,i){i.d(e,{V:()=>m});var a=i(988539),s=i(777678),r=i(599815),l=i(576225),n=i(50026),o=i(241854),h=i(248038),d=i(459338),u=i(672796),p=i(727891),c=i(356109),g=i(312555),_=i(336837);class m extends p.H{constructor(){super(...arguments),this._arcGroupMark=null,this._getAngleValueStart=t=>{let e=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(e)){let n,h=t[this.getStack()?o.cQ:o.mh],d=this._getAngleAxisSubTickData(e),u=d[1].value-d[0].value,p=(0,a.M4)(i.offsetAngle);if((0,s.Z)(h)){let t=(0,r.lo)(d,t=>t.value-h),e=t>=d.length||h>d[t].value-u/2?Math.min(t,d.length-1):t>0?t-1:void 0;void 0!==e&&(n=this.angleAxisHelper.dataToPosition([d[e].value-u/2]))}return(0,l.Z)(n)&&(n=this.angleAxisHelper.dataToPosition([d[0].value-u/2])),n+p}return this._getAngleValueStartWithoutMask(t)},this._getAngleValueEnd=t=>{let e=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(e)){let s=t[this.getStack()?o.Uq:this._angleField[0]],l=this._getAngleAxisSubTickData(e),n=l[1].value-l[0].value,h=(0,a.M4)(i.offsetAngle),d=(0,r.lo)(l,t=>t.value-s),u=d>=l.length||s>l[d].value-n/2?Math.min(d,l.length-1):d>0?d-1:void 0;return(void 0!==u?this.angleAxisHelper.dataToPosition([l[u].value+n/2]):this.angleAxisHelper.dataToPosition([l[0].value-n/2]))+h}return this._getAngleValueEndWithoutMask(t)}}setAttrFromSpec(){var t,e,i;super.setAttrFromSpec();let r=null==(t=this._option.globalInstance.getChart())?void 0:t.getSpec(),l=null!=(e=this._spec.startAngle)?e:null==r?void 0:r.startAngle;this._startAngle=(0,s.Z)(l)?(0,a.M4)(l):h.JK;let n=null!=(i=this._spec.endAngle)?i:null==r?void 0:r.endAngle;this._endAngle=(0,s.Z)(n)?(0,a.M4)(n):h.Uw,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var t;return null==(t=this._angleField)?void 0:t[0]}getGroupFields(){return this._angleField}_convertMarkStyle(t){let e=super._convertMarkStyle(t);if(e.fill){let i=t.fill;"conical"!==(null==i?void 0:i.gradient)||(0,s.Z)(null==i?void 0:i.startAngle)||(0,s.Z)(null==i?void 0:i.endAngle)||(e.fill=Object.assign(Object.assign({},i),{startAngle:this._startAngle,endAngle:this._endAngle}))}return e}_getAngleValueStartWithoutMask(t){if(this.getStack()){let e=(0,u.Ol)(this.angleAxisHelper.dataToPosition([t[o.cQ]]),this.angleAxisHelper.getScale(0));if((0,n.Z)(e))return e}return this._startAngle}_getAngleValueEndWithoutMask(t){if(this.getStack()){let e=(0,u.Ol)(this.angleAxisHelper.dataToPosition([t[o.Uq]]),this.angleAxisHelper.getScale(0));if((0,n.Z)(e))return e}let e=this.angleAxisHelper.dataToPosition([t[this._angleField[0]]]);return this._spec.clamp?(0,u.Ol)(e,this.angleAxisHelper.getScale(0)):e}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(m.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){let t=this._arcGroupMark;t.created(),this.setMarkStyle(t,{x:0,y:0},"normal",d.W.Series),this._arcGroupMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex,clip:!0,clipPath:()=>{let t=this._getAngleAxis(),{x:e,y:i}=this.angleAxisHelper.center(),s=this._computeLayoutRadius();if(this._isTickMaskVisible(t)){let{tickMask:r}=this._spec,{angle:l,offsetAngle:n,style:o={}}=r;return this._getAngleAxisSubTickData(t).map(({value:t})=>{let r=this.angleAxisHelper.dataToPosition([t])+(0,a.M4)(n),h=(0,a.M4)(l)/2;return(0,c.Q)(Object.assign(Object.assign({},o),{x:e,y:i,startAngle:r-h,endAngle:r+h,innerRadius:s*this._innerRadius,outerRadius:s*this._outerRadius,fill:!0}))})}let{width:r,height:l}=this.getLayoutRect();return[(0,g.f)({width:r,height:l,fill:!0})]}})}_getAngleAxis(){if(!this.angleAxisHelper)return;let t=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find(e=>e.id===t)}_getAngleAxisTickData(t){var e;return null==(e=null==t?void 0:t.getTickData())?void 0:e.getLatestData()}_isTickMaskVisible(t){let e=this._getAngleAxisTickData(t),{tickMask:i}=this._spec;return i&&!1!==i.visible&&(null==e?void 0:e.length)>1}_getAngleAxisSubTickData(t){var e;let i=this._getAngleAxisTickData(t),a=[],{subTick:s={},tick:r={}}=null!=(e=null==t?void 0:t.getSpec())?e:{},{tickCount:l=4}=s,{alignWithLabel:n}=r;if((null==i?void 0:i.length)>=2){let t=i[1].value-i[0].value;for(let e=0;e<i.length-1;e++){let s=i[e],r=i[e+1];a.push(s);for(let e=0;e<l;e++){let i=(e+1)/(l+1),o=(1-i)*s.value+i*(r?r.value:n?1:s.value+t);a.push({value:o})}}return a.push(i[i.length-1]),a}return i}}m.mark=_.w},493878:function(t,e,i){i.d(e,{W:()=>l});var a=i(835151),s=i(241854),r=i(727891);class l extends r.H{getStackGroupFields(){return this._angleField}getStackValueField(){return(0,a.IX)(this._spec.valueField)[0]||(0,a.IX)(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(s.Uq),this.setInnerRadiusField(s.cQ)}setValueFieldToPercent(){this.setRadiusField(s.fB),this.setInnerRadiusField(s.x0)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}},649659:function(t,e,i){i.d(e,{g:()=>f});var a=i(50026),s=i(75387),r=i(122487),l=i(550145),n=i(224712);let o=Object.assign(Object.assign({},i(336837).w),{track:{name:"track",type:"arc"},progress:{name:"progress",type:"arc"}});var h=i(241854),d=i(459338),u=i(279090),p=i(271890),c=i(642800),g=i(306474);class _ extends g.G{constructor(){super(...arguments),this._supportStack=!0}}var m=i(568302),y=i(33829);class k extends l.V{constructor(){super(...arguments),this.type=s.A.circularProgress,this.transformerConstructor=_,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=t=>{if(this.getGroupFields().length>1){let e=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()));if((0,a.Z)(e))return e}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])},this._getRadiusValueEnd=t=>{var e,i;if(this.getGroupFields().length>1){let s=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+(null==(i=(e=this.radiusAxisHelper).getBandwidth)?void 0:i.call(e,this._groups?this._groups.fields.length-1:0));if((0,a.Z)(s))return s}return this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){return this._progressMark=this._createMark(k.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0},{morph:(0,r.yx)(this._spec,"progress")}),this._progressMark}_initProgressMarkStyle(){var t;let e=this._progressMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:null!=(t=this._spec.roundCap)&&t,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",d.W.Series)}getInteractionTriggers(){let t=[];return this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){return this._trackMark=this._createMark(k.mark.track,{parent:this._arcGroupMark}),this._trackMark.setMarkConfig({morph:!1,morphKey:null,morphElementKey:null}),this._trackMark}_initTrackMarkStyle(){let t=this._trackMark;t&&this.setMarkStyle(t,{visible:t=>{let e=this.angleAxisHelper.getScale(0).range(),i=Math.min(e[0],e[e.length-1]);return 1e-14>=Math.abs(this._getAngleValueStartWithoutMask(t)-i)},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{let t=this.getStack()?h.cQ:this._angleField[0],e=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[t]:e[0]})},endAngle:()=>{let t=this.getStack()?h.Uq:this._angleField[0],e=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[t]:e[e.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",d.W.Series)}initAnimation(){var t,e,i,a;let s=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._progressMark.setAnimationConfig((0,r._8)(null==(i=u.F.getAnimationInKey("circularProgress"))?void 0:i({startAngle:this._startAngle},s),(0,r.hT)("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig((0,r._8)(null==(a=u.F.getAnimationInKey("fadeInOut"))?void 0:a(),(0,r.hT)("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}k.type=s.A.circularProgress,k.mark=o,k.builtInTheme={circularProgress:{outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}}},k.transformerConstructor=_;let f=()=>{u.F.registerSeries(k.type,k),(0,n.sp)(),(0,p.K)(),(0,c.wy)(),(0,m.P)(),(0,y.$)()}},698212:function(t,e,i){i.d(e,{N:()=>v});var a=i(206065),s=i(75387),r=i(672796),l=i(459338),n=i(122487),o=i(279090);function h(t){return()=>"vertical"===t.direction?{orient:"negative"}:{orient:"positive"}}let d={type:"fadeIn"};function u(t,e="grow"){return!1===e?{}:"fadeIn"===e?d:{type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:h(t)}}var p=i(434998);class c extends p.O{enableByType(t){return"dimension"!==t}}var g=i(267953);let _=Object.assign(Object.assign({},i(268278).UI),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}});var m=i(642800),y=i(777678),k=i(576225);class f extends a.i{constructor(){super(...arguments),this.type=s.A.linearProgress,this._progressMark=null,this._trackMark=null,this._defaultProgressCustomShape=(t,e,i)=>{var a,s;let r=null==(a=this._spec)?void 0:a.cornerRadius,l=(0,y.Z)(e.width)?e.width:e.x1-e.x,n=(0,y.Z)(e.height)?e.height:e.y1-e.y,o=Math.min(0,l),h=Math.max(0,l),d=Math.min(0,n),u=Math.max(0,n);if(r>0){let t=r;if("vertical"===(null==(s=this._spec)?void 0:s.direction)){if(2*(t=Math.min(Math.abs(l/2),r))>Math.abs(n)){let e=Math.acos((t-Math.abs(n)/2)/t);return i.moveTo(o+t,d),i.arc(o+t,d+t,t,1.5*Math.PI,1.5*Math.PI-e,!0),i.arc(o+t,u-t,t,e+Math.PI/2,Math.PI/2,!0),i.lineTo(h-r,u),i.arc(h-t,u-t,t,Math.PI/2,Math.PI/2-e,!0),i.arc(h-t,d+t,t,-Math.PI/2+e,-Math.PI/2,!0),i.lineTo(o+t,d),i.closePath(),i}}else if(2*(t=Math.min(Math.abs(n/2),r))>Math.abs(l)){let e=Math.acos((t-Math.abs(l)/2)/t);return i.moveTo(o,d+t),i.arc(o+t,d+t,t,Math.PI,Math.PI+e),i.arc(h-t,d+t,t,-e,0),i.lineTo(h,u-t),i.arc(h-t,u-t,t,0,e),i.arc(o+t,u-t,t,Math.PI-e,Math.PI),i.closePath(),i}i.moveTo(o,d+t),i.arc(o+t,d+t,t,Math.PI,1.5*Math.PI),i.lineTo(h-t,d),i.arc(h-t,d+t,t,-Math.PI/2,0),i.lineTo(h,u-t),i.arc(h-t,u-t,t,0,Math.PI/2),i.lineTo(o+t,u),i.arc(o+t,u-t,t,Math.PI/2,Math.PI),i.closePath()}else i.moveTo(o,d),i.lineTo(h,d),i.lineTo(h,u),i.lineTo(o,u),i.closePath();return i}}initMark(){this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var t;return this._progressMark=this._createMark(f.mark.progress,{isSeriesMark:!0}),(0,k.Z)(null==(t=this._spec.progress)?void 0:t.customShape)&&this._progressMark.setMarkConfig({setCustomizedShape:this._defaultProgressCustomShape}),this._progressMark}_initProgressMarkStyle(){var t,e,i,a;let s=this._progressMark;if(s)if("vertical"===this._spec.direction){let i=this._spec.progress||{},a=null!=(t=i.leftPadding)?t:0,n=null!=(e=i.rightPadding)?e:0;this.setMarkStyle(s,{x:t=>{var e,i;return(0,r.Ol)(this.dataToPositionX(t),null==(i=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0),!0)-this._spec.bandWidth/2+a},y1:t=>{var e,i;return(0,r.Ol)(this.dataToPositionY(t),null==(i=null==(e=this._yAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0))},y:()=>{var t,e,i;let a=null==(t=this._yAxisHelper)?void 0:t.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?(0,r.Ol)(a,null==(i=null==(e=this._yAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0)):a},width:this._spec.bandWidth-a-n,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",l.W.Series)}else{let t=this._spec.progress||{},e=null!=(i=t.topPadding)?i:0,n=null!=(a=t.bottomPadding)?a:0;this.setMarkStyle(s,{x1:t=>{var e,i;return(0,r.Ol)(this.dataToPositionX(t),null==(i=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0))},y:t=>{var i,a;return(0,r.Ol)(this.dataToPositionY(t),null==(a=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:a.call(i,0),!0)-this._spec.bandWidth/2+e},height:this._spec.bandWidth-e-n,x:()=>{var t,e,i;let a=null==(t=this._xAxisHelper)?void 0:t.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?(0,r.Ol)(a,null==(i=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0)):a},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",l.W.Series)}}_initTrackMark(){return this._trackMark=this._createMark(f.mark.track),this._trackMark}_initTrackMarkStyle(){let t=this._trackMark;t&&("vertical"===this._spec.direction?this.setMarkStyle(t,{x:t=>{var e,i;return(0,r.Ol)(this.dataToPositionX(t),null==(i=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0),!0)-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",l.W.Series):this.setMarkStyle(t,{x:0,y:t=>{var e,i;return(0,r.Ol)(this.dataToPositionY(t),null==(i=null==(e=this._yAxisHelper)?void 0:e.getScale)?void 0:i.call(e,0),!0)-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",l.W.Series))}getInteractionTriggers(){let t=[];return this._trackMark&&t.push(this._trackMark),this._progressMark&&t.push(this._progressMark),this._parseInteractionConfig(t)}initAnimation(){var t,e,i,a;let s={direction:this.direction},r=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._progressMark.setAnimationConfig((0,n._8)(null==(i=o.F.getAnimationInKey("linearProgress"))?void 0:i(s,r),(0,n.hT)("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig((0,n._8)(null==(a=o.F.getAnimationInKey("fadeInOut"))?void 0:a(),(0,n.hT)("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new c(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}f.type=s.A.linearProgress,f.mark=_,f.builtInTheme={linearProgress:{bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:{type:"palette",key:"linearProgressTrackColor"},fillOpacity:1}}}};let v=()=>{(0,g.Y)(),o.F.registerAnimation("linearProgress",(t,e)=>({appear:u(t,e),enter:u(t),disappear:{type:"horizontal"===t.direction?"growWidthOut":"growHeightOut",options:h(t)}})),(0,m.wy)(),o.F.registerSeries(f.type,f)}},546626:function(t,e,i){i.d(e,{R:()=>Z});var a=i(563554),s=i(248038),r=i(459338),l=i(75464),n=i(790863),o=i(75387),h=i(777678),d=i(988539),u=i(933248),p=i(800466),c=i(122487),g=i(811071),_=i(279090),m=i(672968),y=i(758206),k=i(50026),f=i(175570),v=i(62209);class S extends m.rd{constructor(t,e,i,a,s){super(t,e,i,a,s),this._center=e.center}getEndProps(){return!1===this.valid?{}:(0,d.op)(this._center,this._toRadius,this._toAngle)}onBind(){this.from=this.target.attribute,this.to=this.target.getFinalAttribute(),this._prevCenter=this.target.attribute.center,this._center&&this._prevCenter||(this.valid=!1);let{angle:t,radius:e}=(0,d.Jl)(this.from,this._prevCenter),{angle:i,radius:a}=(0,d.Jl)(this.to,this._center);(0,k.Z)(i*a)||(this.valid=!1),this._fromAngle=(0,k.Z)(t)?t:i,this._fromRadius=(0,k.Z)(e)?e:a,this._toAngle=i,this._toRadius=a,(0,v.hA)(this._fromAngle,this._toAngle)&&(0,v.hA)(this._fromRadius,this._toRadius)&&(this.valid=!1),this.props=this.getEndProps()}onUpdate(t,e,i){if(!1===this.valid)return i.x=this.to.x,void(i.y=this.to.y);let{x:a,y:s}=(0,d.op)({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*e,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*e},this._fromRadius+(this._toRadius-this._fromRadius)*e,this._fromAngle+(this._toAngle-this._fromAngle)*e);this.target.setAttributes({x:a,y:s}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class b extends y.f{onBind(){super.onBind();let{center:t}=this.target.attribute,{center:e}=this.target.getFinalAttribute();this._center=e,this._prevCenter=t}onUpdate(t,e,i){this.points=this.points.map((a,s)=>{let r=this.polarPointInterpolation(this.interpolatePoints[s][0],this.interpolatePoints[s][1],e);return t&&(i.center=this._center),r.context=a.context,r}),this.target.attribute.points=this.points,this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}_interpolationSinglePoint(t,e,i){if(!(0,v.J$)(t)&&!(0,v.J$)(e))return e;let a=(0,d.Jl)(t,this._prevCenter),s=(0,d.Jl)(e,this._center),r=(0,d.LW)(a.angle),l=(0,d.LW)(s.angle);!(0,k.Z)(r)&&(0,k.Z)(l)&&(r=l),(0,k.Z)(r)&&!(0,k.Z)(l)&&(l=r);let n=r+(l-r)*i,o=a.radius+(s.radius-a.radius)*i;return(0,d.op)({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*i,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*i},o,n)}polarPointInterpolation(t,e,i){let{x:a,y:s}=this._interpolationSinglePoint(t,e,i),{x:r,y:l}=this._interpolationSinglePoint({x:t.x1,y:t.y1},{x:e.x1,y:e.y1},i),n=new f.E9(a,s,r,l);return n.defined=e.defined,n}}var M=i(642800),x=i(249157);let A=t=>({type:"in"===t?"fadeIn":"fadeOut"});function F(t,e,i){return"fadeIn"===e?A(i):{type:"in"===i?"growPointsIn":"growPointsOut",options:()=>({center:t.center()})}}function C(t,e,i){return"fadeIn"===e?A(i):((t,e)=>{let i=()=>{var e;return null==(e=t.center())?void 0:e.x},a=(t,e)=>e.getGraphicAttribute("x"),s=()=>{var e;return null==(e=t.center())?void 0:e.y},r=(t,e)=>e.getGraphicAttribute("y");return"in"===e?{channel:{x:{from:i,to:a},y:{from:s,to:r}}}:{channel:{x:{from:a,to:i},y:{from:r,to:s}}}})(t,i)}let T=(t,e)=>({custom:g.GA,customParameters:(i,a)=>{var s;return{group:a,startAngle:null!=(s=t.startAngle)?s:Math.PI/2,orient:"clockwise",center:t.center(),radius:t.radius(),animationType:e}}});var D=i(493878),w=i(757737),P=i(173294),L=i(460038),R=i(268278),E=i(107548);let I=Object.assign(Object.assign(Object.assign({},R.UI),E.j),{area:{name:"area",type:"area"}});var O=i(14536),H=i(568302),B=i(33829);class V extends D.W{constructor(){super(...arguments),this.type=o.A.radar,this.transformerConstructor=O.n,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var t,e,i,a;let s=!1!==(null==(t=this._spec.area)?void 0:t.visible)&&!1!==(null==(i=null==(e=this._spec.area)?void 0:e.style)?void 0:i.visible),r=null!=(a=this._spec.seriesMark)?a:"area";this.initAreaMark(s&&"area"===r),this.initLineMark("line"===r||"area"===r&&!s),this.initSymbolMark("point"===r)}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle(),[this._lineMark,this._symbolMark,this._areaMark].forEach(t=>{t&&this.setMarkStyle(t,{center:()=>{var t;return null==(t=this.angleAxisHelper)?void 0:t.center()}})})}initAreaMark(t){this._areaMark=this._createMark(V.mark.area,{groupKey:this._seriesField,isSeriesMark:t})}initAreaMarkStyle(){let t=this._areaMark;t&&(this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:t=>t&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getStack()?this.getDatumPositionValues(t,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:t=>t&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(t,this._angleField),this.getStack()?this.getDatumPositionValues(t,this._innerRadiusField):this.radiusScale.domain()[0]).y:Number.NaN,fill:this.getColorAttribute(),curveType:n.s,closePath:!0},"normal",r.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(t,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",r.W.Series),this.event.on(l.$7.viewDataStatisticsUpdate,{filter:t=>t.model===this},()=>{this.encodeDefined(t,"defined")}))}initTooltip(){super.initTooltip();let{group:t,mark:e}=this._tooltipHelper.activeTriggerSet;this._lineMark&&t.add(this._lineMark),this._areaMark&&t.add(this._areaMark),this._symbolMark&&(e.add(this._symbolMark),t.add(this._symbolMark))}initAnimation(){var t,e,i,a;let r={center:()=>{var t;return null==(t=this.angleAxisHelper)?void 0:t.center()},radius:()=>{let t=this.getLayoutRect();return Math.min(t.width,t.height)},startAngle:(0,h.Z)(this._spec.startAngle)?(0,d.M4)(this._spec.startAngle):s.JK},l=null!=(i=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset)?i:"clipIn";"clipIn"===l&&this._rootMark&&this._rootMark.setAnimationConfig((0,c._8)(null==(a=_.F.getAnimationInKey("radarGroup"))?void 0:a(r,l),(0,c.hT)("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach(([t,e])=>{if((0,h.Z)(t)){let i=_.F.getAnimationInKey(e);t.setAnimationConfig((0,c._8)(null==i?void 0:i(r,l),(0,c.hT)(t.name,this._spec,this._markAttributeContext)))}})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(t){return e=>{var i,a,s,r;let l=null!=(a=null==(i=this._seriesMark)?void 0:i.getAttribute(e,t))?a:void 0;return"fill"!==e||l||(e="stroke",l=null!=(r=null==(s=this._seriesMark)?void 0:s.getAttribute(e,t))?r:void 0),"stroke"===e&&(0,u.Z)(l)?l[0]:l}}}V.type=o.A.radar,V.mark=I,V.builtInTheme={radar:{label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}}},V.transformerConstructor=O.n,(0,p.jB)(V,a.t);let Z=()=>{_.F.registerSeries(V.type,V),(0,w.k)(),(0,P.i)(),(0,L.O)(),_.F.registerAnimation("radar",(t,e)=>({appear:"clipIn"===e?void 0:F(t,e,"in"),enter:F(t,e,"in"),exit:F(t,e,"out"),disappear:"clipIn"===e?void 0:F(t,e,"out"),update:[{channel:["points","center"],custom:b,customParameters:t,duration:M.cE.update.duration,easing:M.cE.update.easing},{type:"update",options:{excludeChannels:["points","defined","center"]}}]})),_.F.registerAnimation("radarSymbol",(t,e)=>({appear:"clipIn"===e?void 0:C(t,e,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:"clipIn"===e?void 0:C(t,e,"out"),update:[{options:{excludeChannels:["x","y","center"]}},{channel:["x","y","center"],custom:S,customParameters:t,duration:M.cE.update.duration,easing:M.cE.update.easing}]})),_.F.registerAnimation("radarGroup",(t,e)=>({appear:T(t,"in"),disappear:T(t,"out")})),(0,x.x)(),(0,H.P)(),(0,B.$)()}},418268:function(t,e,i){i.d(e,{w:()=>g});var a=i(861318),s=i(75387),r=i(757737),l=i(459338),n=i(434998);class o extends n.O{constructor(){super(...arguments),this._getMeasureData=t=>"horizontal"===this.series.getSpec().direction?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}let h=Object.assign({},i(938873).y);var d=i(279090),u=i(519636),p=i(711805);class c extends a.f{constructor(){super(...arguments),this.type=s.A.rangeArea}initMark(){this._areaMark=this._createMark(c.mark.area,{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initAreaMarkStyle()}initAreaMarkStyle(){let t=this._areaMark;t&&(super.initAreaMarkStyle(),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x1:t=>{if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:e}=this._xAxisHelper;return e(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}},"normal",l.W.Series):this.setMarkStyle(this._areaMark,{y1:t=>{if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:e}=this._yAxisHelper;return e(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}},"normal",l.W.Series),this.setMarkStyle(t,{stroke:!1},"normal",l.W.Series))}initTooltip(){this._tooltipHelper=new o(this)}_isFieldAllValid(){let t=this.getViewDataStatistics(),e=this.fieldY;return!!(t&&t.latestData&&e.length)&&e.every(e=>t.latestData[e]&&t.latestData[e].allValid)}}c.type=s.A.rangeArea,c.mark=h;let g=()=>{(0,r.k)(),(0,u.N)(),(0,p.E)(),d.F.registerSeries(c.type,c)}},697501:function(t,e,i){i.d(e,{hL:()=>M});var a=i(954594),s=i(75387),r=i(267953),l=i(249297),n=i(459338),o=i(122487),h=i(434998);class d extends h.O{constructor(){super(...arguments),this._getMeasureData=t=>"horizontal"===this.series.getSpec().direction?t[this.series.getSpec().xField[0]]+"-"+t[this.series.getSpec().xField[1]]:t[this.series.getSpec().yField[0]]+"-"+t[this.series.getSpec().yField[1]]}}var u=i(642800),p=i(279090);let c=t=>({type:"growCenterIn",options:{direction:"horizontal"===t.direction?"x":"y"}}),g={type:"fadeIn"},_=t=>({type:"growCenterOut",options:{direction:"horizontal"===t.direction?"x":"y"}}),m=Object.assign(Object.assign({},i(202676).w),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});var y=i(846070),k=i(695630);class f extends k.w{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){var e;"bothEnd"!==(null==(e=t.label)?void 0:e.position)&&this._addMarkLabelSpec(t,"bar")}}var v=i(519636),S=i(711805);class b extends a.QG{constructor(){super(...arguments),this.type=s.A.rangeColumn,this._barMarkType="rect",this._barName=s.A.bar,this.transformerConstructor=f}initMark(){var t,e,i,a,s,r,l,n;this._initBarBackgroundMark();let h=null==(t=this._spec.label)?void 0:t.position;this._barMark=this._createMark(b.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0},{morph:(0,o.yx)(this._spec,b.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),!1!==(null==(e=this._spec.label)?void 0:e.visible)&&"bothEnd"===h&&(!1!==(null==(a=null==(i=this._spec.label)?void 0:i.minLabel)?void 0:a.visible)&&(this._minLabelMark=this._createMark(b.mark.minLabel,{markSpec:null==(s=this._spec.label)?void 0:s.minLabel})),!1!==(null==(l=null==(r=this._spec.label)?void 0:r.maxLabel)?void 0:l.visible)&&(this._maxLabelMark=this._createMark(b.mark.maxLabel,{markSpec:null==(n=this._spec.label)?void 0:n.maxLabel})))}initMarkStyle(){var t,e;super.initMarkStyle(),this._initLabelMarkPos(this._minLabelMark,null==(t=this._spec.label)?void 0:t.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,null==(e=this._spec.label)?void 0:e.maxLabel,1,"start")}_initLabelMarkPos(t,e,i,a){var s,r,l,o,h,d,u,p,c;if(t){this.setMarkStyle(t,{fill:null!=(r=null==(s=null==e?void 0:e.style)?void 0:s.fill)?r:this.getColorAttribute(),text:t=>{let a="horizontal"===this._spec.direction?t[this._spec.xField[i]]:t[this._spec.yField[i]];return(null==e?void 0:e.formatMethod)?e.formatMethod(a,t):a}});let g=null!=(l=null==e?void 0:e.position)?l:a,_=null!=(o=null==e?void 0:e.offset)?o:"vertical"===this._direction?-20:-25;h=t=>this._barMark.getAttribute("x",t),d=t=>"vertical"===this._direction?this._barMark.getAttribute("x",t)+this._barMark.getAttribute("width",t):this._barMark.getAttribute("x1",t),u=t=>this._barMark.getAttribute("y",t),p=t=>"vertical"===this._direction?this._barMark.getAttribute("y1",t):this._barMark.getAttribute("y",t)+this._barMark.getAttribute("height",t),c=()=>this._direction,this.setMarkStyle(t,{textAlign:t=>{if("vertical"===c())return"center";let e=h(t),i=d(t);if("middle"===g)return"center";if(e>=i){if("start"===g)return"left";if("end"===g)return"right";if("outside"===g)return"left"}else{if("start"===g)return"right";if("end"===g)return"left";if("outside"===g)return"right"}return"center"},textBaseline:t=>{if("horizontal"===c())return"middle";let e=u(t),i=p(t);if("middle"===g)return"middle";if(i>=e){if("start"===g)return"bottom";if("end"===g)return"top";if("outside"===g)return"bottom"}else{if("start"===g)return"top";if("end"===g)return"bottom";if("outside"===g)return"top"}return"middle"}}),this.setMarkStyle(t,{x:t=>{let e=c(),i=h(t),a=d(t);if("vertical"===e||"middle"===g)return(i+a)/2;if(i>=a){if("start"===g)return a+_;if("end"===g)return i-_;if("outside"===g)return i+_}else{if("start"===g)return a-_;if("end"===g)return i+_;if("outside"===g)return i-_}return(i+a)/2},y:t=>{let e=c(),i=u(t),a=p(t);if("horizontal"===e||"middle"===g)return(i+a)/2;if(i>=a){if("start"===g)return a+_;if("end"===g)return i-_;if("outside"===g)return i+_}else{if("start"===g)return a-_;if("end"===g)return i+_;if("outside"===g)return i-_}return(i+a)/2}},"normal",n.W.Series)}}initLabelMarkStyle(t){t&&(this.setMarkStyle(t,{text:t=>{let e,i;return"horizontal"===this._spec.direction?(e=t[this._spec.xField[0]],i=t[this._spec.xField[1]]):(e=t[this._spec.yField[0]],i=t[this._spec.yField[1]]),e+"-"+i},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=t)}_dataToPosX(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(t){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(t){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(t,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var t,e,i,a,s;let r=(0,y.mh)(this),l=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._barMark.setAnimationConfig((0,o._8)(null==(i=p.F.getAnimationInKey("rangeColumn"))?void 0:i({direction:this.direction},l),(0,o.hT)("bar",this._spec,this._markAttributeContext),r)),this._minLabelMark&&this._minLabelMark.setAnimationConfig((0,o._8)(null==(a=p.F.getAnimationInKey("fadeInOut"))?void 0:a(),(0,o.hT)("label",this._spec,this._markAttributeContext),r)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig((0,o._8)(null==(s=p.F.getAnimationInKey("fadeInOut"))?void 0:s(),(0,o.hT)("label",this._spec,this._markAttributeContext),r))}initTooltip(){this._tooltipHelper=new d(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}b.type=s.A.rangeColumn,b.mark=m,b.builtInTheme={rangeColumn:{label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}}},b.transformerConstructor=f;let M=()=>{(0,r.Y)(),(0,l.k)(),p.F.registerAnimation("rangeColumn",(t,e)=>({appear:"fadeIn"===e?g:c(t),enter:c(t),exit:_(t),disappear:_(t)})),(0,u.wy)(),(0,v.N)(),(0,S.E)(),p.F.registerSeries(b.type,b)}},697433:function(t,e,i){i.d(e,{Dk:()=>f});var a=i(672796),s=i(122487),r=i(75387),l=i(279090);function n(t){return"angle"===t?"growAngleIn":"growRadiusIn"}let o=t=>({type:n(t.growField),options:{overall:!0}}),h={type:"fadeIn"},d=t=>({type:"angle"===t.growField?"growAngleOut":"growRadiusOut"});var u=i(493878),p=i(224712);let c=Object.assign(Object.assign({},i(268278).UI),{rose:{name:"rose",type:"arc"}});var g=i(306474);class _ extends g.G{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(t){this._addMarkLabelSpec(t,"rose")}}var m=i(568302),y=i(33829);class k extends u.W{constructor(){super(...arguments),this.type=r.A.rose,this.transformerConstructor=_,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=t=>this.startAngleScale(t),this._markAttributeContext.endAngleScale=t=>this.endAngleScale(t)}initRoseMark(){this._roseMark=this._createMark(k.mark.rose,{groupKey:this._seriesField,isSeriesMark:!0},{morph:(0,s.yx)(this._spec,k.mark.rose.name),morphElementKey:this.getDimensionField()[0]})}getRoseAngle(){var t,e,i;return null!=(i=null==(e=(t=this.angleAxisHelper).getBandwidth)?void 0:e.call(t,this._groups?this._groups.fields.length-1:0))?i:.5}startAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(t){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(t,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){let t=this._roseMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:t=>this.startAngleScale(t),endAngle:t=>this.endAngleScale(t),fill:this.getColorAttribute(),outerRadius:t=>(0,a.Ol)(this.radiusAxisHelper.dataToPosition([t[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:t=>{var e;if(!this.getStack())return 0;let i=(0,a.Ol)(this.radiusAxisHelper.dataToPosition([t[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return i<=Number.MIN_VALUE?this._computeLayoutRadius()*(null!=(e=this._spec.innerRadius)?e:0):i}})}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(t){t&&this.setMarkStyle(t,{text:t=>t[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:0})}initAnimation(){var t,e,i;let a=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._roseMark&&this._roseMark.setAnimationConfig((0,s._8)(null==(i=l.F.getAnimationInKey("rose"))?void 0:i({innerRadius:()=>{var t;return this._computeLayoutRadius()*(null!=(t=this._spec.innerRadius)?t:0)}},a),(0,s.hT)("rose",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}k.type=r.A.rose,k.mark=c,k.builtInTheme={rose:{rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}}},k.transformerConstructor=_;let f=()=>{l.F.registerSeries(k.type,k),(0,p.sp)(),l.F.registerAnimation("rose",(t,e)=>({appear:function(t,e){if(!1===e)return{};switch(e){case"fadeIn":return h;case"growAngle":return o(Object.assign(Object.assign({},t),{growField:"angle"}));default:return o(Object.assign(Object.assign({},t),{growField:"radius"}))}}(t,e),enter:{type:n(t.growField)},exit:d(t),disappear:d(t)})),(0,m.P)(),(0,y.$)()}},877772:function(t,e,i){i.d(e,{B:()=>N});var a=i(206065),s=i(75387),r=i(122487),l=i(642800),n=i(924706),o=i(208430),h=i(394299),d=i(471807),u=i(64510),p=i(102094),c=i(663787),g=i(459338),_=i(75464),m=i(434998),y=i(591431);class k extends m.O{constructor(){super(...arguments),this._getDimensionData=t=>{if(t.source){if((0,y.Z)(t.source)){let e=this.series.getSeriesKeys();return e[t.source]+" => "+e[t.target]}return t.source+" => "+t.target}return t.datum?t.datum[this.series.getSpec().categoryField]:t.key},this.markTooltipValueCallback=t=>t.value}}var f=i(522610),v=i(777678),S=i(835151),b=i(576225),M=i(933248),x=i(279090),A=i(672968),F=i(552029);class C extends A.rd{onBind(){var t,e,i;super.onBind(),(null==(t=this.params)?void 0:t.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:a,to:s}=((t,e,i)=>{let a={x0:t.getFinalAttribute().x0,x1:t.getFinalAttribute().x1,y0:t.getFinalAttribute().y0,y1:t.getFinalAttribute().y1,thickness:t.getFinalAttribute().thickness};return{from:Object.assign({},a,{x1:a.x0,y1:a.y0}),to:a}})(this.target,this.params.options,this.params),r=null!=(i=null==(e=this.target.context)?void 0:e.lastAttrs)?i:a,l=this.target.getFinalAttribute();l&&Object.assign(this.target.attribute,l),this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.animate.reSyncProps(),this.from=r,this.to=s,this.target.setAttributes(r)}onUpdate(t,e,i){let a=this.target.attribute;this.propKeys.forEach(t=>{a[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.setAttributes(a)}}class T extends A.rd{onBind(){var t,e,i;super.onBind(),(null==(t=this.params)?void 0:t.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:a,to:s}=((t,e,i)=>{let a={x0:t.getFinalAttribute().x0,x1:t.getFinalAttribute().x1,y0:t.getFinalAttribute().y0,y1:t.getFinalAttribute().y1,thickness:t.getFinalAttribute().thickness};return{from:a,to:Object.assign({},a,{x1:a.x0,y1:a.y0})}})(this.target,this.params.options,this.params),r=null!=(i=null==(e=this.target.context)?void 0:e.lastAttrs)?i:a;this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.animate.reSyncProps(),this.from=r,this.to=s,this.target.setAttributes(r)}onUpdate(t,e,i){let a=this.target.attribute;this.propKeys.forEach(t=>{a[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.setAttributes(a)}}var D=i(358639),w=i(267953),P=i(249297),L=i(301477);let R=Object.assign(Object.assign({},i(268278).UI),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}});var E=i(703494),I=i(586673),O=i(369643),H=i(306474);class B extends H.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"node")}}var V=i(864985),Z=i(234630),W=i(411715);class z extends a.i{constructor(){super(...arguments),this.type=s.A.sankey,this.transformerConstructor=B,this._nodeLayoutZIndex=c.Ai.Node,this._labelLayoutZIndex=c.Ai.Label,this._viewBox=new f.YZ,this._fillByNode=t=>{var e,i,a,s,r;if(t&&t.sourceRect&&t.targetRect)return this._fillByLink(t);let l=null==(i=null==(e=this._spec.node)?void 0:e.style)?void 0:i.fill;if((0,v.Z)(l))return l;if((0,v.Z)(this._spec.seriesField)){let e=null==(s=null==(a=this._option)?void 0:a.globalScale)?void 0:s.getScale("color"),i=(null==t?void 0:t.datum)?t.datum:t;return null==e?void 0:e.scale(null==i?void 0:i[this._spec.seriesField])}return null==(r=this._colorScale)?void 0:r.scale(this._getNodeNameFromData(t))},this._fillByLink=t=>{var e,i,a,s,r,l;let n=null==(i=null==(e=this._spec.link)?void 0:e.style)?void 0:i.fill;if(n)return n;if((0,v.Z)(this._spec.seriesField)){let e=null==(a=this._nodesSeriesData.latestData)?void 0:a.find(e=>t.source===e.key),i=null==e?void 0:e.datum,l=null==(r=null==(s=this._option)?void 0:s.globalScale)?void 0:r.getScale("color");return null==l?void 0:l.scale(null==i?void 0:i[this._spec.seriesField])}let o=(0,y.Z)(t.source)?this.getNodeList()[t.source]:t.source;return null==(l=this._colorScale)?void 0:l.scale(o)},this._handleEmphasisElement=t=>{var e;let i=null!=(e=this._spec.emphasis)?e:{},a=t.item;"adjacency"===i.effect?a&&t.mark===this._nodeMark?this._handleNodeAdjacencyClick(a):a&&t.mark===this._linkMark?this._handleLinkAdjacencyClick(a):this._handleClearEmpty():"related"===i.effect&&(a&&t.mark===this._nodeMark?this._handleNodeRelatedClick(a):a&&t.mark===this._linkMark?this._handleLinkRelatedClick(a):this._handleClearEmpty())},this._handleClearEmpty=()=>{var t,e;if(!this._needClear)return;let i=null==(t=this._nodeMark)?void 0:t.getGraphics();if(!i||!i.length)return;let a=null==(e=this._linkMark)?void 0:e.getGraphics();a&&a.length&&(i.forEach(t=>{t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE)}),a.forEach(t=>{t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._needClear=!1)},this._handleNodeAdjacencyClick=t=>{let e=(0,Z.BY)(t),i=[e.key];if(this._linkMark){let t=this._linkMark.getGraphics();if(!t||!t.length)return;t.forEach((t,a)=>{let s=(0,Z.BY)(t);s.source===e.key?(i.includes(s.target)||i.push(s.target),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(u.q.STATE_SANKEY_EMPHASIS,!0)):s.target===e.key?(i.includes(s.source)||i.push(s.source),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(u.q.STATE_SANKEY_EMPHASIS,!0)):(t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),i),this._needClear=!0},this._handleLinkAdjacencyClick=t=>{let e=(0,Z.BY)(t),i=[e.source,e.target];if(this._linkMark){let e=this._linkMark.getGraphics();if(!e||!e.length)return;e.forEach(e=>{e===t?(e.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),(0,W.n)(e,u.q.STATE_SANKEY_EMPHASIS,{ratio:1})):(e.removeState(u.q.STATE_SANKEY_EMPHASIS),e.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),i),this._needClear=!0},this._handleNodeRelatedClick=t=>{var e;let i=(0,Z.BY)(t),a=this._nodeMark.getGraphics();if(!a||!a.length)return;let s=this._linkMark.getGraphics();if(!s||!s.length)return;let r=(null==(e=(0,Z.BY)(s[0]))?void 0:e.parents)?"parents":"source";if("source"===r){let t=[i.key],e=[];if(s.forEach((s,r)=>{var l,n,o,h;let d=(0,Z.BY)(s),u=(null==d?void 0:d.parents)?"parents":"source";if((0,S.IX)(d[u]).includes(i.key)){if(e.includes(null!=(l=d.key)?l:d.index)||e.push(null!=(n=d.key)?n:d.index),t.includes(d.source)||t.push(d.source),!t.includes(d.target)){t.push(d.target);let i=a.find(t=>t.data[0].key===d.target).data[0].sourceLinks;for(;(null==i?void 0:i.length)>0;){let s=[];return i.forEach(i=>{var r,l;if(!e.includes(null!=(r=i.key)?r:i.index)&&(e.push(null!=(l=i.key)?l:i.index),!t.includes(i.target))){t.push(i.target);let e=a.find(t=>t.data[0].key===i.target);s.push(e.data[0].targetLinks)}}),void(i=s)}}}else if(d.target===i.key&&(e.includes(null!=(o=d.key)?o:d.index)||e.push(null!=(h=d.key)?h:d.index),!t.includes(d.source))){t.push(d.source);let i=a.find(t=>t.data[0].key===d.source).data[0].targetLinks;for(;(null==i?void 0:i.length)>0;){let s=[];return i.forEach(i=>{var r,l;if(!e.includes(null!=(r=i.key)?r:i.index)&&(e.push(null!=(l=i.key)?l:i.index),!t.includes(i.source))){t.push(i.source);let e=a.find(t=>t.data[0].key===i.source);s.push(e.data[0].targetLinks)}}),void(i=s)}}}),this._linkMark){let t=this._linkMark.getGraphics();if(!t||!t.length)return;t.forEach((t,i)=>{var a;let s=(0,Z.BY)(t);e.includes(null!=(a=s.key)?a:s.index)?(t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),t.addState(u.q.STATE_SANKEY_EMPHASIS,!0)):(t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),t)}else{let t=[i.key],e=i.targetLinks.reduce((t,e)=>((0,S.IX)(e.datum).forEach(e=>{let a=e.parents,s=a.length;for(let r=0;r<s;r++){let s=a[r].key,l=a[r+1]?a[r+1].key:i.key,n=e.value,o=t.find(t=>t.source===s&&t.target===l);o?o.value+=n:t.push({source:s,target:l,value:n})}}),t),[]);s.forEach((a,s)=>{let l=(0,Z.BY)(a),n=l.datum,o=n?n.filter(t=>t[r].some(t=>t.key===i.key)):null,h=e.find(t=>t.source===l.source&&t.target===l.target);if(o&&o.length){t.includes(l.source)||t.push(l.source),t.includes(l.target)||t.push(l.target);let e=o.reduce((t,e)=>t+e.value,0)/l.value;return a.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),void(0,W.n)(a,u.q.STATE_SANKEY_EMPHASIS,{ratio:e})}if(h)return t.includes(l.source)||t.push(l.source),t.includes(l.target)||t.push(l.target),a.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),void(0,W.n)(a,u.q.STATE_SANKEY_EMPHASIS,{ratio:h.value/l.value});a.removeState(u.q.STATE_SANKEY_EMPHASIS),a.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),t)}this._needClear=!0},this._handleLinkRelatedClick=t=>{let e=this._nodeMark.getGraphics();if(!e||!e.length)return;let i=this._linkMark.getGraphics();if(i&&i.length){if("source"==((0,Z.BY)(t)?"parents":"source"))this._linkMark&&i.forEach(t=>{t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&e.forEach(t=>{t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE)});else{let a=(0,Z.BY)(t),s=[a.source,a.target],r=[];(0,S.IX)(a.datum).forEach(t=>{let e=t.parents,i=e.length;for(let a=0;a<i-1;a++){let i=e[a].key,s=e[a+1].key,l=t.value,n=r.find(t=>t.source===i&&t.target===s);r.push({source:e[a].key,target:e[a+1].key,value:t.value}),n?n.value+=l:r.push({source:i,target:s,value:l})}}),i.forEach(t=>{let e=(0,Z.BY)(t),i=e.datum;if(e.source===a.source&&e.target===a.target)return t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),void(0,W.n)(t,u.q.STATE_SANKEY_EMPHASIS,{ratio:1});let l=i?i.filter(t=>{let e=t.parents.map(t=>t.key);return e.includes(a.source)&&e.includes(a.target)}):null;if(l&&l.length){s.includes(e.source)||s.push(e.source),s.includes(e.target)||s.push(e.target);let i=l.filter(t=>t.parents.some((e,i)=>{var s;return e.key===a.source&&(null==(s=t.parents[i+1])?void 0:s.key)===a.target})).reduce((t,e)=>t+e.value,0)/e.value;return t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),void(0,W.n)(t,u.q.STATE_SANKEY_EMPHASIS,{ratio:i})}let n=r.find(t=>t.source===e.source&&t.target===e.target);if(n)return s.includes(e.source)||s.push(e.source),s.includes(e.target)||s.push(e.target),t.removeState(u.q.STATE_SANKEY_EMPHASIS_REVERSE),void(0,W.n)(t,u.q.STATE_SANKEY_EMPHASIS,{ratio:n.value/e.value});t.removeState(u.q.STATE_SANKEY_EMPHASIS),t.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._highLightElements(e,s)}this._needClear=!0}}}get direction(){var t;return null!=(t=this._spec.direction)?t:"horizontal"}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(t=this._spec.seriesField)?t:this._spec.categoryField)}initData(){var t,e,i,a;super.initData();let s=this.getViewData(),r=this.getRawData();if(r&&s){(0,n.U)(this._dataSet,"sankeyLayout",o.aN),(0,n.U)(this._dataSet,"sankeyFormat",o.Rn),r.transform({type:"sankeyFormat"},!1),s.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this.direction,crossNodeAlign:this._spec.crossNodeAlign,nodeAlign:null!=(t=this._spec.nodeAlign)?t:"justify",nodeGap:null!=(e=this._spec.nodeGap)?e:8,nodeWidth:null!=(i=this._spec.nodeWidth)?i:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:null!=(a=this._spec.minNodeHeight)?a:4,maxNodeHeight:this._spec.maxNodeHeight,minLinkHeight:this._spec.minLinkHeight,maxLinkHeight:this._spec.maxLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap,inverse:this._spec.inverse},level:I.BV.sankeyLayout});let{dataSet:l}=this._option;(0,n.U)(l,"sankeyNodes",h.v),(0,n.U)(l,"flatten",E.x);let u=new p.V(l,{name:`sankey-node-${this.id}-data`});u.parse([this.getViewData()],{type:"dataview"}),u.transform({type:"sankeyNodes"}),u.transform({type:"flatten",options:{callback:t=>{if(t.datum){let e=t.datum[t.depth];return Object.assign(Object.assign({},t),e)}return t}}},!1),u.transform({type:"addVChartProperty",options:{beforeCall:O.cJ.bind(this),call:O.CL}},!1),this._nodesSeriesData=u,(0,n.U)(l,"sankeyLinks",d.D);let c=new p.V(l,{name:`sankey-link-${this.id}-data`});c.parse([this.getViewData()],{type:"dataview"}),c.transform({type:"sankeyLinks"}),c.transform({type:"addVChartProperty",options:{beforeCall:O.cJ.bind(this),call:O.CL}},!1),this._linksSeriesData=c}}compileData(){var t,e;super.compileData(),null==(t=this._linkMark)||t.compileData(),null==(e=this._nodeMark)||e.compileData()}initMark(){this._rootMark.setMarkConfig({overflow:this._spec.overflow,interactive:!!this._spec.overflow});let t=this._createMark(z.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData});t&&(t.setMarkConfig({zIndex:this._nodeLayoutZIndex}),this._nodeMark=t);let e=this._createMark(z.mark.link,{dataView:this._linksSeriesData});e&&(this._linkMark=e)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(t){let e=this._nodesSeriesData.latestData,i=(0,S.IX)(t)[0];return e&&e.find(t=>t.key===i)}valueToLink(t){let e=this._linksSeriesData.latestData,i=(0,S.IX)(t);return e&&e.find(t=>t&&t.source===i[0]&&t.target===i[1])}valueToPositionX(t){let e=this.valueToNode(t);return null==e?void 0:e.x0}valueToPositionY(t){let e=this.valueToNode(t);return null==e?void 0:e.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle()}_initNodeMarkStyle(){var t,e;let i=this._nodeMark;i&&(this.setMarkStyle(i,{x:t=>t.x0,x1:t=>t.x1,y:t=>t.y0,y1:t=>t.y1},u.q.STATE_NORMAL,g.W.Mark),this.setMarkStyle(i,{fill:null!=(e=null==(t=this._spec.node.style)?void 0:t.fill)?e:this._fillByNode},"normal",g.W.User_Mark))}_initLinkMarkStyle(){var t,e;let i=this._linkMark;i&&(i.setGlyphConfig({direction:this.direction}),this.setMarkStyle(i,{x0:t=>t.x0,x1:t=>t.x1,y0:t=>t.y0,y1:t=>t.y1,thickness:t=>t.thickness},u.q.STATE_NORMAL,g.W.Series),this.setMarkStyle(i,{fill:null!=(e=null==(t=this._spec.link.style)?void 0:t.fill)?e:this._fillByLink},"normal",g.W.User_Mark))}initLabelMarkStyle(t,e){if(!t)return;let i=e.position;i&&i.includes("inside")?this.setMarkStyle(t,{fill:"#ffffff",text:t=>this._createText(t,e),maxLineWidth:t=>{var i;return null!=(i=e.limit)?i:t.x1-t.x0}}):this.setMarkStyle(t,{fill:this._fillByNode,text:t=>this._createText(t,e),maxLineWidth:e.limit}),t.setMarkConfig({zIndex:this._labelLayoutZIndex})}_createText(t,e){if((0,b.Z)(t)||(0,b.Z)(t.datum))return"";let i=t.datum[this._spec.categoryField]||"",{formatMethod:a,formatter:s}=e||{},{formatFunc:r,args:l}=(0,V.HJ)(a,s,i,t.datum);return r&&(i=r(...l,{series:this})),i}initAnimation(){var t,e,i,a;let s={direction:this.direction,growFrom:()=>{var t,e;return"horizontal"===this.direction?null==(t=this._xAxisHelper)?void 0:t.getScale(0).scale(0):null==(e=this._yAxisHelper)?void 0:e.getScale(0).scale(0)}},l=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._nodeMark&&this._nodeMark.setAnimationConfig((0,r._8)(null==(i=x.F.getAnimationInKey("sankeyNode"))?void 0:i(s,l),(0,r.hT)("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig((0,r._8)(null==(a=x.F.getAnimationInKey("sankeyLinkPath"))?void 0:a(s,l),(0,r.hT)("link",this._spec,this._markAttributeContext)))}initEvent(){var t,e,i;super.initEvent(),null==(t=this._nodesSeriesData)||t.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),null==(e=this._linksSeriesData)||e.target.addListener("change",this.linksSeriesDataUpdate.bind(this));let a=null!=(i=this._spec.emphasis)?i:{};if(!0!==this._option.disableTriggerEvent&&a.enable&&("adjacency"===a.effect||"related"===a.effect)){let t="hover"===a.trigger?"pointerover":"pointerdown";this.event.on(t,{level:_.l.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodeMark.getData().updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linkMark.getData().updateData()}_highLightElements(t,e){t&&t.length&&t.forEach(t=>{t.removeState([u.q.STATE_SANKEY_EMPHASIS_REVERSE,u.q.STATE_SANKEY_EMPHASIS]),e.includes((0,Z.BY)(t).key)?t.addState(u.q.STATE_SANKEY_EMPHASIS,!0):t.addState(u.q.STATE_SANKEY_EMPHASIS_REVERSE,!0)})}initTooltip(){this._tooltipHelper=new k(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)}_setNodeOrdinalColorScale(){var t,e,i,a,s;let r,l,n=null==(e=null==(t=this._option)?void 0:t.globalScale)?void 0:e.getScale("color");if(null==n?void 0:n._specified)return void(this._colorScale=n);n&&(r=n.domain(),l=n.range()),l||(l=this._getDataScheme()),r&&!(0,b.Z)(r[0])||(r=this.getNodeList())&&r.length>10&&(l=null==(i=this._getDataScheme()[1])?void 0:i.scheme);let o=new D.m;null==(s=(a=o.domain(r)).range)||s.call(a,l),this._colorScale=o}getNodeList(){var t,e;if(this._nodeList)return this._nodeList;let i=this._rawData.latestData[0],a=(null==i?void 0:i.nodes)?(null==(t=i.nodes[0])?void 0:t.children)?Array.from(this.extractNamesFromTree(i.nodes,this._spec.categoryField)):i.nodes.map((t,e)=>t[this._spec.categoryField]):(null==i?void 0:i.links)?Array.from(this.extractNamesFromLink(i.links)):null==(e=null==i?void 0:i.values)?void 0:e.map((t,e)=>t[this._spec.categoryField]);return this._nodeList=a,a}_getNodeNameFromData(t){var e;return(null==t?void 0:t.datum)?t.datum[this._spec.categoryField]:null!=(e=t.key)?e:t[this._spec.categoryField]}extractNamesFromTree(t,e){let i=new Set;return t.forEach(t=>{i.add(t[e]),t.children&&this.extractNamesFromTree(t.children,e).forEach(t=>i.add(t))}),i}extractNamesFromLink(t){let e=new Set,{sourceField:i,targetField:a}=this._spec;return t.forEach(t=>{(0,v.Z)(t[i])&&e.add(t[i]),(0,v.Z)(t[a])&&e.add(t[a])}),e}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(t,e){var i;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(null==(i=this._viewDataStatistics.latestData)?void 0:i[t])?this._rawStatisticsCache[t]=this._viewDataStatistics.latestData[t]:this._rawData&&(this._rawStatisticsCache[t]={values:this._collectByField(t)})),this._rawStatisticsCache[t]}_collectByField(t){var e,i,a;let s=[],r=null==(i=null==(e=this.getRawData())?void 0:e.latestData)?void 0:i[0];if(!r)return[];if(r.links)(null==(a=r.nodes)?void 0:a.length)&&r.nodes.forEach(t=>{t[this._seriesField]&&s.push(t[this._seriesField])});else if(r.nodes){let t=new Set;return(0,o.zT)(t,r.nodes,this._seriesField),Array.from(t)}return s}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._nodeMark,this._linkMark]}getMarkData(t){return t.datum?(0,M.Z)(t.datum)?t.datum[t.datum.length-1]:t.datum:t}}z.type=s.A.sankey,z.transformerConstructor=B,z.mark=R,z.builtInTheme={sankey:{link:{style:{fillOpacity:.15,round:!0}}}};let N=()=>{(0,w.Y)(),(0,L.kx)(),(0,P.k)(),x.F.registerAnimation("sankeyNode",(t,e)=>Object.assign({appear:"fadeIn"===e?{type:"fadeIn"}:((t,e=!0)=>({type:"horizontal"===t.direction?"growWidthIn":"growHeightIn",options:{overall:e?t.growFrom():e,orient:"positive"}}))(t)},l.Vs)),x.F.registerAnimation("sankeyLinkPath",(t,e)=>({appear:"fadeIn"===e?{type:"fadeIn"}:{type:"linkPathGrowIn"},enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{type:"linkPathGrowOut"}})),F.a.registerBuiltInAnimate("linkPathGrowOut",T),F.a.registerBuiltInAnimate("linkPathGrowIn",C),(0,l.wy)(),x.F.registerSeries(z.type,z)}},630135:function(t,e,i){i.d(e,{B:()=>T});var a=i(145004),s=i(206065),r=i(896294),l=i(933248),n=i(576225),o=i(521107),h=i(591431),d=i(342279),u=i(467699),p=i(777678),c=i(459338),g=i(75387),_=i(64510),m=i(32496),y=i(122487),k=i(279090),f=i(642800),v=i(460038);let S=Object.assign(Object.assign({},i(268278).UI),{point:{name:"point",type:"symbol"}});var b=i(306474);class M extends b.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"point")}}var x=i(846070),A=i(519636),F=i(711805);class C extends s.i{constructor(){super(...arguments),this.type=g.A.scatter,this.transformerConstructor=M,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(t,e,{defaultScaleType:i,defaultRange:s},h){var d,u,p,c;if((0,r.Z)(e))return e;if((0,l.Z)(e)){if((0,n.Z)(t))return null==(d=this._option)||d.onError(`${h}Field is required.`),e;if("ordinal"!==i&&e.length>2)return null==(u=this._option)||u.onError(`${h} length is invalid, specify up to 2 ${h}s.`),e;let s=`${a.Bq}_series_scatter_${this.id}_scale_${h}`;return this._option.globalScale.registerModelScale({id:s,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:e}),{scale:s,field:t}}if((0,o.Z)(e)){if((0,n.Z)(t))return null==(p=this._option)||p.onError(`${h}Field is required.`),e;let r=Object.assign({id:`${a.Bq}_series_scatter_${this.id}_scale_${h}`,type:i,domain:[{dataId:this._rawData.name,fields:[t]}],range:s},e);return this._option.globalScale.registerModelScale(r),{scale:r.id,field:t}}return null==(c=this._option)||c.onError(`${h} attribute is invalid.`),e}getSizeAttribute(t,e){return(0,n.Z)(e)?m.K:(0,h.Z)(e)?e:(0,d.Z)(e)&&(0,u.Z)(e)?parseFloat(e):this._getSeriesAttribute(t,e,{defaultScaleType:m.pi,defaultRange:m.CF},"size")}getShapeAttribute(t,e){return(0,n.Z)(e)?m.b7:(0,d.Z)(e)?e:this._getSeriesAttribute(t,e,{defaultScaleType:m.qn,defaultRange:m.XO},"shape")}initMark(){this._symbolMark=this._createMark(C.mark.point,{groupKey:this._seriesField,isSeriesMark:!0},{morph:(0,y.yx)(this._spec,C.mark.point.name),morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var t,e,i;let a=(0,x.mh)(this),s=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this._symbolMark.setAnimationConfig((0,y._8)(null==(i=k.F.getAnimationInKey("scatter"))?void 0:i({},s),(0,y.hT)("point",this._spec,this._markAttributeContext),a))}initSymbolMarkStyle(){let t=this._symbolMark;t&&("zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(t,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:(0,h.Z)(this._size)||(0,r.Z)(this._size)?this._size:m.K,symbolType:(0,d.Z)(this._shape)||(0,r.Z)(this._shape)?this._shape:m.b7},_.q.STATE_NORMAL,c.W.Series),((0,p.Z)(this._sizeField)||(0,p.Z)(this._size))&&this.setMarkStyle(t,{size:this.getSizeAttribute(this._sizeField,this._size)},_.q.STATE_NORMAL,c.W.User_Mark),((0,p.Z)(this._shapeField)||(0,p.Z)(this._shape))&&this.setMarkStyle(t,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},_.q.STATE_NORMAL,c.W.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(t){super.viewDataStatisticsUpdate(t);let e=[this.getDimensionField()[0],this.getStackValueField()].every(t=>{var e,i,a;return t&&(null==(a=null==(i=null==(e=this.getViewDataStatistics())?void 0:e.latestData)?void 0:i[t])?void 0:a.allValid)});"zero"===this._invalidType||e?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",c.W.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",c.W.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(t){t&&(this._labelMark=t,this.setMarkStyle(t,{fill:this.getColorAttribute(),text:t=>t[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},_.q.STATE_NORMAL,c.W.Series),"zero"!==this._invalidType&&this.setMarkStyle(t,{visible:this._getInvalidDefined.bind(this)},_.q.STATE_NORMAL,c.W.Series))}handleZoom(t){var e,i;this.getMarksWithoutRoot().forEach(t=>{if(!t)return;let e=t.getGraphics();e&&e.length&&e.forEach((t,e)=>{var i,a;let s=null==(a=null==(i=null==t?void 0:t.context)?void 0:i.data)?void 0:a[0],r=this.dataToPosition(s);r&&t&&t.translateTo(r.x,r.y)})});let a=null==(i=null==(e=this._labelMark)?void 0:e.getComponent())?void 0:i.getProduct();a&&a.evaluate(null,null)}handlePan(t){this.handleZoom(t)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}C.type=g.A.scatter,C.mark=S,C.builtInTheme={scatter:{point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}}},C.transformerConstructor=M;let T=()=>{(0,v.O)(),k.F.registerAnimation("scatter",(t,e)=>Object.assign({appear:"fadeIn"===e?{type:"fadeIn"}:{type:"scaleIn"}},f.tF)),(0,A.N)(),(0,F.E)(),k.F.registerSeries(C.type,C)}},964388:function(t,e,i){i.d(e,{r:()=>z});var a=i(988539),s=i(777678),r=i(576225),l=i(521107),n=i(835151),o=i(933248),h=i(800466),d=i(279090),u=i(481990);let p=(t,e)=>Math.max(0,Math.min(1,(t-e[0])/(e[1]-e[0]||1))),c=t=>{let e=t.filter(t=>t.context.diffState===u.O.update),i=(0,n.iH)(e.map(t=>{var e,i;return null==(i=null==(e=null==t?void 0:t.context)?void 0:e.data)?void 0:i[0].depth}));return e.filter(t=>{var e,a;return(null==(a=null==(e=null==t?void 0:t.context)?void 0:e.data)?void 0:a[0].depth)===i})};var g=i(7234);let _=(t,e,i)=>(0,g.Z)(t)?[e,i]:[(0,n.iH)(t.map(t=>+t.getFinalAttribute().startAngle)),(0,n.CE)(t.map(t=>+t.getFinalAttribute().endAngle))],m=t=>[(0,n.iH)(t.map(t=>+t.getFinalAttribute().startAngle)),(0,n.CE)(t.map(t=>+t.getFinalAttribute().endAngle))],y=t=>({channel:{startAngle:{from:(t,e)=>e.getFinalAttribute().startAngle,to:(e,i)=>{let{startAngle:a,endAngle:s}=t.animationInfo(),r=m(c(i.parent.children));return p(i.getFinalAttribute().startAngle,r)*(s-a)+a}},endAngle:{from:(t,e)=>e.getFinalAttribute().endAngle,to:(e,i)=>{let{startAngle:a,endAngle:s}=t.animationInfo(),r=m(c(i.parent.children));return p(i.getFinalAttribute().endAngle,r)*(s-a)+a}},outerRadius:{from:(t,e)=>e.getFinalAttribute().outerRadius,to:()=>t.animationInfo().innerRadius},innerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:()=>t.animationInfo().innerRadius}}});var k=i(924706),f=i(703494),v=i(1711),S=i(75387),b=i(241854),M=i(459338),x=i(64510),A=i(699603),F=i(642800),C=i(369643),T=i(766410),D=i(122487),w=i(727891),P=i(212023),L=i(434998);class R extends L.O{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>null==t?void 0:t[this.series.getDimensionField()[0]]}}var E=i(251423),I=i(224712),O=i(249297);let H=Object.assign(Object.assign({},i(268278).UI),{sunburst:{name:"sunburst",type:"arc"}});var B=i(508095),V=i(248038);let Z={innerRadius:0,outerRadius:1,startAngle:V.v2,endAngle:V.Di,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}};class W extends w.H{constructor(){super(...arguments),this.type=S.A.sunburst}setCategoryField(t){return this._categoryField=t,this._categoryField}getCategoryField(){return this._categoryField}setValueField(t){return this._valueField=t,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(t=this._spec.seriesField)?t:A.Ko),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t;return null!=(t=this._spec.drillField)?t:b.XW},getRawData:()=>this.getRawData()}),this._startAngle=(0,a.M4)(this._spec.startAngle),this._endAngle=(0,a.M4)(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();let t=this.getRawData();t&&(this._spec.drill&&this.initDrillableData(this._dataSet),(0,k.U)(this._dataSet,"sunburstLayout",v.j),(0,k.U)(this._dataSet,"flatten",f.x),t.transform({type:"sunburstLayout",options:()=>{let{innerRadius:t,outerRadius:e,gap:i,label:a}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[(0,s.Z)(this._centerX)?this._centerX:this.getLayoutRect().width/2,(0,s.Z)(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:t,outerRadius:e,gapRadius:i,label:a}}}),t.transform({type:"flatten",options:{callback:t=>{if(t.datum){let e=t.datum[t.depth];return Object.assign(Object.assign({},t),e)}return t}}}))}getStatisticFields(){return(0,B.B)(super.getStatisticFields(),this._categoryField,this._valueField)}_addDataIndexAndKey(){let t=this.getRawData();(0,r.Z)(null==t?void 0:t.dataSet)||((0,k.U)(t.dataSet,"addVChartProperty",T.E),t.transform({type:"addVChartProperty",options:{beforeCall:C.Fe.bind(this),call:C.Au}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){if(!1===this._sunburst.visible)return;let t=this._createMark(W.mark.sunburst,{isSeriesMark:!0});this._sunburstMark=t}_initArcMarkStyle(){(0,r.Z)(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:t=>t.x+((0,s.Z)(this._offsetX)?this._offsetX:0),y:t=>t.y+((0,s.Z)(this._offsetY)?this._offsetY:0),outerRadius:t=>t.outerRadius,innerRadius:t=>t.innerRadius,startAngle:t=>t.startAngle,endAngle:t=>t.endAngle,fill:this.getColorAttribute()},x.q.STATE_NORMAL,M.W.Series)}_initLabelMark(){if(!0!==this._label.visible)return;let t=this._createMark(W.mark.label,{isSeriesMark:!1});this._labelMark=t}_initLabelMarkStyle(){(0,r.Z)(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:t=>{var e;let i=this._labelAutoVisible;return(0,l.Z)(i)&&!0===i.enable?(t.endAngle-t.startAngle)*(t.outerRadius-t.innerRadius)>(null!=(e=null==i?void 0:i.circumference)?e:P.h):this._spec.label.visible},x:t=>{var e;return(null==(e=t.label)?void 0:e.x)+((0,s.Z)(this._offsetX)?this._offsetX:0)},y:t=>{var e;return(null==(e=t.label)?void 0:e.y)+((0,s.Z)(this._offsetY)?this._offsetY:0)},textBaseline:t=>{var e;return null==(e=t.label)?void 0:e.textBaseline},textAlign:t=>{var e;return null==(e=t.label)?void 0:e.textAlign},angle:t=>{var e,i;return null!=(i=null==(e=t.label)?void 0:e.angle)?i:0},fontSize:10,text:t=>t.name},x.q.STATE_NORMAL,M.W.Series)}initTooltip(){this._tooltipHelper=new R(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var t,e;let i={animationInfo:()=>({innerRadius:this._computeRadius((0,n.IX)(this.__innerRadius))[0],outerRadius:this._computeRadius((0,n.IX)(this.__outerRadius))[0],startAngle:(0,n.IX)(this._startAngle)[0],endAngle:(0,n.IX)(this._endAngle)[0]})},a=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset;this.getMarksInType("arc").forEach(t=>{var e;t.setAnimationConfig((0,D._8)(null==(e=d.F.getAnimationInKey("sunburst"))?void 0:e(i,a),(0,D.hT)(t.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(t=>{var e;t.setAnimationConfig((0,D._8)(null==(e=d.F.getAnimationInKey("fadeInOut"))?void 0:e(),(0,D.hT)(t.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_computeRadius(t){return(0,o.Z)(t)?t.map(t=>this._computeLayoutRadius()*t):this._computeLayoutRadius()*t}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(t,e){}getActiveMarks(){return[this._sunburstMark]}getMarkData(t){return(null==t?void 0:t.datum)?t.datum[t.datum.length-1]:t}}W.type=S.A.sunburst,W.mark=H,W.builtInTheme={sunburst:Z},(0,h.jB)(W,E.F);let z=()=>{d.F.registerSeries(W.type,W),(0,I.sp)(),(0,O.k)(),(0,F.wy)(),d.F.registerAnimation("sunburst",(t,e)=>({appear:((t,e)=>{switch(e){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}})(0,e),enter:{channel:{startAngle:{from:(e,i)=>{let{startAngle:a,endAngle:s}=t.animationInfo(),r=_(c(i.parent.children),a,s);return p(i.getFinalAttribute().startAngle,r)*(s-a)+a},to:(t,e)=>e.getFinalAttribute().startAngle},endAngle:{from:(e,i)=>{let{startAngle:a,endAngle:s}=t.animationInfo(),r=_(c(i.parent.children),a,s);return p(i.getFinalAttribute().endAngle,r)*(s-a)+a},to:(t,e)=>e.getFinalAttribute().endAngle},outerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:(t,e)=>e.getFinalAttribute().outerRadius},innerRadius:{from:(t,e)=>e.getFinalAttribute().innerRadius,to:(t,e)=>e.getFinalAttribute().innerRadius}}},exit:y(t),disappear:y(t)}))}},153105:function(t,e,i){i.d(e,{J:()=>B});var a=i(64510),s=i(75464),r=i(459338),l=i(241854),n=i(206065),o=i(75387),h=i(924706),d=i(703494),u=i(522610),p=i(93774),c=i(50026),g=i(27203),_=i(800466),m=i(102094),y=i(521896),k=i(766410),f=i(369643),v=i(699603),S=i(434998);class b extends S.O{constructor(){super(...arguments),this.markTooltipKeyCallback=t=>{var e,i;return null==(i=null==(e=this.series)?void 0:e.getMarkData(t))?void 0:i[this.series.getDimensionField()[0]]},this.markTooltipValueCallback=t=>{var e,i;let{measureFields:a}=this._seriesCacheInfo,s=null==(e=this.series)?void 0:e.getMarkData(t);if(a[0]&&s)return null!=(i=s[a[0]])?i:t.value},this.dimensionTooltipTitleCallback=t=>{var e;let{dimensionFields:i}=this._seriesCacheInfo,a=null==(e=this.series)?void 0:e.getMarkData(t);if(i[0]&&a)return a[i[0]]}}get defaultShapeType(){return"square"}}var M=i(122487),x=i(642800),A=i(40806),F=i(251423),C=i(267953),T=i(249297);let D=Object.assign(Object.assign({},i(268278).UI),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}});var w=i(279090),P=i(306474);class L extends P.G{_transformLabelSpec(t){this._addMarkLabelSpec(t,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(t,"leaf")}}var R=i(508095),E=i(884209),I=i(594808),O=i(838122);class H extends n.i{constructor(){super(...arguments),this.type=o.A.treemap,this.transformerConstructor=L,this._categoryField="name",this._valueField="value",this._viewBox=new u.YZ,this._enableAnimationHook=this.enableMarkAnimation.bind(this),this.isHierarchyData=()=>!0}getCategoryField(){return this._categoryField}setCategoryField(t){return this._categoryField=t,this._categoryField}getValueField(){return this._valueField}setValueField(t){return this._valueField=t,this._valueField}setAttrFromSpec(){var t;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(t=this._spec.seriesField)?t:v.Ko),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new p.y),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var t,e;return null!=(e=null!=(t=this._spec.drillField)?t:this._categoryField)?e:l.XW},getRawData:()=>this.getRawData()}),(0,c.Z)(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){var t,e,i,a,s;super.initData(),(0,h.U)(this._dataSet,"treemap",O.J),null==(t=this._data.getDataView())||t.transform({type:"treemap",options:{nameField:this._categoryField,valueField:this._valueField,getViewBox:()=>this._viewBox.empty()?null:{x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2},maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:(null==(e=this._spec.nonLeafLabel)?void 0:e.visible)?null==(i=this._spec.nonLeafLabel)?void 0:i.padding:0,labelPosition:null==(a=this._spec.nonLeafLabel)?void 0:a.position,minVisibleArea:null!=(s=this._spec.minVisibleArea)?s:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize}}),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)}_runTreemapTransform(t=!1){this._data.getDataView().reRunAllTransform(),t&&this.getCompiler().renderNextTick()}_addDataIndexAndKey(){var t;(null==(t=this._rawData)?void 0:t.dataSet)&&((0,h.U)(this._rawData.dataSet,"addVChartProperty",k.E),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:f.Fe.bind(this),call:f.Au}}))}getRawDataStatisticsByField(t,e){var i;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[t]&&this._rawData){let a=(0,y.q)([this._rawData],{fields:[{key:t,operations:e?["min","max"]:["values"]}]})[t];this._rawStatisticsCache[t]=(0,g.Z)(null!=(i=this._rawStatisticsCache[t])?i:{},a)}return this._rawStatisticsCache[t]}_createHierarchyDataStatistics(t,e){(0,h.U)(this._dataSet,"hierarchyDimensionStatistics",y.q),(0,h.U)(this._dataSet,"flatten",d.x);let i=new m.V(this._dataSet,{name:t});return i.parse(e,{type:"dataview"}),i.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{let t=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&t.push({key:this._seriesField,operations:["values"]}),t}}},!1),i}getStatisticFields(){return(0,R.B)(super.getStatisticFields(),this._categoryField,this._valueField)}initMark(){let t=this._createMark(H.mark.nonLeaf,{isSeriesMark:!0});t&&(t.setTransform([{type:"filter",callback:t=>!this._shouldFilterElement(t,"nonLeaf")}]),this._nonLeafMark=t);let e=this._createMark(H.mark.leaf,{isSeriesMark:!0});e&&(e.setTransform([{type:"filter",callback:t=>!this._shouldFilterElement(t,"leaf")}]),this._leafMark=e)}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},a.q.STATE_NORMAL,r.W.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:t=>t.x0,y:t=>t.y0,x1:t=>t.x1,y1:t=>t.y1,fill:this.getColorAttribute()},a.q.STATE_NORMAL,r.W.Series)}_initRichStyleOfLabelMark(t){"rich"===t.getTextType()&&this.setMarkStyle(t,{maxWidth:t=>Math.abs(t.x0-t.x1),maxHeight:t=>Math.abs(t.y0-t.y1),ellipsis:!0},a.q.STATE_NORMAL,r.W.Series)}initLabelMarkStyle(t){t&&(this._labelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:t=>(t.x0+t.x1)/2,y:t=>(t.y0+t.y1)/2,text:t=>{var e;return null==(e=t.datum[t.depth])?void 0:e[this.getDimensionField()[0]]},maxLineWidth:t=>t.x1===t.x0?Number.MIN_VALUE:t.x1-t.x0},a.q.STATE_NORMAL,r.W.Series),this._initRichStyleOfLabelMark(t))}initNonLeafLabelMarkStyle(t){t&&(this._nonLeafLabelMark=t,t.setRule("treemap"),this.setMarkStyle(t,{x:t=>t.labelRect?(t.labelRect.x0+t.labelRect.x1)/2:(t.x0+t.x1)/2,y:t=>t.labelRect?(t.labelRect.y0+t.labelRect.y1)/2:(t.y0+t.y1)/2,text:t=>{var e;return null==(e=t.datum[t.depth])?void 0:e[this.getDimensionField()[0]]},maxLineWidth:t=>t.x1===t.x0?Number.MIN_VALUE:t.x1-t.x0},a.q.STATE_NORMAL,r.W.Series),this._initRichStyleOfLabelMark(t))}initAnimation(){this.getMarksInType("rect").forEach(t=>{var e;t.setAnimationConfig((0,M._8)(null==(e=w.F.getAnimationInKey("treemap"))?void 0:e(),(0,M.hT)(t.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",t=>{this.handlePan(t)}),this.initZoomEventOfSeries(this),this.event.on("zoom",t=>{this.handleZoom(t)})),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new b(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(t,e){let i=t.isLeaf;return"leaf"===e?!i:i}handlePan(t){let{delta:e}=t;if(0===e[0]&&0===e[1])return;this._matrix.reset(),this._matrix.translate(e[0],e[1]);let{a:i,b:a,c:s,d:r,e:l,f:n}=this._matrix;this._matrix.multiply(i,a,s,r,l,n),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}handleZoom(t){let{scale:e,scaleCenter:i}=t;if(1===e)return;this._matrix.reset();let{x:a,y:r}=i;this._matrix.translate(a,r),this._matrix.scale(e,e),this._matrix.translate(-a,-r);let{a:l,b:n,c:o,d:h,e:d,f:u}=this._matrix;this._matrix.multiply(l,n,o,h,d,u),this.disableMarkAnimation(),this.event.on(s.ZK.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()}enableMarkAnimation(){this.getMarks().forEach(t=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().enableAnimation()}),this.event.off(s.ZK.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach(t=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(t=>{t&&t.getComponent()&&t.getComponent().getProduct().disableAnimation()})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}getMarkData(t){return(null==t?void 0:t.datum)?t.datum[t.datum.length-1]:t}}H.type=o.A.treemap,H.mark=D,H.builtInTheme={treemap:{gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}}},H.transformerConstructor=L,(0,_.jB)(H,F.F),(0,_.jB)(H,A.e);let B=()=>{(0,E.p)(),(0,I.K)(),(0,C.Y)(),(0,T.k)(),w.F.registerAnimation("treemap",(t,e)=>({appear:"fadeIn"===e?{type:"fadeIn"}:{type:"growCenterIn"},enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{type:"growCenterOut"}})),(0,x.wy)(),w.F.registerSeries(H.type,H)}},508095:function(t,e,i){i.d(e,{B:()=>s});var a=i(699603);let s=(t,e,i)=>(t.push({key:e,operations:["values"]}),t.push({key:i,operations:["max","min"]}),t.push({key:a.kR,operations:["max","min","values"]}),t.push({key:a.Ko,operations:["values"]}),t)},550853:function(t,e,i){i.d(e,{V:()=>s});var a=i(75387);function s(t){var e,i;let{type:s}=t;return s===a.A.sankey?null!=(e=t.direction)?e:"horizontal":null!=(i=t.direction)?i:"vertical"}},846070:function(t,e,i){i.d(e,{eg:()=>r,fd:()=>l,mh:()=>n});var a=i(75387),s=i(459774);function r(t){return[a.A.rose,a.A.radar,a.A.circularProgress].includes(t)}function l(t,e,i){let a=t.getScale(0),r="isInverse"in t&&t.isInverse();(0,s.z2)(a.type)?i.sort((t,i)=>(t[e]-i[e])*(r?-1:1)):i.sort((t,i)=>(a.index(t[e])-a.index(i[e]))*(r?-1:1))}function n(t){return{dataIndex:e=>{var i,a;let s="horizontal"===t.direction?t.fieldY[0]:t.fieldX[0],r=null==e?void 0:e[s],l="horizontal"===t.direction?t.scaleY:t.scaleX;return(null!=(a=null==(i=null==l?void 0:l.domain)?void 0:i.call(l))?a:[]).indexOf(r)||0},dataCount:()=>{var e,i,a;let s="horizontal"===t.direction?t.scaleY:t.scaleX;return null!=(a=(null!=(i=null==(e=null==s?void 0:s.domain)?void 0:e.call(s))?i:[]).length)?a:0}}}},240118:function(t,e,i){i.d(e,{fs:()=>O});var a=i(576225),s=i(796327),r=i(241854),l=i(603103),n=i(954594),o=i(672796),h=i(506219),d=i(279090);let u={type:"fadeIn"},p={type:"growCenterIn"};var c=i(122487),g=i(75387),_=i(642800),m=i(924706),y=i(586673),k=i(511084);let f=Object.assign(Object.assign({},i(202676).w),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}});var v=i(102094),S=i(586831),b=i(233518);class M{get fields(){return this._fields}get groupData(){return this._groupData}constructor(t){this._fields=[],this._fields=t}initData(t,e){let i=t.name,a=new v.V(e instanceof S.q?e:t.dataSet);a.name=i,a.parse([t],{type:"dataview"}),(0,m.U)(e,"dimensionTree",b.g7),a.transform({type:"dimensionTree",options:{fields:this._fields}},!1),a.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=a}groupDataUpdate(){}getGroupValueInField(t){var e,i,a;let s=null==(a=null==(i=null==(e=this.groupData)?void 0:e.latestData)?void 0:i.dimensionValues)?void 0:a[t];return s?Array.from(s):[]}}var x=i(267953),A=i(846070),F=i(695630);class C extends F.w{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(t){this._addMarkLabelSpec(t,"bar"),this._addMarkLabelSpec(t,"bar","stackLabel","initStackLabelMarkStyle")}}var T=i(519636),D=i(711805),w=i(134989),P=i(460482),L=i(145004),R=i(459338),E=i(687404);class I extends n.QG{constructor(){super(...arguments),this.type=g.A.waterfall,this.transformerConstructor=C,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null}getTotalData(){var t;return null==(t=this._totalData)?void 0:t.getLatestData()}initGroups(){let t=this.getGroupFields();t&&t.length&&(this._groups=new M(t),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],(0,a.Z)(this._seriesField)&&(this._seriesField=P.o)}getSeriesKeys(){return this._seriesField===P.o?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var t,e,i;super.initData(),(0,m.U)(this._dataSet,"waterfallFillTotal",l.c),(0,m.U)(this._dataSet,"waterfall",l.A),((0,a.Z)(this._spec.total)||"end"===this._spec.total.type)&&(null==(t=this._rawData)||t.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total,calculationMode:null!=(e=this._spec.calculationMode)?e:"increase",stackInverse:this.getRegion().getStackInverse()}},!1));let s=(0,y.uj)(this.getViewData(),this._dataSet,{name:`${L.Bq}_series_${this.id}_totalData`});this.getViewData().target.removeListener("change",s.reRunAllTransform),this._totalData=new E.O(this._option,s),s.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:r.cQ,endAs:r.Uq,total:this._spec.total,calculationMode:null!=(i=this._spec.calculationMode)?i:"increase",groupData:()=>this.getGroups().groupData,stackInverse:this.getRegion().getStackInverse()}},!1)}compileData(){var t;super.compileData(),null==(t=this._totalData)||t.compile()}initAnimation(){var t,e,i,a;let s={yField:"horizontal"===this.direction?this._fieldY[0]:this.getStackValueField(),xField:"horizontal"===this.direction?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var t,e;return"horizontal"===this.direction?null==(t=this._xAxisHelper)?void 0:t.getScale(0).scale(0):null==(e=this._yAxisHelper)?void 0:e.getScale(0).scale(0)}},r=null==(e=null==(t=this._spec)?void 0:t.animationAppear)?void 0:e.preset,l=(0,A.mh)(this);this._barMark.setAnimationConfig((0,c._8)(null==(i=d.F.getAnimationInKey("waterfall"))?void 0:i(s,r),(0,c.hT)("bar",this._spec,this._markAttributeContext),l)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig((0,c._8)(null==(a=d.F.getAnimationInKey("fadeInOut"))?void 0:a(),(0,c.hT)("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(t){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(t)}addViewDataFilter(t){}reFilterViewData(){}onEvaluateEnd(t){super.onEvaluateEnd(t),this._totalData.updateData()}initMark(){super.initMark();let t=this._createMark(I.mark.leaderLine,{key:"index"});t&&(this._leaderLineMark=t,t.setData(this._totalData))}initLabelMarkStyle(t){var e;if(t)return!this._labelMark&&(null==(e=this._spec.label)?void 0:e.visible)?(super.initLabelMarkStyle(t),void(this._labelMark=t)):void 0}initStackLabelMarkStyle(t){t&&(this._stackLabelMark=t,t.skipEncode=!0,t.setRule("stackLabel"),t.setData(this._totalData),this.setMarkStyle(t,{text:t=>{var e;return"absolute"===(null==(e=this._spec.stackLabel)?void 0:e.valueType)?t.end:(0,s.f2)(t.end,t.start)}}))}initTotalLabelMarkStyle(t){this.setMarkStyle(t,{text:t=>{var e;return"end"in t?"absolute"===(null==(e=this._spec.totalLabel)?void 0:e.valueType)?t.end:(0,s.f2)(t.end,t.start):"horizontal"===this.direction?t[this._fieldX[0]]:t[this._fieldY[0]]}})}getTotalLabelComponentStyle(t){return(0,w.lk)(Object.assign(Object.assign({},t),{series:this,labelSpec:this._spec.totalLabel}),t=>{let e="vertical"===this.direction?t[this._fieldX[0]]:t[this._fieldY[0]];return this._totalData.getLatestData().find(t=>t.index===e)})}totalPositionX(t,e,i=.5){let{dataToPosition:a,getBandwidth:s}=this._xAxisHelper;return"horizontal"===this._direction?(0,o.Ol)(a([t[e]],{bandPosition:this._bandPosition})):a([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("width",t)*(.5-i)}totalPositionY(t,e,i=.5){let{dataToPosition:a,getBandwidth:s}=this._yAxisHelper;return"horizontal"===this._direction?a([t[e]],{bandPosition:this._bandPosition})+.5*s(0)-this._barMark.getAttribute("height",t)*(.5-i):(0,o.Ol)(a([t[e]],{bandPosition:this._bandPosition}))}initMarkStyle(){super.initMarkStyle();let t="decrease"===this._spec.calculationMode;this._leaderLineMark&&("horizontal"===this._direction?this.setMarkStyle(this._leaderLineMark,{visible:t=>this.isVisibleLeaderLine(t),x:t=>this.totalPositionX(t,"lastEnd",0),x1:t=>this.totalPositionX(t,t.isTotal?"end":"start",0),y:e=>e.lastIndex?this.totalPositionY(e,"lastIndex",+!t):0,y1:e=>this.totalPositionY(e,"index",+!!t)},"normal",R.W.Series):this.setMarkStyle(this._leaderLineMark,{visible:t=>this.isVisibleLeaderLine(t),x:e=>e.lastIndex?this.totalPositionX(e,"lastIndex",+!t):0,x1:e=>this.totalPositionX(e,"index",+!!t),y:t=>this.totalPositionY(t,"lastEnd",0),y1:t=>this.totalPositionY(t,t.isTotal?"end":"start",0)},"normal",R.W.Series))}isVisibleLeaderLine(t){return!(0,a.Z)(t.lastIndex)&&(0,o.b)([t.lastEnd,t[t.isTotal?"end":"start"]],"horizontal"===this.direction?this._xAxisHelper.getScale(0):this._yAxisHelper.getScale(0))}}I.type=g.A.waterfall,I.mark=f,I.builtInTheme={waterfall:{seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}}},I.transformerConstructor=C;let O=()=>{(0,k.e)(),(0,x.Y)(),d.F.registerAnimation("waterfall",(t,e)=>({appear:function(t,e){switch(e){case"fadeIn":return u;case"scaleIn":return p;default:return(0,h.TW)(t,!1)}}(t,e),enter:(0,h.TW)(t,!1),exit:(0,h.$t)(t,!1),disappear:(0,h.$t)(t,!1)})),(0,_.wy)(),(0,T.N)(),(0,D.E)(),d.F.registerSeries(I.type,I)}},898515:function(t,e,i){i.d(e,{EM:()=>I,VE:()=>O});var a=i(75387),s=i(576225),r=i(50026),l=i(521107),n=i(777678),o=i(241854),h=i(459338),d=i(453375);let u=[0],p=[20,40],c=[200,500],g={shrink:!1,enlarge:!1,fontSizeLimitMin:0},_=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"];var m=i(122487),y=i(454916),k=i(504681),f=i(358639);let v=Object.assign(Object.assign({},i(268278).UI),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"},wordMask:{name:"wordMask",type:"rect"}});var S=i(279090),b=i(864190),M=i(990389),x=i(21577),A=i(317647),F=i(663787),C=i(75464);class T extends k.y{constructor(){super(...arguments),this._fontSizeRange=[20,20],this._isWordCloudShape=!1,this._dataChange=!0,this.handleMaskCanvasUpdate=(t,e)=>{this._maskCanvas=t},this.getWordColor=t=>t.isFillingWord?(this._fillingColorCallback&&!this._dataChange||(this._fillingColorCallback=this._wordCloudShapeConfig.fillingColorHexField?t=>t[this._wordCloudShapeConfig.fillingColorHexField]:this.initColorCallback(this._wordCloudShapeConfig.fillingSeriesField,!0)),this._fillingColorCallback(t)):(this._keyWordColorCallback&&!this._dataChange||(this._keyWordColorCallback=this._spec.colorHexField?t=>t[this._spec.colorHexField]:this.initColorCallback(this._seriesField,!1)),this._keyWordColorCallback(t)),this._calculateFontWeight=t=>{let e=this.getRawDataStatisticsByField(this._valueField,!0);return e.min===e.max?this._fontWeightRange[0]:this._fontWeightRange[0]+(this._fontWeightRange[this._fontWeightRange.length-1]-this._fontWeightRange[0])*(t[this._valueField]-e.min)/(e.max-e.min)}}setValueField(t){(0,n.Z)(t)&&(this._valueField=t)}setFontSizeRange(t){(0,n.Z)(t)?this._fontSizeRange=t:this._fontSizeRange=p}setAttrFromSpec(){var t,e,i,a,r;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._colorMode=null!=(t=this._spec.colorMode)?t:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=null!=(e=this._spec.fontWeightRange)?e:c,this._rotateAngles=null!=(i=this._spec.rotateAngles)?i:u,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=null!=(a=this._spec.maskShape)?a:"circle",this._textField=(null==(r=this._spec.word)?void 0:r.formatMethod)?y.BY:this._nameField;let l=this._spec.wordCloudConfig;this._wordCloudConfig=Object.assign({drawOutOfBound:"hidden",layoutMode:"default",zoomToFit:g},this._spec.wordCloudConfig),l&&!(0,s.Z)(l.layoutMode)||(0,d.qe)(this._option.mode)||(this._wordCloudConfig.layoutMode="fast"),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:u,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._isWordCloudShape=!_.includes(this._maskShape)&&!["fast","grid","cloud"].includes(this._wordCloudConfig.layoutMode),this._defaultFontFamily=this._option.getTheme("fontFamily")}initData(){var t,e;super.initData(),null==(e=null==(t=this.getViewData())?void 0:t.target)||e.addListener("change",()=>{this._dataChange=!0,this.compile()})}initMark(){var t;this._wordMark=this._createMark(T.mark.word,{key:o.XW,groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this._seriesField}),(null==(t=this._spec.wordMask)?void 0:t.visible)&&(this._maskMark=this._createMark(T.mark.wordMask,{dataView:!1}),this._maskMark.setMarkConfig({zIndex:F.Ai.Mark-1}))}initMarkStyle(){this.initMarkStyleOfWord(this._wordMark,this._spec.word,this._spec.colorHexField,this._seriesField),this._maskMark&&this.setMarkStyle(this._maskMark,{width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,background:()=>this._maskCanvas},"normal",h.W.Series)}initMarkStyleOfWord(t,e,i,a,s){var r,l;t&&(this.setMarkStyle(t,{text:(null==e?void 0:e.formatMethod)?t=>e.formatMethod(t):t=>t[this._textField],x:t=>t.x,y:t=>t.y,fontSize:t=>t.fontSize,fontStyle:t=>t.fontStyle,angle:t=>t.angle,visible:t=>t.visible},"normal",h.W.Series),this.setMarkStyle(t,{fill:null!=(l=null==(r=null==e?void 0:e.style)?void 0:r.fill)?l:this.getWordColor,fontWeight:t=>t.fontWeight,fontFamily:t=>t.fontFamily},"normal",h.W.User_Mark))}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)}initAnimation(){[this._wordMark].forEach(t=>{var e,i;if(t){let a=null==(i=null==(e=this._spec)?void 0:e.animationAppear)?void 0:i.preset;t.setAnimationConfig((0,m._8)(S.F.getAnimationInKey("wordCloud")({animationConfig:()=>{var e,i;return null==(i=null==(e=t.getAnimationConfig())?void 0:e.appear)?void 0:i[0]}},a),(0,m.hT)("word",this._spec,this._markAttributeContext)))}})}getWordOrdinalColorScale(t,e){var i,a,s,r,l;let n=e?this._wordCloudShapeConfig.fillingColorList:this._colorList,o=t?null==(i=this.getViewData())?void 0:i.latestData.map(e=>e[t]):[],h=null!=(s=null!=n?n:null==(a=this._option.globalScale.getScale("color"))?void 0:a.range())?s:this._getDataScheme();return null==(l=(r=(new f.m).domain(o)).range)?void 0:l.call(r,h)}initColorCallback(t,e){var i,a,s,r;if("ordinal"===this._colorMode){let i=this.getWordOrdinalColorScale(t,e);return e=>i.scale(e[null!=t?t:o.lb])}let l=null!=(i=e?this._colorList:this._wordCloudShapeConfig.fillingColorList)?i:this._option.globalScale.getScale("color").range();if(1===l.length)return t=>l[0];if(this._valueField){let t=this.getRawDataStatisticsByField(this._valueField,!0);if(t.min===t.max)return l[0];let e=(new b.f).domain([t.min,t.max]).range(l);return t=>e.scale(t[this._valueField])}let n=(new b.f).domain([0,null!=(r=null==(s=null==(a=this.getViewData())?void 0:a.latestData)?void 0:s.length)?r:1]).range(l);return t=>n.scale(t[o.vM])}compile(){super.compile();let{width:t,height:e}=this._region.getLayoutRect();if(!(0,r.Z)(t)||!(0,r.Z)(e)||!(e>0&&t>0))return;let i=[];this._isWordCloudShape?i.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):i.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.setTransform(i)}_getCommonTransformOptions(){var t,e,i,a,r;let{width:h,height:d}=this._region.getLayoutRect(),u=null!=(t=this._spec.word)?t:{},p=null!=(e=u.style)?e:{};return{size:[h,d],shape:(0,l.Z)(this._maskShape)&&"text"===this._maskShape.type&&(0,s.Z)(this._maskShape.fontFamily)?Object.assign({fontFamily:this._option.getTheme("fontFamily")},this._maskShape):this._maskShape,onUpdateMaskCanvas:this.handleMaskCanvasUpdate,onLayoutFinished:()=>{let t=()=>{var e,i,a,s;this._option.globalInstance.getStage().hooks.afterRender.taps=this._option.globalInstance.getStage().hooks.afterRender.taps.filter(e=>e.fn!==t),null==(i=(e=this._option).dispatchEvent)||i.call(e,C.$7.afterWordcloudShapeDraw,{instance:this._option.globalInstance}),null==(s=null==(a=this._option.globalInstance.getChart().getOption().performanceHook)?void 0:a.afterWordcloudShapeDraw)||s.call(a,this._option.globalInstance)};this._option.globalInstance.getStage().hooks.afterRender.taps.push({type:"sync",name:"afterWordcloudShapeDraw",fn:t})},dataIndexKey:o.XW,text:u.formatMethod?t=>u.formatMethod(t):{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:"auto"===this._fontSizeRange?null:this._fontSizeRange,padding:null!=(a=null==(i=this._spec.word)?void 0:i.padding)?a:1,fontFamily:(0,n.Z)(this._spec.fontFamilyField)?{field:this._spec.fontFamilyField}:null!=(r=p.fontFamily)?r:this._defaultFontFamily,fontWeight:(0,n.Z)(this._spec.fontWeightField)?{field:this._spec.fontWeightField}:(0,n.Z)(p.fontWeight)?p.fontWeight:(0,n.Z)(this._valueField)?this._calculateFontWeight:"normal",fontStyle:(0,n.Z)(this._spec.fontStyleField)?{field:this._spec.fontStyleField}:p.fontStyle,createCanvas:M.rF.createCanvas.bind(M.rF),getTextBounds:x.o}}_wordCloudTransformOption(){var t,e;return Object.assign(Object.assign(Object.assign({},null!=(t=this._wordCloudConfig)?t:{}),this._getCommonTransformOptions()),{layoutType:this._wordCloudConfig.layoutMode,rotate:this._rotateAngles,randomVisible:null==(e=this._spec.random)||e,clip:"clip"===this._wordCloudConfig.drawOutOfBound,shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep,repeatFill:this._wordCloudConfig.zoomToFit.repeat})}_wordCloudShapeTransformOption(){var t,e,i,a,s,r;let l=null!=(e=null==(t=this._spec.fillingWord)?void 0:t.style)?e:{},o=null!=(i=this._wordCloudShapeConfig)?i:{};return Object.assign(Object.assign(Object.assign({},o),this._getCommonTransformOptions()),{createImage:A.B,rotateList:this._rotateAngles,fillingRotateList:o.fillingRotateAngles,fillingFontFamily:(0,n.Z)(o.fillingFontFamilyField)?{field:o.fillingFontFamilyField}:null!=(a=l.fontFamily)?a:this._defaultFontFamily,fillingPadding:null!=(r=null==(s=this._spec.fillingWord)?void 0:s.padding)?r:1,fillingFontStyle:(0,n.Z)(o.fillingFontStyleField)?{field:o.fillingFontStyleField}:l.fontStyle,fillingFontWeight:(0,n.Z)(o.fillingFontWeightField)?{field:o.fillingFontWeightField}:l.fontWeight})}getStatisticFields(){let t=[];return t.push({key:this._nameField,operations:["values"]}),t.push({key:this._valueField,operations:["max","min"]}),t}dataToPosition(t){return null}dataToPositionX(t){return null}dataToPositionY(t){return null}dataToPositionZ(t){return null}valueToPosition(t,e){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(){super.onLayoutEnd(),this.compile(),this._dataChange=!1}getActiveMarks(){return[this._wordMark]}reInit(){super.reInit(),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)}}T.mark=v,T.builtInTheme={wordCloud:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}}};var D=i(642800);let w=()=>{S.F.registerAnimation("wordCloud",(t,e)=>({appear:!1===e?{}:"fadeIn"===e?{type:"fadeIn"}:{type:"scaleIn",duration:200,delay:(e,i)=>{let a=t.animationConfig(),s=(null==a?void 0:a.duration)||200,r=(null==a?void 0:a.totalTime)||D.cE.appear.duration,l=i.context.graphicCount;return i.context.graphicIndex*(s*l<r?s+(r-l*s)/(l-1):(r-s)/(l-1))}},enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{type:"fadeOut"}}))};var P=i(830327),L=i(648668),R=i(249297);class E extends T{constructor(){super(...arguments),this.type=a.A.wordCloud}}E.type=a.A.wordCloud;let I=()=>{S.F.registerGrammarTransform("wordcloud",{transform:P.v}),(0,R.k)(),w(),S.F.registerSeries(E.type,E)},O=()=>{S.F.registerGrammarTransform("wordcloudShape",{transform:L.v}),S.F.registerGrammarTransform("wordcloud",{transform:P.v}),(0,R.k)(),w(),S.F.registerSeries(E.type,E)}},435138:function(t,e,i){i.d(e,{s:()=>a});let a={domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}}},937191:function(t,e,i){i.d(e,{M:()=>s,l:()=>a});let a={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},s={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}}},635541:function(t,e,i){i.d(e,{b:()=>a});let a={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}}},993285:function(t,e,i){i.d(e,{A:()=>a});let a={domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}}},517847:function(t,e,i){i.d(e,{h:()=>s,t:()=>a});let a={grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},s={grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}}},540781:function(t,e,i){i.d(e,{D:()=>a});let a={style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0}},625819:function(t,e,i){i.d(e,{u:()=>a});let a={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}}},428133:function(t,e,i){i.d(e,{v:()=>r});let a=()=>({style:{symbolType:"M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;",fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}}),s=t=>({area:{style:{visible:t,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:t,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}),r={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:s(!1),startHandler:a(),endHandler:a(),startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:s(!0)}},237510:function(t,e,i){i.d(e,{_:()=>s});let a=(t,e)=>({fontSize:{type:"token",key:t},fill:{type:"palette",key:e},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}),s={title:{visible:!0,autoLimit:!1,autoFit:!1,style:a("l1FontSize","primaryFontColor")},content:{visible:!0,style:a("l2FontSize","tertiaryFontColor")}}},833632:function(t,e,i){i.d(e,{K:()=>r});var a=i(57481);let s=t=>{let e={width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}};return t?(e.width=200,e.height=8):(e.width=8,e.height=200),Object.assign(Object.assign({},a.Q),{rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}}})},r={horizontal:s(!0),vertical:s(!1)}},57481:function(t,e,i){i.d(e,{Q:()=>a});let a={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}}},866025:function(t,e,i){i.d(e,{Q:()=>a});let a={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1}},128732:function(t,e,i){i.d(e,{D:()=>r});var a=i(57481);let s=t=>{let e={style:{fill:{type:"palette",key:"sliderRailColor"}}};return t?(e.width=200,e.height=4):(e.height=200,e.width=4),Object.assign(Object.assign({},a.Q),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:e,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}}})},r={horizontal:s(!0),vertical:s(!1)}},922334:function(t,e,i){i.d(e,{b:()=>a});let a={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:(0,i(413222).K)()}},668866:function(t,e,i){i.d(e,{f:()=>l});var a=i(413222);let s=t=>({visible:t,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}}),r=(0,a.K)();r.refY=5;let l={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:s(!1),endSymbol:s(!0),label:r}},834565:function(t,e,i){i.d(e,{g:()=>a});let a={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}}},413222:function(t,e,i){i.d(e,{K:()=>a});let a=()=>({style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}})},789678:function(t,e,i){i.d(e,{h:()=>a});let a={visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}}},182991:function(t,e,i){i.d(e,{p:()=>a});let a={horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}}},191650:function(t,e,i){i.d(e,{T:()=>a});let a={padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}}},71031:function(t,e,i){i.d(e,{M:()=>a});let a={offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}}},324579:function(t,e,i){i.d(e,{D:()=>a});let a={visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}}},846893:function(t,e,i){i.d(e,{$:()=>a});let a={name:"dark",colorScheme:{default:{dataScheme:i(697658).D,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}}},417664:function(t,e,i){i.d(e,{JT:()=>g,np:()=>o,gh:()=>p,kC:()=>n,aW:()=>u,w3:()=>c});var a=i(342279),s=i(826268);let r={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:{default:{dataScheme:i(697658).D,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)",emptyCircleColor:"#e3e5e8",linearProgressTrackColor:"#E7EBED"}}},token:i(249722).r,component:{poptip:{visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}}},mark:{text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},markByName:{label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontWeight:null,fontSize:null}},fillingWord:{style:{fontWeight:null,fontSize:null}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}},animationThreshold:2e3},l={[r.name]:r},n=r.name,o=new Map(Object.keys(l).map(t=>[t,l[t]])),h=new Map,d=new Map(Object.keys(l).map(t=>[t,t===n])),u=(t,e)=>{if(!t)return;let i=_(e);o.set(t,i),d.set(t,!0)},p=(t=n)=>(d.has(t)&&!d.get(t)&&u(t,o.get(t)),o.get(t)),c=t=>o.delete(t)&&h.delete(t)&&d.delete(t),g=t=>!!(0,a.Z)(t)&&o.has(t),_=t=>{var e;let i=p(null!=(e=t.type)?e:n);return(0,s.hr)({},i,t)}},697658:function(t,e,i){i.d(e,{D:()=>a});let a=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}]},981081:function(t,e,i){i.d(e,{_t:()=>m,EG:()=>S,zE:()=>v,yu:()=>k,wW:()=>_,ht:()=>f});var a=i(933248),s=i(521107),r=i(777678),l=i(896294),n=i(576225),o=i(342279),h=i(163045),d=i(7250),u=i(562256),p=i(550853);let c={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},g={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function _(t,e){if(!t)return[];let i=b(t,e);if(!i||(0,a.Z)(i))return null!=i?i:[];if((0,s.Z)(i)){let{dataScheme:a}=i;return a?v(a)?a.map(i=>Object.assign(Object.assign({},i),{scheme:i.scheme.map(i=>f(i)?y(t,i,e):i).filter(r.Z)})):a.map(i=>f(i)?y(t,i,e):i).filter(r.Z):[]}return[]}function m(t,e){var i,a;return v(t)?null!=(a=null==(i=t.find(t=>(0,r.Z)(t.isAvailable)?(0,l.Z)(t.isAvailable)?t.isAvailable(e):!!t.isAvailable:!(0,r.Z)(t.maxDomainLength)||(null==e?void 0:e.length)<=t.maxDomainLength))?void 0:i.scheme)?a:t[t.length-1].scheme:t}function y(t,e,i){var a;let l,p=b(t,i);if(!p)return;let{palette:_}=p;if((0,s.Z)(_)&&(l=null!=(a=function(t,e){let i=c[e];if(i&&t[i])return t[i];if(t[e])return t[e];let a=g[e];return a?t[a]:void 0}(_,e.key))?a:e.default),!l)return;if((0,n.Z)(e.a)&&(0,n.Z)(e.l)||!(0,o.Z)(l))return l;let m=new h.Il(l);if((0,r.Z)(e.l)){let{r:t,g:i,b:a}=m.color,{h:s,s:r}=(0,d.Z)(t,i,a),l=(0,u.Z)(s,r,e.l),n=new h.Il(`rgb(${l.r}, ${l.g}, ${l.b})`);n.setOpacity(m.color.opacity),m=n}return(0,r.Z)(e.a)&&m.setOpacity(e.a),m.toRGBA()}let k=(t,e)=>{if(e&&f(t)){let i=y(e,t);if(i)return i}return t};function f(t){return t&&"palette"===t.type&&!!t.key}function v(t){return!(!(0,a.Z)(t)||0===t.length)&&t.every(t=>(0,r.Z)(t.scheme))}function S(t){return(0,a.Z)(t)?{dataScheme:t}:t}function b(t,e){var i,a;let s,{type:r}=null!=e?e:{};if(!e||(0,n.Z)(r))s=null==t?void 0:t.default;else{let l=(0,p.V)(e);s=null!=(a=null!=(i=null==t?void 0:t[`${r}_${l}`])?i:null==t?void 0:t[r])?a:null==t?void 0:t.default}return s}},472938:function(t,e,i){i.d(e,{V:()=>r});var a=i(417664),s=i(856721);class r{static registerTheme(t,e){(0,a.aW)(t,e)}static getTheme(t,e=!1){return(0,a.gh)(t)}static removeTheme(t){return(0,a.w3)(t)}static themeExist(t){return(0,a.JT)(t)}static getDefaultTheme(){return r.themes.get(a.kC)}static setCurrentTheme(t){r.themeExist(t)&&(r._currentThemeName=t,s.u.forEach(e=>null==e?void 0:e.setCurrentTheme(t)))}static getCurrentTheme(t=!1){return r.getTheme(r._currentThemeName,t)}static getCurrentThemeName(){return r._currentThemeName}}r.themes=a.np,r._currentThemeName=a.kC},249722:function(t,e,i){i.d(e,{r:()=>a});let a={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"}},571344:function(t,e,i){function a(t,e){return t&&e.key in t?t[e.key]:e.default}function s(t){return t&&"token"===t.type&&!!t.key}i.d(e,{J:()=>a,m:()=>s})},790863:function(t,e,i){i.d(e,{l:()=>a,s:()=>s});let a="monotone",s="linear"},303401:function(t,e,i){var a,s;i.d(e,{i:()=>a}),(s=a||(a={}))["desktop-browser"]="desktop-browser",s["mobile-browser"]="mobile-browser",s.node="node",s.worker="worker",s.miniApp="miniApp",s.wx="wx",s.tt="tt",s.harmony="harmony",s["desktop-miniApp"]="desktop-miniApp",s.lynx="lynx"}}]);
"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["56561"],{805041:function(e,t,i){i.d(t,{H:()=>s});class s{getOption(){return this._option}constructor(e){this._option=e,this.getCompiler=this._option.getCompiler}getStage(){var e;return null==(e=this.getCompiler())?void 0:e.getStage()}release(){this._option=null,this.getCompiler=null}}},687404:function(e,t,i){i.d(t,{O:()=>a});var s=i(651138);class a extends s.F{getProduct(){return this._product||(this._product=this.runTransforms(this._transform,this.getLatestData())),this._product}getDataView(){return this._data}setDataView(e){this._data=e}getLatestData(){var e;return null==(e=this._data)?void 0:e.latestData}constructor(e,t){super(e),this._data=null,this._data=t}removeProduct(){this._product=null,this._prevProduct=null,this._compiledProductId=null}release(){this.removeProduct(),super.release(),this._data=null}addRelatedMark(e){this._relatedMarks||(this._relatedMarks={}),this._relatedMarks[e.id]=e}updateData(e){if(this._compileProduct(),this._relatedMarks){let t=!1;if(Object.keys(this._relatedMarks).forEach(e=>{this._relatedMarks[e]&&(t=!0,this._relatedMarks[e].commit())}),!e&&t)return this.getCompiler().renderNextTick()}}_compileProduct(){this._prevProduct=this._product,this._product=null}generateProductId(){var e;return`${null==(e=this.getDataView())?void 0:e.name}`}}},651138:function(e,t,i){i.d(t,{F:()=>r});var s=i(207997),a=i(805041),n=i(279090);class r extends a.H{constructor(){super(...arguments),this.id=(0,s.a)(),this._compiledProductId=null}getProductId(){var e;return null!=(e=this._compiledProductId)?e:this.generateProductId()}compile(e){this._compileProduct(e)}setTransform(e){this._transform=e}runTransforms(e,t){if(!e||!e.length)return t;let i=t;return e.forEach(e=>{var t;i=null==(t=n.F.getGrammarTransform(e.type))?void 0:t.transform(e,i)}),i}}},675630:function(e,t,i){var s,a;i.d(t,{$:()=>s}),(a=s||(s={})).before="before",a.layouting="layouting",a.reevaluate="reevaluate",a.after="after"},64510:function(e,t,i){var s,a,n,r;i.d(t,{q:()=>s}),(n=s||(s={})).STATE_NORMAL="normal",n.STATE_HOVER="hover",n.STATE_HOVER_REVERSE="hover_reverse",n.STATE_DIMENSION_HOVER="dimension_hover",n.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",n.STATE_SELECTED="selected",n.STATE_SELECTED_REVERSE="selected_reverse",n.STATE_SANKEY_EMPHASIS="selected",n.STATE_SANKEY_EMPHASIS_REVERSE="blur",n.STATE_HIGHLIGHT="highlight",n.STATE_BLUR="blur",n.STATE_ACTIVE="active",(r=a||(a={})).STATE_HOVER_REVERSE="hover_reverse",r.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",r.STATE_SELECTED_REVERSE="selected_reverse"},201230:function(e,t,i){i.d(t,{c:()=>p});var s=i(459774),a=i(777678),n=i(933248),r=i(521107),l=i(145004),o=i(383695),h=i(188066),c=i(27203),d=i(805041);class u extends d.H{compile(){}getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(e){super(e),this.initStateMap()}initStateMap(e){this._stateMap=null!=e?e:this._getDefaultStateMap()}updateState(e,t){if(e&&((0,c.Z)(this._stateMap,e),!t))return this.getCompiler().renderNextTick()}}class p extends u{getStateInfoList(){return this._stateInfoList}constructor(e,t){super(e),this._stateInfoList=[],this._mark=t}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(e){return this._stateInfoList.find(t=>t.stateValue===e)}addStateInfo(e){if(this.getStateInfo(e.stateValue))return;e.level=e.level||0;let t=!0;for(let i=0;i<this._stateInfoList.length;i++){let s=this._stateInfoList[i].level;if(s&&s>e.level){this._stateInfoList.splice(i,0,e),t=!1;break}}t&&this._stateInfoList.push(e)}_clearStateBeforeSet(e){e.datums=null,e.items=null,e.fields=null,e.filter=null}changeStateInfo(e){let t=this.getStateInfo(e.stateValue);if(t){if(void 0!==e.datums&&(this._clearStateBeforeSet(t),t.datums=e.datums,t.datumKeys=e.datumKeys),void 0!==e.items&&(this._clearStateBeforeSet(t),t.items=e.items),void 0!==e.fields)if(this._clearStateBeforeSet(t),null===e.fields)t.fields=e.fields;else for(let i in t.fields=t.fields||{},e.fields){let s=e.fields[i];t.fields[i]=t.fields[i]||{};let n=t.fields[i];(0,a.Z)(s.domain)&&(n.domain=s.domain),(0,a.Z)(s.type)&&(n.type=s.type)}e.filter&&(this._clearStateBeforeSet(t),t.filter=e.filter)}else this.addStateInfo(e)}clearStateInfo(e){e.forEach(e=>{this.getStateInfo(e)&&this.changeStateInfo({stateValue:e,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}_isMultiMark(){return!this._mark||(0,o.Ir)(this._mark.type)}checkOneState(e,t,i){var s;let n=!1,r=!1;if((0,a.Z)(i.datums)&&i.datums.length>0)n=this.checkDatumState(i,t),r=!0;else if(i.items)n=null!=(s=this.checkItemsState(i,e))&&s,r=!0;else if(i.fields)n=this.checkFieldsState(i,t,e),r=!0;else if(!n&&i.filter){let s={mark:this._mark,renderNode:e,type:this._mark.type};n=i.filter(null==t?void 0:t[0],s),r=!0}return r?n?"in":"out":"skip"}checkState(e,t){var i;let s=(null!=(i=e.context.states)?i:[]).filter(e=>(0,h.wC)(e)).map(e=>[e,10]);for(let i=0;i<this._stateInfoList.length;i++){let a=this._stateInfoList[i],n=this.checkOneState(e,t,a);"skip"!==n&&"in"===n&&s.push([a.stateValue,a.level])}return s.map(e=>e[0])}checkDatumState(e,t){let i=!1,s=t[0];if((0,n.Z)(e.datums)){let t=this._isMultiMark(),a=e.datumKeys||Object.keys(e.datums[0]).filter(e=>!e.startsWith(l.Bq));i=e.datums.some(e=>t&&(0,n.Z)(null==e?void 0:e.items)?a.every(t=>{var i,a;return(null==(a=null==(i=null==e?void 0:e.items)?void 0:i[0])?void 0:a[t])===(null==s?void 0:s[t])}):a.every(t=>(null==e?void 0:e[t])===(null==s?void 0:s[t])))}else if((0,r.Z)(e.datums)){let t=e.datumKeys||Object.keys(e.datums).filter(e=>!e.startsWith(l.Bq)),a=this._isMultiMark();i=t.every(t=>{var i,n;return a?(null==(i=e.datums.items)?void 0:i[0][t])===s[t]:(null==(n=e.datums)?void 0:n[t])===s[t]})}else i=t===e.datums;return i}checkItemsState(e,t){var i;return null==(i=e.items)?void 0:i.includes(t)}checkFieldsState(e,t,i){var a;let n=!0;for(let r in e.fields){let l=e.fields[r],o=l.type,h=l.domain,c=null==(a=t[0])?void 0:a[r];if((0,s.z2)(o)&&h.length>1){if(this.checkLinearFieldState(h,r,t,i)){n=!1;break}n=!0}else{if(!h.some(e=>e===c)){n=!1;break}n=!0}}return n}checkLinearFieldState(e,t,i,s){var a;let n=this._isMultiMark()?null==(a=i[0])?void 0:a[t]:i[t];return n<e[0]||n>e[e.length-1]}release(){}}},188066:function(e,t,i){i.d(t,{hx:()=>n,wC:()=>l});var s=i(896294),a=i(64510);function n(e,t,i){var a,n,r;let l=null==(a=t[e])?void 0:a.style;return n=e,r=l,!!(("fill"===n||"stroke"===n)&&(null==r?void 0:r.gradient)&&(null==r?void 0:r.stops)||(0,s.Z)(l))||!(!(null==l?void 0:l.scale)||l.field===i)}let r={};function l(e){return!!r[e]}Object.values(a.q).forEach(e=>{r[e]=!0}),a.q.STATE_HOVER,a.q.STATE_HOVER_REVERSE,a.q.STATE_SELECTED,a.q.STATE_SELECTED_REVERSE,a.q.STATE_DIMENSION_HOVER,a.q.STATE_DIMENSION_HOVER_REVERSE},676492:function(e,t,i){i.d(t,{n:()=>d});var s=i(285144),a=i(50026),n=i(591431),r=i(777678);let l=(e,t,i,s)=>"function"==typeof e?e(t,i,s):e,o=(e,t,i,r,o)=>{var h;let c={prev:e.map(e=>{var t,i;return null==(i=null==(t=e.context)?void 0:t.data)?void 0:i[0]}),next:t.map(e=>{var t,i;return null==(i=null==(t=e.context)?void 0:t.data)?void 0:i[0]})},d={prev:e.slice(),next:t.slice()},u=null!=(h=i.animation)?h:{},p=u.easing,_=l(u.delay,o,c,d),g=l(u.duration,o,c,d),m=l(u.oneByOne,o,c,d),v=l(u.splitPath,o,c,d),y=(0,a.Z)(m)&&m>0?e=>(0,n.Z)(m)?e*m:!0===m?e*g:0:void 0;1!==e.length&&0!==e.length||1!==t.length?1===e.length&&t.length>1?(0,s.$K)(e[0],t,{delay:_,duration:g,easing:p,onEnd:r,individualDelay:y,splitPath:v}):e.length>1&&1===t.length&&(0,s.zI)(e,t[0],{delay:_,duration:g,easing:p,onEnd:r,individualDelay:y,splitPath:v}):(0,s.xQ)(e[0],t[0],{delay:_,duration:g,easing:p,onEnd:r})},h=(e,t)=>{let i=Math.floor(e.length/t);return Array(t).fill(0).map((s,a)=>e.slice(i*a,a===t-1?e.length:i*(a+1)))},c=e=>{let t=e.getMarkConfig();(0,r.Z)(t.morphElementKey)&&e.getGraphics().forEach(e=>{var i,s;let a=null==(s=null==(i=e.context)?void 0:i.data)?void 0:s[0];a&&(e.context.morphKey=a[t.morphElementKey])})},d=(e,t,i={})=>{let s=[],a=[];e.forEach(e=>{c(e),s.push(...e.getGraphics())}),t.forEach(e=>{c(e),a.push(...e.getGraphics())});let n=e=>{var t,i,s;return null!=(i=null==(t=e.context)?void 0:t.morphKey)?i:null==(s=e.context)?void 0:s.key},r=new Map,l=new Map;if(s.forEach(e=>{let t=n(e);t&&(r.has(t)||r.set(t,[]),r.get(t).push(e))}),a.forEach(e=>{let t=n(e);t&&(l.has(t)||l.set(t,[]),l.get(t).push(e))}),r.size!==l.size||!Array.from(r.keys()).every(e=>l.has(e)))return!1;let d=[...new Set([...r.keys()].filter(e=>l.has(e)))],u=[...l.keys()].filter(e=>!r.has(e)),p=0,_=()=>{0==(p-=1)&&t.forEach(e=>{})};return u.forEach(e=>{o([],l.get(e),i,_,{}),p+=1}),d.forEach(e=>{let t=r.get(e),s=l.get(e),a=Math.min(t.length,s.length);if(a>0){let e=h(t,a),n=h(s,a);for(let t=0;t<a;t++)o(e[t],n[t],i,_,{}),p+=1}}),0===p&&_(),!0}},35121:function(e,t,i){i.d(t,{IU:()=>r,ui:()=>c,wS:()=>l,yw:()=>o});var s=i(576225),a=i(383695),n=i(303401);function r(e){switch(e){case n.i["desktop-browser"]:case n.i["mobile-browser"]:break;case n.i.node:case n.i.worker:return"node";case n.i.miniApp:case n.i["desktop-miniApp"]:return"feishu";case n.i.lynx:return"lynx";case n.i.wx:return"wx";case n.i.tt:return"tt";case n.i.harmony:return"harmony"}return"browser"}function l(e,t,i,s,a){let n=e=>{if(!s&&e&&(!i||i(e))){let i=t.call(null,e);if(a&&i)return i}if("group"===e.type){let t=e.getMarks();if(t)for(let e=0;e<t.length;e++){let i=n(t[e]);if(i&&a)return i}}if(s&&e&&(!i||i(e))){let i=t.call(null,e);if(i&&a)return i}};return n(e)}function o(e){let t=[];return e.forEach(e=>{l(e,e=>{"group"!==e.type&&"component"!==e.type&&t.push(e)})}),t}function h(e,t,i,n){let r=(0,a.pv)(e,e=>i(e)),l=(0,a.pv)(t,e=>n(e)),o=e,h=t,c=[];return l.keys.forEach(e=>{if(!(0,s.Z)(e)){let t=r.data.get(e),i=l.data.get(e);t&&i&&(c.push({prev:t,next:i}),o=o.filter(e=>!t.includes(e)),h=h.filter(e=>!i.includes(e)))}}),{prev:o,next:h,update:c}}function c(e,t,i){let s={enter:[],exit:[],update:[]},n=[],r=[];e.forEach(e=>{i.morph&&e.getMarkConfig().morph||i.morphAll||i.reuse?n.push(e):s.exit.push({prev:[e]})}),t.forEach(e=>{i.morph&&e.getMarkConfig().morph||i.morphAll||i.reuse?r.push(e):s.enter.push({next:[e]})});let l=h(n,r,e=>e.getMarkConfig().morphKey,e=>e.getMarkConfig().morphKey);n=l.prev,r=l.next,s.update=s.update.concat(l.update);let o=h(n,r,e=>`${e.getUserId()}`,e=>`${e.getUserId()}`);n=o.prev,r=o.next,s.update=s.update.concat(o.update);let c=(0,a.pv)(n,e=>{var t,i;return null==(i=null==(t=e.group)?void 0:t.id)?void 0:i.call(t)}),d=(0,a.pv)(r,e=>{var t,i;return null==(i=null==(t=e.group)?void 0:t.id)?void 0:i.call(t)});return Object.keys(d).forEach(e=>{let t=c.data.get(e),i=d.data.get(e);if(t&&i){for(let e=0;e<Math.max(t.length,i.length);e+=1){let a=t[e],n=i[e];a&&n?s.update.push({prev:[a],next:[n]}):a?s.exit.push({prev:[a]}):n&&s.enter.push({next:[n]})}n=n.filter(e=>!t.includes(e)),r=r.filter(e=>!i.includes(e))}}),n.forEach(e=>s.exit.push({prev:[e]})),r.forEach(e=>s.enter.push({next:[e]})),s}},726527:function(e,t,i){i.d(t,{R:()=>O,k:()=>M});var s=i(459774),a=i(809948),n=i(687404),r=i(503581),l=i(72754),o=i(984535),h=i(522269),c=i(75464),d=i(663787),u=i(122487),p=i(777678),_=i(921763),g=i(933248),m=i(835151),v=i(971800),y=i(150954),f=i(896294),x=i(576225),b=i(988539),S=i(941728),A=i(875244),k=i(102094),I=i(107389),C=i(279090),E=i(909065),T=i(533789),L=i(924706),R=i(864985),D=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class M extends a.H{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(e=0){return this._tickData[e]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(e,t){var i;super(e,t),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._onTickDataChange=e=>{this._forceLayout(),null==e||e.updateData()},this._visible=null==(i=e.visible)||i,this._coordinateType="none"}getVRenderComponents(){var e,t;return[null==(e=this._axisMark)?void 0:e.getProduct(),null==(t=this._gridMark)?void 0:t.getProduct()].filter(p.Z)}created(){var e,t,i,s,a,n,l,o,h,c,g,m,v,y,f,x,b,S,A;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){let k=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:"angle"===this.getOrient()?r.q.circleAxis:r.q.lineAxis,mode:this._spec.mode},{skipTheme:!0});if(this._updateTickDataMarks(k),this._axisMark=k,k.setMarkConfig({zIndex:this.layoutZIndex}),(0,p.Z)(this._spec.id)&&k.setUserId(this._spec.id),k.setMarkConfig({interactive:null!=(e=this._spec.interactive)?e:this.getDefaultInteractive()}),this._marks.addMark(k),null==(t=this._spec.grid)?void 0:t.visible){let e=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:"angle"===this.getOrient()?r.F.circleAxisGrid:r.F.lineAxisGrid,mode:this._spec.mode},{skipTheme:!0});this._updateTickDataMarks(e),e.setMarkConfig({zIndex:null!=(l=null!=(a=null==(s=null==(i=this._spec.grid)?void 0:i.style)?void 0:s.zIndex)?a:null==(n=this._spec.grid)?void 0:n.zIndex)?l:d.Ai.Axis_Grid,interactive:!1}),this._marks.addMark(e),this._gridMark=e}if((null==(o=this._option.globalInstance)?void 0:o.isAnimationEnable())&&!1!==(0,_.Z)(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){let e=(0,u._8)(null==(h=C.F.getAnimationInKey("axis"))?void 0:h(),{appear:null!=(g=null!=(c=this._spec.animationAppear)?c:(0,_.Z)(this._option.getChart().getSpec(),"animationAppear.axis"))?g:(0,_.Z)(this._option.getChart().getSpec(),"animationAppear"),disappear:null!=(v=null!=(m=this._spec.animationDisappear)?m:(0,_.Z)(this._option.getChart().getSpec(),"animationDisappear.axis"))?v:(0,_.Z)(this._option.getChart().getSpec(),"animationDisappear"),enter:null!=(f=null!=(y=this._spec.animationEnter)?y:(0,_.Z)(this._option.getChart().getSpec(),"animationEnter.axis"))?f:(0,_.Z)(this._option.getChart().getSpec(),"animationEnter"),exit:null!=(b=null!=(x=this._spec.animationExit)?x:(0,_.Z)(this._option.getChart().getSpec(),"animationExit.axis"))?b:(0,_.Z)(this._option.getChart().getSpec(),"animationExit"),update:null!=(A=null!=(S=this._spec.animationUpdate)?S:(0,_.Z)(this._option.getChart().getSpec(),"animationUpdate.axis"))?A:(0,_.Z)(this._option.getChart().getSpec(),"animationUpdate")});e.enter&&(e.update[0].customParameters={enter:e.enter[0]}),this._marks.forEach(t=>t.setAnimationConfig(e))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){let e=this._initTickDataSet(this._tickTransformOption()),t=new n.O(this._option,e);this._tickData=[t],e.target.addListener("change",()=>{this._onTickDataChange(t)})}collectData(e,t){let i=[];return(0,o.xV)(this._regions,a=>{var n;let r=this.collectSeriesField(e,a);if(r=(0,g.Z)(r)?(0,s.z2)(this._scale.type)?r:[r[0]]:[r],e||(this._dataFieldText=a.getFieldAlias(r[0])),r){let e=a.getViewData();if(t)r.forEach(e=>{i.push(a.getRawDataStatisticsByField(e,!1))});else if(e&&e.latestData&&e.latestData.length){let t=null==(n=a.getViewDataStatistics)?void 0:n.call(a),s=this.type===l.L.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;r.forEach(a=>{var n;(null==(n=null==t?void 0:t.latestData)?void 0:n[a])&&(s?i.push(Object.assign(Object.assign({},t.latestData[a]),{values:e.latestData.map(e=>e[a])})):i.push(t.latestData[a]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let e=!0;return(0,o.xV)(this._regions,t=>{var i;(0,g.Z)(null==(i=t.getViewDataStatistics())?void 0:i.latestData)&&(e=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}setSeriesAndRegionsFromSpec(){let{seriesId:e,seriesIndex:t,regionId:i,regionIndex:s}=this._spec;(0,p.Z)(e)&&(this._seriesUserId=(0,m.IX)(e)),(0,p.Z)(i)&&(this._regionUserId=(0,m.IX)(i)),(0,p.Z)(t)&&(this._seriesIndex=(0,m.IX)(t)),(0,p.Z)(s)&&(this._regionIndex=(0,m.IX)(s)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(e=>e.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(c.$7.scaleUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));let e=(0,o.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(e=>e.getViewDataStatistics()).filter(e=>!!e);e.length>1?this._option.dataSet.multipleDataViewAddListener(e,"change",()=>{this.updateScaleDomain()}):1===e.length&&e[0].target.addListener("change",()=>{this.updateScaleDomain()}),(0,o.xV)(this._regions,e=>{e.event.on(c.$7.rawDataUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===e.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(){this.updateScaleRange(),this.event.emit(c.$7.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd()}computeData(e){"force"!==e||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||"force"!==e&&(0,v.X)(this._scale.range(),[0,1])||this._tickData.forEach(e=>{e.getDataView().reRunAllTransform({skipEqual:!0})}):(0,o.xV)(this._regions,e=>{var t;null==(t=e.getViewData())||t.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_updateTickDataMarks(e){this._tickData&&this._tickData.forEach(t=>{t.addRelatedMark(e)})}initScales(){this._scales=[this._scale];let e=[];if((0,o.xV)(this._regions,t=>{let i=t.getGroups();i&&e.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),0!==e.length){let t=(0,m.CE)(e.map(e=>e.fields.length));for(let e=1;e<t;e++){let e=this._scale.clone();this._scales.push(e)}}}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reRender=!0,(null==t?void 0:t.type)!==(null==e?void 0:e.type)||(null==t?void 0:t.visible)!==(null==e?void 0:e.visible)?i.reMake=!0:i.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(i=>{var s,a;return(null==(s=null==t?void 0:t[i])?void 0:s.visible)!==(null==(a=null==e?void 0:e[i])?void 0:a.visible)})),i}_getAxisAttributes(){let e=this._spec,t={orient:this.getOrient(),select:!0!==this._option.disableTriggerEvent&&e.select,hover:!0!==this._option.disableTriggerEvent&&e.hover};if((e.domainLine&&e.domainLine.visible?t.line=(0,S.lc)(e.domainLine):t.line={visible:!1},e.label&&e.label.visible)?(t.label=(0,y.Z)(e.label,["style","formatMethod","state"]),e.label.style&&(t.label.style=(0,f.Z)(e.label.style)?(t,i,s,a)=>{var n;let r=e.label.style(t.rawValue,i,t,s,a);return(0,A.h_)((0,h.H)({},null==(n=this._theme.label)?void 0:n.style,r))}:(0,A.h_)(e.label.style)),(e.label.formatMethod||e.label.formatter)&&(t.label.formatMethod=this._getLabelFormatMethod()),e.label.state&&(t.label.state=(0,A.Wi)(e.label.state)),(0,f.Z)(e.label.dataFilter)&&(t.label.dataFilter=(t,i)=>e.label.dataFilter(t,i,{vchart:this._option.globalInstance}))):t.label={visible:!1},e.tick&&e.tick.visible?(t.tick={visible:e.tick.visible,length:e.tick.tickSize,inside:e.tick.inside,alignWithLabel:e.tick.alignWithLabel,dataFilter:(0,f.Z)(e.tick.dataFilter)?t=>e.tick.dataFilter(t,{vchart:this._option.globalInstance}):void 0},e.tick.style&&(t.tick.style=(0,f.Z)(e.tick.style)?(t,i,s,a)=>{var n;let r=e.tick.style(t,i,s,a);return(0,A.h_)((0,h.H)({},null==(n=this._theme.tick)?void 0:n.style,r))}:(0,A.h_)(e.tick.style)),e.tick.state&&(t.tick.state=(0,A.Zv)(e.tick.state))):t.tick={visible:!1},e.subTick&&e.subTick.visible?(t.subTick={visible:e.subTick.visible,length:e.subTick.tickSize,inside:e.subTick.inside,count:e.subTick.tickCount},e.subTick.style&&(t.subTick.style=(0,f.Z)(e.subTick.style)?(t,i,s,a)=>{var n;let r=e.subTick.style(t,i,s,a);return(0,A.h_)((0,h.H)({},null==(n=this._theme.subTick)?void 0:n.style,r))}:(0,A.h_)(e.subTick.style)),e.subTick.state&&(t.subTick.state=(0,A.Zv)(e.subTick.state))):t.subTick={visible:!1},e.title&&e.title.visible){let i=e.title,{autoRotate:s,angle:a,style:n={},background:r,state:l,shape:o}=i,c=D(i,["autoRotate","angle","style","background","state","shape"]),d,u=a;"left"!==e.orient&&"right"!==e.orient||s&&(0,x.Z)(u)&&(u="left"===e.orient?-90:90,d=S.Rb[e.orient]),t.title=Object.assign(Object.assign({},c),{autoRotate:!1,angle:u?(0,b.M4)(u):null,textStyle:(0,h.H)({},d,(0,A.h_)(n)),pickable:!1!==n.pickable,childrenPickable:!1!==n.pickable,state:{}}),o&&o.visible?(t.title.shape=Object.assign(Object.assign({},o),{style:(0,A.h_)(o.style)}),o.state&&(t.title.state.shape=(0,A.Zv)(o.state))):t.title.shape={visible:!1},r&&r.visible?(t.title.background=Object.assign(Object.assign({},r),{style:(0,A.h_)(r.style)}),r.state&&(t.title.state.background=(0,A.Zv)(r.state))):t.title.background={visible:!1},l&&(t.title.state.text=(0,A.Zv)(l))}else t.title={visible:!1};return e.background&&e.background.visible?(t.panel={visible:!0},e.background.style&&(t.panel.style=(0,A.h_)(e.background.style)),e.background.state&&(t.panel.state=(0,A.Zv)(e.background.state))):t.panel={visible:!1},t}_getGridAttributes(){let e=this._spec;return{alternateColor:e.grid.alternateColor,alignWithLabel:e.grid.alignWithLabel,style:(0,f.Z)(e.grid.style)?(t,i)=>{var s,a;let n=e.grid.style(null==(s=t.datum)?void 0:s.rawValue,i,t.datum);return(0,A.h_)((0,h.H)({},null==(a=this._theme.grid)?void 0:a.style,n))}:(0,A.h_)(e.grid.style),subGrid:!1===e.subGrid.visible?{visible:!1}:{type:"line",visible:e.subGrid.visible,alternateColor:e.subGrid.alternateColor,style:(0,A.h_)(e.subGrid.style)}}}_getLabelFormatMethod(){let{formatMethod:e,formatter:t}=this._spec.label,{formatFunc:i}=(0,R.HJ)(e,t);return i?(e,s,a)=>i(s.rawValue,s,t):null}_initTickDataSet(e,t=0){(0,L.I)(this._option.dataSet,"scale",T.d);let i=this.registerTicksTransform();return new k.V(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${t}`}).parse(this._scales[t],{type:"scale"}).transform({type:i,options:e},!1)}_tickTransformOption(){let e=this._tick||{},t=this._spec.label||{},{tickCount:i,forceTickCount:s,tickStep:a,tickMode:n}=e,{style:r,formatMethod:l,minGap:o}=t;return{sampling:!1!==this._spec.sampling,tickCount:i,forceTickCount:s,tickStep:a,tickMode:n,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:r,labelFormatter:l,labelGap:o}}addTransformToTickData(e,t){this._tickData.forEach(i=>{var s;null==(s=null==i?void 0:i.getDataView())||s.transform(e,t)})}dataToPosition(e){return this._scale.scale(e)}getDatum(e){var t;return e&&e.name===E.X9.label?e.data:this._axisMark?null==(t=this._axisMark.getComponent())?void 0:t.attribute.items:void 0}scaleRangeFactor(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactor(e,t,i)}scaleRangeFactorEnd(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorEnd(e,t)}scaleRangeFactorStart(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorStart(e,t)}}M.specKey="axes";let O=()=>{(0,I.k)(),C.F.registerAnimation("axis",()=>({appear:{type:"fadeIn"},enter:{type:"fadeIn"},update:{type:"update"},exit:{type:"fadeOut"}}))}},721650:function(e,t,i){i.d(t,{O:()=>E});var s=i(835151),a=i(522610),n=i(522269),r=i(984535),l=i(777678),o=i(50026),h=i(933248),c=i(317099),d=i(505441),u=i(535315),p=i(576225),_=i(459774),g=i(279090),m=i(241104),v=i(75464),y=i(663787),f=i(251871),x=i(72754),b=i(941728),S=i(726527),A=i(944111),k=i(621766),I=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};let C=[f.e];class E extends S.k{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(e){this._autoIndentOnce=e}getScales(){return this._scales}constructor(e,t){super(e,t),this.type=x.L.cartesianAxis,this.name=x.L.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=y.Ai.Axis,this.layoutLevel=y.pM.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),(0,r.xV)(this._regions,e=>{let t=this.getOrient();(0,m.yL)(t)?(0,b.zf)(e.getXAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&e.setXAxisHelper(this.axisHelper()):(0,m.Vz)(t)?(0,b.zf)(e.getYAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&e.setYAxisHelper(this.axisHelper()):(0,m.IF)(t)&&(0,b.zf)(e.getZAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&e.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{let{x:t,y:i}=e;return(0,o.Z)(t)&&(t+=Number("left"===this._orient)*this.getLayoutRect().width),(0,o.Z)(i)&&(i+=Number("top"===this._orient)*this.getLayoutRect().height),{x:t,y:i}},this._transformLayoutRect=e=>{if(!this._visible)return e;let t=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":this._layout.layoutRectLevelMap.width===y.sd&&(e.width=t.x1<0?-t.x1:0);break;case"right":this._layout.layoutRectLevelMap.width===y.sd&&(e.width=t.x2>0?t.x2:0);break;case"top":this._layout.layoutRectLevelMap.height===y.sd&&(e.height=t.y1<0?-t.y1:0);break;case"bottom":this._layout.layoutRectLevelMap.height===y.sd&&(e.height=t.y2>0?t.y2:0)}return e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),this._layout.setRectInSpec(this._layoutCacheProcessing(e))},this._transformLayoutPadding=e=>("left"===this.layoutOrient||"right"===this.layoutOrient?(e.top=0,e.bottom=0):"top"!==this.layoutOrient&&"bottom"!==this.layoutOrient||(e.left=0,e.right=0),e),this._updateAxisLayout=()=>{let e=this.getLayoutStartPoint(),t=this._getUpdateAttribute(!1),{grid:i}=t,s=I(t,["grid"]),a=(0,n.H)({x:e.x,y:e.y},this._axisStyle,s);this._axisMark.setSimpleStyle(a),this._gridMark&&this._gridMark.setSimpleStyle((0,n.H)({x:e.x,y:e.y},this._getGridAttributes(),i))},this._fixAxisOnZero=()=>{let{onZero:e,visible:t}=this._spec.domainLine;if(this.visible&&e&&!1!==t){let{onZeroAxisId:e,onZeroAxisIndex:t}=this._spec.domainLine,i=this._option.getComponentsByKey("axes"),a=(0,m.yL)(this.getOrient()),n=e=>{var t;return(a?!(0,m.yL)(e.getOrient()):(0,m.yL)(e.getOrient()))&&(0,_.z2)(e.getScale().type)&&(e.getTickData()?null==(t=e.getTickData().getLatestData())?void 0:t.find(e=>0===e.value):e.getScale().domain()[0]<=0&&(0,s.Z$)(e.getScale().domain())>=0)},r=i.filter(e=>n(e));if(r.length){let s;if((0,l.Z)(e))s=r.find(t=>t.id===e);else if((0,l.Z)(t)){let e=i[t];n(e)&&(s=e)}else s=r[0];if(s){let e=this._axisMark,t=s.valueToPosition(0);a?e.setSimpleStyle(Object.assign(Object.assign({},e.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dy:"bottom"===this._orient?-((s.getInverse()?s.getScale().range()[1]:s.getScale().range()[0])-t):t})})):e.setSimpleStyle(Object.assign(Object.assign({},e.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dx:"left"===this._orient?t:-((s.getInverse()?s.getScale().range()[0]:s.getScale().range()[1])-t)})}))}}}},this._orient=(0,m.x)(e,["z"]),(0,m.IF)(this._orient)&&(this.layoutType="absolute"),this._dataSet=t.dataSet,this._coordinateType="cartesian"}static getSpecInfo(e){let t=e[this.specKey];if(!t)return null;let i="horizontal"===e.direction;if(!(0,h.Z)(t)){if(!(0,b.Vn)(t))return null;let{axisType:e,componentName:s}=(0,m.mC)(t,i);return t.type=e,[{spec:t,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:s}]}let s=!0;if(t.filter(e=>"z"===e.orient)[0]){let e=t.filter(e=>"bottom"===e.orient)[0],i=t.filter(e=>(0,m.Vz)(e.orient))[0];s=3===t.length&&e&&i}let a=t.map((e,t)=>({spec:e,index:t}));s||(a=a.filter(({spec:e})=>"z"!==e.orient));let n=[];return a.forEach(({spec:e,index:t})=>{if(!(0,b.Vn)(e))return;let{axisType:s,componentName:a}=(0,m.mC)(e,i);e.type=s,n.push({spec:e,specPath:[this.specKey,t],specInfoPath:["component",this.specKey,t],type:a})}),n}static createComponent(e,t){let{spec:i}=e,s=I(e,["spec"]),a=g.F.getComponentInKey(s.type);return a?new a(i,Object.assign(Object.assign({},t),s)):(t.onError(`Component ${s.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient}getNewScaleRange(){let{width:e,height:t}=this.getLayoutRect(),{left:i,right:s,top:a,bottom:n}=this._innerOffset,r=[];return(0,m.yL)(this.getOrient())?(0,o.Z)(e)&&(r=this._inverse?[e-s,i]:[i,e-s]):(0,m.IF)(this.getOrient())?(0,o.Z)(e)&&(r=this._inverse?[e-s,i]:[i,e-s],this._scale.range(r)):(0,o.Z)(t)&&(r=this._inverse?[a,t-n]:[t-n,a]),r}updateScaleRange(){let e=!1,t=this.getNewScaleRange(),i=this._scale.range();return t.length===i.length&&t.every((e,t)=>e===i[t])?e=!1:(e=!0,this._scale.range(t)),e}init(e){var t;super.init(e),null==(t=this.pluginService)||t.load(C.map(e=>new e)),this.callPlugin(e=>{this.pluginService&&e.onInit&&e.onInit(this.pluginService,this)})}setAttrFromSpec(){var e;if(super.setAttrFromSpec(),this.visible){(0,m.yL)(this.getOrient())?(0,c.Z)(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):(0,c.Z)(this._spec.maxWidth)&&(this._spec.maxWidth="30%");let e=this._getAxisAttributes();e.label.formatMethod=this._getLabelFormatMethod(),e.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=e}this._tick=this._spec.tick;let t=null==(e=this._option.getChart())?void 0:e.getSpec();this._inverse=(0,m.Dr)(this._spec,"horizontal"===(null==t?void 0:t.direction))}onLayoutStart(e,t){if(super.onLayoutStart(e,t),!(0,m.IF)(this.getOrient())&&this._spec.innerOffset){let e=this._spec;(0,m.Vz)(this.getOrient())?["top","bottom"].forEach(i=>{this._innerOffset[i]=(0,d.Mv)(e.innerOffset[i],t.height,t)}):["left","right"].forEach(i=>{this._innerOffset[i]=(0,d.Mv)(e.innerOffset[i],t.width,t)})}}getSeriesStatisticsField(e){let t;return t=(0,m.yL)(this.getOrient())?e.fieldX:(0,m.IF)(this.getOrient())?e.fieldZ:e.fieldY,(0,_.z2)(this._scale.type)?t:[t[0]]}_tickTransformOption(){var e,t,i,s;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:null==(e=this._tick)?void 0:e.noDecimals,labelLastVisible:null==(t=this._spec.label)?void 0:t.lastVisible,labelFirstVisible:null==(i=this._spec.label)?void 0:i.firstVisible,labelFlush:null==(s=this._spec.label)?void 0:s.flush})}axisHelper(){return{isContinuous:(0,_.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(e=0)=>this._scales[e],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!0===this._inverse,getSpec:()=>this._spec}}afterCompile(){var e;(null==(e=this._axisMark)?void 0:e.getProduct())&&this.event.on(v.ZK.AFTER_ELEMENT_ENCODE,({mark:e})=>{if(e===this._axisMark&&!1===this._isLayout&&((0,m.yL)(this.getOrient())?this.callPlugin(e=>{this.pluginService&&e.onDidLayoutHorizontal&&e.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(e=>{this.pluginService&&e.onDidLayoutVertical&&e.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){let{x:e,y:t}=this.getLayoutStartPoint(),i=(0,m.yL)(this._orient)?{x:(0,s.CE)(this._scale.range())+e,y:t}:{x:e,y:(0,s.iH)(this._scale.range())+t};this._unitText.setAttributes(i)}}),this.callPlugin(e=>{this.pluginService&&e.onDidCompile&&e.onDidCompile(this.pluginService,this)})}collectScale(){let e=[];return(0,r.xV)(this._regions,t=>{e.push("left"===this.getOrient()||"right"===this.getOrient()?t.scaleY:t.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}collectSeriesField(e,t){var i,s;return e>0?null==(s=null==(i=t.getGroups())?void 0:i.fields)?void 0:s[e]:(0,m.yL)(this.getOrient())?t.getSpec().x2Field?[...t.fieldX,t.fieldX2]:t.fieldX:(0,m.IF)(this.getOrient())?t.fieldZ:t.getSpec().y2Field?[...t.fieldY,t.fieldY2]:t.fieldY}updateSeriesScale(){let e=this.getOrient();(0,r.xV)(this._regions,t=>{(0,m.yL)(e)?(0,b.zf)(t.getXAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&(t.setScaleX(this._scale),t.setXAxisHelper(this.axisHelper())):(0,m.Vz)(e)?(0,b.zf)(t.getYAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&(t.setScaleY(this._scale),t.setYAxisHelper(this.axisHelper())):(0,m.IF)(e)&&(0,b.zf)(t.getZAxisHelper(),this.axisHelper(),(0,l.Z)(this._seriesUserId)||(0,l.Z)(this._seriesIndex))&&(t.setScaleZ(this._scale),t.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(e){var t;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=(0,m.yL)(this.getOrient())?e.height:e.width,this.setLayoutRect(e),!this.updateScaleRange()&&(0,h.Z)(null==(t=this.getTickData())?void 0:t.getLatestData())||this.computeData("range");let s={skipLayout:!1},r=(0,m.yL)(this.getOrient());this.pluginService&&(r?this.callPlugin(e=>{e.onWillLayoutHorizontal&&e.onWillLayoutHorizontal(this.pluginService,s,this)}):this.callPlugin(e=>{e.onWillLayoutVertical&&e.onWillLayoutVertical(this.pluginService,s,this)}));let l=this._axisMark.getProduct(),o=!1;if(!s.skipLayout){let e=this._getUpdateAttribute(!0),t=this._axisMark.getComponent(),s=(0,n.H)(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,e,{line:{visible:!1}}),l=null==t?void 0:t.getBoundsWithoutRender(s);l&&!l.empty()||(l=(new a.YZ).set(s.x,s.y,s.x,s.y)),o=!0,this._latestBounds=l,i=this._appendAxisUnit(l,r)}return o||(this._latestBounds=l.AABBBounds),i}positionToData(e,t){let i=(0,m.yL)(this.getOrient());t&&(e-=i?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(e=i?(0,u.Z)(e,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):(0,u.Z)(e,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));let a=this._scale.range();return(e-a[0])*(e-(0,s.Z$)(a))>0?null:this._scale.invert(e)}_getTitleLimit(e){var t,i,s,a,n;let r=this._spec.title;if(r.visible&&(0,p.Z)(null==(t=r.style)?void 0:t.maxLineWidth)){let t=null!=(n=null!=(s=null==(i=this._axisStyle.title)?void 0:i.angle)?s:null==(a=r.style)?void 0:a.angle)?n:0;if(e){let e=this.getLayoutRect().width,i=Math.abs(Math.cos(t));return i<1e-6?1/0:e/i}let l=this.getLayoutRect().height,o=Math.abs(Math.sin(t));return o<1e-6?1/0:l/o}return null}_getUpdateAttribute(e){let t=0,i=0;if(!e){let e=(0,k.S)(this.getRegions());i=e.width,t=e.height}let{width:s,height:a}=this.getLayoutRect(),n=(0,m.yL)(this._orient),r=(0,m.Vz)(this._orient),l={x:0,y:0},o=t,h=s;n?l={x:s,y:0}:r&&(l={x:0,y:a},o=i,h=a);let c=this.getLabelItems(h),d={start:{x:0,y:0},end:l,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(n)},items:c,scale:this._scale.clone()};e||(d.grid={type:"line",start:{x:0,y:0},end:l,items:c[0],verticalFactor:this._axisStyle.verticalFactor,length:o});let u=n?this.layout.minHeight:this.layout.minWidth;return(n&&this._layout.layoutRectLevelMap.height===y.wK||r&&this._layout.layoutRectLevelMap.width===y.wK)&&(u=this._verticalLimitSize),d.verticalLimitSize=this._verticalLimitSize,d.verticalMinSize=u,d.label={overflowLimitLength:this._getLabelOverflowLimit(n)},this._afterUpdateAttribute?this._afterUpdateAttribute(d,e):d}getLabelItems(e){var t;let i=null==(t=this.getTickData())?void 0:t.getLatestData();return i&&i.length?[i.map(t=>{let i=this._getNormalizedValue([t.value],e);return(0,b.cf)(t.value,i)}).filter(e=>{let{value:t,rawValue:i}=e,a=this._scale.domain();return"log"===this.getSpec().type?t>=0&&t<=1:(0,_.z2)(this._scale.type)?i>=a[0]&&i<=(0,s.Z$)(a):a.includes(i)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(v.$7.layoutEnd,this._updateAxisLayout),this.event.on(v.$7.layoutEnd,this._fixAxisOnZero),this.event.on(v.$7.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(e,t){return 0===t?0:this.dataToPosition(e)/t}_layoutCacheProcessing(e){return["width","height"].forEach(t=>{e[t]<this._layoutCache[t]?e[t]=this._layoutCache[t]:this._layoutCache[t]=e[t]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]})),e}reInit(e){super.reInit(e),this._clearLayoutCache()}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(e,t){var i;if(this._spec.unit&&this._spec.unit.visible){let a,n,{text:r,style:l}=this._spec.unit,{x:o,y:h}=this.getLayoutStartPoint();t?(a={x:(0,s.CE)(this._scale.range())+o,y:h},n={textAlign:"left",textBaseline:"middle"}):(a={x:o,y:(0,s.iH)(this._scale.range())+h},n={textAlign:"left"===this._orient?"left":"right",textBaseline:"bottom"}),n=Object.assign(Object.assign(Object.assign({},n),l),{x:a.x,y:a.y,text:r}),this._unitText?this._unitText.setAttributes(n):(this._unitText=(0,A.r)(n),this._unitText.name="axis-unit",null==(i=this.getContainer())||i.add(this._unitText));let c=this._unitText.AABBBounds;t?(e.x2+=c.x2>e.x2?c.x2-e.x2:0,e.y2+=c.y2>e.y2?c.y2-e.y2:0):(e.x1+=c.x1<e.x1?c.x1-e.x1:0,e.y1+=c.y1<e.y1?c.y1-e.y1:0)}return e}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(e){var t,i;if(e&&!1!==(null==(t=this._spec.label)?void 0:t.visible)&&!0===(null==(i=this._spec.label)?void 0:i.autoLimit)){let e=this._option.getComponentsByKey("axes"),t=this.getRegions(),i=e.filter(e=>{let i=e.getOrient();return("left"===i||"right"===i)&&e.getRegions().some(e=>t.includes(e))}),s=0,a=0,n=this.getLayoutStartPoint().x,r=n+this.getLayoutRect().width;return i.forEach(e=>{let t=e.getLayoutStartPoint().x;if("left"===e.getOrient()&&t===n){let t=e.getLayoutRect().width;s=Math.max(s,t)}else if(t===r){let t=e.getLayoutRect().width;a=Math.max(a,t)}}),{left:s,right:a}}}}E.type=x.L.cartesianAxis,E.specKey="axes"},519636:function(e,t,i){i.d(t,{N:()=>k});var s=i(469911),a=i(505116),n=i(721650),r=i(72754),l=i(576225),o=i(342279),h=i(777678),c=i(971800),d=i(800466),u=i(20831),p=i(279090),_=i(726527),g=i(366138),m=i(942357),v=i(924706),y=i(491611),f=i(503581),x=i(435138),b=i(635541),S=i(937191);class A extends n.O{constructor(){super(...arguments),this.type=r.L.cartesianBandAxis,this._scale=new s.j}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){let e=super.updateScaleRange();return this.updateGroupScaleRange(),e}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){let e=(e=0)=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:e,getBandwidth:(t=0)=>e(t).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,v.U)(this._option.dataSet,e,g.U),e}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){let{bandSize:e,maxBandSize:t,minBandSize:i}=this._getOuterBandSizeFromSpec();if(e&&this._scale.bandwidth(e),t&&this._scale.maxBandwidth(t),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(e||t)){let i=(0,a.$l)(this._scale.domain().length,null!=e?e:t,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(e=>e.setMaxWidth(i)):["left","right"].includes(this._orient)&&this._regions.forEach(e=>e.setMaxHeight(i))}}}_getOuterBandSizeFromSpec(){var e;let{bandSize:t,maxBandSize:i,minBandSize:s,bandSizeLevel:n=0}=this._spec,{gap:r,extend:c=0}=null!=(e=this._spec.bandSizeExtend)?e:{};n=Math.min(n,this._scales.length-1);for(let e=n;e>0;e--){let d=this._scales[e],u=d.domain(),p=d.paddingInner(),_=d.paddingOuter(),g=t=>{let i=e===n?c:0;return(0,l.Z)(r)||e<n?(0,a.$l)(u.length,t,p,_)+i:(t+((0,o.Z)(r)?t*(Number(r.substring(0,r.length-1))/100):r))*u.length/(this._scales[e-1].paddingInner()+1)+i};(0,h.Z)(t)&&(t=g(t)),(0,h.Z)(i)&&(i=g(i)),(0,h.Z)(s)&&(s=g(s))}return{bandSize:t,maxBandSize:i,minBandSize:s}}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(null==t?void 0:t.showAllGroupLayers)===(null==e?void 0:e.showAllGroupLayers)&&(0,c.X)(null==t?void 0:t.layers,null==e?void 0:e.layers)||(i.reMake=!0),i}reInit(e){super.reInit(),null==this||this._updateData()}}A.type=r.L.cartesianBandAxis,A.specKey="axes",A.builtInTheme={axis:b.b,axisBand:x.s,axisX:S.l,axisY:S.M},(0,d.jB)(A,u.f);let k=()=>{p.F.registerGraphicComponent(f.q.lineAxis,(e,t)=>new y.$(e,t)),p.F.registerGraphicComponent(f.F.lineAxisGrid,(e,t)=>new m.E(e,t)),(0,_.R)(),p.F.registerComponent(A.type,A,!1)}},711805:function(e,t,i){i.d(t,{E:()=>I,G:()=>k});var s=i(864190),a=i(721650),n=i(777678),r=i(50026),l=i(835151),o=i(800466),h=i(72754),c=i(192830),d=i(279090),u=i(726527),p=i(924706),_=i(967115),g=i(491611),m=i(942357),v=i(241104),y=i(505441),f=i(419063),x=i(503581),b=i(993285),S=i(937191),A=i(635541);class k extends a.O{constructor(){super(...arguments),this.type=h.L.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new s.f}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setExtraAttrFromSpec();let i=null==(t=null==(e=this._tickData)?void 0:e[0])?void 0:t.getDataView().transformsArr.find(e=>e.type===this.registerTicksTransform());i&&(i.options=this._tickTransformOption())}initScales(){var e,t;super.initScales();let i=[0,1];(0,n.Z)(null==(e=this._domain)?void 0:e.min)&&(i[0]=this._domain.min),(0,n.Z)(null==(t=this._domain)?void 0:t.max)&&(i[1]=this._domain.max),this._scale.domain(i)}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:(null==(e=this._spec.breaks)?void 0:e.length)?()=>this._break:null})}_getUpdateAttribute(e){var t,i;let s=super._getUpdateAttribute(e);if(!(0,v.IF)(this._orient)&&(null==(i=null==(t=this._break)?void 0:t.breaks)?void 0:i.length)){let{width:e,height:t}=this.getLayoutRect(),i=(0,v.yL)(this._orient),a=i?e:t;s.breaks=this._break.breaks.map(e=>{let t,{range:s,breakSymbol:n,gap:l=6}=e,o=this.valueToPosition((s[0]+s[1])/2)/a;t=(0,y.hU)(l)?Number(l.substring(0,l.length-1))/100:l/a;let h=(0,r.Z)(null==n?void 0:n.angle)?n.angle:i?60:15;return{range:[o-t/2,o+t/2],breakSymbol:Object.assign(Object.assign({visible:!0},n),{angle:h*Math.PI/180}),rawRange:s}})}return s}getNewScaleRange(){var e,t;let i=super.getNewScaleRange();return(null==(e=this._spec.breaks)?void 0:e.length)&&(null==(t=this._break)?void 0:t.scope)&&(i=(0,f.zb)(this._break.scope).map(e=>i[0]+((0,l.Z$)(i)-i[0])*e)),i}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){let e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e.valueToPosition=this.valueToPosition.bind(this),e}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,p.U)(this._option.dataSet,e,_.m),e}}k.type=h.L.cartesianLinearAxis,k.specKey="axes",k.builtInTheme={axis:A.b,axisLinear:b.A,axisX:S.l,axisY:S.M},(0,o.jB)(k,c.E);let I=()=>{d.F.registerGraphicComponent(x.q.lineAxis,(e,t)=>new g.$(e,t)),d.F.registerGraphicComponent(x.F.lineAxisGrid,(e,t)=>new m.E(e,t)),(0,u.R)(),d.F.registerComponent(k.type,k)}},435729:function(e,t,i){i.d(t,{K:()=>f});var s=i(711805),a=i(72754),n=i(192830),r=i(636929),l=i(800466),o=i(279090),h=i(726527),c=i(967115),d=i(491611),u=i(942357),p=i(924706),_=i(503581),g=i(635541),m=i(993285),v=i(937191);class y extends s.G{constructor(){super(...arguments),this.type=a.L.cartesianLogAxis,this._zero=!1,this._scale=new r.Y}initScales(){var e;super.initScales(),this._scale.base(null!=(e=this._spec.base)?e:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,p.U)(this._option.dataSet,e,c.m),e}transformScaleDomain(){}}y.type=a.L.cartesianLogAxis,y.specKey="axes",y.builtInTheme={axis:g.b,axisLinear:m.A,axisX:v.l,axisY:v.M},(0,l.jB)(y,n.E);let f=()=>{o.F.registerGraphicComponent(_.q.lineAxis,(e,t)=>new d.$(e,t)),o.F.registerGraphicComponent(_.F.lineAxisGrid,(e,t)=>new u.E(e,t)),(0,h.R)(),o.F.registerComponent(y.type,y)}},823894:function(e,t,i){i.d(t,{O:()=>f});var s=i(711805),a=i(72754),n=i(192830),r=i(996685),l=i(800466),o=i(279090),h=i(726527),c=i(967115),d=i(491611),u=i(942357),p=i(924706),_=i(503581),g=i(635541),m=i(993285),v=i(937191);class y extends s.G{constructor(){super(...arguments),this.type=a.L.cartesianSymlogAxis,this._zero=!1,this._scale=new r.g}initScales(){var e;super.initScales(),this._scale.constant(null!=(e=this._spec.constant)?e:10)}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,p.U)(this._option.dataSet,e,c.m),e}transformScaleDomain(){}}y.type=a.L.cartesianSymlogAxis,y.specKey="axes",y.builtInTheme={axis:g.b,axisLinear:m.A,axisX:v.l,axisY:v.M},(0,l.jB)(y,n.E);let f=()=>{o.F.registerGraphicComponent(_.q.lineAxis,(e,t)=>new d.$(e,t)),o.F.registerGraphicComponent(_.F.lineAxisGrid,(e,t)=>new u.E(e,t)),(0,h.R)(),o.F.registerComponent(y.type,y)}},848907:function(e,t,i){i.d(t,{w:()=>A});var s=i(102094),a=i(241104),n=i(777678),r=i(531324),l=i(984535),o=i(711805),h=i(72754),c=i(687404),d=i(279090),u=i(726527),p=i(941728),_=i(522269),g=i(967115),m=i(491611),v=i(942357),y=i(924706),f=i(503581),x=i(635541),b=i(937191);class S extends o.G{constructor(){super(...arguments),this.type=h.L.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),(0,l.xV)(this._regions,e=>{(0,a.yL)(this.getOrient())?(0,p.zf)(e.getXAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&e.setXAxisHelper(this.axisHelper()):(0,p.zf)(e.getYAxisHelper(),this.axisHelper(),(0,n.Z)(this._seriesUserId)||(0,n.Z)(this._seriesIndex))&&e.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._tick=(0,_.H)({},this._spec.tick,null==(e=this._spec.layers)?void 0:e[0])}_initData(){var e;if(super._initData(),null==(e=this._spec.layers)?void 0:e[1]){let e=new s.V(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new c.O(this._option,e)}}computeData(e){super.computeData(e),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}created(){super.created(),this._layerTickData&&(this._axisMark&&this._layerTickData.addRelatedMark(this._axisMark),this._gridMark&&this._layerTickData.addRelatedMark(this._gridMark))}_getLabelFormatMethod(){var e,t,i,s,a,n,l,o;let h=r.k.getInstance(),c=(null==(t=null==(e=this._spec.layers)?void 0:e[1])?void 0:t.timeFormat)||"%Y%m%d",d="local"===((null==(s=null==(i=this._spec.layers)?void 0:i[1])?void 0:s.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat,u=(null==(n=null==(a=this._spec.layers)?void 0:a[0])?void 0:n.timeFormat)||"%Y%m%d",p="local"===((null==(o=null==(l=this._spec.layers)?void 0:l[0])?void 0:o.timeFormatMode)||"local")?h.timeFormat:h.timeUTCFormat;return(e,t,i,s,a)=>{var n;let r;return r=0===a?p(u,e):d(c,e),(null==(n=this._spec.label)?void 0:n.formatMethod)?this._spec.label.formatMethod(r,t):r}}getLabelItems(e){var t,i;let s=[],a=null==(t=this.getTickData())?void 0:t.getLatestData();a&&a.length&&s.push(a.map(t=>(0,p.cf)(t.value,this._getNormalizedValue([t.value],e))));let n=null==(i=this._layerTickData)?void 0:i.getLatestData();return n&&n.length&&s.push(n.map(t=>(0,p.cf)(t.value,this._getNormalizedValue([t.value],e)))),s}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,y.U)(this._option.dataSet,e,g.m),e}transformScaleDomain(){}}S.type=h.L.cartesianTimeAxis,S.specKey="axes",S.builtInTheme={axis:x.b,axisX:b.l,axisY:b.M};let A=()=>{d.F.registerGraphicComponent(f.q.lineAxis,(e,t)=>new m.$(e,t)),d.F.registerGraphicComponent(f.F.lineAxisGrid,(e,t)=>new v.E(e,t)),(0,u.R)(),d.F.registerComponent(S.type,S)}},241104:function(e,t,i){i.d(t,{Dr:()=>p,IF:()=>c,Vz:()=>h,_Q:()=>u,mC:()=>_,x:()=>d,xy:()=>g,yL:()=>o});var s=i(777678),a=i(505441),n=i(72754),r=i(864985),l=i(522269);function o(e){return"bottom"===e||"top"===e}function h(e){return"left"===e||"right"===e}function c(e){return"z"===e}function d(e,t){return(0,a.vk)(e.orient)||t&&t.includes(e.orient)?e.orient:"left"}function u(e){return"top"===e||"bottom"===e?"horizontal":"vertical"}function p(e,t){let i=e.inverse;return t&&!o(e.orient)&&(i=!(0,s.Z)(e.inverse)||!e.inverse),i}function _(e,t){var i,s;let a=null!=(i=e.type)?i:(s=e.orient,t?o(s)?"linear":"band":o(s)?"band":"linear");return{axisType:a,componentName:`${n.L.cartesianAxis}-${a}`}}let g=(e,t,i)=>{var s;let a=null!=(s="band"===t?(0,r.DE)("axisBand",i):["linear","log","symlog"].includes(t)?(0,r.DE)("axisLinear",i):{})?s:{},n=o(e)?(0,r.DE)("axisX",i):h(e)?(0,r.DE)("axisY",i):(0,r.DE)("axisZ",i);return(0,l.H)({},(0,r.DE)("axis",i),a,n)}},503581:function(e,t,i){var s,a,n,r;i.d(t,{F:()=>a,q:()=>s}),(n=s||(s={})).lineAxis="lineAxis",n.circleAxis="circleAxis",(r=a||(a={})).lineAxisGrid="lineAxisGrid",r.circleAxisGrid="circleAxisGrid"},20831:function(e,t,i){i.d(t,{f:()=>o});var s=i(933248),a=i(835151),n=i(75464),r=i(687404),l=i(941728);class o{constructor(){this._rawDomainIndex=[]}_initData(){var e;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let t=0;t<this._scales.length;t++){let i=(null!=(e=this._spec.layers)?e:[])[this._scales.length-1-t]||{};if(!1!==i.visible&&0!==i.tickCount&&0!==i.forceTickCount){let e=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),t),s=new r.O(this._option,e);this._tickData.push(s),e.target.addListener("change",()=>{this._onTickDataChange(s)}),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[t]=s}}else{let e=this._initTickDataSet(this._tickTransformOption()),t=new r.O(this._option,e);e.target.addListener("change",()=>{this._onTickDataChange(t)}),this._tickData=[t],this._tickDataMap={0:t}}}_updateData(){var e,t,i;let s=this.registerTicksTransform();if(this._spec.showAllGroupLayers&&this._scales.length>1){let t=null!=(e=this._spec.layers)?e:[];Object.keys(this._tickDataMap).forEach(e=>{let i=t[this._scales.length-1-e]||{},a=this._tickDataMap[e],n=null==a?void 0:a.getDataView().transformsArr.find(e=>e.type===s);n&&(n.options=Object.assign(Object.assign({},this._tickTransformOption()),i))})}else{let e=null==(i=null==(t=this._tickData)?void 0:t[0])?void 0:i.getDataView().transformsArr.find(e=>e.type===s);e&&(e.options=this._tickTransformOption())}}dataToPosition(e,t={}){var i,s;if(0===e.length||0===this._scales.length)return 0;let{position:a,bandScale:n}=this.getPosition(e);return a+n.bandwidth()*(null!=(s=null!=(i=t.bandPosition)?i:this._spec.bandPosition)?s:this._defaultBandPosition)}valueToPosition(e){return this._scale.scale(e)}updateGroupScaleRange(){let e=this._scale;this._scales.forEach((t,i)=>{i>0&&(t.range([0,e.bandwidth()]),e=t)})}getPosition(e){let t=0,i=this._scale;if(1===this._scales.length||1===e.length)t=this.valueToPosition(e[0]);else{let s=Math.min(e.length,this._scales.length);for(let i=0;i<s;i++)t+=this._scales[i].scale(e[i]);i=this._scales[s-1]}return{position:t,bandScale:i}}calcScales(e,t){var i,a;let{bandPadding:n,paddingInner:r,paddingOuter:l}=this._spec,o=(0,s.Z)(n),h=(0,s.Z)(r),c=(0,s.Z)(l);for(let s=0;s<this._scales.length;s++){let d=o?n[s]:n,u=h?r[s]:r,p=c?l[s]:l;this._scales[s].paddingInner(null!=(i=null!=u?u:d)?i:e,!0).paddingOuter(null!=(a=null!=p?p:d)?a:t,!0)}}computeBandDomain(e){if(!e.length)return[];if(1===e.length)return e[0].values;let t=new Set;for(let i=0;i<e.length;i++)for(let s=0;s<e[i].values.length;s++)t.add(e[i].values[s]);return Array.from(t)}updateScaleDomain(){var e;if(!this.isSeriesDataEnable())return;(null==(e=this._rawDomainIndex)?void 0:e.length)||!this._scales.length||this._updateRawDomain();let t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&0===e)this._scales[e].domain(t);else{let t=this.collectData(e),i=this.computeBandDomain(t);this._scales[e].domain(i.sort((t,i)=>this._rawDomainIndex[e][t]-this._rawDomainIndex[e][i]))}this.transformScaleDomain(),this.event.emit(n.$7.scaleDomainUpdate,{model:this}),this.event.emit(n.$7.scaleUpdate,{model:this,value:"domain"})}getLabelItems(e){let t=[],i=[];return(this._spec.showAllGroupLayers?this._scales:[this._scales[0]]).forEach((s,n)=>{var r;let o=this._tickDataMap[n],h=null==(r=null==o?void 0:o.getLatestData())?void 0:r.length,c=h?o.getLatestData().map(e=>e.value):s.domain();if(c&&c.length)if(i&&i.length){let s=[],n=[];i.forEach(t=>{c.forEach(i=>{let r=(0,a.IX)(t).concat(i);if(n.push(r),h){let t=(0,l.cf)(i,this._getNormalizedValue(r,e));s.push(t)}})}),h&&t.push(s.filter(e=>e.value>=0&&e.value<=1)),i=n}else c.forEach(e=>{i.push(e)}),h&&t.push(o.getLatestData().map(t=>(0,l.cf)(t.value,this._getNormalizedValue([t.value],e))).filter(e=>e.value>=0&&e.value<=1))}),t.reverse()}_updateRawDomain(){this._rawDomainIndex=[];let e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&0===t)this._scales[t].domain(e);else{let e=this.collectData(t,!0),i=this.computeBandDomain(e);this._rawDomainIndex[t]={},i.forEach((e,i)=>this._rawDomainIndex[t][e]=i)}}_clearRawDomain(){this._rawDomainIndex=[]}}},192830:function(e,t,i){i.d(t,{E:()=>m});var s=i(777678),a=i(50026),n=i(896294),r=i(835151),l=i(576225),o=i(419063),h=i(941728),c=i(75464),d=i(241104);let u=(e,t)=>e-t,p=Math.sqrt(50),_=Math.sqrt(10),g=Math.sqrt(2);class m{constructor(){this._extend={},this.niceLabelFormatter=null}setExtraAttrFromSpec(){(0,s.Z)(this._spec.nice)&&(this._nice=this._spec.nice),(0,s.Z)(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=(0,h.NG)(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var e;if(!this._nice)return!1;let t=5,i=this._spec.tick||{};if((0,a.Z)(i.forceTickCount))t=i.forceTickCount;else if((0,n.Z)(i.tickCount)){let e=this._scale.range(),s=Math.abs((0,r.Z$)(e)-e[0]);1===s&&this._option&&(s=(0,d.yL)(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),t=i.tickCount({axisLength:s,labelStyle:this._spec.label&&this._spec.label.style})}else t=(0,a.Z)(i.tickCount)?i.tickCount:5;"accurateFirst"===this._spec.niceType&&(t=Math.max(5,t));let{min:o,max:h}=null!=(e=this._domain)?e:{};return(0,l.Z)(o)&&(0,l.Z)(h)&&(0,l.Z)(this._softMaxValue)&&(0,l.Z)(this._softMinValue)?this._scale.nice(t):((0,s.Z)(o)||(0,s.Z)(this._softMinValue))&&(0,l.Z)(h)&&(0,l.Z)(this._softMaxValue)?this._scale.niceMax(t):!(!(0,l.Z)(o)||!(0,l.Z)(this._softMinValue)||!(0,s.Z)(h)&&!(0,s.Z)(this._softMaxValue))&&this._scale.niceMin(t)}setLogScaleNice(){var e;if(!this._nice)return!1;let{min:t,max:i}=null!=(e=this._domain)?e:{};return(0,l.Z)(t)&&(0,l.Z)(i)&&(0,l.Z)(this._softMaxValue)&&(0,l.Z)(this._softMinValue)?this._scale.nice():((0,s.Z)(t)||(0,s.Z)(this._softMinValue))&&(0,l.Z)(i)&&(0,l.Z)(this._softMaxValue)?this._scale.niceMax():!(!(0,l.Z)(t)||!(0,l.Z)(this._softMinValue)||!(0,s.Z)(i)&&!(0,s.Z)(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(e,t){return this.valueToPosition(e[0])}valueToPosition(e){return this._scale.scale(e)}computeLinearDomain(e){let t=[];if(e.length){let n=this._spec.breaks&&this._spec.breaks.length,r,h,c=[];if(e.forEach(e=>{let{min:t,max:i}=e;r=void 0===r?t:Math.min(r,t),h=void 0===h?i:Math.max(h,i),n&&(c=c.concat(e.values))}),n){let e=[],n=[],d=(0,l.Z)(this._domain.max)?h:this._domain.max;for(let t=0;t<this._spec.breaks.length;t++){let{range:i}=this._spec.breaks[t];i[0]<=i[1]&&i[1]<=d&&(e.push(i),n.push(this._spec.breaks[t]))}if(e.sort((e,t)=>e[0]-t[0]),e.length){var i,s,a;let{domain:r,scope:l}=(i=c,s=(0,o.zb)(e),a=this._spec.breaks[0].scopeType,i.sort(u),s.sort(u),{domain:function(e,t){let i=e[0],s=e[e.length-1],a=t.filter(e=>e>i&&e<s);return 0===a.length?[[i,s]]:a.reduce((e,t,i)=>(e.push([t,a.length===i+1?s:a[i+1]]),e),[[i,a[0]]])}(i,s),scope:function(e,t,i="count"){let s=((e,t)=>{let i=[{count:0,sub:[],max:t[0],min:t[0]}],s=0,a=0;for(;s<t.length;)e[a]<=t[s]?(i[s].count+=1,i[s].sub.push(e[a]),a+=1):i[s+=1]={count:0,sub:[],max:t[s],min:t[s]};i.forEach(e=>{e.count&&(e.min=Math.min.apply(null,e.sub))});let n=e.slice(a);return i[s]={count:n.length,sub:n,min:t[t.length-1],max:Math.max.apply(null,n)},i})(e,t),a="count"===i?e.length:s.reduce((e,t,i)=>t.count>0?e+t.max-t.min:e,0),n=[],r=0,l=0;return s.forEach((e,t)=>{if(0===a)n.push([0,t/s.length-1]);else{let o="count"===i?e.count:e.max-e.min,h=n[l-1]?n[l-1][1]:0,c=t===s.length-1?1:Math.min((r+o)/a,1);(h!==c||0!==h&&1!==h)&&(l+=1,n.push([h,c]),r+=o)}}),n}(i,s,a)});t=(0,o.zb)(r),this._break={domain:r,scope:l,breakDomains:e,breaks:n}}else t=[r,h]}else t=[r,h]}else t[0]=0,t[1]=0;return this.setSoftDomainMinMax(t),this.expandDomain(t),this.includeZero(t),this.setDomainMinMax(t),t}expandDomain(e){if(!this._expand)return;let t=e[0],i=(0,r.Z$)(e);t===i&&(0===i?i=1:i>0?t=0:i<0&&(i=0)),(0,s.Z)(this._expand.min)&&(e[0]=t-(i-t)*this._expand.min),(0,s.Z)(this._expand.max)&&(e[e.length-1]=i+(i-t)*this._expand.max)}niceDomain(e){let{min:t,max:i}=(0,h.NG)(this._spec);if((0,s.Z)(t)||(0,s.Z)(i)||"linear"!==this._spec.type)return e;if(1e-12>=Math.abs((0,r.iH)(e)-(0,r.CE)(e))){let t=e[0],i=t>=0?1:-1;if((t=Math.abs(t))<1)e[0]=0,e[e.length-1]=1;else{let i=t/5,s=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,s);i=(a>=p?10:a>=_?5:a>=g?2:1)*Math.pow(10,s),e[0]=0,e[e.length-1]=10*i}i<0&&(e.reverse(),e[0]*=-1,e[e.length-1]*=-1)}return e}includeZero(e){this._zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max((0,r.Z$)(e),0))}setExtendDomain(e,t){if(void 0===t)return void delete this._extend[e];this._extend[e]=t;let i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this.event.emit(c.$7.scaleUpdate,{model:this,value:"domain"})}extendDomain(e){let t,i=e.length-1,s=e[0]-e[i]>0,a=s?i:0,n=s?0:i;for(let i in this._extend)(t=this._extend[i])>e[n]&&(e[n]=t),t<e[a]&&(e[a]=t)}getDomainSpec(){return this._domain}setDomainMinMax(e){if(!this._domain)return;let{min:t,max:i}=this._domain;(0,s.Z)(t)&&(e[0]=t),(0,s.Z)(i)&&(e[e.length-1]=i)}setSoftDomainMinMax(e){let{softMin:t,softMax:i}=this._spec;if((0,s.Z)(t)){let i=(0,n.Z)(t)?t(e):t;(0,l.Z)(i)&&(i=e[0]),i<=e[0]&&(e[0]=i,this._softMinValue=i)}if((0,s.Z)(i)){let t=(0,n.Z)(i)?i(e):i;(0,l.Z)(t)&&(t=(0,r.Z$)(e)),t>=(0,r.Z$)(e)&&(e[e.length-1]=t),this._softMaxValue=t}}setZero(e){this._zero!==e&&(this._zero=e,this.updateScaleDomain())}updateScaleDomain(){if(!this.isSeriesDataEnable())return;let e=this.collectData(),t=this.computeLinearDomain(e);this.updateScaleDomainByModel(t)}updateScaleDomainByModel(e){e=null!=e?e:this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this._updateNiceLabelFormatter(e),this._domainAfterSpec=this._scale.domain(),this.event.emit(c.$7.scaleDomainUpdate,{model:this}),this.event.emit(c.$7.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(e){let t=Math.pow(10,Math.max(-Math.floor(Math.log10(Math.abs((0,r.Z$)(e)-e[0]))),0)+2);this.niceLabelFormatter=e=>(0,a.Z)(+e)?Math.round(e*t)/t:e}}},924625:function(e,t,i){i.d(t,{C:()=>b});var s=i(248038),a=i(459774),n=i(663787),r=i(72754),l=i(279090),o=i(984535),h=i(846070),c=i(941728),d=i(933248),u=i(777678),p=i(988539),_=i(175570),g=i(50026),m=i(726527),v=i(2837),y=i(522269),f=i(505441),x=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class b extends m.k{get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getDefaultInteractive(){return"angle"!==this._orient}getGroupScales(){return this._groupScales}static getSpecInfo(e){let t,i;if(!e[this.specKey])return null;let s=(0,d.Z)(e[this.specKey]),a=s?e[this.specKey]:[e[this.specKey]],n=[],r=[],l=[];return a.forEach((a,o)=>{if(!(0,c.RY)(a))return;let{axisType:h,componentName:d,startAngle:u,endAngle:p,center:_,outerRadius:g,layoutRadius:m}=(0,v.xM)(a,e);a.center=_,a.startAngle=u,a.endAngle=p,a.outerRadius=g,a.type=h,a.layoutRadius=m;let y={spec:a,specPath:s?[this.specKey,o]:[this.specKey],specInfoPath:["component",this.specKey,o],type:d};n.push(y),"radius"===a.orient?(r.push(y),i=o):(l.push(y),t=o)}),r.forEach(e=>{e.angleAxisIndex=t}),l.forEach(e=>{e.radiusAxisIndex=i}),n}static createComponent(e,t){let{spec:i}=e,s=x(e,["spec"]),a=l.F.getComponentInKey(s.type);return a?new a(i,Object.assign(Object.assign({},t),s)):(t.onError(`Component ${s.type} not found`),null)}constructor(e,t){super(e,t),this.type=r.L.polarAxis,this.name=r.L.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=n.Ai.Axis,this._tick=void 0,this._center=null,this._startAngle=s.JK,this._endAngle=s.Uw,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),(0,o.xV)(this._regions,e=>{"radius"===this.getOrient()?(0,c.zf)(e.radiusAxisHelper,this.axisHelper(),(0,u.Z)(this._seriesUserId)||(0,u.Z)(this._seriesIndex))&&(e.radiusAxisHelper=this.axisHelper()):(0,c.zf)(e.angleAxisHelper,this.axisHelper(),(0,u.Z)(this._seriesUserId)||(0,u.Z)(this._seriesIndex))&&(e.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{var t;let i=null==(t=this.getRegions())?void 0:t[0];return i?i.getLayoutStartPoint():e},this.getCenter=()=>{var e,t;let i=this.getRefLayoutRect(),{width:s,height:a}=i;return{x:(0,f.Mv)(null==(e=this._center)?void 0:e.x,s,i,s/2),y:(0,f.Mv)(null==(t=this._center)?void 0:t.y,a,i,a/2)}},this.getRefLayoutRect=()=>this.getRegions()[0].getLayoutRect(),this._coordinateType="polar"}setAttrFromSpec(){super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient="angle"===this._spec.orient?"angle":"radius",this._center=this._spec.center,this._startAngle=(0,p.M4)(this._spec.startAngle),this._endAngle=(0,p.M4)(this._spec.endAngle),this._inverse=this._spec.inverse}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimal:null==(e=this._tick)?void 0:e.noDecimals,startAngle:this.startAngle,labelOffset:(0,c.bi)(this._spec),getRadius:()=>this.getOuterRadius(),inside:this._spec.inside})}updateScaleRange(){let e,t=this._scale.range();return e="radius"===this.getOrient()?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!t||!e||t[0]!==e[0]||t[1]!==e[1])&&(this._scale.range(e),!0)}collectSeriesField(e,t){var i,s;return e>0?null==(s=null==(i=t.getGroups())?void 0:i.fields)?void 0:s[e]:"radius"===this.getOrient()?t.getRadiusField():t.getAngleField()}updateSeriesScale(){(0,o.xV)(this._regions,e=>{"radius"===this.getOrient()?(0,c.zf)(e.radiusAxisHelper,this.axisHelper(),(0,u.Z)(this._seriesUserId)||(0,u.Z)(this._seriesIndex))&&(e.setRadiusScale(this._scale),e.radiusAxisHelper=this.axisHelper()):(0,c.zf)(e.angleAxisHelper,this.axisHelper(),(0,u.Z)(this._seriesUserId)||(0,u.Z)(this._seriesIndex))&&(e.setAngleScale(this._scale),e.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(e){let t="radius"===this.getOrient()?e.getRadiusField():e.getAngleField();return(0,a.z2)(this._scale.type)?t:[t[0]]}initGroupScales(){}axisHelper(){return{isContinuous:(0,a.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),layoutRadius:this._computeLayoutRadius.bind(this),getScale:(e=0)=>this._scales[e],getAxisId:()=>this.id,getSpec:()=>this._spec}}positionToData(e){let t=this.pointToCoord(e);return"radius"===this.getOrient()?this.invert(t.radius):this.invert(t.angle)}coordToPoint(e){let t=this.getCenter();return(0,p.op)(t,e.radius,e.angle)}pointToCoord(e){let t=this.getCenter(),i=this._startAngle,s=this._endAngle;return(0,p.Jl)(e,t,i,s)}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}updateLayoutAttribute(){this._visible&&("radius"===this.getOrient()?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_getNormalizedValue(e,t){return 0===t?0:(this.dataToPosition(e)-this._getStartValue())/t}getLabelItems(e){var t;let i=null==(t=this.getTickData())?void 0:t.getLatestData();return i&&i.length?[i.map(t=>(0,c.cf)(t.value,this._getNormalizedValue([t.value],e)))]:[]}_getStartValue(){return"radius"===this.getOrient()?this.computeLayoutInnerRadius():this._startAngle}_layoutAngleAxis(){var e,t,i;let s=this.getCenter(),a=this.computeLayoutOuterRadius(),n=this.computeLayoutInnerRadius(),r=this._endAngle-this._startAngle,l=this.getLabelItems(r),o=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:s,radius:a,innerRadius:n,startAngle:this._startAngle,endAngle:this._endAngle,sides:(null==(i=null==(t=null==(e=this._getRelatedAxis(this._option.radiusAxisIndex))?void 0:e.getSpec())?void 0:t.grid)?void 0:i.smooth)?void 0:this.getScale().domain().length}),h=Object.assign(Object.assign({},o),{size:this.getRefLayoutRect(),title:{text:this._spec.title.text||this._dataFieldText},items:l,orient:"angle",scale:this._scale});this._spec.grid.visible&&(h.grid=Object.assign({type:"line",smoothLink:!0,items:l[0]},o)),this._update(h)}_layoutRadiusAxis(){var e,t,i;let s=this.getCenter(),a=this.computeLayoutOuterRadius(),n=this.computeLayoutInnerRadius(),r=this.coordToPoint({angle:this._startAngle,radius:a}),l=this.coordToPoint({angle:this._startAngle,radius:n}),o=_.HL.distancePP(l,r),h=this.getLabelItems(o),c=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:l,end:r,verticalFactor:-1}),d=Object.assign(Object.assign({},c),{title:{text:this._spec.title.text||this._dataFieldText},items:h,orient:"radius",scale:this._scale.clone()});(null==(e=this._spec.grid)?void 0:e.visible)&&(d.grid=Object.assign({items:h[0],type:(null==(t=this._spec.grid)?void 0:t.smooth)?"circle":"polygon",center:s,closed:!0,sides:null==(i=this._getRelatedAxis(this._option.angleAxisIndex))?void 0:i.getScale().domain().length,startAngle:this._startAngle,endAngle:this._endAngle},c)),this._update(d)}_getRelatedAxis(e){if((0,u.Z)(e))return this._option.getComponentByIndex(this.specKey,e)}_computeLayoutRadius(){return(0,v.C5)(()=>this._spec.layoutRadius,this.getRefLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}computeLayoutOuterRadius(){var e;let t=null!=(e=this._spec.outerRadius)?e:this._spec.radius,i=null!=t?t:this.getRefSeriesRadius().outerRadius;return this._computeLayoutRadius()*i}computeLayoutInnerRadius(){var e;let t=null!=(e=this._spec.innerRadius)?e:this.getRefSeriesRadius().innerRadius;return this._computeLayoutRadius()*t}getRefSeriesRadius(){let e=s.KZ,t=0,i=this.getChart().getSpec();return(0,o.xV)(this.getRegions(),s=>{if((0,h.eg)(s.type)){let{outerRadius:a=i.outerRadius,innerRadius:n=i.innerRadius}=s;(0,g.Z)(a)&&(e=a),(0,g.Z)(n)&&(t=n)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:e,innerRadius:t}}_update(e){let{grid:t}=e,i=x(e,["grid"]);this._axisMark.getComponent().setAttributes((0,y.H)({},this._axisStyle,i)),this._gridMark&&this._gridMark.getComponent().setAttributes((0,y.H)({},this._gridStyle,t))}invert(e){var t;if("angle"===this.getOrient()&&"band"===this._scale.type){let i=this._scale.range(),s=i[i.length-1]-i[0],a=.5===(null!=(t=this.getSpec().bandPosition)?t:this._defaultBandPosition)?0:this._scale.bandwidth()/2;if(i[0]<0){let t=(e+a+Math.abs(i[0]))%s-Math.abs(i[0]);return this._scale.invert(t)}return this._scale.invert((e+a)%s)}return this._scale.invert(e)}}b.type=r.L.polarAxis,b.specKey="axes"},568302:function(e,t,i){i.d(t,{P:()=>b});var s=i(469911),a=i(72754),n=i(924625),r=i(800466),l=i(20831),o=i(279090),h=i(726527),c=i(924706),d=i(465359),u=i(491611),p=i(942357),_=i(236874),g=i(286501),m=i(503581),v=i(635541),y=i(435138),f=i(517847);class x extends n.C{constructor(){super(...arguments),this.type=a.L.polarBandAxis,this._scale=new s.j}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){let e=super.updateScaleRange();return this.updateGroupScaleRange(),e}axisHelper(){let e=super.axisHelper();return Object.assign(Object.assign({},e),{getBandwidth:t=>e.getScale(t).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,c.U)(this._option.dataSet,e,d.t),e}transformScaleDomain(){}}x.type=a.L.polarBandAxis,x.specKey="axes",x.builtInTheme={axis:v.b,axisBand:y.s,axisAngle:f.h,axisRadius:f.t},(0,r.jB)(x,l.f);let b=()=>{o.F.registerGraphicComponent(m.q.lineAxis,(e,t)=>new u.$(e,t)),o.F.registerGraphicComponent(m.F.lineAxisGrid,(e,t)=>new p.E(e,t)),o.F.registerGraphicComponent(m.q.circleAxis,(e,t)=>new _.W(e,t)),o.F.registerGraphicComponent(m.F.circleAxisGrid,(e,t)=>new g.U(e,t)),(0,h.R)(),o.F.registerComponent(x.type,x)}},33829:function(e,t,i){i.d(t,{$:()=>b});var s=i(864190),a=i(72754),n=i(924625),r=i(192830),l=i(800466),o=i(279090),h=i(726527),c=i(967115),d=i(491611),u=i(942357),p=i(236874),_=i(286501),g=i(924706),m=i(503581),v=i(993285),y=i(635541),f=i(517847);class x extends n.C{constructor(){super(...arguments),this.type=a.L.polarLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new s.f}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){let e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e}registerTicksTransform(){let e=`${this.type}-ticks`;return(0,g.U)(this._option.dataSet,e,c.m),e}}x.type=a.L.polarLinearAxis,x.specKey="axes",x.builtInTheme={axis:y.b,axisLinear:v.A,axisAngle:f.h,axisRadius:f.t},(0,l.jB)(x,r.E);let b=()=>{o.F.registerGraphicComponent(m.q.lineAxis,(e,t)=>new d.$(e,t)),o.F.registerGraphicComponent(m.F.lineAxisGrid,(e,t)=>new u.E(e,t)),o.F.registerGraphicComponent(m.q.circleAxis,(e,t)=>new p.W(e,t)),o.F.registerGraphicComponent(m.F.circleAxisGrid,(e,t)=>new _.U(e,t)),(0,h.R)(),o.F.registerComponent(x.type,x)}},2837:function(e,t,i){i.d(t,{$P:()=>p,C5:()=>u,xM:()=>d});var s=i(248038),a=i(777678),n=i(591431),r=i(896294),l=i(988539),o=i(72754),h=i(864985),c=i(522269);let d=(e,t)=>{var i,n,r,l,h,c;let d=null!=(i=e.type)?i:"angle"===e.orient?"band":"linear",u=`${o.L.polarAxis}-${d}`,p=null!=(n=e.startAngle)?n:t.startAngle,_=null!=(r=e.endAngle)?r:t.endAngle;return{axisType:d,componentName:u,startAngle:null!=p?p:s.v2,endAngle:null!=_?_:(0,a.Z)(p)?p+360:s.Di,center:(0,a.Z)(t.center)?t.center:(0,a.Z)(null==t?void 0:t.centerX)||(0,a.Z)(null==t?void 0:t.centerY)?{x:null==t?void 0:t.centerX,y:null==t?void 0:t.centerY}:void 0,outerRadius:null!=(c=null!=(h=null!=(l=e.outerRadius)?l:e.radius)?h:t.outerRadius)?c:t.radius,layoutRadius:t.layoutRadius}},u=(e,t,i,s)=>{let a=e();if((0,n.Z)(a))return a;if((0,r.Z)(a))return a(t(),i());let o=t();if("auto"===a&&o.width>0&&o.height>0){let{startAngle:e=0,endAngle:t=2*Math.PI}=s();return(0,l.Re)(o,i(),e,t)}return Math.min(o.width/2,o.height/2)},p=(e,t,i)=>{var s;let a=null!=(s="band"===t?(0,h.DE)("axisBand",i):"linear"===t?(0,h.DE)("axisLinear",i):{})?s:{},n=(0,h.DE)("angle"===e?"axisAngle":"axisRadius",i);return(0,c.H)({},(0,h.DE)("axis",i),a,n)}},941728:function(e,t,i){i.d(t,{IM:()=>d,NG:()=>o,RY:()=>c,Rb:()=>n,Vn:()=>h,bi:()=>l,cf:()=>u,lc:()=>r,zf:()=>p});var s=i(921763),a=i(875244);let n={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function r(e){return(e=(0,a.ro)(e)).startSymbol=(0,a.ro)(e.startSymbol),e.endSymbol=(0,a.ro)(e.endSymbol),e}function l(e){let t=0;return(0,s.Z)(e,"tick.visible")&&(t+=(0,s.Z)(e,"tick.tickSize")),(0,s.Z)(e,"label.visible")&&(t+=(0,s.Z)(e,"label.space")),t}function o(e,t){var i,s,a,n,r,l;return{min:null!=(a=null!=(i=e.min)?i:null==(s=e.range)?void 0:s.min)?a:null==t?void 0:t.min,max:null!=(l=null!=(n=e.max)?n:null==(r=e.range)?void 0:r.max)?l:null==t?void 0:t.max}}function h(e){let t=null==e?void 0:e.orient;return"top"===t||"bottom"===t||"left"===t||"right"===t||"z"===t}function c(e){let t=null==e?void 0:e.orient;return"angle"===t||"radius"===t}let d=e=>"band"===e||"ordinal"===e||"point"===e;function u(e,t){return{id:e,label:e,value:t,rawValue:e}}function p(e,t,i){return i||!e||e.getAxisId()===t.getAxisId()}},775527:function(e,t,i){i.d(t,{r:()=>d});var s=i(128893),a=i(505441),n=i(241104),r=i(2837),l=i(464612),o=i(72754),h=i(864985),c=i(522269);class d extends s.T{getTheme(e,t){var i=this.type,s=this._option.getTheme;switch(i){case o.L.cartesianBandAxis:return(0,n.xy)((0,n.x)(e,["z"]),"band",s);case o.L.cartesianLinearAxis:return(0,n.xy)((0,n.x)(e,["z"]),"linear",s);case o.L.cartesianLogAxis:return(0,n.xy)((0,n.x)(e,["z"]),"log",s);case o.L.cartesianSymlogAxis:return(0,n.xy)((0,n.x)(e,["z"]),"symlog",s);case o.L.cartesianAxis:case o.L.cartesianTimeAxis:return(0,n.xy)((0,n.x)(e),void 0,s);case o.L.polarBandAxis:return(0,r.$P)(e.orient,"band",s);case o.L.polarLinearAxis:return(0,r.$P)(e.orient,"linear",s);case o.L.polarAxis:return(0,r.$P)(e.orient,void 0,s);case o.L.cartesianCrosshair:return(0,l.U_)(s,t);case o.L.polarCrosshair:return(0,l.bB)(s,t);case o.L.colorLegend:case o.L.sizeLegend:case o.L.discreteLegend:case o.L.dataZoom:case o.L.scrollBar:return((e,t)=>{var i;let s=null!=(i=e.orient)?i:t.orient,a=t[(0,n._Q)(s)],r=(0,c.H)({},t,a);return delete r.horizontal,delete r.vertical,r})(e,(0,h.DE)(i,s));default:return(0,h.DE)(i,s)}}_mergeThemeToSpec(e,t){let{spec:i,theme:s}=super._mergeThemeToSpec(e,t);return this._adjustPadding(i),{spec:i,theme:s}}_adjustPadding(e){let{padding:t,noOuterPadding:i=!0,orient:s}=e;i&&t&&s&&(e.padding=Object.assign(Object.assign({},(0,a.Ek)(t)),{[s]:0}))}}},809948:function(e,t,i){i.d(t,{H:()=>c});var s=i(693906),a=i(681611),n=i(971800),r=i(75464),l=i(237731),o=i(775527),h=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class c extends l.r{constructor(){super(...arguments),this.name="component",this.modelType="component",this.transformerConstructor=o.r,this._delegateEvent=(e,t,i,a=null,n=null)=>{var l,o;t instanceof s.A||this.event.emit(i,{model:this,node:e,event:t,item:a,datum:n,source:r.AY.chart,chart:null==(o=null==(l=this._option)?void 0:l.globalInstance)?void 0:o.getChart()},"model")}}static createComponent(e,t){let{spec:i}=e,s=h(e,["spec"]);return new this(i,Object.assign(Object.assign({},t),s))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new a.s(this)}initLayout(){var e;super.initLayout(),this._regions=null!=(e=this._regions)?e:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(e=>null==e?void 0:e.id))}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(e){this.pluginService&&this.pluginService.getAll().forEach(t=>e(t))}getContainer(){var e;return this._container||(this._container=null==(e=this._option)?void 0:e.globalInstance.getStage().find(e=>"root"===e.name,!0)),this._container}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(i=>!(0,n.X)(null==t?void 0:t[i],e[i]))),(null==t?void 0:t.visible)!==e.visible&&(i.reCompile=!0),i}release(){var e;super.release(),this.clear(),null==(e=this.pluginService)||e.releaseAll(),this.pluginService=null}clear(){var e;let t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(e=>{var t;e&&(null==(t=this.getContainer())||t.removeChild(e),e=null)}),this._container=null,null==(e=this.pluginService)||e.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e,context:{model:this}})})}reAppendComponents(){let e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(e=>{var t;e&&!e.stage&&(null==(t=this.getContainer())||t.appendChild(e))})}getBoundsInRect(e,t){return{x1:0,x2:0,y1:0,y2:0}}getDatum(e){}}c.transformerConstructor=o.r},401201:function(e,t,i){i.d(t,{I:()=>f});var s=i(75464),a=i(459338),n=i(663787),r=i(809948),l=i(72754),o=i(945758),h=i(209482),c=i(835151),d=i(777678),u=i(173942),p=i(875244),_=i(971800),g=i(279090),m=i(864985),v=i(540781);class y extends r.H{constructor(){super(...arguments),this.layoutType="none",this.type=l.L.brush,this.name=l.L.brush,this.specKey="brush",this.layoutZIndex=n.Ai.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._cacheInteractiveRangeAttrs=[],this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}static getSpecInfo(e){return(0,m.ts)(e,this.specKey,this.type,e=>!1!==e.visible)}init(){let e=this._transformBrushedMarkAttr(this._spec.inBrush),t=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(s=>{s&&(i.setMarkStyle(s,Object.assign({},e),"inBrush",a.W.Series),i.setMarkStyle(s,Object.assign({},t),"outOfBrush",a.W.Series))})})}_initNeedOperatedItem(){let e=this._spec.seriesId,t=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{let s=[];i.getSeries().forEach(a=>{(e&&(0,c.IX)(e).includes(a.userId.toString())||t&&(0,c.IX)(t).includes(a.getSpecIndex())||!t&&!e)&&s.push(...a.getMarksWithoutRoot()),this._itemMap[i.id]=s})}),this._linkedSeries.forEach(e=>{this._linkedItemMap[e.id]=e.getMarksWithoutRoot()})}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_bindRegions(){(0,d.Z)(this._spec.regionId)||(0,d.Z)(this._spec.regionIndex)?this._relativeRegions=this._option.getRegionsInUserIdOrIndex((0,c.IX)(this._spec.regionId),(0,c.IX)(this._spec.regionIndex)):this._relativeRegions=this._option.getAllRegions()}_bindLinkedSeries(){((0,d.Z)(this._spec.brushLinkSeriesId)||(0,d.Z)(this._spec.brushLinkSeriesIndex))&&(this._linkedSeries=this._option.getSeriesInUserIdOrIndex((0,c.IX)(this._spec.brushLinkSeriesId),(0,c.IX)(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){(0,d.Z)(this._spec.axisId)?(0,c.IX)(this._spec.axisId).forEach(e=>{this._releatedAxes.push(this._option.getComponentByUserId(e))}):(0,d.Z)(this._spec.axisIndex)?(0,c.IX)(this._spec.axisIndex).forEach(e=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",e))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(e=>{null==e||e.getRegions().forEach(t=>{this._regionAxisMap["region_"+t.id]?this._regionAxisMap["region_"+t.id].push(e):this._regionAxisMap["region_"+t.id]=[e]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(e=>{e.relatedAxisComponent&&(this._axisDataZoomMap[e.relatedAxisComponent.id]=e)})}initEvent(){}_compareSpec(e,t){this._brushComponents&&this._relativeRegions.forEach((e,t)=>{this._updateBrushComponent(e,t)});let i=super._compareSpec(e,t);return(0,_.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(){var e;super.onLayoutEnd(),!this._option.disableTriggerEvent&&(null==(e=this._spec.visible)||e)&&(this._brushComponents?this._relativeRegions.forEach((e,t)=>{this._updateBrushComponent(e,t)}):(this._brushComponents=[],this._relativeRegions.forEach((e,t)=>{this._createBrushComponent(e,t)})))}_updateBrushComponent(e,t){let i=this._getBrushInteractiveAttr(e),s=this._brushComponents[t];s.setAttributes(i),this._initMarkBrushState(t,""),s.children[0].removeAllChild()}_createBrushComponent(e,t){var i,a;let n=this._getBrushInteractiveAttr(e),r=new o.B(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:(0,p.h_)(null==(i=this._spec)?void 0:i.style)},n),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));r.id=null!=(a=this._spec.id)?a:`brush-${this.id}`,this.getContainer().add(r),this._brushComponents.push(r),this._cacheInteractiveRangeAttrs.push(n),r.addEventListener(h.Y.brushActive,i=>{this._initMarkBrushState(t,"outOfBrush"),this._emitEvent(s.$7.brushActive,e)}),r.addEventListener(h.Y.drawStart,t=>{this._setRegionMarkPickable(e,!0),this._emitEvent(s.$7.brushStart,e)}),r.addEventListener(h.Y.moveStart,t=>{this._setRegionMarkPickable(e,!0),this._emitEvent(s.$7.brushStart,e)}),r.addEventListener(h.Y.drawing,t=>{this._setRegionMarkPickable(e,!1),this._handleBrushChange(e,t),this._emitEvent(s.$7.brushChange,e)}),r.addEventListener(h.Y.moving,t=>{this._setRegionMarkPickable(e,!1),this._handleBrushChange(e,t),this._emitEvent(s.$7.brushChange,e)}),r.addEventListener(h.Y.brushClear,i=>{this._setRegionMarkPickable(e,!0),this._initMarkBrushState(t,""),this._emitEvent(s.$7.brushClear,e)}),r.addEventListener(h.Y.drawEnd,i=>{var a;this._setRegionMarkPickable(e,!0);let{operateMask:n}=i.detail,{updateElementsState:r=!0}=this._spec;if(null==(a=this._spec)?void 0:a.onBrushEnd)!0===this._spec.onBrushEnd(i)?(this.clearGraphic(),this._initMarkBrushState(t,""),this._emitEvent(s.$7.brushClear,e)):(this._spec.onBrushEnd(i),this._emitEvent(s.$7.brushEnd,e));else{let t=this._extendDataInBrush(this._inBrushElementsMap);(this._spec.zoomWhenEmpty||!(t.length>0))&&r||this._setAxisAndDataZoom(n,e),this._emitEvent(s.$7.brushEnd,e)}}),r.addEventListener(h.Y.moveEnd,t=>{this._setRegionMarkPickable(e,!0);let{operateMask:i}=t.detail,{updateElementsState:a=!0}=this._spec,n=this._extendDataInBrush(this._inBrushElementsMap);(!this._spec.zoomWhenEmpty&&n.length>0||a)&&this._setAxisAndDataZoom(i,e),this._emitEvent(s.$7.brushEnd,e)})}_getBrushInteractiveAttr(e){let t=e.getLayoutStartPoint(),i=e.getLayoutRect(),s=t.x,a=s+i.width,n=t.y,r=n+i.height;return{interactiveRange:{minY:n,maxY:r,minX:s,maxX:a},xRange:[s,a],yRange:[n,r]}}_transformBrushedMarkAttr(e){let t={};return(null==e?void 0:e.symbol)&&(t.symbolType=e.symbol),(null==e?void 0:e.symbolSize)&&(t.size=e.symbolSize),(null==e?void 0:e.color)&&(t.fill=e.color),(null==e?void 0:e.colorAlpha)&&(t.fillOpacity=e.colorAlpha),Object.assign(Object.assign({},(0,p.h_)(e)),t)}_handleBrushChange(e,t){let{operateMask:i}=t.detail,{updateElementsState:s=!0}=this._spec;s&&(this._reconfigItem(i,e),this._reconfigLinkedItem(i,e))}_extendDataInBrush(e){var t,i;let s=[];for(let a in e)for(let n in e[a])s.push(Object.assign({},null==(i=null==(t=e[a][n].context)?void 0:t.data)?void 0:i[0]));return s}_extendDatumOutOfBrush(e){var t,i;let s=[];for(let a in e)s.push(null==(i=null==(t=e[a].context)?void 0:t.data)?void 0:i[0]);return s}_emitEvent(e,t){var i;this.event.emit(e,{model:this,value:{operateType:e,operateRegion:t,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord},vchart:null==(i=this._option)?void 0:i.globalInstance})}_reconfigItem(e,t){var i,s,a;if(!(null==e?void 0:e.globalTransMatrix)||!(null==(i=null==e?void 0:e.attribute)?void 0:i.points))return;let n=null!=(a=null==(s=null==e?void 0:e.attribute)?void 0:s.points)?a:[],{a:r,b:l,c:o,d:h,e:c,f:d}=e.globalTransMatrix,u=n.map(e=>({x:r*e.x+o*e.y+c,y:l*e.x+h*e.y+d})),{markTypeFilter:p=[]}=this._spec;this._itemMap[t.id].forEach(t=>{if(p.includes(t.type))return;let i=t.getGraphics();i&&i.length&&i.forEach(i=>{var s,a,n;let r=t.id+"_"+i.context.key,l=this._isBrushContainItem(e.globalAABBBounds,u,i);(null==(s=this._outOfBrushElementsMap)?void 0:s[r])&&l?(i.addState("inBrush",!0),this._inBrushElementsMap[null==e?void 0:e.name]||(this._inBrushElementsMap[null==e?void 0:e.name]={}),this._inBrushElementsMap[null==e?void 0:e.name][r]=i,delete this._outOfBrushElementsMap[r]):(null==(n=null==(a=this._inBrushElementsMap)?void 0:a[null==e?void 0:e.name])?void 0:n[r])&&!l&&(i.removeState("inBrush"),i.addState("outOfBrush",!0),this._outOfBrushElementsMap[r]=i,delete this._inBrushElementsMap[e.name][r])})})}_reconfigLinkedItem(e,t){var i;if(!(null==e?void 0:e.globalTransMatrix)||!(null==(i=null==e?void 0:e.attribute)?void 0:i.points))return;let s=t.getLayoutStartPoint(),a=t.getSeries().map(e=>e.id);this._linkedSeries.forEach(t=>{var i,n;if(!a.includes(t.id)){let a=t.getRegion().getLayoutStartPoint(),r=a.x-s.x,l=a.y-s.y,o=null!=(n=null==(i=null==e?void 0:e.attribute)?void 0:i.points)?n:[],{a:h,b:c,c:d,d:u,e:p,f:_}=e.globalTransMatrix,g=r||0,m=l||0,v=o.map(e=>({x:h*e.x+d*e.y+p+g,y:c*e.x+u*e.y+_+m}));e.globalAABBBounds.clone().set(e.globalAABBBounds.x1+g,e.globalAABBBounds.y1+m,e.globalAABBBounds.x2+g,e.globalAABBBounds.y2+m);let{markTypeFilter:y=[]}=this._spec;this._linkedItemMap[t.id].forEach(t=>{if(y.includes(t.type))return;let i=t.getGraphics();i&&i.length&&i.forEach(i=>{var s,a,n;let{key:r}=i.context,l=t.id+"_"+i.context.key;(null==(s=this._linkedOutOfBrushElementsMap)?void 0:s[l])&&this._isBrushContainItem(e.globalAABBBounds,v,i)?(i.addState("inBrush",!0),this._linkedInBrushElementsMap[null==e?void 0:e.name]||(this._linkedInBrushElementsMap[null==e?void 0:e.name]={}),this._linkedInBrushElementsMap[null==e?void 0:e.name][l]=i,delete this._linkedOutOfBrushElementsMap[l]):(null==(n=null==(a=this._linkedInBrushElementsMap)?void 0:a[null==e?void 0:e.name])?void 0:n[l])&&!this._isBrushContainItem(e.globalAABBBounds,v,i)&&(i.removeState("inBrush"),i.addState("outOfBrush",!0),this._linkedOutOfBrushElementsMap[l]=i)})})}})}_isBrushContainItem(e,t,i){let s=[];if(["symbol","rect"].includes(i.type)){let{x1:e,x2:a,y1:n,y2:r}=null==i?void 0:i.globalAABBBounds;return s=[{x:e,y:n},{x:a,y:n},{x:a,y:r},{x:e,y:r}],(0,u.iO)(t,s)}return e.intersects(i.globalAABBBounds)}_initItemMap(e,t,i){let{markTypeFilter:s=[]}=this._spec;Object.entries(e).forEach(([e,a])=>{a.forEach(e=>{if(s.includes(e.type))return;let a=e.getGraphics();a&&a.length&&a.forEach(s=>{let a=e.id+"_"+s.context.key;s.removeState("inBrush"),s.removeState("outOfBrush"),i&&s.addState(i,!0),t[a]=s})})})}_initMarkBrushState(e,t){this._brushComponents.forEach((t,i)=>{i!==e&&t.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._initItemMap(this._itemMap,this._outOfBrushElementsMap,t),this._initItemMap(this._linkedItemMap,this._linkedOutOfBrushElementsMap,t)}_setRegionMarkPickable(e,t){e.getGroupMark().getGraphics().forEach(e=>e.setAttribute("childrenPickable",t))}_stateClamp(e){return Math.min(Math.max(0,e),1)}_setAxisAndDataZoom(e,t){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){let s=e.AABBBounds;null==(i=this._regionAxisMap["region_"+t.id])||i.forEach(e=>{var i,a;let n="bottom"===e.layoutOrient||"top"===e.layoutOrient,r=null!=(i=this._spec.axisRangeExpand)?i:0,{x1:l,x2:o,y1:h,y2:d}=s,u=n?"x":"y",p=n?l:h,_=n?o:d;if(this._axisDataZoomMap[e.id]){let i=this._axisDataZoomMap[e.id],s=i.relatedAxisComponent,a=s.getScale().invert(p-t.getLayoutStartPoint()[u]),n=s.getScale().invert(_-t.getLayoutStartPoint()[u]),l=i.dataToStatePoint(a),o=i.dataToStatePoint(n),h=this._stateClamp(l-r),c=this._stateClamp(o+r);i.setStartAndEnd(Math.min(h,c),Math.max(h,c),["percent","percent"]),this._zoomRecord.push({operateComponent:i,start:h,end:c,startValue:i.statePointToData(h),endValue:i.statePointToData(c)})}else{let i=e.getScale().range(),s=null!=(a=e.scaleRangeFactor())?a:[0,1],n=(0,c.Z$)(i)<i[0],l=p-t.getLayoutStartPoint()[u],o=_-t.getLayoutStartPoint()[u],h=n?Math.min(l,o):Math.max(l,o),d=n?Math.max(l,o):Math.min(l,o),g=(d-i[0])/((0,c.Z$)(i)-i[0])*(s[1]-s[0])+s[0],m=(h-i[0])/((0,c.Z$)(i)-i[0])*(s[1]-s[0])+s[0],v=this._stateClamp(g-r),y=this._stateClamp(m+r);e.scaleRangeFactor([v,y]),e.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:e,start:v,end:y,startValue:e.getScale().invert(d),endValue:e.getScale().invert(h)})}})}}_getNeedClearVRenderComponents(){return this._brushComponents}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(e=>{e._container.incrementalClearChild()})}clear(){if(this._brushComponents){let e=this.getContainer();this._brushComponents.forEach((t,i)=>{this._initMarkBrushState(i,""),t.removeAllChild(),t.releaseBrushEvents(),e&&e.removeChild(t)}),this._brushComponents=null}}}y.type=l.L.brush,y.builtInTheme={brush:v.D},y.specKey="brush";let f=()=>{g.F.registerComponent(y.type,y)}},100563:function(e,t,i){i.d(t,{n:()=>l});var s=i(303401),a=i(453375);class n{parserScrollEvent(e){return e?!(e.ctrlKey||0===e.deltaY&&0===e.deltaX)&&(e.scrollX=e.deltaX,e.scrollY=e.deltaY,e):e}parserZoomEvent(e){if(!e)return e;let t=Math.pow(1.0005,-e.deltaY*Math.pow(16,e.deltaMode));return e.zoomDelta=t,e.zoomX=e.canvasX,e.zoomY=e.canvasY,e}clearZoom(){}clearScroll(){}clearDrag(){}}class r{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0}parserZoomEvent(e){let t=e.scale;if(0===this._lastScale)return this._lastScale=t,e;e.zoomDelta=t/this._lastScale;let i=e.center;return e.zoomX=i.x,e.zoomY=i.y,this._lastScale=t,e}parserScrollEvent(e){return e}clearScroll(){}clearDrag(){}}function l(e){return e===s.i["desktop-browser"]||e===s.i["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:n}:(0,a.wx)(e)||(0,a.Oy)(e)?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside","pointerleave"],zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:r}:null}},734737:function(e,t,i){i.d(t,{Z:()=>I});var s,a,n=i(569402),r=i(591431),l=i(26688),o=i(521107),h=i(971800),c=i(933248),d=i(835151),u=i(921763),p=i(557999),_=i(175570),g=i(303401),m=i(809948),v=i(62209),y=i(75464),f=i(663787),x=i(453375);(s=a||(a={}))[s.ALL=3]="ALL",s[s.HORIZONTAL=2]="HORIZONTAL",s[s.VERTICAL=1]="VERTICAL";var b=i(464612),S=i(459774),A=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};let k={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class I extends m.H{get enableRemain(){return"none"===this.triggerOff}constructor(e,t){super(e,t),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=f.Ai.CrossHair_Grid,this.labelZIndex=f.Ai.CrossHair,this.trigger="hover",this._handleIn=e=>{if(!this._option)return;let{x:t,y:i}=this.calculateTriggerPoint(e);this.showDefault=!1,this._layoutCrosshair(t,i);let s=this._getNeedClearVRenderComponents();this._hasActive=s.some(e=>e&&!1!==e.attribute.visible)},this._handleClickInEvent=e=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(e),(0,r.Z)(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=(0,l.Z)(e=>{this._clickLock||this._handleIn(e)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hide())},this._handleTooltipShow=e=>{let t=e.tooltipData;if(e.isEmptyTooltip||!t||!t.length||(0,o.Z)(this._spec.followTooltip)&&!1===this._spec.followTooltip[e.activeType])return void this._handleTooltipHideOrRelease();let{x:i,y:s}=this.calculateTriggerPoint(e);this.showDefault=!1,this._layoutCrosshair(i,s,t,e.activeType);let a=this._getNeedClearVRenderComponents();this._hasActive=a.some(e=>e&&!1!==e.attribute.visible)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hide()},this.enable=!0,this.showDefault=!0}_setAllAxisValues(e,t,i){let s=!1;if(e.forEach(e=>{(0,S.lK)(e.axis.getScale().type)&&(s?this.enable=!1:s=!0)}),!this.enable)return!1;let{currentValue:a}=this._stateByField[i];return e.forEach((e,i)=>{let s=e.axis;a.set(i,{datum:this._getDatumAtPoint(s,t),axis:s})}),!0}clearAxisValue(){Object.keys(this._stateByField).forEach(e=>{this._stateByField[e].currentValue.clear()})}hideCrosshair(){this.clearAxisValue(),this.hide()}showCrosshair(e){e&&e.length&&(this.showDefault=!1,this.clearAxisValue(),e.forEach(e=>{let{axis:t,value:i}=e;this.setAxisValue(i,t)}),this.layoutByValue(!1))}_getLimitBounds(){var e,t;if(!this._limitBounds){let{width:i,height:s}=null!=(t=null==(e=this._option.globalInstance.getChart())?void 0:e.getViewRect())?t:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:s}}return this._limitBounds}_showDefaultCrosshairBySpec(){Object.keys(this._stateByField).forEach(e=>{let t=this._spec[e];if(t&&t.visible&&t.defaultSelect){let{axisIndex:i=0,datum:s}=t.defaultSelect,a=this._option.getComponentsByKey("axes").find(e=>e.getSpecIndex()===i);a&&(this._stateByField[e].currentValue.clear(),this._stateByField[e].currentValue.set(i,{axis:a,datum:s}))}})}_updateVisibleCrosshair(){let e=!1;Object.keys(this._stateByField).forEach(t=>{let i=this._spec[t];i&&i.visible&&this._stateByField[t].currentValue.size?e=!0:this._hideByField(t)}),e&&this.layoutByValue(!1)}_showDefaultCrosshair(){this.showDefault?(this._showDefaultCrosshairBySpec(),this.layoutByValue(!1)):this._updateVisibleCrosshair()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(0,h.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{let e=this._getTriggerEvent();e&&e.forEach(e=>{this._registerEvent(e.in,!1,e.click),e.out&&this._registerEvent(e.out,!0)})}}_registerEvent(e,t,i){let s=t?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,a=t?{level:y.l.chart}:{source:y.AY.chart};(0,c.Z)(e)?e.forEach(e=>{this.event.on(e,a,s)}):this.event.on(e,a,s)}_eventOff(e,t,i){let s=t?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;(0,c.Z)(e)?e.forEach(e=>{this.event.off(e,s)}):this.event.off(e,s)}onBeforeRender(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(e){let{event:t}=e,i=this._option.getCompiler().getStage().getLayer(void 0),s={x:t.viewX,y:t.viewY};return i.globalTransMatrix.transformPoint({x:t.viewX,y:t.viewY},s),{x:s.x-this.getLayoutStartPoint().x,y:s.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){let{mode:e=g.i["desktop-browser"]}=this._option,t=e===g.i["desktop-browser"]||e===g.i["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:(0,x.wx)(e)||(0,x.Oy)(e)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null;if(t){let e=(0,d.IX)(this.trigger||"hover");this._spec.lockAfterClick&&!e.includes("click")?(e.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;let i=[];return e.forEach(e=>{i.push({click:"click"===e,in:t[e],out:"click"===e?"none"===this.triggerOff?null:t.clickOut:t.hoverOut})}),i}return null}_registerTooltipEvent(){this.event.on(y.$7.tooltipHide,{source:y.AY.chart},this._handleTooltipHideOrRelease),this.event.on(y.$7.tooltipShow,{source:y.AY.chart},this._handleTooltipShow),this.event.on(y.$7.tooltipRelease,{source:y.AY.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(e){var t,i;let s=null==(i=(t=this._option).getComponentsByKey)?void 0:i.call(t,"axes");if(!(null==s?void 0:s.length))return null;let a=(0,u.Z)(this._spec,`${e}Field.bindingAxesIndex`);if(a||(a=[],s.forEach((t,i)=>{k[e].includes(t.getOrient())&&a.push(i)})),!a.length)return null;let n=new Map,r=1/0,l=1/0,o=-1/0,h=-1/0,{x:c,y:d}=this.getLayoutStartPoint();return a.forEach(e=>{r=1/0,l=1/0,o=-1/0,h=-1/0;let t=s.find(t=>t.getSpecIndex()===e);t&&(t.getRegions().forEach(e=>{let{x:t,y:i}=e.getLayoutStartPoint();r=Math.min(r,t-c),l=Math.min(l,i-d),o=Math.max(o,t+e.getLayoutRect().width-c),h=Math.max(h,i+e.getLayoutRect().height-d)}),n.set(e,{x1:r,y1:l,x2:o,y2:h,axis:t}))}),n}onLayoutEnd(){let e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd()}_releaseEvent(){this.clearOutEvent();let e=this._getTriggerEvent();e&&e.forEach(e=>{this._eventOff(e.in,!1,e.click),e.out&&this._eventOff(e.out,!0)})}_parseFieldInfo(){Object.keys(this._stateByField).forEach(e=>{let t=this._spec[e],{crosshairComp:i}=this._stateByField[e];if(t&&t.visible){if(this._stateByField[e].attributes=this._parseField(t,e),i){let{style:t,type:s}=this._stateByField[e].attributes;i.setAttributes({["rect"===s?"rectStyle":"lineStyle"]:t})}}else i&&i.parent&&i.parent.removeChild(i)})}_parseCrosshairSpec(){this._parseFieldInfo();let{trigger:e,triggerOff:t,labelZIndex:i,gridZIndex:s}=this._spec;e&&(this.trigger=e),("none"===t||(0,r.Z)(t)&&t>0)&&(this.triggerOff=t),void 0!==i&&(this.labelZIndex=i),void 0!==s&&(this.gridZIndex=s)}_parseField(e,t){var i,s,a;let n={},{line:l={},label:o={},visible:h}=e;if(n.visible=h,n.type=l.type||"line",!1===l.visible)n.style={visible:!1};else{let t=l.style||{},{stroke:a,fill:o,lineWidth:h}=t,{strokeOpacity:c,fillOpacity:d,opacity:p}=t,_=A(t,["strokeOpacity","fillOpacity","opacity"]),g="line"===n.type,m=g?c:d;if((0,r.Z)(p)&&(m=(null!=m?m:1)*p),n.style=Object.assign({opacity:m,pickable:!1,visible:!0},_),g)n.style.stroke=a||o,n.style.lineWidth=(0,u.Z)(l,"width",h||2);else{n.style.fill=o||a,(null==(s=null==(i=null==e?void 0:e.line)?void 0:i.style)?void 0:s.stroke)&&(n.style.stroke=e.line.style.stroke);let t=(0,u.Z)(l,"width");if("string"==typeof t){let e=parseInt(t.substring(0,t.length-1),10)/100;n.style.sizePercent=e}else"number"!=typeof t&&"function"!=typeof t||(n.style.size=t)}}if(o.visible){let e=o.labelBackground||{},t=null!=(a=o.syncAxisLabelAngle)&&a,i=o.style||{},s=e.style||{},{fill:r="rgba(47, 59, 82, 0.9)",stroke:l,outerBorder:h}=s,c=A(s,["fill","stroke","outerBorder"]);n.label={visible:!0,formatMethod:o.formatMethod,formatter:o.formatter,minWidth:e.minWidth,maxWidth:e.maxWidth,padding:e.padding,syncAxisLabelAngle:t,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},i),{fill:i.fill||"#fff",stroke:(0,u.Z)(i,"stroke")}),panel:((0,p.Z)(e.visible)?e.visible:e)?Object.assign({visible:!0,pickable:!1,fill:r,stroke:l,outerBorder:Object.assign({stroke:r,distance:0,lineWidth:3},h)},c):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else n.label={visible:!1};return n}_filterAxisByPoint(e,t,i){return e&&e.forEach(s=>{let a=s.axis;if((0,v.Nl)(s,t,i)&&e.delete(a.getSpecIndex()),a.type.startsWith("polarAxis")){let s=a.getCenter(),n=a.getInnerRadius(),r=a.getOuterRadius(),l=_.HL.distancePP({x:t,y:i},s);(l>r||l<n)&&e.delete(a.getSpecIndex())}}),e}_updateCrosshairLabel(e,t,i){let s=this.getContainer();e?e.setAttributes(t):(e=new n.V(t),null==s||s.add(e),i(e)),(0,b.Xu)(e,this._getLimitBounds())}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}_hideByField(e){let{crosshairComp:t,labelsComp:i}=this._stateByField[e];t&&t.hideAll(),i&&Object.keys(i).forEach(e=>{i[e]&&i[e].hideAll()})}hide(){Object.keys(this._stateByField).forEach(e=>{this._hideByField(e)})}_getNeedClearVRenderComponents(){return Object.keys(this._stateByField).reduce((e,t)=>{let{crosshairComp:i,labelsComp:s}=this._stateByField[t];return i&&e.push(i),s&&Object.keys(s).forEach(t=>{s[t]&&e.push(s[t])}),e},[])}}I.specKey="crosshair"},651308:function(e,t,i){i.d(t,{i:()=>g});var s=i(777678),a=i(72754),n=i(790426),r=i(865599),l=i(734737),o=i(241104),h=i(279090),c=i(285279),d=i(984535),u=i(864985),p=i(625819);class _ extends l.Z{static getSpecInfo(e){return(0,u.ts)(e,this.specKey,this.type,e=>e.xField&&!1!==e.xField.visible||e.yField&&!1!==e.yField.visible)}constructor(e,t){super(e,t),this.type=a.L.cartesianCrosshair,this.name=a.L.cartesianCrosshair,this._stateByField={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:new Map,labelsComp:{top:null,bottom:null}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:new Map,labelsComp:{left:null,right:null}}}}_findAllAxisContains(e,t){let i=this._getAxisInfoByField("x"),s=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,e,t),yAxisMap:this._filterAxisByPoint(s,e,t)}}_getDatumAtPoint(e,t){let i=(0,o.yL)(e.getOrient())?"x":"y",s=t[i]-(e.getLayoutStartPoint()[i]-this.getLayoutStartPoint()[i]);return e.getScale().invert(s)}setAxisValue(e,t){(0,o.yL)(t.getOrient())?this._stateByField.xField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t}):this._stateByField.yField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t})}_layoutCrosshair(e,t,i,a){var n;let r=e,l=t;if(i&&i.length){if("dimension"===a){let e,t=i[0],a=t.data.findIndex(e=>e.datum.length>0);if(a>-1){let i=t.data[a];e=i.series.dataToPosition(i.datum[0])}((0,s.Z)(t.dimType)?"y"===t.dimType:(0,o.Vz)(null==(n=null==t?void 0:t.axis)?void 0:n.getOrient()))?l=null==e?void 0:e.y:r=null==e?void 0:e.x}else if("mark"===a){let e=i[0],t=e.series.dataToPosition(e.datum[0]);r=null==t?void 0:t.x,l=null==t?void 0:t.y}}this.clearAxisValue();let{xAxisMap:h,yAxisMap:c}=this._findAllAxisContains(r,l);if(h&&0===h.size||c&&0===c.size){if(this.enableRemain)return;this.hide()}else h&&h.size&&this._setAllAxisValues(h,{x:r,y:l},"xField"),c&&c.size&&this._setAllAxisValues(c,{x:r,y:l},"yField"),this.layoutByValue()}layoutByValue(e){if(!this.enable)return;let t=(0,d.Sr)(this._regions,"cartesian");t&&((0,c.w_)(this._stateByField,t,this.getLayoutStartPoint(),null!=e?e:this.enableRemain),Object.keys(this._stateByField).forEach(e=>{this._layoutByField(e)}))}_layoutByField(e){let{cacheInfo:t,attributes:i,labelsComp:s,bandSize:a,coordKey:n}=this._stateByField[e];if(!i||!t||t._isCache&&this.enableRemain)return;let{coord:r,labels:l,visible:o,labelsTextStyle:h}=t;if(o){let o=(0,c.pN)(this._stateByField[e]);this._updateCrosshairByField(e,o),Object.keys(l).forEach(o=>{var c,d,u;if(l[o].visible){let p=Object.assign(Object.assign(Object.assign({[n]:r+a/2},l[o]),i.label),{angle:i.label.syncAxisLabelAngle&&null!=(d=null==(c=t.axisLabel)?void 0:c.attribute.angle)?d:0,textStyle:Object.assign(Object.assign({},null==(u=i.label)?void 0:u.textStyle),h[o]),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(s[o],p,t=>{t.name=`crosshair-${e.replace("Field","")}-${o}-label`,s[o]=t})}else s[o]&&s[o].hideAll()})}else this._hideByField(e)}_updateCrosshairByField(e,t){let i=this.getContainer(),{attributes:s}=this._stateByField[e],{crosshairComp:a}=this._stateByField[e];if(a)a.setAttributes(t);else{let l=s.style;"line"===s.type?a=new n.c(Object.assign(Object.assign({},t),{lineStyle:l,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):"rect"===s.type&&(a=new r.f(Object.assign(Object.assign({},t),{rectStyle:l,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),null==i||i.add(a),this._stateByField[e].crosshairComp=a}}}_.specKey="crosshair",_.builtInTheme={crosshair:p.u},_.type=a.L.cartesianCrosshair;let g=()=>{h.F.registerComponent(_.type,_)}},271895:function(e,t,i){i.d(t,{x:()=>S});var s=i(72754),a=i(790426),n=i(919080),r=i(220585),l=i(651874),o=i(734737),h=i(988539),c=i(601501),d=i(62209),u=i(279090),p=i(941728),_=i(777678),g=i(247230),m=i(535315),v=i(175570),y=i(864985),f=i(984535),x=i(625819);class b extends o.Z{static getSpecInfo(e){return(0,y.ts)(e,this.specKey,this.type,e=>e.categoryField&&!1!==e.categoryField.visible||e.valueField&&!1!==e.valueField.visible)}constructor(e,t){super(e,t),this.type=s.L.polarCrosshair,this.name=s.L.polarCrosshair,this._stateByField={categoryField:{coordKey:"angle",anotherAxisKey:"radius",currentValue:new Map,labelsComp:{all:null}},valueField:{coordKey:"radius",anotherAxisKey:"angle",currentValue:new Map,labelsComp:{all:null}}}}setAxisValue(e,t){"radius"===t.getOrient()?this._stateByField.valueField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t}):this._stateByField.categoryField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t})}_findAllAxisContains(e,t){let i=this._getAxisInfoByField("category"),s=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(i,e,t),radiusAxisMap:this._filterAxisByPoint(s,e,t)}}_getDatumAtPoint(e,t){let{x:i,y:s}=e.getLayoutStartPoint(),{x:a,y:n}=this.getLayoutStartPoint();return e.positionToData({x:t.x-(i-a),y:t.y-(s-n)})}_layoutCrosshair(e,t,i,s){let a=e,n=t;if(i&&i.length){if("dimension"===s){let e=i[0];if(e.axis){let t=e.axis.pointToCoord({x:a,y:n}),i="radius"===e.axis.getOrient()?{radius:e.position,angle:t.angle}:{radius:t.radius,angle:e.position},s=e.axis.coordToPoint(i);a=s.x,n=s.y}}else if("mark"===s){let e=i[0],t=e.series.dataToPosition(e.datum[0]);a=t.x,n=t.y}}this.clearAxisValue();let{angleAxisMap:r,radiusAxisMap:l}=this._findAllAxisContains(a,n);if(0!==r.size||0!==l.size)r&&this._setAllAxisValues(r,{x:a,y:n},"categoryField"),l&&this._setAllAxisValues(l,{x:a,y:n},"valueField"),this.layoutByValue();else{if(this.enableRemain)return;this.hide()}}layoutByValue(e){if(!this.enable)return;let t=(0,f.Sr)(this._regions,"polar");t&&(((e,t,i=!1)=>{Object.keys(e).forEach(s=>{let{attributes:a,currentValue:n,cacheInfo:r,coordKey:l}=e[s];if(a){let o=!!n.size,h=i&&!o&&(0,_.Z)(r),c=h?r:{coord:0,axis:null,visible:o,coordRange:[0,0],sizeRange:[0,0],labels:{all:{visible:!1,text:"",offset:0}}};if(r&&(r._isCache=h),"valueField"===s&&(c.sides=t.angleAxisHelper.getScale(0).domain().length),n.forEach(({axis:e,datum:i=""})=>{var n;let r=e.niceLabelFormatter;if((null==(n=a.label)?void 0:n.visible)&&(c.labels.all.visible=!0,c.labels.all.defaultFormatter=r,c.labels.all.text=i,c.labels.all.offset=(0,p.bi)(e.getSpec())),"categoryField"===s){let s=t.angleAxisHelper.dataToPosition([i]),a=t.angleAxisHelper.getBandwidth(0),n=e.getOuterRadius();c.coord=s,c.coordRange=[s-a/2,s+a/2],c.sizeRange=[n,n]}else{let s=e.startAngle,a=t.radiusAxisHelper.dataToPosition([i]);c.coord=a,c.coordRange=[a,a],c.sizeRange=[s,s]}c.axis=e}),c&&!h&&c.labels.all.visible&&a&&a.label){let e=c.labels.all,{formatMethod:t,formatter:i}=a.label,{formatFunc:s,args:n}=(0,y.HJ)(t,i,e.text,{label:e.text,orient:l});s?e.text=s(...n):e.defaultFormatter&&(e.text=e.defaultFormatter(e.text))}e[s].cacheInfo=c}})})(this._stateByField,t,null!=e?e:this.enableRemain),Object.keys(this._stateByField).forEach(e=>{this._layoutByField(e)}))}_layoutByField(e){var t,i,s;let{cacheInfo:o,attributes:u,crosshairComp:p,labelsComp:_,coordKey:y}=this._stateByField[e];if(!o||o._isCache&&this.enableRemain)return;let f=this.getContainer(),{visible:x,labels:b,coord:S,sizeRange:A,axis:k}=o;if(x){let o=this.getLayoutStartPoint(),x=null==(i=null==(t=this._spec.valueField)?void 0:t.line)?void 0:i.smooth,I=((e,t,i)=>{let{cacheInfo:s,coordKey:a,attributes:n}=e,{axis:r,coord:l,sizeRange:o,coordRange:c}=s,d=r.getCenter(),u={x:d.x+t.x,y:d.y+t.y};if("angle"===a)return"sector"==("rect"===n.type?"sector":"line")?{center:u,innerRadius:r.getInnerRadius(),radius:r.getOuterRadius(),startAngle:c[0],endAngle:c[1]}:{start:(0,h.op)(u,r.getInnerRadius(),l),end:(0,h.op)(u,r.getOuterRadius(),l)};let p=r.startAngle,_=r.endAngle,y=s.sides,f=l;if(!i){let e=r.getCenter(),t=r.coordToPoint({angle:o[0],radius:l}),i=(0,h.Oy)(e,t),s=(_-p)/y,a=Math.floor((i-p)/s),n=Math.min((a+1)*s+p,_),c=(0,h.op)(e,l,a*s+p),d=(0,h.op)(e,l,n),u=(0,g.Jz)([d.x,d.y],[c.x,c.y],[e.x,e.y],[t.x,t.y]);u&&(f=(0,m.Z)(v.HL.distancePN(t,u[0],u[1])+l,r.getInnerRadius(),r.getOuterRadius()))}return{center:u,startAngle:p,endAngle:_,radius:f,sides:y}})(this._stateByField[e],o,x);if(p)p.setAttributes(I);else{let t;if("angle"===y){let e="rect"===u.type?"sector":"line";"line"===e?t=new a.c(Object.assign(Object.assign({},I),{lineStyle:u.style,zIndex:this.gridZIndex,pickable:!1})):"sector"===e&&(t=new n.B(Object.assign(Object.assign({},I),{sectorStyle:u.style,zIndex:this.gridZIndex,pickable:!1})))}else t="polygon"==(x?"circle":"polygon")?new r.l(Object.assign(Object.assign({},I),{lineStyle:u.style,zIndex:this.gridZIndex+1})):new l.g(Object.assign(Object.assign({},I),{lineStyle:u.style,zIndex:this.gridZIndex}));this._stateByField[e].crosshairComp=t,f.add(t)}let C=b.all;if(C.visible){let e=k.getCenter(),t={x:e.x+o.x,y:e.y+o.y},i="angle"===y?(0,c.mU)(S):(0,d.mf)(k.startAngle),a=Object.assign(Object.assign(Object.assign(Object.assign({},"angle"===y?(0,h.op)(t,A[1]+C.offset,S):(0,h.op)(t,I.radius,k.startAngle)),u.label),C),{textStyle:Object.assign(Object.assign({},null==(s=u.label)?void 0:s.textStyle),{textAlign:i.align,textBaseline:i.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(_.all,a,e=>{e.name=`crosshair-${y}-label`,_.all=e})}else _.all&&_.all.hideAll()}}}b.specKey="crosshair",b.builtInTheme={crosshair:x.u},b.type=s.L.polarCrosshair;let S=()=>{u.F.registerComponent(b.type,b)}},285279:function(e,t,i){i.d(t,{jA:()=>p,pN:()=>d,w_:()=>o});var s=i(459774),a=i(464612),n=i(941728),r=i(777678),l=i(864985);let o=(e,t,i,l=!1)=>(i||(i={x:0,y:0}),Object.keys(e).forEach(o=>{var d,u,p,_,g,m;let v,{currentValue:y,cacheInfo:f,labelsComp:x,attributes:b,coordKey:S}=e[o],A=null,k=0,I=null;if(y.size){let e=Array.from(y.values())[0];k=e.axis.getScale().scale(e.datum)+e.axis.getLayoutStartPoint()[S]-i[S],I=null==(m=null==(g=null==(_=null==(p=null==(u=null==(d=(A=e.axis).getVRenderComponents()[0])?void 0:d.children[0])?void 0:u.children[0])?void 0:p.children[0])?void 0:_.getChildByName("axis-label-container"))?void 0:g.getChildByName("axis-label-container-layer-0"))?void 0:m.children[0]}let C=!!y.size&&Number.isFinite(k)&&!Number.isNaN(k),E=l&&!C&&(0,r.Z)(f),T=E?f:{coordRange:[0,0],sizeRange:[0,0],coord:k,labelsTextStyle:{},labels:x?Object.keys(x).reduce((e,t)=>(e[t]={visible:!1,text:"",dx:0,dy:0},e),{}):null,visible:C,axis:A,axisLabel:I};T&&(T._isCache=E);let L=0;if(b&&y.forEach(({axis:e,datum:i=""})=>{var r,l,h,c,d,u,p,_,g,m;let y=null,f=e.getScale();if((0,s.lK)(f.type))0===(v=f.bandwidth())&&f.step&&(L=f.step());else if((0,s.z2)(f.type)){let s="xField"===o?t.fieldX[0]:t.fieldY[0],n="xField"===o?t.fieldX2:t.fieldY2,r=(0,a.Op)(t.getViewData().latestData,+i,s,n);if(r){let e="xField"===o?t.dataToPositionX(r):t.dataToPositionY(r);n?(v=Math.abs(e-("xField"===o?t.dataToPositionX1(r):t.dataToPositionY1(r))),i=`${r[s]} ~ ${r[n]}`):v=1,k=e}y=e.niceLabelFormatter}if(T&&(null==(r=b.label)?void 0:r.visible)&&!E){let t=(0,n.bi)(e.getSpec()),s=e.getOrient(),a=null==(l=b.label)?void 0:l.syncAxisLabelAngle;T.labels[s]&&(T.labels[s].visible=!0,T.labels[s].text=i,"left"===s?(T.labels[s].dx=-t,T.labelsTextStyle[s]={textAlign:a&&I&&null!=(h=I.attribute.textAlign)?h:"right",textBaseline:a&&I&&null!=(c=I.attribute.textBaseline)?c:"middle"}):"right"===s?(T.labels[s].dx=t,T.labelsTextStyle[s]={textAlign:a&&I&&null!=(d=I.attribute.textAlign)?d:"left",textBaseline:a&&I&&null!=(u=I.attribute.textBaseline)?u:"middle"}):"top"===s?(T.labels[s].y=0,T.labels[s].dy=-t,T.labelsTextStyle[s]={textAlign:a&&I&&null!=(p=I.attribute.textAlign)?p:"center",textBaseline:a&&I&&null!=(_=I.attribute.textBaseline)?_:"bottom"}):"bottom"===s&&(T.labels[s].dy=t,T.labelsTextStyle[s]={textAlign:a&&I&&null!=(g=I.attribute.textAlign)?g:"center",textBaseline:a&&I&&null!=(m=I.attribute.textBaseline)?m:"top"}),T.labels[s].defaultFormatter=y)}}),T&&!E){let e={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};c(e,y),"xField"===o?(T.coordRange=[e.x1,e.x2],T.sizeRange=[e.y1,e.y2],T.coord=k+i.x,T.labels&&(T.labels.top.y=e.y1,T.labels.bottom.y=e.y2)):(T.coordRange=[e.y1,e.y2],T.sizeRange=[e.x1,e.x2],T.coord=k+i.y,T.labels&&(T.labels.left.x=e.x1,T.labels.right.x=e.x2)),(T.coord<T.coordRange[0]||T.coord>T.coordRange[1])&&(T.visible=!1),b&&b.label&&Object.keys(T.labels).forEach(e=>{T.labels[e].visible&&h(T.labels[e],e,b.label)})}e[o].bandSize=null!=v?v:0,e[o].offsetSize=L,e[o].cacheInfo=T}),e),h=(e,t,i)=>{let{formatMethod:s,formatter:a}=i,{formatFunc:n,args:r}=(0,l.HJ)(s,a,e.text,{label:e.text,position:t});n?e.text=n(...r):e.defaultFormatter&&(e.text=e.defaultFormatter(e.text))},c=(e,t)=>{t.forEach(({axis:t})=>{t.getRegions().forEach(t=>{let{x:i,y:s}=t.getLayoutStartPoint(),{width:a,height:n}=t.getLayoutRect();e.x1=Math.min(e.x1,i),e.y1=Math.min(e.y1,s),e.x2=Math.max(e.x2,i+a),e.y2=Math.max(e.y2,s+n)})})},d=e=>{let t,{cacheInfo:i,attributes:s,bandSize:a,offsetSize:n,coordKey:r,anotherAxisKey:l}=e,{coord:o,sizeRange:h}=i,c=s.type;if("line"===c){let e=o+a/2;t={visible:!0,start:{[r]:e,[l]:h[0]},end:{[r]:e,[l]:h[1]}}}else if("rect"===c){let[e,c]=u(s,a,n,i.axis),{coordRange:d}=i;t={visible:!0,start:{[r]:Math.max(o+e,d[0]),[l]:h[0]},end:{[r]:Math.min(o+c,d[1]),[l]:h[1]}}}return t},u=(e,t,i,s)=>{var a,n,r;let l=0===t?i:t,o=l;if(null==(a=e.style)?void 0:a.sizePercent)o=l*e.style.sizePercent;else if("number"==typeof(null==(n=e.style)?void 0:n.size))o=e.style.size;else if("function"==typeof(null==(r=e.style)?void 0:r.size)){let t=s.getLayoutRect();o=e.style.size(t,s)}return 0===t?[-o/2,o/2]:[t/2-o/2,o/2+t/2]},p=(e,t)=>{var i;let s=new Map,a=new Map,{series:n,datum:r}=e,l="horizontal"===n.direction,h=(l?n.getYAxisHelper():n.getXAxisHelper()).getAxisId(),c=n.getChart().getComponentsByKey("axes").find(e=>e.id===h);if(!c)return;(l?a:s).set(c.getSpecIndex(),{datum:null==(i=n.getDatumPositionValues(r[0],n.getDimensionField()))?void 0:i[0],axis:c});let u={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:s,attributes:{visible:!!s.size,type:"rect"}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:a,attributes:{visible:!!a.size,type:"rect"}}};return o(u,n,t),u.xField.cacheInfo?d(u.xField):u.yField.cacheInfo?d(u.yField):void 0}},464612:function(e,t,i){i.d(t,{Op:()=>u,U_:()=>p,Xu:()=>d,bB:()=>_});var s=i(835151),a=i(777678),n=i(241104),r=i(459774),l=i(864985),o=i(72754),h=i(941728),c=i(522269);function d(e,t){let{x1:i,y1:s,x2:a,y2:n}=t,{x1:r,y1:l,x2:o,y2:h}=e.AABBBounds,{dx:c=0,dy:d=0}=e.attribute,u=0,p=0;r<i&&(u=i-r),l<s&&(p=s-l),o>a&&(u=a-o),h>n&&(p=n-h),u&&e.setAttribute("dx",u+c),p&&e.setAttribute("dy",p+d)}function u(e,t,i,s){for(let a=0,n=e.length;a<n;a++){let n=e[a];if(n){let e=n[i],a=n[s||i];if(e<=t&&a>=t)return n}}return null}let p=(e,t)=>{var i,d;let u,p=(0,s.IX)(null!=(i=t.axes)?i:[]),{bandField:_,linearField:g,xField:m,yField:v,trigger:y,triggerOff:f}=null!=(d=(0,l.DE)(o.L.crosshair,e))?d:{},x=p.find(e=>(0,n.yL)(e.orient));u=(0,a.Z)(x)?(0,c.H)({},(0,h.IM)(x.type)?_:g,m):m;let b=p.find(e=>(0,n.Vz)(e.orient));return{xField:u,yField:(0,a.Z)(b)?(0,c.H)({},(0,r.lK)(b.type)?_:g,v):v,trigger:y,triggerOff:f}},_=(e,t)=>{var i,n;let d,u=(0,s.IX)(null!=(i=t.axes)?i:[]),{bandField:p,linearField:_,categoryField:g,valueField:m,trigger:v,triggerOff:y}=null!=(n=(0,l.DE)(o.L.crosshair,e))?n:{},f=u.find(e=>"angle"===e.orient);d=(0,a.Z)(f)?(0,c.H)({},(0,h.IM)(f.type)?p:_,g):g;let x=u.find(e=>"radius"===e.orient);return{categoryField:d,valueField:(0,a.Z)(x)?(0,c.H)({},(0,r.lK)(x.type)?p:_,m):m,trigger:v,triggerOff:y}}},644442:function(e,t,i){i.d(t,{U:()=>g});var s=i(809948),a=i(72754),n=i(663787),r=i(145004),l=i(777678),o=i(576225),h=i(50026),c=i(971800),d=i(522610),u=i(279090),p=i(122487);class _ extends s.H{constructor(){super(...arguments),this.type=a.L.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=n.Ai.CustomMark,this.layoutLevel=n.pM.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var i;return null==(i=this._option.globalScale.getScale(e))?void 0:i.scale(t)}}}initMarks(){if(!this._spec)return;let e=null;if(this._spec.parent){let t=this.getChart().getAllMarks().find(e=>e.getUserId()===this._spec.parent);"group"===t.type&&(e=t)}this._createExtensionMark(this._spec,e,`${r.Bq}_series_${this.id}_extensionMark`,0)}_createExtensionMark(e,t,i,s=0){var a,n;let r=this._createMark({type:e.type,name:(0,l.Z)(e.name)?`${e.name}`:`${i}_${s}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:e.componentType,key:e.dataKey});if(r){if((0,l.Z)(e.id)&&r.setUserId(e.id),(null==(a=this._option.globalInstance)?void 0:a.isAnimationEnable())&&e.animation){let t=(0,p._8)({},(0,p.hT)(e.type,e,this._markAttributeContext));r.setAnimationConfig(t)}if((0,o.Z)(t)?this._marks.addMark(r):t&&t.addMark(r),this.initMarkStyleWithSpec(r,e),"group"===e.type&&(i=`${i}_${s}`,null==(n=e.children)||n.forEach((e,t)=>{this._createExtensionMark(e,r,i,t)})),(0,l.Z)(e.dataId)||(0,h.Z)(e.dataIndex)){let t=this.getChart().getSeriesData(e.dataId,e.dataIndex);t&&(t.target.addListener("change",()=>{r.getData().updateData()}),r.setDataView(t))}}}initEvent(){}_compareSpec(e,t){let i=super._compareSpec(e,t);return(0,c.X)(t,e)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(e,t)=>{var i;return null==(i=this._option.globalScale.getScale(e))?void 0:i.scale(t)},getLayoutBounds:()=>{let{x:e,y:t}=this.getLayoutStartPoint(),{width:i,height:s}=this.getLayoutRect();return(new d.YZ).set(e,t,e+i,t+s)}}}_getLayoutRect(){let e=new d.YZ;return this.getMarks().forEach(t=>{let i=t.getProduct();i&&e.union(i.AABBBounds)}),e.empty()?{width:0,height:0}:{width:e.width(),height:e.height()}}getBoundsInRect(e){this.setLayoutRect(e);let t=this._getLayoutRect(),{x:i,y:s}=this.getLayoutStartPoint();return{x1:i,y1:s,x2:i+t.width,y2:s+t.height}}getVRenderComponents(){let e=[],t=i=>{if(i&&"group"===i.type)i.getMarks().forEach(e=>{t(e)});else if("component"===i.type){let t=null==i?void 0:i.getComponent();t&&e.push(t)}};return this.getMarks().forEach(e=>{t(e)}),e}}_.type=a.L.customMark,_.specKey="customMark";let g=()=>{u.F.registerComponent(_.type,_)}},154482:function(e,t,i){i.d(t,{e:()=>L});var s=i(984535),a=i(809948),n=i(72754),r=i(933248),l=i(835151),o=i(576225);let h=(e,t)=>{let{getNewDomain:i,isContinuous:s,field:a,originalFields:n}=t,l=a(),h=i();if((0,o.Z)(h)||(0,o.Z)(l))return e;let c=n(),d=(0,r.Z)(l)?l[0]:l;return e[d]&&c&&c[d]&&c[d].lockStatisticsByDomain&&!s()&&(e[d].values=h),e},c=(e,t)=>{let{getNewDomain:i,isContinuous:s,field:a}=t,n=a(),r=i();if((0,o.Z)(r)||(0,o.Z)(n))return e;if(0===r.length)return[];let h={};r.forEach(e=>{h[e]||(h[e]=1)});let c=null;return c=s()?e=>{let t=!1;return(0,l.IX)(n).every(i=>{e[i]>=r[0]&&e[i]<=(0,l.Z$)(r)&&(t=!0)}),t}:e=>{let t=!1;return(0,l.IX)(n).every(i=>{(h[e[i]+""]||h[e[i]])&&(t=!0)}),t},e.filter(c)},d=(e,t)=>{let{stateFields:i,valueFields:s,dataCollection:a,isCategoryState:n}=t.input,{stateField:r,valueField:h}=t.output,c={},d=[],u=[],p=!1;return a.forEach((e,t)=>{var a;if((0,o.Z)(i[t]))return;let n=null==(a=e.getFields())?void 0:a[i[t]];n&&n.lockStatisticsByDomain&&(p=!0,n.domain.forEach(e=>{(0,o.Z)(c[e])&&(u.push(e),c[e]=0)})),e.latestData.forEach(e=>{(0,l.IX)(i[t]).forEach(i=>{(0,o.Z)(e[i])||((0,o.Z)(c[e[i]])&&(u.push(e[i]),c[e[i]]=0),(0,o.Z)(s[t])||(c[e[i]]+=isNaN(parseFloat(e[s[t]]))?1:parseFloat(e[s[t]])))})})}),(p?u:!1===n?u.sort((e,t)=>e-t):Object.keys(c)).forEach(e=>{let t={[r]:e};h&&(t[h]=c[e]),d.push(t)}),d};var u=i(924706),p=i(459774),_=i(469911),g=i(241104),m=i(535315),v=i(796327),y=i(777678),f=i(971800),x=i(27203),b=i(26688),S=i(800466),A=i(736299),k=i(102094),I=i(687404),C=i(40806),E=i(586673),T=i(459338);class L extends a.H{get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(e,t,i=["percent","percent"]){let[s="percent",a="percent"]=i,n="percent"===s?e:this.dataToStatePoint(e),r="percent"===a?t:this.dataToStatePoint(t);this._handleChange(n,r,!0)}enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(e){this._handleChartZoom({zoomDelta:1.2,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}zoomOut(e){this._handleChartZoom({zoomDelta:.8,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}_handleChange(e,t,i){var s,a;null!=(a=null==(s=this._spec)?void 0:s.zoomLock)&&a||t-e!==this._spanCache&&(t-e<this._minSpan||t-e>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=t-e)}_isReverse(){let e=this._relatedAxisComponent;if(!e)return!1;let t=e.getScale();return t.range()[0]>t.range()[1]&&(!e.getInverse()||this._isHorizontal)}_updateRangeFactor(e){let t=this._relatedAxisComponent,i=t.getScale(),s=this._isReverse(),a=s?[1-this._end,1-this._start]:[this._start,this._end];if(s)switch(e){case"startHandler":t.scaleRangeFactorEnd(a[1]);break;case"endHandler":t.scaleRangeFactorStart(a[0]);break;default:t.scaleRangeFactorStart(a[0],!0),t.scaleRangeFactorEnd(a[1])}else switch(e){case"startHandler":t.scaleRangeFactorStart(a[0]);break;case"endHandler":t.scaleRangeFactorEnd(a[1]);break;default:t.scaleRangeFactorEnd(a[1],!0),t.scaleRangeFactorStart(a[0])}let n=i.rangeFactor();n?(this._start=s?1-n[1]:n[0],this._end=s?1-n[0]:n[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(e,t){super(e,t),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._shouldChange=!0,this._stateField="x",this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.effect={onZoomChange:e=>{var t,i;let a=this._relatedAxisComponent;if(a&&"axis"===this._filterMode){let s=a.getScale(),n=a.getSpec();this._auto&&this._getAxisBandSize(n)&&this._spec.ignoreBandSize&&(s.bandwidth("auto"),s.maxBandwidth("auto"),s.minBandwidth("auto")),this._updateRangeFactor(e),this._auto&&(null==(i=null==(t=this._component)?void 0:t.setStartAndEnd)||i.call(t,this._start,this._end)),a.effect.scaleUpdate({value:"force"})}else(0,s.xV)(this._regions,e=>{var t;null==(t=e.getViewData())||t.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,s.xV)(this._regions,e=>{e.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._handleStateChange=(e,t,i)=>{var s,a;return this._startValue=e,this._endValue=t,this._newDomain=this._parseDomainFromState(this._startValue,this._endValue),null==(a=(s=this.effect).onZoomChange)||a.call(s,i),!0},this._handleChartZoom=(e,t)=>{var i,s;if(!this._activeRoam||this._zoomAttr.filter&&!this._zoomAttr.filter(e,t))return;let{zoomDelta:a,zoomX:n,zoomY:r}=e,{x:l,y:o}=this._regions[0].getLayoutStartPoint(),{width:h,height:c}=this._regions[0].getLayoutRect(),d=Math.abs(this._start-this._end),u=null!=(s=null==(i=this._spec.roamZoom)?void 0:i.rate)?s:1;if(d>=1&&a<1||d<=.01&&a>1)return;let p=this._isHorizontal?n:r,_=d*(a-1)*u,g=_/2,v=_/2;if(p){let e=this._isHorizontal?l:o,t=this._isHorizontal?h:c;g=Math.abs(e-p)/Math.abs(t-e)*_,v=Math.abs(t-p)/Math.abs(t-e)*_}let y=(0,m.Z)(this._start+g,0,1),f=(0,m.Z)(this._end-v,0,1);this._handleChange(Math.min(y,f),Math.max(y,f),!0)},this._handleChartScroll=(e,t)=>{var i;if(!this._activeRoam||this._scrollAttr.filter&&!this._scrollAttr.filter(e,t))return!1;let{scrollX:s,scrollY:a}=e,n=this._isHorizontal?s:a,r=this._isHorizontal?(0,v.Wn)(s/a)>=.5:(0,v.Wn)(a/s)>=.5;this._scrollAttr.reverse||(n=-n),r&&this._handleChartMove(n,null!=(i=this._scrollAttr.rate)?i:1);let l=0!==this._start&&1!==this._end;return r&&l},this._handleChartDrag=(e,t)=>{var i,s;if(!this._activeRoam||this._dragAttr.filter&&!this._dragAttr.filter(e,t))return;(null==(i=this._spec.roamDrag)?void 0:i.autoVisible)&&this.show();let[a,n]=e,r=this._isHorizontal?a:n;this._dragAttr.reverse&&(r=-r),this._handleChartMove(r,null!=(s=this._dragAttr.rate)?s:1)},this._handleChartMove=(e,t)=>{let i=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(e)>=1e-6){if(e>0&&this._end<1){let s=Math.min(1-this._end,e/i)*t;this._handleChange(this._start+s,this._end+s,!0)}else if(e<0&&this._start>0){let s=Math.max(-this._start,e/i)*t;this._handleChange(this._start+s,this._end+s,!0)}}return!1},this._orient=(0,g.x)(e),this._isHorizontal="horizontal"===(0,g._Q)(this._orient)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}_setAxisFromSpec(){if((0,y.Z)(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):(0,y.Z)(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),(0,o.Z)(this._spec.field)&&!this._relatedAxisComponent){let e=this._option.getComponentsByKey("axes"),t=e.find(e=>e._orient===this._orient);if(t)this._relatedAxisComponent=t;else{let t=e.find(e=>!(0,p.z2)(e.getScale().type));this._relatedAxisComponent=t}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var e,t;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();let i=this._relatedAxisComponent?null==(t=(e=this._relatedAxisComponent).getBindSeriesFilter)?void 0:t.call(e):null;if((0,y.Z)(i)&&((0,y.Z)(i.userId)&&(this._seriesUserId=(0,l.IX)(i.userId)),(0,y.Z)(i.specIndex)&&(this._seriesIndex=(0,l.IX)(i.specIndex))),(0,y.Z)(this._spec.seriesId)){let e=(0,l.IX)(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(t=>e.includes(t)):this._seriesUserId=e}if((0,y.Z)(this._spec.seriesIndex)){let e=(0,l.IX)(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(t=>e.includes(t)):this._seriesIndex=e}if((0,y.Z)(this._spec.regionIndex)){let e=this._option.getRegionsInIndex((0,l.IX)(this._spec.regionIndex));this._regions=this._regions.filter(t=>e.includes(t))}else if((0,y.Z)(this._spec.regionId)){let e=(0,l.IX)(this._spec.regionId);this._regions=e.length?this._regions.filter(t=>e.includes(t.id)):[]}}onDataUpdate(){var e;let t=this._computeDomainOfStateScale((0,p.z2)(this._stateScale.type));this._stateScale.domain(t,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!(0,f.X)(this._domainCache,t)&&(this._domainCache=t,this._dataUpdating=!0,null==(e=this.getChart())||e.setLayoutTag(!0,null,!1))}_computeDomainOfStateScale(e){if(this._spec.customDomain)return this._spec.customDomain;let t=this._data.getLatestData().map(e=>e[this._stateField]);if(e){let e=t.map(e=>+e);return t.length?[(0,l.iH)(e),(0,l.CE)(e)]:[-1/0,1/0]}return t}_initEvent(){this._initCommonEvent()}_initData(){let e,t=[],i=[],a=[];if(this._relatedAxisComponent){let n={};(0,s.xV)(this._regions,s=>{var r,o;let h="cartesian"===s.coordinate?s.getXAxisHelper():"polar"===s.coordinate?s.angleAxisHelper:null,c="cartesian"===s.coordinate?s.getYAxisHelper():"polar"===s.coordinate?s.radiusAxisHelper:null;if(!h||!c)return;let d=h.getAxisId()===this._relatedAxisComponent.id?h:c.getAxisId()===this._relatedAxisComponent.id?c:this._isHorizontal?h:c,u=d===h?c:h;t.push(s.getRawData());let _=s.getSpec(),g="cartesian"===s.coordinate?(0,l.IX)(_.xField):(0,l.IX)(null!=(r=_.angleField)?r:_.categoryField),m="cartesian"===s.coordinate?(0,l.IX)(_.yField):(0,l.IX)(null!=(o=_.radiusField)?o:_.valueField);if(n[s.id]="link"===s.type?["from_xField"]:d===h?g:m,(0,p.z2)(d.getScale(0).type)?(e=!1,i.push(n[s.id])):i.push(n[s.id][0]),this._valueField){let e="link"===s.type?["from_yField"]:u===h?g:m;(0,p.z2)(u.getScale(0).type)&&a.push(...e)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=n}else(0,s.xV)(this._regions,e=>{t.push(e.getRawData()),i.push(this._field),this._valueField&&a.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});let{dataSet:n}=this._option;(0,u.I)(n,"dataview",A.i),(0,u.U)(n,"dataFilterComputeDomain",d);let r=new k.V(n,{name:`${this.type}_${this.id}_data`});r.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,stateFields:i,valueFields:a,isCategoryState:e},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new I.O(this._option,r),r.reRunAllTransform(),n.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}setAttrFromSpec(){var e;super.setAttrFromSpec(),!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=(0,x.Z)({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=(0,x.Z)({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=(0,x.Z)({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null==(e=this._spec.visible)||e}statePointToData(e){let t=this._stateScale,i=t.domain();if((0,p.z2)(t.type))return this._isReverse()?i[0]+((0,l.Z$)(i)-i[0])*(1-e):i[0]+((0,l.Z$)(i)-i[0])*e;let s=t.range();this._isReverse()&&(s=s.slice().reverse());let a=s[0]+((0,l.Z$)(s)-s[0])*e;return t.invert(a)}dataToStatePoint(e){let t=this._stateScale,i=t.scale(e),s=t.range();return!this._isHorizontal&&(0,p.z2)(t.type)&&(s=s.slice().reverse()),(i-s[0])/((0,l.Z$)(s)-s[0])}_modeCheck(e,t){return"start"===e?"percent"===t&&(0,y.Z)(this._spec.start)||"value"===t&&(0,y.Z)(this._spec.startValue):"percent"===t&&(0,y.Z)(this._spec.end)||"value"===t&&(0,y.Z)(this._spec.endValue)}_setStateFromSpec(){var e,t;let i,s;if(this._auto=!!this._spec.auto,this._spec.rangeMode){let[e,t]=this._spec.rangeMode;this._modeCheck("start",e)&&this._modeCheck("end",t)&&(i="percent"===e?this._spec.start:this.dataToStatePoint(this._spec.startValue),s="percent"===t?this._spec.end:this.dataToStatePoint(this._spec.endValue))}else i=this._spec.start?this._spec.start:this._spec.startValue?this.dataToStatePoint(this._spec.startValue):0,s=this._spec.end?this._spec.end:this._spec.endValue?this.dataToStatePoint(this._spec.endValue):1;this._startValue=this.statePointToData(i),this._endValue=this.statePointToData(s),this._start=i,this._end=s,this._minSpan=null!=(e=this._spec.minSpan)?e:0,this._maxSpan=null!=(t=this._spec.maxSpan)?t:1,(0,p.z2)(this._stateScale.type)&&this._stateScale.domain()[0]!==(0,l.Z$)(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/((0,l.Z$)(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/((0,l.Z$)(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),this._relatedAxisComponent&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=this._parseDomainFromState(this._startValue,this._endValue))}_parseFieldOfSeries(e){var t;return null==(t=this._originalStateFields)?void 0:t[e.id]}_initStateScale(){let e=[0,1];if(this._relatedAxisComponent){let t=this._relatedAxisComponent.getScale(),i=(0,p.z2)(t.type),s=this._computeDomainOfStateScale(i);if(this._stateScale=t.clone(),i){let t=s.map(e=>+e);this._stateScale.domain(s.length?[(0,l.iH)(t),(0,l.CE)(t)]:[0,1],!0).range(e)}else this._stateScale.domain(s,!0).range(e)}else this._stateScale=new _.j,this._stateScale.domain(this._computeDomainOfStateScale(),!0).range(e)}init(e){super.init(e),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()}_addTransformToSeries(){this._relatedAxisComponent&&"axis"===this._filterMode||((0,u.U)(this._option.dataSet,"dataFilterWithNewDomain",c),(0,u.U)(this._option.dataSet,"lockStatisticsFilter",h),(0,s.xV)(this._regions,e=>{e.getViewDataStatistics().transform({type:"lockStatisticsFilter",options:{originalFields:()=>e.getViewDataStatistics().getFields(),getNewDomain:()=>this._newDomain,field:()=>{var t;return null!=(t=this._field)?t:this._parseFieldOfSeries(e)},isContinuous:()=>(0,p.z2)(this._stateScale.type)},level:1},!1),e.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var t;return null!=(t=this._field)?t:this._parseFieldOfSeries(e)},isContinuous:()=>(0,p.z2)(this._stateScale.type)},level:E.BV.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(0,f.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}reInit(e){super.reInit(e),this._marks.forEach(e=>{e.getMarks().forEach(e=>{this.initMarkStyleWithSpec(e,this._spec[e.name])})})}_parseDomainFromState(e,t){if((0,p.z2)(this._stateScale.type))return[Math.min(t,e),Math.max(t,e)];let i=this._stateScale.domain(),s=i.indexOf(e),a=i.indexOf(t);return i.slice(Math.min(s,a),Math.max(s,a)+1)}_initCommonEvent(){var e,t,i,s,a,n,r,l;let o={delayType:null!=(t=null==(e=this._spec)?void 0:e.delayType)?t:"throttle",delayTime:(0,y.Z)(null==(i=this._spec)?void 0:i.delayType)?null!=(a=null==(s=this._spec)?void 0:s.delayTime)?a:30:0,realTime:null==(r=null==(n=this._spec)?void 0:n.realTime)||r,allowComponentZoom:!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom,o),this._scrollAttr.enable&&this.initScrollEventOfRegions(this._regions,null,this._handleChartScroll,o),this._dragAttr.enable&&this.initDragEventOfRegions(this._regions,null,this._handleChartDrag,o),(null==(l=this._spec.roamDrag)?void 0:l.autoVisible)&&(this._throttledHide=(0,b.Z)(()=>this.hide(),300),this.event.on("panend",()=>{this._throttledHide()}))}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),super.updateLayoutAttribute()}_autoVisible(e){if(!this._auto)return;e?this.show():this.hide();let t=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[t]:e?this[`_${t}`]:0},{[t]:T.W.Built_In})}onLayoutStart(e,t){super.onLayoutStart(e,t);let i=this._autoUpdate(e);this._autoVisible(i),this._dataUpdating=!1}onLayoutEnd(){let e=0!==this._start||1!==this._end;this._autoVisible(e),super.onLayoutEnd()}getBoundsInRect(e){let t={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(t.y2=t.y1+this._height,t.x2=t.x1+e.width):(t.x2=t.x1+this._width,t.y2=t.y1+e.height),t}hide(){var e;null==(e=this._component)||e.hideAll()}show(){var e;null==(e=this._component)||e.showAll()}_getAxisBandSize(e){let t=null==e?void 0:e.bandSize,i=null==e?void 0:e.maxBandSize,s=null==e?void 0:e.minBandSize;if(t||s||i)return{bandSize:t,maxBandSize:i,minBandSize:s}}_autoUpdate(e){var t,i,s,a,r,l;if(!this._auto)return this._cacheVisibility=void 0,!0;let h=this._relatedAxisComponent,c=null==h?void 0:h.getSpec(),d=null==h?void 0:h.getScale(),u=this._getAxisBandSize(c);if(!this._dataUpdating&&(0,p.lK)(d.type)&&(null==e?void 0:e.height)===(null==(t=this._cacheRect)?void 0:t.height)&&(null==e?void 0:e.width)===(null==(i=this._cacheRect)?void 0:i.width)&&this._fixedBandSize===(null==u?void 0:u.bandSize))return this._cacheVisibility;let _=!0;if(this._isHorizontal&&(null==e?void 0:e.width)!==(null==(s=this._cacheRect)?void 0:s.width)?d.range(h.getInverse()?[e.width,0]:[0,e.width]):(null==e?void 0:e.height)!==(null==(a=this._cacheRect)?void 0:a.height)&&d.range(h.getInverse()?[0,e.height]:[e.height,0]),this._cacheRect={width:null==e?void 0:e.width,height:null==e?void 0:e.height},this._fixedBandSize=null==u?void 0:u.bandSize,(0,p.lK)(d.type)){u&&(this._start||this._end)&&(this.type===n.L.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());let[e,t]=null!=(r=d.rangeFactor())?r:[];_=(!(0,o.Z)(e)||!(0,o.Z)(t))&&(0!==e||1!==t)}else{let[e,t]=null!=(l=d.rangeFactor())?l:[this._start,this._end];_=0!==e||1!==t}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=_,_}_getNeedClearVRenderComponents(){return[this._component]}clear(){this._throttledHide=null}}(0,S.jB)(L,C.e)},194225:function(e,t,i){i.d(t,{y:()=>I});var s=i(557999),a=i(576225),n=i(835151),r=i(591431),l=i(777678),o=i(896294),h=i(522269),c=i(72754),d=i(154482),u=i(664002),p=i(875244),_=i(864190),g=i(459774),m=i(663787),v=i(75464),y=i(279090),f=i(933248),x=i(775527);class b extends x.r{_mergeThemeToSpec(e,t){let i=this._theme,s=e;if(this._shouldMergeThemeToSpec()){let t=e=>{let t=(0,h.H)({selectedBackgroundChart:{line:{},area:{}}},this._theme,e),{selectedBackgroundChart:i={}}=e,{line:s,area:a}=i;return s&&!1!==s.visible&&(t.selectedBackgroundChart.line.style=Object.assign(Object.assign({},t.selectedBackgroundChart.line.style),{visible:!0})),a&&!1!==a.visible&&(t.selectedBackgroundChart.area.style=Object.assign(Object.assign({},t.selectedBackgroundChart.area.style),{visible:!0})),t};s=(0,f.Z)(e)?e.map(e=>t(e)):t(e)}return this._adjustPadding(s),{spec:s,theme:i}}}var S=i(864985),A=i(428133);class k extends d.e{constructor(e,t){var i;super(e,t),this.type=c.L.dataZoom,this.name=c.L.dataZoom,this.transformerConstructor=b,this.specKey="dataZoom",this.layoutZIndex=m.Ai.DataZoom,this.layoutLevel=m.pM.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=e=>{let t="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,s=this._isHorizontal?this._stateScale:this._valueScale,a=this._isHorizontal?this._stateField:this._valueField;return s.scale(e[a])+this.getLayoutStartPoint().x+t+i},this._dataToPositionX2=e=>{let t="left"===this._orient?this._middleHandlerSize:0,i=this._isHorizontal?this._startHandlerSize/2:0,s=this._isHorizontal?this._stateScale:this._valueScale,a=s.domain()[0];return s.scale(a)+this.getLayoutStartPoint().x+t+i},this._dataToPositionY=e=>{let t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,s=this._isHorizontal?this._valueScale:this._stateScale,a=this._isHorizontal?this._valueField:this._stateField;return s.scale(e[a])+this.getLayoutStartPoint().y+t+i},this._dataToPositionY2=e=>{let t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,s=this._isHorizontal?this._valueScale:this._stateScale,a=s.domain()[0];return s.scale(a)+this.getLayoutStartPoint().y+t+i},this._valueField="y",this._filterMode=null!=(i=e.filterMode)?i:"filter"}created(){super.created(),this._initValueScale()}setAttrFromSpec(){var e,t,i,n,r,l,o,h,c,d;super.setAttrFromSpec(),(0,s.Z)(this._spec.roam)&&(this._zoomAttr.enable=this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode),this._backgroundSize=null!=(t=null==(e=this._spec.background)?void 0:e.size)?t:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),this._width=this._computeWidth(),this._height=this._computeHeight(),(0,a.Z)(null==(r=null==(n=null==(i=this._spec)?void 0:i.startHandler)?void 0:n.style)?void 0:r.size)&&(this._spec.startHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize),(0,a.Z)(null==(h=null==(o=null==(l=this._spec)?void 0:l.endHandler)?void 0:o.style)?void 0:h.size)&&(this._spec.endHandler.style.size=this._isHorizontal?this._height-this._middleHandlerSize:this._width-this._middleHandlerSize);let u=null==(c=this._spec.startHandler.style.visible)||c,p=null==(d=this._spec.endHandler.style.visible)||d;this._startHandlerSize=u?this._spec.startHandler.style.size:0,this._endHandlerSize=p?this._spec.endHandler.style.size:0}onLayoutEnd(){this._updateScaleRange(),this._isReverse()&&!this._isReverseCache&&(this._isReverseCache=this._isReverse(),this.effect.onZoomChange()),!1!==this._cacheVisibility&&super.onLayoutEnd()}_initValueScale(){let e=this._computeDomainOfValueScale();if(e){let t=new _.f;t.domain(e),this._valueScale=t}}_updateScaleRange(){var e,t;let i,s=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale||!this._valueScale)return;let a=this._isHorizontal?this.getLayoutRect().width-s:this.getLayoutRect().height-s,n=null!=(t=null==(e=this._relatedAxisComponent)?void 0:e.getScale().range())?t:[this._startHandlerSize/2,a+this._startHandlerSize/2],r=this._computeWidth(),l=this._computeHeight();this._isHorizontal?(i=this._visible?[this._startHandlerSize/2,r-s+this._startHandlerSize/2]:n,this._stateScale.range(i),this._valueScale.range([l-this._middleHandlerSize,0])):(i=this._visible?[this._startHandlerSize/2,l-s+this._startHandlerSize/2]:n,this._stateScale.range(i),"left"===this.layoutOrient?this._valueScale.range([r-this._middleHandlerSize,0]):this._valueScale.range([0,r-this._middleHandlerSize])),this._component&&!1!==this._cacheVisibility&&this._component.setAttributes({size:{width:r,height:l},position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y}})}_computeDomainOfValueScale(){let e=this._data.getLatestData().map(e=>e[this._valueField]),t=e.map(e=>+e);return e.length?[(0,n.iH)(t),(0,n.CE)(t)]:null}_computeMiddleHandlerSize(){var e,t,i,s;let a=0;return(null==(t=null==(e=this._spec)?void 0:e.middleHandler)?void 0:t.visible)&&(a+=Math.max(null!=(i=this._spec.middleHandler.icon.style.size)?i:8,null!=(s=this._spec.middleHandler.background.size)?s:40)),a}_computeWidth(){return!1===this._visible?0:(0,r.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:this._backgroundSize+this._middleHandlerSize}_computeHeight(){return!1===this._visible?0:(0,r.Z)(this._spec.height)?this._spec.height:this._isHorizontal?this._backgroundSize+this._middleHandlerSize:this.getLayoutRect().height}_isScaleValid(e){if(!e||!e.domain())return!1;let t=e.domain();return(!(0,g.z2)(e.type)||t[0]!==(0,n.Z$)(t))&&(!(0,g.lK)(e.type)||1!==(0,n.V4)(t).length)}_getAttrs(e){var t,i,s,a,n;let r=null!=(t=this._spec)?t:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this._computeWidth(),height:this._computeHeight()},showDetail:r.showDetail,brushSelect:null!=(i=r.brushSelect)&&i,zoomLock:null!=(s=r.zoomLock)&&s,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:r.delayType,delayTime:(0,l.Z)(r.delayType)?null!=(a=r.delayTime)?a:30:0,realTime:null==(n=r.realTime)||n,previewData:e&&this._data.getLatestData(),previewPointsX:e&&this._dataToPositionX,previewPointsY:e&&this._dataToPositionY,tolerance:this._spec.tolerance},this._getComponentAttrs(e))}_createOrUpdateComponent(){if(this._visible){let e=this._isHorizontal?this._stateScale:this._valueScale,t=this._isHorizontal?this._valueScale:this._stateScale,i=this._isScaleValid(e)&&this._isScaleValid(t)&&!1!==this._spec.showBackgroundChart,s=this._getAttrs(i);if(this._component)this._component.setAttributes(s);else{let e=this.getContainer();this._component=new u.B(s),this._isHorizontal?i&&this._component.setPreviewPointsY1(this._dataToPositionY2):i&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(e=>this.statePointToData(e)),this._component.addEventListener("change",e=>{let{start:t,end:i,tag:s}=e.detail;this._handleChange(t,i,void 0,s)}),e.add(this._component),this._updateScaleRange()}}}_handleChange(e,t,i,s){if(super._handleChange(e,t,i),this._shouldChange){i&&this._component&&this._component.setStartAndEnd(e,t),this._start=e,this._end=t;let a=this.statePointToData(e),n=this.statePointToData(t);((0,o.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,a,n):this._handleStateChange(a,n,s))&&this.event.emit(v.$7.dataZoomChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:e,end:t,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){var e;let t=this._data.getDataView();if(t.reRunAllTransform(),null==(e=this._component)||e.setPreviewData(t.latestData),this._valueScale){let e=this._computeDomainOfValueScale();e&&this._valueScale.domain(e)}}_getComponentAttrs(e){var t,i,s,a,n,r,l,o,c,d,u;let{middleHandler:_={},startText:g={},endText:m={},backgroundChart:v={},selectedBackgroundChart:y={}}=this._spec;return{backgroundStyle:(0,p.h_)(null==(t=this._spec.background)?void 0:t.style),startHandlerStyle:(0,p.h_)(null==(i=this._spec.startHandler)?void 0:i.style),middleHandlerStyle:_.visible?{visible:!0,icon:(0,p.h_)(null==(s=_.icon)?void 0:s.style),background:{size:null==(a=_.background)?void 0:a.size,style:(0,p.h_)(null==(n=_.background)?void 0:n.style)}}:{visible:!1},endHandlerStyle:(0,p.h_)(null==(r=this._spec.endHandler)?void 0:r.style),startTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:(0,p.h_)(g.style)},endTextStyle:{padding:m.padding,formatMethod:this._getHandlerTextFormatMethod(m),textStyle:(0,p.h_)(m.style)},selectedBackgroundStyle:(0,p.h_)(this._spec.selectedBackground.style),dragMaskStyle:(0,p.h_)(null==(l=this._spec.dragMask)?void 0:l.style),backgroundChartStyle:e?{line:(0,h.H)((0,p.h_)(null==(o=v.line)?void 0:o.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,p.h_)(null==(c=v.area)?void 0:c.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:e?{line:(0,h.H)((0,p.h_)(null==(d=y.line)?void 0:d.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},(0,p.h_)(null==(u=y.area)?void 0:u.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(e){let{formatMethod:t,formatter:i}=e,{formatFunc:s}=(0,S.HJ)(t,i);return s?e=>s(e,{label:e},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}clear(){if(this._component){let e=this.getContainer();this._component.removeAllChild(),e&&e.removeChild(this._component),this._component=null}super.clear()}}k.type=c.L.dataZoom,k.transformerConstructor=b,k.builtInTheme={dataZoom:A.v},k.specKey="dataZoom";let I=()=>{y.F.registerComponent(k.type,k)}},919026:function(e,t,i){i.d(t,{S:()=>x});var s=i(557999),a=i(591431),n=i(777678),r=i(896294),l=i(576225),o=i(7234),h=i(72754),c=i(154482),d=i(131096),u=i(875244),p=i(663787),_=i(75464),g=i(124990),m=i(279090),v=i(62209),y=i(182991);class f extends c.e{constructor(e,t){var i;super(e,t),this.type=h.L.scrollBar,this.name=h.L.scrollBar,this.specKey="scrollBar",this.layoutZIndex=p.Ai.DataZoom,this.layoutLevel=p.pM.DataZoom,this.layoutType="region-relative",this._filterMode=null!=(i=e.filterMode)?i:"axis"}setAttrFromSpec(){super.setAttrFromSpec(),(0,s.Z)(this._spec.roam)&&(this._zoomAttr.enable=!1,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.event,this._option.mode)}onLayoutEnd(){var e,t;this._updateScaleRange(),null==(t=(e=this.effect).onZoomChange)||t.call(e),super.onLayoutEnd()}_updateScaleRange(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return(0,a.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:g.B}_computeHeight(){return(0,a.Z)(this._spec.height)?this._spec.height:this._isHorizontal?g.B:this.getLayoutRect().height}_getAttrs(){var e,t,i,s,a,r;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:null==(e=this._spec)?void 0:e.delayType,delayTime:(0,n.Z)(null==(t=this._spec)?void 0:t.delayType)?null!=(s=null==(i=this._spec)?void 0:i.delayTime)?s:30:0,realTime:null==(r=null==(a=this._spec)?void 0:a.realTime)||r},this._getComponentAttrs())}_createOrUpdateComponent(){let e=this._getAttrs();if(this._component)this._component.setAttributes(e);else{let t=this.getContainer();this._component=new d.B(e),this._component.addEventListener("scrollDrag",e=>{let t=e.detail.value;this._handleChange(t[0],t[1])}),this._component.addEventListener("scrollUp",e=>{let t=e.detail.value;this._handleChange(t[0],t[1])}),t.add(this._component)}}_handleChange(e,t,i){super._handleChange(e,t,i);let s=(0,v.hA)(this._start,e)&&(0,v.hA)(this._end,t);if(this._shouldChange&&(!s||!1===this._spec.realTime)){i&&this._component&&this._component.setAttribute("range",[e,t]),this._start=e,this._end=t;let s=this.statePointToData(e),a=this.statePointToData(t);((0,r.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,s,a):this._handleStateChange(this.statePointToData(e),this.statePointToData(t)))&&this.event.emit(_.$7.scrollBarChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._spec.auto&&this._data.getDataView().reRunAllTransform()}_getComponentAttrs(){let{rail:e,slider:t,innerPadding:i}=this._spec,s={};return(0,l.Z)(i)||(s.padding=i),(0,o.Z)(null==e?void 0:e.style)||(s.railStyle=(0,u.h_)(e.style)),(0,o.Z)(null==t?void 0:t.style)||(s.sliderStyle=(0,u.h_)(t.style)),s.disableTriggerEvent=this._option.disableTriggerEvent,s}_getNeedClearVRenderComponents(){return[this._component]}}f.type=h.L.scrollBar,f.builtInTheme={scrollBar:y.p},f.specKey="scrollBar";let x=()=>{m.F.registerComponent(f.type,f)}},597287:function(e,t,i){i.d(t,{zW:()=>S});var s=i(663787),a=i(784507);class n{constructor(e){this.projection=(0,a.UQ)(e.type)()}fit(e,t,i){this.projection.fitExtent([e,t],{type:"FeatureCollection",features:i})}center(e){var t,i;null==(i=null==(t=this.projection)?void 0:t.center)||i.call(t,e)}project(e){var t;return null==(t=this.projection)?void 0:t.call(this,e)}shape(e){var t,i;return null==(i=null==(t=this.projection)?void 0:t.path)?void 0:i.call(t,e)}invert(e){var t,i;return null==(i=null==(t=this.projection)?void 0:t.invert)?void 0:i.call(t,e)}scale(e){var t;if(null==(t=this.projection)?void 0:t.scale){if(void 0===e)return this.projection.scale();this.projection.scale(e)}}translate(e){var t;if(null==(t=this.projection)?void 0:t.scale){if(void 0===e)return this.projection.translate();this.projection.translate(e)}}evaluate(e,t,i){let s=this.projection.copy();return null==s?void 0:s.fitExtent([e,t],{type:"FeatureCollection",features:i})}}var r=i(72754),l=i(809948),o=i(984535),h=i(522269),c=i(75464),d=i(145004),u=i(75387),p=i(40806),_=i(576225),g=i(93774),m=i(777678),v=i(971800),y=i(800466),f=i(45554),x=i(279090);class b extends l.H{constructor(){var e,t;super(...arguments),this.type=r.L.geoCoordinate,this.name=r.L.geoCoordinate,this.layoutType="none",this.layoutZIndex=s.Ai.Mark,this._projectionSpec={name:(e=this.type,t=this.id,`${d.Bq}_${t}_${e}`),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(e,t)=>{var i,s,a,n,r,l;let o=e.zoomDelta,h=this._actualScale;return this._actualScale*=o,this._actualScale<(null==(i=this._spec.zoomLimit)?void 0:i.min)?(this._actualScale=null==(s=this._spec.zoomLimit)?void 0:s.min,o=(null==(a=this._spec.zoomLimit)?void 0:a.min)/h):this._actualScale>(null==(n=this._spec.zoomLimit)?void 0:n.max)&&(this._actualScale=null==(r=this._spec.zoomLimit)?void 0:r.max,o=(null==(l=this._spec.zoomLimit)?void 0:l.max)/h),this.zoom(o,[e.zoomX,e.zoomY]),{scale:o,totalScale:this._actualScale}},this.pan=(e=[0,0])=>{var t,i,s;let a=null!=(i=null==(t=this._projection)?void 0:t.translate())?i:[0,0],n=a[0],r=a[1];n+=e[0],r+=e[1],null==(s=this._projection)||s.translate([n,r])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(e){this._projectionSpec=Object.assign(Object.assign({},e),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(e){if((0,_.Z)(e))return null;let t=[];return e.region.forEach((e,i)=>{if("geo"===e.coordinate){let s=Object.assign(Object.assign({},e),{padding:0});t.push({spec:s,regionIndex:i,type:r.L.geoCoordinate,specInfoPath:["component","geoCoordinate",i]})}}),t}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=(0,h.H)(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>(null==(e=this._spec.zoomLimit)?void 0:e.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<(null==(t=this._spec.zoomLimit)?void 0:t.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=null!=(i=this._projectionSpec.zoom)?i:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(e,t){let i=t||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},{scale:s,totalScale:a}=this._handleChartZoom({zoomDelta:e,zoomX:i.x,zoomY:i.y});1!==s&&this.event.emit("zoom",{scale:s,scaleCenter:i,totalScale:a,model:this})}initEvent(){var e,t,i;this.event.on(c.$7.scaleUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));let{roam:s}=this._spec;if(s){let a=!0,n=!0,r=!1;!0!==s&&(a=null==(e=s.zoom)||e,n=null==(t=s.drag)||t,r=null!=(i=s.blank)&&i),a&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),n&&this.initDragEventOfRegions(this._regions,r?null:()=>!0,this.pan),this._regions.forEach(e=>{e.getSeries().forEach(e=>{e.event.on("zoom",t=>(e.handleZoom(t),!0)),e.event.on("panmove",t=>(e.handlePan(t),!0))})})}}initProjection(){var e;this._projection=new n(this._projectionSpec),null!==this._projection.projection||null==(e=this._option)||e.onError("unsupported projection type!")}coordinateHelper(){let e={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach(t=>{t.getSeries().forEach(t=>{t.type===u.A.map||t.type===u.A.pictogram?t.setCoordinateHelper(e):(t.setXAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var s;let a=e[0];if((0,_.Z)(a)&&(null==i?void 0:i.datum)){let e=i.datum[t.getDimensionField()[0]];a=null==(s=this._centerCache.get(e))?void 0:s.x}return this.dataToLongitude(a)},valueToPosition:(e,i)=>{var s;if((0,_.Z)(e)&&(null==i?void 0:i.datum)){let a=i.datum[t.getDimensionField()[0]];e=null==(s=this._centerCache.get(a))?void 0:s.x}return this.dataToLongitude(e)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),t.setYAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var s;let a=e[0];if((0,_.Z)(a)&&(null==i?void 0:i.datum)){let e=i.datum[t.getDimensionField()[0]];a=null==(s=this._centerCache.get(e))?void 0:s.y}return this.dataToLatitude(a)},valueToPosition:(e,i)=>{var s;if((0,_.Z)(e)&&(null==i?void 0:i.datum)){let a=i.datum[t.getDimensionField()[0]];e=null==(s=this._centerCache.get(a))?void 0:s.y}return this.dataToLatitude(e)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))})})}onLayoutEnd(){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());let{width:e,height:t}=this.getLayoutRect(),{translate:i,scale:s,center:a}=this.evaluateProjection([0,0],[e,t]);i&&this._projection.translate(i),s&&this._projection.scale(s),a&&this._projection.center(a),(0,o.xV)(this._regions,e=>{var t;if(e.type===u.A.map||e.type===u.A.pictogram){null==(t=e.areaPath)||t.clear();let i=e.getRootMark().getProduct();i&&i.attribute.postMatrix&&i.setAttributes({postMatrix:new g.y})}}),this._actualScale=this._initialScale,super.onLayoutEnd()}collectFeatures(){let e=[];return this._regions.forEach(t=>{t.getSeries().forEach(t=>{var i,s;t.type!==u.A.map&&t.type!==u.A.pictogram||e.push(...null!=(s=null==(i=t.getMapViewData())?void 0:i.latestData)?s:[])})}),e}dataToPosition(e=[]){var t;let i=null==(t=this._projection)?void 0:t.project([e[0],e[1]]);return{x:null==i?void 0:i[0],y:null==i?void 0:i[1]}}dataToLatitude(e){var t;let i=null==(t=this._projection)?void 0:t.project([0,e]);return null==i?void 0:i[1]}dataToLongitude(e){var t;let i=null==(t=this._projection)?void 0:t.project([e,0]);return null==i?void 0:i[0]}zoom(e,t=[0,0]){var i,s,a,n,r,l;let o=null!=(s=null==(i=this._projection)?void 0:i.scale())?s:0,h=null!=(n=null==(a=this._projection)?void 0:a.translate())?n:[0,0],c=h[0],d=h[1];o*=e,c-=(t[0]-c)*(e-1),d-=(t[1]-d)*(e-1),null==(r=this._projection)||r.scale(o),null==(l=this._projection)||l.translate([c,d])}shape(e){return this._projection.shape(e)}invert(e){return this._projection.invert(e)}evaluateProjection(e,t){var i;let s=this._projection.evaluate(e,t,this.collectFeatures()),a=s.translate(),n=s.scale()*this._initialScale,r=null!=(i=this._projectionSpec.center)?i:s.invert([t[0]/2,t[1]/2]);return r&&(a=[t[0]/2,t[1]/2]),{translate:a,scale:n,center:r}}_initCenterCache(){this._centerCache||(this._centerCache=new Map),this._regions.forEach(e=>{e.getSeries().forEach(e=>{var t,i;"map"===e.type&&(null!=(i=null==(t=e.getMapViewData())?void 0:t.latestData)?i:[]).forEach((t={})=>{let i=t[e.getDimensionField()[0]]||t[f.v],s=e.getDatumCenter(t);i&&(0,m.Z)(s)&&this._centerCache.set(i,{x:s[0],y:s[1]})})})})}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reMake=["roam","longitudeField","latitudeField","projection","zoomLimit"].some(i=>!(0,v.X)(null==t?void 0:t[i],e[i]))),i}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}b.type=r.L.geoCoordinate,(0,y.jB)(b,p.e);let S=()=>{x.F.registerComponent(b.type,b)}},591896:function(e,t,i){i.d(t,{j:()=>I});var s=i(102094),a=i(663787),n=i(72754),r=i(809948),l=i(522269),o=i(875244),h=i(505441),c=i(835151),d=i(150954),u=i(777678),p=i(971800),_=i(896294);let g=(e,t)=>{let{datum:i,title:s,content:a}=t,n=[],r=i.call(null);return s.visible&&n.push({type:"title",index:0,datum:r,spec:s}),(0,c.IX)(a).forEach((e,t)=>{e.visible&&n.push({type:"content",index:t,datum:r,spec:e})}),n};var m=i(924706),v=i(687404),y=i(938145),f=i(279090),x=i(864985),b=i(234630),S=i(237510),A=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class k extends r.H{constructor(){super(...arguments),this.type=n.L.indicator,this.name=n.L.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=a.Ai.Indicator,this.layoutLevel=a.pM.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(e){return(0,x.ts)(e,this.specKey,this.type,e=>e&&!1!==e.visible)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=(0,c.IX)(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex((0,c.IX)(this._spec.regionId),(0,c.IX)(this._spec.regionIndex))}initEvent(){this._option.disableTriggerEvent||"none"!==this._spec.trigger&&("hover"===this._spec.trigger?(this.event.on("element-highlight:start",e=>{let t=e.graphics[0];this.isRelativeModel(t)&&this.updateDatum((0,b.BY)(t))}),this.event.on("element-highlight:reset",e=>{this._activeDatum&&this.updateDatum(null)})):(this.event.on("element-select:start",e=>{let t=e.graphics[0];this.isRelativeModel(t)&&this.updateDatum((0,b.BY)(t))}),this.event.on("element-select:reset",e=>{this._activeDatum&&this.updateDatum(null)})))}updateDatum(e){this._activeDatum=e,this._displayData.updateData();let t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t)}initData(){(0,m.U)(this._option.dataSet,"indicatorFilter",g);let e=new s.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});e.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),e.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new v.O(this._option,e)}updateLayoutAttribute(){let e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(!1===this._spec.visible||!1===this._spec.fixed&&null===this._activeDatum)return{visible:!1};let e=this._regions[0],{width:t,height:i}=e.getLayoutRect(),{x:s,y:a}=e.getLayoutStartPoint(),n=this._spec,{content:r,offsetX:p,offsetY:_,limitRatio:g,title:m}=n,v=A(n,["content","offsetX","offsetY","limitRatio","title"]),y=[];return(0,c.IX)(r).forEach(e=>{let t=(0,l.H)({},this._theme.content,e);y.push({visible:!1!==t.visible&&(!t.field||null!==this._activeDatum),space:t.space||this._gap,autoLimit:t.autoLimit,autoFit:t.autoFit,fitPercent:t.fitPercent,fitStrategy:t.fitStrategy,style:Object.assign(Object.assign({},(0,o.ko)((0,d.Z)(t.style,["text"]),this._activeDatum)),{text:this._createText(t.field,t.style.text)})})}),Object.assign({visible:!0,size:{width:t,height:i},zIndex:this.layoutZIndex,x:s,y:a,dx:p?(0,h.uj)(p,this._computeLayoutRadius()):0,dy:_?(0,h.uj)(_,this._computeLayoutRadius()):0,limitRatio:g||1/0,title:{visible:!1!==m.visible&&(!(0,u.Z)(m.field)||null!==this._activeDatum),space:m.space||this._gap,autoLimit:m.autoLimit,autoFit:m.autoFit,fitPercent:m.fitPercent,fitStrategy:m.fitStrategy,style:Object.assign(Object.assign({},(0,o.ko)((0,d.Z)(m.style,["text"]),this._activeDatum)),{text:this._createText(m.field,m.style.text)})},content:y},v)}_createOrUpdateIndicatorComponent(e){if(!1===e.visible)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)(0,p.X)(e,this._cacheAttrs)||this._indicatorComponent.setAttributes(e);else{let t=this.getContainer(),i=new y.z(e);i.name="indicator",t.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",(e,t)=>this._delegateEvent(this._indicatorComponent,e,t))}this._cacheAttrs=e}_createText(e,t){var i;return e?this._activeDatum?this._activeDatum[e]:"":(0,_.Z)(t)?null!=(i=t(this._activeDatum,void 0))?i:"":null!=t?t:""}_computeLayoutRadius(){let{width:e,height:t}=this._regions[0].getLayoutRect();return Math.min(e/2,t/2)}isRelativeModel(e){return this._regions.some(t=>!!t.getSeriesInId(e.context.modelId))}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}k.type=n.L.indicator,k.builtInTheme={indicator:S._},k.specKey="indicator";let I=()=>{f.F.registerComponent(k.type,k)}},72754:function(e,t,i){var s,a;i.d(t,{L:()=>s}),(a=s||(s={})).cartesianAxis="cartesianAxis",a.cartesianBandAxis="cartesianAxis-band",a.cartesianLinearAxis="cartesianAxis-linear",a.cartesianTimeAxis="cartesianAxis-time",a.cartesianLogAxis="cartesianAxis-log",a.cartesianSymlogAxis="cartesianAxis-symlog",a.polarAxis="polarAxis",a.polarBandAxis="polarAxis-band",a.polarLinearAxis="polarAxis-linear",a.crosshair="crosshair",a.cartesianCrosshair="cartesianCrosshair",a.polarCrosshair="polarCrosshair",a.dataZoom="dataZoom",a.geoCoordinate="geoCoordinate",a.indicator="indicator",a.discreteLegend="discreteLegend",a.continuousLegend="continuousLegend",a.colorLegend="colorLegend",a.sizeLegend="sizeLegend",a.markLine="markLine",a.markArea="markArea",a.markPoint="markPoint",a.polarMarkLine="polarMarkLine",a.polarMarkArea="polarMarkArea",a.polarMarkPoint="polarMarkPoint",a.geoMarkPoint="geoMarkPoint",a.tooltip="tooltip",a.title="title",a.player="player",a.scrollBar="scrollBar",a.label="label",a.totalLabel="totalLabel",a.brush="brush",a.poptip="poptip",a.customMark="customMark"},989379:function(e,t,i){i.d(t,{d:()=>u});var s=i(809948),a=i(72754),n=i(663787),r=i(971800),l=i(835151),o=i(576225),h=i(290493),c=i(481990),d=i(981081);class u extends s.H{constructor(e,t){super(e,t),this.type=a.L.label,this.name=a.L.label,this.layoutType="none",this.layoutZIndex=n.Ai.Label,this._regions=t.getRegionsInIndex(t.regionIndexes)}_interactiveConfig(e){let{interactive:t}=e,i={hover:!1,select:!1,state:e.state};if(!0!==t)return i;let{hover:s,select:a}=this._option.getChart().getSpec();return!1===s&&!1===s.enable||(i.hover=!0),!1===a&&!1===a.enable||(i.select=!0),i}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reRender=!0,(0,r.X)(t,e)||(i.reMake=!0),i}_getDataLabelType(e,t){let i=e.type;return"line"===i||"area"===i?null!=t?t:"line-data":"rect"===i?"rect":"arc"===i?"arc":"symbol"===i||"cell"===i?"symbol":e.setDataLabelType?e.setDataLabelType():""}_setTransformOfComponent(e,t){e.setAttributeTransform(({labelStyle:e,size:i,itemEncoder:s})=>{let a=i(),n=(0,d.yu)({type:"palette",key:"secondaryFontColor"},this.getColorScheme());return{dataLabels:(0,l.IX)(t).map((t,i)=>{let r=e(i),l=[],d=t.getGraphics();if(d)return r.data&&r.data.length?r.data.forEach((e,t)=>{if(d[t]){let t=s(e,{labelIndex:i});(0,o.Z)(t.fill)&&(t.fill=n),(0,o.Z)(t.data)&&(t.data=e),l.push(t)}}):d.forEach(e=>{let{data:t,diffState:a}=e.context;a!==c.O.exit&&t.forEach((e,{})=>{let t=s(e,{labelIndex:i});(0,o.Z)(t.fill)&&(t.fill=n),(0,o.Z)(t.data)&&(t.data=e),l.push(t)})}),(0,h.Z)(r.overlap)&&(0,o.Z)(r.overlap.size)&&(r.overlap.size=Object.assign({},a)),Object.assign(Object.assign({smartInvert:!1,baseMarkGroupName:t.getProductId(),getBaseMarks:()=>d},r),{type:this._getDataLabelType(t,r.type),data:l})}),size:a}})}getVRenderComponents(){let e=[];return this.getMarks().forEach(t=>{let i=t.getComponent();i&&e.push(i)}),e}clear(){super.clear(),this.getMarks().forEach(e=>{e&&e.clearComponent()})}}u.type=a.L.label},925347:function(e,t,i){i.d(t,{U:()=>k});var s=i(72754),a=i(241854),n=i(75464),r=i(459338),l=i(663787),o=i(522269),h=i(984535),c=i(134989),d=i(107389),u=i(989379),p=i(777678),_=i(835151),g=i(896294),m=i(933248),v=i(150954),y=i(279090),f=i(617114),x=i(775527);class b extends x.r{_initTheme(e,t){return{spec:e,theme:this._theme}}}var S=i(815896);class A extends u.d{constructor(e,t){super(e,t),this.type=s.L.label,this.name=s.L.label,this.specKey="label",this.transformerConstructor=b,this.layoutZIndex=l.Ai.Label,this._layoutRule=e.labelLayout||"series"}static getSpecInfo(e,t){let i=[];return((null==t?void 0:t.region)||[]).forEach((a,n)=>{(a.seriesIndexes||[]).some(e=>{let{markLabelSpec:i={}}=t.series[e];return Object.values(i).some(e=>Array.isArray(e)&&e.some(e=>e.visible))})&&i.push({spec:e,type:s.L.label,specInfoPath:["component",this.specKey,n],regionIndexes:[n]})}),i}init(e){super.init(e),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(e){super.reInit(e),this._labelInfoMap&&(this._labelInfoMap.forEach(e=>{e.forEach(({labelMark:e})=>{e.release()})}),this._labelInfoMap.clear()),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}initEvent(){this.event.on(n.$7.dataZoomChange,()=>{this._labelComponentMap.forEach((e,t)=>{let i=t.getComponent();i&&i.disableAnimation()}),this.event.on(n.ZK.AFTER_MARK_RENDER_END,e)});let e=()=>{this._labelComponentMap.forEach((e,t)=>{let i=t.getComponent();i&&i.enableAnimation()}),this.event.off(n.ZK.AFTER_MARK_RENDER_END,e)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),(0,h.xV)(this._regions,e=>{let{markLabelSpec:t={}}=e.getSpecInfo(),i=Object.keys(t),s=e.getRegion();this._labelInfoMap.get(s)||this._labelInfoMap.set(s,[]);for(let a=0;a<i.length;a++){let n=i[a],r=e.getMarkInName(n);r&&t[n].forEach((t,i)=>{var a,l,o;if(t.visible){let h=this._labelInfoMap.get(s),c=this._createMark({type:"label",name:`${null!=(a=e.userId)?a:e.id}-${n}-label-${i}`},{attributeContext:e.getMarkAttributeContext()});t.showRelatedMarkTooltip&&(null==(o=null==(l=e.tooltipHelper)?void 0:l.activeTriggerSet.mark)||o.add(c)),c.setTarget(r),h.push({labelMark:c,baseMark:r,series:e,labelSpec:t})}})}})}_initLabelComponent(){let e={};this._labelComponentMap.forEach((t,i)=>{e[i.name]=i}),this._labelInfoMap.forEach((t,i)=>{if("region"===this._layoutRule){let s=!1,a=`${i.getGroupMark().name}-label-component`,n=e[a];n||(s=!0,n=this._createMark({type:"component",name:a},{componentType:"label"},{support3d:this._spec.support3d})),n&&(s&&(n.setSkipBeforeLayouted(!0),this._marks.addMark(n),t.forEach(e=>{var t;null==(t=e.baseMark.getData())||t.addRelatedMark(n)})),t[0]&&(0,p.Z)(t[0].labelSpec.zIndex)&&n.setMarkConfig({zIndex:t[0].labelSpec.zIndex}),this._labelComponentMap.set(n,()=>this._labelInfoMap.get(i)),e[a]=null)}else t.forEach((t,s)=>{var a;let n=!1,r=`${t.labelMark.name}-component`,l=e[r];l||(n=!0,l=this._createMark({type:"component",name:r},{componentType:"label",noSeparateStyle:!0},{support3d:t.baseMark.getMarkConfig().support3d})),l&&((0,p.Z)(t.labelSpec.zIndex)&&l.setMarkConfig({zIndex:t.labelSpec.zIndex}),n&&(l.setSkipBeforeLayouted(!0),this._marks.addMark(l),null==(a=t.baseMark.getData())||a.addRelatedMark(l)),this._labelComponentMap.set(l,()=>this._labelInfoMap.get(i)[s]),e[r]=null)})}),Object.keys(e).forEach(t=>{let i=e[t];i&&(i.release(),this._labelComponentMap.delete(i))})}_initTextMarkStyle(){this._labelComponentMap.forEach((e,t)=>{(0,_.IX)(e()).forEach(({labelMark:e})=>{e.setComponent(t)})}),this._labelInfoMap.forEach(e=>{e.forEach(e=>{var t,i;let{labelMark:s,labelSpec:a,series:n}=e;if(this.initMarkStyleWithSpec(s,a),(0,g.Z)(null==a?void 0:a.getStyleHandler)){let e=a.getStyleHandler(n);null==e||e.call(n,s,a)}(null==(i=null==(t=s.stateStyle)?void 0:t.normal)?void 0:i.lineWidth)&&s.setAttribute("stroke",n.getColorAttribute(),"normal",r.W.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((e,t)=>{let i=e();(0,m.Z)(i)?this._updateMultiLabelAttribute(i,t):this._updateSingleLabelAttribute(i,t)})}_updateMultiLabelAttribute(e,t){this._updateLabelComponentAttribute(t,e.map(({baseMark:e})=>e),e)}_updateSingleLabelAttribute(e,t){let{baseMark:i}=e;this._updateLabelComponentAttribute(t,i,[e])}_updateLabelComponentAttribute(e,t,i){let s=this._option.getComponentsByType("totalLabel");e.setMarkConfig({interactive:!1}),e.setSimpleStyle({labelStyle:e=>{var t,n;let r=i[e],{labelSpec:l,labelMark:h,series:d}=r,u=h.getRule(),p=this._interactiveConfig(l),_=null!=(n=null==(t=this._spec)?void 0:t.centerOffset)?n:0,g=(0,o.H)({textStyle:Object.assign({pickable:!0===l.interactive},l.style),overlap:{avoidMarks:s.map(e=>e.getMarks()[0].getProductId())}},(0,c.vz)(u,r),Object.assign(Object.assign(Object.assign({},(0,v.Z)(l,["position","style","state","type","stackDataFilterType","getStyleHandler"])),p),{centerOffset:_}),l.stackDataFilterType?{dataFilter:"min"===l.stackDataFilterType?e=>e.filter(e=>e.data[a.cL]):e=>e.filter(e=>e.data[a.wo])}:{});return d&&d.parseLabelStyle&&(g=d.parseLabelStyle(g,l,h)),"line"!==u&&"area"!==u||(g.type=u),g},size:()=>{var e;return Object.assign({padding:null==(e=i[0].labelSpec.overlap)?void 0:e.padding},i[0].series.getRegion().getLayoutRect())},itemEncoder:(e,{labelIndex:t})=>i[t]&&!i[t].labelMark.skipEncode?(0,c.Sv)(i[t],e,i[t].labelSpec.formatMethod,i[t].labelSpec.formatter):{data:e}}),this._setTransformOfComponent(e,t)}compileMarks(){this.getMarks().forEach(e=>{let t,i=this._labelComponentMap.get(e)();t=(0,m.Z)(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),e.compile({group:t})})}getLabelInfoByTextGraphic(e){let t,i=null==e?void 0:e.parent,s=null==i?void 0:i.parent;if(s){let e=s.getChildren().indexOf(i);this._labelComponentMap.forEach((i,a)=>{a.getComponent()===s&&(t=(0,_.IX)(i())[e])})}return t}}A.type=s.L.label,A.specKey="label",A.transformerConstructor=b;let k=()=>{y.F.registerGraphicComponent(A.type,e=>new S.w(e)),(0,f.a)(),(0,d.k)(),y.F.registerComponent(A.type,A,!0,1/0)}},228869:function(e,t,i){i.d(t,{v$:()=>m});var s=i(617114),a=i(72754),n=i(241854),r=i(663787),l=i(459338),o=i(522269),h=i(134989),c=i(989379),d=i(279090),u=i(107389),p=i(815896),_=i(324579);class g extends c.d{constructor(){super(...arguments),this.type=a.L.totalLabel,this.name=a.L.totalLabel,this.specKey="totalLabel",this.layoutZIndex=r.Ai.Label}static getSpecInfo(e,t){var i;let s=[];return null==(i=null==t?void 0:t.region)||i.forEach((e,i)=>{var n;null==(n=e.seriesIndexes)||n.forEach(e=>{let{spec:n}=t.series[e],r=n[this.specKey];(null==r?void 0:r.visible)&&s.push({spec:r,type:a.L.totalLabel,specPath:["series",e,this.specKey],specInfoPath:["component",this.specKey,e],regionIndexes:[i],seriesIndexes:[e]})})}),s}init(e){super.init(e),this._initTextMark(),this._initLabelComponent()}reInit(e){super.reInit(e),this._initTextMark()}_initTextMark(){var e;let t=this._getSeries();if(null==(e=t.getSpec().totalLabel)?void 0:e.visible){let e=t.getSeriesMark();if(e){let t=this._createMark({type:"label",name:`${e.name}-total-label`});this._baseMark=e,this._textMark=t,this._initTextMarkStyle()}}}_initTextMarkStyle(){var e;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:e=>e[n.Gq]},"normal",l.W.Default);let t=this._getSeries();null==(e=t.initTotalLabelMarkStyle)||e.call(t,this._textMark)}_initLabelComponent(){var e;let t=this._getSeries(),i=this._createMark({type:"component",name:`${null!=(e=t.name)?e:t.type}-total-label-component`},{componentType:"label"},{support3d:this._spec.support3d});i&&(this._marks.addMark(i),t.getData().addRelatedMark(i))}updateLayoutAttribute(){super.updateLayoutAttribute();let e=this._getSeries();this._marks.forEach((t,i)=>{t.setMarkConfig({interactive:!1}),t.setSimpleStyle({labelStyle:()=>{var t,i;if(this._baseMark){let{offset:s,animation:a,overlap:r,position:l="top"}=this._spec,h=this._interactiveConfig(this._spec);return(0,o.H)({textStyle:{pickable:!0===this._spec.interactive},position:function(e,t,i="top"){var s,a;let n,{direction:r}=e,l=+("horizontal"===r?null!=(s=e.getXAxisHelper())&&!!s.isInverse():null!=(a=e.getYAxisHelper())&&!!a.isInverse());switch(t){case"rect":case"symbol":n=("bottom"===i?{vertical:["bottom","top"],horizontal:["left","right"]}:{vertical:["top","bottom"],horizontal:["right","left"]})[r][l];break;default:n="top"}return n}(e,this._baseMark.type,l),x:0,y:0},null!=(i=null==(t=e.getTotalLabelComponentStyle)?void 0:t.call(e,{baseMark:this._baseMark,labelMark:this._textMark}))?i:{},Object.assign({offset:s,animation:a,overlap:r,dataFilter:e=>e.filter(e=>"bottom"===l?e.data[n.cL]:e.data[n.wo])},h))}},size:()=>{var e;return Object.assign({padding:null==(e=this._spec.overlap)?void 0:e.padding},this._regions[0].getLayoutRect())},itemEncoder:t=>(0,h.Sv)({baseMark:this._baseMark,labelMark:this._textMark,series:e,labelSpec:e.getSpec().totalLabel},t,this._spec.formatMethod)}),this._setTransformOfComponent(t,this._baseMark)})}compileMarks(){this.getMarks().forEach(e=>{let t=this._regions[0].getGroupMark().getProduct();e.compile({group:t,context:{model:this}})})}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}g.type=a.L.totalLabel,g.builtInTheme={totalLabel:_.D},g.specKey="totalLabel";let m=()=>{d.F.registerGraphicComponent(g.type,e=>new p.w(e)),(0,s.a)(),(0,u.k)(),d.F.registerComponent(g.type,g,!0)}},134989:function(e,t,i){i.d(t,{Sv:()=>p,lk:()=>y,vz:()=>u});var s=i(75387),a=i(521107),n=i(896294),r=i(557999),l=i(342279),o=i(944111),h=i(864985),c=i(241854);let d={rect:m,symbol:g,arc:v,point:function(e){let{labelSpec:t}=e;return{position:"center",overlap:!1!==t.overlap&&{clampForce:!1,avoidBaseMark:!1}}},"line-data":function(e){let t=g(e);return(0,r.Z)(t.overlap)||(t.overlap.avoidBaseMark=!1,t.overlap.clampForce=!1),t},stackLabel:y,line:f,area:f,rect3d:m,arc3d:v,treemap:function(e){return{customLayoutFunc:(e,t)=>t,overlap:!1}},venn:function(e){return{customLayoutFunc:(e,t)=>t,smartInvert:!0}}};function u(e,t){var i;let{labelSpec:n}=t;n.overlap&&!(0,a.Z)(n.overlap)&&(n.overlap={});let r=null!=(i=d[e])?i:d.point;return t.series.type===s.A.sankey?function(e){var t,i,s,a;let{series:n,labelSpec:r={}}=e,o=null!=(t=_(r.position))?t:"outside",h=n.direction,c=o;return(0,l.Z)(o)&&("vertical"===h?c="inside-start"===o?e=>"inside-left":"inside-middle"===o?e=>"center":"inside-end"===o?e=>"inside-right":e=>"bottom":"inside-start"===o?c=e=>"inside-left":"inside-middle"===o?c=e=>"center":"inside-end"===o?c=e=>"inside-right":"outside"===o&&(c=e=>"right")),{position:c,overlap:!1!==r.overlap&&(!(0,l.Z)(o)||!o.includes("inside"))&&{strategy:null!=(s=null==(i=r.overlap)?void 0:i.strategy)?s:(a=n,[{type:"position",position:e=>"horizontal"===a.direction?["right","left"]:["bottom","top"]}])},smartInvert:!1,offset:0,syncState:!0}}(t):r(t)}function p(e,t,i,a){var n,r;let{labelMark:l,series:o}=e,c=o.getMeasureField()[0],d=l.getAttributesOfState(t);if("text"in d||(d.text=null!=(n=d.text)?n:t[c]),"textType"in d||(d.textType=null!=(r=e.labelSpec.textType)?r:"text"),d.data=t,o.type!==s.A.sankey){let{formatFunc:e,args:s}=(0,h.HJ)(i,a,d.text,t);e&&(d._originText=d.text,d.text=e(...s,{series:o}))}return d}function _(e){return(0,n.Z)(e)?t=>e(t.data):e}function g(e){var t,i,s;let a,{series:n,labelSpec:r}=e,l="horizontal"===n.direction?"right":"top",o=null!=(t=_(r.position))?t:l;return a=!1!==r.overlap&&{strategy:null!=(s=null==(i=r.overlap)?void 0:i.strategy)?s:[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],avoidBaseMark:"center"!==o},{position:o,overlap:a}}function m(e){var t,i,s,a,n,r,o;let{series:h,labelSpec:c={}}=e,d=null!=(t=_(c.position))?t:"outside",u=null!=(i=h.direction)?i:"vertical",p="horizontal"===h.direction?null==(s=h.getXAxisHelper())?void 0:s.isInverse():null==(a=h.getYAxisHelper())?void 0:a.isInverse(),g,m=d;m=e=>{var t;let{data:i}=e,s=null!=(t="function"==typeof c.position?c.position(i):c.position)?t:"outside";if("outside"===s){let e=h.getMeasureField()[0];return({vertical:["top","bottom"],horizontal:["right","left"]})[u][(null==i?void 0:i[e])>=0&&p||(null==i?void 0:i[e])<0&&!p?1:0]}return s},g=!1!==c.overlap&&{strategy:null!=(r=null==(n=c.overlap)?void 0:n.strategy)?r:(o=h,[{type:"position",position:e=>{var t,i;let{data:s}=e,a=o.getMeasureField()[0];return("horizontal"===o.direction?null==(t=o.getXAxisHelper())?void 0:t.isInverse():null==(i=o.getYAxisHelper())?void 0:i.isInverse())?(null==s?void 0:s[a])>=0?"horizontal"===o.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===o.direction?["right","inside-right"]:["top","inside-top"]:(null==s?void 0:s[a])>=0?"horizontal"===o.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===o.direction?["left","inside-left"]:["bottom","inside-bottom"]}}])};let v=!1;return(0,l.Z)(d)&&d.includes("inside")&&(v=!0),{position:m,overlap:g,smartInvert:v}}function v(e){var t;let i,{labelSpec:s}=e,a=null!=(t=_(s.position))?t:"outside";return i=s.smartInvert?s.smartInvert:(0,l.Z)(a)&&a.includes("inside"),{position:a,smartInvert:i}}function y(e,t,i){let s=e.series,a=e.labelSpec||{},n=s.getTotalData();return{customLayoutFunc:n=>n.map(n=>{let r=a.position||"withChange",l=a.offset||0,h=t?t(n.data):n.data,c=p(e,h,a.formatMethod);return c.x="horizontal"===s.direction?"middle"===r?.5*(s.totalPositionX(h,"end")+s.totalPositionY(h,"start")):"max"===r?s.totalPositionX(h,h.end>=h.start?"end":"start")+l:"min"===r?s.totalPositionX(h,h.end>=h.start?"start":"end")-l:s.totalPositionX(h,"end")+(h.end>=h.start?l:-l):s.totalPositionX(h,"index",.5),c.y="horizontal"===s.direction?s.totalPositionY(h,"index",.5):"middle"===r?.5*(s.totalPositionY(h,"end")+s.totalPositionY(h,"start")):"max"===r?s.totalPositionY(h,h.end>=h.start?"end":"start")-l:"min"===r?s.totalPositionY(h,h.end>=h.start?"start":"end")+l:s.totalPositionY(h,"end")+(h.end>=h.start?-l:l),"horizontal"===s.direction?c.textAlign="middle"===r?"center":"withChange"===r&&h.end-h.start>=0||"max"===r?"left":"right":c.textBaseline="middle"===r?r:"withChange"===r&&h.end-h.start>=0||"max"===r?"bottom":"top",null==i||i(n,h,c),(0,o.r)(Object.assign(Object.assign({},c),{id:n.id}))}),dataFilter:e=>{let t=[];return n.forEach(i=>{let a=e.find(e=>{var t;return i.index===(null==(t=e.data)?void 0:t[s.getDimensionField()[0]])});a&&(a.data=i,t.push(a))}),t},overlap:{strategy:[]}}}function f(e){var t,i,s,a;let{labelSpec:n,series:r}=e,l=null==(s=null==(i=null==(t=r.getViewDataStatistics)?void 0:t.call(r).latestData)?void 0:i[r.getSeriesField()])?void 0:s.values,o=l?l.map((e,t)=>({[r.getSeriesField()]:e,index:t})):[{index:0,[c.lb]:r.getSeriesKeys()[0]}];return{position:null!=(a=n.position)?a:"end",data:o,overlap:{avoidBaseMark:!1,clampForce:!1}}}},149670:function(e,t,i){i.d(t,{q:()=>g});var s=i(777678),a=i(835151),n=i(971800),r=i(576225),l=i(50026),o=i(809948),h=i(663787),c=i(75464),d=i(984535),u=i(505441),p=i(522269),_=i(687404);class g extends o.H{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=h.Ai.Legend,this.layoutLevel=h.pM.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{(0,d.xV)(this._regions,e=>{var t;null==(t=e.getViewData())||t.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),(0,d.xV)(this._regions,e=>{e.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._orient=(0,u.vk)(this._spec.orient)?this._spec.orient:"left",this._position=null!=(e=this._spec.position)?e:"middle",this._visible=!1!==this._spec.visible;let{regionId:t,regionIndex:i,seriesId:n,seriesIndex:r}=this._spec;(0,s.Z)(n)&&(this._seriesUserId=(0,a.IX)(n)),(0,s.Z)(t)&&(this._regionUserId=(0,a.IX)(t)),(0,s.Z)(r)&&(this._seriesIndex=(0,a.IX)(r)),(0,s.Z)(i)&&(this._regionUserIndex=(0,a.IX)(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reRender=!0,(null==e?void 0:e.orient)!==(null==t?void 0:t.orient)?i.reMake=!0:(0,n.X)(t,e)||(i.reCompile=!0),i}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData(),this._forceLayout()}initData(){let e=this._initLegendData();e.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new _.O(this._option,e),this._initSelectedData(),(0,d.xV)(this._regions,e=>{e.event.on(c.$7.rawDataUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===e.id},()=>{this._legendData.getDataView().reRunAllTransform({skipEqual:!0})})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(e){var t,i,s;let a=this._selectedData;(0,r.Z)(e)||JSON.stringify(a)===JSON.stringify(e)||((0,d.xV)(this._regions,t=>{t.legendSelectedFilter&&(e=t.legendSelectedFilter(this,e))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...e],null==(i=(t=this.effect).onSelectedDataChange)||i.call(t),this.event.emit(c.$7.legendSelectedDataChange,{model:this}),null==(s=this._legendComponent)||s.setSelected(this._selectedData))}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),this._legendComponent){let{x:t,y:i}=e;(0,l.Z)(t*i)&&this._legendComponent.setAttributes({x:t,y:i})}}getBoundsInRect(e,t){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};let i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},s=this._getLegendAttributes(e);if(s.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)(0,n.X)(s,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},s,{defaultSelected:this._selectedData}));else{let e=new(this._getLegendConstructor())((0,p.H)({},s,{defaultSelected:this._selectedData}));e.name="legend",this._legendComponent=e,this.getContainer().add(e),this._option.disableTriggerEvent||this._initEvent(),e.on("*",(e,t)=>this._delegateEvent(this._legendComponent,e,t))}this._cacheAttrs=s;let a=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,r=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){let e="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=this._position,{width:s,height:n}=t,l=0,o=0;"horizontal"===e?"middle"===i?l=(s-a)/2:"end"===i&&(l=s-a):"middle"===i?o=(n-r)/2:"end"===i&&(o=n-r),this._legendComponent.setAttributes({dx:l,dy:o})}return i.x2=i.x1+a,i.y2=i.y1+r,i}onDataUpdate(){var e,t;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){let e=this._getLegendAttributes(this.getLayoutRect());(0,n.X)(e,this._cacheAttrs)||this._legendComponent.setAttributes((0,p.H)({},e,{defaultSelected:this._selectedData}))}null==(t=(e=this.effect).onSelectedDataChange)||t.call(e),this.event.emit(c.$7.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}g.specKey="legends"},743370:function(e,t,i){i.d(t,{A:()=>M});var s=i(576225),a=i(7234),n=i(53210),r=i(921763),l=i(102094),o=i(72754),h=i(924706),c=i(984535),d=i(462940),u=i(841126),p=i(972676),_=i(627096),g=i(948984),m=i(777678),v=i(522269),y=i(875244),f=i(785168),x=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};let b={color:_.e,size:g.D};var S=i(149670),A=i(75464),k=i(279090),I=i(586673),C=i(864985),E=i(833632),T=i(128732);let L=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],R=[2,10];class D extends S.q{static getSpecInfo(e){let t=(0,C.ts)(e,this.specKey,this.type,e=>{var t;return"color"===(t=e.type)||"size"===t});return t&&t.forEach(e=>{e.type="color"===e.spec.type?o.L.colorLegend:o.L.sizeLegend}),t}constructor(e,t){super(e,t),this.type=o.L.colorLegend,this.name=o.L.colorLegend;let i="color"===this._spec.type?o.L.colorLegend:o.L.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(e){super.init(e),(0,c.xV)(this._regions,e=>{e.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:e.isHierarchyData,customFilter:this._spec.customFilter},level:I.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){let e=this._option.globalScale,t=this._spec.scale;return t||(t=this._legendType),e.getScale(t)}_initLegendData(){(0,h.U)(this._option.dataSet,"continuousLegendFilter",p.R),(0,h.U)(this._option.dataSet,"continuousLegendDataMake",p.o);let e=new l.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"continuousLegendDataMake",options:{series:()=>(0,c.gU)(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),e}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(e){var t,i,a,n;if((null==(t=e.title)?void 0:t.visible)&&(0,s.Z)(e.title.text)&&(0,s.Z)(null==(i=e.title.style)?void 0:i.text)){let t=this._field;if(t){let i=null==(n=null==(a=this._regions)?void 0:a[0])?void 0:n.getSeries()[0];if(!i)return;return void(e.title.text=(0,d.tW)(i.getRawData(),t))}let i=this._spec.scale;i||(i=this._legendType);let s=this._option.globalScale.getScaleSpec(i);if(!(0,u.S5)(null==s?void 0:s.domain))return;let r=s.domain[0];if(0===r.fields.length)return;e.title.text=(0,d.tW)(this._option.dataSet.getDataView(r.dataId),r.fields[0])}}_getLegendAttributes(e){var t,i;let s="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",n="horizontal"===s?"bottom":this.layoutOrient,r=[],l=this._getScaleInGlobal();l&&"linear"===l.type&&(r=l.range()),(0,a.Z)(r)&&(r="color"===this._legendType?L:R);let o=null!=(t=this._legendData.getLatestData()[0])?t:0,h=null!=(i=this._legendData.getLatestData()[1])?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(o=Math.min(0,this._legendData.getLatestData()[0]),h=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));let c=Object.assign({layout:s,align:n,zIndex:this.layoutZIndex,min:o,max:h,value:this._spec.defaultSelected,["color"===this._legendType?"colors":"sizeRange"]:r},function(e){let t=(0,v.H)({},e),{title:i={},handler:s={},rail:n={},track:r={},startText:l,endText:o,handlerText:h,sizeBackground:c,background:d={},type:u,id:p,visible:_,orient:g,position:b,data:S,defaultSelected:A,field:k,filter:I,regionId:C,regionIndex:E,seriesIndex:T,seriesId:L,padding:R}=t,D=x(t,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible?D.title=(0,f.q)(i):D.title={visible:!1},D.showHandler=!1!==s.visible,(0,a.Z)(s.style)||(D.handlerStyle=(0,y.h_)(s.style)),(0,m.Z)(n.width)&&(D.railWidth=n.width),(0,m.Z)(n.height)&&(D.railHeight=n.height),(0,a.Z)(n.style)||(D.railStyle=(0,y.h_)(n.style)),(0,a.Z)(r.style)||(D.trackStyle=(0,y.h_)(r.style)),D.startText=(0,y.ro)(l),D.endText=(0,y.ro)(o),D.handlerText=(0,y.ro)(h),(0,a.Z)(c)||(D.sizeBackground=(0,y.h_)(c)),d.visible&&!(0,a.Z)(d.style)&&((0,v.H)(D,d.style),(0,m.Z)(d.padding)&&(D.padding=d.padding)),D}(this._spec));return this._addDefaultTitleText(c),c}_getLegendConstructor(){return b[this._legendType]}_initEvent(){if(this._legendComponent){let e=!1!==this._spec.filter;this._legendComponent.addEventListener("change",(0,n.Z)(t=>{let i=(0,r.Z)(t,"detail.value");e&&this.setSelectedData(i),this.event.emit(A.$7.legendFilter,{model:this,value:i,event:t})},30))}}}D.specKey="legends",D.builtInTheme={colorLegend:E.K,sizeLegend:T.D},D.type=o.L.continuousLegend;let M=()=>{k.F.registerComponent(D.type,D)}},992144:function(e,t,i){i.d(t,{T:()=>R});var s=i(576225),a=i(896294),n=i(921763),r=i(50026),l=i(102094),o=i(72754),h=i(7234),c=i(777678),d=i(505441),u=i(522269),p=i(875244),_=i(785168),g=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i},m=i(924706),v=i(984535),y=i(462940),f=i(841126),x=i(290620),b=i(800063),S=i(8738),A=i(149670),k=i(75464),I=i(279090),C=i(586673),E=i(864985),T=i(866025);class L extends A.q{constructor(){super(...arguments),this.type=o.L.discreteLegend,this.name=o.L.discreteLegend}static getSpecInfo(e){return(0,E.ts)(e,this.specKey,this.type,e=>!e.type||"discrete"===e.type)}init(e){super.init(e),(0,v.xV)(this._regions,e=>{e.addViewDataFilter({type:"discreteLegendFilter",options:{series:e,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(e),data:()=>this.getLegendDefaultData(),customFilter:this._spec.customFilter},level:C.BV.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){(0,m.U)(this._option.dataSet,"discreteLegendFilter",S.t),(0,m.U)(this._option.dataSet,"discreteLegendDataMake",S.z);let e=new l.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"discreteLegendDataMake",options:{series:()=>{let e=[];return(0,v.xV)(this._regions,t=>{e.push(t)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),e},seriesField:e=>this._getSeriesLegendField(e)}}),e}_getSeriesLegendField(e){var t,i,a;let n=e.getSeriesField(),r=null!=(t=this._spec.scaleName)?t:this._spec.scale;if((0,s.Z)(r)||!e.getRawData())return n;let l=this._option.globalScale.getScaleSpec(r);if(!l)return n;if(this._spec.field)return this._spec.field;if(!(0,f.S5)(l.domain))return n;let o=l.domain.find(t=>t.dataId===e.getRawData().name);return o&&null!=(a=null==(i=o.fields)?void 0:i[0])?a:n}_initSelectedData(){let e=this.getLegendDefaultData();if(this._unselectedData){let t=[],i=[];e.forEach(e=>{this._unselectedData.includes(e)?i.push(e):t.push(e)}),this._selectedData=t,this._unselectedData=i}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=e}getLegendDefaultData(e){return(0,a.Z)(this._spec.data)?this._getLegendItems().map(e=>e.label):this._legendData.getLatestData().map(e?e=>e.originalKey:e=>e.key)}_addDefaultTitleText(e){var t,i,a,n;if((null==(t=e.title)?void 0:t.visible)&&(0,s.Z)(e.title.text)&&(0,s.Z)(null==(i=e.title.style)?void 0:i.text)){let t=null==(n=null==(a=this._regions)?void 0:a[0])?void 0:n.getSeries()[0];if(!t)return;e.title.text=(0,y.tW)(t.getRawData(),t.getSeriesField())}}_getLegendAttributes(e){let t=Object.assign(Object.assign({layout:"bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",items:this._getLegendItems(),zIndex:this.layoutZIndex},function(e,t){let{title:i={},item:s={},pager:a={},background:n={},type:r,id:l,visible:o,orient:m,position:v,data:y,filter:f,regionId:x,regionIndex:b,seriesIndex:S,seriesId:A,padding:k}=e,I=g(e,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible?I.title=(0,_.q)(i):I.title={visible:!1},(0,h.Z)(s.focusIconStyle)||(0,p.h_)(s.focusIconStyle),s.shape&&(s.shape=(0,p.ro)(s.shape)),s.label&&(s.label=(0,p.ro)(s.label)),s.value&&(s.value=(0,p.ro)(s.value)),s.background&&(s.background=(0,p.ro)(s.background)),(0,d.hU)(s.maxWidth)&&(s.maxWidth=Number(s.maxWidth.substring(0,s.maxWidth.length-1))*t.width/100),(0,d.hU)(s.width)&&(s.width=Number(s.width.substring(0,s.width.length-1))*t.width/100),(0,d.hU)(s.height)&&(s.height=Number(s.height.substring(0,s.height.length-1))*t.width/100),I.item=s,"scrollbar"===a.type?((0,h.Z)(a.railStyle)||(0,p.h_)(a.railStyle),(0,h.Z)(a.sliderStyle)||(0,p.h_)(a.sliderStyle)):((0,h.Z)(a.textStyle)||(0,p.h_)(a.textStyle),a.handler&&(0,p.ro)(a.handler)),I.pager=a,n.visible&&!(0,h.Z)(n.style)&&((0,u.H)(I,n.style),(0,c.Z)(n.padding)&&(I.padding=n.padding)),I}(this._spec,e)),{maxWidth:e.width,maxHeight:e.height});return this._addDefaultTitleText(t),this._addLegendItemFormatMethods(t),t}_getLegendConstructor(){return b.W}setSelectedData(e){e&&(this._unselectedData=this.getLegendDefaultData().filter(t=>!e.includes(t))),super.setSelectedData(e)}_initEvent(){if(this._legendComponent){let e=!1!==this._spec.filter;this._legendComponent.addEventListener(x.dk.legendItemClick,t=>{let i=(0,n.Z)(t,"detail.currentSelected");e&&this.setSelectedData(i),this.event.emit(k.$7.legendItemClick,{model:this,value:i,event:t})}),this._legendComponent.addEventListener(x.dk.legendItemHover,e=>{let t=(0,n.Z)(e,"detail");this.event.emit(k.$7.legendItemHover,{model:this,value:t,event:e})}),this._legendComponent.addEventListener(x.dk.legendItemUnHover,e=>{let t=(0,n.Z)(e,"detail");this.event.emit(k.$7.legendItemUnHover,{model:this,value:t,event:e})})}}_getLegendItems(){let e=(this._legendData.getLatestData()||[]).map(e=>{var t,i;let s=e.style("fillOpacity"),a=e.style("strokeOpacity"),n=e.style("opacity"),l=e.style("texture");return{label:e.key,shape:{symbolType:null!=(i=null!=(t=e.style("symbolType"))?t:e.shapeType)?i:"circle",fillOpacity:(0,r.Z)(s)?s:1,strokeOpacity:(0,r.Z)(a)?a:1,opacity:(0,r.Z)(n)?n:1,texturePadding:l?1:null,textureSize:l?4:null,texture:l,fill:e.style("fill"),stroke:e.style("stroke"),textureColor:e.style("textureColor"),innerBorder:e.style("innerBorder"),outerBorder:e.style("outerBorder"),lineDash:e.style("lineDash"),lineDashOffset:e.style("lineDashOffset"),lineWidth:e.style("lineWidth")}}});return(0,a.Z)(this._spec.data)?this._spec.data(e,this._option.globalScale.getScale("color"),this._option.globalScale):e}_addLegendItemFormatMethods(e){var t,i,s,a;let{formatMethod:n,formatter:r}=null!=(i=null==(t=this._spec.item)?void 0:t.label)?i:{},{formatMethod:l,formatter:o}=null!=(a=null==(s=this._spec.item)?void 0:s.value)?a:{},{formatFunc:h}=(0,E.HJ)(n,r);r&&!n&&h&&(e.item.label.formatMethod=(e,t)=>h(e,t,r));let{formatFunc:c}=(0,E.HJ)(l,o);o&&!l&&c&&(e.item.value.formatMethod=(e,t)=>c(o,e,t,r))}}L.specKey="legends",L.builtInTheme={discreteLegend:T.Q},L.type=o.L.discreteLegend;let R=()=>{I.F.registerComponent(L.type,L)}},785168:function(e,t,i){i.d(t,{q:()=>r});var s=i(7234),a=i(522269),n=i(875244);function r(e){var t,i;let r=Object.assign({},e);return(0,s.Z)(e.style)||(r.textStyle=(0,n.h_)(e.style)),(0,s.Z)(e.textStyle)||(0,a.H)(r.textStyle,(0,n.h_)(e.textStyle)),(null==(t=e.shape)?void 0:t.style)&&(0,n.h_)(r.shape.style),(null==(i=e.background)?void 0:i.style)&&(0,n.h_)(r.background.style),r}},899045:function(e,t,i){i.d(t,{B:()=>f});var s=i(586831),a=i(102094),n=i(342279),r=i(835151),l=i(777678),o=i(576225),h=i(971800),c=i(809948),d=i(505441),u=i(981920),p=i(984535),_=i(865966),g=i(864985),m=i(924706),v=i(560420),y=i(198690);class f extends c.H{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(e){return"cartesian"}static getSpecInfo(e){return(0,g.ts)(e,this.specKey,this.type,e=>!1!==e.visible&&this._getMarkerCoordinateType(e)===this.coordinateType)}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkerAttributeContext(){this._markAttributeContext={relativeSeries:this._relativeSeries,startRelativeSeries:this._startRelativeSeries,endRelativeSeries:this._endRelativeSeries,vchart:this._option.globalInstance}}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(e,t,i){return(0,n.Z)(t)&&(0,u.Kt)(t)?{field:i.getSpec()[({x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"})[e]],aggrType:t}:t}_processSpecByDims(e){let t=this._relativeSeries,i={};return e.forEach(e=>i[e.dim]=this._getFieldInfoFromSpec(e.dim,e.specValue,t)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(e){return Object.assign(Object.assign({coordinates:e.coordinates||e.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(e,t)=>this._getSeriesByIdOrIndex(e,t),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let e=[];(0,r.IX)(this._specifiedDataSeries).forEach(t=>{e=e.concat(t.getViewData().latestData)});let t=new s.q;return t.registerParser("array",_.Q),new a.V(t).parse(e,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var e,t,i;if(null==(e=this._spec.visible)||e){if(!this._markerComponent){let e=this._createMarkerComponent();e.name=null!=(t=this._spec.name)?t:this.type,e.id=null!=(i=this._spec.id)?i:`${this.type}-${this.id}`,this._markerComponent=e,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(e,t)=>{this._delegateEvent(this._markerComponent,e,t,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(e,t){var i,s;let a;return(a=null==(i=this._option.getSeriesInUserIdOrIndex((0,l.Z)(e)?[e]:[],[t]))?void 0:i[0])||(a=null!=(s=this._relativeSeries)?s:this._getFirstSeries()),a}_bindSeries(){let e=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(e.relativeSeriesId,e.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(e.startRelativeSeriesId,e.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(e.endRelativeSeriesId,e.endRelativeSeriesIndex),e.specifiedDataSeriesIndex&&"all"===e.specifiedDataSeriesIndex||e.specifiedDataSeriesId&&"all"===e.specifiedDataSeriesId?this._specifiedDataSeries=this._option.getAllSeries():(e.specifiedDataSeriesIndex||e.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(e.specifiedDataSeriesId,e.specifiedDataSeriesIndex))}initEvent(){"cartesian"!==this._relativeSeries.coordinate&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var e;if(this._firstSeries)return this._firstSeries;let t=(0,p.Sr)(this._regions);return t?(this._firstSeries=t,t):(null==(e=this._option)||e.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(e,t){(0,o.Z)(this._spec.offsetX)||(this._layoutOffsetX=(0,d.Mv)(this._spec.offsetX,t.width,t)),(0,o.Z)(this._spec.offsetY)||(this._layoutOffsetY=(0,d.Mv)(this._spec.offsetY,t.height,t)),super.onLayoutStart(e,t)}_compareSpec(e,t){let i=super._compareSpec(e,t);return(0,h.X)(t,e)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}_initCommonDataView(){let{options:e}=this._computeOptions(),t=this._getRelativeDataView();(0,m.U)(this._option.dataSet,"markerAggregation",v.Rp),(0,m.U)(this._option.dataSet,"markerFilter",y.S);let i=new a.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});i.parse([t],{type:"dataview"}),i.transform({type:"markerAggregation",options:e}),i.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),i.target.on("change",()=>{this._markerLayout()}),this._markerData=i}}},44130:function(e,t,i){i.d(t,{E:()=>o});var s=i(981920),a=i(875244),n=i(899045),r=i(663787),l=i(835151);class o extends n.B{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=r.Ai.MarkArea}static _getMarkerCoordinateType(e){let{doAngleProcess:t,doRadiusProcess:i,doRadAngProcess:a}=(0,s.QO)(e);return"polar"===e.coordinateType||t||i||a?"polar":"cartesian"}_createMarkerComponent(){var e,t,i,n,r,o,h,c;let d=(0,l.IX)(null!=(e=this._spec.label)?e:{}),u={zIndex:this.layoutZIndex,interactive:null==(t=this._spec.interactive)||t,hover:null==(i=this._spec.interactive)||i,select:null==(n=this._spec.interactive)||n,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:(0,s.V1)((0,a.h_)(null==(r=this._spec.area)?void 0:r.style),this._markerData,this._markAttributeContext),clipInRange:null!=(o=this._spec.clip)&&o,label:d.map(e=>(0,s.Ww)(e,this._markerData,this._markAttributeContext)),state:{area:(0,s.UL)(null==(h=this._spec.area)?void 0:h.state,this._markerData,this._markAttributeContext),label:d.map(e=>(0,s.UL)(e.state,this._markerData,this._markAttributeContext)),labelBackground:d.map(e=>{var t;return(0,s.UL)(null==(t=e.labelBackground)?void 0:t.state,this._markerData,this._markAttributeContext)})},animation:null!=(c=this._spec.animation)&&c,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(u)}_markerLayout(){var e;let t,i=this._spec,a=this._markerData,n=this._startRelativeSeries,r=this._endRelativeSeries,o=this._relativeSeries,h=this._computePointsAttr(),c=this._getRelativeDataView().latestData,d=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:c;if(i.clip||(0,l.IX)(i.label).some(e=>null==e?void 0:e.confine)){let{minX:e,maxX:i,minY:a,maxY:l}=(0,s.re)([n.getRegion(),r.getRegion(),o.getRegion()]);t={x:e,y:a,width:i-e,height:l-a}}if(this._markerComponent){let i=(0,l.IX)(null==(e=this._markerComponent.attribute)?void 0:e.label),s=(0,l.IX)(this._spec.label);this._markerComponent.setAttributes(Object.assign(Object.assign({},h),{label:i.map((e,t)=>{let i=s[t]||{};return Object.assign(Object.assign({},e),{text:i.formatMethod?i.formatMethod(d,c):null==e?void 0:e.text})}),limitRect:t,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}}_initDataView(){let e=this._spec,{doXProcess:t,doYProcess:i,doXYProcess:a,doAngleProcess:n,doRadiusProcess:r,doRadAngProcess:l,doCoordinatesProcess:o}=(0,s.QO)(e);if(!(t||i||a||n||r||l||o))return null;this._initCommonDataView()}}o.specKey="markArea"},919109:function(e,t,i){i.d(t,{k:()=>d});var s=i(72754),a=i(981920),n=i(248994),r=i(777678),l=i(279090),o=i(44130),h=i(922334);class c extends o.E{constructor(){super(...arguments),this.type=s.L.markArea,this.name=s.L.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(e){return new n.v(e)}_computePointsAttr(){var e,t;let i=this._spec,s=this._markerData,n=this._startRelativeSeries,l=this._endRelativeSeries,o=this._relativeSeries,{doXProcess:h,doYProcess:c,doXYProcess:d,doCoordinatesProcess:u}=(0,a.QO)(i),p=(0,r.Z)(i.positions),_=null!=(e=i.autoRange)&&e,g=null!=(t=i.includeFullBand)&&t,m=[];if(d){let[e,t]=(0,a.fS)(s,n,l,o,_,g);e&&e.length&&t&&t.length&&(m=[{x:e[0].x,y:t[0].y},e[0],{x:t[0].x,y:e[0].y},t[0]])}else if(h||c){let[e,t]=(0,a.fS)(s,n,l,o,_,g);e&&e.length&&t&&t.length&&(m=[...e,t[1],t[0]])}else u?m=(0,a.F9)(s,o,_,i.coordinatesOffset):p&&(m=(0,a.wB)(i.positions,o,i.regionRelative));return{points:m}}_computeOptions(){let e,t=this._spec,{doXProcess:i,doYProcess:s,doXYProcess:n,doCoordinatesProcess:r}=(0,a.QO)(t);return n?e=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"x",specValue:t.x1},{dim:"y",specValue:t.y1}])]:i?e=[this._processSpecByDims([{dim:"x",specValue:t.x}]),this._processSpecByDims([{dim:"x",specValue:t.x1}])]:s?e=[this._processSpecByDims([{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"y",specValue:t.y1}])]:r&&(e=this._processSpecCoo(t)),{options:e}}}c.type=s.L.markArea,c.coordinateType="cartesian",c.builtInTheme={markArea:h.b};let d=()=>{l.F.registerComponent(c.type,c),(0,n.J)()}},758137:function(e,t,i){i.d(t,{W:()=>u});var s=i(72754),a=i(981920),n=i(48963),r=i(248994),l=i(279090),o=i(44130),h=i(988539),c=i(922334);class d extends o.E{constructor(){super(...arguments),this.type=s.L.polarMarkArea,this.name=s.L.polarMarkArea,this.coordinateType="polar"}_newMarkAreaComponent(e){let{doRadiusProcess:t,doAngleProcess:i,doRadAngProcess:s}=(0,a.QO)(this._spec);return i||t||s?new n.E(e):new r.v(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,s=this._startRelativeSeries,n=this._endRelativeSeries,r=this._relativeSeries,{doAngleProcess:l,doRadiusProcess:o,doRadAngProcess:c,doCoordinatesProcess:d}=(0,a.QO)(t),u=null!=(e=t.autoRange)&&e,p={},_={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(l||o||c){let e=(0,a.Ed)(i,s,n,r,u);c?p={innerRadius:e[0][0].radius,outerRadius:e[1][0].radius,startAngle:e[0][0].angle,endAngle:e[1][0].angle,center:_}:l?p={innerRadius:0,outerRadius:Math.abs(e[0][0].radius),startAngle:e[0][1].angle,endAngle:e[1][1].angle,center:_}:o&&(p={innerRadius:e[0][0].radius,outerRadius:e[1][0].radius,startAngle:e[0][0].angle,endAngle:e[1][1].angle,center:_})}else d&&(p={points:(0,a.IW)(i,r,u).map(e=>(0,h.op)(_,e.radius,e.angle))});return p}_computeOptions(){let e,t=this._spec,{doAngleProcess:i,doRadiusProcess:s,doRadAngProcess:n,doCoordinatesProcess:r}=(0,a.QO)(t);return n?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:i?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:s?e=[this._processSpecByDims([{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"radius",specValue:t.radius1}])]:r&&(e=this._processSpecCoo(t)),{options:e}}}d.type=s.L.polarMarkArea,d.coordinateType="polar",d.builtInTheme={polarMarkArea:c.b};let u=()=>{l.F.registerComponent(d.type,d),(0,n.z)(),(0,r.J)()}},887494:function(e,t,i){i.d(t,{N:()=>p});var s=i(102094),a=i(560420),n=i(981920),r=i(924706),l=i(875244),o=i(899045),h=i(171522),c=i(663787),d=i(198690),u=i(835151);class p extends o.B{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=c.Ai.MarkLine}static _getMarkerCoordinateType(e){let{doAngleProcess:t,doRadiusProcess:i,doAngRadRad1Process:s,doRadAngAng1Process:a,doRadAngProcess:r}=(0,n.MP)(e);return"polar"===e.coordinateType||t||i||s||a||r?"polar":"cartesian"}_createMarkerComponent(){var e,t,i,s,a,r,o,h,c,d,p,_,g;let{startSymbol:m={},endSymbol:v={}}=this._spec,y=(0,u.IX)(null!=(e=this._spec.label)?e:{}),f={zIndex:this.layoutZIndex,interactive:null==(t=this._spec.interactive)||t,hover:null==(i=this._spec.interactive)||i,select:null==(s=this._spec.interactive)||s,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:(0,n.V1)((0,l.h_)(null==(a=this._spec.line)?void 0:a.style),this._markerData,this._markAttributeContext),clipInRange:null!=(r=this._spec.clip)&&r,label:y.map(e=>(0,n.Ww)(e,this._markerData,this._markAttributeContext)),state:{line:(0,n.UL)(null!=(h=null==(o=this._spec.line)?void 0:o.state)?h:{},this._markerData,this._markAttributeContext),lineStartSymbol:(0,n.UL)(null!=(d=null==(c=this._spec.startSymbol)?void 0:c.state)?d:{},this._markerData,this._markAttributeContext),lineEndSymbol:(0,n.UL)(null!=(_=null==(p=this._spec.endSymbol)?void 0:p.state)?_:{},this._markerData,this._markAttributeContext),label:y.map(e=>{var t;return(0,n.UL)(null!=(t=e.state)?t:{},this._markerData,this._markAttributeContext)}),labelBackground:y.map(e=>{var t,i;return(0,n.UL)(null!=(i=null==(t=e.labelBackground)?void 0:t.state)?i:{},this._markerData,this._markAttributeContext)})},animation:null!=(g=this._spec.animation)&&g,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return m.visible?f.startSymbol=Object.assign(Object.assign({},m),{visible:!0,style:(0,n.V1)((0,l.h_)(m.style),this._markerData,this._markAttributeContext)}):f.startSymbol={visible:!1},v.visible?f.endSymbol=Object.assign(Object.assign({},v),{visible:!0,style:(0,n.V1)((0,l.h_)(v.style),this._markerData,this._markAttributeContext)}):f.endSymbol={visible:!1},this._newMarkLineComponent(f)}_getUpdateMarkerAttrs(){var e,t;let i,s=this._spec,a=this._markerData,r=this._startRelativeSeries,l=this._endRelativeSeries,o=this._relativeSeries,h=this._computePointsAttr(),c=o.getViewData().latestData,d=a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData;if(s.clip||(0,u.IX)(s.label).some(e=>null==e?void 0:e.confine)){let{minX:e,maxX:t,minY:s,maxY:a}=(0,n.re)([r.getRegion(),l.getRegion(),o.getRegion()]);i={x:e,y:s,width:t-e,height:a-s}}let p=null!=(t=null==(e=this._markerComponent)?void 0:e.attribute)?t:{},_=(0,u.IX)(p.label),g=(0,u.IX)(this._spec.label),m=_.map((e,t)=>{let i=g[t]||{};return Object.assign(Object.assign({},e),{text:i.formatMethod?i.formatMethod(d,c):null==e?void 0:e.text})});return Object.assign(Object.assign({},h),{label:m,limitRect:i,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var e;let t=this._getUpdateMarkerAttrs();null==(e=this._markerComponent)||e.setAttributes(t)}_initDataView(){let e=this._spec,t="coordinates"in e,{doXProcess:i,doYProcess:l,doXYY1Process:o,doYXX1Process:c,doXYProcess:u,doAngleProcess:p,doRadiusProcess:_,doAngRadRad1Process:g,doRadAngAng1Process:m,doRadAngProcess:v}=(0,n.MP)(e);if(this._markerData=this._getRelativeDataView(),!(i||l||o||c||u||p||_||g||m||v||t))return;(0,r.U)(this._option.dataSet,"markerAggregation",a.Rp),(0,r.U)(this._option.dataSet,"markerRegression",h.h),(0,r.U)(this._option.dataSet,"markerFilter",d.S);let{options:y,needAggr:f,needRegr:x,processData:b}=this._computeOptions(),S=new s.V(this._option.dataSet);S.parse([b],{type:"dataview"}),f&&S.transform({type:"markerAggregation",options:y}),x&&S.transform({type:"markerRegression",options:y}),S.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),S.target.on("change",()=>{this._markerLayout()}),this._markerData=S}}p.specKey="markLine"},85241:function(e,t,i){i.d(t,{E:()=>g});var s=i(102094),a=i(72754),n=i(981920),r=i(436747),l=i(777678),o=i(835151),h=i(50026),c=i(279090),d=i(505441),u=i(887494),p=i(668866);class _ extends u.N{constructor(){super(...arguments),this.type=a.L.markLine,this.name=a.L.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(e){return new r.I(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,s=this._startRelativeSeries,a=this._endRelativeSeries,r=this._relativeSeries,o=(0,l.Z)(t.coordinates),h=(0,l.Z)(t.process),c=h&&(0,l.Z)(t.process.x),d=h&&(0,l.Z)(t.process.y),u=(0,l.Z)(t.positions),p=null!=(e=t.autoRange)&&e,{doXProcess:_,doYProcess:g,doXYY1Process:m,doYXX1Process:v,doXYProcess:y,doCoordinatesProcess:f}=(0,n.MP)(t),x=[];if(_||m||g||v||y||o&&c||o&&d){let e=(0,n.fS)(i,s,a,r,p);x=1===e.length?e[0]:e.map(e=>e[0])}else f?x=(0,n.F9)(i,r,p,t.coordinatesOffset):u&&(x=(0,n.wB)(t.positions,r,t.regionRelative));return{points:x}}_markerLayout(){var e,t,i,s,a;let n=this._getUpdateMarkerAttrs();if("type-step"===this._spec.type){let a,r,c=this._startRelativeSeries,u=this._endRelativeSeries,{multiSegment:p,mainSegmentIndex:_}=this._spec.line||{},{connectDirection:g,expandDistance:m=0}=this._spec;if((0,d.hU)(m)){let e=c.getRegion(),t=e.getLayoutStartPoint(),i=u.getRegion(),s=i.getLayoutStartPoint();if("bottom"===g||"top"===g){let n=Math.abs(Math.min(t.y,s.y)-Math.max(t.y+e.getLayoutRect().height,s.y+i.getLayoutRect().height));a=Number(m.substring(0,m.length-1))*n/100}else{let n=Math.abs(Math.min(t.x,s.x)-Math.max(t.x+e.getLayoutRect().width,s.x+i.getLayoutRect().width));a=Number(m.substring(0,m.length-1))*n/100}}else a=m;let{points:v,limitRect:y}=n;if(!v||v.length<2)return void(null==(e=this._markerComponent)||e.setAttributes(n));let f=function(e,t,i,s=0){let a=[],n=e.y-t.y,r=e.x-t.x;switch(i){case"top":a.push(e),a.push({x:e.x,y:n>0?e.y-s-Math.abs(n):e.y-s}),a.push({x:t.x,y:n>0?t.y-s:t.y-s-Math.abs(n)}),a.push(t);break;case"bottom":a.push(e),a.push({x:e.x,y:n<0?e.y+s+Math.abs(n):e.y+s}),a.push({x:t.x,y:n<0?t.y+s:t.y+s+Math.abs(n)}),a.push(t);break;case"left":a.push(e),a.push({x:r>0?e.x-s-Math.abs(r):e.x-s,y:e.y}),a.push({x:r>0?t.x-s:t.x-s-Math.abs(r),y:t.y}),a.push(t);break;case"right":a.push(e),a.push({x:r>0?e.x+s:e.x+s+Math.abs(r),y:e.y}),a.push({x:r>0?t.x+s+Math.abs(r):t.x+s,y:t.y}),a.push(t)}return a}(v[0],v[1],g,a);r=p&&(0,l.Z)(_)?{position:"middle",autoRotate:!1}:Object.assign({position:"start",autoRotate:!1},function(e,t,i,s=0){let a=e.y-t.y,n=e.x-t.x;return"bottom"===i?{dx:n>0?-n/2:Math.abs(n/2),dy:a>0?s:Math.abs(a)+s}:"top"===i?{dx:n>0?-Math.abs(n/2):+Math.abs(n/2),dy:a>0?-(Math.abs(a)+s):-s}:"left"===i?{dx:n>0?-n-s:-s,dy:a>0?-a/2:Math.abs(a/2)}:"right"===i?{dx:n>0?s:Math.abs(n)+s,dy:a>0?-a/2:Math.abs(a/2)}:{}}(v[0],v[1],g,a));let x=null!=(i=null==(t=this._markerComponent)?void 0:t.attribute)?i:{},b=(0,o.IX)(x.label),S=(0,o.IX)(n.label),A=(0,o.IX)(this._spec.label);null==(s=this._markerComponent)||s.setAttributes({points:p?[[f[0],f[1]],[f[1],f[2]],[f[2],f[3]]]:f,label:S.map((e,t)=>{var i,s,a,n;let l=0,o=0,c=null!=(i=r.dx)?i:0,d=null!=(s=r.dy)?s:0,u=null!=(a=A[t])?a:A[0];return(0,h.Z)(null==u?void 0:u.refX)&&(l+=u.refX),(0,h.Z)(null==u?void 0:u.refY)&&(o+=u.refY),(0,h.Z)(null==u?void 0:u.dx)&&(c+=u.dx),(0,h.Z)(null==u?void 0:u.dy)&&(d+=u.dy),Object.assign(Object.assign(Object.assign({},e),r),{refX:l,refY:o,dx:c,dy:d,textStyle:Object.assign(Object.assign({},null==(n=b[t])?void 0:n.textStyle),{textAlign:"center",textBaseline:"middle"})})}),limitRect:y,multiSegment:p,mainSegmentIndex:_,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else null==(a=this._markerComponent)||a.setAttributes(n)}_computeOptions(){let e,t=this._getRelativeDataView(),i=!0,a=!1,r=this._spec,o=this._relativeSeries,{doXProcess:h,doYProcess:c,doXYY1Process:d,doYXX1Process:u,doXYProcess:p,doCoordinatesProcess:_}=(0,n.MP)(r);if(p)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y1}])];else if(h)e=[this._processSpecByDims([{dim:"x",specValue:r.x}])];else if(c)e=[this._processSpecByDims([{dim:"y",specValue:r.y}])];else if(d)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y1}])];else if(u)e=[this._processSpecByDims([{dim:"x",specValue:r.x},{dim:"y",specValue:r.y}]),this._processSpecByDims([{dim:"x",specValue:r.x1},{dim:"y",specValue:r.y}])];else if(_){if(e=this._processSpecCoo(r),i=!1,t=new s.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([o.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:e}),r.process&&(0,l.Z)(r.process.x)&&(e=[this._processSpecByDims([{dim:"x",specValue:r.process.x}])],i=!0),r.process&&(0,l.Z)(r.process.y)&&(e=e=[this._processSpecByDims([{dim:"y",specValue:r.process.y}])],i=!0),r.process&&(0,l.Z)(r.process.xy)){let{xField:t,yField:i}=o.getSpec();e={fieldX:t,fieldY:i},a=!0}}else i=!1;return{options:e,needAggr:i,needRegr:a,processData:t}}}_.type=a.L.markLine,_.coordinateType="cartesian",_.builtInTheme={markLine:p.f};let g=()=>{c.F.registerComponent(_.type,_),(0,r._)()}},521207:function(e,t,i){i.d(t,{f:()=>u});var s=i(72754),a=i(981920),n=i(478245),r=i(436747),l=i(279090),o=i(887494),h=i(988539),c=i(668866);class d extends o.N{constructor(){super(...arguments),this.type=s.L.polarMarkLine,this.name=s.L.polarMarkLine,this.coordinateType="polar"}_newMarkLineComponent(e){let{doRadiusProcess:t,doRadAngAng1Process:i}=(0,a.MP)(this._spec);return t||i?new n.f(e):new r.I(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,s=this._startRelativeSeries,n=this._endRelativeSeries,r=this._relativeSeries,l=null!=(e=t.autoRange)&&e,{doAngleProcess:o,doRadiusProcess:c,doAngRadRad1Process:d,doRadAngAng1Process:u,doRadAngProcess:p,doCoordinatesProcess:_}=(0,a.MP)(t),g=[],m={},v={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(o||c||d||u||p){let e=(0,a.Ed)(i,s,n,r,l);m=(g=1===e.length?e[0]:e.map(e=>e[0]))[0].radius===g[1].radius?{radius:g[0].radius,startAngle:g[0].angle,endAngle:g[1].angle,center:v}:{points:g.map(e=>(0,h.op)(v,e.radius,e.angle))}}else _&&(m={points:(g=(0,a.IW)(i,r,l)).map(e=>(0,h.op)(v,e.radius,e.angle))});return m}_computeOptions(){let e,t=this._spec,{doAngleProcess:i,doRadiusProcess:s,doAngRadRad1Process:n,doRadAngAng1Process:r,doRadAngProcess:l,doCoordinatesProcess:o}=(0,a.MP)(t),h=this._getRelativeDataView();return l?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:i?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle}])]:s?e=[this._processSpecByDims([{dim:"radius",specValue:t.radius}])]:n?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius1}])]:r?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:o&&(e=this._processSpecCoo(t)),{options:e,needAggr:!0,needRegr:!1,processData:h}}}d.type=s.L.polarMarkLine,d.coordinateType="polar",d.builtInTheme={polarMarkLine:c.f};let u=()=>{l.F.registerComponent(d.type,d),(0,n.A)(),(0,r._)()}},18907:function(e,t,i){i.d(t,{R:()=>d});var s=i(981920),a=i(365555),n=i(27203),r=i(777678),l=i(875244),o=i(899045),h=i(663787),c=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class d extends o.B{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=h.Ai.MarkPoint}static _getMarkerCoordinateType(e){let{doPolarProcess:t,doGeoProcess:i}=(0,s.ar)(e);return"polar"===e.coordinateType||t?"polar":"geo"===e.coordinateType||i?"geo":"cartesian"}_createMarkerComponent(){var e,t,i,r,o,h,d,u,p,_,g,m,v,y,f,x,b,S,A,k,I,C,E,T,L,R,D,M,O,w,F,P;let{itemContent:B={},itemLine:Z={},targetSymbol:z={}}=this._spec,{type:H="text",text:V,symbol:j,image:U,richText:N,customMark:X,textStyle:$,symbolStyle:K,imageStyle:Y,richTextStyle:G,customMarkStyle:q,style:W={},state:Q={}}=B,J=c(B,["type","text","symbol","image","richText","customMark","textStyle","symbolStyle","imageStyle","richTextStyle","customMarkStyle","style","state"]),ee=null,et=null,ei={};"text"===H?(ee=null!=(e=null==V?void 0:V.state)?e:Q,ei={dx:0,dy:0},et=(0,s.Ww)((0,n.Z)(ei,null!=(t=null!=V?V:$)?t:W),this._markerData,this._markAttributeContext)):"richText"===H?(ee=null!=(i=null==N?void 0:N.state)?i:Q,ei={width:100,height:100},et=(0,s.V1)((0,n.Z)(ei,null!=(o=null!=(r=null==N?void 0:N.style)?r:G)?o:W),this._markerData,this._markAttributeContext)):"symbol"===H?(ee=null!=(h=null==j?void 0:j.state)?h:Q,ei={symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},et=(0,l.h_)((0,s.V1)((0,n.Z)(ei,null!=(u=null!=(d=null==j?void 0:j.style)?d:K)?u:W),this._markerData,this._markAttributeContext))):"image"===H?(ee=null!=(p=null==U?void 0:U.state)?p:Q,ei={width:80,height:80},et=(0,s.V1)((0,n.Z)(ei,null!=(g=null!=(_=null==U?void 0:U.style)?_:Y)?g:W),this._markerData,this._markAttributeContext)):"custom"===H&&(ee=null!=(m=null==X?void 0:X.state)?m:Q,et=(0,s.V1)(null!=(y=null!=(v=null==X?void 0:X.style)?v:q)?y:W,this._markerData,this._markAttributeContext));let es={zIndex:this.layoutZIndex,interactive:null==(f=this._spec.interactive)||f,hover:null==(x=this._spec.interactive)||x,select:null==(b=this._spec.interactive)||b,position:{x:0,y:0},clipInRange:null!=(S=this._spec.clip)&&S,itemContent:Object.assign(Object.assign({type:H,offsetX:(0,s.W$)(B.offsetX,this._relativeSeries.getRegion()),offsetY:(0,s.W$)(B.offsetX,this._relativeSeries.getRegion())},J),{style:(0,s.V1)(et,this._markerData,this._markAttributeContext)}),targetSymbol:{offset:null!=(A=z.offset)?A:0,visible:null!=(k=z.visible)&&k,size:null!=(I=z.size)?I:20,style:(0,s.V1)(z.style,this._markerData,this._markAttributeContext)},state:{line:(0,s.UL)(null!=(E=null==(C=this._spec.itemLine.line)?void 0:C.state)?E:{},this._markerData,this._markAttributeContext),lineStartSymbol:(0,s.UL)(null!=(L=null==(T=this._spec.itemLine.startSymbol)?void 0:T.state)?L:{},this._markerData,this._markAttributeContext),lineEndSymbol:(0,s.UL)(null!=(D=null==(R=this._spec.itemLine.endSymbol)?void 0:R.state)?D:{},this._markerData,this._markAttributeContext),itemContent:(0,s.UL)(ee,this._markerData,this._markAttributeContext),textBackground:(0,s.UL)(null==(O=null==(M=this._spec.itemContent.text)?void 0:M.labelBackground)?void 0:O.state,this._markerData,this._markAttributeContext),targetItem:(0,s.UL)(null!=(F=null==(w=this._spec.targetSymbol)?void 0:w.state)?F:{},this._markerData,this._markAttributeContext)},animation:null!=(P=this._spec.animation)&&P,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate},{visible:ea,line:en={}}=Z,er=c(Z,["visible","line"]);return es.itemLine=!1!==ea?Object.assign(Object.assign({},er),{visible:!0,lineStyle:(0,l.h_)(en.style)}):{visible:!1},new a.Q(es)}_markerLayout(){var e,t,i,a,n;let r,l=this._spec,o=this._markerData,h=this._relativeSeries,{point:c}=this._computePointsAttr(),d=this._getRelativeDataView().latestData,u=o?o.latestData[0]&&o.latestData[0].latestData?o.latestData[0].latestData:o.latestData:d;if(l.clip||(null==(e=l.itemContent)?void 0:e.confine)){let{minX:e,maxX:t,minY:i,maxY:a}=(0,s.re)([h.getRegion()]);r={x:e,y:i,width:t-e,height:a-i}}if(this._markerComponent){let e=null!=(t=this._markerComponent.attribute)?t:{},l=null!=(a=null==(i=e.itemContent)?void 0:i.textStyle)?a:{};this._markerComponent.setAttributes({position:void 0===c?{x:null,y:null}:c,itemContent:Object.assign(Object.assign({},e.itemContent),{textStyle:Object.assign(Object.assign({},l),{text:(null==(n=this._spec.itemContent.text)?void 0:n.formatMethod)?this._spec.itemContent.text.formatMethod(u,d):l.text}),offsetX:(0,s.Ee)(c,e.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:(0,s.Ee)(c,e.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:r,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){let e=this._spec,{doXYProcess:t,doPolarProcess:i,doGeoProcess:a}=(0,s.ar)(e);((0,r.Z)(e.coordinate)||t||i||a)&&this._initCommonDataView()}}d.specKey="markPoint"},507234:function(e,t,i){i.d(t,{V:()=>d});var s=i(72754),a=i(981920),n=i(365555),r=i(777678),l=i(279090),o=i(18907),h=i(834565);class c extends o.R{constructor(){super(...arguments),this.type=s.L.markPoint,this.name=s.L.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var e,t,i;let s,n=this._spec,l=this._markerData,o=this._relativeSeries,h=(0,r.Z)(n.x)&&(0,r.Z)(n.y),c=(0,r.Z)(n.coordinate),d=(0,r.Z)(n.position),u=null!=(e=null==n?void 0:n.autoRange)&&e;return h?s=null==(i=null==(t=(0,a.fS)(l,o,o,o,u))?void 0:t[0])?void 0:i[0]:c?s=(0,a.F9)(l,o,u,n.coordinatesOffset)[0]:d&&(s=(0,a.wB)(n.position,o,n.regionRelative)[0]),{point:s}}_computeOptions(){let e,t=this._spec,{doXYProcess:i}=(0,a.ar)(t),s=(0,r.Z)(t.coordinate);return i?e=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}])]:s&&(e=this._processSpecCoo(t)),{options:e}}}c.type=s.L.markPoint,c.coordinateType="cartesian",c.builtInTheme={markPoint:h.g};let d=()=>{l.F.registerComponent(c.type,c),(0,n.E)()}},976980:function(e,t,i){i.d(t,{W:()=>c});var s=i(72754),a=i(981920),n=i(365555),r=i(279090),l=i(18907),o=i(834565);class h extends l.R{constructor(){super(...arguments),this.type=s.L.geoMarkPoint,this.name=s.L.geoMarkPoint,this.coordinateType="geo"}_computePointsAttr(){let e=this._markerData,t=this._relativeSeries;return{point:(0,a.SG)(e,t)[0][0]}}_computeOptions(){let e=this._spec;return{options:[this._processSpecByDims([{dim:"areaName",specValue:e.areaName}])]}}}h.type=s.L.geoMarkPoint,h.coordinateType="geo",h.builtInTheme={geoMarkPoint:o.g};let c=()=>{r.F.registerComponent(h.type,h),(0,n.E)()}},952098:function(e,t,i){i.d(t,{v:()=>d});var s=i(72754),a=i(981920),n=i(365555),r=i(279090),l=i(18907),o=i(988539),h=i(834565);class c extends l.R{constructor(){super(...arguments),this.type=s.L.polarMarkPoint,this.name=s.L.polarMarkPoint,this.coordinateType="polar"}_computePointsAttr(){var e,t;let i=this._markerData,s=this._relativeSeries,n=null!=(t=null==(e=this._spec)?void 0:e.autoRange)&&t,r=(0,a.Ed)(i,s,s,s,n)[0][0],l={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};return{point:(0,o.op)(l,r.radius,r.angle)}}_computeOptions(){let e=this._spec;return{options:[this._processSpecByDims([{dim:"radius",specValue:e.radius},{dim:"angle",specValue:e.angle}])]}}}c.type=s.L.polarMarkPoint,c.coordinateType="polar",c.builtInTheme={polarMarkPoint:h.g};let d=()=>{r.F.registerComponent(c.type,c),(0,n.E)()}},981920:function(e,t,i){i.d(t,{Kt:()=>b,fS:()=>S,wB:()=>L,QO:()=>Z,SG:()=>I,IW:()=>E,ar:()=>z,W$:()=>w,Ee:()=>F,V1:()=>O,F9:()=>C,Ed:()=>k,re:()=>R,Ww:()=>D,MP:()=>B,UL:()=>M});var s=i(835151),a=i(591431),n=i(777678),r=i(933248),l=i(896294),o=i(889897),h=i(505441),c=i(875244);let d=["sum","average","min","max","variance","standardDeviation","median"];var u=i(459774),p=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};function _(e,t,i){if(!i)return!1;let a=e.map(e=>+e),n=(0,s.iH)(a),r=(0,s.CE)(a);return t<n||t>r}function g(e,t,i,s,n,r){var l,o;let{relativeSeries:c}=s;return(0,a.Z)(e.x)&&_(t,e.x,i)&&(null==(o=null==c?void 0:(l=c.getXAxisHelper()).setExtendDomain)||o.call(l,"marker_xAxis_extend",e.x)),(0,h.hU)(e.x)?f(e.x,n)+r.x:x(c.getXAxisHelper(),[e.x])+r.x}function m(e,t,i,s,n,r){var l,o;let{relativeSeries:c}=s;return(0,a.Z)(e.y)&&_(t,e.y,i)&&(null==(o=null==(l=c.getYAxisHelper())?void 0:l.setExtendDomain)||o.call(l,"marker_yAxis_extend",e.y)),(0,h.hU)(e.y)?f(e.y,n)+r.y:x(c.getYAxisHelper(),[e.y])+r.y}function v(e,t,i,s){var n,r;let{relativeSeries:l}=s;return(0,a.Z)(e.angle)&&_(t,e.angle,i)&&(null==(r=null==(n=l.angleAxisHelper)?void 0:n.setExtendDomain)||r.call(n,"marker_angleAxis_extend",e.angle)),x(l.angleAxisHelper,[e.angle])}function y(e,t,i,s){var n,r;let{relativeSeries:l}=s;return(0,a.Z)(e.radius)&&_(t,e.radius,i)&&(null==(r=null==(n=l.radiusAxisHelper)?void 0:n.setExtendDomain)||r.call(n,"marker_radiusAxis_extend",e.radius)),x(l.radiusAxisHelper,[e.radius])}function f(e,t){return Number(e.substring(0,e.length-1))*t/100}function x(e,t){let i=e.getScale(0);return(0,u.z2)(i.type)&&i.domain()[0]===i.domain()[1]&&t[0]!==i.domain()[0]?NaN:e.dataToPosition(t)}function b(e){return d.includes(e)}function S(e,t,i,s,a,r=!1){let l=t.getRegion(),o=l.getLayoutStartPoint(),h=i.getRegion(),c=h.getLayoutStartPoint(),d=Math.abs(Math.min(o.x,c.x)-Math.max(o.x+l.getLayoutRect().width,c.x+h.getLayoutRect().width)),u=Math.abs(Math.min(o.y,c.y)-Math.max(o.y+l.getLayoutRect().height,c.y+h.getLayoutRect().height)),p={relativeSeries:s,startRelativeSeries:t,endRelativeSeries:i},_=[],v=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,y=s.getXAxisHelper(),f=s.getXAxisHelper(),x=y.getScale(0).domain(),b=f.getScale(0).domain(),k=r&&!y.isContinuous&&!!y.getBandwidth,I=r&&!f.isContinuous&&!!f.getBandwidth,C={min:null,max:null},E={min:null,max:null};return v.forEach(e=>{let t,i,s=(0,n.Z)(e.x),r=(0,n.Z)(e.y);if(s&&r)t=g(e,x,a,p,d,o),i=m(e,b,a,p,u,o),A(t,k,C,_.length),A(i,I,E,_.length),_.push([{x:t,y:i}]);else if(s){t=g(e,x,a,p,d,o),i=Math.max(o.y+l.getLayoutRect().height,c.y+h.getLayoutRect().height);let s=Math.min(o.y,c.y);A(t,k,C,_.length),_.push([{x:t,y:i},{x:t,y:s}])}else if(r){t=Math.min(o.x,c.x),i=m(e,b,a,p,u,o);let s=Math.max(o.x+l.getLayoutRect().width,c.x+h.getLayoutRect().width);A(i,I,E,_.length),_.push([{x:t,y:i},{x:s,y:i}])}}),function(e,t,i,s,a){if(s.min||s.max){let i=t.getBandwidth(0)*(1+t.getScale(0).paddingInner());s.min&&e[s.min.index].forEach(e=>e.x-=i/2),s.max&&e[s.max.index].forEach(e=>e.x+=i/2)}if(a.min||a.max){let t=i.getBandwidth(0)*(1+i.getScale(0).paddingInner());a.min&&e[a.min.index].forEach(e=>e.y-=t/2),a.max&&e[a.max.index].forEach(e=>e.y+=t/2)}}(_,y,f,C,E),_}function A(e,t,i,s){return t&&((null===i.min||i.min.value>e)&&(i.min={value:e,index:s}),(null===i.max||i.max.value<e)&&(i.max={value:e,index:s})),e}function k(e,t,i,s,a){let r={relativeSeries:s,startRelativeSeries:t,endRelativeSeries:i},l=[],o=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,h=s.angleAxisHelper.getScale(0).domain(),c=s.radiusAxisHelper.getScale(0).domain(),d=Math.min(s.getRegion().getLayoutRect().width/2,s.getRegion().getLayoutRect().height/2);return o.forEach(e=>{let t=(0,n.Z)(e.angle),i=(0,n.Z)(e.radius);if(t&&i){let t=v(e,h,a,r),i=y(e,c,a,r);l.push([{angle:t,radius:i}])}else if(t){let t=v(e,h,a,r);l.push([{angle:t,radius:-d},{angle:t,radius:d}])}else if(i){let t=y(e,c,a,r);l.push([{radius:t,angle:0},{radius:t,angle:2*Math.PI}])}}),l}function I(e,t){let i=[];return(e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData).forEach(e=>{(0,n.Z)(e.areaName)&&i.push([{x:t.nameValueToPosition(e.areaName).x+t.getRegion().getLayoutStartPoint().x,y:t.nameValueToPosition(e.areaName).y+t.getRegion().getLayoutStartPoint().y}])}),i}function C(e,t,i,n){let l=[],o=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,c=(0,r.Z)(n);return o.forEach((e,r)=>{var o,d,u,p;let g=(null==e?void 0:e.getRefRelativeSeries)?e.getRefRelativeSeries():t,m=g.getRegion(),v=m.getLayoutStartPoint(),{width:y,height:f}=m.getLayoutRect(),b=0,S=0;if(n){let e=c?n[r]:n,t=e.x,i=e.y;t&&(b=(0,h.hU)(t)?Number(t.substring(0,t.length-1))*y/100:t),i&&(S=(0,h.hU)(i)?Number(i.substring(0,i.length-1))*f/100:i)}let A=g.getXAxisHelper().getScale(0).domain(),k=g.getYAxisHelper().getScale(0).domain(),I=(0,s.IX)(e.x),C=(0,s.IX)(e.y);1===I.length&&(0,a.Z)(I[0])&&_(A,I[0],i)&&(null==(d=null==(o=g.getXAxisHelper())?void 0:o.setExtendDomain)||d.call(o,"marker_xAxis_extend",I[0])),1===C.length&&(0,a.Z)(C[0])&&_(k,C[0],i)&&(null==(p=null==(u=g.getYAxisHelper())?void 0:u.setExtendDomain)||p.call(u,"marker_yAxis_extend",C[0])),l.push({x:x(g.getXAxisHelper(),I)+v.x+b,y:x(g.getYAxisHelper(),C)+v.y+S})}),l}function E(e,t,i){let n=[];return(e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData).forEach(e=>{var r,l,o,h;let c=(null==e?void 0:e.getRefRelativeSeries)?e.getRefRelativeSeries():t,d=c.angleAxisHelper.getScale(0).domain(),u=c.radiusAxisHelper.getScale(0).domain(),p=(0,s.IX)(e.angle),g=(0,s.IX)(e.radius);1===p.length&&(0,a.Z)(p[0])&&_(d,p[0],i)&&(null==(l=null==(r=c.angleAxisHelper)?void 0:r.setExtendDomain)||l.call(r,"marker_xAxis_extend",p[0])),1===g.length&&(0,a.Z)(g[0])&&_(u,g[0],i)&&(null==(h=null==(o=c.radiusAxisHelper)?void 0:o.setExtendDomain)||h.call(o,"marker_yAxis_extend",g[0])),n.push({angle:x(c.angleAxisHelper,p),radius:x(c.radiusAxisHelper,g)})}),n}function T(e,t,i){let{x:s,y:a}=e;return(0,h.hU)(s)&&(s=f(s,t)),(0,h.hU)(a)&&(a=f(a,i)),{x:s,y:a}}function L(e,t,i){let a;if(a=(0,l.Z)(e)?(0,s.IX)(e(t.getData().getLatestData(),t)):(0,s.IX)(e),i){let e=t.getRegion(),{x:i,y:s}=e.getLayoutStartPoint(),{width:n,height:r}=e.getLayoutRect();return a.map(e=>{let{x:t,y:a}=T(e,n,r);return{x:t+=i,y:a+=s}})}let{width:n,height:r}=t.getOption().getChart().getViewRect();return a.map(e=>T(e,n,r))}function R(e){let t=1/0,i=-1/0,s=1/0,a=-1/0;return e.forEach(e=>{let n=e.getLayoutStartPoint(),r=e.getLayoutRect();n.x<t&&(t=n.x),n.x+r.width>i&&(i=n.x+r.width),n.y<s&&(s=n.y),n.y+r.height>a&&(a=n.y+r.height)}),{minX:t,maxX:i,minY:s,maxY:a}}function D(e,t,i){let{labelBackground:s={},style:a,shape:r}=e,l=p(e,["labelBackground","style","shape"]);return!1!==e.visible?((null==r?void 0:r.visible)?l.shape=Object.assign({visible:!0},(0,c.h_)(r.style)):l.shape={visible:!1},!1!==s.visible?(l.panel=Object.assign({visible:!0,customShape:s.customShape},O((0,c.h_)(s.style),t,i)),(0,n.Z)(s.padding)&&(l.padding=(0,o.o)(s.padding))):(l.panel={visible:!1},l.padding=0),a&&(l.textStyle=O((0,c.h_)(a),t,i)),l):{visible:!1}}function M(e,t,i){for(let s in e)(0,l.Z)(e[s])&&(e[s]=e[s](t,i));return e}function O(e,t,i){return(0,l.Z)(e)?e(t,i):e}function w(e,t){return(0,l.Z)(e)?e(t):e}function F(e,t,i){return(0,n.Z)(e)?"regionLeft"===t?i.getLayoutStartPoint().x-e.x:"regionRight"===t?i.getLayoutStartPoint().x+i.getLayoutRect().width-e.x:"regionTop"===t?i.getLayoutStartPoint().y-e.y:"regionBottom"===t?i.getLayoutStartPoint().y+i.getLayoutRect().height-e.y:t:t}function P(e){return{isXProcess:(0,n.Z)(e.x),isYProcess:(0,n.Z)(e.y),isX1Process:(0,n.Z)(e.x1),isY1Process:(0,n.Z)(e.y1),isAngleProcess:(0,n.Z)(e.angle),isRadiusProcess:(0,n.Z)(e.radius),isAngle1Process:(0,n.Z)(e.angle1),isRadius1Process:(0,n.Z)(e.radius1),isCoordinatesProcess:(0,n.Z)(e.coordinates),isValidProcess:(0,n.Z)(e.process)}}function B(e){let{isXProcess:t,isYProcess:i,isX1Process:s,isY1Process:a,isAngleProcess:n,isRadiusProcess:r,isAngle1Process:l,isRadius1Process:o,isCoordinatesProcess:h,isValidProcess:c}=P(e);return{doXProcess:t&&!i&&!a,doXYY1Process:t&&i&&a,doYProcess:i&&!t&&!s,doYXX1Process:i&&t&&s,doXYProcess:t&&i&&s&&a,doAngleProcess:n&&!l&&!r&&!o,doRadiusProcess:r&&!o&&!n&&!l,doAngRadRad1Process:n&&!l&&r&&o,doRadAngAng1Process:r&&n&&l&&!o,doRadAngProcess:n&&r&&l&&o,doCoordinatesProcess:h&&(!c||"process"in e&&"xy"in e.process)}}function Z(e){let{isXProcess:t,isYProcess:i,isX1Process:s,isY1Process:a,isAngleProcess:n,isRadiusProcess:r,isAngle1Process:l,isRadius1Process:o,isCoordinatesProcess:h}=P(e);return{doXProcess:t&&s&&!i&&!a,doYProcess:i&&a&&!t&&!s,doXYProcess:t&&s&&i&&a,doAngleProcess:n&&l&&!r&&!o,doRadiusProcess:r&&o&&!n&&!l,doRadAngProcess:n&&r&&l&&o,doCoordinatesProcess:h}}function z(e){return{doXYProcess:(0,n.Z)(e.x)&&(0,n.Z)(e.y),doPolarProcess:(0,n.Z)(e.angle)&&(0,n.Z)(e.radius),doGeoProcess:(0,n.Z)(e.areaName)}}},678794:function(e,t,i){i.d(t,{E:()=>A});var s=i(279090),a=i(215612),n=i(773877),r=i(501670),l=i(971800),o=i(835151),h=i(50026),c=i(591431),d=i(72754),u=i(809948),p=i(875244);let _=e=>{let t=Object.assign({},e);return(0,p.h_)(t)},g=e=>Object.assign(Object.assign({},e),{style:Object.assign({},(0,p.h_)(e.style))}),m=e=>{var t,i,s,a,n,r,l,o,h,c,d,u,m,v,y;let f=_(null!=(i=null==(t=null==e?void 0:e.slider)?void 0:t.trackStyle)?i:{}),x=_(null!=(a=null==(s=null==e?void 0:e.slider)?void 0:s.railStyle)?a:{}),b=(e=>{let t=Object.assign({},e);return(0,p.h_)(t)})(null!=(r=null==(n=null==e?void 0:e.slider)?void 0:n.handlerStyle)?r:{}),S=g(null!=(o=null==(l=null==e?void 0:e.controller)?void 0:l.start)?o:{}),A=g(null!=(c=null==(h=null==e?void 0:e.controller)?void 0:h.pause)?c:{}),k=g(null!=(u=null==(d=null==e?void 0:e.controller)?void 0:d.backward)?u:{}),I=g(null!=(v=null==(m=null==e?void 0:e.controller)?void 0:m.forward)?v:{}),C=Object.assign(Object.assign({},e),{direction:e.direction,interval:e.interval,visible:e.visible,orient:null!=(y=e.orient)?y:"bottom",slider:Object.assign(Object.assign({},e.slider),{trackStyle:f,railStyle:x,handlerStyle:b}),controller:Object.assign(Object.assign({},e.controller),{start:S,pause:A,backward:k,forward:I})});return e.visible||(C.controller.visible=!1,C.slider.visible=!1),C},v=e=>"left"===e||"right"===e,y=e=>"top"===e||"bottom"===e;var f=i(663787),x=i(75464),b=i(789678);class S extends u.H{constructor(){super(...arguments),this.layoutZIndex=f.Ai.Player,this.layoutLevel=f.pM.Player,this.specKey="player",this.type=d.L.player,this._orient="bottom",this._getPlayerAttrs=()=>{var e,t,i,s,a,n;let r,l,o,h,c=this._spec.type,d={size:{width:this._width,height:this._height},dx:null!=(e=this._spec.dx)?e:0+this._dx,dy:null!=(t=this._spec.dy)?t:0+this._dy};return"discrete"===c?Object.assign(Object.assign(Object.assign({},(r=this._spec,l=this._specs,Object.assign(Object.assign({},m(r)),{data:l,type:"discrete"}))),d),{disableTriggerEvent:this._option.disableTriggerEvent,loop:null==(s=null==(i=this._spec)?void 0:i.loop)||s}):Object.assign(Object.assign(Object.assign({},(o=this._spec,h=this._specs,Object.assign(Object.assign({},m(o)),{data:h,type:"continuous"}))),d),{disableTriggerEvent:this._option.disableTriggerEvent,loop:null==(n=null==(a=this._spec)?void 0:a.loop)||n})},this._createOrUpdatePlayerComponent=()=>{let e=Object.assign({},this._getPlayerAttrs()),t=this.getContainer();this._playerComponent?(0,l.X)(e,this._cacheAttrs)||(this._cacheAttrs=e,this._playerComponent.setAttributes(e),this._playerComponent._initAttributes(),this._playerComponent.render()):("discrete"===e.type?this._playerComponent=new a._(e):this._playerComponent=new n.F(e),this._cacheAttrs=e,this._playerComponent.name="player",t.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var e,t,i,s,a,n,r,l,h;return Math.max(...(0,o.IX)(null==(t=null==(e=this._spec.controller.start)?void 0:e.style)?void 0:t.size),...(0,o.IX)(null==(s=null==(i=this._spec.controller.pause)?void 0:i.style)?void 0:s.size),...(0,o.IX)(null==(n=null==(a=this._spec.controller.backward)?void 0:a.style)?void 0:n.size),...(0,o.IX)(null==(l=null==(r=this._spec.controller.forward)?void 0:r.style)?void 0:l.size),null!=(h=v(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)?h:10)},this._sliderExceededSize=()=>{var e,t,i,s,a,n,r,l,h;let c=null!=(e=v(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)?e:10,d=Math.max(...(0,o.IX)(null==(i=null==(t=this._spec.controller.start)?void 0:t.style)?void 0:i.size),...(0,o.IX)(null==(a=null==(s=this._spec.controller.pause)?void 0:s.style)?void 0:a.size),...(0,o.IX)(null==(r=null==(n=this._spec.controller.backward)?void 0:n.style)?void 0:r.size),...(0,o.IX)(null==(h=null==(l=this._spec.controller.forward)?void 0:l.style)?void 0:h.size));return c>=d?c-d:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(x.$7.rendered,()=>{var e;(null==(e=this._spec)?void 0:e.auto)&&(this._playerComponent.pause(),this._playerComponent.play())}),this._playerComponent.addEventListener(r.R.end,()=>{var e;this.event.emit(x.$7.playerEnd,{model:this}),this._alternate&&"discrete"===this._spec.type&&(this._direction="default"===this._direction?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:"reverse"===this._direction?this._specs.length-2:1})),(null==(e=this._spec)?void 0:e.loop)&&this._playerComponent.play()}),this._playerComponent.addEventListener(r.R.change,e=>{let{index:t}=e.detail;this.changePlayerIndex(t)}),this._playerComponent.addEventListener(r.R.backward,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(x.$7.playerBackward,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(r.R.forward,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(x.$7.playerForward,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(r.R.play,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(x.$7.playerPlay,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(r.R.pause,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(x.$7.playerPause,{model:this,value:{spec:i,index:t,specs:this._specs}})}))}}get orient(){return this._orient}set layoutOrient(e){this._orient=e}setAttrFromSpec(){var e,t,i,s,a,n,r,l;super.setAttrFromSpec(),this._orient=null!=(e=this._spec.orient)?e:"bottom",this._specs=null!=(t=this._spec.specs)?t:[],this._direction=null!=(i=this._spec.direction)?i:"default",this._alternate=null!=(s=this._spec.alternate)&&s,this._dx=null!=(a=this._spec.dx)?a:0,this._dy=null!=(n=this._spec.dy)?n:0,this._position=null!=(r=this._spec.position)?r:"middle",this._visible=null==(l=this._spec.visible)||l}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),(0,h.Z)(e.x)){let t=v(this._orient)?e.x+this._sliderExceededSize()/2:e.x;this._playerComponent&&this._playerComponent.setAttribute("x",t)}if((0,h.Z)(e.y)){let t=y(this._orient)?e.y+this._sliderExceededSize()/2:e.y;this._playerComponent&&this._playerComponent.setAttribute("y",t)}}getBoundsInRect(e,t){this._width=this._computeWidth(e),this._height=this._computeHeight(e),this._dx=this._computeDx(t),this._dy=this._computeDy(t);let i=this._computeLayoutRect(e,this._width,this._height);return this._createOrUpdatePlayerComponent(),i}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(e,t,i){if(!1===this._visible)return{x1:0,x2:0,y1:0,y2:0};switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:t,y2:i};case"right":return{x1:e.width-t,y1:0,x2:e.width,y2:e.height};default:return{x1:0,y1:e.height-i,x2:e.width,y2:e.height}}}_computeWidth(e){return(0,c.Z)(this._spec.width)?Math.min(e.width,Number(this._spec.width)):v(this._orient)?this._maxSize():e.width}_computeHeight(e){return(0,c.Z)(this._spec.height)?(this._height=this._spec.height,Math.min(e.height,Number(this._spec.height))):y(this._orient)?this._maxSize():e.height}_computeDx(e){return v(this._orient)||"start"===this._position?0:"middle"===this._position?(e.width-this._width)/2:e.width-this._width}_computeDy(e){return y(this._orient)||"start"===this._position?0:"middle"===this._position?(e.height-this._height)/2:e.height-this._height}changePlayerIndex(e){let t=this._specs[e];this._option.globalInstance.updateFullData(t.data),this.event.emit(x.$7.playerChange,{model:this,value:{spec:t,index:e,specs:this._specs}})}}S.builtInTheme={player:b.h},S.specKey="player",S.type=d.L.player;let A=()=>{s.F.registerComponent(S.type,S)}},546740:function(e,t,i){i.d(t,{v:()=>a});var s=i(836205);let a=()=>{(0,s.C)()}},538988:function(e,t,i){i.d(t,{_:()=>m});var s=i(663787),a=i(279090),n=i(505441),r=i(809948),l=i(72754),o=i(623543),h=i(50026),c=i(150954),d=i(777678),u=i(971800),p=i(864985),_=i(191650);class g extends r.H{get orient(){return this._orient}constructor(e,t){super(e,t),this.type=l.L.title,this.specKey=l.L.title,this.layoutType="normal",this.layoutZIndex=s.Ai.Title,this.layoutLevel=s.pM.Title,this._orient="top",this._orient=(0,n.vk)(e.orient)?e.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(e){return(0,p.ts)(e,this.specKey,l.L.title,e=>!1!==e.visible)}_compareSpec(e,t){let i=super._compareSpec(e,t);return(null==t?void 0:t.orient)===(null==e?void 0:e.orient)&&(null==t?void 0:t.visible)===e.visible||(i.reMake=!0),i.change=!0,i.reRender=!0,i}afterSetLayoutStartPoint(e){(0,h.Z)(e.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",e.x),(0,h.Z)(e.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",e.y),super.afterSetLayoutStartPoint(e)}getBoundsInRect(e){let t={};this.setLayoutRect(e);let i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),t=this._getTitleLayoutRect();let{x:s,y:a}=this.getLayoutStartPoint();return{x1:s,y1:a,x2:s+t.width,y2:a+t.height}}_getTitleLayoutRect(){let e=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:(0,h.Z)(e.width())?e.width():0,height:this._spec.height?this._spec.height:(0,h.Z)(e.height())?e.height():0}}_getTitleAttrs(){var e,t,i,s,a,r,l,o;if(!1===this._spec.visible)return{visible:!1};let h=this.getLayoutRect(),u=(0,n.Mv)(this._spec.width,h.width,null,h.width),p=Math.max(Math.min(u,(0,n.Mv)(this._spec.maxWidth,h.width,null,h.width),h.width),0),_=Object.assign(Object.assign({},(0,c.Z)(this._spec,["padding"])),{textType:null!=(e=this._spec.textType)?e:"text",text:null!=(t=this._spec.text)?t:"",subtextType:null!=(i=this._spec.subtextType)?i:"text",subtext:null!=(s=this._spec.subtext)?s:"",x:null!=(a=this._spec.x)?a:0,y:null!=(r=this._spec.y)?r:0,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:p,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:null!=(l=this._spec.align)?l:"left",verticalAlign:null!=(o=this._spec.verticalAlign)?o:"top",textStyle:Object.assign({width:p,maxLineWidth:p},this._spec.textStyle),subtextStyle:Object.assign({maxLineWidth:p},this._spec.subtextStyle)});return(0,d.Z)(this._spec.width)&&(_.textStyle.width=Math.max(u,h.width),_.subtextStyle.width=_.textStyle.width),_}_createOrUpdateTitleComponent(e){if(this._titleComponent)(0,u.X)(e,this._cacheAttrs)||this._titleComponent.setAttributes(e);else{let t=this.getContainer(),i=new o.D(e);i.name="title",t.add(i),this._titleComponent=i,i.on("*",(e,t)=>this._delegateEvent(i,e,t))}return this._cacheAttrs=e,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}g.type=l.L.title,g.specKey=l.L.title,g.builtInTheme={title:_.T};let m=()=>{a.F.registerComponent(g.type,g)}},375156:function(e,t,i){i.d(t,{IK:()=>c,UH:()=>o,a:()=>r,vP:()=>l,zM:()=>h});var s,a,n=i(145004);let r={dom:`${n.Bq}_TOOLTIP_HANDLER_DOM`,canvas:`${n.Bq}_TOOLTIP_HANDLER_CANVAS`},l="vchart-tooltip-element",o=20,h={key:"\u5176\u4ED6",value:"..."};(s=a||(a={})).group="group",s.mark="mark",s.dimension="dimension";let c=50},352393:function(e,t,i){i.d(t,{o:()=>h});var s=i(576225),a=i(777678),n=i(75464),r=i(923010);let l=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"];var o=i(375156);class h{constructor(e){this._showTooltipByHandler=(e,t)=>{var i,a,r;let l;if((0,s.Z)(e))return 1;t.changePositionOnly||this.clearCache(),this._updateViewSpec(e,t);let o=this._cacheActiveSpec;if((0,s.Z)(o)||!1===o.visible)return 1;t.tooltipSpec=this.component.getSpec(),t.activeTooltipSpec=o;let{title:h,content:c}=o,d=(0,s.Z)(null==h?void 0:h.key)&&(0,s.Z)(null==h?void 0:h.value)&&!(null==c?void 0:c.length);return(this.component.event.emit(n.$7.tooltipShow,Object.assign(Object.assign({},t),{isEmptyTooltip:d,tooltipData:e,activeType:this.activeType,tooltip:this.component})),d)?1:((null==(i=o.handler)?void 0:i.showTooltip)?l=o.handler.showTooltip.bind(o.handler):(null==(a=this.component.tooltipHandler)?void 0:a.showTooltip)&&(l=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),l?null!=(r=l(this.activeType,e,t))?r:0:1)},this.component=e}_preprocessDimensionInfo(e){let t=[];if(null==e||e.forEach(e=>{let i=Object.assign(Object.assign({},e),{data:e.data.filter(({series:e})=>{var t,i;return!1!==(null==(i=null==(t=e.getSpec())?void 0:t.tooltip)?void 0:i.visible)})});i.data.length>0&&t.push(i)}),t.length>0)return t}_updateViewSpec(e,t){var i,n,h,c,d,u,p,_,g;let{changePositionOnly:m,model:v}=t;if(!m||!this._cacheActiveSpec){let m=this.component.getSpec();if(this._cacheActiveSpec=((e,t,i,s,n)=>{var o,h,c;let d={activeType:e};switch(e){case"mark":case"group":if(i){let r=null==(o=i.getSpec())?void 0:o.tooltip;return d.visible=!0,(null==r?void 0:r.handler)&&(d.handler=r.handler),(null==(h=d.handler)?void 0:h.showTooltip)?d:((null==r?void 0:r[e])&&l.forEach(t=>{(0,a.Z)(r[e][t])&&(d[t]=r[e][t])}),Object.assign(Object.assign({},d),i.tooltipHelper.getTooltipData(e,t,s,s[0].datum,n)))}break;case"dimension":if(null==s?void 0:s.length){if((e=>{let t=[];return e.forEach(e=>{e.data.forEach(e=>{(0,a.Z)(e.series)&&t.push(e.series)})}),t})(s).every(e=>{var t;return!(0,r.Lw)("dimension",null==(t=e.tooltipHelper)?void 0:t.spec)})?d.visible=!1:d.visible=!0,d.handler=t.handler,null==(c=d.handler)?void 0:c.showTooltip)return d;let i=[];return s.forEach(a=>a.data.forEach(a=>{let{series:r}=a,l=r.tooltipHelper.getTooltipData(e,t,s,a.datum,n);l&&i.push(l)})),(0,r.Uy)(i)}}return null})(this.activeType,this.component.getSpec(),v,e,t),this._cacheActiveSpec){(0,s.Z)(this._cacheActiveSpec.handler)&&(0,a.Z)(m.handler)&&(this._cacheActiveSpec.handler=m.handler);let r=null!=(i=m[this.activeType])?i:{},l=null!=(n=this._cacheActiveSpec.updateTitle)?n:r.updateTitle,v=null!=(h=this._cacheActiveSpec.updateContent)?h:r.updateContent,y=null!=(d=null!=(c=this._cacheActiveSpec.maxLineCount)?c:r.maxLineCount)?d:o.UH;if(l&&(this._cacheActiveSpec.title=null!=(u=l(this._cacheActiveSpec.title,e,t))?u:this._cacheActiveSpec.title),v)this._cacheActiveSpec.content=null!=(p=v(this._cacheActiveSpec.content,e,t))?p:this._cacheActiveSpec.content;else if(y>=1&&(null==(_=this._cacheActiveSpec.content)?void 0:_.length)>y){let e=null!=(g=this._cacheActiveSpec.othersLine)?g:r.othersLine,t=e?Object.assign(Object.assign({},o.zM),e):o.zM;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,y-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[y-1]),t)]}}}}shouldHandleTooltip(e,t){var i,a;return!(0,s.Z)(t)&&(0,r.Lw)(this.activeType,null==(a=null==(i=e.model)?void 0:i.tooltipHelper)?void 0:a.spec)}clearCache(){this._cacheActiveSpec=void 0}}},482175:function(e,t,i){i.d(t,{G:()=>o});var s=i(352393),a=i(777678),n=i(459774),r=i(279090);class l extends s.o{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(e,t,i){let s=Object.assign(Object.assign({},t),{dimensionInfo:this._preprocessDimensionInfo(e),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(e,s)}_getDimensionInfo(e){var t,i,s;let r,l=this.component.getChart(),o=l.getCompiler().getStage().getLayer(void 0),h={x:e.event.viewX,y:e.event.viewY};if(o.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},h),0===(r=null!=(s=null==(i=(t=this.component.getOption()).getDimensionInfo)?void 0:i.call(t,l,h,!0))?s:[]).length)r=void 0;else if(r.length>1){let e=r.filter(e=>{var t;let i,s=e.axis;if(s.getSpec().hasDimensionTooltip)return!0;if(!(0,n.lK)(s.getScale().type))return!1;for(let e of null!=(t=null==s?void 0:s.getRegions())?t:[]){for(let t of e.getSeries())if("cartesian"===t.coordinate){i=t;break}if((0,a.Z)(i))break}return(0,a.Z)(i)&&i.getDimensionField()[0]===i.fieldY[0]?"left"===s.getOrient()||"right"===s.getOrient():"bottom"===s.getOrient()||"top"===s.getOrient()});if((r=e.length?e:r.slice(0,1)).length>1){let e=new Set;r.forEach(t=>{t.data=t.data.filter(({key:t})=>!e.has(t)&&(e.add(t),!0))})}}return r}getMouseEventData(e){return{tooltipInfo:this._getDimensionInfo(e),ignore:!1}}}let o=()=>{r.F.registerTooltipProcessor("dimension",l)}},107367:function(e,t,i){i.d(t,{T:()=>l});var s=i(352393),a=i(835151),n=i(279090);class r extends s.o{constructor(){super(...arguments),this.activeType="group"}showTooltip(e,t,i){let{datum:s,series:n}=e,r=[{datum:(0,a.IX)(s),series:n}],l=Object.assign(Object.assign({},t),{groupDatum:this._getGroupDatum(t),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(r,l)}getMouseEventData(e){var t,i;let s;if("series"===(null==(t=e.model)?void 0:t.modelType)){let t=e.model,n=t.tooltipHelper,r=null==n?void 0:n.activeTriggerSet.group;if(null==r?void 0:r.has(e.mark)){let n=this.component.getSpec()[this.activeType];((null==n?void 0:n.triggerMark)?(0,a.IX)(n.triggerMark):[]).includes(null==(i=e.mark)?void 0:i.name)&&(s={mark:e.mark,datum:e.datum,series:t})}}return{tooltipInfo:s,ignore:!1}}_getGroupDatum(e){let{model:t,mark:i,datum:s}=e;if(["line","area"].includes(i.type))return(0,a.IX)(s);let n=t.getViewData().latestData,r=t.getSeriesField();if(!r)return n;let l=(0,a.IX)(s)[0][r];return n.filter(e=>e[r]===l)}}let l=()=>{n.F.registerTooltipProcessor("group",r)}},582045:function(e,t,i){i.d(t,{L:()=>o});var s=i(352393),a=i(513438),n=i(234630),r=i(279090);class l extends s.o{constructor(){super(...arguments),this.activeType="mark"}showTooltip(e,t,i){var s,r,l;let{datum:o,series:h}=e,c=this.component.getSpec(),d=[{datum:[o],series:h}],u=h.tooltipHelper,p=null==(s=h.getSpec())?void 0:s.tooltip,_=null==(r=null==p?void 0:p.mark)?void 0:r.checkOverlap,g=!1;if(!0===_||!0===(null==(l=c.mark)?void 0:l.checkOverlap)&&!1!==_){let e=null==u?void 0:u.activeTriggerSet.mark;if(e){g=!0;let i=this.component.getChart().getCompiler().getStage().getLayer(void 0),s={x:t.event.viewX,y:t.event.viewY};i.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},s),e.forEach(e=>{e.getGraphics().forEach(e=>{e!==t.node&&e&&e.containsPoint(s.x,s.y,a.LZ.GLOBAL,e.stage.getPickerService())&&d[0].datum.push((0,n.BY)(e))})})}}let m=Object.assign(Object.assign({},t),{model:h,changePositionOnly:i,tooltip:this.component});if(i&&g){let e=this._cacheActiveSpec&&this._cacheActiveSpec.data;e&&e[0].series===d[0].series&&e[0].datum.length===d[0].datum.length&&!e[0].datum.some((e,t)=>e!==d[0].datum[t])||(m.changePositionOnly=!1)}return this._showTooltipByHandler(d,m)}getMouseEventData(e){var t;let i,s,a=null==(t=e.model)?void 0:t.modelType;if("series"===a){let t=e.model,a=t.tooltipHelper,n=null==a?void 0:a.activeTriggerSet.mark,r=null==a?void 0:a.ignoreTriggerSet.mark;(null==n?void 0:n.has(e.mark))?i={mark:e.mark,datum:e.datum,series:t}:(null==r?void 0:r.has(e.mark))&&(s=!0)}else if("component"===a){let t=e.model,a=e.node;if("label"===t.name&&a){let e=t.getLabelInfoByTextGraphic(a),{baseMark:n,series:r,labelMark:l}=null!=e?e:{},o=r.tooltipHelper,h=null==o?void 0:o.activeTriggerSet.mark,c=null==o?void 0:o.ignoreTriggerSet.mark;(null==h?void 0:h.has(l))?i={mark:n,datum:a.attribute.data,series:r}:(null==c?void 0:c.has(l))&&(s=!0)}}return{tooltipInfo:i,ignore:s}}}let o=()=>{r.F.registerTooltipProcessor("mark",l)}},11772:function(e,t,i){i.d(t,{M:()=>F});var s=i(72754),a=i(809948),n=i(453375),r=i(75387),l=i(75464),o=i(777678),h=i(576225),c=i(933248),d=i(79023),u=i(140895),p=i(459774);let _=(e,t)=>(0,o.Z)(t)?e.map(e=>t[e]):void 0,g=(e,t)=>i=>e.every((e,s)=>i[e]===(null==t?void 0:t[s])),m=e=>!(0,h.Z)(e)&&((0,c.Z)(e)?e.length>0&&e.every(o.Z):Object.keys(e).length>0);var v=i(923010),y=i(763111);let f=e=>(0,o.Z)(e)&&!(0,c.Z)(e),x=e=>(0,o.Z)(e)&&(0,c.Z)(e);var b=i(835151),S=i(521107),A=i(591431),k=i(26688),I=i(279090),C=i(990389),E=i(342279),T=i(775527),L=i(375156),R=i(522269);class D extends T.r{_shouldMergeThemeToSpec(){return!1}_initTheme(e,t){var i,s,a;let{spec:n,theme:r}=super._initTheme(e,t);return n.style=(0,R.H)({},this._theme,n.style),n.offset=(0,R.H)({},r.offset,e.offset),n.transitionDuration=null!=(i=e.transitionDuration)?i:r.transitionDuration,n.trigger=null!=(s=e.trigger)?s:r.trigger,n.triggerOff=null!=(a=e.triggerOff)?a:r.triggerOff,{spec:n,theme:r}}_transformSpecAfterMergingTheme(e,t,i){var s,a,r,l,h,c,d;super._transformSpecAfterMergingTheme(e,t,i),e.visible=null==(s=e.visible)||s,e.activeType=(0,v.Zn)(e),e.renderMode=null!=(a=e.renderMode)?a:(0,n.Oy)(this._option.mode)||!(0,n.qe)(this._option.mode)?"canvas":"html",e.trigger=null!=(r=e.trigger)?r:"hover",e.className=null!=(l=e.className)?l:L.vP,e.enterable=null!=(h=e.enterable)&&h,e.transitionDuration=null!=(c=e.transitionDuration)?c:150,e.confine=null!=(d=e.confine)?d:"canvas"===e.renderMode,(0,o.Z)(e.parentElement)?(0,E.Z)(e.parentElement)&&(e.parentElement=C.rF.getElementById(e.parentElement)):(0,n.qe)(this._option.mode)&&(e.parentElement=null==n.Eh?void 0:n.Eh.body)}}var M=i(588712),O=i(71031);class w extends a.H{constructor(){super(...arguments),this.layoutZIndex=1,this.type=s.L.tooltip,this.name=s.L.tooltip,this.transformerConstructor=D,this.specKey="tooltip",this.layoutType="none",this._isReleased=!1,this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(e,t,i)=>{this.event.on(e,t,i),this._eventList.push({eventType:e,handler:i})},this._handleClickToLock=e=>{var t,i;if(this._clickLock)this._handleChartMouseOut(e),this._clickLock=!1;else{if(!this._isTooltipShown&&!(null==(i=null==(t=this.tooltipHandler)?void 0:t.isTooltipShown)?void 0:i.call(t)))return;this._clickLock=!0}},this._getMouseOutHandler=e=>t=>{var i,s,a,r,l;if(this._isReleased||this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(null==(s=null==(i=this.tooltipHandler)?void 0:i.isTooltipShown)?void 0:s.call(i)))return;let o=(0,n.qe)(null==(a=this._option)?void 0:a.mode),{clientX:h,clientY:c}=t.event;o&&e&&this._isPointerInChart({x:h,y:c})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(t)},null!=(l=null==(r=this._spec)?void 0:r.showDelay)?l:L.IK):this._handleChartMouseOut(t))},this._handleChartMouseOut=e=>{this._alwaysShow||this._isReleased||this._isEnterTooltip||"none"!==this._spec.triggerOff&&(this._hideTooltipByHandler(Object.assign(Object.assign({},e),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=e=>t=>{var i,s,a,n;this._isReleased||this._isEnterTooltip||(this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?e&&(this._handleChartMouseOut(t),this._clickLock=!1):!e&&this._enterable&&(null==(s=null==(i=this.tooltipHandler)?void 0:i.isTooltipShown)?void 0:s.call(i))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(t,e)},null!=(n=null==(a=this._spec)?void 0:a.showDelay)?n:L.IK)):this._handleChartMouseMove(t,e)))},this._handleChartMouseMove=(e,t)=>{if(this._isReleased)return;let i=this._getMouseEventData(e),{tooltipInfo:{dimension:s},ignore:{mark:a}}=i,n={mark:!1,dimension:!1,group:!1},r=["group","mark","dimension"];for(let s=0,a=r.length;s<a;s++){let a=r[s];if(this.processor[a]&&this._showTooltipByMouseEvent(a,i,e,t)){n[a]=!0;break}}Object.values(n).every(e=>!e)&&!(0,v.hx)(e)&&(a&&f(this._cacheInfo)?n.mark=this._showTooltipByMouseEvent("mark",i,e,t,!0):(0,o.Z)(s)&&(n.dimension=this._showTooltipByMouseEvent("dimension",i,e,t))),n.mark||n.group||n.dimension&&!(0,h.Z)(s)?this._initEventOfTooltipContent():this._handleChartMouseOut(e)},this._showTooltipByMouseEvent=(e,t,i,s,a)=>{var n;let r,l=this.processor[e];if(!l.shouldHandleTooltip(i,t.tooltipInfo[e]))return!1;if(this._hideTimer&&clearTimeout(this._hideTimer),a)r=!l.showTooltip(this._cacheInfo,i,!0);else{let s=t.tooltipInfo[e],a=this._isSameAsCache(s,i,e);(r=!l.showTooltip(s,i,a))&&(this._cacheInfo=s,this._cacheParams=i,this._cacheActiveType=e)}r&&(this._isTooltipShown=!0,s&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));let o=null==(n=this._option)?void 0:n.globalInstance;return r&&u.H.globalConfig.uniqueTooltip&&o&&u.H.hideTooltip(o.id),r},this._getMouseEventData=e=>{let t={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(i=>{let{tooltipInfo:s,ignore:a}=this.processor[i].getMouseEventData(e);t.tooltipInfo[i]=s,t.ignore[i]=a}),t},this._hideTooltipByHandler=e=>{var t,i,s;if(!this._isTooltipShown&&!(null==(i=null==(t=this.tooltipHandler)?void 0:t.isTooltipShown)?void 0:i.call(t)))return 0;this.event.emit(l.$7.tooltipHide,Object.assign(Object.assign({},e),{source:l.AY.chart,tooltip:this})),Object.values(this.processor).forEach(e=>{e.clearCache()});let a=null!=(s=this._spec.handler)?s:this.tooltipHandler;if(a.hideTooltip){let t=a.hideTooltip.call(a,e);return t||(this._isTooltipShown=!1),t}return 1},this.hideTooltip=()=>{if(this._isReleased)return!1;let e={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:l.AY.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(e)}}isTooltipShown(){return this._isTooltipShown}_registerEvent(){}_releaseEvent(){}onLayoutEnd(){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var e,t;super.release(),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:e,handler:t})=>{this.event.off(e,t)}),this._eventList=[],null==(t=null==(e=this.tooltipHandler)?void 0:e.release)||t.call(e),this._isTooltipShown=!1}beforeRelease(){this.event.emit(l.$7.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(l.$7.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var e,t,i;let s=null!=(e=this._spec.renderMode)?e:"html",a=this._option.globalInstance.getTooltipHandlerByUser();if(a)this.tooltipHandler=a,this._enterable=!1;else{let e="canvas"===s?L.a.canvas:L.a.dom,a=I.F.getComponentPluginInType(e);a||(0,M.vU)("Can not find tooltip handler: "+e);let n=new a;n.name=`${this._spec.className}-${null!=(t=this._option.globalInstance.id)?t:0}-${this.getSpecIndex()}`,null==(i=this.pluginService)||i.load([n]),this.tooltipHandler=n,this._spec.enterable&&"html"===s&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var e,t;if(!this._needInitEventOfTooltip)return;let i=null==(t=(e=this.tooltipHandler).getRootDom)?void 0:t.call(e);i&&(i.addEventListener("pointerenter",()=>{var e;if(!this._enterable)return;this._isEnterTooltip=!0;let t=null==(e=i.getBoundingClientRect)?void 0:e.call(i);t&&(this._cacheEnterableRect={width:t.width,height:t.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),i.addEventListener("pointerleave",()=>{var e,t,s;if(this._enterable&&(this._isEnterTooltip=!1,"none"!==this._spec.triggerOff&&this._cacheEnterableRect)){let a=null==(e=i.getBoundingClientRect)?void 0:e.call(i);a&&Object.keys(this._cacheEnterableRect).every(e=>this._cacheEnterableRect[e]===a[e])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,null!=(s=null==(t=this._spec)?void 0:t.showDelay)?s:L.IK))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){let e=this._spec.activeType;this.processor={},e.forEach(e=>{let t=I.F.createTooltipProcessor(e,this);t&&(this.processor[e]=t)})}_initEvent(){var e;if(this._option.disableTriggerEvent)return;let t=(0,b.IX)(null!=(e=this._spec.trigger)?e:"hover"),i=(0,b.IX)(this._spec.triggerOff),s=this._option.mode;t.forEach(e=>{var t;"hover"===e?(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),((0,n.wx)(s)||(0,n.Oy)(s))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))):"click"===e?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):(0,S.Z)(e)&&this._mountEvent(e.eventType,{source:null!=(t=e.source)?t:"chart",consume:e.consume},this._getMouseMoveHandler(!0))}),i.filter(e=>(0,S.Z)(e)).forEach(e=>{var t,i;this._mountEvent(e.eventType,{source:null!=(t=e.source)?t:"chart",consume:e.consume},this._getMouseOutHandler(null!=(i=e.checkOutside)&&i))}),!t.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(e){let t;return t=(0,A.Z)(this._spec.throttleInterval)?this._spec.throttleInterval:"html"===this._spec.renderMode&&this._spec.transitionDuration?50:10,(0,k.Z)(e,t)}reInit(e){var t,i,s;if(super.reInit(e),this.tooltipHandler){let e=null!=(t=this._spec.renderMode)?t:"html",a=this._spec.enterable&&"html"===e;a&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=a,null==(s=(i=this.tooltipHandler).reInit)||s.call(i)}else this._initHandler()}showTooltip(e,t){var i;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(null==(i=this.tooltipHandler)?void 0:i.showTooltip))return!1;let s=function(e,t,i){var s,a,n;let c=Object.assign({regionIndex:0},t),v=i.getOption(),y=v.getRegionsInUserIdOrIndex((0,o.Z)(c.regionId)?[c.regionId]:void 0,(0,o.Z)(c.regionIndex)?[c.regionIndex]:void 0)[0];if(!y)return"none";let f=((e,t)=>{let i=t.getSeries(),s=[];return i.forEach(t=>{var i,a,n,l,c,d,u;let v=t.getDimensionField(),y=t.getMeasureField(),f=t.getSeriesField(),x=(0,o.Z)(f)?e[f]:void 0,b=(0,o.Z)(f)&&null!=(l=null==(n=null==(a=null==(i=t.getViewDataStatistics)?void 0:i.call(t))?void 0:a.latestData[f])?void 0:n.values)?l:[],S=_(v,e),A=_(y,e),k=m(A),I=!k&&(0,o.Z)(f)&&(0,h.Z)(x)&&b.length>0,C=()=>{var e;let i=null==(e=t.getViewData())?void 0:e.latestData.find(g(v,S));if(!k&&!m(A=_(y,i)))return;let a=t.type===r.A.pie?t.dataToCentralPosition(i):t.dataToPosition(i);(0,h.Z)(a)||isNaN(a.x)||isNaN(a.y)||s.push({pos:a,data:{dimensionFields:v,dimensionData:S,measureFields:y,measureData:A,hasMeasureData:k,groupField:f,groupData:x},series:t})};if("cartesian"===t.coordinate){let e=(0,p.lK)(null==(d=null==(c=t.getYAxisHelper())?void 0:c.getScale(0))?void 0:d.type)?"y":"x",i=v.map((e,t)=>[e,t]).filter(([,e])=>(0,h.Z)(null==S?void 0:S[e])),a=[null!=S?S:[]];i.length>0&&i.forEach(([e,i])=>{var s,n,r,l;let o=null!=(l=null==(r=null==(n=null==(s=t.getViewDataStatistics)?void 0:s.call(t))?void 0:n.latestData[e])?void 0:r.values)?l:[],h=[];a.forEach(e=>{o.forEach(t=>{var s;let a=null!=(s=null==e?void 0:e.slice())?s:[];a[i]=t,h.push(a)})}),a=h}),a.forEach(i=>{var a,n;if(I){let n=null==(a=t.getViewData())?void 0:a.latestData.filter(g(v,i));b.forEach(a=>{let r=n.find(e=>e[f]===a);if(!m(A=_(y,r)))return;let l=t.dataToPosition(r);(0,h.Z)(l)||isNaN(l.x)||isNaN(l.y)||s.push({pos:l,data:{dimensionFields:v,dimensionData:i,measureFields:y,measureData:A,hasMeasureData:k,groupField:f,groupData:a},series:t,dimType:e})})}else{let a=null==(n=t.getViewData())?void 0:n.latestData.find(g(v,i));if(!k&&!m(A=_(y,a)))return;let r=t.dataToPosition(a);if((0,h.Z)(r)||isNaN(r.x)||isNaN(r.y))return;s.push({pos:r,data:{dimensionFields:v,dimensionData:i,measureFields:y,measureData:A,hasMeasureData:k,groupField:f,groupData:x},dimType:e,series:t})}})}else if("polar"===t.coordinate)if(t.type===r.A.pie)C();else if(I){let e=(null==(u=t.getViewData())?void 0:u.latestData.filter(g(v,S))).find(e=>e[f]===x);b.forEach(i=>{if(!m(A=_(y,e)))return;let a=t.dataToPosition(e);(0,h.Z)(a)||isNaN(a.x)||isNaN(a.y)||s.push({pos:a,data:{dimensionFields:v,dimensionData:S,measureFields:y,measureData:A,hasMeasureData:k,groupField:f,groupData:i},series:t})})}else C();else"geo"===t.coordinate&&C()}),s})(e,y),x=null!=(s=c.activeType)?s:f.length>1?"dimension":"mark",b=y.getLayoutStartPoint(),S=y.getLayoutRect(),A=v.globalInstance.getContainer(),k=Object.assign({x:0,y:0},A?(0,d.to)(A):{}),I=e=>{var t;let{dimensionFields:i,dimensionData:s,measureFields:a,measureData:n,groupField:r,groupData:l}=e.data;return null==(t=e.series.getViewData())?void 0:t.latestData.find(e=>g(i,s)(e)&&g(a,n)(e)&&((0,h.Z)(r)||g([r],[l])(e)))},C=e=>{var t,i;let s={x:Math.min(Math.max(e.x,0),S.width),y:Math.min(Math.max(e.y,0),S.height)},a=null!=(t=c.x)?t:b.x+s.x,n=null!=(i=c.y)?i:b.y+s.y;return{canvasX:a,canvasY:n,clientX:k.x+a,clientY:k.y+n}};if("dimension"===x){let t=f[0];if(!t)return"none";let s=new Map;f.forEach(e=>{var t;s.has(e.series)||s.set(e.series,[]),null==(t=s.get(e.series))||t.push(e)});let n=[{value:e[t.data.dimensionFields[0]],data:[...s.keys()].map(e=>{var t,i;return{series:e,datum:null!=(i=null==(t=s.get(e))?void 0:t.map(e=>I(e)))?i:[]}})}];(0,o.Z)(t.dimType)&&(n[0].position=t.pos[t.dimType],n[0].dimType=t.dimType);let r={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:n,chart:null!=(a=v.globalInstance.getChart())?a:void 0,datum:void 0,model:void 0,source:l.AY.chart,event:C({x:f.reduce((e,t)=>e+t.pos.x,0)/f.length,y:f.reduce((e,t)=>e+t.pos.y,0)/f.length}),item:void 0};i.processor.dimension.showTooltip(n,r,!1);let h=v.globalInstance;return u.H.globalConfig.uniqueTooltip&&u.H.hideTooltip(h.id),x}if("mark"===x){let t=f[0];if(!t)return"none";let s=Object.assign(Object.assign({},I(t)),e),a=[{datum:[s],series:t.series}],r={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:s[t.data.dimensionFields[0]],data:a}],chart:null!=(n=v.globalInstance.getChart())?n:void 0,datum:s,model:t.series,source:l.AY.chart,event:C(t.pos),item:void 0};i.processor.mark.showTooltip({datum:s,mark:null,series:t.series},r,!1);let o=v.globalInstance;return u.H.globalConfig.uniqueTooltip&&u.H.hideTooltip(o.id),x}return"none"}(e,t,this);return"none"!==s&&(this._alwaysShow=!!(null==t?void 0:t.alwaysShow)),s}_isSameAsCache(e,t,i){if(i!==this._cacheActiveType)return!1;if(e===this._cacheInfo)return!0;if((0,h.Z)(this._cacheInfo)||(0,h.Z)(e))return!1;if(x(e)){if(f(this._cacheInfo))return!1;let t=this._cacheInfo;return t.length===e.length&&e.every((e,i)=>(0,y.eH)(e,t[i]))}if(x(this._cacheInfo))return!1;let s=this._cacheInfo;if((null==e?void 0:e.datum)!==s.datum||(null==e?void 0:e.mark)!==s.mark||(null==e?void 0:e.series)!==s.series)return!1;let a=this._cacheParams;return!(0,h.Z)(a)&&!(0,h.Z)(t)&&a.mark===t.mark&&a.model===t.model&&a.datum===t.datum}_isPointerInChart(e){var t;let i=null==(t=this._option)?void 0:t.globalInstance;if(!i||!i.getChart())return!1;let{x:s,y:a}=e,{x:n,y:r,width:l,height:o}=i.getCanvas().getBoundingClientRect();return s>=n&&s<=n+l&&a>=r&&a<=r+o}getVisible(){return!1!==this._spec.visible}}w.type=s.L.tooltip,w.transformerConstructor=D,w.builtInTheme={tooltip:O.M},w.specKey="tooltip";let F=()=>{I.F.registerComponent(w.type,w)}},923010:function(e,t,i){i.d(t,{Lw:()=>u,Uy:()=>v,Zn:()=>d,hx:()=>p,nK:()=>m,u6:()=>y});var s=i(777678),a=i(933248),n=i(576225),r=i(7234),l=i(896294),o=i(531324),h=i(950613),c=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};let d=e=>{var t,i,a;if(!1===(null==e?void 0:e.visible))return[];let n={mark:!1!==(null==(t=null==e?void 0:e.mark)?void 0:t.visible),dimension:!1!==(null==(i=null==e?void 0:e.dimension)?void 0:i.visible),group:!1!==(null==(a=null==e?void 0:e.group)?void 0:a.visible)};return(0,s.Z)(null==e?void 0:e.activeType)&&Object.keys(n).forEach(t=>{var i;n[t]=null==(i=null==e?void 0:e.activeType)?void 0:i.includes(t)}),Object.keys(n).filter(e=>n[e])},u=(e,t)=>!t||!1!==t.visible&&(!t[e]||!1!==t[e].visible)&&!(t.activeType&&!((0,a.Z)(t.activeType)?t.activeType.includes(e):t.activeType===e));function p(e){return(0,n.Z)(e.mark)&&(0,n.Z)(e.model)&&(0,n.Z)(e.datum)}function _(e,t,i,l,o,d){let u=t=>{if(t){let a={datum:o},u=(0,n.Z)(t.key)&&(0,n.Z)(t.value)&&!(0,r.Z)(t)?Object.assign(Object.assign(Object.assign({},l),i),t):Object.assign(Object.assign({},l),t),{key:p,keyFormatter:_,keyTimeFormat:g,keyTimeFormatMode:m,value:v,valueFormatter:f,valueTimeFormat:x,valueTimeFormatMode:b}=u,S=c(u,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);a.key=y((0,h.Xb)(p,o,d,_),g,m),a.value=y((0,h.Xb)(v,o,d,f),x,b),Object.keys(S).forEach(e=>{a[e]=(0,h.Xb)(u[e],o,d)}),!1!==a.visible&&((0,s.Z)(a.key)||(0,s.Z)(a.value))&&e.push(a)}};(0,a.Z)(t)?t.forEach(e=>{u(e)}):u(t)}function g(e,t,i,s,a,n,r){(0,l.Z)(t)?_(e,t(a,r),i,s,n,r):t&&_(e,t,i,s,n,r)}function m(e,t,i,s,n,r){if(n&&n.length){let o=[];return n.forEach(n=>{(0,a.Z)(e)?e.forEach(e=>{g(o,e,t,i,s,n,r)}):(0,l.Z)(e)?g(o,e,t,i,s,n,r):e&&_(o,e,t,i,n,r)}),o}return null}function v(e){if(!e||!e.length)return null;let t=[];return e.forEach(({content:e})=>{e&&e.forEach(e=>{t.push(e)})}),t.length?Object.assign(Object.assign({},e[0]),{content:t}):e[0]}let y=(e,t,i)=>{if(!t&&!i)return"object"!=typeof e?null==e?void 0:e.toString():e;let s=o.k.getInstance();return t=t||"%Y%m%d",("local"===(i=i||"local")?s.timeFormat:s.timeUTCFormat)(t,e)}},950613:function(e,t,i){i.d(t,{Xb:()=>h,lg:()=>d,sE:()=>c});var s=i(896294),a=i(290493),n=i(777678),r=i(921763),l=i(576225),o=i(864985);let h=(e,t,i,l)=>{let h;if(h=(0,s.Z)(e)?e(t,i):(0,a.Z)(e)&&(0,n.Z)(e.field)?(0,r.Z)(t,e.field):e,l){let{formatFunc:i,args:s}=(0,o.HJ)(void 0,l,e,t);i&&s&&(h=i(...s))}return h},c=(e,t,i)=>(0,l.Z)(e)?e:(0,s.Z)(e)?e(t,i):e;function d(e){var t;for(let{data:i}of(null==(t=e[0])?void 0:t.series)?[{data:e,value:""}]:e)for(let{datum:e}of i)for(let t of null!=e?e:[])if(t)return t}},864985:function(e,t,i){i.d(t,{DE:()=>r,HJ:()=>l,ts:()=>o});var s=i(576225),a=i(933248),n=i(279090);function r(e,t){return t("component",e)}function l(e,t,i,s){if(e)return{formatFunc:e,args:[i,s]};let a=n.F.getFormatter();return t&&a?{formatFunc:a,args:[i,s,t]}:{}}let o=(e,t,i,n)=>{if((0,s.Z)(e[t]))return;let r=(0,a.Z)(e[t]),l=r?e[t]:[e[t]],o=[];return l.forEach((e,s)=>{e&&(!n||n(e))&&o.push({spec:e,specPath:r?[t,s]:[t],specInfoPath:["component",t,s],type:i})}),o}},459338:function(e,t,i){var s,a;i.d(t,{W:()=>s}),(a=s||(s={}))[a.Default=0]="Default",a[a.Theme=1]="Theme",a[a.Chart=2]="Chart",a[a.Base_Series=3]="Base_Series",a[a.Series=4]="Series",a[a.Mark=5]="Mark",a[a.User_Chart=6]="User_Chart",a[a.User_Series=7]="User_Series",a[a.User_Mark=8]="User_Mark",a[a.User_SeriesStyle=9]="User_SeriesStyle",a[a.Built_In=99]="Built_In"},145004:function(e,t,i){i.d(t,{Bq:()=>s,b:()=>n,rV:()=>a});let s="__VCHART",a=500,n=500},370612:function(e,t,i){i.d(t,{H:()=>r,l:()=>a});var s,a,n=i(145004);let r=`${n.Bq}_BOX_PLOT_OUTLIER_VALUE`;(s=a||(a={})).OUTLIER="outlier",s.MAX="max",s.MIN="min",s.MEDIAN="median",s.Q1="q1",s.Q3="q3",s.SERIES_FIELD="seriesField"},873604:function(e,t,i){i.d(t,{Rg:()=>n,hs:()=>r,wj:()=>a});var s=i(145004);let a=`${s.Bq}_CORRELATION_X`,n=`${s.Bq}_CORRELATION_Y`,r=`${s.Bq}_CORRELATION_SIZE`},241854:function(e,t,i){i.d(t,{AF:()=>_,Gq:()=>g,Io:()=>x,Iz:()=>m,Jl:()=>p,K4:()=>b,Ti:()=>l,Uq:()=>c,XW:()=>n,cL:()=>y,cQ:()=>h,eh:()=>o,fB:()=>u,lb:()=>r,mh:()=>f,vM:()=>a,wo:()=>v,x0:()=>d});var s=i(145004);s.Bq;let a=`${s.Bq}_DEFAULT_DATA_INDEX`,n=`${s.Bq}_DEFAULT_DATA_KEY`,r=`${s.Bq}_DEFAULT_DATA_SERIES_FIELD`,l=`${s.Bq}_DEFAULT_SERIES_STYLE_NAME`,o=`${s.Bq}_STACK_KEY`,h=`${s.Bq}_STACK_START`,c=`${s.Bq}_STACK_END`,d=`${s.Bq}_STACK_START_PERCENT`,u=`${s.Bq}_STACK_END_PERCENT`,p=`${s.Bq}_STACK_START_OffsetSilhouette`,_=`${s.Bq}_STACK_END_OffsetSilhouette`,g=`${s.Bq}_STACK_TOTAL`,m=`${s.Bq}_STACK_TOTAL_PERCENT`,v=`${s.Bq}_STACK_TOTAL_TOP`,y=`${s.Bq}_STACK_TOTAL_BOTTOM`;s.Bq,s.Bq,s.Bq,s.Bq;let f=`${s.Bq}_SEGMENT_START`,x=`${s.Bq}_SEGMENT_END`,b=`${s.Bq}_KEY`},75464:function(e,t,i){var s,a,n,r,l,o,h,c;i.d(t,{$7:()=>a,AY:()=>n,Ay:()=>u,Ve:()=>d,ZK:()=>s,l:()=>r}),(l=s||(s={})).BEFORE_EVALUATE_DATA="beforeEvaluateData",l.AFTER_EVALUATE_DATA="afterEvaluateData",l.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",l.AFTER_EVALUATE_SCALE="afterEvaluateScale",l.BEFORE_PARSE_VIEW="beforeParseView",l.AFTER_PARSE_VIEW="afterParseView",l.BEFORE_TRANSFORM="beforeTransform",l.AFTER_TRANSFORM="afterTransform",l.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",l.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",l.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",l.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",l.BEFORE_STAGE_RESIZE="beforeStageResize",l.AFTER_STAGE_RESIZE="afterStageResize",l.BEFORE_VRENDER_DRAW="beforeVRenderDraw",l.AFTER_VRENDER_DRAW="afterVRenderDraw",l.BEFORE_MARK_JOIN="beforeMarkJoin",l.AFTER_MARK_JOIN="afterMarkJoin",l.BEFORE_MARK_UPDATE="beforeMarkUpdate",l.AFTER_MARK_UPDATE="afterMarkUpdate",l.BEFORE_MARK_STATE="beforeMarkState",l.AFTER_MARK_STATE="afterMarkState",l.BEFORE_MARK_ENCODE="beforeMarkEncode",l.AFTER_MARK_ENCODE="afterMarkEncode",l.BEFORE_DO_LAYOUT="beforeDoLayout",l.AFTER_DO_LAYOUT="afterDoLayout",l.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",l.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",l.BEFORE_DO_RENDER="beforeDoRender",l.AFTER_DO_RENDER="afterDoRender",l.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",l.AFTER_MARK_RENDER_END="afterMarkRenderEnd",l.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",l.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",l.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",l.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",l.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",l.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",l.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",l.BEFORE_ELEMENT_STATE="beforeElementState",l.AFTER_ELEMENT_STATE="afterElementState",l.BEFORE_ELEMENT_ENCODE="beforeElementEncode",l.AFTER_ELEMENT_ENCODE="afterElementEncode",l.ANIMATION_START="animationStart",l.ANIMATION_END="animationEnd",l.ELEMENT_ANIMATION_START="elementAnimationStart",l.ELEMENT_ANIMATION_END="elementAnimationEnd",l.ALL_ANIMATION_START="allAnimationStart",l.ALL_ANIMATION_END="allAnimationEnd";let d=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];(o=a||(a={})).initialized="initialized",o.rendered="rendered",o.renderFinished="renderFinished",o.animationFinished="animationFinished",o.regionSeriesDataFilterOver="regionSeriesDataFilterOver",o.afterInitData="afterInitData",o.afterInitEvent="afterInitEvent",o.afterInitMark="afterInitMark",o.rawDataUpdate="rawDataUpdate",o.viewDataFilterOver="viewDataFilterOver",o.viewDataUpdate="viewDataUpdate",o.viewDataStatisticsUpdate="viewDataStatisticsUpdate",o.markDeltaYUpdate="markDeltaYUpdate",o.viewDataLabelUpdate="viewDataLabelUpdate",o.scaleDomainUpdate="scaleDomainUpdate",o.scaleUpdate="scaleUpdate",o.dataZoomChange="dataZoomChange",o.drill="drill",o.layoutStart="layoutStart",o.layoutEnd="layoutEnd",o.layoutRectUpdate="layoutRectUpdate",o.playerPlay="playerPlay",o.playerPause="playerPause",o.playerEnd="playerEnd",o.playerChange="playerChange",o.playerForward="playerForward",o.playerBackward="playerBackward",o.scrollBarChange="scrollBarChange",o.brushStart="brushStart",o.brushChange="brushChange",o.brushEnd="brushEnd",o.brushClear="brushClear",o.brushActive="brushActive",o.legendSelectedDataChange="legendSelectedDataChange",o.legendFilter="legendFilter",o.legendItemClick="legendItemClick",o.legendItemHover="legendItemHover",o.legendItemUnHover="legendItemUnHover",o.tooltipShow="tooltipShow",o.tooltipHide="tooltipHide",o.tooltipRelease="tooltipRelease",o.afterResize="afterResize",o.afterRender="afterRender",o.afterLayout="afterLayout",o.afterMarkLayoutEnd="afterMarkLayoutEnd",o.afterWordcloudShapeDraw="afterWordcloudShapeDraw",(h=n||(n={})).chart="chart",h.window="window",h.canvas="canvas",(c=r||(r={})).vchart="vchart",c.chart="chart",c.model="model",c.mark="mark";let u=[r.mark,r.model,r.chart,r.vchart]},914433:function(e,t,i){i.d(t,{Ce:()=>r,Er:()=>n,Jt:()=>v,L4:()=>u,VX:()=>h,_0:()=>g,ad:()=>a,dS:()=>c,nr:()=>m,o1:()=>p,u8:()=>l,wr:()=>_,zT:()=>d,zl:()=>o});var s=i(145004);let a=`${s.Bq}_FUNNEL_TRANSFORM_RATIO`,n=`${s.Bq}_FUNNEL_REACH_RATIO`,r=`${s.Bq}_FUNNEL_HEIGHT_RATIO`,l=`${s.Bq}_FUNNEL_VALUE_RATIO`,o=`${s.Bq}_FUNNEL_LAST_VALUE_RATIO`,h=`${s.Bq}_FUNNEL_NEXT_VALUE_RATIO`,c=`${s.Bq}_FUNNEL_LAST_VALUE`,d=`${s.Bq}_FUNNEL_CURRENT_VALUE`,u=`${s.Bq}_FUNNEL_NEXT_VALUE`,p=`${s.Bq}_FUNNEL_TRANSFORM_LEVEL`,_=20,g=5,m="80%",v=0},533325:function(e,t,i){i.d(t,{GL:()=>s,KG:()=>a});let s=["linear","radial","conical"],a={linear:{x0:0,y0:0,x1:1,y1:1},radial:{x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},conical:{x:.5,y:.5,startAngle:0,endAngle:2*Math.PI}}},699603:function(e,t,i){i.d(t,{Ko:()=>n,WF:()=>r,kR:()=>a});var s=i(145004);let a=`${s.Bq}_HIERARCHY_DEPTH`,n=`${s.Bq}_HIERARCHY_ROOT`,r=`${s.Bq}_HIERARCHY_ROOT_INDEX`},238218:function(e,t,i){i.d(t,{EY:()=>a});var s=i(145004);s.Bq,s.Bq,s.Bq;let a=`${s.Bq}_LABEL_VISIBLE`;s.Bq,s.Bq},663787:function(e,t,i){var s,a,n,r;i.d(t,{Ai:()=>s,pM:()=>a,sd:()=>o,wK:()=>l});let l=9,o=0;(n=s||(s={}))[n.SeriesGroup=0]="SeriesGroup",n[n.Axis_Grid=50]="Axis_Grid",n[n.CrossHair_Grid=100]="CrossHair_Grid",n[n.Region=450]="Region",n[n.Mark=300]="Mark",n[n.Node=400]="Node",n[n.Axis=100]="Axis",n[n.MarkLine=500]="MarkLine",n[n.MarkArea=100]="MarkArea",n[n.MarkPoint=500]="MarkPoint",n[n.DataZoom=500]="DataZoom",n[n.ScrollBar=500]="ScrollBar",n[n.Player=500]="Player",n[n.Legend=500]="Legend",n[n.CrossHair=500]="CrossHair",n[n.Indicator=500]="Indicator",n[n.Title=500]="Title",n[n.Label=500]="Label",n[n.Brush=500]="Brush",n[n.CustomMark=500]="CustomMark",n[n.Interaction=700]="Interaction",(r=a||(a={}))[r.Indicator=10]="Indicator",r[r.Region=20]="Region",r[r.Axis=30]="Axis",r[r.DataZoom=40]="DataZoom",r[r.Player=40]="Player",r[r.ScrollBar=40]="ScrollBar",r[r.Legend=50]="Legend",r[r.Title=70]="Title",r[r.CustomMark=70]="CustomMark"},248038:function(e,t,i){i.d(t,{A8:()=>l,Di:()=>g,E2:()=>a,FI:()=>r,JK:()=>u,KZ:()=>m,Uw:()=>p,Y1:()=>n,dr:()=>o,hk:()=>c,v2:()=>_,xt:()=>d,yz:()=>h});var s=i(145004);let a=`${s.Bq}_ARC_TRANSFORM_VALUE`,n=`${s.Bq}_ARC_RATIO`,r=`${s.Bq}_ARC_START_ANGLE`,l=`${s.Bq}_ARC_END_ANGLE`,o=`${s.Bq}_ARC_K`,h=`${s.Bq}_ARC_MIDDLE_ANGLE`,c=`${s.Bq}_ARC_QUADRANT`,d=`${s.Bq}_ARC_RADIAN`,u=-Math.PI/2,p=3*Math.PI/2,_=-90,g=270,m=.6},32496:function(e,t,i){i.d(t,{CF:()=>n,K:()=>a,XO:()=>h,b7:()=>l,pi:()=>r,qn:()=>o});var s=i(459774);let a=10,n=[10,20],r=s._f.Linear,l="circle",o=s._f.Ordinal,h=["circle","square","triangle","diamond","star"]},124990:function(e,t,i){i.d(t,{B:()=>s});let s=12},212023:function(e,t,i){i.d(t,{h:()=>s});let s=10},460482:function(e,t,i){i.d(t,{o:()=>a});var s=i(145004);let a=`${s.Bq}_waterfall_default_seriesField`},454916:function(e,t,i){i.d(t,{BY:()=>a});var s=i(145004);s.Bq,s.Bq,s.Bq,s.Bq,s.Bq;let a=`${s.Bq}_WORD_CLOUD_TEXT`;s.Bq},279090:function(e,t,i){i.d(t,{F:()=>l});var s=i(351758),a=i(423210),n=i(163281),r=i(399166);class l{static registerChart(e,t){l._charts[e]=t}static registerSeries(e,t){l._series[e]=t}static registerComponent(e,t,i,s){l._components[e]={cmp:t,alwaysCheck:i,createOrder:null!=s?s:0}}static registerGraphicComponent(e,t){l._graphicComponents[e]=t}static createGraphicComponent(e,t,i){let s=l._graphicComponents[e];return s?s(t,i):null}static registerMark(e,t){l._marks[e]=t}static registerRegion(e,t){l._regions[e]=t}static registerTransform(e,t){l.transforms[e]=t}static registerGrammarTransform(e,t){l._grammarTransforms[e]=t}static getGrammarTransform(e){return l._grammarTransforms[e]}static registerLayout(e,t){l._layout[e]=t}static registerAnimation(e,t){l._animations[e]=t}static registerImplement(e,t){l._implements[e]=t}static registerChartPlugin(e,t){l._chartPlugin[e]=t}static registerVChartPlugin(e,t){l._vChartPlugin[e]=t}static registerComponentPlugin(e,t){l._componentPlugin[e]=t}static createChart(e,t,i){return l._charts[e]?new(0,l._charts[e])(t,i):null}static getChart(e){return l._charts[e]}static createChartSpecTransformer(e,t){if(!l._charts[e])return null;let i=l._charts[e];return new(0,i.transformerConstructor)(Object.assign({seriesType:i.seriesType},t))}static createRegion(e,t,i){return l._regions[e]?new(0,l._regions[e])(t,i):null}static createRegionSpecTransformer(e,t){return l._regions[e]?new(0,l._regions[e].transformerConstructor)(t):null}static createSeries(e,t,i){return l._series[e]?new(0,l._series[e])(t,i):null}static createSeriesSpecTransformer(e,t){return l._series[e]?new(0,l._series[e].transformerConstructor)(t):null}static createMark(e,t,i){if(!l._marks[e])return null;let s=new(0,l._marks[e])(t,i);return"group"===s.type&&s.setMarkConfig({interactive:!1}),s}static getComponents(){return Object.values(l._components)}static getComponentInKey(e){return l._components[e].cmp}static getLayout(){return Object.values(l._layout)}static getLayoutInKey(e){return l._layout[e]}static getSeries(){return Object.values(l._series)}static getSeriesInType(e){return l._series[e]}static getRegionInType(e){return l._regions[e]}static getAnimationInKey(e){return l._animations[e]}static getImplementInKey(e){return l._implements[e]}static getSeriesMarkMap(e){return l._series[e]?l._series[e].mark:{}}static getSeriesBuiltInTheme(e){for(let t in l._series){let i=l._series[t];if(i&&i.builtInTheme&&i.builtInTheme[e])return i.builtInTheme[e]}return null}static getComponentBuiltInTheme(e){for(let t in l._components){let i=l._components[t];if(i&&i.cmp&&i.cmp.builtInTheme&&i.cmp.builtInTheme[e])return i.cmp.builtInTheme[e]}return null}static getChartPlugins(){return Object.values(l._chartPlugin)}static getVChartPlugins(){return Object.values(l._vChartPlugin)}static getComponentPlugins(){return Object.values(l._componentPlugin)}static getComponentPluginInType(e){return l._componentPlugin[e]}static registerFormatter(e){this._formatter=e}static getFormatter(){return this._formatter}static createInteractionTrigger(e,t){let i=l._interactionTriggers[e];return i?new i(t):null}static hasInteractionTrigger(e){return!!l._interactionTriggers[e]}static getComposedEvent(e){return l._composedEventMap[e]}}l._charts={},l._series={},l._components={},l._graphicComponents={},l._marks={},l._regions={},l._animations={},l._implements={},l._chartPlugin={},l._vChartPlugin={},l._componentPlugin={},l.transforms={fields:s.X,filter:a.h,fold:n.g},l.dataParser={csv:r.UI,dsv:r.$W,tsv:r.mK},l._layout={},l._grammarTransforms={},l._stageEventPlugins={},l.registerStageEventPlugin=(e,t)=>{l._stageEventPlugins[e]=t},l.getStageEventPlugin=e=>l._stageEventPlugins[e],l._interactionTriggers={},l.registerInteractionTrigger=(e,t)=>{l._interactionTriggers[e]=t},l._composedEventMap={},l.registerComposedEvent=(e,t)=>{l._composedEventMap[e]=t},l._tooltipProcessors={},l.registerTooltipProcessor=(e,t)=>{l._tooltipProcessors[e]=t},l.createTooltipProcessor=(e,t)=>{let i=l._tooltipProcessors[e];return i?new i(t):null}},856721:function(e,t,i){i.d(t,{u:()=>a});var s=i(835151);class a{static registerInstance(e){a.instances.set(e.id,e)}static unregisterInstance(e){a.instances.delete(e.id)}static getInstance(e){return a.instances.get(e)}static instanceExist(e){return a.instances.has(e)}static forEach(e,t=[],i){let n=(0,s.IX)(t);return a.instances.forEach((t,i,s)=>{n.includes(i)||e(t,i,s)},i)}}a.instances=new Map},140895:function(e,t,i){i.d(t,{H:()=>eg});var s=i(865966),a=i(303401),n=i(72754),r=i(586831),l=i(736299),o=i(102094),h=i(990389),c=i(777678),d=i(181645),u=i(342279),p=i(466013),_=i(835151),g=i(576225),m=i(207997),v=i(505441),y=i(453375),f=i(588712),x=i(311944),b=i(522269),S=i(279090),A=i(368231),k=i(785009),I=i(110838),C=i(924706),E=i(586673),T=i(212264),L=i(194457),R=i(472938),D=i(75464),M=i(675630),O=i(521107),w=i(524666),F=i(989568),P=i(434544),B=i(234630),Z=i(35121);class z{getRootGroup(){return this._rootGroup}constructor(e,t){this._count=0,this._rootMarks=[],this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._compileChart=null,this.handleLayoutEnd=()=>{var e,t;null==(t=null==(e=this._compileChart)?void 0:e.getEvent())||t.emit(D.$7.afterMarkLayoutEnd,{chart:this._compileChart})},this.handleStageRender=()=>{var e,t;null==(t=null==(e=this._compileChart)?void 0:e.getEvent())||t.emit(D.$7.afterRender,{chart:this._compileChart})},this._handleAfterNextRender=()=>{var e,t,i,s;this._stage&&!this._option.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._compileChart&&(null==(e=this._compileChart.getEvent())||e.emit(D.$7.renderFinished,{chart:this._compileChart,vchart:null==(t=this._compileChart.getOption())?void 0:t.globalInstance})),null==(s=null==(i=this._option.performanceHook)?void 0:i.afterVRenderDraw)||s.call(i,this._compileChart.getOption().globalInstance)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(e=>{e.isDoingProgressive()&&e.renderProgressive()}),this.doPreProgressive()},this._container=e,this._option=t}getChart(){return this._compileChart}getCanvas(){var e;return null==(e=this._stage)?void 0:e.window.getNativeHandler().nativeCanvas}getStage(){return this._stage}initView(){var e,t,i,s;if(this._released||(this.isInited=!0,this._stage))return;let{autoRefreshDpr:a,dpr:n,mode:r,modeParams:l,gestureConfig:o,interactive:d,clickInterval:u,autoPreventDefault:p,background:_}=this._option;h.rF.setEnv((0,Z.IU)(r),null!=l?l:{}),this._stage=null!=(e=this._option.stage)?e:new w.H(Object.assign({background:_,width:this._width,height:this._height,container:null!=(t=this._container.dom)?t:null,canvas:null!=(i=this._container.canvas)?i:null,dpr:n,viewBox:this._option.viewBox,canvasControled:this._option.canvasControled,beforeRender:e=>{var t,i,s;null==(t=this._compileChart)||t.onBeforeRender(),null==(s=(i=this._option).beforeRender)||s.call(i,e)},afterRender:this._option.afterRender,disableDirtyBounds:!0,autoRender:!0,ticker:this._option.ticker,pluginList:this._option.pluginList,enableHtmlAttribute:this._option.enableHtmlAttribute,optimize:this._option.optimize,supportsTouchEvents:this._option.supportsTouchEvents,supportsPointerEvents:this._option.supportsPointerEvents,event:{clickInterval:u,autoPreventDefault:p},ReactDOM:this._option.ReactDOM,autoRefresh:(0,c.Z)(a)?a:!(0,c.Z)(n)},null!=(s=this._option.renderHooks)?s:{})),this._stage.enableIncrementalAutoRender(),this._stage.setTheme({symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}});let g=(0,F.sS)({x:0,y:0,width:this._width,height:this._height});g.name="root",this._stage.defaultLayer.appendChild(g),this._rootGroup=g;let m=((0,c.Z)(o)?o:(0,y.wx)(r))&&!1!==d&&S.F.getStageEventPlugin("gesture");m&&(this._gestureController=new m(this._stage,(0,O.Z)(o)?o:{})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),!1!==d&&this._viewListeners.forEach(e=>{})}getLayoutState(){return this._layoutState}updateLayoutTag(){this._layoutState=M.$.before}_setCanvasStyle(){if(this._stage&&this._container.dom&&!(0,u.Z)(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";let e=this.getCanvas();e&&(e.style.display="block")}}compile(e,t){if(this._released)return;let{chart:i}=e;this._compileChart=i,this.initView(),this._stage&&("render"!==(null==t?void 0:t.actionSource)&&this._cachedMarks&&(this.reuseOrMorphing(t.morphConfig),this._cachedMarks=null),i.compile(),i.afterCompile())}clearNextRender(){return!!this._nextRafId&&(h.rF.getSpecifiedCancelAnimationFrame(10)(this._nextRafId),this._nextRafId=null,!0)}clear(e){let{chart:t}=e;this.clearNextRender(),t.clear()}renderNextTick(e){this._released||(this._nextRafId&&this.clearNextRender(),this._nextRafId=h.rF.getSpecifiedRequestAnimationFrame(10)(()=>{this._nextRafId=null,this.render(e)}))}_commitedAll(){return this._rootMarks.some(e=>(0,Z.wS)(e,e=>e.commit()))}_hasCommitedMark(){return this._rootMarks.some(e=>(0,Z.wS)(e,e=>e.isCommited(),null,null,!0))}_doRender(e){var t,i,s,a,n,r;null==(i=null==(t=this._option.performanceHook)?void 0:t.beforeDoRender)||i.call(t,this._compileChart.getOption().globalInstance),this._stage&&(this._rootMarks.forEach(e=>{(0,Z.wS)(e,e=>{e.needClear&&(this._progressiveMarks||e.runAnimation(),e.clearExitGraphics(),e.needClear=!1)},null,!0)}),null==(a=null==(s=this._option.performanceHook)?void 0:s.beforeVRenderDraw)||a.call(s,this._compileChart.getOption().globalInstance),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this._handleAfterNextRender),e&&(this._stage.render(),null==(r=null==(n=this._option.performanceHook)?void 0:n.afterVRenderDraw)||r.call(n,this._compileChart.getOption().globalInstance)))}renderMarks(){var e;this._hasCommitedMark()&&((0,f.cM)(`--- start of renderMarks(${this._count}) ---`),this.clearProgressive(),this._rootMarks.forEach(e=>{e.render()}),this._layoutState===M.$.before&&(this._layoutState=M.$.layouting,null==(e=this._compileChart)||e.onLayout(),this._layoutState=M.$.reevaluate,this._hasCommitedMark()&&this._rootMarks.forEach(e=>{e.render()}),this.handleLayoutEnd()),this.findProgressiveMarks(),this._doRender(!0),this.doPreProgressive(),(0,f.cM)(`--- start of renderMarks(${this._count}) ---`),this._count++)}reuseOrMorphing(e={}){let{reuse:t=!0,morph:i=!0,morphAll:s=!1,animation:a={},enableExitAnimation:n=!1}=e,r=(0,Z.yw)(this._rootMarks),{update:l,exit:o}=(0,Z.ui)(this._cachedMarks,r,{morph:i,morphAll:s,reuse:t});l.forEach(({prev:e,next:i})=>{if(t&&1===e.length&&1===i.length&&e[0].type===i[0].type)i[0].reuse(e[0]);else{let t=e.filter(e=>e.getMarkConfig().morph)[0];t&&i.forEach(e=>{e.getMarkConfig().morph&&e.prepareMorph(t)})}}),o.forEach(({prev:e})=>{e.forEach(e=>{e.removeProduct()})})}render(e){if(this._released||(this.clearNextRender(),this.initView(),!this._stage))return;let{width:t,height:i}=this._rootGroup.attribute;this._width===t&&this._height===i||this._rootGroup.setAttributes({width:this._width,height:this._height}),this.renderMarks(),this.clearNextRender()&&this.renderMarks()}updateViewBox(e,t=!0){if(!this._stage)return;let i=this._stage.viewBox;!e||i&&i.x1===e.x1&&i.y1===e.y1&&i.x2===e.x2&&i.y2===e.y2||this._stage.setViewBox(e,t)}resize(e,t,i=!0){if(!this._stage)return;let s=this._width!==e||this._height!==t;this._width=e,this._height=t,s&&(this._stage.resize(e,t),this._commitedAll(),i&&this.render({morph:!1}))}setBackground(e){this._stage&&(this._stage.background=e)}setSize(e,t){this._width=e,this._height=t,this._stage}setViewBox(e,t=!0){this.updateViewBox(e,t)}addEventListener(e,t,i){var s,a;if(!1!==this._option.interactive){if(e===D.AY.chart){let a=this.getRootGroup(),n=(function(s){var n;let r=s.target,l=null;r&&(l=(0,c.Z)(r.context)?r:(0,B.xd)(a,r));let o=null!=(n=null==l?void 0:l.context)?n:{},h=(0,c.Z)(o.markId)?o.markId:null,d=(0,c.Z)(o.modelId)?o.modelId:null,u=(0,c.Z)(o.modelUserId)?o.modelUserId:null,p=(0,c.Z)(o.markUserId)?o.markUserId:null,_={event:s,type:t,source:e,item:l,datum:(0,B.BY)(l),markId:h,modelId:d,markUserId:p,modelUserId:u};i.call(null,_)}).bind(this);this._viewListeners.set(i,{type:t,callback:n}),null==(s=this._stage)||s.addEventListener(t,n)}else if(e===D.AY.window){let s=(function(s){i.call(null,{event:s,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._windowListeners.set(i,{type:t,callback:s});let a=this._getGlobalThis();null==a||a.addEventListener(t,s)}else if(e===D.AY.canvas){let s=(function(s){i.call(null,{event:s,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._canvasListeners.set(i,{type:t,callback:s});let n=null==(a=this.getStage())?void 0:a.window;null==n||n.addEventListener(t,s)}}}removeEventListener(e,t,i){var s,a,n,r,l;if(!1!==this._option.interactive){if(e===D.AY.chart){let e=null==(s=this._viewListeners.get(i))?void 0:s.callback;e&&(null==(a=this._stage)||a.removeEventListener(t,e)),this._viewListeners.delete(i)}else if(e===D.AY.window){let e=this._getGlobalThis(),s=null==(n=this._windowListeners.get(i))?void 0:n.callback;s&&(null==e||e.removeEventListener(t,s)),this._windowListeners.delete(i)}else if(e===D.AY.canvas){let e=null==(r=this.getStage())?void 0:r.window,s=null==(l=this._canvasListeners.get(i))?void 0:l.callback;e&&s&&(null==e||e.removeEventListener(t,s)),this._canvasListeners.delete(i)}}}releaseEvent(){let e=this.getStage();e&&e.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var e;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this.releaseGrammar(!0),this._stage!==(null==(e=this._option)?void 0:e.stage)&&this._stage.release(),this._stage=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(e=!1){e?this._rootMarks.forEach(e=>{(0,Z.wS)(e,e=>{e.removeProduct()},null,!0)}):this._cachedMarks=(0,Z.yw)(this._rootMarks),this._rootMarks=[]}addRootMark(e){this._rootMarks.includes(e)||this._rootMarks.push(e)}getRootMarks(){return this._rootMarks}removeRootMark(e){let t=this._rootMarks.findIndex(t=>t===e);return t>=0&&(this._rootMarks.splice(t,1),!0)}_getGlobalThis(){var e;return(0,y.qe)(this._option.mode)?globalThis:null==(e=this.getStage())?void 0:e.window}_combineIncrementalLayers(){this._stage&&(0,P.b4)(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()})}findProgressiveMarks(){let e=[];return this._rootMarks.forEach(t=>{(0,Z.wS)(t,t=>{t.isProgressive()&&e.push(t)})}),e.length?(this._progressiveMarks=e,this._combineIncrementalLayers(),e):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(e=>e.isDoingProgressive())){let e=h.rF.getSpecifiedRequestAnimationFrame(10);this._progressiveRafId=e(this.handleProgressiveFrame)}else this._progressiveMarks&&this._progressiveMarks.every(e=>e.canAnimateAfterProgressive())?this._progressiveMarks.forEach(e=>{e.runAnimation()}):this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&h.rF.getSpecifiedCancelAnimationFrame(10)(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(e=>{e.clearProgressive()}),this._progressiveMarks=null)}}var H=i(506852),V=i(145004),j=i(425575),U=i(971800),N=i(26688),X=i(896294),$=i(933248),K=i(456337),Y=i(7234),G=i(856721),q=i(307827),W=i(272945),Q=i(886956),J=i(122026),ee=i(851860);let et={measureText:i(445425).X};class ei{static instance(){return ei.instance_||(ei.instance_=new ei),ei.instance_}constructor(){this.functions={}}registerFunction(e,t){e&&t&&(this.functions[e]=t)}unregisterFunction(e){e&&delete this.functions[e]}getFunction(e){return this.functions[e]||null}getFunctionNameList(){return Object.keys(this.functions)}}var es=i(209094),ea=i(734454),en=i(826268),er=i(417664),el=i(846893),eo=i(992707),eh=i(171624),ec=i(535727),ed=i(589352),eu=i(32657),ep=function(e,t,i,s){return new(i||(i=Promise))(function(a,n){function r(e){try{o(s.next(e))}catch(e){n(e)}}function l(e){try{o(s.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?a(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,l)}o((s=s.apply(e,t||[])).next())})},e_=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};class eg{static useRegisters(e){e.forEach(e=>{"function"==typeof e?e():console.error("Invalid function:",e)})}static useChart(e){e.forEach(e=>S.F.registerChart(e.type,e))}static useSeries(e){e.forEach(e=>S.F.registerSeries(e.type,e))}static useComponent(e){e.forEach(e=>S.F.registerComponent(e.type,e))}static useMark(e){e.forEach(e=>{var t;return S.F.registerMark(null!=(t=e.constructorType)?t:e.type,e)})}static useLayout(e){e.forEach(e=>S.F.registerLayout(e.type,e))}static registerDataSetTransform(e,t){S.F.registerTransform(e,t)}static registerFunction(e,t){e&&t&&ei.instance().registerFunction(e,t)}static unregisterFunction(e){e&&ei.instance().unregisterFunction(e)}static getFunction(e){return e?ei.instance().getFunction(e):null}static getFunctionList(){return ei.instance().getFunctionNameList()}static registerMap(e,t,i){let s=S.F.getImplementInKey("registerMap");s&&s(e,t,i)}static unregisterMap(e){let t=S.F.getImplementInKey("unregisterMap");t&&t(e)}static getMap(e){return(0,I.Jw)(e)}static registerSVG(e,t,i){let s=S.F.getImplementInKey("registerSVG");s&&s(e,t,i)}static unregisterSVG(e){let t=S.F.getImplementInKey("unregisterSVG");t&&t(e)}static hideTooltip(e=[]){G.u.forEach(e=>{var t;return null==(t=null==e?void 0:e.hideTooltip)?void 0:t.call(e)},e)}static getLogger(){return j.Y.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}get event(){return this._event}getDataSet(){return this._dataSet}constructor(e,t){var i,s,n,r,l,o,p,_,g;this.id=(0,m.a)(),this._userEvents=[],this._autoSize=!0,this._option={mode:a.i["desktop-browser"],onError:e=>{throw Error(e)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._doResize=()=>{let{width:e,height:t}=this.getCurrentSize();this._currentSize.width===e&&this._currentSize.height===t||(this._currentSize={width:e,height:t},this.resizeSync(e,t))},this._renderSync=(e={})=>{var t;return this._beforeRender(e)&&(null==(t=this._compiler)||t.render(e.morphConfig),this._updateAnimateState(!1),this._afterRender()),this},this._updateSpec=(e,t=!1,i)=>{var s;let a=this._spec,n={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(e,t))return;if((0,U.X)(a.theme,this._spec.theme)?(0,U.X)(this._spec.background,a.background)||(n.reMake=!0,n.changeBackground=!0):n.changeTheme=!0,n.reSize=this._shouldChartResize(a),this._spec.type!==a.type)return null==(s=this._compiler)||s.updateLayoutTag(),n.reMake=!0,n.reTransformSpec=!0,n.change=!0,n.changeTheme=!0,n;this._initChartSpec(this._spec,"updateSpec");let r=(0,W.eo)(this._chart.updateSpec(this._spec),n);return i?Object.assign(Object.assign({},r),i):r},this.getTheme=(...e)=>{if(!this._currentTheme||!e||!e.length)return;this._cachedProcessedTheme||(this._cachedProcessedTheme={});let t=e.join(".");if(this._cachedProcessedTheme[t])return this._cachedProcessedTheme[t];let i=this._currentTheme;return e.forEach((t,s)=>{if(1!==s||"series"!==e[0]&&"component"!==e[0])i=null==i?void 0:i[t];else{let s="series"===e[0]?S.F.getSeriesBuiltInTheme(t):S.F.getComponentBuiltInTheme(t);i=i?(0,b.H)({},s,i[t]):s}s===e.length-1&&(0,c.Z)(i)&&(i=(0,ea.v)({[t]:i},this._currentTheme.colorScheme,this._currentTheme.token)[t])}),this._cachedProcessedTheme[t]=i,i},(0,d.o2)(t),this._option=Object.assign(Object.assign({},this._option),t),(null==t?void 0:t.optimize)&&(this._option.optimize=Object.assign(Object.assign({},this._option.optimize),t.optimize)),this._onError=null==(i=this._option)?void 0:i.onError;let v=this._option,{dom:f,renderCanvas:x,mode:I,stage:C,poptip:E}=v,T=e_(v,["dom","renderCanvas","mode","stage","poptip"]),L=(0,y.qe)(I);if(L?(0,es.i)():"node"===I&&(0,es.Mx)(),L&&f&&(this._container=(0,u.Z)(f)?h.rF.getElementById(f):f),x&&(this._canvas=x),C&&(this._stage=C),"node"!==I&&!this._container&&!this._canvas&&!this._stage)return void(null==(s=this._option)||s.onError("please specify container or renderCanvas!"));this._viewBox=this._option.viewBox,this._currentThemeName=R.V.getCurrentThemeName(),this._setNewSpec(e),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();let D=[];!1!==E&&D.push("poptipForText"),"sankey"===e.type&&D.push("scrollbar");let M=new j.Y(null!=(n=this._option.logLevel)?n:j.h.Error);j.Y.setInstance(M),(null==(r=this._option)?void 0:r.onError)&&M.addErrorHandler((...e)=>{var t,i;null==(i=null==(t=this._option)?void 0:t.onError)||i.call(t,...e)}),this._compiler=new z({dom:null!=(l=this._container)?l:"none",canvas:x},Object.assign(Object.assign({mode:this._option.mode,stage:C,pluginList:D},T),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new k.p(this,this._compiler),this._event=new A.j(this._eventDispatcher,I),this._compiler.initView(),this._compiler.updateLayoutTag(),this._setFontFamilyTheme(this.getTheme("fontFamily")),this._initDataSet(this._option.dataSet),this._autoSize=!!L&&(null==(p=null!=(o=e.autoFit)?o:this._option.autoFit)||p),this._bindResizeEvent(),this._bindViewEvent(),this._initChartPlugin(),G.u.registerInstance(this),null==(g=null==(_=this._option.performanceHook)?void 0:_.afterCreateVChart)||g.call(_,this)}_setNewSpec(e,t){return!!e&&((0,u.Z)(e)&&(e=JSON.parse(e)),t&&this._originalSpec&&(e=(0,b.H)({},this._originalSpec,e)),this._originalSpec=e,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var e;let t=(0,p.x)(this._originalSpec);return t.data=null!=(e=t.data)?e:[],t}_initChartSpec(e,t){var i,s;eg.getFunctionList()&&eg.getFunctionList().length&&(e=(0,p.O)(e,eg)),this._spec=e,this._chartSpecTransformer||(this._chartSpecTransformer=S.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),null==(i=this._chartSpecTransformer)||i.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,t),this._specInfo=null==(s=this._chartSpecTransformer)?void 0:s.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,t)}_updateSpecInfo(){var e;this._chartSpecTransformer||(this._chartSpecTransformer=S.F.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=null==(e=this._chartSpecTransformer)?void 0:e.createSpecInfo(this._spec)}_initChart(e){var t,i,s;if(!this._compiler)return void(null==(t=this._option)||t.onError("compiler is not initialized"));if(this._chart)return void(null==(i=this._option)||i.onError("chart is already initialized"));let a=S.F.createChart(e.type,e,this._getChartOption(e.type));a?(this._chart=a,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(D.$7.initialized,{chart:a,vchart:this})):null==(s=this._option)||s.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindViewEvent(){var e,t;this._compiler&&(null==(t=null==(e=this._compiler.getStage())?void 0:e.getTimeline())||t.on("animationEnd",()=>{this._event.emit(D.$7.animationFinished,{chart:this._chart,vchart:this})}))}_bindResizeEvent(){var e,t;if(this._autoSize){if(this._onResize=(0,N.Z)(this._doResize,null!=(e=this._option.resizeDelay)?e:100),this._container){let e=window.ResizeObserver;e&&(this._observer=new e(this._onResize),null==(t=this._observer)||t.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var e,t,i,s;return(0,W.hK)(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:null!=(t=null==(e=this._currentSize)?void 0:e.width)?t:V.rV,height:null!=(s=null==(i=this._currentSize)?void 0:i.height)?s:V.b})}_initDataSet(e){for(let t in this._dataSet=e instanceof r.q?e:new r.q,(0,C.I)(this._dataSet,"dataview",l.i),(0,C.I)(this._dataSet,"array",s.Q),(0,C.U)(this._dataSet,"copyDataView",T.Y),S.F.transforms)(0,C.U)(this._dataSet,t,S.F.transforms[t]);for(let e in S.F.dataParser)(0,C.I)(this._dataSet,e,S.F.dataParser[e])}updateCustomConfigAndRerender(e,t,i={}){if(!this._isReleased&&e)return(0,X.Z)(e)&&(e=e()),e.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(e),t?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(e,t={}){return!!e&&(this._reCompile(e),this._beforeRender(t))}_reCompile(e,t){var i,s,a,n,r,l,o;if(e.reMake&&(this._releaseData(),this._initDataSet(),null==(i=this._chart)||i.release(),this._chart=null),e.reTransformSpec&&(this._chartSpecTransformer=null),e.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(this.getTheme("fontFamily"))):e.changeBackground&&(null==(s=this._compiler)||s.setBackground(this._getBackground())),e.reMake?(null==(a=this._compiler)||a.releaseGrammar(),this._userEvents.forEach(e=>{var t;return null==(t=this._event)?void 0:t.on(e.eType,e.query,e.handler)})):e.reCompile&&(null==(n=this._compiler)||n.clear({chart:this._chart,vChart:this}),null==(r=this._compiler)||r.compile({chart:this._chart,vChart:this})),e.reSize){let{width:e,height:t}=this.getCurrentSize();this._currentSize={width:e,height:t},null==(l=this._chart)||l.onResize(e,t,!1),null==(o=this._compiler)||o.resize(e,t,!1)}}_beforeRender(e={}){var t,i,s,a,n,r,l,o;if(this._isReleased)return!1;if(this._chart)return!0;let{transformSpec:h,actionSource:c}=e;return h&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,c),null==(i=null==(t=this._option.performanceHook)?void 0:t.beforeInitializeChart)||i.call(t,this),this._initChart(this._spec),null==(a=null==(s=this._option.performanceHook)?void 0:s.afterInitializeChart)||a.call(s,this),!(!this._chart||!this._compiler)&&(null==(r=null==(n=this._option.performanceHook)?void 0:n.beforeCompileToVGrammar)||r.call(n,this),this._compiler.compile({chart:this._chart,vChart:this},e),null==(o=null==(l=this._option.performanceHook)?void 0:l.afterCompileToVGrammar)||o.call(l,this),!0)}_afterRender(){return!this._isReleased&&(this._event.emit(D.$7.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(e){return this._renderSync({morphConfig:e,transformSpec:!0,actionSource:"render"})}renderAsync(e){return ep(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:e,transformSpec:!0,actionSource:"render"})})}_renderAsync(e={}){return ep(this,void 0,void 0,function*(){return this._renderSync(e)})}_updateAnimateState(e){var t,i;if(this.isAnimationEnable()){let s=t=>{var i;let s=null==(i=t.context)?void 0:i.diffState;return e?"exit"===s?L.h.none:L.h.appear:s};null==(t=this._chart)||t.getAllRegions().forEach(e=>{e.updateAnimateStateCallback(s)}),null==(i=this._chart)||i.getAllComponents().forEach(e=>{e.updateAnimateStateCallback(s)})}}release(){var e,t,i,s;(null==(e=this._onResize)?void 0:e.cancel)&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,null==(t=this._chart)||t.release(),null==(i=this._eventDispatcher)||i.release(),null==(s=this._compiler)||s.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._cachedProcessedTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,G.u.unregisterInstance(this)}updateData(e,t,i,s){return ep(this,void 0,void 0,function*(){return this.updateDataSync(e,t,i,s)})}_updateDataById(e,t,i){let s=this._spec.data.find(t=>t.name===e||t.id===e);s?s.id===e?s.values=t:s.name===e&&s.parse(t,i):(0,$.Z)(t)?this._spec.data.push({id:e,values:t}):this._spec.data.push(t)}updateDataInBatches(e){return ep(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(e.map(({id:e,data:t,options:i})=>({id:e,values:t,parser:i}))),this._chart.updateGlobalScaleDomain(),this._compiler.render()):(this._spec.data=(0,_.IX)(this._spec.data),e.forEach(({id:e,data:t,options:i})=>{this._updateDataById(e,t,i)})),this})}updateDataSync(e,t,i,s){return(0,g.Z)(this._dataSet)||(this._chart?(this._chart.updateData(e,t,!0,i),(null==s?void 0:s.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render()):(this._spec.data=(0,_.IX)(this._spec.data),this._updateDataById(e,t,i))),this}updateFullDataSync(e,t=!0,i){if(this._chart)return this._chart.updateFullData(e),t&&((null==i?void 0:i.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render()),this;let s=(0,_.IX)(this._spec.data);return(0,_.IX)(e).forEach(e=>{let{id:t,values:i,parser:a,fields:n}=e,r=s.find(e=>e.name===t);if(r)r instanceof o.V?(r.setFields((0,K.Z)(n)),r.parse(i,(0,K.Z)(a))):(r.values=i,(0,c.Z)(a)&&(r.parser=a),(0,c.Z)(n)&&(r.fields=n));else{let t=(0,E.J3)(e,this._dataSet,s);(0,$.Z)(this._spec.data)&&this._spec.data.push(t)}}),this}updateFullData(e,t=!0){return ep(this,void 0,void 0,function*(){return this.updateFullDataSync(e,t)})}updateSpec(e,t=!1,i,s){return ep(this,void 0,void 0,function*(){let a=this._updateSpec(e,t,s);return a&&(yield this.updateCustomConfigAndRerender(a,!1,{morphConfig:i,transformSpec:a.reTransformSpec,actionSource:"updateSpec"})),this})}updateSpecSync(e,t=!1,i,s){let a=this._updateSpec(e,t,s);return a&&this.updateCustomConfigAndRerender(a,!0,{morphConfig:i,transformSpec:a.reTransformSpec,actionSource:"updateSpec"}),this}updateSpecAndRecompile(e,t=!1,i={}){let s=this._updateSpec(e,t);return this._updateCustomConfigAndRecompile(s,Object.assign({actionSource:"updateSpecAndRecompile"},i))}updateModelSpec(e,t,i=!1,s){return ep(this,void 0,void 0,function*(){return this.updateModelSpecSync(e,t,i,s)})}updateModelSpecSync(e,t,i=!1,s){if(!t||!this._spec)return this;if((0,u.Z)(t)&&(t=JSON.parse(t)),(0,X.Z)(e)||(0,b.K)(this._spec,e,t,i),this._chart){let a=this._chart.getModelInFilter(e);if(a)return this._updateModelSpec(a,t,!0,i,s)}return this}_updateModelSpec(e,t,i=!1,s=!1,a){s&&(t=(0,b.H)({},e.getSpec(),t));let n=e.updateSpec(t);return e.reInit(t),(n.change||n.reCompile||n.reMake||n.reSize||n.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(n,i,{morphConfig:a,transformSpec:!1,actionSource:"updateModelSpec"})}resize(e,t){return ep(this,void 0,void 0,function*(){return this.resizeSync(e,t)})}resizeSync(e,t){var i,s;return this._beforeResize(e,t)?(null==(s=(i=this._compiler).resize)||s.call(i,e,t),this._afterResize()):this}_beforeResize(e,t){var i,s,a,n;if(!this._chart||!this._compiler)return!1;let r=this._chart.getCanvasRect();return(!r||r.width!==e||r.height!==t)&&(this._chartPluginApply("onBeforeResize",e,t),null==(s=null==(i=this._option.performanceHook)?void 0:i.beforeResizeWithUpdate)||s.call(i,this),this._chart.onResize(e,t,!1),null==(n=null==(a=this._option.performanceHook)?void 0:a.afterResizeWithUpdate)||n.call(a,this),!0)}_afterResize(){return this._isReleased||this._event.emit(D.$7.afterResize,{chart:this._chart}),this}updateViewBox(e,t=!0,i=!0){return this._chart&&this._compiler&&(this._viewBox=e,this._chart.updateViewBox(e,i),i&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(e,t)),this}on(e,t,i){var s;this._userEvents&&(this._userEvents.push({eType:e,query:"function"==typeof t?null:t,handler:"function"==typeof t?t:i}),null==(s=this._event)||s.on(e,t,i))}off(e,t){var i;if(this._userEvents&&0!==this._userEvents.length)if(t){let s=this._userEvents.findIndex(i=>i.eType===e&&i.handler===t);s>=0&&(this._userEvents.splice(s,1),null==(i=this._event)||i.off(e,t))}else this._userEvents.forEach(t=>{var i;t.eType===e&&(null==(i=this._event)||i.off(e,t.handler))}),this._userEvents=this._userEvents.filter(t=>t.eType!==e)}updateState(e,t){this._chart&&this._chart.updateState(e,t)}setSelected(e,t,i){this._chart&&this._chart.setSelected(e,t,i)}setHovered(e,t,i){this._chart&&this._chart.setHovered(e,t,i)}clearState(e){this._chart&&this._chart.clearState(e)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(e){var t,i,s;let a,n=this._option.theme,r=null==(t=this._spec)?void 0:t.theme,l=null==(i=this._spec)?void 0:i.type;e&&(this._currentThemeName=e);let o=(e,t)=>{var i;return(null==(i=t.chart)?void 0:i[e])&&(t=(0,en.hr)({},t,t.chart[e])),t};if((0,Y.Z)(n)&&(0,Y.Z)(r))a=(0,x.Q)(this._currentThemeName),this._currentTheme=o(l,a);else if((0,u.Z)(n)&&(!r||(0,u.Z)(r))||(0,u.Z)(r)&&(!n||(0,u.Z)(n))){let e=(0,en.hr)({},(0,x.Q)(this._currentThemeName),(0,x.Q)(n),(0,x.Q)(r));this._currentTheme=o(l,e)}else{let e=(0,en.hr)({},(0,x.Q)(this._currentThemeName),(0,x.Q)(n),(0,x.Q)(r));this._currentTheme=o(l,e)}this._cachedProcessedTheme=null,(0,q.C)(this.getTheme("component","poptip")),null==(s=this._compiler)||s.setBackground(this._getBackground())}_shouldChartResize(e){var t,i;let s=!1;(0,g.Z)(this._spec.width)?(0,g.Z)(e.width)||(this._spec.width=e.width):this._spec.width!==e.width&&(s=!0),(0,g.Z)(this._spec.height)?(0,g.Z)(e.height)||(this._spec.height=e.height):this._spec.height!==e.height&&(s=!0);let a=this._autoSize;return this._autoSize=!!(0,y.qe)(this._option.mode)&&(null==(i=null!=(t=this._spec.autoFit)?t:this._option.autoFit)||i),this._autoSize!==a&&(s=!0),s}_getBackground(){return("string"==typeof this._spec.background||(0,O.Z)(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this.getTheme("background")||this._option.background}getCurrentTheme(){return(0,x.Q)(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(e){return ep(this,void 0,void 0,function*(){return this.setCurrentThemeSync(e)})}setCurrentThemeSync(e){if(!R.V.themeExist(e))return this;let t=this._setCurrentTheme(e);return this._setFontFamilyTheme(this.getTheme("fontFamily")),this.updateCustomConfigAndRerender(t,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(e){var t;return this._updateCurrentTheme(e),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null==(t=this._chart)||t.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(e){var t;e&&(null==(t=this.getStage())||t.setTheme({text:{fontFamily:e},richtext:{fontFamily:e}}))}_getTooltipComponent(){var e;return null==(e=this._chart)?void 0:e.getComponentsByType(n.L.tooltip)[0]}setTooltipHandler(e){var t,i;this._context.tooltipHandler=e;let s=this._getTooltipComponent();s&&(null==(i=null==(t=s.tooltipHandler)?void 0:t.release)||i.call(t),s.tooltipHandler=e)}getTooltipHandlerByUser(){var e;return null==(e=this._context)?void 0:e.tooltipHandler}getTooltipHandler(){let e=this._getTooltipComponent();return e?e.tooltipHandler:this._context.tooltipHandler}showTooltip(e,t){var i;let s=this._getTooltipComponent();return null!=(i=(0,c.Z)(e)&&"none"!==(null==s?void 0:s.showTooltip(e,t)))&&i}hideTooltip(){var e;let t=this._getTooltipComponent();return null!=(e=null==t?void 0:t.hideTooltip())&&e}getLegendDataById(e){var t;let i=null==(t=this._chart)?void 0:t.getComponentByUserId(e);return i?i.getLegendData():[]}getLegendDataByIndex(e=0){var t;let i=null==(t=this._chart)?void 0:t.getComponentsByType(n.L.discreteLegend);return i&&i[e]?i[e].getLegendData():[]}getLegendSelectedDataById(e){var t;let i=null==(t=this._chart)?void 0:t.getComponentByUserId(e);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(e=0){var t;let i=null==(t=this._chart)?void 0:t.getComponentsByType(n.L.discreteLegend);return i&&i[e]?i[e].getSelectedData():[]}setLegendSelectedDataById(e,t){var i;let s=null==(i=this._chart)?void 0:i.getComponentByUserId(e);s&&s.setSelectedData(t)}setLegendSelectedDataByIndex(e=0,t){var i;let s=null==(i=this._chart)?void 0:i.getComponentsByType(n.L.discreteLegend);s&&s[e]&&s[e].setSelectedData(t)}getDataURL(){var e;return ep(this,void 0,void 0,function*(){let t=this.getStage();if(this._chart&&t){t.render();let e=this._chart.getCanvas();return yield(0,H.hO)(e,{onError:this._onError})}return null==(e=this._option)||e.onError(ReferenceError("render is not defined")),null})}exportImg(e){var t,i;return ep(this,void 0,void 0,function*(){if(!(0,y.qe)(this._option.mode))return void(null==(t=this._option)||t.onError(TypeError("non-browser environment can not export img")));let s=yield this.getDataURL();s?(0,H.xQ)(e,s):null==(i=this._option)||i.onError(ReferenceError("render is not defined"))})}exportCanvas(){var e;let t=this.getStage();if(this._chart&&t)return t.toCanvas();null==(e=this._option)||e.onError(ReferenceError("render is not defined"))}getImageBuffer(){var e,t;if("node"!==this._option.mode)return void(null==(e=this._option)||e.onError(TypeError("getImageBuffer() now only support node environment.")));let i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):(null==(t=this._option)||t.onError(ReferenceError("render is not defined")),null)}setLayout(e){var t;this._option.layout=e,null==(t=this._chart)||t.setLayout(e)}reLayout(){var e;this._chart.resetLayoutItemTag(),null==(e=this._chart)||e.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var e;return null==(e=this._compiler)?void 0:e.getCanvas()}getContainer(){var e;let t;return(0,c.Z)(this._container)?this._container:(t=(0,u.Z)(this._canvas)?h.rF.getElementById(this._canvas):this._canvas,(0,c.Z)(t)?t.parentElement:null==(e=this.getCanvas())?void 0:e.parentElement)}getComponents(){return this._chart.getAllComponents()}getScale(e){var t;let i=null==(t=this._chart)?void 0:t.getGlobalScale();return null==i?void 0:i.getScale(e)}setDimensionIndex(e,t={}){var i;return null==(i=this._chart)?void 0:i.setDimensionIndex(e,t)}stopAnimation(){var e;null==(e=this.getStage())||e.stopAnimation(!0)}reRunNormalAnimation(){var e;null==(e=this.getStage())||e.reApplyAnimationState("normal",!0)}pauseAnimation(){var e;null==(e=this.getStage())||e.pauseAnimation(!0)}resumeAnimation(){var e;null==(e=this.getStage())||e.resumeAnimation(!0)}convertDatumToPosition(e,t={},i=!1,s){var a;let n;if(!this._chart||(0,Y.Z)(e))return null;let{seriesId:r,seriesIndex:l=0}=t;if((0,c.Z)(r)?n=this._chart.getSeriesInUserId(r):(0,c.Z)(l)&&(n=null==(a=this._chart.getSeriesInIndex([l]))?void 0:a[0]),n){let t,a=Object.keys(e),r=n.getViewData().latestData.find(t=>a.every(i=>t[i]==e[i])),l=n.getRegion().getLayoutStartPoint();return(t=r?n.dataToPosition(r,s):n.dataToPosition(e,s))?(0,v.G$)(t,l,i):null}return null}convertValueToPosition(e,t,i=!1){var s,a;let n;if(!this._chart||(0,g.Z)(e)||(0,Y.Z)(t))return null;if(!(0,$.Z)(e)){let a,{axisId:n,axisIndex:r}=t;if((0,c.Z)(n)?a=this._chart.getComponentsByKey("axes").find(e=>e.userId===n):(0,c.Z)(r)&&(a=null==(s=this._chart.getComponentsByKey("axes"))?void 0:s[r]),!a)return(0,f.ZK)("Please check whether the `axisId` or `axisIndex` is set!"),null;let l=null==a?void 0:a.valueToPosition(e);if(i){let e=a.getLayoutStartPoint(),t=a.getOrient();return l+("bottom"===t||"top"===t?e.x:e.y)}return l}let{seriesId:r,seriesIndex:l}=t;return(0,c.Z)(r)?n=this._chart.getSeriesInUserId(r):(0,c.Z)(l)&&(n=null==(a=this._chart.getSeriesInIndex([l]))?void 0:a[0]),n?(0,v.G$)(n.valueToPosition(e[0],e[1]),n.getRegion().getLayoutStartPoint(),i):((0,f.ZK)("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(e){return ei.instance().getFunction(e)}registerFunction(e,t){e&&t&&ei.instance().registerFunction(e,t)}unregisterFunction(e){e&&ei.instance().unregisterFunction(e)}getFunctionList(){return ei.instance().getFunctionNameList()}setRuntimeSpec(e){this._spec=e,this._updateSpecInfo()}updateIndicatorDataById(e,t){var i;let s=null==(i=this._chart)?void 0:i.getComponentByUserId(e);s&&s.updateDatum(t)}updateIndicatorDataByIndex(e=0,t){var i;let s=null==(i=this._chart)?void 0:i.getComponentsByType(n.L.indicator);s&&s[e]&&s[e].updateDatum(t)}geoZoomByIndex(e=0,t,i){this._geoZoomByQuery({regionIndex:e},t,i)}geoZoomById(e,t,i){this._geoZoomByQuery({regionId:e},t,i)}_geoZoomByQuery(e,t,i){var s,a;let r=null==(s=this._chart)?void 0:s.getRegionsInQuerier(e)[0],l=null==(a=this._chart)?void 0:a.getComponentsByType(n.L.geoCoordinate),o=null==l?void 0:l.find(e=>{var t;return null==(t=e.getRegions())?void 0:t.includes(r)});o&&o.dispatchZoom(t,i)}_initChartPlugin(){let e=S.F.getChartPlugins();e.length>0&&(this._chartPlugin=new eo.f(this),this._chartPlugin.load(e.map(e=>new e)),this._chartPluginApply("onInit",this._spec));let t=S.F.getVChartPlugins();t.length>0&&(this._vChartPlugin=new eu.m(this),this._vChartPlugin.load(t.map(e=>new e)),this._vChartPlugin.onInit())}_chartPluginApply(e,...t){this._chartPlugin&&this._chartPlugin[e]&&this._chartPlugin[e].apply(this._chartPlugin,t)}_getMode(){return this._option.mode||a.i["desktop-browser"]}isAnimationEnable(){return"animation"in this._option?!!this._option.animation:!1!==this._spec.animation}_getChartOption(e){return{type:e,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,viewBox:this._viewBox,getTheme:this.getTheme,getSpecInfo:()=>{var e;return null!=(e=this._specInfo)?e:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:!0===this._option.disableTriggerEvent}}}eg.InstanceManager=G.u,eg.ThemeManager=R.V,eg.globalConfig={uniqueTooltip:!0},eg.Utils=et,eg.vglobal=h.rF,S.F.registerRegion("region",Q.y),S.F.registerLayout("base",J.A),(0,ee.B)(),(0,eh.BQ)(),(0,ec.h)(),(0,ed.p)(),(0,er.aW)(el.$.name,el.$)}}]);
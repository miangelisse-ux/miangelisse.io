(window.webpackChunkweb=window.webpackChunkweb||[]).push([["52843"],{106646:function(e,t,n){"use strict";var o=n(173656);void 0!==o&&o.version&&0!==o.version.indexOf("v0.")&&(0!==o.version.indexOf("v1.")||0===o.version.indexOf("v1.8."))?e.exports=o:e.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw TypeError('"callback" argument must be a function');var l,i,s=arguments.length;switch(s){case 0:case 1:return o.nextTick(e);case 2:return o.nextTick(function(){e.call(null,t)});case 3:return o.nextTick(function(){e.call(null,t,n)});case 4:return o.nextTick(function(){e.call(null,t,n,r)});default:for(l=Array(s-1),i=0;i<l.length;)l[i++]=arguments[i];return o.nextTick(function(){e.apply(null,l)})}}}},173656:function(e){var t,n,o,r=e.exports={};function l(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}var a=[],c=!1,h=-1;function u(){c&&o&&(c=!1,o.length?a=o.concat(a):h=-1,a.length&&d())}function d(){if(!c){var e=s(u);c=!0;for(var t=a.length;t;){for(o=a,a=[];++h<t;)o&&o[h].run();h=-1,t=a.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},531772:function(e,t,n){"use strict";var o=n(625148);function r(){}function l(){}l.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,l,i){if(i!==o){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return n.PropTypes=n,n}},407862:function(e,t,n){e.exports=n(531772)()},625148:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},264708:function(e,t,n){"use strict";n.d(t,{YP:()=>w,dy:()=>b});class o{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function r(e,t){let n={},r={},l=-1;for(;++l<e.length;)Object.assign(n,e[l].property),Object.assign(r,e[l].normal);return new o(n,r,t)}o.prototype.property={},o.prototype.normal={},o.prototype.space=null;var l=n(867339),i=n(429168);let s={}.hasOwnProperty;function a(e){let t,n={},r={};for(t in e.properties)if(s.call(e.properties,t)){let o=e.properties[t],s=new i.I(t,e.transform(e.attributes||{},t),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(t)&&(s.mustUseProperty=!0),n[t]=s,r[(0,l.F)(t)]=t,r[(0,l.F)(s.attribute)]=t}return new o(n,r,e.space)}let c=a({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),h=a({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function u(e,t){return t in e?e[t]:t}function d(e,t){return u(e,t.toLowerCase())}let p=a({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:d,properties:{xmlns:null,xmlnsXLink:null}});var f=n(864501);let m=a({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:f.booleanish,ariaAutoComplete:null,ariaBusy:f.booleanish,ariaChecked:f.booleanish,ariaColCount:f.number,ariaColIndex:f.number,ariaColSpan:f.number,ariaControls:f.spaceSeparated,ariaCurrent:null,ariaDescribedBy:f.spaceSeparated,ariaDetails:null,ariaDisabled:f.booleanish,ariaDropEffect:f.spaceSeparated,ariaErrorMessage:null,ariaExpanded:f.booleanish,ariaFlowTo:f.spaceSeparated,ariaGrabbed:f.booleanish,ariaHasPopup:null,ariaHidden:f.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:f.spaceSeparated,ariaLevel:f.number,ariaLive:null,ariaModal:f.booleanish,ariaMultiLine:f.booleanish,ariaMultiSelectable:f.booleanish,ariaOrientation:null,ariaOwns:f.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:f.number,ariaPressed:f.booleanish,ariaReadOnly:f.booleanish,ariaRelevant:null,ariaRequired:f.booleanish,ariaRoleDescription:f.spaceSeparated,ariaRowCount:f.number,ariaRowIndex:f.number,ariaRowSpan:f.number,ariaSelected:f.booleanish,ariaSetSize:f.number,ariaSort:null,ariaValueMax:f.number,ariaValueMin:f.number,ariaValueNow:f.number,ariaValueText:null,role:null}}),g=a({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:d,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:f.commaSeparated,acceptCharset:f.spaceSeparated,accessKey:f.spaceSeparated,action:null,allow:null,allowFullScreen:f.boolean,allowPaymentRequest:f.boolean,allowUserMedia:f.boolean,alt:null,as:null,async:f.boolean,autoCapitalize:null,autoComplete:f.spaceSeparated,autoFocus:f.boolean,autoPlay:f.boolean,blocking:f.spaceSeparated,capture:null,charSet:null,checked:f.boolean,cite:null,className:f.spaceSeparated,cols:f.number,colSpan:null,content:null,contentEditable:f.booleanish,controls:f.boolean,controlsList:f.spaceSeparated,coords:f.number|f.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:f.boolean,defer:f.boolean,dir:null,dirName:null,disabled:f.boolean,download:f.overloadedBoolean,draggable:f.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:f.boolean,formTarget:null,headers:f.spaceSeparated,height:f.number,hidden:f.boolean,high:f.number,href:null,hrefLang:null,htmlFor:f.spaceSeparated,httpEquiv:f.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:f.boolean,inputMode:null,integrity:null,is:null,isMap:f.boolean,itemId:null,itemProp:f.spaceSeparated,itemRef:f.spaceSeparated,itemScope:f.boolean,itemType:f.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:f.boolean,low:f.number,manifest:null,max:null,maxLength:f.number,media:null,method:null,min:null,minLength:f.number,multiple:f.boolean,muted:f.boolean,name:null,nonce:null,noModule:f.boolean,noValidate:f.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:f.boolean,optimum:f.number,pattern:null,ping:f.spaceSeparated,placeholder:null,playsInline:f.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:f.boolean,referrerPolicy:null,rel:f.spaceSeparated,required:f.boolean,reversed:f.boolean,rows:f.number,rowSpan:f.number,sandbox:f.spaceSeparated,scope:null,scoped:f.boolean,seamless:f.boolean,selected:f.boolean,shadowRootClonable:f.boolean,shadowRootDelegatesFocus:f.boolean,shadowRootMode:null,shape:null,size:f.number,sizes:null,slot:null,span:f.number,spellCheck:f.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:f.number,step:null,style:null,tabIndex:f.number,target:null,title:null,translate:null,type:null,typeMustMatch:f.boolean,useMap:null,value:f.booleanish,width:f.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:f.spaceSeparated,axis:null,background:null,bgColor:null,border:f.number,borderColor:null,bottomMargin:f.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:f.boolean,declare:f.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:f.number,leftMargin:f.number,link:null,longDesc:null,lowSrc:null,marginHeight:f.number,marginWidth:f.number,noResize:f.boolean,noHref:f.boolean,noShade:f.boolean,noWrap:f.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:f.number,rules:null,scheme:null,scrolling:f.booleanish,standby:null,summary:null,text:null,topMargin:f.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:f.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:f.boolean,disableRemotePlayback:f.boolean,prefix:null,property:null,results:f.number,security:null,unselectable:null}}),y=a({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:u,properties:{about:f.commaOrSpaceSeparated,accentHeight:f.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:f.number,amplitude:f.number,arabicForm:null,ascent:f.number,attributeName:null,attributeType:null,azimuth:f.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:f.number,by:null,calcMode:null,capHeight:f.number,className:f.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:f.number,diffuseConstant:f.number,direction:null,display:null,dur:null,divisor:f.number,dominantBaseline:null,download:f.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:f.number,enableBackground:null,end:null,event:null,exponent:f.number,externalResourcesRequired:null,fill:null,fillOpacity:f.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:f.commaSeparated,g2:f.commaSeparated,glyphName:f.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:f.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:f.number,horizOriginX:f.number,horizOriginY:f.number,id:null,ideographic:f.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:f.number,k:f.number,k1:f.number,k2:f.number,k3:f.number,k4:f.number,kernelMatrix:f.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:f.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:f.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:f.number,overlineThickness:f.number,paintOrder:null,panose1:null,path:null,pathLength:f.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:f.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:f.number,pointsAtY:f.number,pointsAtZ:f.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:f.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:f.commaOrSpaceSeparated,rev:f.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:f.commaOrSpaceSeparated,requiredFeatures:f.commaOrSpaceSeparated,requiredFonts:f.commaOrSpaceSeparated,requiredFormats:f.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:f.number,specularExponent:f.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:f.number,strikethroughThickness:f.number,string:null,stroke:null,strokeDashArray:f.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:f.number,strokeOpacity:f.number,strokeWidth:null,style:null,surfaceScale:f.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:f.commaOrSpaceSeparated,tabIndex:f.number,tableValues:null,target:null,targetX:f.number,targetY:f.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:f.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:f.number,underlineThickness:f.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:f.number,values:null,vAlphabetic:f.number,vMathematical:f.number,vectorEffect:null,vHanging:f.number,vIdeographic:f.number,version:null,vertAdvY:f.number,vertOriginX:f.number,vertOriginY:f.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:f.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),b=r([h,c,p,m,g],"html"),w=r([h,c,p,m,y],"svg")},468210:function(e,t,n){"use strict";n.d(t,{s:()=>c});var o=n(867339),r=n(429168),l=n(917698);let i=/^data[-\w.:]+$/i,s=/-[a-z]/g,a=/[A-Z]/g;function c(e,t){let n=(0,o.F)(t),c=t,d=l.k;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&i.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(s,u);c="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!s.test(e)){let n=e.replace(a,h);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}d=r.I}return new d(c,t)}function h(e){return"-"+e.toLowerCase()}function u(e){return e.charAt(1).toUpperCase()}},867339:function(e,t,n){"use strict";function o(e){return e.toLowerCase()}n.d(t,{F:()=>o})},429168:function(e,t,n){"use strict";n.d(t,{I:()=>i});var o=n(917698),r=n(864501);let l=Object.keys(r);class i extends o.k{constructor(e,t,n,o){var i,s,a,c,h;let u=-1;if(super(e,t),i=this,(s=o)&&(i.space=s),"number"==typeof n)for(;++u<l.length;){let e=l[u];a=this,c=l[u],(h=(n&r[e])===r[e])&&(a[c]=h)}}}i.prototype.defined=!0},917698:function(e,t,n){"use strict";n.d(t,{k:()=>o});class o{constructor(e,t){this.property=e,this.attribute=t}}o.prototype.space=null,o.prototype.boolean=!1,o.prototype.booleanish=!1,o.prototype.overloadedBoolean=!1,o.prototype.number=!1,o.prototype.commaSeparated=!1,o.prototype.spaceSeparated=!1,o.prototype.commaOrSpaceSeparated=!1,o.prototype.mustUseProperty=!1,o.prototype.defined=!1},864501:function(e,t,n){"use strict";n.r(t),n.d(t,{boolean:()=>r,booleanish:()=>l,commaOrSpaceSeparated:()=>h,commaSeparated:()=>c,number:()=>s,overloadedBoolean:()=>i,spaceSeparated:()=>a});let o=0,r=u(),l=u(),i=u(),s=u(),a=u(),c=u(),h=u();function u(){return 2**++o}},705403:function(e,t,n){"use strict";n.d(t,{YP:()=>b,dy:()=>y});class o{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function r(e,t){let n={},r={};for(let t of e)Object.assign(n,t.property),Object.assign(r,t.normal);return new o(n,r,t)}o.prototype.normal={},o.prototype.property={},o.prototype.space=void 0;var l=n(130730),i=n(530606);function s(e){let t={},n={};for(let[o,r]of Object.entries(e.properties)){let s=new i.I(o,e.transform(e.attributes||{},o),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(s.mustUseProperty=!0),t[o]=s,n[(0,l.F)(o)]=o,n[(0,l.F)(s.attribute)]=o}return new o(t,n,e.space)}var a=n(167788);let c=s({properties:{ariaActiveDescendant:null,ariaAtomic:a.booleanish,ariaAutoComplete:null,ariaBusy:a.booleanish,ariaChecked:a.booleanish,ariaColCount:a.number,ariaColIndex:a.number,ariaColSpan:a.number,ariaControls:a.spaceSeparated,ariaCurrent:null,ariaDescribedBy:a.spaceSeparated,ariaDetails:null,ariaDisabled:a.booleanish,ariaDropEffect:a.spaceSeparated,ariaErrorMessage:null,ariaExpanded:a.booleanish,ariaFlowTo:a.spaceSeparated,ariaGrabbed:a.booleanish,ariaHasPopup:null,ariaHidden:a.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a.spaceSeparated,ariaLevel:a.number,ariaLive:null,ariaModal:a.booleanish,ariaMultiLine:a.booleanish,ariaMultiSelectable:a.booleanish,ariaOrientation:null,ariaOwns:a.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:a.number,ariaPressed:a.booleanish,ariaReadOnly:a.booleanish,ariaRelevant:null,ariaRequired:a.booleanish,ariaRoleDescription:a.spaceSeparated,ariaRowCount:a.number,ariaRowIndex:a.number,ariaRowSpan:a.number,ariaSelected:a.booleanish,ariaSetSize:a.number,ariaSort:null,ariaValueMax:a.number,ariaValueMin:a.number,ariaValueNow:a.number,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function h(e,t){return t in e?e[t]:t}function u(e,t){return h(e,t.toLowerCase())}let d=s({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:a.commaSeparated,acceptCharset:a.spaceSeparated,accessKey:a.spaceSeparated,action:null,allow:null,allowFullScreen:a.boolean,allowPaymentRequest:a.boolean,allowUserMedia:a.boolean,alt:null,as:null,async:a.boolean,autoCapitalize:null,autoComplete:a.spaceSeparated,autoFocus:a.boolean,autoPlay:a.boolean,blocking:a.spaceSeparated,capture:null,charSet:null,checked:a.boolean,cite:null,className:a.spaceSeparated,cols:a.number,colSpan:null,content:null,contentEditable:a.booleanish,controls:a.boolean,controlsList:a.spaceSeparated,coords:a.number|a.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:a.boolean,defer:a.boolean,dir:null,dirName:null,disabled:a.boolean,download:a.overloadedBoolean,draggable:a.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:a.boolean,formTarget:null,headers:a.spaceSeparated,height:a.number,hidden:a.overloadedBoolean,high:a.number,href:null,hrefLang:null,htmlFor:a.spaceSeparated,httpEquiv:a.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:a.boolean,inputMode:null,integrity:null,is:null,isMap:a.boolean,itemId:null,itemProp:a.spaceSeparated,itemRef:a.spaceSeparated,itemScope:a.boolean,itemType:a.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:a.boolean,low:a.number,manifest:null,max:null,maxLength:a.number,media:null,method:null,min:null,minLength:a.number,multiple:a.boolean,muted:a.boolean,name:null,nonce:null,noModule:a.boolean,noValidate:a.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:a.boolean,optimum:a.number,pattern:null,ping:a.spaceSeparated,placeholder:null,playsInline:a.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:a.boolean,referrerPolicy:null,rel:a.spaceSeparated,required:a.boolean,reversed:a.boolean,rows:a.number,rowSpan:a.number,sandbox:a.spaceSeparated,scope:null,scoped:a.boolean,seamless:a.boolean,selected:a.boolean,shadowRootClonable:a.boolean,shadowRootDelegatesFocus:a.boolean,shadowRootMode:null,shape:null,size:a.number,sizes:null,slot:null,span:a.number,spellCheck:a.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:a.number,step:null,style:null,tabIndex:a.number,target:null,title:null,translate:null,type:null,typeMustMatch:a.boolean,useMap:null,value:a.booleanish,width:a.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:a.spaceSeparated,axis:null,background:null,bgColor:null,border:a.number,borderColor:null,bottomMargin:a.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:a.boolean,declare:a.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:a.number,leftMargin:a.number,link:null,longDesc:null,lowSrc:null,marginHeight:a.number,marginWidth:a.number,noResize:a.boolean,noHref:a.boolean,noShade:a.boolean,noWrap:a.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:a.number,rules:null,scheme:null,scrolling:a.booleanish,standby:null,summary:null,text:null,topMargin:a.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:a.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:a.boolean,disableRemotePlayback:a.boolean,prefix:null,property:null,results:a.number,security:null,unselectable:null},space:"html",transform:u}),p=s({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:a.commaOrSpaceSeparated,accentHeight:a.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:a.number,amplitude:a.number,arabicForm:null,ascent:a.number,attributeName:null,attributeType:null,azimuth:a.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:a.number,by:null,calcMode:null,capHeight:a.number,className:a.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:a.number,diffuseConstant:a.number,direction:null,display:null,dur:null,divisor:a.number,dominantBaseline:null,download:a.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:a.number,enableBackground:null,end:null,event:null,exponent:a.number,externalResourcesRequired:null,fill:null,fillOpacity:a.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:a.commaSeparated,g2:a.commaSeparated,glyphName:a.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:a.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:a.number,horizOriginX:a.number,horizOriginY:a.number,id:null,ideographic:a.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:a.number,k:a.number,k1:a.number,k2:a.number,k3:a.number,k4:a.number,kernelMatrix:a.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:a.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:a.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:a.number,overlineThickness:a.number,paintOrder:null,panose1:null,path:null,pathLength:a.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:a.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:a.number,pointsAtY:a.number,pointsAtZ:a.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:a.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:a.commaOrSpaceSeparated,rev:a.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:a.commaOrSpaceSeparated,requiredFeatures:a.commaOrSpaceSeparated,requiredFonts:a.commaOrSpaceSeparated,requiredFormats:a.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:a.number,specularExponent:a.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:a.number,strikethroughThickness:a.number,string:null,stroke:null,strokeDashArray:a.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:a.number,strokeOpacity:a.number,strokeWidth:null,style:null,surfaceScale:a.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:a.commaOrSpaceSeparated,tabIndex:a.number,tableValues:null,target:null,targetX:a.number,targetY:a.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:a.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:a.number,underlineThickness:a.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:a.number,values:null,vAlphabetic:a.number,vMathematical:a.number,vectorEffect:null,vHanging:a.number,vIdeographic:a.number,version:null,vertAdvY:a.number,vertOriginX:a.number,vertOriginY:a.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:a.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:h}),f=s({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),m=s({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:u}),g=s({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),y=r([c,d,f,m,g],"html"),b=r([c,p,f,m,g],"svg")},570958:function(e,t,n){"use strict";n.d(t,{s:()=>c});var o=n(530606),r=n(829177),l=n(130730);let i=/[A-Z]/g,s=/-[a-z]/g,a=/^data[-\w.:]+$/i;function c(e,t){let n=(0,l.F)(t),c=t,d=r.k;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&a.test(t)){if("-"===t.charAt(4)){let e=t.slice(5).replace(s,u);c="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=t.slice(4);if(!s.test(e)){let n=e.replace(i,h);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}d=o.I}return new d(c,t)}function h(e){return"-"+e.toLowerCase()}function u(e){return e.charAt(1).toUpperCase()}},859930:function(e,t,n){"use strict";n.d(t,{D:()=>o});let o={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"}},130730:function(e,t,n){"use strict";function o(e){return e.toLowerCase()}n.d(t,{F:()=>o})},530606:function(e,t,n){"use strict";n.d(t,{I:()=>i});var o=n(829177),r=n(167788);let l=Object.keys(r);class i extends o.k{constructor(e,t,n,o){var i,s,a,c,h;let u=-1;if(super(e,t),i=this,(s=o)&&(i.space=s),"number"==typeof n)for(;++u<l.length;){let e=l[u];a=this,c=l[u],(h=(n&r[e])===r[e])&&(a[c]=h)}}}i.prototype.defined=!0},829177:function(e,t,n){"use strict";n.d(t,{k:()=>o});class o{constructor(e,t){this.attribute=t,this.property=e}}o.prototype.attribute="",o.prototype.booleanish=!1,o.prototype.boolean=!1,o.prototype.commaOrSpaceSeparated=!1,o.prototype.commaSeparated=!1,o.prototype.defined=!1,o.prototype.mustUseProperty=!1,o.prototype.number=!1,o.prototype.overloadedBoolean=!1,o.prototype.property="",o.prototype.spaceSeparated=!1,o.prototype.space=void 0},167788:function(e,t,n){"use strict";n.r(t),n.d(t,{boolean:()=>r,booleanish:()=>l,commaOrSpaceSeparated:()=>h,commaSeparated:()=>c,number:()=>s,overloadedBoolean:()=>i,spaceSeparated:()=>a});let o=0,r=u(),l=u(),i=u(),s=u(),a=u(),c=u(),h=u();function u(){return 2**++o}},84032:function(e,t,n){"use strict";n.d(t,{Ig:()=>v,MI:()=>w,N0:()=>T,NE:()=>i,QK:()=>S,U9:()=>A,X0:()=>O,Y_:()=>g,_M:()=>p,al:()=>a,cR:()=>h,mD:()=>M,nw:()=>E,o:()=>y,rr:()=>c,uJ:()=>P,uo:()=>C,xb:()=>k,ym:()=>R});var o=n(539545),r=n(776126),l=n(377549);let i=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function s(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let a=(e,t,n)=>{let i=s(e,n);if(!i)return!1;let a=f(i);if(!a){let n=i.blockRange(),r=n&&(0,o.k9)(n);return null!=r&&(t&&t(e.tr.lift(n,r).scrollIntoView()),!0)}let c=a.nodeBefore;if(D(e,a,t,-1))return!0;if(0==i.parent.content.size&&(d(c,"end")||l.qv.isSelectable(c)))for(let n=i.depth;;n--){let s=(0,o.dR)(e.doc,i.before(n),i.after(n),r.p2.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(d(c,"end")?l.Y1.findFrom(n.doc.resolve(n.mapping.map(a.pos,-1)),-1):l.qv.create(n.doc,a.pos-c.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||i.node(n-1).childCount>1)break}return!!c.isAtom&&a.depth==i.depth-1&&(t&&t(e.tr.delete(a.pos-c.nodeSize,a.pos).scrollIntoView()),!0)},c=(e,t,n)=>{let o=s(e,n);if(!o)return!1;let r=f(o);return!!r&&u(e,r,t)},h=(e,t,n)=>{let o=m(e,n);if(!o)return!1;let r=b(o);return!!r&&u(e,r,t)};function u(e,t,n){let i=t.nodeBefore,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let e=i.lastChild;if(!e)return!1;i=e}let a=t.nodeAfter,c=t.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let e=a.firstChild;if(!e)return!1;a=e}let h=(0,o.dR)(e.doc,s,c,r.p2.empty);if(!h||h.from!=s||h instanceof o.Pu&&h.slice.size>=c-s)return!1;if(n){let t=e.tr.step(h);t.setSelection(l.Bs.create(t.doc,s)),n(t.scrollIntoView())}return!0}function d(e,t,n=!1){for(let o=e;o;o="start"==t?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(n&&1!=o.childCount)break}return!1}let p=(e,t,n)=>{let{$head:o,empty:r}=e.selection,i=o;if(!r)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=f(o)}let s=i&&i.nodeBefore;return!!s&&!!l.qv.isSelectable(s)&&(t&&t(e.tr.setSelection(l.qv.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function f(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function m(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let g=(e,t,n)=>{let i=m(e,n);if(!i)return!1;let s=b(i);if(!s)return!1;let a=s.nodeAfter;if(D(e,s,t,1))return!0;if(0==i.parent.content.size&&(d(a,"start")||l.qv.isSelectable(a))){let n=(0,o.dR)(e.doc,i.before(),i.after(),r.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let o=e.tr.step(n);o.setSelection(d(a,"start")?l.Y1.findFrom(o.doc.resolve(o.mapping.map(s.pos)),1):l.qv.create(o.doc,o.mapping.map(s.pos))),t(o.scrollIntoView())}return!0}}return!!a.isAtom&&s.depth==i.depth-1&&(t&&t(e.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0)},y=(e,t,n)=>{let{$head:o,empty:r}=e.selection,i=o;if(!r)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=b(o)}let s=i&&i.nodeAfter;return!!s&&!!l.qv.isSelectable(s)&&(t&&t(e.tr.setSelection(l.qv.create(e.doc,i.pos)).scrollIntoView()),!0)};function b(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let w=(e,t)=>{let n=e.selection,r=n instanceof l.qv,i;if(r){if(n.node.isTextblock||!(0,o.Mn)(e.doc,n.from))return!1;i=n.from}else if(null==(i=(0,o.GJ)(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(i);r&&n.setSelection(l.qv.create(n.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},v=(e,t)=>{let n=e.selection,r;if(n instanceof l.qv){if(n.node.isTextblock||!(0,o.Mn)(e.doc,n.to))return!1;r=n.to}else if(null==(r=(0,o.GJ)(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},k=(e,t)=>{let{$from:n,$to:r}=e.selection,l=n.blockRange(r),i=l&&(0,o.k9)(l);return null!=i&&(t&&t(e.tr.lift(l,i).scrollIntoView()),!0)},S=(e,t)=>{let{$head:n,$anchor:o}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(o)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function x(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let C=(e,t)=>{let{$head:n,$anchor:o}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(o))return!1;let r=n.node(-1),i=n.indexAfter(-1),s=x(r.contentMatchAt(i));if(!s||!r.canReplaceWith(i,i,s))return!1;if(t){let o=n.after(),r=e.tr.replaceWith(o,o,s.createAndFill());r.setSelection(l.Y1.near(r.doc.resolve(o),1)),t(r.scrollIntoView())}return!0},M=(e,t)=>{let n=e.selection,{$from:o,$to:r}=n;if(n instanceof l.C1||o.parent.inlineContent||r.parent.inlineContent)return!1;let i=x(r.parent.contentMatchAt(r.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!o.parentOffset&&r.index()<r.parent.childCount?o:r).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(l.Bs.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},O=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,o.Ax)(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),l=r&&(0,o.k9)(r);return null!=l&&(t&&t(e.tr.lift(r,l).scrollIntoView()),!0)},T=(e,t)=>{let{$from:n,to:o}=e.selection,r,i=n.sharedDepth(o);return 0!=i&&(r=n.before(i),t&&t(e.tr.setSelection(l.qv.create(e.doc,r))),!0)};function D(e,t,n,i){let s,a,c,h=t.nodeBefore,u=t.nodeAfter,p,f,m=h.type.spec.isolating||u.type.spec.isolating;if(!m&&(s=t.nodeBefore,a=t.nodeAfter,c=t.index(),s&&a&&s.type.compatibleContent(a.type)&&(!s.content.size&&t.parent.canReplace(c-1,c)?(n&&n(e.tr.delete(t.pos-s.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(c,c+1)&&!!(a.isTextblock||(0,o.Mn)(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let g=!m&&t.parent.canReplace(t.index(),t.index()+1);if(g&&(p=(f=h.contentMatchAt(h.childCount)).findWrapping(u.type))&&f.matchType(p[0]||u.type).validEnd){if(n){let l=t.pos+u.nodeSize,i=r.HY.empty;for(let e=p.length-1;e>=0;e--)i=r.HY.from(p[e].create(null,i));i=r.HY.from(h.copy(i));let s=e.tr.step(new o.FC(t.pos-1,l,t.pos,l,new r.p2(i,1,0),p.length,!0)),a=s.doc.resolve(l+2*p.length);a.nodeAfter&&a.nodeAfter.type==h.type&&(0,o.Mn)(s.doc,a.pos)&&s.join(a.pos),n(s.scrollIntoView())}return!0}let y=u.type.spec.isolating||i>0&&m?null:l.Y1.findFrom(t,1),b=y&&y.$from.blockRange(y.$to),w=b&&(0,o.k9)(b);if(null!=w&&w>=t.depth)return n&&n(e.tr.lift(b,w).scrollIntoView()),!0;if(g&&d(u,"start",!0)&&d(h,"end")){let l=h,i=[];for(;i.push(l),!l.isTextblock;)l=l.lastChild;let s=u,a=1;for(;!s.isTextblock;s=s.firstChild)a++;if(l.canReplace(l.childCount,l.childCount,s.content)){if(n){let l=r.HY.empty;for(let e=i.length-1;e>=0;e--)l=r.HY.from(i[e].copy(l));n(e.tr.step(new o.FC(t.pos-i.length,t.pos+u.nodeSize,t.pos+a,t.pos+u.nodeSize-a,new r.p2(l,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function N(e){return function(t,n){let o=t.selection,r=e<0?o.$from:o.$to,i=r.depth;for(;r.node(i).isInline;){if(!i)return!1;i--}return!!r.node(i).isTextblock&&(n&&n(t.tr.setSelection(l.Bs.create(t.doc,e<0?r.start(i):r.end(i)))),!0)}}let A=N(-1),E=N(1);function R(e,t=null){return function(n,r){let{$from:l,$to:i}=n.selection,s=l.blockRange(i),a=s&&(0,o.nd)(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}function P(e,t=null){return function(n,o){let r=!1;for(let o=0;o<n.selection.ranges.length&&!r;o++){let{$from:{pos:l},$to:{pos:i}}=n.selection.ranges[o];n.doc.nodesBetween(l,i,(o,l)=>{if(r)return!1;if(!(!o.isTextblock||o.hasMarkup(e,t)))if(o.type==e)r=!0;else{let t=n.doc.resolve(l),o=t.index();r=t.parent.canReplaceWith(o,o+1,e)}})}if(!r)return!1;if(o){let r=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:i}}=n.selection.ranges[o];r.setBlockType(l,i,e,t)}o(r.scrollIntoView())}return!0}}function z(...e){return function(t,n,o){for(let r=0;r<e.length;r++)if(e[r](t,n,o))return!0;return!1}}let I=z(i,a,p),B=z(i,g,y),L={Enter:z(S,M,O,(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof l.qv&&e.selection.node.isBlock)return!!n.parentOffset&&!!(0,o.Ax)(e.doc,n.pos)&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],s,a,c=!1,h=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){let t;c=n.end(e)==n.pos+(n.depth-e),h=n.start(e)==n.pos-(n.depth-e),a=x(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));i.unshift(t||(c&&a?{type:a}:null)),s=e;break}if(1==e)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof l.Bs||e.selection instanceof l.C1)&&u.deleteSelection();let d=u.mapping.map(n.pos),p=(0,o.Ax)(u.doc,d,i.length,i);if(p||(i[0]=a?{type:a}:null,p=(0,o.Ax)(u.doc,d,i.length,i)),!p)return!1;if(u.split(d,i.length,i),!c&&h&&n.node(s).type!=a){let e=u.mapping.map(n.before(s)),t=u.doc.resolve(e);a&&n.node(s-1).canReplaceWith(t.index(),t.index()+1,a)&&u.setNodeMarkup(u.mapping.map(n.before(s)),a)}return t&&t(u.scrollIntoView()),!0}),"Mod-Enter":C,Backspace:I,"Mod-Backspace":I,"Shift-Backspace":I,Delete:B,"Mod-Delete":B,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new l.C1(e.doc))),!0)},F={"Ctrl-h":L.Backspace,"Alt-Backspace":L["Mod-Backspace"],"Ctrl-d":L.Delete,"Ctrl-Alt-Backspace":L["Mod-Delete"],"Alt-Delete":L["Mod-Delete"],"Alt-d":L["Mod-Delete"],"Ctrl-a":A,"Ctrl-e":E};for(let e in L)F[e]=L[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform()},423252:function(e,t,n){"use strict";n.d(t,{q:()=>l});var o=n(377549),r=n(539545);function l(e={}){return new o.Sy({view:t=>new i(t,e)})}class i{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!=(n=t.width)?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,n=this.editorView.state.doc.resolve(this.cursorPos),o=!n.parent.inlineContent,r,l=this.editorView.dom,i=l.getBoundingClientRect(),s=i.width/l.offsetWidth,a=i.height/l.offsetHeight;if(o){let e=n.nodeBefore,t=n.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(n){let o=n.getBoundingClientRect(),l=e?o.bottom:o.top;e&&t&&(l=(l+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let i=this.width/2*a;r={left:o.left,right:o.right,top:l-i,bottom:l+i}}}}if(!r){let e=this.editorView.coordsAtPos(this.cursorPos),t=this.width/2*s;r={left:e.left-t,right:e.left+t,top:e.top,bottom:e.bottom}}let c=this.editorView.dom.offsetParent;if(!this.element&&(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",o),this.element.classList.toggle("prosemirror-dropcursor-inline",!o),c&&(c!=document.body||"static"!=getComputedStyle(c).position)){let n=c.getBoundingClientRect(),o=n.width/c.offsetWidth,r=n.height/c.offsetHeight;e=n.left-c.scrollLeft*o,t=n.top-c.scrollTop*r}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=(r.left-e)/s+"px",this.element.style.top=(r.top-t)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=n&&n.type.spec.disableDropCursor,l="function"==typeof o?o(this.editorView,t,e):o;if(t&&!l){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=(0,r.nj)(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}},163217:function(e,t,n){"use strict";n.d(t,{d:()=>c});var o=n(45798),r=n(377549),l=n(776126),i=n(619431);class s extends r.Y1{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return s.valid(n)?new s(n):r.Y1.near(n)}content(){return l.p2.empty}eq(e){return e instanceof s&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new s(e.resolve(t.pos))}getBookmark(){return new a(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),o=e.node(t);if(0==n){if(o.type.spec.isolating)return!0;continue}for(let e=o.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),o=e.node(t);if(n==o.childCount){if(o.type.spec.isolating)return!0;continue}for(let e=o.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&s.valid(e))return e;let o=e.pos,l=null;for(let n=e.depth;;n--){let r=e.node(n);if(t>0?e.indexAfter(n)<r.childCount:e.index(n)>0){l=r.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;o+=t;let i=e.doc.resolve(o);if(s.valid(i))return i}for(;;){let i=t>0?l.firstChild:l.lastChild;if(!i){if(l.isAtom&&!l.isText&&!r.qv.isSelectable(l)){e=e.doc.resolve(o+l.nodeSize*t),n=!1;continue e}break}l=i,o+=t;let a=e.doc.resolve(o);if(s.valid(a))return a}return null}}}s.prototype.visible=!1,s.findFrom=s.findGapCursorFrom,r.Y1.jsonID("gapcursor",s);class a{constructor(e){this.pos=e}map(e){return new a(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return s.valid(t)?new s(t):r.Y1.near(t)}}function c(){return new r.Sy({props:{decorations:f,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&s.valid(n)?new s(n):null,handleClick:d,handleKeyDown:h,handleDOMEvents:{beforeinput:p}}})}let h=(0,o.$)({ArrowLeft:u("horiz",-1),ArrowRight:u("horiz",1),ArrowUp:u("vert",-1),ArrowDown:u("vert",1)});function u(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,o,l){let i=e.selection,a=t>0?i.$to:i.$from,c=i.empty;if(i instanceof r.Bs){if(!l.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=e.doc.resolve(t>0?a.after():a.before())}let h=s.findGapCursorFrom(a,t,c);return!!h&&(o&&o(e.tr.setSelection(new s(h))),!0)}}function d(e,t,n){if(!e||!e.editable)return!1;let o=e.state.doc.resolve(t);if(!s.valid(o))return!1;let l=e.posAtCoords({left:n.clientX,top:n.clientY});return!(l&&l.inside>-1&&r.qv.isSelectable(e.state.doc.nodeAt(l.inside)))&&(e.dispatch(e.state.tr.setSelection(new s(o))),!0)}function p(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof s))return!1;let{$from:n}=e.state.selection,o=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!o)return!1;let i=l.HY.empty;for(let e=o.length-1;e>=0;e--)i=l.HY.from(o[e].createAndFill(null,i));let a=e.state.tr.replace(n.pos,n.pos,new l.p2(i,0,0));return a.setSelection(r.Bs.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function f(e){if(!(e.selection instanceof s))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",i.EH.create(e.doc,[i.p.widget(e.selection.head,t,{key:"gapcursor"})])}},289373:function(e,t,n){"use strict";n.d(t,{KX:()=>v,Yw:()=>w,m8:()=>y});var o=n(485914),r=n(539545),l=n(377549);class i{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,o,r,l;if(0==this.eventCount)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}t&&(o=(n=this.remapping(a,this.items.length)).maps.length);let c=e.tr,h=[],u=[];return this.items.forEach((e,t)=>{if(!e.step){n||(o=(n=this.remapping(a,t+1)).maps.length),o--,u.push(e);return}if(n){u.push(new s(e.map));let t=e.step.map(n.slice(o)),r;t&&c.maybeStep(t).doc&&(r=c.mapping.maps[c.mapping.maps.length-1],h.push(new s(r,void 0,void 0,h.length+u.length))),o--,r&&n.appendMap(r,o)}else c.maybeStep(e.step);if(e.selection)return r=n?e.selection.map(n.slice(o)):e.selection,l=new i(this.items.slice(0,a).append(u.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:c,selection:r}}addTransform(e,t,n,o){var r,l;let a,h=[],u=this.eventCount,d=this.items,p=!o&&d.length?d.get(d.length-1):null;for(let n=0;n<e.steps.length;n++){let r=e.steps[n].invert(e.docs[n]),l=new s(e.mapping.maps[n],r,t),i;(i=p&&p.merge(l))&&(l=i,n?h.pop():d=d.slice(0,d.length-1)),h.push(l),t&&(u++,t=void 0),o||(p=l)}let f=u-n.depth;return f>c&&(r=d,l=f,r.forEach((e,t)=>{if(e.selection&&0==l--)return a=t,!1}),d=r.slice(a),u-=f),new i(d.append(h),u)}remapping(e,t){let n=new r.vs;return this.items.forEach((t,o)=>{let r=null!=t.mirrorOffset&&o-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,r)},e,t),n}addMaps(e){return 0==this.eventCount?this:new i(this.items.append(e.map(e=>new s(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],o=Math.max(0,this.items.length-t),r=e.mapping,l=e.steps.length,a=this.eventCount;this.items.forEach(e=>{e.selection&&a--},o);let c=t;this.items.forEach(t=>{let o=r.getMirror(--c);if(null==o)return;l=Math.min(l,o);let i=r.maps[o];if(t.step){let l=e.steps[o].invert(e.docs[o]),h=t.selection&&t.selection.map(r.slice(c+1,o));h&&a++,n.push(new s(i,l,h))}else n.push(new s(i))},o);let h=[];for(let e=t;e<l;e++)h.push(new s(r.maps[e]));let u=new i(this.items.slice(0,o).append(h).append(n),a);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],l=0;return this.items.forEach((o,i)=>{if(i>=e)r.push(o),o.selection&&l++;else if(o.step){let e=o.step.map(t.slice(n)),i=e&&e.getMap();if(n--,i&&t.appendMap(i,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&l++;let c=new s(i.invert(),e,a),h,u=r.length-1;(h=r.length&&r[u].merge(c))?r[u]=h:r.push(c)}}else o.map&&n--},this.items.length,0),new i(o.Z.from(r.reverse()),l)}}i.empty=new i(o.Z.empty,0);class s{constructor(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new s(t.getMap().invert(),t,this.selection)}}}class a{constructor(e,t,n,o,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o,this.prevComposition=r}}let c=20;function h(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,o,r)=>t.push(o,r));return t}function u(e,t){if(!e)return null;let n=[];for(let o=0;o<e.length;o+=2){let r=t.map(e[o],1),l=t.map(e[o+1],-1);r<=l&&n.push(r,l)}return n}let d=!1,p=null;function f(e){let t=e.plugins;if(p!=t){d=!1,p=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){d=!0;break}}return d}let m=new l.H$("history"),g=new l.H$("closeHistory");function y(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new l.Sy({key:m,state:{init:()=>new a(i.empty,i.empty,null,0,-1),apply:(t,n,o)=>(function(e,t,n,o){let r=n.getMeta(m),l;if(r)return r.historyState;n.getMeta(g)&&(e=new a(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(m))if(s.getMeta(m).redo)return new a(e.done.addTransform(n,void 0,o,f(t)),e.undone,h(n.mapping.maps),e.prevTime,e.prevComposition);else return new a(e.done,e.undone.addTransform(n,void 0,o,f(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))if(l=n.getMeta("rebased"))return new a(e.done.rebased(n,l),e.undone.rebased(n,l),u(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);else return new a(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),u(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let r=n.getMeta("composition"),l=0==e.prevTime||!s&&e.prevComposition!=r&&(e.prevTime<(n.time||0)-o.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,o)=>{for(let r=0;r<t.length;r+=2)e<=t[r+1]&&o>=t[r]&&(n=!0)}),n}(n,e.prevRanges)),c=s?u(e.prevRanges,n.mapping):h(n.mapping.maps);return new a(e.done.addTransform(n,l?t.selection.getBookmark():void 0,o,f(t)),i.empty,c,n.time,null==r?e.prevComposition:r)}})(n,o,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,o="historyUndo"==n?w:"historyRedo"==n?v:null;return!!o&&(t.preventDefault(),o(e.state,e.dispatch))}}}})}function b(e,t){return(n,o)=>{let r=m.getState(n);if(!r||0==(e?r.undone:r.done).eventCount)return!1;if(o){let l=function(e,t,n){let o=f(t),r=m.get(t).spec.config,l=(n?e.undone:e.done).popEvent(t,o);if(!l)return null;let i=l.selection.resolve(l.transform.doc),s=(n?e.done:e.undone).addTransform(l.transform,t.selection.getBookmark(),r,o),c=new a(n?s:l.remaining,n?l.remaining:s,null,0,-1);return l.transform.setSelection(i).setMeta(m,{redo:n,historyState:c})}(r,n,e);l&&o(t?l.scrollIntoView():l)}return!0}}let w=b(!1,!0),v=b(!0,!0);b(!1,!1),b(!0,!1)},45798:function(e,t,n){"use strict";n.d(t,{$:()=>c,h:()=>a});var o=n(307593),r=n(377549);let l="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),i="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function s(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function a(e){return new r.Sy({props:{handleKeyDown:c(e)}})}function c(e){let t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,o,r,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let e=0;e<i.length-1;e++){let s=i[e];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))o=!0;else if(/^mod$/i.test(s))l?r=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),o&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,n){let r=(0,o.YG)(n),l,a=t[s(r,n)];if(a&&a(e.state,e.dispatch,e))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let o=t[s(r,n,!1)];if(o&&o(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(i&&n.ctrlKey&&n.altKey)&&(l=o.ue[n.keyCode])&&l!=r){let o=t[s(l,n)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}},733161:function(e,t,n){"use strict";n.d(t,{Dm:()=>p,oU:()=>m});var o=n(776126),r=n(444810);let l=new o.V_({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>"em"==e.type.name}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>"strong"==e.type.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",e.attrs]},code:{code:!0,parseDOM:[{tag:"code"}],toDOM:()=>["code"]}}});class i{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:o.vc.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),n=t.content,r=n[n.length-1],l=this.schema.text(e,t.marks),i;r&&(i=function(e,t){if(e.isText&&t.isText&&o.vc.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(r,l))?n[n.length-1]=i:n.push(l)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let n=e[t],o=this.tokenHandlers[n.type];if(!o)throw Error("Token type `"+n.type+"` not supported by Markdown parser");o(this,n,e,t)}}addNode(e,t,n){let o=this.top(),r=e.createAndFill(t,n,o?o.marks:[]);return r?(this.push(r),r):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:o.vc.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function s(e,t,n,o){return e.getAttrs?e.getAttrs(t,n,o):e.attrs instanceof Function?e.attrs(t):e.attrs}function a(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function c(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function h(){}function u(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}new class{constructor(e,t,n){this.schema=e,this.tokenizer=t,this.tokens=n,this.tokenHandlers=function(e,t){let n=Object.create(null);for(let o in t){let r=t[o];if(r.block){let t=e.nodeType(r.block);a(r,o)?n[o]=(e,n,o,l)=>{e.openNode(t,s(r,n,o,l)),e.addText(c(n.content)),e.closeNode()}:(n[o+"_open"]=(e,n,o,l)=>e.openNode(t,s(r,n,o,l)),n[o+"_close"]=e=>e.closeNode())}else if(r.node){let t=e.nodeType(r.node);n[o]=(e,n,o,l)=>e.addNode(t,s(r,n,o,l))}else if(r.mark){let t=e.marks[r.mark];a(r,o)?n[o]=(e,n,o,l)=>{e.openMark(t.create(s(r,n,o,l))),e.addText(c(n.content)),e.closeMark(t)}:(n[o+"_open"]=(e,n,o,l)=>e.openMark(t.create(s(r,n,o,l))),n[o+"_close"]=e=>e.closeMark(t))}else if(r.ignore)a(r,o)?n[o]=h:(n[o+"_open"]=h,n[o+"_close"]=h);else throw RangeError("Unrecognized parsing spec "+JSON.stringify(r))}return n.text=(e,t)=>e.addText(t.content),n.inline=(e,t)=>e.parseTokens(t.children),n.softbreak=n.softbreak||(e=>e.addText(" ")),n}(e,n)}parse(e,t={}){let n=new i(this.schema,this.tokenHandlers),o;n.parseTokens(this.tokenizer.parse(e,t));do o=n.closeNode();while(n.stack.length);return o||this.schema.topNodeType.createAndFill()}}(l,(0,r.Z)("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:u(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:u(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});let d={open:"",close:"",mixable:!0},p=new class{constructor(e,t,n={}){this.nodes=e,this.marks=t,this.options=n}serialize(e,t={}){t=Object.assign({},this.options,t);let n=new m(this.nodes,this.marks,t);return n.renderContent(e),n.out}}({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){let n=t.textContent.match(/`{3,}/gm),o=n?n.sort().slice(-1)[0]+"`":"```";e.write(o+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.write("\n"),e.write(o),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,o=String(n+t.childCount-1).length,r=e.repeat(" ",o+2);e.renderList(t,r,t=>{let r=String(n+t);return e.repeat(" ",o-r.length)+r+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,o){for(let r=o+1;r<n.childCount;r++)if(n.child(r).type!=t.type)return void e.write("\\\n")},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:(e,t,n,o)=>(e.inAutolink=function(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let o=t.child(n);return!!o.isText&&o.text==e.attrs.href&&o.marks[o.marks.length-1]==e&&(n==t.childCount-1||!e.isInSet(t.child(n+1).marks))}(t,n,o),e.inAutolink?"<":"["),close(e,t,n,o){let{inAutolink:r}=e;return e.inAutolink=void 0,r?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open:(e,t,n,o)=>f(n.child(o),-1),close:(e,t,n,o)=>f(n.child(o-1),1),escape:!1}});function f(e,t){let n=/`+/g,o,r=0;if(e.isText)for(;o=n.exec(e.text);)r=Math.max(r,o[0].length);let l=r>0&&t>0?" `":"`";for(let e=0;e<r;e++)l+="`";return r>0&&t<0&&(l+=" "),l}class m{constructor(e,t,n){this.nodes=e,this.marks=t,this.options=n,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,void 0===this.options.tightLists&&(this.options.tightLists=!1),void 0===this.options.hardBreakNodeName&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+="\n"),e>1){let t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(let n=1;n<e;n++)this.out+=t+"\n"}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(!1!==this.options.strict)throw Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=d}return t}wrapBlock(e,t,n,o){let r=this.delim;this.write(null!=t?t:e),this.delim+=e,o(),this.delim=r,this.closeBlock(n)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+="\n")}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let n=e.split("\n");for(let e=0;e<n.length;e++)this.write(),!t&&"["==n[e][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(n[e],this.atBlockStart):n[e],e!=n.length-1&&(this.out+="\n")}render(e,t,n){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,n);else if(!1!==this.options.strict)throw Error("Token type `"+e.type.name+"` not supported by Markdown renderer");else!e.type.isLeaf&&(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}renderContent(e){e.forEach((t,n,o)=>this.render(t,e,o))}renderInline(e,t=!0){this.atBlockStart=t;let n=[],o="",r=(t,r,l)=>{let i=t?t.marks:[];t&&t.type.name===this.options.hardBreakNodeName&&(i=i.filter(t=>{if(l+1==e.childCount)return!1;let n=e.child(l+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))}));let s=o;if(o="",t&&t.isText&&i.some(e=>{let t=this.getMark(e.type.name);return t&&t.expelEnclosingWhitespace&&!e.isInSet(n)})){let[e,o,r]=/^(\s*)(.*)$/m.exec(t.text);o&&(s+=o,(t=r?t.withText(r):null)||(i=n))}if(t&&t.isText&&i.some(t=>{let n=this.getMark(t.type.name);return n&&n.expelEnclosingWhitespace&&(l==e.childCount-1||!t.isInSet(e.child(l+1).marks))})){let[e,r,l]=/^(.*?)(\s*)$/m.exec(t.text);l&&(o=l,(t=r?t.withText(r):null)||(i=n))}let a=i.length?i[i.length-1]:null,c=a&&!1===this.getMark(a.type.name).escape,h=i.length-!!c;t:for(let e=0;e<h;e++){let t=i[e];if(!this.getMark(t.type.name).mixable)break;for(let o=0;o<n.length;o++){let r=n[o];if(!this.getMark(r.type.name).mixable)break;if(t.eq(r)){e>o?i=i.slice(0,o).concat(t).concat(i.slice(o,e)).concat(i.slice(e+1,h)):o>e&&(i=i.slice(0,e).concat(i.slice(e+1,o)).concat(t).concat(i.slice(o,h)));continue t}}}let u=0;for(;u<Math.min(n.length,h)&&i[u].eq(n[u]);)++u;for(;u<n.length;)this.text(this.markString(n.pop(),!1,e,l),!1);if(s&&this.text(s),t){for(;n.length<h;){let t=i[n.length];n.push(t),this.text(this.markString(t,!0,e,l),!1),this.atBlockStart=!1}c&&t.isText?this.text(this.markString(a,!0,e,l)+t.text+this.markString(a,!1,e,l+1),!1):this.render(t,e,l),this.atBlockStart=!1}(null==t?void 0:t.isText)&&t.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(r),r(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,n){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let o=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,r=this.inTightList;this.inTightList=o,e.forEach((r,l,i)=>{i&&o&&this.flushClose(1),this.wrapBlock(t,n(i),e,()=>this.render(r,e,i))}),this.inTightList=r}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(t,n)=>"_"==t&&n>0&&n+1<e.length&&e[n-1].match(/\w/)&&e[n+1].match(/\w/)?t:"\\"+t),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let n="";for(let o=0;o<t;o++)n+=e;return n}markString(e,t,n,o){let r=this.getMark(e.type.name),l=t?r.open:r.close;return"string"==typeof l?l:l(this,e,n,o)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}}},776126:function(e,t,n){"use strict";n.d(t,{HY:()=>r,NB:()=>x,PW:()=>K,Ts:()=>k,V_:()=>F,ZU:()=>L,aw:()=>V,e4:()=>c,p2:()=>h,vc:()=>a});var o=n(495277);class r{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,o=0,r){for(let l=0,i=0;i<t;l++){let s=this.content[l],a=i+s.nodeSize;if(a>e&&!1!==n(s,o+i,r||null,l)&&s.content.size){let r=i+1;s.nodesBetween(Math.max(0,e-r),Math.min(s.content.size,t-r),n,o+r)}i=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,o){let r="",l=!0;return this.nodesBetween(e,t,(i,s)=>{let a=i.isText?i.text.slice(Math.max(e,s)-s,t-s):i.isLeaf?o?"function"==typeof o?o(i):o:i.type.spec.leafText?i.type.spec.leafText(i):"":"";i.isBlock&&(i.isLeaf&&a||i.isTextblock)&&n&&(l?l=!1:r+=n),r+=a},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,o=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),l=1);l<e.content.length;l++)o.push(e.content[l]);return new r(o,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],o=0;if(t>e)for(let r=0,l=0;l<t;r++){let i=this.content[r],s=l+i.nodeSize;s>e&&((l<e||s>t)&&(i=i.isText?i.cut(Math.max(0,e-l),Math.min(i.text.length,t-l)):i.cut(Math.max(0,e-l-1),Math.min(i.content.size,t-l-1))),n.push(i),o+=i.nodeSize),l=s}return new r(n,o)}cutByIndex(e,t){return e==t?r.empty:0==e&&t==this.content.length?this:new r(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let o=this.content.slice(),l=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new r(o,l)}addToStart(e){return new r([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new r(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let o=this.content[t];e(o,n,t),n+=o.nodeSize}}findDiffStart(e,t=0){return function e(t,n,o){for(let r=0;;r++){if(r==t.childCount||r==n.childCount)return t.childCount==n.childCount?null:o;let l=t.child(r),i=n.child(r);if(l==i){o+=l.nodeSize;continue}if(!l.sameMarkup(i))return o;if(l.isText&&l.text!=i.text){for(let e=0;l.text[e]==i.text[e];e++)o++;return o}if(l.content.size||i.content.size){let t=e(l.content,i.content,o+1);if(null!=t)return t}o+=l.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,o,r){for(let l=t.childCount,i=n.childCount;;){if(0==l||0==i)return l==i?null:{a:o,b:r};let s=t.child(--l),a=n.child(--i),c=s.nodeSize;if(s==a){o-=c,r-=c;continue}if(!s.sameMarkup(a))return{a:o,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,o--,r--;return{a:o,b:r}}if(s.content.size||a.content.size){let t=e(s.content,a.content,o-1,r-1);if(t)return t}o-=c,r-=c}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return i(0,e);if(e==this.size)return i(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,o=0;;n++){let r=o+this.child(n).nodeSize;if(r>=e){if(r==e||t>0)return i(n+1,r);return i(n,o)}o=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return r.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new r(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return r.empty;let t,n=0;for(let o=0;o<e.length;o++){let r=e[o];n+=r.nodeSize,o&&r.isText&&e[o-1].sameMarkup(r)?(t||(t=e.slice(0,o)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new r(t||e,n)}static from(e){if(!e)return r.empty;if(e instanceof r)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new r([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}r.empty=new r([],0);let l={index:0,offset:0};function i(e,t){return l.index=e,l.offset=t,l}function s(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!s(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class a{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let o=0;o<e.length;o++){let r=e[o];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,o));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&s(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let o=n.create(t.attrs);return n.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return a.none;if(e instanceof a)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}a.none=[];class c extends Error{}class h{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,o,r){let{index:l,offset:i}=t.findIndex(n),s=t.maybeChild(l);if(i==n||s.isText)return r&&!r.canReplace(l,l,o)?null:t.cut(0,n).append(o).append(t.cut(n));let a=e(s.content,n-i-1,o);return a&&t.replaceChild(l,s.copy(a))}(this.content,e+this.openStart,t);return n&&new h(n,this.openStart,this.openEnd)}removeBetween(e,t){return new h(function e(t,n,o){let{index:r,offset:l}=t.findIndex(n),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(o);if(l==n||i.isText){if(a!=o&&!t.child(s).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(o))}if(r!=s)throw RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(e(i.content,n-l-1,o-l-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return h.empty;let n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw RangeError("Invalid input for Slice.fromJSON");return new h(r.fromJSON(e,t.content),n,o)}static maxOpen(e,t=!0){let n=0,o=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)o++;return new h(e,n,o)}}function u(e,t){if(!t.type.compatibleContent(e.type))throw new c("Cannot join "+t.type.name+" onto "+e.type.name)}function d(e,t,n){let o=e.node(n);return u(o,t.node(n)),o}function p(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function f(e,t,n,o){let r=(t||e).node(n),l=0,i=t?t.index(n):r.childCount;e&&(l=e.index(n),e.depth>n?l++:e.textOffset&&(p(e.nodeAfter,o),l++));for(let e=l;e<i;e++)p(r.child(e),o);t&&t.depth==n&&t.textOffset&&p(t.nodeBefore,o)}function m(e,t){return e.type.checkContent(t),e.copy(t)}function g(e,t,n){let o=[];return f(null,e,n,o),e.depth>n&&p(m(d(e,t,n+1),g(e,t,n+1)),o),f(t,null,n,o),new r(o)}h.empty=new h(r.empty,0,0);class y{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],o=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)o+=n.child(t).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return a.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){let e=n;n=o,o=e}let r=n.marks;for(var l=0;l<r.length;l++)!1!==r[l].type.spec.inclusive||o&&r[l].isInSet(o.marks)||(r=r[l--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,o=e.parent.maybeChild(e.index());for(var r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||o&&n[r].isInSet(o.marks)||(n=n[r--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new k(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],o=0,r=t;for(let t=e;;){let{index:e,offset:l}=t.content.findIndex(r),i=r-l;if(n.push(t,e,o+l),!i||(t=t.child(e)).isText)break;r=i-1,o+=l+1}return new y(t,n,r)}static resolveCached(e,t){let n=v.get(e);if(n)for(let e=0;e<n.elts.length;e++){let o=n.elts[e];if(o.pos==t)return o}else v.set(e,n=new b);let o=n.elts[n.i]=y.resolve(e,t);return n.i=(n.i+1)%w,o}}class b{constructor(){this.elts=[],this.i=0}}let w=12,v=new WeakMap;class k{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let S=Object.create(null);class x{constructor(e,t,n,o=a.none){this.type=e,this.attrs=t,this.marks=o,this.content=n||r.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,o=0){this.content.nodesBetween(e,t,n,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,o){return this.content.textBetween(e,t,n,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&s(this.attrs,t||e.defaultAttrs||S)&&a.sameSet(this.marks,n||a.none)}copy(e=null){return e==this.content?this:new x(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new x(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return h.empty;let o=this.resolve(e),r=this.resolve(t),l=n?0:o.sharedDepth(t),i=o.start(l);return new h(o.node(l).content.cut(o.pos-i,r.pos-i),o.depth-l,r.depth-l)}replace(e,t,n){var o=this.resolve(e),l=this.resolve(t);if(n.openStart>o.depth)throw new c("Inserted content deeper than insertion position");if(o.depth-n.openStart!=l.depth-n.openEnd)throw new c("Inconsistent open depths");return function e(t,n,o,l){let i=t.index(l),s=t.node(l);if(i==n.index(l)&&l<t.depth-o.openStart){let r=e(t,n,o,l+1);return s.copy(s.content.replaceChild(i,r))}if(!o.content.size)return m(s,g(t,n,l));if(o.openStart||o.openEnd||t.depth!=l||n.depth!=l){let{start:e,end:i}=function(e,t){let n=t.depth-e.openStart,o=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)o=t.node(e).copy(r.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(o,t);return m(s,function e(t,n,o,l,i){let s=t.depth>i&&d(t,n,i+1),a=l.depth>i&&d(o,l,i+1),c=[];return f(null,t,i,c),s&&a&&n.index(i)==o.index(i)?(u(s,a),p(m(s,e(t,n,o,l,i+1)),c)):(s&&p(m(s,g(t,n,i+1)),c),f(n,o,i,c),a&&p(m(a,g(o,l,i+1)),c)),f(l,null,i,c),new r(c)}(t,e,i,n,l))}{let e=t.parent,r=e.content;return m(e,r.cut(0,t.parentOffset).append(o.content).append(r.cut(n.parentOffset)))}}(o,l,n,0)}nodeAt(e){for(let t=this;;){let{index:n,offset:o}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let o=this.content.child(t-1);return{node:o,index:t-1,offset:n-o.nodeSize}}resolve(e){return y.resolveCached(this,e)}resolveNoCache(e){return y.resolve(this,e)}rangeHasMark(e,t,n){let o=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=r.empty,o=0,l=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,o,l),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=o;e<l;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;let r=this.contentMatchAt(e).matchType(n),l=r&&r.matchFragment(this.content,t);return!!l&&l.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=a.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!a.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let o=r.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,o,n);return l.type.checkAttrs(l.attrs),l}}x.prototype.text=void 0;class C extends x{constructor(e,t,n,o){if(super(e,t,null,o),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new C(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new C(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function M(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class O{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let o,r=new T(e,t);if(null==r.next)return O.empty;let l=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,o=n[t];if(o)return[o];let r=[];for(let e in n){let o=n[e];o.isInGroup(t)&&r.push(o)}return 0==r.length&&e.err("No node type or group '"+t+"' found"),r})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=D(e),o=n;return e.eat(",")&&(o="}"!=e.next?D(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}(r);r.next&&r.err("Unexpected trailing text");let i=(n=function(e){let t=[[]];return r(function e(t,l){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,l)),[]);if("seq"==t.type)for(let o=0;;o++){let i=e(t.exprs[o],l);if(o==t.exprs.length-1)return i;r(i,l=n())}else if("star"==t.type){let i=n();return o(l,i),r(e(t.expr,i),i),[o(i)]}else if("plus"==t.type){let i=n();return r(e(t.expr,l),i),r(e(t.expr,i),i),[o(i)]}else if("opt"==t.type)return[o(l)].concat(e(t.expr,l));else if("range"==t.type){let i=l;for(let o=0;o<t.min;o++){let o=n();r(e(t.expr,i),o),i=o}if(-1==t.max)r(e(t.expr,i),i);else for(let l=t.min;l<t.max;l++){let l=n();o(i,l),r(e(t.expr,i),l),i=l}return[o(i)]}else if("name"==t.type)return[o(l,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function o(e,n,o){let r={term:o,to:n};return t[e].push(r),r}function r(e,t){e.forEach(e=>e.to=t)}}(l),o=Object.create(null),function e(t){let r=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let o;if(e){for(let t=0;t<r.length;t++)r[t][0]==e&&(o=r[t][1]);A(n,t).forEach(t=>{o||r.push([e,o=[]]),-1==o.indexOf(t)&&o.push(t)})}})});let l=o[t.join(",")]=new O(t.indexOf(n.length-1)>-1);for(let t=0;t<r.length;t++){let n=r[t][1].sort(N);l.next.push({type:r[t][0],next:o[n.join(",")]||e(n)})}return l}(A(n,0)));return function(e,t){for(let n=0,o=[e];n<o.length;n++){let e=o[n],r=!e.validEnd,l=[];for(let t=0;t<e.next.length;t++){let{type:n,next:i}=e.next[t];l.push(n.name),r&&!(n.isText||n.hasRequiredAttrs())&&(r=!1),-1==o.indexOf(i)&&o.push(i)}r&&t.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let o=this;for(let r=t;o&&r<n;r++)o=o.matchType(e.child(r).type);return o}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let o=[this];return function l(i,s){let a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return r.from(s.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==o.indexOf(n)){o.push(n);let e=l(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let o=n.shift(),r=o.match;if(r.matchType(e)){let e=[];for(let t=o;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<r.next.length;e++){let{type:l,next:i}=r.next[e];l.isLeaf||l.hasRequiredAttrs()||l.name in t||o.type&&!i.validEnd||(n.push({match:l.contentMatch,type:l,via:o}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return!function t(n){e.push(n);for(let o=0;o<n.next.length;o++)-1==e.indexOf(n.next[o].next)&&t(n.next[o].next)}(this),e.map((t,n)=>{let o=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)o+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return o}).join("\n")}}O.empty=new O(!0);class T{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function D(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function N(e,t){return t-e}function A(e,t){let n=[];return function t(o){let r=e[o];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(o);for(let e=0;e<r.length;e++){let{term:o,to:l}=r[e];o||-1!=n.indexOf(l)||t(l)}}(t),n.sort(N)}function E(e){let t=Object.create(null);for(let n in e){let o=e[n];if(!o.hasDefault)return null;t[n]=o.default}return t}function R(e,t){let n=Object.create(null);for(let o in e){let r=t&&t[o];if(void 0===r){let t=e[o];if(t.hasDefault)r=t.default;else throw RangeError("No value supplied for attribute "+o)}n[o]=r}return n}function P(e,t,n,o){for(let o in t)if(!(o in e))throw RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let n in e){let o=e[n];o.validate&&o.validate(t[n])}}function z(e,t){let n=Object.create(null);if(t)for(let o in t)n[o]=new B(e,o,t[o]);return n}class I{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=z(e,n.attrs),this.defaultAttrs=E(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==O.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:R(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new x(this,this.computeAttrs(e),r.from(t),a.setFrom(n))}createChecked(e=null,t,n){return t=r.from(t),this.checkContent(t),new x(this,this.computeAttrs(e),t,a.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=r.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let o=this.contentMatch.matchFragment(t),l=o&&o.fillBefore(r.empty,!0);return l?new x(this,e,t.append(l),a.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){P(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:a.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,o)=>n[e]=new I(e,t,o));let o=t.spec.topNode||"doc";if(!n[o])throw RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class B{constructor(e,t,n){let o;this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?(o=n.validate.split("|"),n=>{let r=null===n?"null":typeof n;if(0>o.indexOf(r))throw RangeError(`Expected value of type ${o} for attribute ${t} on type ${e}, got ${r}`)}):n.validate}get isRequired(){return!this.hasDefault}}class L{constructor(e,t,n,o){this.name=e,this.rank=t,this.schema=n,this.spec=o,this.attrs=z(e,o.attrs),this.excluded=null;let r=E(this.attrs);this.instance=r?new a(this,r):null}create(e=null){return!e&&this.instance?this.instance:new a(this,R(this.attrs,e))}static compile(e,t){let n=Object.create(null),o=0;return e.forEach((e,r)=>n[e]=new L(e,o++,t,r)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){P(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class F{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=o.Z.from(e.nodes),t.marks=o.Z.from(e.marks||{}),this.nodes=I.compile(this.spec.nodes,this),this.marks=L.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],o=t.spec.content||"",r=t.spec.marks;if(t.contentMatch=n[o]||(n[o]=O.parse(o,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==r?null:r?$(this,r.split(" ")):""!=r&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:$(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,o){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof I){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,o)}text(e,t){let n=this.nodes.text;return new C(n,n.defaultAttrs,e,a.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return x.fromJSON(this,e)}markFromJSON(e){return a.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function $(e,t){let n=[];for(let o=0;o<t.length;o++){let r=t[o],l=e.marks[r],i=l;if(l)n.push(l);else for(let t in e.marks){let o=e.marks[t];("_"==r||o.spec.group&&o.spec.group.split(" ").indexOf(r)>-1)&&n.push(i=o)}if(!i)throw SyntaxError("Unknown mark type: '"+t[o]+"'")}return n}class V{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new J(this,t,!1);return n.addAll(e,a.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new J(this,t,!0);return n.addAll(e,a.none,t.from,t.to),h.maxOpen(n.finish())}matchTag(e,t,n){for(let l=n?this.tags.indexOf(n)+1:0;l<this.tags.length;l++){var o,r;let n=this.tags[l];if(o=e,r=n.tag,(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,r)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,o){for(let r=o?this.styles.indexOf(o)+1:0;r<this.styles.length;r++){let o=this.styles[r],l=o.style;if(0==l.indexOf(e)&&(!o.context||n.matchesContext(o.context))&&(!(l.length>e.length)||61==l.charCodeAt(e.length)&&l.slice(e.length+1)==t)){if(o.getAttrs){let e=o.getAttrs(t);if(!1===e)continue;o.attrs=e||void 0}return o}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,o=0;for(;o<t.length;o++){let e=t[o];if((null==e.priority?50:e.priority)<n)break}t.splice(o,0,e)}for(let t in e.marks){let o=e.marks[t].spec.parseDOM;o&&o.forEach(e=>{n(e=U(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let o=e.nodes[t].spec.parseDOM;o&&o.forEach(e=>{n(e=U(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new V(e,V.schemaRules(e)))}}let H={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},q={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},W={ol:!0,ul:!0};function _(e,t,n){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&n}class Y{constructor(e,t,n,o,r,l){this.type=e,this.attrs=t,this.marks=n,this.solid=o,this.options=l,this.content=[],this.activeMarks=a.none,this.match=r||(4&l?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(r.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=r.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(r.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!H.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class J{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let o=t.topNode,r,l=_(null,t.preserveWhitespace,0)|4*!!n;r=o?new Y(o.type,o.attrs,a.none,!0,t.topMatch||o.type.contentMatch,l):n?new Y(null,null,a.none,!0,null,l):new Y(e.schema.topNodeType,null,a.none,!0,null,l),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,o=this.top,r=2&o.options?"full":this.localPreserveWS||(1&o.options)>0;if("full"===r||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r)n="full"!==r?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=o.content[o.content.length-1],r=e.previousSibling;(!t||r&&"BR"==r.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let o=this.localPreserveWS,r=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),i;W.hasOwnProperty(l)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&W.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));n:if(s?s.ignore:q.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let n,o=this.needsBlock;if(H.hasOwnProperty(l))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break n}let i=s&&s.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(r),this.needsBlock=o}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,s,n,!1===s.consuming?i:void 0)}this.localPreserveWS=o}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let o=this.parser.matchedStyles[e],r=n.getPropertyValue(o);if(r)for(let e;;){let n=this.parser.matchStyle(o,r,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,o){let r,l;if(t.node)if((l=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(l.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(l,t.attrs||null,n,t.preserveWhitespace);e&&(r=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let i=this.top;if(l&&l.isLeaf)this.findInside(e);else if(o)this.addElement(e,n,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let o=e;"string"==typeof t.contentElement?o=e.querySelector(t.contentElement):"function"==typeof t.contentElement?o=t.contentElement(e):t.contentElement&&(o=t.contentElement),this.findAround(e,o,!0),this.addAll(o,n),this.findAround(e,o,!1)}r&&this.sync(i)&&this.open--}addAll(e,t,n,o){let r=n||0;for(let l=n?e.childNodes[n]:e.firstChild,i=null==o?null:e.childNodes[o];l!=i;l=l.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(l,t);this.findAtPoint(e,r)}findPlace(e,t,n){let o,r;for(let t=this.open,l=0;t>=0;t--){let i=this.nodes[t],s=i.findWrapping(e);if(s&&(!o||o.length>s.length+l)&&(o=s,r=i,!s.length))break;if(i.solid){if(n)break;l+=2}}if(!o)return null;this.sync(r);for(let e=0;e<o.length;e++)t=this.enterInner(o[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let o=this.findPlace(e,t,n);if(o){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=a.none;for(let r of o.concat(e.marks))(t.type?t.type.allowsMarkType(r.type):j(r.type,e.type))&&(n=r.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,o){let r=this.findPlace(e.create(t),n,!1);return r&&(r=this.enterInner(e,t,n,!0,o)),r}enterInner(e,t,n,o=!1,r){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let i=_(e,r,l.options);4&l.options&&0==l.content.length&&(i|=4);let s=a.none;return n=n.filter(t=>(l.type?!l.type.allowsMarkType(t.type):!j(t.type,e))||(s=t.addToSet(s),!1)),this.nodes.push(new Y(e,t,s,o,null,i)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,o=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),r=-(n?n.depth+1:0)+ +!o,l=(e,i)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;i>=r;i--)if(l(e-1,i))return!0;return!1}{let e=i>0||0==i&&o?this.nodes[i].type:n&&i>=r?n.node(i-r).type:null;if(!e||e.name!=s&&!e.isInGroup(s))return!1;i--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function U(e){let t={};for(let n in e)t[n]=e[n];return t}function j(e,t){let n=t.schema.nodes;for(let o in n){let r=n[o];if(!r.allowsMarkType(e))continue;let l=[],i=e=>{l.push(e);for(let n=0;n<e.edgeCount;n++){let{type:o,next:r}=e.edge(n);if(o==t||0>l.indexOf(r)&&i(r))return!0}};if(i(r.contentMatch))return!0}}class K{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=G(t).createDocumentFragment());let o=n,r=[];return e.forEach(e=>{if(r.length||e.marks.length){let n=0,l=0;for(;n<r.length&&l<e.marks.length;){let t=e.marks[l];if(!this.marks[t.type.name]){l++;continue}if(!t.eq(r[n][0])||!1===t.type.spec.spanning)break;n++,l++}for(;n<r.length;)o=r.pop()[1];for(;l<e.marks.length;){let n=e.marks[l++],i=this.serializeMark(n,e.isInline,t);i&&(r.push([n,o]),o.appendChild(i.dom),o=i.contentDOM||i.dom)}}o.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:o}=Q(G(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let r=this.serializeMark(e.marks[o],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t,n={}){let o=this.marks[e.type.name];return o&&Q(G(n),o(e,t),null,e.attrs)}static renderSpec(e,t,n=null,o){return Q(e,t,n,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new K(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=X(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return X(e.marks)}}function X(e){let t={};for(let n in e){let o=e[n].spec.toDOM;o&&(t[n]=o)}return t}function G(e){return e.document||window.document}let Z=new WeakMap;function Q(e,t,n,o){let r,l,i;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let s=t[0],a;if("string"!=typeof s)throw RangeError("Invalid array passed to renderSpec");if(o&&(void 0===(l=Z.get(o))&&Z.set(o,(i=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])i||(i=[]),i.push(t);else for(let n=0;n<t.length;n++)e(t[n]);else for(let n in t)e(t[n])}(o),l=i)),a=l)&&a.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(n=s.slice(0,c),s=s.slice(c+1));let h=n?e.createElementNS(n,s):e.createElement(s),u=t[1],d=1;if(u&&"object"==typeof u&&null==u.nodeType&&!Array.isArray(u)){for(let e in d=2,u)if(null!=u[e]){let t=e.indexOf(" ");t>0?h.setAttributeNS(e.slice(0,t),e.slice(t+1),u[e]):h.setAttribute(e,u[e])}}for(let l=d;l<t.length;l++){let i=t[l];if(0===i){if(l<t.length-1||l>d)throw RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}{let{dom:t,contentDOM:l}=Q(e,i,n,o);if(h.appendChild(t),l){if(r)throw RangeError("Multiple content holes");r=l}}}return{dom:h,contentDOM:r}}},373811:function(e,t,n){"use strict";n.d(t,{IB:()=>i,KI:()=>l,bw:()=>s});var o=n(539545),r=n(776126);function l(e,t=null){return function(n,l){let{$from:i,$to:s}=n.selection,a=i.blockRange(s);if(!a)return!1;let c=l?n.tr:null;return!!function(e,t,n,l=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=a.resolve(t.start-2);s=new r.Ts(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new r.Ts(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let c=(0,o.nd)(s,n,l,t);return!!c&&(e&&function(e,t,n,l,i){let s=r.HY.empty;for(let e=n.length-1;e>=0;e--)s=r.HY.from(n[e].type.create(n[e].attrs,s));e.step(new o.FC(t.start-2*!!l,t.end,t.start,t.end,new r.p2(s,0,0),n.length,!0));let a=0;for(let e=0;e<n.length;e++)n[e].type==i&&(a=e+1);let c=n.length-a,h=t.start+n.length-2*!!l,u=t.parent;for(let n=t.startIndex,r=t.endIndex,l=!0;n<r;n++,l=!1)!l&&(0,o.Ax)(e.doc,h,c)&&(e.split(h,c),h+=2*c),h+=u.child(n).nodeSize}(e,t,c,i,n),!0)}(c,a,e,t)&&(l&&l(c.scrollIntoView()),!0)}}function i(e){return function(t,n){let{$from:l,$to:i}=t.selection,s=l.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!s&&(!n||(l.node(s.depth-1).type==e?function(e,t,n,l){let i=e.tr,s=l.end,a=l.$to.end(l.depth);s<a&&(i.step(new o.FC(s-1,a,s,a,new r.p2(r.HY.from(n.create(null,l.parent.copy())),1,0),1,!0)),l=new r.Ts(i.doc.resolve(l.$from.pos),i.doc.resolve(a),l.depth));let c=(0,o.k9)(l);if(null==c)return!1;i.lift(l,c);let h=i.doc.resolve(i.mapping.map(s,-1)-1);return(0,o.Mn)(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),t(i.scrollIntoView()),!0}(t,n,e,s):function(e,t,n){let l=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,o=n.startIndex;t>o;t--)e-=i.child(t).nodeSize,l.delete(e-1,e+1);let s=l.doc.resolve(n.start),a=s.nodeAfter;if(l.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,h=n.endIndex==i.childCount,u=s.node(-1),d=s.index(-1);if(!u.canReplace(d+ +!c,d+1,a.content.append(h?r.HY.empty:r.HY.from(i))))return!1;let p=s.pos,f=p+a.nodeSize;return l.step(new o.FC(p-!!c,f+ +!!h,p+1,f-1,new r.p2((c?r.HY.empty:r.HY.from(i.copy(r.HY.empty))).append(h?r.HY.empty:r.HY.from(i.copy(r.HY.empty))),+!c,+!h),+!c)),t(l.scrollIntoView()),!0}(t,n,s)))}}function s(e){return function(t,n){let{$from:l,$to:i}=t.selection,s=l.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!s)return!1;let a=s.startIndex;if(0==a)return!1;let c=s.parent,h=c.child(a-1);if(h.type!=e)return!1;if(n){let l=h.lastChild&&h.lastChild.type==c.type,i=r.HY.from(l?e.create():null),a=new r.p2(r.HY.from(e.create(null,r.HY.from(c.type.create(null,i)))),l?3:1,0),u=s.start,d=s.end;n(t.tr.step(new o.FC(u-(l?3:1),d,u,d,a,1,!0)).scrollIntoView())}return!0}}},377549:function(e,t,n){"use strict";n.d(t,{Bs:()=>h,C1:()=>f,H$:()=>T,Sy:()=>C,Y1:()=>i,qv:()=>d,xm:()=>s,yy:()=>x});var o=n(776126),r=n(539545);let l=Object.create(null);class i{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new s(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=o.p2.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let l=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:c}=i[s],h=e.mapping.slice(l);e.replaceRange(h.map(a.pos),h.map(c.pos),s?o.p2.empty:t),0==s&&y(e,l,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){let{$from:l,$to:i}=o[r],s=e.mapping.slice(n),a=s.map(l.pos),c=s.map(i.pos);r?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),y(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let o=e.parent.inlineContent?new h(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(let o=e.depth-1;o>=0;o--){let r=t<0?g(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):g(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new f(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new f(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=l[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in l)throw RangeError("Duplicate use of selection JSON ID "+e);return l[e]=t,t.prototype.jsonID=e,t}getBookmark(){return h.between(this.$anchor,this.$head).getBookmark()}}i.prototype.visible=!0;class s{constructor(e,t){this.$from=e,this.$to=t}}let a=!1;function c(e){a||e.parent.inlineContent||(a=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class h extends i{constructor(e,t=e){c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return i.near(n);let o=e.resolve(t.map(this.anchor));return new h(o.parent.inlineContent?o:n,n)}replace(e,t=o.p2.empty){if(super.replace(e,t),t==o.p2.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof h&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new h(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))}static between(e,t,n){let o=e.pos-t.pos;if((!n||o)&&(n=o>=0?1:-1),!t.parent.inlineContent){let e=i.findFrom(t,n,!0)||i.findFrom(t,-n,!0);if(!e)return i.near(t,n);t=e.$head}return e.parent.inlineContent||(0==o?e=t:(e=(i.findFrom(e,-n,!0)||i.findFrom(e,n,!0)).$anchor).pos<t.pos!=o<0&&(e=t)),new h(e,t)}}i.jsonID("text",h);class u{constructor(e,t){this.anchor=e,this.head=t}map(e){return new u(e.map(this.anchor),e.map(this.head))}resolve(e){return h.between(e.resolve(this.anchor),e.resolve(this.head))}}class d extends i{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:o}=t.mapResult(this.anchor),r=e.resolve(o);return n?i.near(r):new d(r)}content(){return new o.p2(o.HY.from(this.node),0,0)}eq(e){return e instanceof d&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new d(e.resolve(t.anchor))}static create(e,t){return new d(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}d.prototype.visible=!1,i.jsonID("node",d);class p{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new u(n,n):new p(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):i.near(t)}}class f extends i{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=o.p2.empty){if(t==o.p2.empty){e.delete(0,e.doc.content.size);let t=i.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new f(e)}map(e){return new f(e)}eq(e){return e instanceof f}getBookmark(){return m}}i.jsonID("all",f);let m={map(){return this},resolve:e=>new f(e)};function g(e,t,n,o,r,l=!1){if(t.inlineContent)return h.create(e,n);for(let i=o-(r>0?0:1);r>0?i<t.childCount:i>=0;i+=r){let o=t.child(i);if(o.isAtom){if(!l&&d.isSelectable(o))return d.create(e,n-(r<0?o.nodeSize:0))}else{let t=g(e,o,n+r,r<0?o.childCount:0,r,l);if(t)return t}n+=o.nodeSize*r}return null}function y(e,t,n){let o,l=e.steps.length-1;if(l<t)return;let s=e.steps[l];(s instanceof r.Pu||s instanceof r.FC)&&(e.mapping.maps[l].forEach((e,t,n,r)=>{null==o&&(o=r)}),e.setSelection(i.near(e.doc.resolve(o),n)))}class b extends r.wx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return o.vc.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||o.vc.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let r=this.storedMarks;if(!r){let e=this.doc.resolve(t);r=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(i.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function w(e,t){return t&&e?e.bind(t):e}class v{constructor(e,t,n){this.name=e,this.init=w(t.init,n),this.apply=w(t.apply,n)}}let k=[new v("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new v("selection",{init:(e,t)=>e.selection||i.atStart(t.doc),apply:e=>e.selection}),new v("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,o)=>o.selection.$cursor?e.storedMarks:null}),new v("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class S{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=k.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new v(e.key,e.spec.state,e))})}}class x{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),o=null;for(;;){let r=!1;for(let l=0;l<this.config.plugins.length;l++){let i=this.config.plugins[l];if(i.spec.appendTransaction){let s=o?o[l].n:0,a=o?o[l].state:this,c=s<t.length&&i.spec.appendTransaction.call(i,s?t.slice(s):t,a,n);if(c&&n.filterTransaction(c,l)){if(c.setMeta("appendedTransaction",e),!o){o=[];for(let e=0;e<this.config.plugins.length;e++)o.push(e<l?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),r=!0}o&&(o[l]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new x(this.config),n=this.config.fields;for(let o=0;o<n.length;o++){let r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new b(this)}static create(e){let t=new S(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new x(t);for(let o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n}reconfigure(e){let t=new S(this.schema,e.plugins),n=t.fields,o=new x(t);for(let t=0;t<n.length;t++){let r=n[t].name;o[r]=this.hasOwnProperty(r)?this[r]:n[t].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new S(e.schema,e.plugins),l=new x(r);return r.fields.forEach(r=>{if("doc"==r.name)l.doc=o.NB.fromJSON(e.schema,t.doc);else if("selection"==r.name)l.selection=i.fromJSON(l.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let i=n[o],s=i.spec.state;if(i.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){l[r.name]=s.fromJSON.call(i,e,t[o],l);return}}l[r.name]=r.init(e,l)}}),l}}class C{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,o){for(let r in t){let l=t[r];l instanceof Function?l=l.bind(n):"handleDOMEvents"==r&&(l=e(l,n,{})),o[r]=l}return o}(e.props,this,this.props),this.key=e.key?e.key.key:O("plugin")}getState(e){return e[this.key]}}let M=Object.create(null);function O(e){return e in M?e+"$"+ ++M[e]:(M[e]=0,e+"$")}class T{constructor(e="key"){this.key=O(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},448885:function(e,t,n){"use strict";n.d(t,{Cr:()=>L,G3:()=>ef,II:()=>H,I_:()=>D,JX:()=>B,VH:()=>ea,WQ:()=>W,Xc:()=>k,dO:()=>V,dl:()=>P,e2:()=>N,eA:()=>A,nA:()=>q,qK:()=>z,tp:()=>M,wb:()=>F,z2:()=>R});var o,r,l=n(377549),i=n(776126),s=n(619431),a=n(45798),c=n(539545);if("undefined"!=typeof WeakMap){let e=new WeakMap;o=t=>e.get(t),r=(t,n)=>(e.set(t,n),n)}else{let e=[],t=0;o=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},r=(n,o)=>(10==t&&(t=0),e[t++]=n,e[t++]=o)}var h=class{constructor(e,t,n,o){this.width=e,this.height=t,this.map=n,this.problems=o}findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let o=t%this.width,r=t/this.width|0,l=o+1,i=r+1;for(let e=1;l<this.width&&this.map[t+e]==n;e++)l++;for(let e=1;i<this.height&&this.map[t+this.width*e]==n;e++)i++;return{left:o,top:r,right:l,bottom:i}}throw RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){let{left:o,right:r,top:l,bottom:i}=this.findCell(e);return"horiz"==t?(n<0?0==o:r==this.width)?null:this.map[l*this.width+(n<0?o-1:r)]:(n<0?0==l:i==this.height)?null:this.map[o+this.width*(n<0?l-1:i)]}rectBetween(e,t){let{left:n,right:o,top:r,bottom:l}=this.findCell(e),{left:i,right:s,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,i),top:Math.min(r,a),right:Math.max(o,s),bottom:Math.max(l,c)}}cellsInRect(e){let t=[],n={};for(let o=e.top;o<e.bottom;o++)for(let r=e.left;r<e.right;r++){let l=o*this.width+r,i=this.map[l];!n[i]&&(n[i]=!0,r==e.left&&r&&this.map[l-1]==i||o==e.top&&o&&this.map[l-this.width]==i||t.push(i))}return t}positionAt(e,t,n){for(let o=0,r=0;;o++){let l=r+n.child(o).nodeSize;if(o==e){let n=t+e*this.width,o=(e+1)*this.width;for(;n<o&&this.map[n]<r;)n++;return n==o?l-1:this.map[n]}r=l}}static get(e){return o(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let o=0;o<e.childCount;o++){let r=e.child(o),l=0;if(n)for(let t=0;t<o;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let r=n.child(e);t+r.attrs.rowspan>o&&(l+=r.attrs.colspan)}}for(let e=0;e<r.childCount;e++){let t=r.child(e);l+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=l:t!=l&&(t=Math.max(t,l))}return t}(e),n=e.childCount,o=[],r=0,l=null,i=[];for(let e=0,r=t*n;e<r;e++)o[e]=0;for(let s=0,a=0;s<n;s++){let c=e.child(s);a++;for(let e=0;;e++){for(;r<o.length&&0!=o[r];)r++;if(e==c.childCount)break;let h=c.child(e),{colspan:u,rowspan:d,colwidth:p}=h.attrs;for(let e=0;e<d;e++){if(e+s>=n){(l||(l=[])).push({type:"overlong_rowspan",pos:a,n:d-e});break}let c=r+e*t;for(let e=0;e<u;e++){0==o[c+e]?o[c+e]=a:(l||(l=[])).push({type:"collision",row:s,pos:a,n:u-e});let n=p&&p[e];if(n){let o=(c+e)%t*2,r=i[o];null==r||r!=n&&1==i[o+1]?(i[o]=n,i[o+1]=1):r==n&&i[o+1]++}}}r+=u,a+=h.nodeSize}let h=(s+1)*t,u=0;for(;r<h;)0==o[r++]&&u++;u&&(l||(l=[])).push({type:"missing",row:s,n:u}),a++}(0===t||0===n)&&(l||(l=[])).push({type:"zero_sized"});let s=new h(t,n,o,l),a=!1;for(let e=0;!a&&e<i.length;e+=2)null!=i[e]&&i[e+1]<n&&(a=!0);return a&&function(e,t,n){e.problems||(e.problems=[]);let o={};for(let r=0;r<e.map.length;r++){let l=e.map[r];if(o[l])continue;o[l]=!0;let i=n.nodeAt(l);if(!i)throw RangeError(`No cell with offset ${l} found`);let s=null,a=i.attrs;for(let n=0;n<a.colspan;n++){let o=t[2*((r+n)%e.width)];null==o||a.colwidth&&a.colwidth[n]==o||((s||(s=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(a)))[n]=o)}s&&e.problems.unshift({type:"colwidth mismatch",pos:l,colwidth:s})}}(s,i,e),s}(e))}};function u(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}return t}var d=new l.H$("selectingCells");function p(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function f(e){let t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function m(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let n=p(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw RangeError(`No cell found around position ${t.head}`)}function g(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function y(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function b(e,t,n){let o=e.node(-1),r=h.get(o),l=e.start(-1),i=r.nextCell(e.pos-l,t,n);return null==i?null:e.node(0).resolve(l+i)}function w(e,t,n=1){let o={...e,colspan:e.colspan-n};return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,n),o.colwidth.some(e=>e>0)||(o.colwidth=null)),o}function v(e,t,n=1){let o={...e,colspan:e.colspan+n};if(o.colwidth){o.colwidth=o.colwidth.slice();for(let e=0;e<n;e++)o.colwidth.splice(t,0,0)}return o}var k=class e extends l.Y1{constructor(e,t=e){let n=e.node(-1),o=h.get(n),r=e.start(-1),i=o.rectBetween(e.pos-r,t.pos-r),s=e.node(0),a=o.cellsInRect(i).filter(e=>e!=t.pos-r);a.unshift(t.pos-r);let c=a.map(e=>{let t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);let o=r+e+1;return new l.xm(s.resolve(o),s.resolve(o+t.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t}map(t,n){let o=t.resolve(n.map(this.$anchorCell.pos)),r=t.resolve(n.map(this.$headCell.pos));if(g(o)&&g(r)&&y(o,r)){let t=this.$anchorCell.node(-1)!=o.node(-1);return t&&this.isRowSelection()?e.rowSelection(o,r):t&&this.isColSelection()?e.colSelection(o,r):new e(o,r)}return l.Bs.between(o,r)}content(){let e=this.$anchorCell.node(-1),t=h.get(e),n=this.$anchorCell.start(-1),o=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},l=[];for(let n=o.top;n<o.bottom;n++){let s=[];for(let l=n*t.width+o.left,i=o.left;i<o.right;i++,l++){let n=t.map[l];if(r[n])continue;r[n]=!0;let i=t.findCell(n),a=e.nodeAt(n);if(!a)throw RangeError(`No cell with offset ${n} found`);let c=o.left-i.left,h=i.right-o.right;if(c>0||h>0){let e=a.attrs;if(c>0&&(e=w(e,0,c)),h>0&&(e=w(e,e.colspan-h,h)),i.left<o.left){if(!(a=a.type.createAndFill(e)))throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else a=a.type.create(e,a.content)}if(i.top<o.top||i.bottom>o.bottom){let e={...a.attrs,rowspan:Math.min(i.bottom,o.bottom)-Math.max(i.top,o.top)};a=i.top<o.top?a.type.createAndFill(e):a.type.create(e,a.content)}s.push(a)}l.push(e.child(n).copy(i.HY.from(s)))}let s=this.isColSelection()&&this.isRowSelection()?e:l;return new i.p2(i.HY.from(s),1,1)}replace(e,t=i.p2.empty){let n=e.steps.length,o=this.ranges;for(let r=0;r<o.length;r++){let{$from:l,$to:s}=o[r],a=e.mapping.slice(n);e.replace(a.map(l.pos),a.map(s.pos),r?i.p2.empty:t)}let r=l.Y1.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);r&&e.setSelection(r)}replaceWith(e,t){this.replace(e,new i.p2(i.HY.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),n=h.get(t),o=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let n=0;n<r.length;n++)e(t.nodeAt(r[n]),o+r[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){let o=t.node(-1),r=h.get(o),l=t.start(-1),i=r.findCell(t.pos-l),s=r.findCell(n.pos-l),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(l+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(l+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(l+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(l+r.map[r.width*(r.height-1)+i.right-1]))),new e(t,n)}isRowSelection(){let e=this.$anchorCell.node(-1),t=h.get(e),n=this.$anchorCell.start(-1),o=t.colCount(this.$anchorCell.pos-n),r=t.colCount(this.$headCell.pos-n);return!(Math.min(o,r)>0)&&Math.max(o+this.$anchorCell.nodeAfter.attrs.colspan,r+this.$headCell.nodeAfter.attrs.colspan)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){let o=t.node(-1),r=h.get(o),l=t.start(-1),i=r.findCell(t.pos-l),s=r.findCell(n.pos-l),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(l+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(l+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(l+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(l+r.map[r.width*(i.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,o=n){return new e(t.resolve(n),t.resolve(o))}getBookmark(){return new S(this.$anchorCell.pos,this.$headCell.pos)}};k.prototype.visible=!1,l.Y1.jsonID("cell",k);var S=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&y(t,n)?new k(t,n):l.Y1.near(n,1)}};function x(e){if(!(e.selection instanceof k))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(s.p.node(n,n+e.nodeSize,{class:"selectedCell"}))}),s.EH.create(e.doc,t)}var C=new l.H$("fix-tables");function M(e,t){let n,o=(t,o)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,o){let r,l,i=h.get(t);if(!i.problems)return o;o||(o=e.tr);let s=[];for(let e=0;e<i.height;e++)s.push(0);for(let e=0;e<i.problems.length;e++){let r=i.problems[e];if("collision"==r.type){let e=t.nodeAt(r.pos);if(!e)continue;let l=e.attrs;for(let e=0;e<l.rowspan;e++)s[r.row+e]+=r.n;o.setNodeMarkup(o.mapping.map(n+1+r.pos),null,w(l,l.colspan-r.n,r.n))}else if("missing"==r.type)s[r.row]+=r.n;else if("overlong_rowspan"==r.type){let e=t.nodeAt(r.pos);if(!e)continue;o.setNodeMarkup(o.mapping.map(n+1+r.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-r.n})}else if("colwidth mismatch"==r.type){let e=t.nodeAt(r.pos);if(!e)continue;o.setNodeMarkup(o.mapping.map(n+1+r.pos),null,{...e.attrs,colwidth:r.colwidth})}else if("zero_sized"==r.type){let e=o.mapping.map(n);o.delete(e,e+t.nodeSize)}}for(let e=0;e<s.length;e++)s[e]&&(null==r&&(r=e),l=e);for(let a=0,c=n+1;a<i.height;a++){let n=t.child(a),i=c+n.nodeSize,h=s[a];if(h>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let s=[];for(let n=0;n<h;n++){let n=u(e.schema)[t].createAndFill();n&&s.push(n)}let d=(0==a||r==a-1)&&l==a?c+1:i-1;o.insert(o.mapping.map(d),s)}c=i}return o.setMeta(C,{fixTables:!0})}(e,t,o,n))};return t?t.doc!=e.doc&&function e(t,n,o,r){let l=t.childCount,i=n.childCount;t:for(let s=0,a=0;s<i;s++){let i=n.child(s);for(let e=a,n=Math.min(l,s+3);e<n;e++)if(t.child(e)==i){a=e+1,o+=i.nodeSize;continue t}r(i,o),a<l&&t.child(a).sameMarkup(i)?e(t.child(a),i,o+1,r):i.nodesBetween(0,i.content.size,r,o+1),o+=i.nodeSize}}(t.doc,e.doc,0,o):e.doc.descendants(o),n}function O(e){let t=e.selection,n=m(e),o=n.node(-1),r=n.start(-1),l=h.get(o);return{...t instanceof k?l.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r):l.findCell(n.pos-r),tableStart:r,map:l,table:o}}function T(e,{map:t,tableStart:n,table:o},r){let l=r>0?-1:0;(function(e,t,n){let o=u(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0})(t,o,r+l)&&(l=0==r||r==t.width?null:0);for(let i=0;i<t.height;i++){let s=i*t.width+r;if(r>0&&r<t.width&&t.map[s-1]==t.map[s]){let l=t.map[s],a=o.nodeAt(l);e.setNodeMarkup(e.mapping.map(n+l),null,v(a.attrs,r-t.colCount(l))),i+=a.attrs.rowspan-1}else{let a=null==l?u(o.type.schema).cell:o.nodeAt(t.map[s+l]).type,c=t.positionAt(i,r,o);e.insert(e.mapping.map(n+c),a.createAndFill())}}return e}function D(e,t){if(!f(e))return!1;if(t){let n=O(e);t(T(e.tr,n,n.left))}return!0}function N(e,t){if(!f(e))return!1;if(t){let n=O(e);t(T(e.tr,n,n.right))}return!0}function A(e,t){if(!f(e))return!1;if(t){let n=O(e),o=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;!function(e,{map:t,table:n,tableStart:o},r){let l=e.mapping.maps.length;for(let i=0;i<t.height;){let s=i*t.width+r,a=t.map[s],c=n.nodeAt(a),h=c.attrs;if(r>0&&t.map[s-1]==a||r<t.width-1&&t.map[s+1]==a)e.setNodeMarkup(e.mapping.slice(l).map(o+a),null,w(h,r-t.colCount(a)));else{let t=e.mapping.slice(l).map(o+a);e.delete(t,t+c.nodeSize)}i+=h.rowspan}}(o,n,e),e!=n.left;e--){let e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=h.get(e)}t(o)}return!0}function E(e,{map:t,tableStart:n,table:o},r){var l;let i=n;for(let e=0;e<r;e++)i+=o.child(e).nodeSize;let s=[],a=r>0?-1:0;(function(e,t,n){var o;let r=u(t.type.schema).header_cell;for(let l=0;l<e.width;l++)if((null==(o=t.nodeAt(e.map[l+n*e.width]))?void 0:o.type)!=r)return!1;return!0})(t,o,r+a)&&(a=0==r||r==t.height?null:0);for(let i=0,c=t.width*r;i<t.width;i++,c++)if(r>0&&r<t.height&&t.map[c]==t.map[c-t.width]){let r=t.map[c],l=o.nodeAt(r).attrs;e.setNodeMarkup(n+r,null,{...l,rowspan:l.rowspan+1}),i+=l.colspan-1}else{let e=null==a?u(o.type.schema).cell:null==(l=o.nodeAt(t.map[c+a*t.width]))?void 0:l.type,n=null==e?void 0:e.createAndFill();n&&s.push(n)}return e.insert(i,u(o.type.schema).row.create(null,s)),e}function R(e,t){if(!f(e))return!1;if(t){let n=O(e);t(E(e.tr,n,n.top))}return!0}function P(e,t){if(!f(e))return!1;if(t){let n=O(e);t(E(e.tr,n,n.bottom))}return!0}function z(e,t){if(!f(e))return!1;if(t){let n=O(e),o=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;!function(e,{map:t,table:n,tableStart:o},r){let l=0;for(let e=0;e<r;e++)l+=n.child(e).nodeSize;let i=l+n.child(r).nodeSize,s=e.mapping.maps.length;e.delete(l+o,i+o);let a=new Set;for(let l=0,i=r*t.width;l<t.width;l++,i++){let c=t.map[i];if(!a.has(c)){if(a.add(c),r>0&&c==t.map[i-t.width]){let t=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(s).map(c+o),null,{...t,rowspan:t.rowspan-1}),l+=t.colspan-1}else if(r<t.height&&c==t.map[i+t.width]){let i=n.nodeAt(c),a=i.attrs,h=i.type.create({...a,rowspan:i.attrs.rowspan-1},i.content),u=t.positionAt(r+1,l,n);e.insert(e.mapping.slice(s).map(o+u),h),l+=a.colspan-1}}}}(o,n,e),e!=n.top;e--){let e=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=h.get(n.table)}t(o)}return!0}function I(e){let t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function B(e,t){let n=e.selection;if(!(n instanceof k)||n.$anchorCell.pos==n.$headCell.pos)return!1;let o=O(e),{map:r}=o;if(function({width:e,height:t,map:n},o){let r=o.top*e+o.left,l=r,i=(o.bottom-1)*e+o.left,s=r+(o.right-o.left-1);for(let t=o.top;t<o.bottom;t++){if(o.left>0&&n[l]==n[l-1]||o.right<e&&n[s]==n[s+1])return!0;l+=e,s+=e}for(let l=o.left;l<o.right;l++){if(o.top>0&&n[r]==n[r-e]||o.bottom<t&&n[i]==n[i+e])return!0;r++,i++}return!1}(r,o))return!1;if(t){let n,l,s=e.tr,a={},c=i.HY.empty;for(let e=o.top;e<o.bottom;e++)for(let t=o.left;t<o.right;t++){let i=r.map[e*r.width+t],h=o.table.nodeAt(i);if(!a[i]&&h)if(a[i]=!0,null==n)n=i,l=h;else{I(h)||(c=c.append(h.content));let e=s.mapping.map(i+o.tableStart);s.delete(e,e+h.nodeSize)}}if(null==n||null==l)return!0;if(s.setNodeMarkup(n+o.tableStart,null,{...v(l.attrs,l.attrs.colspan,o.right-o.left-l.attrs.colspan),rowspan:o.bottom-o.top}),c.size){let e=n+1+l.content.size,t=I(l)?n+1:e;s.replaceWith(t+o.tableStart,e+o.tableStart,c)}s.setSelection(new k(s.doc.resolve(n+o.tableStart))),t(s)}return!0}function L(e,t){var n;let o=u(e.schema);return(n=({node:e})=>o[e.type.spec.tableRole],(e,t)=>{var o;let r,l,i=e.selection;if(i instanceof k){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,l=i.$anchorCell.pos}else{if(!(r=function(e){for(let t=e.depth;t>0;t--){let n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from)))return!1;l=null==(o=p(i.$from))?void 0:o.pos}if(null==r||null==l||1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(t){let o,s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s={...s,rowspan:1}),s.colspan>1&&(s={...s,colspan:1});let h=O(e),u=e.tr;for(let e=0;e<h.right-h.left;e++)a.push(c?{...s,colwidth:c&&c[e]?[c[e]]:null}:s);for(let e=h.top;e<h.bottom;e++){let t=h.map.positionAt(e,h.left,h.table);e==h.top&&(t+=r.nodeSize);for(let l=h.left,i=0;l<h.right;l++,i++)(l!=h.left||e!=h.top)&&u.insert(o=u.mapping.map(t+h.tableStart,1),n({node:r,row:e,col:l}).createAndFill(a[i]))}u.setNodeMarkup(l,n({node:r,row:h.top,col:h.left}),a[0]),i instanceof k&&u.setSelection(new k(u.doc.resolve(i.$anchorCell.pos),o?u.doc.resolve(o):void 0)),t(u)}return!0})(e,t)}function F(e,t){return function(n,o){if(!f(n))return!1;let r=m(n);if(r.nodeAfter.attrs[e]===t)return!1;if(o){let l=n.tr;n.selection instanceof k?n.selection.forEachCell((n,o)=>{n.attrs[e]!==t&&l.setNodeMarkup(o,null,{...n.attrs,[e]:t})}):l.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[e]:t}),o(l)}return!0}}function $(e,t,n){let o=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<o.length;e++){let r=t.table.nodeAt(o[e]);if(r&&r.type!==n.header_cell)return!1}return!0}function V(e,t){if((t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic)return function(t,n){if(!f(t))return!1;if(n){let o=u(t.schema),r=O(t),l=t.tr,i=r.map.cellsInRect("column"==e?{left:r.left,top:0,right:r.right,bottom:r.map.height}:"row"==e?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),s=i.map(e=>r.table.nodeAt(e));for(let e=0;e<i.length;e++)s[e].type==o.header_cell&&l.setNodeMarkup(r.tableStart+i[e],o.cell,s[e].attrs);if(0==l.steps.length)for(let e=0;e<i.length;e++)l.setNodeMarkup(r.tableStart+i[e],o.header_cell,s[e].attrs);n(l)}return!0};return function(t,n){if(!f(t))return!1;if(n){let o=u(t.schema),r=O(t),l=t.tr,i=$("row",r,o),s=$("column",r,o),a=+!!("column"===e?i:"row"===e&&s),c="column"==e?{left:0,top:a,right:1,bottom:r.map.height}:"row"==e?{left:a,top:0,right:r.map.width,bottom:1}:r,h="column"==e?s?o.cell:o.header_cell:"row"==e?i?o.cell:o.header_cell:o.cell;r.map.cellsInRect(c).forEach(e=>{let t=e+r.tableStart,n=l.doc.nodeAt(t);n&&l.setNodeMarkup(t,h,n.attrs)}),n(l)}return!0}}V("row",{useDeprecatedLogic:!0}),V("column",{useDeprecatedLogic:!0});var H=V("cell",{useDeprecatedLogic:!0});function q(e){return function(t,n){if(!f(t))return!1;let o=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let o=e.node(-1).child(t),r=o.lastChild;if(r)return n-1-r.nodeSize;n-=o.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),o=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return o+1;o+=e.nodeSize}}return null}(m(t),e);if(null==o)return!1;if(n){let e=t.doc.resolve(o);n(t.tr.setSelection(l.Bs.between(e,e.node(0).resolve(e.pos+e.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function W(e,t){let n=e.selection.$anchor;for(let o=n.depth;o>0;o--)if("table"==n.node(o).type.spec.tableRole)return t&&t(e.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0;return!1}function _(e,t){let n=e.selection;if(!(n instanceof k))return!1;if(t){let o=e.tr,r=u(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(r)||o.replace(o.mapping.map(t+1),o.mapping.map(t+e.nodeSize-1),new i.p2(r,0,0))}),o.docChanged&&t(o)}return!0}function Y(e,t){let n=e.createAndFill();return new c.wx(n).replace(0,n.content.size,t).doc}function J(e,t,n,o,r,l,i,s){if(0==i||i==t.height)return!1;let a=!1;for(let c=r;c<l;c++){let r=i*t.width+c,l=t.map[r];if(t.map[r-t.width]==l){a=!0;let r=n.nodeAt(l),{top:h,left:u}=t.findCell(l);e.setNodeMarkup(e.mapping.slice(s).map(l+o),null,{...r.attrs,rowspan:i-h}),e.insert(e.mapping.slice(s).map(t.positionAt(i,u,n)),r.type.createAndFill({...r.attrs,rowspan:h+r.attrs.rowspan-i})),c+=r.attrs.colspan-1}}return a}function U(e,t,n,o,r,l,i,s){if(0==i||i==t.width)return!1;let a=!1;for(let c=r;c<l;c++){let r=c*t.width+i,l=t.map[r];if(t.map[r-1]==l){a=!0;let r=n.nodeAt(l),h=t.colCount(l),u=e.mapping.slice(s).map(l+o);e.setNodeMarkup(u,null,w(r.attrs,i-h,r.attrs.colspan-(i-h))),e.insert(u+r.nodeSize,r.type.createAndFill(w(r.attrs,0,i-h))),c+=r.attrs.rowspan-1}}return a}function j(e,t,n,o,r){let l=n?e.doc.nodeAt(n-1):e.doc;if(!l)throw Error("No table found");let s=h.get(l),{top:a,left:c}=o,d=c+r.width,p=a+r.height,f=e.tr,m=0;function g(){if(!(l=n?f.doc.nodeAt(n-1):f.doc))throw Error("No table found");s=h.get(l),m=f.mapping.maps.length}(function(e,t,n,o,r,l,s){let a,c,h=u(e.doc.type.schema);if(r>t.width)for(let l=0,i=0;l<t.height;l++){let s,u=n.child(l);i+=u.nodeSize;let d=[];s=null==u.lastChild||u.lastChild.type==h.cell?a||(a=h.cell.createAndFill()):c||(c=h.header_cell.createAndFill());for(let e=t.width;e<r;e++)d.push(s);e.insert(e.mapping.slice(0).map(i-1+o),d)}if(l>t.height){let u=[];for(let e=0,o=(t.height-1)*t.width;e<Math.max(t.width,r);e++){let r=!(e>=t.width)&&n.nodeAt(t.map[o+e]).type==h.header_cell;u.push(r?c||(c=h.header_cell.createAndFill()):a||(a=h.cell.createAndFill()))}let d=h.row.create(null,i.HY.from(u)),p=[];for(let e=t.height;e<l;e++)p.push(d);e.insert(e.mapping.slice(s).map(o+n.nodeSize-2),p)}return!!(a||c)})(f,s,l,n,d,p,0)&&g(),J(f,s,l,n,c,d,a,m)&&g(),J(f,s,l,n,c,d,p,m)&&g(),U(f,s,l,n,a,p,c,m)&&g(),U(f,s,l,n,a,p,d,m)&&g();for(let e=a;e<p;e++){let t=s.positionAt(e,c,l),o=s.positionAt(e,d,l);f.replace(f.mapping.slice(m).map(t+n),f.mapping.slice(m).map(o+n),new i.p2(r.rows[e-a],0,0))}g(),f.setSelection(new k(f.doc.resolve(n+s.positionAt(a,c,l)),f.doc.resolve(n+s.positionAt(p-1,d-1,l)))),t(f)}var K=(0,a.$)({ArrowLeft:G("horiz",-1),ArrowRight:G("horiz",1),ArrowUp:G("vert",-1),ArrowDown:G("vert",1),"Shift-ArrowLeft":Z("horiz",-1),"Shift-ArrowRight":Z("horiz",1),"Shift-ArrowUp":Z("vert",-1),"Shift-ArrowDown":Z("vert",1),Backspace:_,"Mod-Backspace":_,Delete:_,"Mod-Delete":_});function X(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function G(e,t){return(n,o,r)=>{if(!r)return!1;let i=n.selection;if(i instanceof k)return X(n,o,l.Y1.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;let s=en(r,e,t);if(null==s)return!1;if("horiz"==e)return X(n,o,l.Y1.near(n.doc.resolve(i.head+t),t));{let r,i=n.doc.resolve(s),a=b(i,e,t);return r=a?l.Y1.near(a,1):t<0?l.Y1.near(n.doc.resolve(i.before(-1)),-1):l.Y1.near(n.doc.resolve(i.after(-1)),1),X(n,o,r)}}}function Z(e,t){return(n,o,r)=>{let l;if(!r)return!1;let i=n.selection;if(i instanceof k)l=i;else{let o=en(r,e,t);if(null==o)return!1;l=new k(n.doc.resolve(o))}let s=b(l.$headCell,e,t);return!!s&&X(n,o,new k(l.$anchorCell,s))}}function Q(e,t){let n=p(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new k(n))),!0)}function ee(e,t,n){if(!f(e.state))return!1;let o=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:o}=e;for(;1==t.childCount&&(n>0&&o>0||"table"==t.child(0).type.spec.tableRole);)n--,o--,t=t.child(0).content;let r=t.child(0),l=r.type.spec.tableRole,s=r.type.schema,a=[];if("row"==l)for(let e=0;e<t.childCount;e++){let r=t.child(e).content,l=e?0:Math.max(0,n-1),c=e<t.childCount-1?0:Math.max(0,o-1);(l||c)&&(r=Y(u(s).row,new i.p2(r,l,c)).content),a.push(r)}else{if("cell"!=l&&"header_cell"!=l)return null;a.push(n||o?Y(u(s).row,new i.p2(t,n,o)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let o=t[e];for(let t=o.childCount-1;t>=0;t--){let{rowspan:r,colspan:l}=o.child(t).attrs;for(let t=e;t<e+r;t++)n[t]=(n[t]||0)+l}}let o=0;for(let e=0;e<n.length;e++)o=Math.max(o,n[e]);for(let r=0;r<n.length;r++)if(r>=t.length&&t.push(i.HY.empty),n[r]<o){let l=u(e).cell.createAndFill(),s=[];for(let e=n[r];e<o;e++)s.push(l);t[r]=t[r].append(i.HY.from(s))}return{height:t.length,width:o,rows:t}}(s,a)}(n),r=e.state.selection;if(r instanceof k){o||(o={width:1,height:1,rows:[i.HY.from(Y(u(e.state.schema).cell,n))]});let t=r.$anchorCell.node(-1),l=r.$anchorCell.start(-1),s=h.get(t).rectBetween(r.$anchorCell.pos-l,r.$headCell.pos-l);return o=function({width:e,height:t,rows:n},o,r){if(e!=o){let t=[],r=[];for(let e=0;e<n.length;e++){let l=n[e],s=[];for(let n=t[e]||0,r=0;n<o;r++){let i=l.child(r%l.childCount);n+i.attrs.colspan>o&&(i=i.type.createChecked(w(i.attrs,i.attrs.colspan,n+i.attrs.colspan-o),i.content)),s.push(i),n+=i.attrs.colspan;for(let n=1;n<i.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+i.attrs.colspan}r.push(i.HY.from(s))}n=r,e=o}if(t!=r){let e=[];for(let o=0,l=0;o<r;o++,l++){let s=[],a=n[l%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);o+t.attrs.rowspan>r&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,r-t.attrs.rowspan)},t.content)),s.push(t)}e.push(i.HY.from(s))}n=e,t=r}return{width:e,height:t,rows:n}}(o,s.right-s.left,s.bottom-s.top),j(e.state,e.dispatch,l,s,o),!0}if(!o)return!1;{let t=m(e.state),n=t.start(-1);return j(e.state,e.dispatch,n,h.get(t.node(-1)).findCell(t.pos-n),o),!0}}function et(e,t){var n;let o;if(t.ctrlKey||t.metaKey)return;let r=eo(e,t.target);if(t.shiftKey&&e.state.selection instanceof k)l(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=p(e.state.selection.$anchor))&&(null==(n=er(e,t))?void 0:n.pos)!=o.pos)l(o,t),t.preventDefault();else if(!r)return;function l(t,n){let o=er(e,n),r=null==d.getState(e.state);if(!o||!y(t,o))if(!r)return;else o=t;let l=new k(t,o);if(r||!e.state.selection.eq(l)){let n=e.state.tr.setSelection(l);r&&n.setMeta(d,t.pos),e.dispatch(n)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),null!=d.getState(e.state)&&e.dispatch(e.state.tr.setMeta(d,-1))}function s(n){let o,s=d.getState(e.state);if(null!=s)o=e.state.doc.resolve(s);else if(eo(e,n.target)!=r&&!(o=er(e,t)))return i();o&&l(o,n)}e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function en(e,t,n){if(!(e.state.selection instanceof l.Bs))return null;let{$head:o}=e.state.selection;for(let r=o.depth-1;r>=0;r--){let l=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!=(n<0?0:l.childCount))break;if("cell"==l.type.spec.tableRole||"header_cell"==l.type.spec.tableRole){let l=o.before(r),i="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(i)?l:null}}return null}function eo(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function er(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?p(e.state.doc.resolve(n.pos)):null}var el=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ei(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,ei(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function ei(e,t,n,o,r,l){var i;let s=0,a=!0,c=t.firstChild,h=e.firstChild;if(h){for(let e=0,n=0;e<h.childCount;e++){let{colspan:i,colwidth:u}=h.child(e).attrs;for(let e=0;e<i;e++,n++){let i=r==n?l:u&&u[e],h=i?i+"px":"";if(s+=i||o,i||(a=!1),c)c.style.width!=h&&(c.style.width=h),c=c.nextSibling;else{let e=document.createElement("col");e.style.width=h,t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null==(i=c.parentNode)||i.removeChild(c),c=e}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var es=new l.H$("tableColumnResizing");function ea({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:o=el,lastColumnResizable:r=!0}={}){let i=new l.Sy({key:es,state:{init(e,t){var r,l;let s=null==(l=null==(r=i.spec)?void 0:r.props)?void 0:l.nodeViews,a=u(t.schema).table.name;return o&&s&&(s[a]=(e,t)=>new o(e,n,t)),new ec(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{let t=es.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,o){if(!e.editable)return;let r=es.getState(e.state);if(r&&!r.dragging){let l=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),i=-1;if(l){let{left:o,right:r}=l.getBoundingClientRect();t.clientX-o<=n?i=eh(e,t,"left",n):r-t.clientX<=n&&(i=eh(e,t,"right",n))}if(i!=r.activeHandle){if(!o&&-1!==i){let t=e.state.doc.resolve(i),n=t.node(-1),o=h.get(n),r=t.start(-1);if(o.colCount(t.pos-r)+t.nodeAfter.attrs.colspan-1==o.width-1)return}ed(e,i)}}}(t,n,e,r)},mouseleave:e=>{!function(e){if(!e.editable)return;let t=es.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&ed(e,-1)}(e)},mousedown:(e,o)=>{!function(e,t,n,o){var r;if(!e.editable)return;let l=null!=(r=e.dom.ownerDocument.defaultView)?r:window,i=es.getState(e.state);if(!i||-1==i.activeHandle||i.dragging)return;let s=e.state.doc.nodeAt(i.activeHandle),a=function(e,t,{colspan:n,colwidth:o}){let r=o&&o[o.length-1];if(r)return r;let l=e.domAtPos(t),i=l.node.childNodes[l.offset].offsetWidth,s=n;if(o)for(let e=0;e<n;e++)o[e]&&(i-=o[e],s--);return i/s}(e,i.activeHandle,s.attrs);function c(t){l.removeEventListener("mouseup",c),l.removeEventListener("mousemove",u);let o=es.getState(e.state);(null==o?void 0:o.dragging)&&(function(e,t,n){let o=e.state.doc.resolve(t),r=o.node(-1),l=h.get(r),i=o.start(-1),s=l.colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1,a=e.state.tr;for(let e=0;e<l.height;e++){let t=e*l.width+s;if(e&&l.map[t]==l.map[t-l.width])continue;let o=l.map[t],c=r.nodeAt(o).attrs,h=1==c.colspan?0:s-l.colCount(o);if(c.colwidth&&c.colwidth[h]==n)continue;let u=c.colwidth?c.colwidth.slice():Array(c.colspan).fill(0);u[h]=n,a.setNodeMarkup(i+o,null,{...c,colwidth:u})}a.docChanged&&e.dispatch(a)}(e,o.activeHandle,eu(o.dragging,t,n)),e.dispatch(e.state.tr.setMeta(es,{setDragging:null})))}function u(t){if(!t.which)return c(t);let r=es.getState(e.state);if(r&&r.dragging){let l=eu(r.dragging,t,n);ep(e,r.activeHandle,l,o)}}e.dispatch(e.state.tr.setMeta(es,{setDragging:{startX:t.clientX,startWidth:a}})),ep(e,i.activeHandle,a,o),l.addEventListener("mouseup",c),l.addEventListener("mousemove",u),t.preventDefault()}(e,o,t,n)}},decorations:e=>{let t=es.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;let o=[],r=e.doc.resolve(t),l=r.node(-1);if(!l)return s.EH.empty;let i=h.get(l),a=r.start(-1),c=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1;for(let t=0;t<i.height;t++){let r=c+t*i.width;if((c==i.width-1||i.map[r]!=i.map[r+1])&&(0==t||i.map[r]!=i.map[r-i.width])){let t=i.map[r],c=a+t+l.nodeAt(t).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",(null==(n=es.getState(e))?void 0:n.dragging)&&o.push(s.p.node(a+t,a+t+l.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),o.push(s.p.widget(c,h))}}return s.EH.create(e.doc,o)}(e,t.activeHandle)},nodeViews:{}}});return i}var ec=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){let n=t.getMeta(es);if(n&&null!=n.setHandle)return new e(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new e(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&t.docChanged){let n=t.mapping.map(this.activeHandle,-1);return g(t.doc.resolve(n))||(n=-1),new e(n,this.dragging)}return this}};function eh(e,t,n,o){let r=e.posAtCoords({left:t.clientX+("right"==n?-o:o),top:t.clientY});if(!r)return -1;let{pos:l}=r,i=p(e.state.doc.resolve(l));if(!i)return -1;if("right"==n)return i.pos;let s=h.get(i.node(-1)),a=i.start(-1),c=s.map.indexOf(i.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function eu(e,t,n){let o=t.clientX-e.startX;return Math.max(n,e.startWidth+o)}function ed(e,t){e.dispatch(e.state.tr.setMeta(es,{setHandle:t}))}function ep(e,t,n,o){let r=e.state.doc.resolve(t),l=r.node(-1),i=r.start(-1),s=h.get(l).colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,a=e.domAtPos(r.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;a&&ei(l,a.firstChild,a,o,s,n)}function ef({allowTableNodeSelection:e=!1}={}){return new l.Sy({key:d,state:{init:()=>null,apply(e,t){let n=e.getMeta(d);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:o,pos:r}=e.mapping.mapResult(t);return o?null:r}},props:{decorations:x,handleDOMEvents:{mousedown:et},createSelectionBetween:e=>null!=d.getState(e.state)?e.state.selection:null,handleTripleClick:Q,handleKeyDown:K,handlePaste:ee},appendTransaction:(t,n,o)=>(function(e,t,n){let o,r,i=(t||e).selection,s=(t||e).doc;if(i instanceof l.qv&&(r=i.node.type.spec.tableRole)){if("cell"==r||"header_cell"==r)o=k.create(s,i.from);else if("row"==r){let e=s.resolve(i.from+1);o=k.rowSelection(e,e)}else if(!n){let e=h.get(i.node),t=i.from+1,n=t+e.map[e.width*e.height-1];o=k.create(s,t+1,n)}}else i instanceof l.Bs&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,o=t.pos,r=e.depth;for(;r>=0&&!(e.after(r+1)<e.end(r));r--,n++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,o--);return n==o&&/row|table/.test(e.node(r).type.spec.tableRole)}(i)?o=l.Bs.create(s,i.from):i instanceof l.Bs&&function({$from:e,$to:t}){let n,o;for(let t=e.depth;t>0;t--){let o=e.node(t);if("cell"===o.type.spec.tableRole||"header_cell"===o.type.spec.tableRole){n=o;break}}for(let e=t.depth;e>0;e--){let n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){o=n;break}}return n!==o&&0===t.parentOffset}(i)&&(o=l.Bs.create(s,i.$from.start(),i.$from.end()));return o&&(t||(t=e.tr)).setSelection(o),t})(o,M(o,n),e)})}},539545:function(e,t,n){"use strict";n.d(t,{Ax:()=>C,FC:()=>g,GJ:()=>T,Mn:()=>M,Pu:()=>m,dR:()=>N,k9:()=>w,nd:()=>v,nj:()=>D,vs:()=>i,wx:()=>V});var o=n(776126);class r{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class l{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&l.empty)return l.empty}recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let o=0,l=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?o:0);if(a>e)break;let c=this.ranges[s+l],h=this.ranges[s+i],u=a+c;if(e<=u){let l=c?e==a?-1:e==u?1:t:t,i=a+o+(l<0?0:h);if(n)return i;let d=e==(t<0?a:u)?null:s/3+(e-a)*65536,p=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(p|=8),new r(i,p,d)}o+=h-c}return n?e+o:new r(e+o,0,null)}touches(e,t){let n=0,o=65535&t,r=this.inverted?2:1,l=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let i=this.ranges[t]-(this.inverted?n:0);if(i>e)break;let s=this.ranges[t+r];if(e<=i+s&&t==3*o)return!0;n+=this.ranges[t+l]-s}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let o=0,r=0;o<this.ranges.length;o+=3){let l=this.ranges[o],i=l-(this.inverted?r:0),s=l+(this.inverted?0:r),a=this.ranges[o+t],c=this.ranges[o+n];e(i,i+a,s,s+c),r+=c-a}}invert(){return new l(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?l.empty:new l(e<0?[0,-e,0]:[0,0,e])}}l.empty=new l([]);class i{constructor(e,t,n=0,o=e?e.length:0){this.mirror=t,this.from=n,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new i(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],null!=o&&o<t?n+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=o&&o>t?n-o-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let o=0;for(let n=this.from;n<this.to;n++){let r=this._maps[n].mapResult(e,t);if(null!=r.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(r.recover);continue}}o|=r.delInfo,e=r.pos}return n?e:new r(e,o,null)}}let s=Object.create(null);class a{getMap(){return l.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=s[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in s)throw RangeError("Duplicate use of step JSON ID "+e);return s[e]=t,t.prototype.jsonID=e,t}}class c{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new c(e,null)}static fail(e){return new c(null,e)}static fromReplace(e,t,n,r){try{return c.ok(e.replace(t,n,r))}catch(e){if(e instanceof o.e4)return c.fail(e.message);throw e}}}function h(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let l=e.child(o);l.content.size&&(l=l.copy(h(l.content,t,l))),l.isInline&&(l=t(l,n,o)),r.push(l)}return o.HY.fromArray(r)}class u extends a{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),l=new o.p2(h(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return c.fromReplace(e,this.from,this.to,l)}invert(){return new d(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new u(t.pos,n.pos,this.mark)}merge(e){return e instanceof u&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new u(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new u(t.from,t.to,e.markFromJSON(t.mark))}}a.jsonID("addMark",u);class d extends a{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new o.p2(h(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return c.fromReplace(e,this.from,this.to,n)}invert(){return new u(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new d(t.pos,n.pos,this.mark)}merge(e){return e instanceof d&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new d(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(t.from,t.to,e.markFromJSON(t.mark))}}a.jsonID("removeMark",d);class p extends a{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return c.fromReplace(e,this.pos,this.pos+1,new o.p2(o.HY.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new p(this.pos,t.marks[n]);return new p(this.pos,this.mark)}}return new f(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new p(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new p(t.pos,e.markFromJSON(t.mark))}}a.jsonID("addNodeMark",p);class f extends a{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return c.fromReplace(e,this.pos,this.pos+1,new o.p2(o.HY.from(n),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new p(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new f(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new f(t.pos,e.markFromJSON(t.mark))}}a.jsonID("removeNodeMark",f);class m extends a{constructor(e,t,n,o=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=o}apply(e){return this.structure&&y(e,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new l([this.from,this.to-this.from,this.slice.size])}invert(e){return new m(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new m(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof m)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?o.p2.empty:new o.p2(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new m(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?o.p2.empty:new o.p2(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new m(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new m(t.from,t.to,o.p2.fromJSON(e,t.slice),!!t.structure)}}a.jsonID("replace",m);class g extends a{constructor(e,t,n,o,r,l,i=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=o,this.slice=r,this.insert=l,this.structure=i}apply(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return c.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?c.fromReplace(e,this.from,this.to,n):c.fail("Content does not fit in gap")}getMap(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||o<t.pos||r>n.pos?null:new g(t.pos,n.pos,o,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(t.from,t.to,t.gapFrom,t.gapTo,o.p2.fromJSON(e,t.slice),t.insert,!!t.structure)}}function y(e,t,n){let o=e.resolve(t),r=n-t,l=o.depth;for(;r>0&&l>0&&o.indexAfter(l)==o.node(l).childCount;)l--,r--;if(r>0){let e=o.node(l).maybeChild(o.indexAfter(l));for(;r>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,r--}}return!1}function b(e,t,n,r=n.contentMatch,l=!0){let i=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<i.childCount;t++){let c=i.child(t),h=a+c.nodeSize,u=r.matchType(c.type);if(u){r=u;for(let t=0;t<c.marks.length;t++)n.allowsMarkType(c.marks[t].type)||e.step(new d(a,h,c.marks[t]));if(l&&c.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,r;for(;e=t.exec(c.text);)r||(r=new o.p2(o.HY.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new m(a+e.index,a+e.index+e[0].length,r))}}else s.push(new m(a,h,o.p2.empty));a=h}if(!r.validEnd){let t=r.fillBefore(o.HY.empty,!0);e.replace(a,a,new o.p2(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function w(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let o=e.$from.node(n),r=e.$from.index(n),l=e.$to.indexAfter(n);if(n<e.depth&&o.canReplace(r,l,t))return n;if(0==n||o.type.spec.isolating||!((0==r||o.canReplace(r,o.childCount))&&(l==o.childCount||o.canReplace(0,l))))break}return null}function v(e,t,n=null,o=e){let r=function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,l=n.contentMatchAt(o).findWrapping(t);if(!l)return null;let i=l.length?l[0]:t;return n.canReplaceWith(o,r,i)?l:null}(e,t),l=r&&function(e,t){let{parent:n,startIndex:o,endIndex:r}=e,l=n.child(o),i=t.contentMatch.findWrapping(l.type);if(!i)return null;let s=(i.length?i[i.length-1]:t).contentMatch;for(let e=o;s&&e<r;e++)s=s.matchType(n.child(e).type);return s&&s.validEnd?i:null}(o,t);return l?r.map(k).concat({type:t,attrs:n}).concat(l.map(k)):null}function k(e){return{type:e,attrs:null}}function S(e,t,n,o){t.forEach((r,l)=>{if(r.isText){let i,s=/\r?\n|\r/g;for(;i=s.exec(r.text);){let r=e.mapping.slice(o).map(n+1+l+i.index);e.replaceWith(r,r+1,t.type.schema.linebreakReplacement.create())}}})}function x(e,t,n,o){t.forEach((r,l)=>{if(r.type==r.type.schema.linebreakReplacement){let r=e.mapping.slice(o).map(n+1+l);e.replaceWith(r,r+1,t.type.schema.text("\n"))}})}function C(e,t,n=1,o){let r=e.resolve(t),l=r.depth-n,i=o&&o[o.length-1]||r.parent;if(l<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!i.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let e=r.depth-1,t=n-2;e>l;e--,t--){let n=r.node(e),l=r.index(e);if(n.type.spec.isolating)return!1;let i=n.content.cutByIndex(l,n.childCount),s=o&&o[t+1];s&&(i=i.replaceChild(0,s.type.create(s.attrs)));let a=o&&o[t]||n;if(!n.canReplace(l+1,n.childCount)||!a.type.validContent(i))return!1}let s=r.indexAfter(l),a=o&&o[0];return r.node(l).canReplaceWith(s,s,a?a.type:r.node(l+1).type)}function M(e,t){let n=e.resolve(t),o=n.index();return O(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)}function O(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:o}=e.type.schema;for(let r=0;r<t.childCount;r++){let l=t.child(r),i=l.type==o?e.type.schema.nodes.text:l.type;if(!(n=n.matchType(i))||!e.type.allowsMarks(l.marks))return!1}return n.validEnd}(e,t))}function T(e,t,n=-1){let o=e.resolve(t);for(let e=o.depth;;e--){let r,l,i=o.index(e);if(e==o.depth?(r=o.nodeBefore,l=o.nodeAfter):n>0?(r=o.node(e+1),i++,l=o.node(e).maybeChild(i)):(r=o.node(e).maybeChild(i-1),l=o.node(e+1)),r&&!r.isTextblock&&O(r,l)&&o.node(e).canReplace(i,i+1))return t;if(0==e)break;t=n<0?o.before(e):o.after(e)}}function D(e,t,n){let o=e.resolve(t);if(!n.content.size)return t;let r=n.content;for(let e=0;e<n.openStart;e++)r=r.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=o.depth;t>=0;t--){let n=t==o.depth?0:o.pos<=(o.start(t+1)+o.end(t+1))/2?-1:1,l=o.index(t)+ +(n>0),i=o.node(t),s=!1;if(1==e)s=i.canReplace(l,l,r);else{let e=i.contentMatchAt(l).findWrapping(r.firstChild.type);s=e&&i.canReplaceWith(l,l,e[0])}if(s)return 0==n?o.pos:n<0?o.before(t+1):o.after(t+1)}return null}function N(e,t,n=t,r=o.p2.empty){if(t==n&&!r.size)return null;let l=e.resolve(t),i=e.resolve(n);return A(l,i,r)?new m(t,n,r):new E(l,i,r).fit()}function A(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}a.jsonID("replaceAround",g);class E{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=o.HY.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=o.HY.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let l=this.placed,i=n.depth,s=r.depth;for(;i&&s&&1==l.childCount;)l=l.firstChild.content,i--,s--;let a=new o.p2(l,i,s);return e>-1?new g(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new m(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,o=this.unplaced.openEnd;n<e;n++){let r=t.firstChild;if(t.childCount>1&&(o=0),r.type.spec.isolating&&o<=n){e=n;break}t=r.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e=null,r=(n?(e=z(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let l=this.depth;l>=0;l--){let{type:i,match:s}=this.frontier[l],a,c=null;if(1==t&&(r?s.matchType(r.type)||(c=s.fillBefore(o.HY.from(r),!1)):e&&i.compatibleContent(e.type)))return{sliceDepth:n,frontierDepth:l,parent:e,inject:c};if(2==t&&r&&(a=s.findWrapping(r.type)))return{sliceDepth:n,frontierDepth:l,parent:e,wrap:a};if(e&&s.matchType(e.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=z(e,t);return!!r.childCount&&!r.firstChild.isLeaf&&(this.unplaced=new o.p2(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=z(e,t);if(r.childCount<=1&&t>0){let l=e.size-t<=t+r.size;this.unplaced=new o.p2(R(e,t-1,1),t-1,l?t-1:n)}else this.unplaced=new o.p2(R(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let e=0;e<l.length;e++)this.openFrontierNode(l[e]);let i=this.unplaced,s=n?n.content:i.content,a=i.openStart-e,c=0,h=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)h.push(r.child(e));u=u.matchFragment(r)}let p=s.size+e-(i.content.size-i.openEnd);for(;c<s.childCount;){let e=s.child(c),t=u.matchType(e.type);if(!t)break;(++c>1||0==a||e.content.size)&&(u=t,h.push(function e(t,n,r){if(n<=0)return t;let l=t.content;return n>1&&(l=l.replaceChild(0,e(l.firstChild,n-1,1==l.childCount?r-1:0))),n>0&&(l=t.type.contentMatch.fillBefore(l).append(l),r<=0&&(l=l.append(t.type.contentMatch.matchFragment(l).fillBefore(o.HY.empty,!0)))),t.copy(l)}(e.mark(d.allowedMarks(e.marks)),1==c?a:0,c==s.childCount?p:-1)))}let f=c==s.childCount;f||(p=-1),this.placed=P(this.placed,t,o.HY.from(h)),this.frontier[t].match=u,f&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<p;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?o.p2.empty:new o.p2(R(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new o.p2(R(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!I(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,o=this.$to.after(n);for(;n>1&&o==this.$to.end(--n);)++o;return o}findCloseLevel(e){o:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:o}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=I(e,t,o,n,r);if(l){for(let n=t-1;n>=0;n--){let{match:t,type:o}=this.frontier[n],r=I(e,n,o,t,!0);if(!r||r.childCount)continue o}return{depth:t,fit:l,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=P(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),o=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,o)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=P(this.placed,this.depth,o.HY.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(o.HY.empty,!0);e.childCount&&(this.placed=P(this.placed,this.frontier.length,e))}}function R(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(R(e.firstChild.content,t-1,n)))}function P(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(P(e.lastChild.content,t-1,n)))}function z(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function I(e,t,n,o,r){let l=e.node(t),i=r?e.indexAfter(t):e.index(t);if(i==l.childCount&&!n.compatibleContent(l.type))return null;let s=o.fillBefore(l.content,!0,i);return s&&!function(e,t,n){for(let o=n;o<t.childCount;o++)if(!e.allowsMarks(t.child(o).marks))return!0;return!1}(n,l.content,i)?s:null}function B(e,t){let n=[],o=Math.min(e.depth,t.depth);for(let r=o;r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class L extends a{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return c.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return c.fromReplace(e,this.pos,this.pos+1,new o.p2(o.HY.from(r),0,+!t.isLeaf))}getMap(){return l.empty}invert(e){return new L(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new L(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new L(t.pos,t.attr,t.value)}}a.jsonID("attr",L);class F extends a{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return c.ok(n)}getMap(){return l.empty}invert(e){return new F(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new F(t.attr,t.value)}}a.jsonID("docAttr",F);let $=class extends Error{};($=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),$.prototype.constructor=$,$.prototype.name="TransformError";class V{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new i}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new $(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=o.p2.empty){let r=N(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new o.p2(o.HY.from(n),0,0))}delete(e,t){return this.replace(e,t,o.p2.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return!function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let l=e.doc.resolve(t),i=e.doc.resolve(n);if(A(l,i,r))return e.step(new m(t,n,r));let s=B(l,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(l.depth+1);s.unshift(a);for(let e=l.depth,t=l.pos-1;e>0;e--,t--){let n=l.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?a=e:l.before(e)==t&&s.splice(1,0,-e)}let c=s.indexOf(a),h=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(h.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){var d;let t=h[e],n=(d=t.type).spec.defining||d.spec.definingForContent;if(n&&!t.sameMarkup(l.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),d=h[a];if(d)for(let t=0;t<s.length;t++){let h=s[(t+c)%s.length],u=!0;h<0&&(u=!1,h=-h);let p=l.node(h-1),f=l.index(h-1);if(p.canReplaceWith(f,f,d.type,d.marks))return e.replace(l.before(h),u?i.after(h):n,new o.p2(function e(t,n,r,l,i){if(n<r){let o=t.firstChild;t=t.replaceChild(0,o.copy(e(o.content,n+1,r,l,o)))}if(n>l){let e=i.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(o.HY.empty,!0))}return t}(r.content,0,r.openStart,a),a,r.openEnd))}}let p=e.steps.length;for(let o=s.length-1;o>=0&&(e.replace(t,n,r),!(e.steps.length>p));o--){let e=s[o];e<0||(t=l.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){var r=e,l=t;if(!n.isInline&&r==l&&this.doc.resolve(r).parent.content.size){let e=function(e,t,n){let o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(let e=o.depth-1;e>=0;e--){let t=o.index(e);if(o.node(e).canReplaceWith(t,t,n))return o.before(e+1);if(t>0)return null}if(o.parentOffset==o.parent.content.size)for(let e=o.depth-1;e>=0;e--){let t=o.indexAfter(e);if(o.node(e).canReplaceWith(t,t,n))return o.after(e+1);if(t<o.node(e).childCount)break}return null}(this.doc,r,n.type);null!=e&&(r=l=e)}return this.replaceRange(r,l,new o.p2(o.HY.from(n),0,0)),this}deleteRange(e,t){return!function(e,t,n){let o=e.doc.resolve(t),r=e.doc.resolve(n),l=B(o,r);for(let t=0;t<l.length;t++){let n=l[t],i=t==l.length-1;if(i&&0==n||o.node(n).type.contentMatch.validEnd)return e.delete(o.start(n),r.end(n));if(n>0&&(i||o.node(n-1).canReplace(o.index(n-1),r.indexAfter(n-1))))return e.delete(o.before(n),r.after(n))}for(let l=1;l<=o.depth&&l<=r.depth;l++)if(t-o.start(l)==o.depth-l&&n>o.end(l)&&r.end(l)-n!=r.depth-l&&o.start(l-1)==r.start(l-1)&&o.node(l-1).canReplace(o.index(l-1),r.index(l-1)))return e.delete(o.before(l),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return!function(e,t,n){let{$from:r,$to:l,depth:i}=t,s=r.before(i+1),a=l.after(i+1),c=s,h=a,u=o.HY.empty,d=0;for(let e=i,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=o.HY.from(r.node(e).copy(u)),d++):c--;let p=o.HY.empty,f=0;for(let e=i,t=!1;e>n;e--)t||l.after(e+1)<l.end(e)?(t=!0,p=o.HY.from(l.node(e).copy(p)),f++):h++;e.step(new g(c,h,s,a,new o.p2(u.append(p),d,f),u.size-d,!0))}(this,e,t),this}join(e,t=1){return!function(e,t,n){let r=null,{linebreakReplacement:l}=e.doc.type.schema,i=e.doc.resolve(t-n),s=i.node().type;if(l&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(l);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let o=e.doc.resolve(t+n);x(e,o.node(),o.before(),a)}s.inlineContent&&b(e,t+n-1,s,i.node().contentMatchAt(i.index()),null==r);let c=e.mapping.slice(a),h=c.map(t-n);if(e.step(new m(h,c.map(t+n,-1),o.p2.empty,!0)),!0===r){let t=e.doc.resolve(h);S(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return!function(e,t,n){let r=o.HY.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=o.HY.from(n[e].type.create(n[e].attrs,r))}let l=t.start,i=t.end;e.step(new g(l,i,l,i,new o.p2(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){var l=this;if(!n.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let i=l.steps.length;return l.doc.nodesBetween(e,t,(e,t)=>{var s,a,c;let h,u,d="function"==typeof r?r(e):r;if(e.isTextblock&&!e.hasMarkup(n,d)&&(s=l.doc,a=l.mapping.slice(i).map(t),c=n,u=(h=s.resolve(a)).index(),h.parent.canReplaceWith(u,u+1,c))){let r=null;if(n.schema.linebreakReplacement){let e="pre"==n.whitespace,t=!!n.contentMatch.matchType(n.schema.linebreakReplacement);e&&!t?r=!1:!e&&t&&(r=!0)}!1===r&&x(l,e,t,i),b(l,l.mapping.slice(i).map(t,1),n,void 0,null===r);let s=l.mapping.slice(i),a=s.map(t,1),c=s.map(t+e.nodeSize,1);return l.step(new g(a,c,a+1,c-1,new o.p2(o.HY.from(n.create(d,null,e.marks)),0,0),1,!0)),!0===r&&S(l,e,t,i),!1}}),this}setNodeMarkup(e,t,n=null,r){return!function(e,t,n,r,l){let i=e.doc.nodeAt(t);if(!i)throw RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,l||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw RangeError("Invalid content for node type "+n.name);e.step(new g(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new o.p2(o.HY.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new L(e,t,n)),this}setDocAttribute(e,t){return this.step(new F(e,t)),this}addNodeMark(e,t){return this.step(new p(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(t instanceof o.vc)t.isInSet(n.marks)&&this.step(new f(e,t));else{let o=n.marks,r,l=[];for(;r=t.isInSet(o);)l.push(new f(e,r)),o=r.removeFromSet(o);for(let e=l.length-1;e>=0;e--)this.step(l[e])}return this}split(e,t=1,n){return!function(e,t,n=1,r){let l=e.doc.resolve(t),i=o.HY.empty,s=o.HY.empty;for(let e=l.depth,t=l.depth-n,a=n-1;e>t;e--,a--){i=o.HY.from(l.node(e).copy(i));let t=r&&r[a];s=o.HY.from(t?t.type.create(t.attrs,s):l.node(e).copy(s))}e.step(new m(t,t,new o.p2(i.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){var o;let r,l,i,s;return o=this,i=[],s=[],o.doc.nodesBetween(e,t,(o,a,c)=>{if(!o.isInline)return;let h=o.marks;if(!n.isInSet(h)&&c.type.allowsMarkType(n.type)){let c=Math.max(a,e),p=Math.min(a+o.nodeSize,t),f=n.addToSet(h);for(let e=0;e<h.length;e++)h[e].isInSet(f)||(r&&r.to==c&&r.mark.eq(h[e])?r.to=p:i.push(r=new d(c,p,h[e])));l&&l.to==c?l.to=p:s.push(l=new u(c,p,n))}}),i.forEach(e=>o.step(e)),s.forEach(e=>o.step(e)),this}removeMark(e,t,n){var r;let l,i;return r=this,l=[],i=0,r.doc.nodesBetween(e,t,(r,s)=>{if(!r.isInline)return;i++;let a=null;if(n instanceof o.ZU){let e=r.marks,t;for(;t=n.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length){let n=Math.min(s+r.nodeSize,t);for(let t=0;t<a.length;t++){let o=a[t],r;for(let e=0;e<l.length;e++){let t=l[e];t.step==i-1&&o.eq(l[e].style)&&(r=t)}r?(r.to=n,r.step=i):l.push({style:o,from:Math.max(s,e),to:n,step:i})}}}),l.forEach(e=>r.step(new d(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return b(this,e,t,n),this}}},619431:function(e,t,n){"use strict";n.d(t,{EH:()=>tw,p:()=>tg,tk:()=>tq});var o=n(377549),r=n(776126),l=n(539545);let i=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},s=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},a=null,c=function(e,t,n){let o=a||(a=document.createRange());return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},h=function(){a=null},u=function(e,t,n,o){return n&&(p(e,t,n,o,-1)||p(e,t,n,o,1))},d=/^(img|br|input|textarea|hr)$/i;function p(e,t,n,o,r){for(var l;;){if(e==n&&t==o)return!0;if(t==(r<0?0:f(e))){let n=e.parentNode;if(!n||1!=n.nodeType||m(e)||d.test(e.nodeName)||"false"==e.contentEditable)return!1;t=i(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType)return!1;let n=e.childNodes[t+(r<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable)if(null==(l=n.pmViewDesc)||!l.ignoreForSelection)return!1;else t+=r;else e=n,t=r<0?f(e):0}}}function f(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function m(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let g=function(e){return e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function y(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}let b="undefined"!=typeof navigator?navigator:null,w="undefined"!=typeof document?document:null,v=b&&b.userAgent||"",k=/Edge\/(\d+)/.exec(v),S=/MSIE \d/.exec(v),x=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(v),C=!!(S||x||k),M=S?document.documentMode:x?+x[1]:k?+k[1]:0,O=!C&&/gecko\/(\d+)/i.test(v);O&&(/Firefox\/(\d+)/.exec(v)||[0,0])[1];let T=!C&&/Chrome\/(\d+)/.exec(v),D=!!T,N=T?+T[1]:0,A=!C&&!!b&&/Apple Computer/.test(b.vendor),E=A&&(/Mobile\/\w+/.test(v)||!!b&&b.maxTouchPoints>2),R=E||!!b&&/Mac/.test(b.platform),P=!!b&&/Win/.test(b.platform),z=/Android \d/.test(v),I=!!w&&"webkitFontSmoothing"in w.documentElement.style,B=I?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function L(e,t){return"number"==typeof e?e:e[t]}function F(e,t,n){let o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,l=e.dom.ownerDocument;for(let i=n||e.dom;i;){if(1!=i.nodeType){i=s(i);continue}let e=i,n=e==l.body,a=n?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(l):function(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*o}}(e),c=0,h=0;if(t.top<a.top+L(o,"top")?h=-(a.top-t.top+L(r,"top")):t.bottom>a.bottom-L(o,"bottom")&&(h=t.bottom-t.top>a.bottom-a.top?t.top+L(r,"top")-a.top:t.bottom-a.bottom+L(r,"bottom")),t.left<a.left+L(o,"left")?c=-(a.left-t.left+L(r,"left")):t.right>a.right-L(o,"right")&&(c=t.right-a.right+L(r,"right")),c||h)if(n)l.defaultView.scrollBy(c,h);else{let n=e.scrollLeft,o=e.scrollTop;h&&(e.scrollTop+=h),c&&(e.scrollLeft+=c);let r=e.scrollLeft-n,l=e.scrollTop-o;t={left:t.left-r,top:t.top-l,right:t.right-r,bottom:t.bottom-l}}let u=n?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(u))break;i="absolute"==u?i.offsetParent:s(i)}}function $(e){let t=[],n=e.ownerDocument;for(let o=e;o&&(t.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),e!=n);o=s(o));return t}function V(e,t){for(let n=0;n<e.length;n++){let{dom:o,top:r,left:l}=e[n];o.scrollTop!=r+t&&(o.scrollTop=r+t),o.scrollLeft!=l&&(o.scrollLeft=l)}}let H=null;function q(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function W(e){return e.top<e.bottom||e.left<e.right}function _(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(W(e))return e}return Array.prototype.find.call(n,W)||e.getBoundingClientRect()}let Y=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function J(e,t,n){let{node:o,offset:r,atom:l}=e.docView.domFromPos(t,n<0?-1:1),i=I||O;if(3==o.nodeType)if(i&&(Y.test(o.nodeValue)||(n<0?!r:r==o.nodeValue.length))){let e=_(c(o,r,r),n);if(O&&r&&/\s/.test(o.nodeValue[r-1])&&r<o.nodeValue.length){let t=_(c(o,r-1,r-1),-1);if(t.top==e.top){let n=_(c(o,r,r+1),-1);if(n.top!=e.top)return U(n,n.left<t.left)}}return e}else{let e=r,t=r,l=n<0?1:-1;return n<0&&!r?(t++,l=-1):n>=0&&r==o.nodeValue.length?(e--,l=1):n<0?e--:t++,U(_(c(o,e,t),l),l<0)}if(!e.state.doc.resolve(t-(l||0)).parent.inlineContent){if(null==l&&r&&(n<0||r==f(o))){let e=o.childNodes[r-1];if(1==e.nodeType)return j(e.getBoundingClientRect(),!1)}if(null==l&&r<f(o)){let e=o.childNodes[r];if(1==e.nodeType)return j(e.getBoundingClientRect(),!0)}return j(o.getBoundingClientRect(),n>=0)}if(null==l&&r&&(n<0||r==f(o))){let e=o.childNodes[r-1],t=3==e.nodeType?c(e,f(e)-!i):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return U(_(t,1),!1)}if(null==l&&r<f(o)){let e=o.childNodes[r];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,+!i):1==e.nodeType?e:null:null;if(t)return U(_(t,-1),!0)}return U(_(3==o.nodeType?c(o):o,-n),n>=0)}function U(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function j(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function K(e,t,n){let o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}let X=/[\u0590-\u08ac]/,G=null,Z=null,Q=!1;class ee{constructor(e,t,n,o){this.parent=e,this.children=t,this.dom=n,this.contentDOM=o,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let o=this.children[t];if(o==e)return n;n+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let o;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(n<0){let n,o;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((o=n.pmViewDesc)&&o.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(o)+o.size:this.posAtStart}else{let n,o;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((o=n.pmViewDesc)&&o.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(o):this.posAtEnd}if(e==this.dom&&this.contentDOM)o=t>i(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!1;break}if(t.previousSibling)break}if(null==o&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){o=!0;break}if(t.nextSibling)break}}return(null==o?n>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,o=e;o;o=o.parentNode){let r=this.getDesc(o),l;if(r&&(!t||r.node))if(!n||!(l=r.nodeDOM)||(1==l.nodeType?l.contains(1==e.nodeType?e:e.parentNode):l==e))return r;else n=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let o=e;o;o=o.parentNode){let r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)for(let e=0;e<o.children.length;e++){let t=o.children[e];if(t.size){o=t;break}}return o}if(e<r)return o.descAt(e-n-o.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,o=0;for(let t=0;n<this.children.length;n++){let r=this.children[n],l=t+r.size;if(l>e||r instanceof es){o=e-t;break}t=l}if(o)return this.children[n].domFromPos(o-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof et&&e.side>=0;n--);if(t<=0){let e,o=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,o=!1);return e&&t&&o&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?i(e.dom)+1:0}}{let e,o=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,o=!1);return e&&o&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?i(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,r=-1;for(let l=n,s=0;;s++){let n=this.children[s],a=l+n.size;if(-1==o&&e<=a){let r=l+n.border;if(e>=r&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,r);e=l;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){o=i(n.dom)+1;break}e-=n.size}-1==o&&(o=0)}if(o>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=i(n.dom);break}t+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}l=a}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,o=!1){let r=Math.min(e,t),l=Math.max(e,t);for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],c=s+a.size;if(r>s&&l<c)return a.setSelection(e-s-a.border,t-s-a.border,n,o);s=c}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),d=!1;if((O||A)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if((d=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:i(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];d=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(O&&h.focusNode&&h.focusNode!=a.node&&1==h.focusNode.nodeType){let e=h.focusNode.childNodes[h.focusOffset];e&&"false"==e.contentEditable&&(o=!0)}if(!(o||d&&A)&&u(s.node,s.offset,h.anchorNode,h.anchorOffset)&&u(a.node,a.offset,h.focusNode,h.focusOffset))return;let p=!1;if((c.extend||e==t)&&!d){c.collapse(s.node,s.offset);try{e!=t&&c.extend(a.node,a.offset),p=!0}catch(e){}}if(!p){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,o=0;o<this.children.length;o++){let r=this.children[o],l=n+r.size;if(n==l?e<=l&&t>=n:e<l&&t>n){let o=n+r.border,i=l-r.border;if(e>=o&&t<=i){this.dirty=e==n||t==l?2:1,e==o&&t==i&&(r.contentLost||r.dom.parentNode!=this.contentDOM)?r.dirty=3:r.markDirty(e-o,t-o);return}r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=l}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class et extends ee{constructor(e,t,n,o){let r,l=t.type.toDOM;if("function"==typeof l&&(l=l(n,()=>r?r.parent?r.parent.posBeforeChild(r):void 0:o)),!t.type.spec.raw){if(1!=l.nodeType){let e=document.createElement("span");e.appendChild(l),l=e}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class en extends ee{constructor(e,t,n,o){super(e,[],t,null),this.textDOM=n,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class eo extends ee{constructor(e,t,n,o,r){super(e,[],n,o),this.mark=t,this.spec=r}static create(e,t,n,o){let l=o.nodeViews[t.type.name],i=l&&l(t,o,n);return i&&i.dom||(i=r.PW.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new eo(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let o=eo.create(this.parent,this.mark,!0,n),r=this.children,l=this.size;t<l&&(r=eb(r,t,l,n)),e>0&&(r=eb(r,0,e,n));for(let e=0;e<r.length;e++)r[e].parent=o;return o.children=r,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class er extends ee{constructor(e,t,n,o,r,l,i,s,a){super(e,[],r,l),this.node=t,this.outerDeco=n,this.innerDeco=o,this.nodeDOM=i}static create(e,t,n,o,l,i){let s=l.nodeViews[t.type.name],a,c=s&&s(t,l,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:i,n,o),h=c&&c.dom,u=c&&c.contentDOM;if(t.isText)if(h){if(3!=h.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(t.text);else if(!h){let e=r.PW.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:h,contentDOM:u}=e)}u||t.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let d=h;return(h=ep(h,n,t),c)?a=new ea(e,t,n,o,h,u||null,d,c,l,i+1):t.isText?new ei(e,t,n,o,h,d,l):new er(e,t,n,o,h,u||null,d,l,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>r.HY.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ef(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let n=this.node.inlineContent,o=t,l=e.composing?this.localCompositionInfo(e,t):null,i=l&&l.pos>-1?l:null,s=l&&l.pos<0,a=new eg(this,i&&i.node,e);(function(e,t,n,o){let r=t.locals(e),l=0;if(0==r.length){for(let n=0;n<e.childCount;n++){let i=e.child(n);o(i,r,t.forChild(l,i),n),l+=i.nodeSize}return}let i=0,s=[],a=null;for(let c=0;;){let h,u,d,p;for(;i<r.length&&r[i].to==l;){let e=r[i++];e.widget&&(h?(u||(u=[h])).push(e):h=e)}if(h)if(u){u.sort(ey);for(let e=0;e<u.length;e++)n(u[e],c,!!a)}else n(h,c,!!a);if(a)p=-1,d=a,a=null;else if(c<e.childCount)p=c,d=e.child(c++);else break;for(let e=0;e<s.length;e++)s[e].to<=l&&s.splice(e--,1);for(;i<r.length&&r[i].from<=l&&r[i].to>l;)s.push(r[i++]);let f=l+d.nodeSize;if(d.isText){let e=f;i<r.length&&r[i].from<e&&(e=r[i].from);for(let t=0;t<s.length;t++)s[t].to<e&&(e=s[t].to);e<f&&(a=d.cut(e-l),d=d.cut(0,e-l),f=e,p=-1)}else for(;i<r.length&&r[i].to<f;)i++;let m=d.isInline&&!d.isLeaf?s.filter(e=>!e.inline):s.slice();o(d,m,t.forChild(l,d),p),l=f}})(this.node,this.innerDeco,(t,l,i)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&a.syncToMarks(l==this.node.childCount?r.vc.none:this.node.child(l).marks,n,e),a.placeWidget(t,e,o)},(t,r,i,c)=>{let h;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,r,i,c)||s&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(h=a.findIndexWithChild(l.node))>-1&&a.updateNodeAt(t,r,i,h,e)||a.updateNextNode(t,r,i,e,c,o)||a.addNode(t,r,i,e,o),o+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,n,o){let r=t.firstChild,l=!1;for(let i=0;i<n.length;i++){let s=n[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=em(r),l=!0;r=r.nextSibling}else l=!0,t.insertBefore(a,r);if(s instanceof eo){let n=r?r.previousSibling:t.lastChild;e(s.contentDOM,s.children,o),r=n?n.nextSibling:t.firstChild}}for(;r;)r=em(r),l=!0;l&&o.trackWrites==t&&(o.trackWrites=null)}(this.contentDOM,this.children,e),E&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof o.Bs)||n<t||r>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(!this.node.inlineContent)return{node:l,pos:-1,text:""};{let e=l.nodeValue,o=function(e,t,n,o){for(let r=0,l=0;r<e.childCount&&l<=o;){let i=e.child(r++),s=l;if(l+=i.nodeSize,!i.isText)continue;let a=i.text;for(;r<e.childCount;){let t=e.child(r++);if(l+=t.nodeSize,!t.isText)break;a+=t.text}if(l>=n){if(l>=o&&a.slice(o-t.length-s,o-s)==t)return o-t.length;let e=s<o?a.lastIndexOf(t,o-s-1):-1;if(e>=0&&e+t.length+s>=n)return s+e;if(n==o&&a.length>=o+t.length-s&&a.slice(o-s,o-s+t.length)==t)return o}}return -1}(this.node.content,e,n-t,r-t);return o<0?null:{node:l,pos:o,text:e}}}protectLocalComposition(e,{node:t,pos:n,text:o}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let l=new en(this,r,t,o);e.input.compositionNodes.push(l),this.children=eb(this.children,n,n+o.length,e,l)}update(e,t,n,o){return 3!=this.dirty&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,n,o),!0)}updateInner(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(ef(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ed(this.dom,this.nodeDOM,eu(this.outerDeco,this.node,t),eu(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function el(e,t,n,o,r){ep(o,t,e);let l=new er(void 0,e,t,n,o,o,o,r,0);return l.contentDOM&&l.updateChildren(r,0),l}class ei extends er{constructor(e,t,n,o,r,l,i){super(e,t,n,o,r,null,l,i,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,o){return 3!=this.dirty&&(0==this.dirty||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let o=this.node.cut(e,t),r=document.createTextNode(o.text);return new ei(this.parent,o,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class es extends ee{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class ea extends er{constructor(e,t,n,o,r,l,i,s,a,c){super(e,t,n,o,r,l,i,a,c),this.spec=s}update(e,t,n,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,o),r}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,o){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let ec=function(e){e&&(this.nodeName=e)};ec.prototype=Object.create(null);let eh=[new ec];function eu(e,t,n){if(0==e.length)return eh;let o=n?eh[0]:new ec,r=[o];for(let l=0;l<e.length;l++){let i=e[l].type.attrs;if(i)for(let e in i.nodeName&&r.push(o=new ec(i.nodeName)),i){let l=i[e];null!=l&&(n&&1==r.length&&r.push(o=new ec(t.isInline?"span":"div")),"class"==e?o.class=(o.class?o.class+" ":"")+l:"style"==e?o.style=(o.style?o.style+";":"")+l:"nodeName"!=e&&(o[e]=l))}}return r}function ed(e,t,n,o){if(n==eh&&o==eh)return t;let r=t;for(let t=0;t<o.length;t++){let l=o[t],i=n[t];if(t){let t;i&&i.nodeName==l.nodeName&&r!=e&&(t=r.parentNode)&&t.nodeName.toLowerCase()==l.nodeName||((t=document.createElement(l.nodeName)).pmIsDeco=!0,t.appendChild(r),i=eh[0]),r=t}!function(e,t,n){for(let o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(let o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){let o=t.class?t.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.remove(o[t]);for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.add(r[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=n.exec(t.style);)e.style.removeProperty(o[1])}n.style&&(e.style.cssText+=n.style)}}(r,i||eh[0],l)}return r}function ep(e,t,n){return ed(e,e,eh,eu(t,n,1!=e.nodeType))}function ef(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function em(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class eg{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,o=n.children.length,r=e.childCount,l=new Map,i=[];t:for(;r>0;){let s;for(;;)if(o){let e=n.children[o-1];if(e instanceof eo)n=e,o=e.children.length;else{s=e,o--;break}}else if(n==t)break t;else o=n.parent.children.indexOf(n),n=n.parent;let a=s.node;if(a){if(a!=e.child(r-1))break;--r,l.set(s,r),i.push(s)}}return{index:r,matched:l,matches:i.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let o=0,r=this.stack.length>>1,l=Math.min(r,e.length);for(;o<l&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[r])&&!this.isLocked(n.dom)){o=t;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let o=eo.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,o),this.top=o,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,o){let r=-1,l;if(o>=this.preMatch.index&&(l=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,n))r=this.top.children.indexOf(l,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let l=this.top.children[o];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){r=o;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(e,t,n,o,r){let l=this.top.children[o];return 3==l.dirty&&l.dom==l.contentDOM&&(l.dirty=2),!!l.update(e,t,n,r)&&(this.destroyBetween(this.index,o),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,o,r,l){for(let i=this.index;i<this.top.children.length;i++){let s=this.top.children[i];if(s instanceof er){let a=this.preMatch.matched.get(s);if(null!=a&&a!=r)return!1;let c=s.dom,h,u=this.isLocked(c)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&ef(t,s.outerDeco));if(!u&&s.update(e,t,n,o))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(h=this.recreateWrapper(s,e,t,n,o,l)))return this.destroyBetween(this.index,i),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=2,h.updateChildren(o,l+1),h.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,o,r,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ef(n,e.outerDeco)||!o.eq(e.innerDeco))return null;let i=er.create(this.top,t,n,o,r,l);if(i.contentDOM)for(let t of(i.children=e.children,e.children=[],i.children))t.parent=i;return e.destroy(),i}addNode(e,t,n,o,r){let l=er.create(this.top,e,t,n,o,r);l.contentDOM&&l.updateChildren(o,r+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,n){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let o=new et(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof eo;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof ei)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((A||D)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let o=new es(this.top,[],n,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function ey(e,t){return e.type.side-t.type.side}function eb(e,t,n,o,r){let l=[];for(let i=0,s=0;i<e.length;i++){let a=e[i],c=s,h=s+=a.size;c>=n||h<=t?l.push(a):(c<t&&l.push(a.slice(0,t-c,o)),r&&(l.push(r),r=void 0),h>n&&l.push(a.slice(n-c,a.size,o)))}return l}function ew(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let l=e.docView.nearestDesc(n.focusNode),s=l&&0==l.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let c=r.resolve(a),h,u;if(g(n)){for(h=a;l&&!l.node;)l=l.parent;let e=l.node;if(l&&e.isAtom&&o.qv.isSelectable(e)&&l.parent&&!(e.isInline&&function(e,t,n){for(let o=0==t,r=t==f(e);o||r;){if(e==n)return!0;let t=i(e);if(!(e=e.parentNode))return!1;o=o&&0==t,r=r&&t==f(e)}}(n.focusNode,n.focusOffset,l.dom))){let e=l.posBefore;u=new o.qv(a==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=a,o=a;for(let r=0;r<n.rangeCount;r++){let l=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(l.startContainer,l.startOffset,1)),o=Math.max(o,e.docView.posFromDOM(l.endContainer,l.endOffset,-1))}if(t<0)return null;[h,a]=o==e.state.selection.anchor?[o,t]:[t,o],c=r.resolve(a)}else h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(h<0)return null}let d=r.resolve(h);if(!u){let n="pointer"==t||e.state.selection.head<c.pos&&!s?1:-1;u=eD(e,d,c,n)}return u}function ev(e){return e.editable?e.hasFocus():eA(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ek(e,t=!1){let n=e.state.selection;if(eO(e,n),ev(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&D){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&u(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setStart(o.parentNode,i(o)+1):n.setStart(o,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&C&&M<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{var r;let l,i,s,a,{anchor:c,head:h}=n,u,d;eS&&!(n instanceof o.Bs)&&(n.$from.parent.inlineContent||(u=ex(e,n.from)),n.empty||n.$from.parent.inlineContent||(d=ex(e,n.to))),e.docView.setSelection(c,h,e,t),eS&&(u&&eM(u),d&&eM(d)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((l=(r=e).dom.ownerDocument).removeEventListener("selectionchange",r.input.hideSelectionGuard),s=(i=r.domSelectionRange()).anchorNode,a=i.anchorOffset,l.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(i.anchorNode!=s||i.anchorOffset!=a)&&(l.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!ev(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let eS=A||D&&N<63;function ex(e,t){let{node:n,offset:o}=e.docView.domFromPos(t,0),r=o<n.childNodes.length?n.childNodes[o]:null,l=o?n.childNodes[o-1]:null;if(A&&r&&"false"==r.contentEditable)return eC(r);if((!r||"false"==r.contentEditable)&&(!l||"false"==l.contentEditable)){if(r)return eC(r);else if(l)return eC(l)}}function eC(e){return e.contentEditable="true",A&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function eM(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function eO(e,t){if(t instanceof o.qv){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(eT(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else eT(e)}function eT(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function eD(e,t,n,r){return e.someProp("createSelectionBetween",o=>o(e,t,n))||o.Bs.between(t,n,r)}function eN(e){return(!e.editable||!!e.hasFocus())&&eA(e)}function eA(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function eE(e,t){let{$anchor:n,$head:r}=e.selection,l=t>0?n.max(r):n.min(r),i=l.parent.inlineContent?l.depth?e.doc.resolve(t>0?l.after():l.before()):null:l;return i&&o.Y1.findFrom(i,t)}function eR(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function eP(e,t,n){let r=e.state.selection;if(r instanceof o.Bs){if(n.indexOf("s")>-1){let{$head:n}=r,l=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+l.nodeSize*(t<0?-1:1));return eR(e,new o.Bs(r.$anchor,i))}else if(!r.empty)return!1;else if(e.endOfTextblock(t>0?"forward":"backward")){let n=eE(e.state,t);return!!n&&n instanceof o.qv&&eR(e,n)}else if(!(R&&n.indexOf("m")>-1)){let n=r.$head,l=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,i;if(!l||l.isText)return!1;let s=t<0?n.pos-l.nodeSize:n.pos;return!!(l.isAtom||(i=e.docView.descAt(s))&&!i.contentDOM)&&(o.qv.isSelectable(l)?eR(e,new o.qv(t<0?e.state.doc.resolve(n.pos-l.nodeSize):n)):!!I&&eR(e,new o.Bs(e.state.doc.resolve(t<0?s:s+l.nodeSize))))}}else{if(r instanceof o.qv&&r.node.isInline)return eR(e,new o.Bs(t>0?r.$to:r.$from));let n=eE(e.state,t);return!!n&&eR(e,n)}}function ez(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function eI(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function eB(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,o=t.focusOffset;if(!n)return;let r,l,s=!1;for(O&&1==n.nodeType&&o<ez(n)&&eI(n.childNodes[o],-1)&&(s=!0);;)if(o>0)if(1!=n.nodeType)break;else{let e=n.childNodes[o-1];if(eI(e,-1))r=n,l=--o;else if(3==e.nodeType)o=(n=e).nodeValue.length;else break}else if(eL(n))break;else{let t=n.previousSibling;for(;t&&eI(t,-1);)r=n.parentNode,l=i(t),t=t.previousSibling;if(t)o=ez(n=t);else{if((n=n.parentNode)==e.dom)break;o=0}}s?eF(e,n,o):r&&eF(e,r,l)}(e):function(e){let t,n,o=e.domSelectionRange(),r=o.focusNode,l=o.focusOffset;if(!r)return;let s=ez(r);for(;;)if(l<s){if(1!=r.nodeType)break;if(eI(r.childNodes[l],1))t=r,n=++l;else break}else if(eL(r))break;else{let o=r.nextSibling;for(;o&&eI(o,1);)t=o.parentNode,n=i(o)+1,o=o.nextSibling;if(o)l=0,s=ez(r=o);else{if((r=r.parentNode)==e.dom)break;l=s=0}}t&&eF(e,t,n)}(e)}function eL(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function eF(e,t,n){if(3!=t.nodeType){let e,o;(o=function(e,t){for(;e&&t==e.childNodes.length&&!m(e);)t=i(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(e=function(e,t){for(;e&&!t&&!m(e);)t=i(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let o=e.domSelection();if(!o)return;if(g(o)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),o.removeAllRanges(),o.addRange(e)}else o.extend&&o.extend(t,n);e.domObserver.setCurSelection();let{state:r}=e;setTimeout(()=>{e.state==r&&ek(e)},50)}function e$(e,t){let n=e.state.doc.resolve(t);if(!(D||P)&&n.parent.inlineContent){let o=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left<o.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),r=(n.top+n.bottom)/2;if(r>o.top&&r<o.bottom&&Math.abs(n.left-o.left)>1)return n.left>o.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function eV(e,t,n){let r=e.state.selection;if(r instanceof o.Bs&&!r.empty||n.indexOf("s")>-1||R&&n.indexOf("m")>-1)return!1;let{$from:l,$to:i}=r;if(!l.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=eE(e.state,t);if(n&&n instanceof o.qv)return eR(e,n)}if(!l.parent.inlineContent){let n=t<0?l:i,s=r instanceof o.C1?o.Y1.near(n,t):o.Y1.findFrom(n,t);return!!s&&eR(e,s)}return!1}function eH(e,t){if(!(e.state.selection instanceof o.Bs))return!0;let{$head:n,$anchor:r,empty:l}=e.state.selection;if(!n.sameParent(r))return!0;if(!l)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=e.state.tr;return t<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),e.dispatch(o),!0}return!1}function eq(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function eW(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:o,openStart:l,openEnd:i}=t;for(;l>1&&i>1&&1==o.childCount&&1==o.firstChild.childCount;){l--,i--;let e=o.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),o=e.content}let s=e.someProp("clipboardSerializer")||r.PW.fromSchema(e.state.schema),a=eG(),c=a.createElement("div");c.appendChild(s.serializeFragment(o,{document:a}));let h=c.firstChild,u,d=0;for(;h&&1==h.nodeType&&(u=eK[h.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;c.firstChild;)t.appendChild(c.firstChild);c.appendChild(t),d++}h=c.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${l} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function e_(e,t,n,o,l){let i,s,a=l.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(o||a||!n);if(c){if(e.someProp("transformPastedText",n=>{t=n(t,a||o,e)}),a)return t?new r.p2(r.HY.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):r.p2.empty;let n=e.someProp("clipboardTextParser",n=>n(t,l,o,e));if(n)s=n;else{let n=l.marks(),{schema:o}=e.state,s=r.PW.fromSchema(o);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(o.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),i=function(e){var t;let n,o=/^(\s*<meta [^>]*>)*/.exec(e);o&&(e=e.slice(o[0].length));let r=eG().createElement("div"),l=/<([a-z][^>\s]+)/i.exec(e),i;if((i=l&&eK[l[1].toLowerCase()])&&(e=i.map(e=>"<"+e+">").join("")+e+i.map(e=>"</"+e+">").reverse().join("")),r.innerHTML=(t=e,(n=window.trustedTypes)?(eZ||(eZ=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),eZ.createHTML(t)):t),i)for(let e=0;e<i.length;e++)r=r.querySelector(i[e])||r;return r}(n),I&&function(e){let t=e.querySelectorAll(D?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let o=t[n];1==o.childNodes.length&&"\xa0"==o.textContent&&o.parentNode&&o.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),o)}}(i);let h=i&&i.querySelector("[data-pm-slice]"),u=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(s||(s=(e.someProp("clipboardParser")||e.someProp("domParser")||r.aw.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!!(c||u),context:l,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||eY.test(e.parentNode.nodeName)?null:{ignore:!0}})),u)s=function(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,o;try{o=JSON.parse(t)}catch(t){return e}let{content:l,openStart:i,openEnd:s}=e;for(let e=o.length-2;e>=0;e-=2){let t=n.nodes[o[e]];if(!t||t.hasRequiredAttrs())break;l=r.HY.from(t.create(o[e+1],l)),i++,s++}return new r.p2(l,i,s)}(ej(s,+u[1],+u[2]),u[4]);else if((s=r.p2.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let o=t.node(n).contentMatchAt(t.index(n)),l,i=[];if(e.forEach(e=>{if(!i)return;let t=o.findWrapping(e.type),n;if(!t)return i=null;if(n=i.length&&l.length&&function e(t,n,o,l,i){if(i<t.length&&i<n.length&&t[i]==n[i]){let s=e(t,n,o,l.lastChild,i+1);if(s)return l.copy(l.content.replaceChild(l.childCount-1,s));if(l.contentMatchAt(l.childCount).matchType(i==t.length-1?o.type:t[i+1]))return l.copy(l.content.append(r.HY.from(eJ(o,t,i+1))))}}(t,l,e,i[i.length-1],0))i[i.length-1]=n;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;let o=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),l=t.contentMatchAt(t.childCount).fillBefore(r.HY.empty,!0);return t.copy(o.append(l))}(i[i.length-1],l.length));let n=eJ(e,t);i.push(n),o=o.matchType(n.type),l=t}}),i)return r.HY.from(i)}return e}(s.content,l),!0)).openStart||s.openEnd){let e=0,t=0;for(let t=s.content.firstChild;e<s.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=s.content.lastChild;t<s.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);s=ej(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e)}),s}let eY=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function eJ(e,t,n=0){for(let o=t.length-1;o>=n;o--)e=t[o].create(null,r.HY.from(e));return e}function eU(e,t,n,o,l,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),l<o-1&&(a=eU(a,t,n,o,l+1,i)),l>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=l).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(r.HY.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function ej(e,t,n){return t<e.openStart&&(e=new r.p2(eU(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new r.p2(eU(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let eK={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},eX=null;function eG(){return eX||(eX=document.implementation.createHTMLDocument("title"))}let eZ=null,eQ={},e0={},e1={touchstart:!0,touchmove:!0};class e2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function e3(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function e5(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>e6(e,t))})}function e6(e,t){return e.someProp("handleDOMEvents",n=>{let o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)})}function e7(e){return{left:e.clientX,top:e.clientY}}function e4(e,t,n,o,r){if(-1==o)return!1;let l=e.state.doc.resolve(o);for(let o=l.depth+1;o>0;o--)if(e.someProp(t,t=>o>l.depth?t(e,n,l.nodeAfter,l.before(o),r,!0):t(e,n,l.node(o),l.before(o),r,!1)))return!0;return!1}function e9(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}e0.keydown=(e,t)=>{if((e.input.shiftKey=16==t.keyCode||t.shiftKey,!tt(e,t))&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!z||!D||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!E||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",n=>n(e,t))||function(e,t){let n,o=t.keyCode,r=(n="",t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n);if(8==o||R&&72==o&&"c"==r)return eH(e,-1)||eB(e,-1);if(46==o&&!t.shiftKey||R&&68==o&&"c"==r)return eH(e,1)||eB(e,1);if(13==o||27==o)return!0;if(37==o||R&&66==o&&"c"==r){let t=37==o?"ltr"==e$(e,e.state.selection.from)?-1:1:-1;return eP(e,t,r)||eB(e,t)}if(39==o||R&&70==o&&"c"==r){let t=39==o?"ltr"==e$(e,e.state.selection.from)?1:-1:1;return eP(e,t,r)||eB(e,t)}else if(38==o||R&&80==o&&"c"==r)return eV(e,-1,r)||eB(e,-1);else if(40==o||R&&78==o&&"c"==r)return function(e){if(!A||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;eq(e,n,"true"),setTimeout(()=>eq(e,n,"false"),20)}return!1}(e)||eV(e,1,r)||eB(e,1);else if(r==(R?"m":"c")&&(66==o||73==o||89==o||90==o))return!0;return!1}(e,t)?t.preventDefault():e3(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,y(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},e0.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},e0.keypress=(e,t)=>{if(tt(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||R&&t.metaKey)return;if(e.someProp("handleKeyPress",n=>n(e,t)))return void t.preventDefault();let n=e.state.selection;if(!(n instanceof o.Bs)||!n.$from.sameParent(n.$to)){let o=String.fromCharCode(t.charCode),r=()=>e.state.tr.insertText(o).scrollIntoView();/[\r\n]/.test(o)||e.someProp("handleTextInput",t=>t(e,n.$from.pos,n.$to.pos,o,r))||e.dispatch(r()),t.preventDefault()}};let e8=R?"metaKey":"ctrlKey";eQ.mousedown=(e,t)=>{var n;let r,l;e.input.shiftKey=t.shiftKey;let i=tl(e),s=Date.now(),a="singleClick";s-e.input.lastClick.time<500&&(r=(n=e.input.lastClick).x-t.clientX)*r+(l=n.y-t.clientY)*l<100&&!t[e8]&&e.input.lastClick.button==t.button&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:a,button:t.button};let c=e.posAtCoords(e7(t));c&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new te(e,c,t,!!i)):("doubleClick"==a?function(e,t,n,o){return e4(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",n=>n(e,t,o))}:function(e,t,n,r){return e4(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(e9(e,o.Bs.create(r,0,r.content.size),"pointer"),!0);let l=r.resolve(t);for(let t=l.depth+1;t>0;t--){let n=t>l.depth?l.nodeAfter:l.node(t),i=l.before(t);if(n.inlineContent)e9(e,o.Bs.create(r,i+1,i+1+n.content.size),"pointer");else{if(!o.qv.isSelectable(n))continue;e9(e,o.qv.create(r,i),"pointer")}return!0}}(e,n,r)})(e,c.pos,c.inside,t)?t.preventDefault():e3(e,"pointer"))};class te{constructor(e,t,n,r){let l,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[e8],this.allowDefault=n.shiftKey,t.inside>-1)l=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);l=n.parent,i=n.depth?n.before():0}let s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:c}=e.state;(0==n.button&&l.type.spec.draggable&&!1!==l.type.spec.selectable||c instanceof o.qv&&c.from<=i&&c.to>i)&&(this.mightDrag={node:l,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&O&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e3(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ek(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;if(this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(e7(e))),this.updateAllowDefault(e),this.allowDefault||!t)e3(this.view,"pointer");else{var n,r,l,i;(n=this.view,r=t.pos,l=t.inside,i=this.selectNode,e4(n,"handleClickOn",r,l,e)||n.someProp("handleClick",t=>t(n,r,e))||(i?function(e,t){if(-1==t)return!1;let n=e.state.selection,r,l;n instanceof o.qv&&(r=n.node);let i=e.state.doc.resolve(t);for(let e=i.depth+1;e>0;e--){let t=e>i.depth?i.nodeAfter:i.node(e);if(o.qv.isSelectable(t)){l=r&&n.$from.depth>0&&e>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?i.before(n.$from.depth):i.before(e);break}}return null!=l&&(e9(e,o.qv.create(e.state.doc,l),"pointer"),!0)}(n,l):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.qv.isSelectable(r))&&(e9(e,new o.qv(n),"pointer"),!0)}(n,l)))?e.preventDefault():0==e.button&&(this.flushed||A&&this.mightDrag&&!this.mightDrag.node.isAtom||D&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(e9(this.view,o.Y1.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):e3(this.view,"pointer")}}move(e){this.updateAllowDefault(e),e3(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function tt(e,t){return!!e.composing||!!(A&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}eQ.touchstart=e=>{e.input.lastTouch=Date.now(),tl(e),e3(e,"pointer")},eQ.touchmove=e=>{e.input.lastTouch=Date.now(),e3(e,"pointer")},eQ.contextmenu=e=>tl(e);let tn=z?5e3:-1;function to(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>tl(e),t))}function tr(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function tl(e,t=!1){if(!z||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),tr(e),t||e.docView&&e.docView.dirty){let n=ew(e),o=e.state.selection;return n&&!n.eq(o)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!o.$from.node(o.$from.sharedDepth(o.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}e0.compositionstart=e0.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof o.Bs&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),tl(e,!0),e.markCursor=null;else if(tl(e,!t.selection.empty),O&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,o=t.focusOffset;n&&1==n.nodeType&&0!=o;){let t=o<0?n.lastChild:n.childNodes[o-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,o=-1}}e.input.composing=!0}to(e,tn)},e0.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,to(e,20))};let ti=C&&M<15||E&&B<604;function ts(e,t,n,o,l){let i=e_(e,t,n,o,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,l,i||r.p2.empty)))return!0;if(!i)return!1;let s=0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,a=s?e.state.tr.replaceSelectionWith(s,o):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ta(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}eQ.copy=e0.cut=(e,t)=>{let n=e.state.selection,o="cut"==t.type;if(n.empty)return;let r=ti?null:t.clipboardData,{dom:l,text:i}=eW(e,n.content());r?(t.preventDefault(),r.clearData(),r.setData("text/html",l.innerHTML),r.setData("text/plain",i)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,l),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},e0.paste=(e,t)=>{if(e.composing&&!z)return;let n=ti?null:t.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&ts(e,ta(n),n.getData("text/html"),o,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let r=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?ts(e,o.value,null,r,t):ts(e,o.textContent,o.innerHTML,r,t)},50)}(e,t)};class tc{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let th=R?"altKey":"ctrlKey";function tu(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[th]}for(let e in eQ.dragstart=(e,t)=>{let n,r=e.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let l=e.state.selection,i=l.empty?null:e.posAtCoords(e7(t));if(i&&i.pos>=l.from&&i.pos<=(l instanceof o.qv?l.to-1:l.to));else if(r&&r.mightDrag)n=o.qv.create(e.state.doc,r.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let r=e.docView.nearestDesc(t.target,!0);r&&r.node.type.spec.draggable&&r!=e.docView&&(n=o.qv.create(e.state.doc,r.posBefore))}let s=(n||e.state.selection).content(),{dom:a,text:c,slice:h}=eW(e,s);t.dataTransfer.files.length&&D&&!(N>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(ti?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",ti||t.dataTransfer.setData("text/plain",c),e.dragging=new tc(h,tu(e,t),n)},eQ.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},e0.dragover=e0.dragenter=(e,t)=>t.preventDefault(),e0.drop=(e,t)=>{let n=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let i=e.posAtCoords(e7(t));if(!i)return;let s=e.state.doc.resolve(i.pos),a=n&&n.slice;a?e.someProp("transformPasted",t=>{a=t(a,e)}):a=e_(e,ta(t.dataTransfer),ti?null:t.dataTransfer.getData("text/html"),!1,s);let c=!!(n&&tu(e,t));if(e.someProp("handleDrop",n=>n(e,t,a||r.p2.empty,c)))return void t.preventDefault();if(!a)return;t.preventDefault();let h=a?(0,l.nj)(e.state.doc,s.pos,a):s.pos;null==h&&(h=s.pos);let u=e.state.tr;if(c){let{node:e}=n;e?e.replace(u):u.deleteSelection()}let d=u.mapping.map(h),p=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,f=u.doc;if(p?u.replaceRangeWith(d,d,a.content.firstChild):u.replaceRange(d,d,a),u.doc.eq(f))return;let m=u.doc.resolve(d);if(p&&o.qv.isSelectable(a.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(a.content.firstChild))u.setSelection(new o.qv(m));else{let t=u.mapping.map(h);u.mapping.maps[u.mapping.maps.length-1].forEach((e,n,o,r)=>t=r),u.setSelection(eD(e,m,u.doc.resolve(t)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))},eQ.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ek(e)},20))},eQ.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},eQ.beforeinput=(e,t)=>{if(D&&z&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,y(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},e0)eQ[e]=e0[e];function td(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class tp{constructor(e,t){this.toDOM=e,this.spec=t||tb,this.side=this.spec.side||0}map(e,t,n,o){let{pos:r,deleted:l}=e.mapResult(t.from+o,this.side<0?-1:1);return l?null:new tg(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof tp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&td(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class tf{constructor(e,t){this.attrs=e,this.spec=t||tb}map(e,t,n,o){let r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,l=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=l?null:new tg(r,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof tf&&td(this.attrs,e.attrs)&&td(this.spec,e.spec)}static is(e){return e.type instanceof tf}destroy(){}}class tm{constructor(e,t){this.attrs=e,this.spec=t||tb}map(e,t,n,o){let r=e.mapResult(t.from+o,1);if(r.deleted)return null;let l=e.mapResult(t.to+o,-1);return l.deleted||l.pos<=r.pos?null:new tg(r.pos-n,l.pos-n,this)}valid(e,t){let{index:n,offset:o}=e.content.findIndex(t.from),r;return o==t.from&&!(r=e.child(n)).isText&&o+r.nodeSize==t.to}eq(e){return this==e||e instanceof tm&&td(this.attrs,e.attrs)&&td(this.spec,e.spec)}destroy(){}}class tg{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new tg(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new tg(e,e,new tp(t,n))}static inline(e,t,n,o){return new tg(e,t,new tf(n,o))}static node(e,t,n,o){return new tg(e,t,new tm(n,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof tf}get widget(){return this.type instanceof tp}}let ty=[],tb={};class tw{constructor(e,t){this.local=e.length?e:ty,this.children=t.length?t:ty}static create(e,t){return t.length?tM(t,e,0,tb):tv}find(e,t,n){let o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o}findInner(e,t,n,o,r){for(let l=0;l<this.local.length;l++){let i=this.local[l];i.from<=t&&i.to>=e&&(!r||r(i.spec))&&n.push(i.copy(i.from+o,i.to+o))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let i=this.children[l]+1;this.children[l+2].findInner(e-i,t-i,n,o+i,r)}}map(e,t,n){return this==tv||0==e.maps.length?this:this.mapInner(e,t,0,0,n||tb)}mapInner(e,t,n,o,r){let l;for(let i=0;i<this.local.length;i++){let s=this.local[i].map(e,n,o);s&&s.type.valid(t,s)?(l||(l=[])).push(s):r.onRemove&&r.onRemove(this.local[i].spec)}return this.children.length?function(e,t,n,o,r,l,i){let s=e.slice();for(let e=0,t=l;e<n.maps.length;e++){let o=0;n.maps[e].forEach((e,n,r,l)=>{let i=l-r-(n-e);for(let r=0;r<s.length;r+=3){let l=s[r+1];if(l<0||e>l+t-o)continue;let a=s[r]+t-o;n>=a?s[r+1]=e<=a?-2:-1:e>=t&&i&&(s[r]+=i,s[r+1]+=i)}o+=i}),t=n.maps[e].map(t,-1)}let a=!1;for(let t=0;t<s.length;t+=3)if(s[t+1]<0){if(-2==s[t+1]){a=!0,s[t+1]=-1;continue}let c=n.map(e[t]+l),h=c-r;if(h<0||h>=o.content.size){a=!0;continue}let u=n.map(e[t+1]+l,-1)-r,{index:d,offset:p}=o.content.findIndex(h),f=o.maybeChild(d);if(f&&p==h&&p+f.nodeSize==u){let o=s[t+2].mapInner(n,f,c+1,e[t]+l+1,i);o!=tv?(s[t]=h,s[t+1]=u,s[t+2]=o):(s[t+1]=-2,a=!0)}else a=!0}if(a){let a=tM(function(e,t,n,o,r,l,i){for(let s=0;s<e.length;s+=3)-1==e[s+1]&&function e(t,l){for(let e=0;e<t.local.length;e++){let s=t.local[e].map(o,r,l);s?n.push(s):i.onRemove&&i.onRemove(t.local[e].spec)}for(let n=0;n<t.children.length;n+=3)e(t.children[n+2],t.children[n]+l+1)}(e[s+2],t[s]+l+1);return n}(s,e,t,n,r,l,i),o,0,i);t=a.local;for(let e=0;e<s.length;e+=3)s[e+1]<0&&(s.splice(e,3),e-=3);for(let e=0,t=0;e<a.children.length;e+=3){let n=a.children[e];for(;t<s.length&&s[t]<n;)t+=3;s.splice(t,0,a.children[e],a.children[e+1],a.children[e+2])}}return new tw(t.sort(tO),s)}(this.children,l||[],e,t,n,o,r):l?new tw(l.sort(tO),ty):tv}add(e,t){return t.length?this==tv?tw.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let o,r=0;e.forEach((e,l)=>{let i=l+n,s;if(s=tx(t,e,i)){for(o||(o=this.children.slice());r<o.length&&o[r]<l;)r+=3;o[r]==l?o[r+2]=o[r+2].addInner(e,s,i+1):o.splice(r,0,l,l+e.nodeSize,tM(s,e,i+1,tb)),r+=3}});let l=tS(r?tC(t):t,-n);for(let t=0;t<l.length;t++)l[t].type.valid(e,l[t])||l.splice(t--,1);return new tw(l.length?this.local.concat(l).sort(tO):this.local,o||this.children)}remove(e){return 0==e.length||this==tv?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,o=this.local;for(let o=0;o<n.length;o+=3){let r,l=n[o]+t,i=n[o+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>l&&n.to<i&&(e[t]=null,(r||(r=[])).push(n));if(!r)continue;n==this.children&&(n=this.children.slice());let s=n[o+2].removeInner(r,l+1);s!=tv?n[o+2]=s:(n.splice(o,3),o-=3)}if(o.length){for(let n=0,r;n<e.length;n++)if(r=e[n])for(let e=0;e<o.length;e++)o[e].eq(r,t)&&(o==this.local&&(o=this.local.slice()),o.splice(e--,1))}return n==this.children&&o==this.local?this:o.length||n.length?new tw(o,n):tv}forChild(e,t){let n,o;if(this==tv)return this;if(t.isLeaf)return tw.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let r=e+1,l=r+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<l&&t.to>r&&t.type instanceof tf){let e=Math.max(r,t.from)-r,n=Math.min(l,t.to)-r;e<n&&(o||(o=[])).push(t.copy(e,n))}}if(o){let e=new tw(o.sort(tO),ty);return n?new tk([e,n]):e}return n||tv}eq(e){if(this==e)return!0;if(!(e instanceof tw)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return tT(this.localsInner(e))}localsInner(e){if(this==tv)return ty;if(e.inlineContent||!this.local.some(tf.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof tf||t.push(this.local[e]);return t}forEachSet(e){e(this)}}tw.empty=new tw([],[]),tw.removeOverlap=tT;let tv=tw.empty;class tk{constructor(e){this.members=e}map(e,t){let n=this.members.map(n=>n.map(e,t,tb));return tk.from(n)}forChild(e,t){if(t.isLeaf)return tw.empty;let n=[];for(let o=0;o<this.members.length;o++){let r=this.members[o].forChild(e,t);r!=tv&&(r instanceof tk?n=n.concat(r.members):n.push(r))}return tk.from(n)}eq(e){if(!(e instanceof tk)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let o=0;o<this.members.length;o++){let r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<r.length;e++)t.push(r[e])}else t=r}return t?tT(n?t:t.sort(tO)):ty}static from(e){switch(e.length){case 0:return tv;case 1:return e[0];default:return new tk(e.every(e=>e instanceof tw)?e:e.reduce((e,t)=>e.concat(t instanceof tw?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function tS(e,t){if(!t||!e.length)return e;let n=[];for(let o=0;o<e.length;o++){let r=e[o];n.push(new tg(r.from+t,r.to+t,r.type))}return n}function tx(e,t,n){if(t.isLeaf)return null;let o=n+t.nodeSize,r=null;for(let t=0,l;t<e.length;t++)(l=e[t])&&l.from>n&&l.to<o&&((r||(r=[])).push(l),e[t]=null);return r}function tC(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function tM(e,t,n,o){let r=[],l=!1;t.forEach((t,i)=>{let s=tx(e,t,i+n);if(s){l=!0;let e=tM(s,t,n+i+1,o);e!=tv&&r.push(i,i+t.nodeSize,e)}});let i=tS(l?tC(e):e,-n).sort(tO);for(let e=0;e<i.length;e++)i[e].type.valid(t,i[e])||(o.onRemove&&o.onRemove(i[e].spec),i.splice(e--,1));return i.length||r.length?new tw(i,r):tv}function tO(e,t){return e.from-t.from||e.to-t.to}function tT(e){let t=e;for(let n=0;n<t.length-1;n++){let o=t[n];if(o.from!=o.to)for(let r=n+1;r<t.length;r++){let l=t[r];if(l.from==o.from){l.to!=o.to&&(t==e&&(t=e.slice()),t[r]=l.copy(l.from,o.to),tD(t,r+1,l.copy(o.to,l.to)));continue}l.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,l.from),tD(t,r,o.copy(l.from,o.to)));break}}return t}function tD(e,t,n){for(;t<e.length&&tO(n,e[t])>0;)t++;e.splice(t,0,n)}function tN(e){let t=[];return e.someProp("decorations",n=>{let o=n(e.state);o&&o!=tv&&t.push(o)}),e.cursorWrapper&&t.push(tw.create(e.state.doc,[e.cursorWrapper.deco])),tk.from(t)}let tA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tE=C&&M<=11;class tR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class tP{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tR,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);C&&M<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),tE&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(eN(this.view)){if(this.suppressingSelectionUpdates)return ek(this.view);if(C&&M<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=s(n))t.add(n);for(let o=e.anchorNode;o;o=s(o))if(t.has(o)){n=o;break}let o=n&&this.view.docView.nearestDesc(n);if(o&&o.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&eN(t)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,c=[];if(t.editable)for(let e=0;e<n.length;e++){let t=this.registerMutation(n[e],c);t&&(i=i<0?t.from:Math.min(t.from,i),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(O&&c.length){let e=c.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let o of e){let e=o.parentNode;e&&"LI"==e.nodeName&&(!n||function(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}(t,n)!=e)&&o.remove()}}}let h=null;i<0&&l&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&g(r)&&(h=ew(t))&&h.eq(o.Y1.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,ek(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||l)&&(i>-1&&(t.docView.markDirty(i,s),e=t,!tz.has(e)&&(tz.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=O,tI||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),tI=!0))),this.handleDOMChange(i,s,a,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||ek(t),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let o=e.addedNodes[n];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let o=e.previousSibling,r=e.nextSibling;if(C&&M<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:l}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(o=n),(!l||0>Array.prototype.indexOf.call(e.addedNodes,l))&&(r=l)}let l=o&&o.parentNode==e.target?i(o)+1:0,s=n.localPosFromDOM(e.target,l,-1),a=r&&r.parentNode==e.target?i(r):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let tz=new WeakMap,tI=!1;function tB(e,t){let n=t.startContainer,o=t.startOffset,r=t.endContainer,l=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return u(i.node,i.offset,r,l)&&([n,o,r,l]=[r,l,n,o]),{anchorNode:n,anchorOffset:o,focusNode:r,focusOffset:l}}function tL(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(A&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||A&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let tF=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function t$(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:eD(e,t.resolve(n.anchor),t.resolve(n.head))}function tV(e,t,n){let o=e.depth,r=t?e.end():e.pos;for(;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n){let t=e.node(o).maybeChild(e.indexAfter(o));for(;t&&!t.isLeaf;)t=t.firstChild,r++}return r}function tH(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class tq{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new e2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(tU),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=tY(this),t_(this),this.nodeViews=tJ(this),this.docView=el(this.state.doc,tW(this),tN(this),this.dom,this),this.domObserver=new tP(this,(e,t,n,l)=>(function(e,t,n,l,i){let s,a,c,h,u=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=ew(e,t);if(n&&!e.state.selection.eq(n)){if(D&&z&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,y(13,"Enter"))))return;let o=e.state.tr.setSelection(n);"pointer"==t?o.setMeta("pointer",!0):"key"==t&&o.scrollIntoView(),u&&o.setMeta("composition",u),e.dispatch(o)}return}let d=e.state.doc.resolve(t),p=d.sharedDepth(n);t=d.before(p+1),n=e.state.doc.resolve(n).after(p+1);let f=e.state.selection,m=function(e,t,n){let o,{node:l,fromOffset:i,toOffset:s,from:a,to:c}=e.docView.parseRange(t,n),h=e.domSelectionRange(),u=h.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(o=[{node:u,offset:h.anchorOffset}],g(h)||o.push({node:h.focusNode,offset:h.focusOffset})),D&&8===e.input.lastKeyCode)for(let e=s;e>i;e--){let t=l.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){s=e;break}if(!n||n.size)break}let d=e.state.doc,p=e.someProp("domParser")||r.aw.fromSchema(e.state.schema),f=d.resolve(a),m=null,y=p.parse(l,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:o,ruleFromNode:tL,context:f});if(o&&null!=o[0].pos){let e=o[0].pos,t=o[1]&&o[1].pos;null==t&&(t=e),m={anchor:e+a,head:t+a}}return{doc:y,sel:m,from:a,to:c}}(e,t,n),b=e.state.doc,w=b.slice(m.from,m.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(s=e.state.selection.to,a="end"):(s=e.state.selection.from,a="start"),e.input.lastKeyCode=null;let v=function(e,t,n,o,r){let l=e.findDiffStart(t,n);if(null==l)return null;let{a:i,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==r){let e=Math.max(0,l-Math.min(i,s));o-=i+e-l}if(i<l&&e.size<t.size){let e=o<=l&&o>=i?l-o:0;(l-=e)&&l<t.size&&tH(t.textBetween(l-1,l+1))&&(l+=e?1:-1),s=l+(s-i),i=l}else if(s<l){let t=o<=l&&o>=s?l-o:0;(l-=t)&&l<e.size&&tH(e.textBetween(l-1,l+1))&&(l+=t?1:-1),i=l+(i-s),s=l}return{start:l,endA:i,endB:s}}(w.content,m.doc.content,m.from,s,a);if(v&&e.input.domChangeCount++,(E&&e.input.lastIOSEnter>Date.now()-225||z)&&i.some(e=>1==e.nodeType&&!tF.test(e.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",t=>t(e,y(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!v)if(l&&f instanceof o.Bs&&!f.empty&&f.$head.sameParent(f.$anchor)&&!e.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))v={start:f.from,endA:f.to,endB:f.to};else{if(m.sel){let t=t$(e,e.state.doc,m.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);u&&n.setMeta("composition",u),e.dispatch(n)}}return}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof o.Bs&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=m.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=m.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),C&&M<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>m.from&&" \xa0"==m.doc.textBetween(v.start-m.from-1,v.start-m.from+1)&&(v.start--,v.endA--,v.endB--);let k=m.doc.resolveNoCache(v.start-m.from),S=m.doc.resolveNoCache(v.endB-m.from),x=b.resolve(v.start),O=k.sameParent(S)&&k.parent.inlineContent&&x.end()>=v.endA;if((E&&e.input.lastIOSEnter>Date.now()-225&&(!O||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!O&&k.pos<m.doc.content.size&&(!k.sameParent(S)||!k.parent.inlineContent)&&!/\S/.test(m.doc.textBetween(k.pos,S.pos,"",""))&&(c=o.Y1.findFrom(m.doc.resolve(k.pos+1),1,!0))&&c.head>k.pos)&&e.someProp("handleKeyDown",t=>t(e,y(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>v.start&&function(e,t,n,o,r){if(n-t<=r.pos-o.pos||tV(o,!0,!1)<r.pos)return!1;let l=e.resolve(t);if(!o.parent.isTextblock){let e=l.nodeAfter;return null!=e&&n==t+e.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let i=e.resolve(tV(l,!0,!0));return!(!i.parent.isTextblock||i.pos>n||tV(i,!0,!1)<n)&&o.parent.content.cut(o.parentOffset).eq(i.parent.content)}(b,v.start,v.endA,k,S)&&e.someProp("handleKeyDown",t=>t(e,y(8,"Backspace")))){z&&D&&e.domObserver.suppressSelectionUpdates();return}D&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),z&&!O&&k.start()!=S.start()&&0==S.parentOffset&&k.depth==S.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==v.endA&&(v.endB-=2,S=m.doc.resolveNoCache(v.endB-m.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,y(13,"Enter"))})},20));let T=v.start,N=v.endA,A=t=>{let n=t||e.state.tr.replace(T,N,m.doc.slice(v.start-m.from,v.endB-m.from));if(m.sel){let t=t$(e,n.doc,m.sel);t&&!(D&&e.composing&&t.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==T||t.head==n.mapping.map(N)-1)||C&&t.empty&&t.head==T)&&n.setSelection(t)}return u&&n.setMeta("composition",u),n.scrollIntoView()};if(O){if(k.pos==S.pos){C&&M<=11&&0==k.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>ek(e),20));let t=A(e.state.tr.delete(T,N)),n=b.resolve(v.start).marksAcross(b.resolve(v.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(v.endA==v.endB&&(h=function(e,t){let n=e.firstChild.marks,o=t.firstChild.marks,l=n,i=o,s,a,c;for(let e=0;e<o.length;e++)l=o[e].removeFromSet(l);for(let e=0;e<n.length;e++)i=n[e].removeFromSet(i);if(1==l.length&&0==i.length)a=l[0],s="add",c=e=>e.mark(a.addToSet(e.marks));else{if(0!=l.length||1!=i.length)return null;a=i[0],s="remove",c=e=>e.mark(a.removeFromSet(e.marks))}let h=[];for(let e=0;e<t.childCount;e++)h.push(c(t.child(e)));if(r.HY.from(h).eq(e))return{mark:a,type:s}}(k.parent.content.cut(k.parentOffset,S.parentOffset),x.parent.content.cut(x.parentOffset,v.endA-x.start())))){let t=A(e.state.tr);"add"==h.type?t.addMark(T,N,h.mark):t.removeMark(T,N,h.mark),e.dispatch(t)}else if(k.parent.child(k.index()).isText&&k.index()==S.index()-!S.textOffset){let t=k.parent.textBetween(k.parentOffset,S.parentOffset),n=()=>A(e.state.tr.insertText(t,T,N));e.someProp("handleTextInput",o=>o(e,T,N,t,n))||e.dispatch(n())}}else e.dispatch(A())})(this,e,t,n,l)),this.domObserver.start();var n=this;for(let e in eQ){let t=eQ[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=e=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(n,e)||e6(n,e)||!n.editable&&e.type in e0||t(n,e)},e1[e]?{passive:!0}:void 0)}A&&n.dom.addEventListener("input",()=>null),e5(n),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&e5(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(tU),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,o,r;let l=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(tr(this),a=!0),this.state=e;let c=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=tJ(this);(function(e,t){let n=0,o=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let e in t)o++;return n!=o})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&e5(this),this.editable=tY(this),t_(this);let h=tN(this),d=tW(this),p=l.plugins==e.plugins||l.doc.eq(e.doc)?e.scrollToSelection>l.scrollToSelection?"to selection":"preserve":"reset",g=s||!this.docView.matchesNode(e.doc,d,h);(g||!e.selection.eq(l.selection))&&(a=!0);let y="preserve"==p&&a&&null==this.dom.style.overflowAnchor&&function(e){let t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top);for(let l=(o.left+o.right)/2,i=r+1;i<Math.min(innerHeight,o.bottom);i+=5){let o=e.root.elementFromPoint(l,i);if(!o||o==e.dom||!e.dom.contains(o))continue;let s=o.getBoundingClientRect();if(s.top>=r-20){t=o,n=s.top;break}}return{refDOM:t,refTop:n,stack:$(e.dom)}}(this);if(a){let t,n,a;this.domObserver.stop();let c=g&&(C||D)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&(o=l.selection,r=e.selection,a=Math.min(o.$anchor.sharedDepth(o.head),r.$anchor.sharedDepth(r.head)),o.$anchor.start(a)!=r.$anchor.start(a));if(g){let t=D?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=f(e=e.childNodes[t-1])}else{if(!e.parentNode||m(e))return null;t=i(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),o=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||m(e))return null;t=i(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&o&&n!=o){let t=o.pmViewDesc,r=e.domObserver.lastChangedTextNode;if(n==r||o==r)return r;if(!t||!t.isText(o.nodeValue))return o;if(e.input.compositionNode==o){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return o}}return n||o}(this)),(s||!this.docView.update(e.doc,d,h,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=el(e.doc,d,h,this.dom,this)),t&&!this.trackWrites&&(c=!0)}c||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),n=this.domSelectionRange(),u(t.node,t.offset,n.anchorNode,n.anchorOffset)))?ek(this,c):(eO(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),(null==(n=this.dragging)?void 0:n.node)&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),"reset"==p?this.dom.scrollTop=0:"to selection"==p?this.scrollToSelection():y&&function({refDOM:e,refTop:t,stack:n}){let o=e?e.getBoundingClientRect().top:0;V(n,0==o?0:o-t)}(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof o.qv){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&F(this,t.getBoundingClientRect(),e)}else F(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new tc(e.slice,e.move,r<0?void 0:o.qv.create(this.state.doc,r))}someProp(e,t){let n=this._props&&this._props[e],o;if(null!=n&&(o=t?t(n):n))return o;for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n].props[e];if(null!=r&&(o=t?t(r):r))return o}let r=this.state.plugins;if(r)for(let n=0;n<r.length;n++){let l=r[n].props[e];if(null!=l&&(o=t?t(l):l))return o}}hasFocus(){if(C){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(H)return e.focus(H);let t=$(e);e.focus(null==H?{get preventScroll(){return H={preventScroll:!0},!0}}:void 0),H||(H=!1,V(t,0))}(this.dom),ek(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var n;let o,r,l=e.dom.ownerDocument,i,a=0,h=function(e,t,n){if(e.caretPositionFromPoint)try{let o=e.caretPositionFromPoint(t,n);if(o)return{node:o.offsetNode,offset:Math.min(f(o.offsetNode),o.offset)}}catch(e){}if(e.caretRangeFromPoint){let o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:Math.min(f(o.startContainer),o.startOffset)}}}(l,t.left,t.top);h&&({node:i,offset:a}=h);let u=(e.root.elementFromPoint?e.root:l).elementFromPoint(t.left,t.top);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){let n=e.dom.getBoundingClientRect();if(!q(t,n)||!(u=function e(t,n,o){let r=t.childNodes.length;if(r&&o.top<o.bottom)for(let l=Math.max(0,Math.min(r-1,Math.floor(r*(n.top-o.top)/(o.bottom-o.top))-2)),i=l;;){let o=t.childNodes[i];if(1==o.nodeType){let t=o.getClientRects();for(let r=0;r<t.length;r++){let l=t[r];if(q(n,l))return e(o,n,l)}}if((i=(i+1)%r)==l)break}return t}(e.dom,t,n)))return null}if(A)for(let e=u;i&&e;e=s(e))e.draggable&&(i=void 0);if(u=(o=(n=u).parentNode)&&/^li$/i.test(o.nodeName)&&t.left<n.getBoundingClientRect().left?o:n,i){let n;if(O&&1==i.nodeType&&(a=Math.min(a,i.childNodes.length))<i.childNodes.length){let e=i.childNodes[a],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&a++}I&&a&&1==i.nodeType&&1==(n=i.childNodes[a-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&a--,i==e.dom&&a==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?r=e.state.doc.content.size:(0==a||1!=i.nodeType||"BR"!=i.childNodes[a-1].nodeName)&&(r=function(e,t,n,o){let r=-1;for(let n=t,l=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),i;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((i=t.dom.getBoundingClientRect()).width||i.height)&&(t.node.isBlock&&t.parent&&(!l&&i.left>o.left||i.top>o.top?r=t.posBefore:(!l&&i.right<o.left||i.bottom<o.top)&&(r=t.posAfter),l=!0),!t.contentDOM&&r<0&&!t.node.isText))return(t.node.isBlock?o.top<(i.top+i.bottom)/2:o.left<(i.left+i.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n,-1)}(e,i,a,t))}null==r&&(r=function(e,t,n){let{node:o,offset:r}=function e(t,n){let o,r,l,i=2e8,s,a=0,h=n.top,u=n.top;for(let e=t.firstChild,d=0;e;e=e.nextSibling,d++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e).getClientRects()}for(let c=0;c<t.length;c++){let p=t[c];if(p.top<=h&&p.bottom>=u){h=Math.max(p.bottom,h),u=Math.min(p.top,u);let t=p.left>n.left?p.left-n.left:p.right<n.left?n.left-p.right:0;if(t<i){l=e,i=t,s=t&&3==l.nodeType?{left:p.right<n.left?p.right:p.left,top:n.top}:n,1==e.nodeType&&t&&(a=d+ +(n.left>=(p.left+p.right)/2));continue}}else p.top>n.top&&!o&&p.left<=n.left&&p.right>=n.left&&(o=e,r={left:Math.max(p.left,Math.min(p.right,n.left)),top:p.top});!l&&(n.left>=p.right&&n.top>=p.top||n.left>=p.left&&n.top>=p.bottom)&&(a=d+1)}}return(!l&&o&&(l=o,s=r,i=0),l&&3==l.nodeType)?function(e,t){let n=e.nodeValue.length,o=document.createRange();for(let r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);let n=_(o,1);if(n.top!=n.bottom&&q(t,n))return{node:e,offset:r+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}(l,s):!l||i&&1==l.nodeType?{node:t,offset:a}:e(l,s)}(t,n),l=-1;if(1==o.nodeType&&!o.firstChild){let e=o.getBoundingClientRect();l=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(o,r,l)}(e,u,t));let d=e.docView.nearestDesc(u,!0);return{pos:r,inside:d?d.posAtStart-d.border:-1}}(this,e)}coordsAtPos(e,t=1){return J(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let o=this.docView.posFromDOM(e,t,n);if(null==o)throw RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return function(e,t,n){let o,r;return G==t&&Z==n?Q:(G=t,Z=n,Q="up"==n||"down"==n?(o=t.selection,r="up"==n?o.$from:o.$to,K(e,t,()=>{let{node:t}=e.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let o=J(e,r.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let r=t[e];if(r.bottom>r.top+1&&("up"==n?o.top-r.top>(r.bottom-o.top)*2:r.bottom-o.bottom>(o.bottom-r.top)*2))return!1}}return!0})):function(e,t,n){let{$head:o}=t.selection;if(!o.parent.isTextblock)return!1;let r=o.parentOffset,l=r==o.parent.content.size,i=e.domSelection();return i?X.test(o.parent.textContent)&&i.modify?K(e,t,()=>{let{focusNode:t,focusOffset:r,anchorNode:l,anchorOffset:s}=e.domSelectionRange(),a=i.caretBidiLevel;i.modify("move",n,"character");let c=o.depth?e.docView.domAfterPos(o.before()):e.dom,{focusNode:h,focusOffset:u}=e.domSelectionRange(),d=h&&!c.contains(1==h.nodeType?h:h.parentNode)||t==h&&r==u;try{i.collapse(l,s),t&&(t!=l||r!=s)&&i.extend&&i.extend(t,r)}catch(e){}return null!=a&&(i.caretBidiLevel=a),d}):"left"==n||"backward"==n?!r:l:o.pos==o.start()||o.pos==o.end()}(e,t,n))}(this,t||this.state,e)}pasteHTML(e,t){return ts(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ts(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return eW(this,e)}destroy(){if(this.docView){for(let e in this.domObserver.stop(),this.input.eventHandlers)this.dom.removeEventListener(e,this.input.eventHandlers[e]);clearTimeout(this.input.composingTimeout),clearTimeout(this.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tN(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,h()}}get isDestroyed(){return null==this.docView}dispatchEvent(e){!e6(this,e)&&eQ[e.type]&&(this.editable||!(e.type in e0))&&eQ[e.type](this,e)}domSelectionRange(){let e=this.domSelection();return e?A&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return tB(e,n)}function o(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),n?tB(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function tW(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[tg.node(0,e.state.doc.content.size,t)]}function t_(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:tg.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function tY(e){return!e.someProp("editable",t=>!1===t(e.state))}function tJ(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function tU(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}tq.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}}}]);
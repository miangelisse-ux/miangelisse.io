"use strict";(window.webpackChunkweb=window.webpackChunkweb||[]).push([["41690"],{171185:function(t,e,i){i.d(e,{et:()=>r});var s=i(263401);Symbol.for("BoundsAllocate");let r=new class{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new s.FB)}allocate(t,e,i,r){if(!this.pools.length)return(new s.FB).setValue(t,e,i,r);let n=this.pools.pop();return n.x1=t,n.y1=e,n.x2=i,n.y2=r,n}allocateByObj(t){if(!this.pools.length)return new s.FB(t);let e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},249030:function(t,e,i){i.d(e,{A:()=>n});var s=i(894442),r=i(255161);let n=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){let e=(0,r.JN)(Object.assign({nativeCanvas:s.w.global.createCanvas(t)},t));return this.allocatedCanvas.push(e),e}let e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){let e={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},i=(0,r.JN)(Object.assign({nativeCanvas:s.w.global.createCanvas(e)},e));return this.allocatedCanvas.push(i),i}let e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},624108:function(t,e,i){i.d(e,{QE:()=>h,yp:()=>o});var s=i(669182),r=i(362055);function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class a{constructor(){this.pools=[]}static identity(t){return(0,r.TL)(t)}allocate(){if(!this.pools.length)return n();let t=this.pools.pop();return a.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():n();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}let h=new class{constructor(){this.pools=[]}allocate(t,e,i,r,n,a){if(!this.pools.length)return new s.y(t,e,i,r,n,a);let h=this.pools.pop();return h.a=t,h.b=e,h.c=i,h.d=r,h.e=n,h.f=a,h}allocateByObj(t){if(!this.pools.length)return new s.y(t.a,t.b,t.c,t.d,t.e,t.f);let e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}},o=new a},894442:function(t,e,i){i.d(e,{w:()=>n});var s=i(64849),r=i(221427);let n=new class{get renderService(){return this._renderService||(this._renderService=s.n.get(r.p)),this._renderService}}},941599:function(t,e,i){i.d(e,{MB:()=>u,Of:()=>d});var s=i(31982),r=i(408830),n=i(894442),a=i(324759);class h{static GetCanvas(){try{return h.canvas||(h.canvas=n.w.global.createCanvas({})),h.canvas}catch(t){return null}}static GetCtx(){if(!h.ctx){let t=h.GetCanvas();h.ctx=t.getContext("2d")}return h.ctx}}class o extends s.L{static getInstance(){return o._instance||(o._instance=new o),o._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;let i=h.GetCanvas(),s=h.GetCtx();if(i.width=e,i.height=1,!s)return;if(s.translate(0,0),!s)throw Error("\u83B7\u53D6ctx\u53D1\u751F\u9519\u8BEF");let r=s.createLinearGradient(0,0,e,0);t.forEach(t=>{r.addColorStop(t[0],t[1])}),s.fillStyle=r,s.fillRect(0,0,e,1),this.rgbaSet=s.getImageData(0,0,e,1).data}getColor(t){let e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,s,r=[],n=100){let a=`${t}${e}${i}${s}`;r.forEach(t=>a+=t.join()),a+=n;let h=this.dataMap.get(a);return h||(h={data:new o(r,n),timestamp:[]},this.addLimitedTimestamp(h,Date.now(),{}),this.dataMap.set(a,h)),this.clearCache(this.dataMap,this.cacheParams),h.data}}class l{static GetSize(t){for(let e=0;e<l.ImageSize.length;e++)if(l.ImageSize[e]>=t)return l.ImageSize[e];return t}static Get(t,e,i,s,r,n,a){let h=l.GenKey(t,e,i,s,r),o=l.cache[h];if(!o||0===o.length)return null;for(let t=0;t<o.length;t++)if(o[t].width>=n&&o[t].height>=a)return o[t].pattern;return null}static Set(t,e,i,s,r,n,a,h){let o=l.GenKey(t,e,i,s,r);l.cache[o]?l.cache[o].push({width:a,height:h,pattern:n}):l.cache[o]=[{width:a,height:h,pattern:n}]}static GenKey(t,e,i,s,r){return`${e},${i},${s},${r},${t.join()}`}}function u(t,e,i,s){let{stops:n,startAngle:h,endAngle:o}=s;for(;i<0;)i+=r.f7;for(;i>r.f7;)i-=r.f7;if(i<h||i>o)return n[0].color;let l,u,d=(i-h)/(o-h);for(let t=0;t<n.length;t++)if(n[t].offset>=d){l=n[t-1],u=n[t];break}return d=(d-l.offset)/(u.offset-l.offset),(0,a.BM)(l.color,u.color,d,!1)}function d(t,e,i,s,r,n,a,u,d){let c=Math.floor(180*r/Math.PI),p=h.GetCanvas(),g=h.GetCtx();if(!g)return null;let f=l.GetSize(u),m=l.GetSize(d),v=l.Get(e,i,s,n,a,f,m);if(v)return v;let y=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(s,2),Math.pow(f-i,2)+Math.pow(s,2)),Math.max(Math.pow(f-i,2)+Math.pow(m-s,2),Math.pow(i,2)+Math.pow(m-s,2)))),x=c+1,b=r/Math.max(1,x-1),A=o.getInstance().GetOrCreate(i,s,f,m,e,x),_=2*Math.PI*y/360;p.width=f,p.height=m,g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,f,m),g.translate(i,s),g.rotate(n);for(let t=0,e=x-1;t<e&&!(n+t*b>a);t++){let e=A.getColor(t);g.beginPath(),g.rotate(b),g.moveTo(0,0),g.lineTo(y,-2*_),g.lineTo(y,0),g.fillStyle=e,g.closePath(),g.fill()}let B=g.getImageData(0,0,f,m);return p.width=B.width,p.height=B.height,g.putImageData(B,0,0),(v=t.createPattern(p,"no-repeat"))&&l.Set(e,i,s,n,a,v,f,m),v}l.cache={},l.ImageSize=[20,40,80,160,320,640,1280,2560]},826156:function(t,e,i){i.d(e,{A:()=>r,r:()=>s});let s=Symbol.for("CanvasFactory"),r=Symbol.for("Context2dFactory")},686332:function(t,e,i){i.d(e,{u:()=>s});class s{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;let{nativeCanvas:i,width:s=500,height:r=500,dpr:n=1,x:a,y:h,id:o,canvasControled:l=!0}=t;this._x=null!=a?a:0,this._y=null!=h?h:0,this._pixelWidth=s*n,this._pixelHeight=r*n,this._visiable=!1!==t.visiable,this.controled=l,this._displayWidth=s,this._displayHeight=r,this._dpr=n,this._nativeCanvas=i,this._id=null!=(e=i.id)?e:o,o&&(i.id=o),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,i,s){return this._context.getImageData(t,e,i,s)}convertToBlob(t){throw Error("\u6682\u672A\u5B9E\u73B0")}transferToImageBitmap(){throw Error("\u6682\u672A\u5B9E\u73B0")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}s.env="browser"},255161:function(t,e,i){i.d(e,{JN:()=>l,XS:()=>E,me:()=>C});var s=i(408830),r=i(942708),n=i(976492),a=i(64849),h=i(894442),o=i(826156);function l(t){return a.n.getNamed(o.r,h.w.global.env)(t)}let u=Math.sqrt(3),d=1/3;function c(t){return t>-A&&t<A}let p=[0,0],g=[0,0],f=[0,0];function m(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function v(t,e,i,s){let r=1-s;return r*(r*t+2*s*e)+s*s*i}function y(t,e,i,s,r){let n=1-r;return n*n*(n*t+3*r*e)+r*r*(r*s+3*n*i)}function x(t){return(t%=s.f7)<0&&(t+=s.f7),t}function b(t,e,i,s,r,n,a){if(0===r)return!1;let h=r/2,o=0;if(a>e+h&&a>s+h||a<e-h&&a<s-h||n>t+h&&n>i+h||n<t-h&&n<i-h)return!1;if(t===i)return Math.abs(n-t)<=r/2;let l=(o=(e-s)/(t-i))*n-a+(t*s-i*e)/(t-i);return l*l/(o*o+1)<=r/2*r/2}let A=1e-4,_=[-1,-1,-1],B=[-1,-1];function T(t){return Math.round(t/s.pi*1e8)/1e8%2*s.pi}let w=[0,0];function S(t,e,i,a,h){let o=t.length,l,S,E=0,C=0,M=0,P=0,L=0;for(let U=0;U<o;U++){var O,R,k,D;let o=t[U],I=0===U;o[0]===n.m.M&&U>1&&(i||(E+=(0,r.N0)(C,M,P,L,a,h))),I&&(C=o[1],M=o[2],P=C,L=M);let W=o[0],N=o[1],z=o[2],G=o[3],j=o[4],H=o[5],F=o[6],V=j,Z=H;w[0]=V,w[1]=Z,function(t,e){let i=T(t[0]);i<0&&(i+=s.f7);let r=i-t[0],n=t[1];n+=r,!e&&n-i>=s.f7?n=i+s.f7:e&&i-n>=s.f7?n=i-s.f7:!e&&i>n?n=i+(s.f7-T(i-n)):e&&i<n&&(n=i-(s.f7-T(n-i))),t[0]=i,t[1]=n}(w,!!o[6]),V=w[0],Z=w[1];let X=V,Y=Z-V,K=!!(1-!o[6]),$=(a-N)*G/G+N;switch(W){case n.m.M:P=N,L=z,C=P,M=L;break;case n.m.L:if(i){if(b(C,M,N,z,e,a,h))return!0}else E+=(0,r.N0)(C,M,N,z,a,h)||0;C=N,M=z;break;case n.m.C:if(i){if(O=C,R=M,0!==e&&(!(h>R+e)||!(h>z+e)||!(h>j+e)||!(h>F+e))&&(!(h<R-e)||!(h<z-e)||!(h<j-e)||!(h<F-e))&&(!(a>O+e)||!(a>N+e)||!(a>G+e)||!(a>H+e))&&(!(a<O-e)||!(a<N-e)||!(a<G-e)||!(a<H-e))&&function(t,e,i,s,r,n,a,h,o,l,u){let d,c,v,x,b=0,A=.005,_=1/0;p[0]=o,p[1]=l;for(let o=0;o<1;o+=.05)g[0]=y(t,i,r,a,o),g[1]=y(e,s,n,h,o),(v=m(p,g))<_&&(b=o,_=v);_=1/0;for(let o=0;o<32&&!(A<1e-4);o++)d=b-A,c=b+A,g[0]=y(t,i,r,a,d),g[1]=y(e,s,n,h,d),v=m(g,p),d>=0&&v<_?(b=d,_=v):(f[0]=y(t,i,r,a,c),f[1]=y(e,s,n,h,c),x=m(f,p),c<=1&&x<_?(b=c,_=x):A*=.5);return Math.sqrt(_)}(O,R,N,z,G,j,H,F,a,h,0)<=e/2)return!0}else E+=function(t,e,i,s,r,n,a,h,o,l){if(l>e&&l>s&&l>n&&l>h||l<e&&l<s&&l<n&&l<h)return 0;let p=function(t,e,i,s,r,n){let a=s+3*(e-i)-t,h=3*(i-2*e+t),o=3*(e-t),l=t-r,p=h*h-3*a*o,g=h*o-9*a*l,f=o*o-3*h*l,m=0;if(c(p)&&c(g))if(c(h))n[0]=0;else{let t=-o/h;t>=0&&t<=1&&(n[m++]=t)}else{let t=g*g-4*p*f;if(c(t)){let t=g/p,e=-h/a+t,i=-t/2;e>=0&&e<=1&&(n[m++]=e),i>=0&&i<=1&&(n[m++]=i)}else if(t>0){let e=Math.sqrt(t),i=p*h+1.5*a*(-g+e),s=p*h+1.5*a*(-g-e),r=(-h-((i=i<0?-Math.pow(-i,d):Math.pow(i,d))+(s=s<0?-Math.pow(-s,d):Math.pow(s,d))))/(3*a);r>=0&&r<=1&&(n[m++]=r)}else{let t=Math.acos((2*p*h-3*a*g)/(2*Math.sqrt(p*p*p)))/3,e=Math.sqrt(p),i=Math.cos(t),s=(-h-2*e*i)/(3*a),r=(-h+e*(i+u*Math.sin(t)))/(3*a),o=(-h+e*(i-u*Math.sin(t)))/(3*a);s>=0&&s<=1&&(n[m++]=s),r>=0&&r<=1&&(n[m++]=r),o>=0&&o<=1&&(n[m++]=o)}}return m}(e,s,n,h,l,_);if(0===p)return 0;let g=0,f=-1,m=0,v=0;for(let l=0;l<p;l++){let u=_[l],d=0===u||1===u?.5:1;y(t,i,r,a,u)<o||(f<0&&(f=function(t,e,i,s,r){let n=6*i-12*e+6*t,a=9*e+3*s-3*t-9*i,h=3*e-3*t,o=0;if(c(a)){if(n>A||n<-A){let t=-h/n;t>=0&&t<=1&&(r[o++]=t)}}else{let t=n*n-4*a*h;if(c(t))r[0]=-n/(2*a);else if(t>0){let e=Math.sqrt(t),i=(-n+e)/(2*a),s=(-n-e)/(2*a);i>=0&&i<=1&&(r[o++]=i),s>=0&&s<=1&&(r[o++]=s)}}return o}(e,s,n,h,B),B[1]<B[0]&&f>1&&function(){let t=B[0];B[0]=B[1],B[1]=t}(),m=y(e,s,n,h,B[0]),f>1&&(v=y(e,s,n,h,B[1]))),2===f?u<B[0]?g+=m<e?d:-d:u<B[1]?g+=v<m?d:-d:g+=h<v?d:-d:u<B[0]?g+=m<e?d:-d:g+=h<m?d:-d)}return g}(C,M,N,z,G,j,H,F,a,h)||0;C=H,M=F;break;case n.m.Q:if(i){if(k=C,D=M,0!==e&&(!(h>D+e)||!(h>z+e)||!(h>j+e))&&(!(h<D-e)||!(h<z-e)||!(h<j-e))&&(!(a>k+e)||!(a>N+e)||!(a>G+e))&&(!(a<k-e)||!(a<N-e)||!(a<G-e))&&function(t,e,i,s,r,n,a,h,o){let l=0,u=.005,d=1/0;p[0]=a,p[1]=h;for(let a=0;a<1;a+=.05){g[0]=v(t,i,r,a),g[1]=v(e,s,n,a);let h=m(p,g);h<d&&(l=a,d=h)}d=1/0;for(let a=0;a<32&&!(u<1e-4);a++){let a=l-u,h=l+u;g[0]=v(t,i,r,a),g[1]=v(e,s,n,a);let o=m(g,p);if(a>=0&&o<d)l=a,d=o;else{f[0]=v(t,i,r,h),f[1]=v(e,s,n,h);let a=m(f,p);h<=1&&a<d?(l=h,d=a):u*=.5}}return Math.sqrt(d)}(k,D,N,z,G,j,a,h,0)<=e/2)return!0}else E+=function(t,e,i,s,r,n,a,h){if(h>e&&h>s&&h>n||h<e&&h<s&&h<n)return 0;let o=function(t,e,i,s,r){let n=t-2*e+i,a=2*(e-t),h=t-s,o=0;if(c(n)){if(a>A||a<-A){let t=-h/a;t>=0&&t<=1&&(r[o++]=t)}}else{let t=a*a-4*n*h;if(c(t)){let t=-a/(2*n);t>=0&&t<=1&&(r[o++]=t)}else if(t>0){let e=Math.sqrt(t),i=(-a+e)/(2*n),s=(-a-e)/(2*n);i>=0&&i<=1&&(r[o++]=i),s>=0&&s<=1&&(r[o++]=s)}}return o}(e,s,n,h,_);if(0===o)return 0;let l=function(t,e,i){let s=t+i-2*e;return 0===s?.5:(t-e)/s}(e,s,n);if(l>=0&&l<=1){let h=0,u=v(e,s,n,l);for(let s=0;s<o;s++){let o=0===_[s]||1===_[s]?.5:1;v(t,i,r,_[s])<a||(_[s]<l?h+=u<e?o:-o:h+=n<u?o:-o)}return h}let u=0===_[0]||1===_[0]?.5:1;return v(t,i,r,_[0])<a?0:n<e?u:-u}(C,M,N,z,G,j,a,h)||0;C=G,M=j;break;case n.m.A:if(l=Math.cos(X)*G+N,S=Math.sin(X)*G+z,I?(P=l,L=S):E+=(0,r.N0)(C,M,l,S,a,h),i){if(function(t,e,i,r,n,a,h,o,l){if(0===h)return!1;let u=Math.sqrt((o-=t)*o+(l-=e)*l);if(u-h>i||u+h<i)return!1;if(Math.abs(r-n)%s.f7<1e-4)return!0;if(a){let t=r;r=x(n),n=x(t)}else r=x(r),n=x(n);r>n&&(n+=s.f7);let d=Math.atan2(l,o);return d<0&&(d+=s.f7),d>=r&&d<=n||d+s.f7>=r&&d+s.f7<=n}(N,z,G,X,X+Y,K,e,$,h))return!0}else E+=function(t,e,i,r,n,a,h,o){if((o-=e)>i||o<-i)return 0;let l=Math.sqrt(i*i-o*o);_[0]=-l,_[1]=l;let u=Math.abs(r-n);if(u<1e-4)return 0;if(u>=s.f7-1e-4)return r=0,n=s.f7,h>=_[0]+t&&h<=_[1]+t?a?1:-1:0;if(r>n){let t=r;r=n,n=t}r<0&&(r+=s.f7,n+=s.f7);let d=0;for(let e=0;e<2;e++){let i=_[e];if(i+t>h){let t=Math.atan2(o,i),e=a?1:-1;t<0&&(t=s.f7+t),(t>=r&&t<=n||t+s.f7>=r&&t+s.f7<=n)&&(t>s.pi/2&&t<1.5*s.pi&&(e=-e),d+=e)}}return d}(N,z,G,X,X+Y,K,$,h);C=Math.cos(X+Y)*G+N,M=Math.sin(X+Y)*G+z;break;case n.m.R:if(P=C=N,L=M=z,l=P+G,S=L+j,i){if(b(P,L,l,L,e,a,h)||b(l,L,l,S,e,a,h)||b(l,S,P,S,e,a,h)||b(P,S,P,L,e,a,h))return!0}else E+=(0,r.N0)(l,L,l,S,a,h),E+=(0,r.N0)(P,S,P,L,a,h);break;case n.m.Z:if(i){if(b(C,M,P,L,e,a,h))return!0}else E+=(0,r.N0)(C,M,P,L,a,h);C=P,M=L}}return i||Math.abs(M-L)<A||(E+=(0,r.N0)(C,M,P,L,a,h)||0),0!==E}function E(t,e,i){return S(t,0,!1,e,i)}function C(t,e,i,s){return S(t,e,!0,i,s)}},324759:function(t,e,i){i.d(e,{BM:()=>h,Ib:()=>l});var s=i(589131),r=i(704654),n=i(695723);function a(t,e=!1){return Array.isArray(t)&&(0,r.Z)(t[0])?e?`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])},${t[3].toFixed(2)})`:`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])})`:t}function h(t,e,i,s,a){return Array.isArray(t)&&!(0,r.Z)(t[0])||Array.isArray(e)&&!(0,r.Z)(e[0])?[,,,,].fill(0).map((r,a)=>{var h,l;return o((0,n.Z)(t)?null!=(h=t[a])?h:t[0]:t,(0,n.Z)(e)?null!=(l=e[a])?l:e[0]:e,i,s)}):o(t,e,i,s,a)}function o(t,e,i,r,n){if(!t||!e)return t&&a(t)||e&&a(e)||!1;let o,l,u=!1,d=!1;if(Array.isArray(t)?o=t:"string"==typeof t?o=s.VH.Get(t,s.Mr.Color255):u=!0,Array.isArray(e)?l=e:"string"==typeof e?l=s.VH.Get(e,s.Mr.Color255):d=!0,u!==d){let s=u?t:e,o=u?e:t,l=Object.assign(Object.assign({},s),{stops:s.stops.map(t=>Object.assign(Object.assign({},t),{color:a(o)}))});return u?h(s,l,i,r,n):h(l,s,i,r,n)}if(u){if(t.gradient===e.gradient){let s=t.stops,r=e.stops;if(s.length!==r.length)return!1;if("linear"===t.gradient){var p,g,f,m=t,v=e,y=i;let s=m.stops,r=v.stops;return{gradient:"linear",x0:m.x0+(v.x0-m.x0)*y,x1:m.x1+(v.x1-m.x1)*y,y0:m.y0+(v.y0-m.y0)*y,y1:m.y1+(v.y1-m.y1)*y,stops:Array(s.length).fill(0).map((t,e)=>({color:c(s[e].color,r[e].color,y),offset:s[e].offset+(r[e].offset-s[e].offset)*y}))}}if("radial"===t.gradient){var x=t,b=e,A=i;let s=x.stops,r=b.stops;return{gradient:"radial",x0:x.x0+(b.x0-x.x0)*A,x1:x.x1+(b.x1-x.x1)*A,y0:x.y0+(b.y0-x.y0)*A,y1:x.y1+(b.y1-x.y1)*A,r0:x.r0+(b.r0-x.r0)*A,r1:x.r1+(b.r1-x.r1)*A,stops:Array(s.length).fill(0).map((t,e)=>({color:c(s[e].color,r[e].color,A),offset:s[e].offset+(r[e].offset-s[e].offset)*A}))}}if("conical"===t.gradient){var _=t,B=e,T=i;let s=_.stops,r=B.stops;return{gradient:"conical",startAngle:_.startAngle+(B.startAngle-_.startAngle)*T,endAngle:_.endAngle+(B.endAngle-_.endAngle)*T,x:_.x+(B.x-_.x)*T,y:_.y+(B.y-_.y)*T,stops:Array(s.length).fill(0).map((t,e)=>({color:c(s[e].color,r[e].color,T),offset:s[e].offset+(r[e].offset-s[e].offset)*T}))}}}return!1}return n&&n(o,l),a((p=o,g=l,f=i,[p[0]+(g[0]-p[0])*f,p[1]+(g[1]-p[1])*f,p[2]+(g[2]-p[2])*f,p[3]+(g[3]-p[3])*f]),r)}function l(t,e,i){return`rgba(${t[0]+(e[0]-t[0])*i},${t[1]+(e[1]-t[1])*i},${t[2]+(e[2]-t[2])*i},${t[3]+(e[3]-t[3])*i})`}let u=[0,0,0,0],d=[0,0,0,0];function c(t,e,i){return s.VH.Get(t,s.Mr.Color255,u),s.VH.Get(e,s.Mr.Color255,d),`rgba(${Math.round(u[0]+(d[0]-u[0])*i)},${Math.round(u[1]+(d[1]-u[1])*i)},${Math.round(u[2]+(d[2]-u[2])*i)},${u[3]+(d[3]-u[3])*i})`}},589131:function(t,e,i){i.d(e,{Mr:()=>r,VH:()=>a});var s,r,n=i(571229);(s=r||(r={}))[s.Color255=0]="Color255",s[s.Color1=1]="Color1";class a{static Get(t,e=r.Color1,i=[0,0,0,1]){if(e===r.Color1){let e=a.store1[t];if(e)return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i;let s=n.Il.parseColorString(t);if(s){let e=[s.r/255,s.g/255,s.b/255,s.opacity];a.store1[t]=e,a.store255[t]=[s.r,s.g,s.b,s.opacity],i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]}return i}let s=a.store255[t];if(s)return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i;let h=n.Il.parseColorString(t);return h&&(a.store1[t]=[h.r/255,h.g/255,h.b/255,h.opacity],a.store255[t]=[h.r,h.g,h.b,h.opacity],i[0]=h.r,i[1]=h.g,i[2]=h.b,i[3]=h.opacity),i}static Set(t,e,i){if(e===r.Color1)a.store1[t]||(a.store1[t]=i,a.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]);else{if(a.store255[t])return;a.store255[t]=i,a.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}a.store255={},a.store1={}},140038:function(t,e,i){i.d(e,{y:()=>n});var s=i(408830),r=i(753794);let n=(t,e,i,n)=>{let a,h=!1,o=!1;if(e.forEachChildren(t=>!(h=t.numberType===r.IJ)),e.forEachChildren(t=>!(o=!!t.findFace)),h){let t=e.getChildren(),r=[...t];r.sort((t,e)=>{var i,r,n,a;let h=(null!=(r=null!=(i=t.attribute.startAngle)?i:0+t.attribute.endAngle)?r:0)/2,o=(null!=(a=null!=(n=e.attribute.startAngle)?n:0+e.attribute.endAngle)?a:0)/2;for(;h<0;)h+=s.f7;for(;o<0;)o+=s.f7;return o-h}),r.forEach(t=>{t._next=null,t._prev=null}),e.removeAllChild(),e.update(),r.forEach(t=>{e.appendChild(t)}),n.hack_pieFace="outside",(a=i(h,o))&&a.graphic||(n.hack_pieFace="inside",a=i(h,o)),a&&a.graphic||(n.hack_pieFace="top",a=i(h,o)),e.removeAllChild(),t.forEach(t=>{t._next=null,t._prev=null}),t.forEach(t=>{e.appendChild(t)})}else if(o){let s=e.getChildren(),r=s.map(e=>({ave_z:e.findFace().vertices.map(i=>{var s;return t.view(i[0],i[1],null!=(s=i[2]+e.attribute.z)?s:0)[2]}).reduce((t,e)=>t+e,0),g:e}));r.sort((t,e)=>e.ave_z-t.ave_z),e.removeAllChild(),r.forEach(t=>{t.g._next=null,t.g._prev=null}),e.update(),r.forEach(t=>{e.add(t.g)}),a=i(h,o),e.removeAllChild(),s.forEach(t=>{t._next=null,t._prev=null}),e.update(),s.forEach(t=>{e.add(t)})}else a=i(h,o);return a}},544724:function(t,e,i){var s,r,n=i(173656);s={},function(t){Object.prototype.hasOwnProperty;let e="function"==typeof Symbol,i=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",s=(e&&void 0!==Symbol.iterator&&Symbol.iterator,Object.create,Object.getPrototypeOf(Function)),r=("object"==typeof n&&n.env&&n.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),a=new WeakMap;function h(t,e,i){let s=a.get(t);if(l(s)){if(!i)return;s=new r,a.set(t,s)}let n=s.get(e);if(l(n)){if(!i)return;n=new r,s.set(e,n)}return n}function o(t,e,i){let s=h(e,i,!1);return!l(s)&&!!s.has(t)}function l(t){return void 0===t}function u(t){return"object"==typeof t?null!==t:"function"==typeof t}function d(t){let e=function(t,e){switch(function(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}let s="string",r=function(t,e){let i=t[e];if(null!=i){if(!c(i))throw TypeError();return i}}(t,i);if(void 0!==r){let e=r.call(t,s);if(u(e))throw TypeError();return e}return function(t,e){if("string"===e){let e=t.toString;if(c(e)){let i=e.call(t);if(!u(i))return i}let i=t.valueOf;if(c(i)){let e=i.call(t);if(!u(e))return e}}else{let e=t.valueOf;if(c(e)){let i=e.call(t);if(!u(i))return i}let i=t.toString;if(c(i)){let e=i.call(t);if(!u(e))return e}}throw TypeError()}(t,s)}(t,0);return"symbol"==typeof e?e:""+e}function c(t){return"function"==typeof t}function p(t){let e=Object.getPrototypeOf(t);if("function"!=typeof t||t===s||e!==s)return e;let i=t.prototype,r=i&&Object.getPrototypeOf(i);if(null==r||r===Object.prototype)return e;let n=r.constructor;return"function"!=typeof n||n===t?e:n}t("defineMetadata",function(t,e,i,s){var r,n;if(!u(i))throw TypeError();return r=t,n=e,void h(i,s,!0).set(r,n)}),t("hasMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=d(i)),function t(e,i,s){if(o(e,i,s))return!0;let r=p(i);return null!==r&&t(e,r,s)}(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=d(i)),o(t,e,i)}),t("getMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=d(i)),function t(e,i,s){if(o(e,i,s)){var r=e,n=i,a=s;let t=h(n,a,!1);return l(t)?void 0:t.get(r)}let u=p(i);return null===u?void 0:t(e,u,s)}(t,e,i)})}(function(t,e){"function"!=typeof s[t]&&Object.defineProperty(s,t,{configurable:!0,writable:!0,value:e}),r&&r(t,e)}),e.Z=s},452847:function(t,e,i){i.d(e,{Ci:()=>n,P:()=>h,Pv:()=>l,hN:()=>u});var s=i(919498);function r(t,e){let i=0,r=t.length;for(let n=0;n<r;n++){let a=t[n],h=e[n],o=t[(n+1)%r],l=e[(n+1)%r];i+=s.HL.distanceNN(a,h,o,l)}return i/2}function n(t,e,i,s,n){return r([t.x,e.x,i.x,s.x],[t.y,e.y,i.y,s.y])}function a(t,e,i,s,r){let n=1-r;return n*n*n*t+3*e*r*n*n+3*i*r*r*n+s*r*r*r}function h(t,e,i,r,n){let h=a(t.x,e.x,i.x,r.x,n),o=a(t.y,e.y,i.y,r.y,n);return new s.E9(h,o)}function o(t,e,i,s){let r=1-s;return r*r*t+2*r*s*e+s*s*i}function l(t,e,i,r){let n=o(t.x,e.x,i.x,r),a=o(t.y,e.y,i.y,r);return new s.E9(n,a)}function u(t,e,i,s){return r([t.x,e.x,i.x],[t.y,e.y,i.y])}},104877:function(t,e,i){i.d(e,{C:()=>n});var s=i(408830);let r=s.BZ-1e-8;class n{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,n,a,h){if(Math.abs(a-n)>r)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let o,l,u,d,c=1/0,p=-1/0,g=1/0,f=-1/0;function m(t){u=i*Math.cos(t),d=i*Math.sin(t),u<c&&(c=u),u>p&&(p=u),d<g&&(g=d),d>f&&(f=d)}if(m(n),m(a),a!==n)if((n%=s.BZ)<0&&(n+=s.BZ),(a%=s.BZ)<0&&(a+=s.BZ),a<n&&(h=!h,o=n,n=a,a=o),h)for(a-=s.BZ,o=n-n%s.ou,l=0;l<4&&o>a;++l,o-=s.ou)m(o);else for(o=n-n%s.ou+s.ou,l=0;l<4&&o<a;++l,o+=s.ou)m(o);this.bounds.add(t+c,e+g),this.bounds.add(t+p,e+f)}arcTo(t,e,i,s,r){this.bounds.add(t,e)}bezierCurveTo(t,e,i,s,r,n){this.bounds.add(t,e),this.bounds.add(i,s),this.bounds.add(r,n)}closePath(){}ellipse(){throw Error("\u4E0D\u652F\u6301ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,s){this.bounds.add(t,e),this.bounds.add(i,s)}rect(t,e,i,s){this.bounds.add(t,e),this.bounds.add(t+i,e+s)}clear(){this.bounds.clear()}release(...t){}}},902978:function(t,e,i){i.d(e,{D:()=>n,L:()=>a});var s=i(695723),r=i(319823);function n(t,e,i){let s=e,{a:r,b:n,c:a,d:h}=t.currentMatrix,o=Math.sign(r)*Math.sqrt(r*r+n*n),l=Math.sign(h)*Math.sqrt(a*a+h*h);return o+l===0?0:s=s/Math.abs(o+l)*2*i}function a(t,e,i,n=0,h=0){var o,l,u,d;let c,p;if(!e||!0===e)return"black";if((0,s.Z)(e))for(let t=0;t<e.length&&!(p=e[t]);t++);else p=e;if("string"==typeof(p=r.a.Parse(p)))return p;if(i.AABBBounds&&(!i.attribute||0!==i.attribute.scaleX||0!==i.attribute.scaleY)){let e=i.AABBBounds,s=e.x2-e.x1,r=e.y2-e.y1,a=e.x1-n,g=e.y1-h;if(i.attribute){let{scaleX:t=1,scaleY:e=1,angle:n=0}=i.attribute;s/=t,r/=e,a/=t,g/=e,(n||1!==t||1!==e)&&(a=null!=(o=i.x1WithoutTransform)?o:0,g=null!=(l=i.y1WithoutTransform)?l:0,s=null!=(u=i.widthWithoutTransform)?u:s,r=null!=(d=i.heightWithoutTransform)?d:r)}"linear"===p.gradient?c=function(t,e,i,s,r,n){var a,h,o,l;let u=t.createLinearGradient(i+(null!=(a=e.x0)?a:0)*r,s+(null!=(h=e.y0)?h:0)*n,i+(null!=(o=e.x1)?o:1)*r,s+(null!=(l=e.y1)?l:0)*n);return e.stops.forEach(t=>{u.addColorStop(t.offset,t.color)}),u}(t,p,a,g,s,r):"conical"===p.gradient?c=function(t,e,i,s,r,n){var a,h;let o=t.createConicGradient(i+(null!=(a=e.x)?a:0)*r,s+(null!=(h=e.y)?h:0)*n,e.startAngle,e.endAngle);return e.stops.forEach(t=>{o.addColorStop(t.offset,t.color)}),o.GetPattern?o.GetPattern(r+i,n+s,void 0):o}(t,p,a,g,s,r):"radial"===p.gradient&&(c=function(t,e,i,s,r,n){var a,h,o,l,u,d;let c=t.createRadialGradient(i+(null!=(a=e.x0)?a:.5)*r,s+(null!=(h=e.y0)?h:.5)*n,Math.max(r,n)*(null!=(o=e.r0)?o:0),i+(null!=(l=e.x1)?l:.5)*r,s+(null!=(u=e.y1)?u:.5)*n,Math.max(r,n)*(null!=(d=e.r1)?d:.5));return e.stops.forEach(t=>{c.addColorStop(t.offset,t.color)}),c}(t,p,a,g,s,r))}return c||"orange"}},319823:function(t,e,i){i.d(e,{a:()=>n});var s=i(408830);let r=function(){let t={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i},e="";function i(t){let i=Error(e+": "+t);throw i.source=e,i}function s(){return r("linear",t.linearGradient,n)||r("radial",t.radialGradient,h)||r("conic",t.conicGradient,a)}function r(e,s,r){let n=v(s);if(n){v(t.startCall)||i("Missing (");let s=function(s){let n=r();return n&&(v(t.comma)||i("Missing comma before color stops")),{type:e,orientation:n,colorStops:c(p)}}(0);return v(t.endCall)||i("Missing )"),s}}function n(){return m("directional",t.sideOrCorner,1)||m("angular",t.angleValue,1)}function a(){return m("angular",t.fromAngleValue,1)}function h(){let i,s,r=o();return r&&((i=[]).push(r),s=e,v(t.comma)&&((r=o())?i.push(r):e=s)),i}function o(){let t=function(){let t=m("shape",/^(circle)/i,0);return t&&(t.style=f()||l()),t}()||function(){let t=m("shape",/^(ellipse)/i,0);return t&&(t.style=g()||l()),t}();if(t)t.at=u();else{let e=l();if(e){t=e;let i=u();i&&(t.at=i)}else{let e=d();e&&(t={type:"default-radial",at:e})}}return t}function l(){return m("extent-keyword",t.extentKeywords,1)}function u(){if(m("position",/^at/,0)){let t=d();return t||i("Missing positioning value"),t}}function d(){let t={x:g(),y:g()};if(t.x||t.y)return{type:"position",value:t}}function c(e){let s=e(),r=[];if(s)for(r.push(s);v(t.comma);)(s=e())?r.push(s):i("One extra comma");return r}function p(){let e=m("hex",t.hexColor,1)||m("rgba",t.rgbaColor,1)||m("rgb",t.rgbColor,1)||m("literal",t.literalColor,0);return e||i("Expected color definition"),e.length=g(),e}function g(){return m("%",t.percentageValue,1)||m("position-keyword",t.positionKeywords,1)||f()}function f(){return m("px",t.pixelValue,1)||m("em",t.emValue,1)}function m(t,e,i){let s=v(e);if(s)return{type:t,value:s[i]}}function v(t){let i=/^[\n\r\t\s]+/.exec(e);i&&y(i[0].length);let s=t.exec(e);return s&&y(s[0].length),s}function y(t){e=e.substr(t)}return function(t){return e=t.toString(),function(){let t=c(s);return e.length>0&&i("Invalid input not EOF"),t}()}}();class n{static IsGradient(t){return!("string"==typeof t&&!t.includes("gradient"))}static IsGradientStr(t){return"string"==typeof t&&t.includes("gradient")}static Parse(t){if(n.IsGradientStr(t))try{let e=r(t)[0];if(e){if("linear"===e.type)return n.ParseLinear(e);if("radial"===e.type)return n.ParseRadial(e);if("conic"===e.type)return n.ParseConic(e)}}catch(t){}return t}static processColorStops(t){if(!t||0===t.length)return[];if(t.some(t=>t.length)){let e=t.map(t=>({color:t.value,offset:t.length?parseFloat(t.length.value)/100:-1}));e[0].offset<0&&(e[0].offset=0),e[e.length-1].offset<0&&(e[e.length-1].offset=1);for(let t=1;t<e.length-1;t++)if(e[t].offset<0){let i=t-1,s=t+1;for(;s<e.length&&e[s].offset<0;)s++;let r=e[i].offset,n=e[s].offset,a=s-i;for(let t=1;t<a;t++)e[i+t].offset=r+(n-r)*t/a;t=s-1}return e}return t.map((e,i)=>{let s=t.length>1?i/(t.length-1):0;return{color:e.value,offset:s}})}static ParseConic(t){let{orientation:e,colorStops:i=[]}=t,r=s.pi/2,a=parseFloat(e.value)/180*s.pi-r;return{gradient:"conical",x:.5,y:.5,startAngle:a,endAngle:a+s.f7,stops:n.processColorStops(i)}}static ParseRadial(t){let{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:n.processColorStops(e)}}static ParseLinear(t){let{orientation:e,colorStops:i=[]}=t,r=s.pi/2,a="angular"===e.type?parseFloat(e.value)/180*s.pi:0;for(;a<0;)a+=s.f7;for(;a>=s.f7;)a-=s.f7;let h=0,o=0,l=0,u=0;return a<r?(h=0,o=1,l=Math.sin(a),u=o-Math.cos(a)):a<s.pi?(h=0,o=0,l=Math.cos(a-r),u=Math.sin(a-r)):a<s.pi+r?(o=0,l=(h=1)-Math.sin(a-s.pi),u=Math.cos(a-s.pi)):(l=(h=1)-Math.cos(a-r-s.pi),u-=Math.sin(a-r-s.pi)),{gradient:"linear",x0:h,y0:o,x1:l,y1:u,stops:n.processColorStops(i)}}}},337886:function(t,e,i){i.d(e,{EM:()=>a,Qc:()=>s,yb:()=>n});let s=Symbol("ContributionProvider");class r{constructor(t,e){this.serviceIdentifier=t,this.container=e,h.setStore(this.serviceIdentifier,this)}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}refresh(){this.caches&&(this.caches.length=0,this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier)))}}function n(t,e){t(s).toDynamicValue(({container:t})=>new r(e,t)).inSingletonScope().whenTargetNamed(e)}function a(t,e){t(s).toDynamicValue(({container:t})=>new r(e,t)).whenTargetNamed(e)}class h{static getStore(t){return this.store.get(t)}static setStore(t,e){this.store.set(t,e)}static refreshAllContributions(){this.store.forEach(t=>{t.refresh()})}}h.store=new Map},922552:function(t,e,i){i.d(e,{r:()=>b});var s=i(104877),r=i(263401);class n{constructor(){this._curves=[],this.bounds=new r.FB}get curves(){return this._curves}getCurveLengths(){return this._curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}var a=i(976492),h=i(408830),o=i(513438),l=i(309762);function u(t,e,i,s){let r=function(t,e,i,s,r,n,a,o,u){let d=(0,l.M4)(a),c=Math.sin(d),p=Math.cos(d),g=p*(o-t)*.5+c*(u-e)*.5,f=p*(u-e)*.5-c*(o-t)*.5,m=g*g/((i=Math.abs(i))*i)+f*f/((s=Math.abs(s))*s);m>1&&(i*=m=Math.sqrt(m),s*=m);let v=p/i,y=c/i,x=-c/s,b=p/s,A=v*o+y*u,_=x*o+b*u,B=v*t+y*e,T=x*t+b*e,w=1/((B-A)*(B-A)+(T-_)*(T-_))-.25;w<0&&(w=0);let S=Math.sqrt(w);n===r&&(S=-S);let E=.5*(A+B)-S*(T-_),C=.5*(_+T)+S*(B-A),M=Math.atan2(_-C,A-E),P=Math.atan2(T-C,B-E)-M;P<0&&1===n?P+=h.BZ:P>0&&0===n&&(P-=h.BZ);let L=Math.ceil(Math.abs(P/(h.ou+.001))),O=[];for(let t=0;t<L;++t){let e=M+t*P/L,r=M+(t+1)*P/L;O[t]=[E,C,e,r,i,s,c,p]}return O}(s[5],s[6],s[0],s[1],s[3],s[4],s[2],e,i);for(let e=0;e<r.length;++e){let i=function(t){let e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],h=t[6],o=t[7],l=o*n,u=-h*a,d=h*n,c=o*a,p=Math.cos(s),g=Math.sin(s),f=Math.cos(r),m=Math.sin(r),v=.5*(r-s),y=Math.sin(.5*v),x=8/3*y*y/Math.sin(v),b=e+p-x*g,A=i+g+x*p,_=e+f,B=i+m,T=_+x*m,w=B-x*f;return[l*b+u*A,d*b+c*A,l*T+u*w,d*T+c*w,l*_+u*B,d*_+c*B]}(r[e]);t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}var d=i(801557),c=i(919498),p=i(266596),g=i(171161),f=i(452847),m=i(736868);class v extends m.H{constructor(t,e,i){super(),this.type=o.D5.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(!1!==this.defined)return(0,f.Pv)(this.p0,this.p1,this.p2,t);throw Error("defined\u4E3Afalse\u7684\u70B9\u4E0D\u80FDgetPointAt")}calcLength(){return this._validPoint()?(0,f.hN)(this.p0,this.p1,this.p2,0):60}calcProjLength(t){return t===o.Nm.ROW?(0,h.Wn)(this.p0.x-this.p2.x):t===o.Nm.COLUMN?(0,h.Wn)(this.p0.y-this.p2.y):0}getAngleAt(t){let e=(0,h.Fp)(t-.01,0),i=(0,h.VV)(t+.01,1),s=this.getPointAt(e),r=this.getPointAt(i);return(0,h.fv)(r.y-s.y,r.x-s.x)}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.quadraticCurveTo(this.p1.x*s+e,this.p1.y*r+i,this.p2.x*s+e,this.p2.y*r+i);else if(n>0){let[a]=function(t,e){let{p0:i,p1:s,p2:r}=t,n=(0,f.Pv)(i,s,r,e),a=c.HL.pointAtPP(i,s,e),h=c.HL.pointAtPP(s,r,e);return[new v(i,a,n),new v(n,h,r)]}(this,n);t.quadraticCurveTo(a.p1.x*s+e,a.p1.y*r+i,a.p2.x*s+e,a.p2.y*r+i)}}getYAt(t){throw Error("QuadraticBezierCurve\u6682\u4E0D\u652F\u6301getYAt")}includeX(t){throw Error("QuadraticBezierCurve\u6682\u4E0D\u652F\u6301includeX")}}class y{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){let i=this.addLinearCurve(t,e);this.path.addCurve(i),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new p.g(new c.E9(this._lastX,this._lastY),new c.E9(t,e))}quadraticCurveTo(t,e,i,s){let r=new v(new c.E9(this._lastX,this._lastY),new c.E9(t,e),new c.E9(i,s));this.path.addCurve(r),this._lastX=i,this._lastY=s}bezierCurveTo(t,e,i,s,r,n){let a=new g.A(new c.E9(this._lastX,this._lastY),new c.E9(t,e),new c.E9(i,s),new c.E9(r,n));this.path.addCurve(a),this._lastX=r,this._lastY=n}arcTo(t,e,i,s,r){throw Error("CurveContext\u4E0D\u652F\u6301\u8C03\u7528arcTo")}ellipse(t,e,i,s,r,n,a,h){throw Error("CurveContext\u4E0D\u652F\u6301\u8C03\u7528ellipse")}rect(t,e,i,s){throw Error("CurveContext\u4E0D\u652F\u6301\u8C03\u7528rect")}arc(t,e,i,s,r,n){throw Error("CurveContext\u4E0D\u652F\u6301\u8C03\u7528arc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}var x=i(21176);class b extends n{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new s.C(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([a.m.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([a.m.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,s){return this.commandList.push([a.m.Q,t,e,i,s]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,s),this}bezierCurveTo(t,e,i,s,r,n){return this.commandList.push([a.m.C,t,e,i,s,r,n]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,s,r,n),this}arcTo(t,e,i,s,r){return this.commandList.push([a.m.AT,t,e,i,s,r]),this._ctx&&this._ctx.arcTo(t,e,i,s,r),this}ellipse(t,e,i,s,r,n,h,o){return this.commandList.push([a.m.E,t,e,i,s,r,n,h,o]),this._ctx&&this._ctx.ellipse(t,e,i,s,r,n,h,o),this}rect(t,e,i,s){return this.commandList.push([a.m.R,t,e,i,s]),this._ctx&&this._ctx.rect(t,e,i,s),this}arc(t,e,i,s,r,n){return this.commandList.push([a.m.A,t,e,i,s,r,n]),this._ctx&&this._ctx.arc(t,e,i,s,r,n),this}closePath(){return this.commandList.push([a.m.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){let t=new y(this);(0,d.h)(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){let t=[];t[a.m.M]=t=>`M${t[1]} ${t[2]}`,t[a.m.L]=t=>`L${t[1]} ${t[2]}`,t[a.m.Q]=t=>`Q${t[1]} ${t[2]} ${t[3]} ${t[4]}`,t[a.m.C]=t=>`C${t[1]} ${t[2]} ${t[3]} ${t[4]} ${t[5]} ${t[6]}`,t[a.m.A]=t=>{let e=[],i=t[1],s=t[2],r=t[3],n=t[4];((t,e,i,s,r,n,a,h=!1)=>{let o=2*Math.PI,l=(e%o+o)%o,u,d=(i%o+o)%o;h?d>=l&&(d-=o):d<=l&&(d+=o);let c=Math.ceil(Math.abs(u=d-l)/(.5*Math.PI)),p=u/c;for(let e=0;e<c;e++){let i=l+p*e,o=l+p*(e+1),u=4/3*Math.tan(Math.abs(p)/4),d=Math.cos(i),c=Math.sin(i),g=Math.cos(o),f=Math.sin(o),m=d*n+s,v=c*a+r,y=g*n+s,x=f*a+r,b=h?-1:1,A=n*u*b,_=a*u*b;t.push(m-A*c,v+_*d,y+A*f,x-_*g,y,x)}})(e,n,t[5],i,s,r,r,t[6]);let a="";for(let t=0;t<e.length;t+=6)a+=`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`;return a},t[a.m.R]=t=>`M${t[1]} ${t[2]} h${t[3]} v${t[4]} H${t[1]}Z`,t[a.m.Z]=t=>"Z",this.toStringCbList=t}let t=this.toStringCbList,e="";return this.commandList.forEach(i=>{e+=t[i[0]](i)}),e}fromString(t,e,i,s,r){this.clear();let n=(0,a.U)(t);return this._runCommandStrList(n,e,i,s,r),this._updateBounds(),this}fromLine(t){let{points:e,curveType:i,clipRangeByDimension:s}=t.attribute;if(!e)return;let r=(0,x.X0)(e,i);"x"===s?this.direction=o.Nm.ROW:"y"===s?this.direction=o.Nm.COLUMN:"auto"===s&&(this.direction=r.direction),this._curves=r.curves}fromCustomPath2D(t,e,i,s,r){return this.clear(),this._runCommandList(t.commandList,e,i,s,r),this._updateBounds(),this}transform(t,e,i,s){let r=this.commandList;if(!this.transformCbList){let t=[];t[a.m.M]=this.moveToTransform,t[a.m.L]=this.lineToTransform,t[a.m.Q]=this.quadraticCurveToTransform,t[a.m.C]=this.bezierCurveToTransform,t[a.m.AT]=this.arcToTransform,t[a.m.E]=this.ellipseTransform,t[a.m.R]=this.rectTransform,t[a.m.A]=this.arcTransform,t[a.m.Z]=this.closePathTransform,this.transformCbList=t}r.forEach(r=>{this.transformCbList[r[0]](r,t,e,i,s)}),this._updateBounds()}moveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i}lineToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i}quadraticCurveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i}bezierCurveToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i,t[5]=t[5]*s+e,t[6]=t[6]*r+i}arcToTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s+e,t[4]=t[4]*r+i,t[5]=t[5]*(s+r)/2}ellipseTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s,t[4]=t[4]*r}rectTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*s,t[4]=t[4]*r}arcTransform(t,e,i,s,r){t[1]=t[1]*s+e,t[2]=t[2]*r+i,t[3]=t[3]*(s+r)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,s=1,r=1){let n,a,h,o,l,d=null,c=0,p=0,g=0,f=0;for(let m=0,v=t.length;m<v;++m){switch(n=t[m],1===s&&1===r||(n=function(t,e,i){let s=A[0]=t[0];if("a"===s||"A"===s)A[1]=e*t[1],A[2]=i*t[2],A[3]=t[3],A[4]=t[4],A[5]=t[5],A[6]=e*t[6],A[7]=i*t[7];else if("h"===s||"H"===s)A[1]=e*t[1];else if("v"===s||"V"===s)A[1]=i*t[1];else for(let s=1,r=t.length;s<r;++s)A[s]=(s%2==1?e:i)*t[s];return A}(n,s,r)),n[0]){case"l":c+=n[1],p+=n[2],this.lineTo(c+e,p+i);break;case"L":c=n[1],p=n[2],this.lineTo(c+e,p+i);break;case"h":c+=n[1],this.lineTo(c+e,p+i);break;case"H":c=n[1],this.lineTo(c+e,p+i);break;case"v":p+=n[1],this.lineTo(c+e,p+i);break;case"V":p=n[1],this.lineTo(c+e,p+i);break;case"m":c+=n[1],p+=n[2],this.moveTo(c+e,p+i);break;case"M":c=n[1],p=n[2],this.moveTo(c+e,p+i);break;case"c":a=c+n[5],h=p+n[6],g=c+n[3],f=p+n[4],this.bezierCurveTo(c+n[1]+e,p+n[2]+i,g+e,f+i,a+e,h+i),c=a,p=h;break;case"C":c=n[5],p=n[6],g=n[3],f=n[4],this.bezierCurveTo(n[1]+e,n[2]+i,g+e,f+i,c+e,p+i);break;case"s":a=c+n[3],h=p+n[4],null===d[0].match(/[CcSs]/)?(g=c,f=p):(g=2*c-g,f=2*p-f),o=c+n[1],l=p+n[2],this.bezierCurveTo(g+e,f+i,o+e,l+i,a+e,h+i),g=o,f=l,c=a,p=h;break;case"S":a=n[3],h=n[4],null===d[0].match(/[CcSs]/)?(g=c,f=p):(g=2*c-g,f=2*p-f),o=n[1],l=n[2],this.bezierCurveTo(g+e,f+i,o+e,l+i,a+e,h+i),g=o,f=l,c=a,p=h;break;case"q":a=c+n[3],h=p+n[4],g=c+n[1],f=p+n[2],this.quadraticCurveTo(g+e,f+i,a+e,h+i),c=a,p=h;break;case"Q":a=n[3],h=n[4],this.quadraticCurveTo(n[1]+e,n[2]+i,a+e,h+i),c=a,p=h,g=n[1],f=n[2];break;case"t":a=c+n[1],h=p+n[2],null===d[0].match(/[QqTt]/)?(g=c,f=p):"t"===d[0]?(g=2*c-o,f=2*p-l):"q"===d[0]&&(g=2*c-g,f=2*p-f),o=g,l=f,this.quadraticCurveTo(g+e,f+i,a+e,h+i),c=a,p=h,g=c+n[1],f=p+n[2];break;case"T":a=n[1],h=n[2],g=2*c-g,f=2*p-f,this.quadraticCurveTo(g+e,f+i,a+e,h+i),c=a,p=h;break;case"a":u(this,c+e,p+i,[n[1],n[2],n[3],n[4],n[5],n[6]+c+e,n[7]+p+i]),c+=n[6],p+=n[7];break;case"A":u(this,c+e,p+i,[n[1],n[2],n[3],n[4],n[5],n[6]+e,n[7]+i]),c=n[6],p=n[7];break;case"z":case"Z":this.closePath()}d=n}}_runCommandList(t,e=0,i=0,s=1,r=1){if(0!==e||0!==i||1!==s||1!==r)for(let n=0,h=t.length;n<h;++n){let h=t[n].slice();switch(h[0]){case a.m.L:this.lineToTransform(h,e,i,s,r);break;case a.m.M:this.moveToTransform(h,e,i,s,r);break;case a.m.C:this.bezierCurveToTransform(h,e,i,s,r);break;case a.m.Q:this.quadraticCurveToTransform(h,e,i,s,r);break;case a.m.A:this.arcToTransform(h,e,i,s,r);break;case a.m.E:this.ellipseTransform(h,e,i,s,r);break;case a.m.R:this.rectTransform(h,e,i,s,r);break;case a.m.AT:this.arcToTransform(h,e,i,s,r);break;case a.m.Z:this.closePath()}}else this.commandList=t.map(t=>t.slice())}_updateBounds(){this.bounds.clear(),(0,d.h)(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===o.Nm.COLUMN){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,h.Wn)(t.p0.y-e.p1.y)}if(this.direction===o.Nm.ROW){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,h.Wn)(t.p0.x-e.p1.x)}return this._curves.reduce((t,e)=>t+e.getLength(),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){let i=this.curves[e];if(i.includeX(t))return i.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let s=0;s<this._curves.length;s++){let r=(e=this._curves[s]).getLength(this.direction);if(i+r>=t)break;i+=r}let s=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(s),angle:e.getAngleAt(s)}}drawWithClipRange(t,e,i,s,r){this.tryBuildCurves();let n=this.getLength()*r,a=0;for(let r=0;r<this._curves.length;r++){let h=this._curves[r],o=h.getLength(this.direction);if(!(a+o<=n)){let r=1-(a+o-n)/o;h.draw(t,i,s,e,e,r);break}h.draw(t,i,s,e,e,1),a+=o}}}let A=["l",0,0,0,0,0,0,0]},228708:function(t,e,i){i.d(e,{H:()=>r});var s=i(475133);function r(t,e,i){let r={};for(let i in e)i in t&&(0,s.X)(t[i],e[i])||(r[i]=e[i]);if(i){for(let s in t)if(!(s in e)){let t=i(s);void 0!==t&&(r[s]=t)}}return r}},513438:function(t,e,i){var s,r,n,a,h,o,l,u,d,c,p,g;i.d(e,{D5:()=>h,Gk:()=>n,Gz:()=>s,LZ:()=>r,Nm:()=>a,Oh:()=>o}),(l=s||(s={}))[l.NONE=0]="NONE",l[l.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",l[l.UPDATE_SHAPE=2]="UPDATE_SHAPE",l[l.CLEAR_SHAPE=253]="CLEAR_SHAPE",l[l.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",l[l.INIT=179]="INIT",l[l.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",l[l.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",l[l.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",l[l.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",l[l.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",l[l.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",l[l.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",l[l.CLEAR_LAYOUT=127]="CLEAR_LAYOUT",(u=r||(r={}))[u.GLOBAL=1]="GLOBAL",u[u.LOCAL=16]="LOCAL",u[u.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",u[u.LOCAL_ACCURATE=48]="LOCAL_ACCURATE",(d=n||(n={}))[d.INIT=0]="INIT",d[d.DEFAULT=1]="DEFAULT",d[d.STATE=2]="STATE",d[d.ANIMATE_BIND=10]="ANIMATE_BIND",d[d.ANIMATE_PLAY=11]="ANIMATE_PLAY",d[d.ANIMATE_START=12]="ANIMATE_START",d[d.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",d[d.ANIMATE_END=14]="ANIMATE_END",d[d.TRANSLATE=20]="TRANSLATE",d[d.TRANSLATE_TO=21]="TRANSLATE_TO",d[d.SCALE=22]="SCALE",d[d.SCALE_TO=23]="SCALE_TO",d[d.ROTATE=24]="ROTATE",d[d.ROTATE_TO=25]="ROTATE_TO",(c=a||(a={}))[c.ROW=1]="ROW",c[c.COLUMN=2]="COLUMN",(p=h||(h={}))[p.CubicBezierCurve=0]="CubicBezierCurve",p[p.QuadraticBezierCurve=1]="QuadraticBezierCurve",p[p.ArcCurve=2]="ArcCurve",p[p.LineCurve=3]="LineCurve",p[p.EllipseCurve=4]="EllipseCurve",p[p.MoveCurve=5]="MoveCurve",(g=o||(o={}))[g.beforeFillStroke=0]="beforeFillStroke",g[g.afterFillStroke=1]="afterFillStroke"},846822:function(t,e,i){i.d(e,{w:()=>s});class s{constructor(){this._listenerMap=new Map,this._eventListenerTransformer=t=>t}setEventListenerTransformer(t){this._eventListenerTransformer=t||(t=>t)}addEventListener(t,e,i){if(!e)return;let s=t=>{let i=this._eventListenerTransformer(t);"function"==typeof e?e(i):e.handleEvent&&e.handleEvent(i)};this._listenerMap.has(t)||this._listenerMap.set(t,new Map),this._listenerMap.get(t).set(e,s),this._nativeAddEventListener(t,s,i)}removeEventListener(t,e,i){var s;if(!e)return;let r=null==(s=this._listenerMap.get(t))?void 0:s.get(e);r&&(this._nativeRemoveEventListener(t,r,i),this._listenerMap.get(t).delete(e),0===this._listenerMap.get(t).size&&this._listenerMap.delete(t))}dispatchEvent(t){return this._nativeDispatchEvent(t)}clearAllEventListeners(){this._listenerMap.forEach((t,e)=>{t.forEach((t,i)=>{this._nativeRemoveEventListener(e,t,void 0)})}),this._listenerMap.clear()}_nativeAddEventListener(t,e,i){throw Error("_nativeAddEventListener must be implemented by derived classes")}_nativeRemoveEventListener(t,e,i){throw Error("_nativeRemoveEventListener must be implemented by derived classes")}_nativeDispatchEvent(t){throw Error("_nativeDispatchEvent must be implemented by derived classes")}}},496270:function(t,e,i){i.d(e,{R:()=>s});class s{static GenAutoIncrementId(){return s.auto_increment_id++}}s.auto_increment_id=0},362199:function(t,e,i){i.d(e,{f:()=>r});var s=i(963479);let r=(0,i(761500).v)(s.B8)},761500:function(t,e,i){i.d(e,{f:()=>a,v:()=>h});var s=i(683224),r=i(963479),n=i(544724);function a(t){return(e,i,s)=>{var a,h;let o,l;a=r.LD,h=s.toString(),o={},n.Z.hasOwnMetadata(a,e)&&(o=n.Z.getMetadata(a,e)),void 0===(l=o[h])&&(l=[]),l.push(t),o[h]=l,n.Z.defineMetadata(a,o,e)}}function h(t){return e=>(i,r,n)=>a(new s.S(t,e))(i,r,n)}},669745:function(t,e,i){i.d(e,{b:()=>n});var s=i(963479),r=i(544724);function n(){return function(t){return r.Z.defineMetadata(s.FL,null,t),t}}},240221:function(t,e,i){i.d(e,{n:()=>r});var s=i(963479);let r=(0,i(761500).v)(s.Lc)},18163:function(t,e,i){i.d(e,{t:()=>a});var s=i(683224),r=i(963479),n=i(761500);function a(t){return(0,n.f)(new s.S(r.vO,t))}},736264:function(t,e,i){i.d(e,{n:()=>r});var s=i(496270);class r{constructor(t){this.id=s.R.GenAutoIncrementId(),this.registry=t}}},683224:function(t,e,i){i.d(e,{S:()=>r});var s=i(963479);class r{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===s.vO?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},963479:function(t,e,i){i.d(e,{B8:()=>r,FL:()=>h,LD:()=>a,Lc:()=>n,vO:()=>s});let s="named",r="inject",n="multi_inject",a="inversify:tagged",h="inversify:paramtypes"},362055:function(t,e,i){function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[4],a=e[5],h=e[6],o=e[7],l=e[8],u=e[9],d=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*r+l*s,t[5]=a*r+u*s,t[6]=h*r+d*s,t[7]=o*r+c*s,t[8]=l*r-n*s,t[9]=u*r-a*s,t[10]=d*r-h*s,t[11]=c*r-o*s,t}function n(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],h=e[2],o=e[3],l=e[8],u=e[9],d=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-l*s,t[1]=a*r-u*s,t[2]=h*r-d*s,t[3]=o*r-c*s,t[8]=n*s+l*r,t[9]=a*s+u*r,t[10]=h*s+d*r,t[11]=o*s+c*r,t}function a(t,e,i){let s=Math.sin(i),r=Math.cos(i),n=e[0],a=e[1],h=e[2],o=e[3],l=e[4],u=e[5],d=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r+l*s,t[1]=a*r+u*s,t[2]=h*r+d*s,t[3]=o*r+c*s,t[4]=l*r-n*s,t[5]=u*r-a*s,t[6]=d*r-h*s,t[7]=c*r-o*s,t}function h(t,e,i){let s,r,n,a,h,o,l,u,d,c,p,g,f=i[0],m=i[1],v=i[2];return e===t?(t[12]=e[0]*f+e[4]*m+e[8]*v+e[12],t[13]=e[1]*f+e[5]*m+e[9]*v+e[13],t[14]=e[2]*f+e[6]*m+e[10]*v+e[14],t[15]=e[3]*f+e[7]*m+e[11]*v+e[15]):(s=e[0],r=e[1],n=e[2],a=e[3],h=e[4],o=e[5],l=e[6],u=e[7],d=e[8],c=e[9],p=e[10],g=e[11],t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=h,t[5]=o,t[6]=l,t[7]=u,t[8]=d,t[9]=c,t[10]=p,t[11]=g,t[12]=s*f+h*m+d*v+e[12],t[13]=r*f+o*m+c*v+e[13],t[14]=n*f+l*m+p*v+e[14],t[15]=a*f+u*m+g*v+e[15]),t}function o(t,e){t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=0,t[4]=e.c,t[5]=e.d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e.e,t[13]=e.f,t[14]=0,t[15]=1}function l(t,e,i){let s=i[0],r=i[1],n=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,i){let s=e[0],r=e[1],n=e[2],a=e[3],h=e[4],o=e[5],l=e[6],u=e[7],d=e[8],c=e[9],p=e[10],g=e[11],f=e[12],m=e[13],v=e[14],y=e[15],x=i[0],b=i[1],A=i[2],_=i[3];return t[0]=x*s+b*h+A*d+_*f,t[1]=x*r+b*o+A*c+_*m,t[2]=x*n+b*l+A*p+_*v,t[3]=x*a+b*u+A*g+_*y,x=i[4],b=i[5],A=i[6],_=i[7],t[4]=x*s+b*h+A*d+_*f,t[5]=x*r+b*o+A*c+_*m,t[6]=x*n+b*l+A*p+_*v,t[7]=x*a+b*u+A*g+_*y,x=i[8],b=i[9],A=i[10],_=i[11],t[8]=x*s+b*h+A*d+_*f,t[9]=x*r+b*o+A*c+_*m,t[10]=x*n+b*l+A*p+_*v,t[11]=x*a+b*u+A*g+_*y,x=i[12],b=i[13],A=i[14],_=i[15],t[12]=x*s+b*h+A*d+_*f,t[13]=x*r+b*o+A*c+_*m,t[14]=x*n+b*l+A*p+_*v,t[15]=x*a+b*u+A*g+_*y,t}function d(t,e,i){let s=e[0],r=e[1],n=e[2],a=i[3]*s+i[7]*r+i[11]*n+i[15];return a=a||1,t[0]=(i[0]*s+i[4]*r+i[8]*n+i[12])/a,t[1]=(i[1]*s+i[5]*r+i[9]*n+i[13])/a,t[2]=(i[2]*s+i[6]*r+i[10]*n+i[14])/a,t}i.d(e,{B$:()=>o,G9:()=>u,Iu:()=>h,TL:()=>s,fF:()=>d,jI:()=>a,lM:()=>r,mN:()=>l,uD:()=>n})},90853:function(t,e,i){i.d(e,{JO:()=>l,TU:()=>u,mg:()=>d,pP:()=>h,xL:()=>o});var s=i(922552);function r(t,e,i,s,r,n){let a=(e-t)*r+t,h=(i-e)*r+e,o=(s-i)*r+i,l=(h-a)*r+a,u=(o-h)*r+h,d=(u-l)*r+l;n[0]=t,n[1]=a,n[2]=l,n[3]=d,n[4]=d,n[5]=u,n[6]=o,n[7]=s}function n(t,e){let i=t||e,s=i.length,r=i[s-2],n=i[s-1],a=[];for(let t=0;t<e.length;t+=2)a[t]=r,a[t+1]=n;return a}function a(t){let e=0,i=0,s=0,r=t.length;for(let n=0,a=r-2;n<r;a=n,n+=2){let r=t[a],h=t[a+1],o=t[n],l=t[n+1],u=r*l-o*h;e+=u,i+=(r+o)*u,s+=(h+l)*u}return 0===e?[t[0]||0,t[1]||0,0]:[i/e/3,s/e/3,e]}function h(t,e,i,s){let r,n=[];for(let h=0;h<t.length;h++){let o=t[h],l=e[h],u=a(o),d=a(l);null==r&&(r=u[2]<0!=d[2]<0);let c=[],p=[],g=0,f=1/0,m=[],v=o.length;r&&(o=function(t){let e=[],i=t.length;for(let s=0;s<i;s+=2)e[s]=t[i-s-2],e[s+1]=t[i-s-1];return e}(o));let y=6*function(t,e,i,s){let r=(t.length-2)/6,n=1/0,a=0,h=t.length,o=h-2;for(let l=0;l<r;l++){let r=6*l,u=0;for(let n=0;n<h;n+=2){let a=0===n?r:(r+n-2)%o+2,h=t[a]-i[0],l=t[a+1]-i[1],d=e[n]-s[0]-h,c=e[n+1]-s[1]-l;u+=d*d+c*c}u<n&&(n=u,a=l)}return a}(o,l,u,d),x=v-2;for(let t=0;t<x;t+=2){let e=(y+t)%x+2;c[t+2]=o[e]-u[0],c[t+3]=o[e+1]-u[1]}if(c[0]=o[y]-u[0],c[1]=o[y+1]-u[1],i>0){let t=s/i;for(let e=-s/2;e<=s/2;e+=t){let t=Math.sin(e),i=Math.cos(e),s=0;for(let e=0;e<o.length;e+=2){let r=c[e],n=c[e+1],a=l[e]-d[0],h=l[e+1]-d[1],o=a*i-h*t,u=a*t+h*i;m[e]=o,m[e+1]=u;let p=o-r,g=u-n;s+=p*p+g*g}if(s<f){f=s,g=e;for(let t=0;t<m.length;t++)p[t]=m[t]}}}else for(let t=0;t<v;t+=2)p[t]=l[t]-d[0],p[t+1]=l[t+1]-d[1];n.push({from:c,to:p,fromCp:u,toCp:d,rotation:-g})}return n}function o(t,e){let i,s,a=[],h=[];for(let o=0;o<Math.max(t.length,e.length);o++){let l,u,d=t[o],c=e[o];d?c?([l,u]=function(t,e){let i=t.length,s=e.length;if(i===s)return[t,e];let n=[],a=[],h=i<s?t:e,o=Math.min(i,s),l=Math.abs(s-i)/6,u=Math.ceil(l/((o-2)/6)),d=[h[0],h[1]],c=l;for(let t=2;t<o;t+=6){let e=h[t-2],i=h[t-1],s=h[t],o=h[t+1],l=h[t+2],p=h[t+3],g=h[t+4],f=h[t+5];if(c<=0){d.push(s,o,l,p,g,f);continue}let m=Math.min(c,u)+1;for(let t=1;t<=m;t++){let h=t/m;r(e,s,l,g,h,n),r(i,o,p,f,h,a),e=n[3],i=a[3],d.push(n[1],a[1],n[2],a[2],e,i),s=n[5],o=a[5],l=n[6],p=a[6]}c-=m-1}return h===t?[d,e]:[t,d]}(d,c),i=l,s=u):(u=n(s,d),l=d):(l=n(i,c),u=c),a.push(l),h.push(u)}return[a,h]}function l(t){let e=new s.r,i=t.toString();if(!i)return[];e.fromString(i);let r=e.tryBuildCurves();if(!r||0===r.length)return[];let n=[],a=null;a=[];let h=0,o=0,l=0,u=0,d=!0;for(let t=0;t<r.length;t++){let e=r[t];if(d&&(h=e.p0.x,o=e.p0.y,l=h,u=o,a=[h,o],n.push(a),d=!1),e.p1&&e.p2&&e.p3)a.push(e.p1.x,e.p1.y,e.p2.x,e.p2.y,e.p3.x,e.p3.y),l=e.p3.x,u=e.p3.y;else if(e.p1&&e.p2){let t=e.p1.x,i=e.p1.y,s=e.p2.x,r=e.p2.y;a.push(l+2/3*(t-l),u+2/3*(i-u),s+2/3*(t-s),r+2/3*(i-r),s,r),l=s,u=r}else if(e.p1){let t=e.p1.x,i=e.p1.y;1e-10>Math.abs(l-t)&&1e-10>Math.abs(u-i)||a.push(l,u,t,i,t,i),l=t,u=i}if(r.length,t<r.length-1){let e=r[t+1];(Math.abs(l-e.p0.x)>1e-10||Math.abs(u-e.p0.y)>1e-10)&&(d=!0)}}let c=n.filter(t=>t.length>2);return 1===c.length?[c[0]]:c}function u(t,e){for(let i=0;i<t.length;i++){let s=t[i];for(let t=0;t<s.length;t+=2){let i=s[t],r=s[t+1],n={x:i,y:r};e.transformPoint({x:i,y:r},n),s[t]=n.x,s[t+1]=n.y}}}function d(t){let e=new s.r;for(let i=0;i<t.length;i++){let s=t[i];if(s.length>2){e.moveTo(s[0],s[1]);for(let t=2;t<s.length;t+=6)e.bezierCurveTo(s[t],s[t+1],s[t+2],s[t+3],s[t+4],s[t+5])}}return e}},976492:function(t,e,i){let s,r,n,a,h;i.d(e,{U:()=>d,m:()=>u});let o=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},u={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};function d(t){let e,i;if(!t)return[];let u=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===u)return[];let d=[];for(let t=0,c=u.length;t<c;t++)if(r=(s=u[t]).slice(1),e=[n=s[0]],null!==(i=r.match(o))){for(let t=0,s=i.length;t<s;t++)Number.isNaN(a=parseFloat(i[t]))||e.push(a);if(h=l[n],e.length-1>h){let t,i=n;for(let s=1,r=e.length;s<r;s+=h){t=[i];for(let i=s,r=s+h;i<r;i++)t.push(e[i]);d.push(t),"m"===i?i="l":"M"===i&&(i="L")}}else d.push(e)}else d.push(e);return d}},967955:function(t,e,i){i.d(e,{A:()=>n});var s=i(894442);let r=0;class n{constructor(){this.nextAnimationFrameCbs=new Map,this._rafHandle=null,this.runAnimationFrame=t=>{this._rafHandle=null;let e=this.nextAnimationFrameCbs;this.nextAnimationFrameCbs=new Map,e.forEach(e=>e(t))},this.tryRunAnimationFrameNextFrame=()=>{null===this._rafHandle&&0!==this.nextAnimationFrameCbs.size&&(this._rafHandle=s.w.global.getRequestAnimationFrame()(this.runAnimationFrame))}}addAnimationFrameCb(t){return this.nextAnimationFrameCbs.set(++r,t),this.tryRunAnimationFrameNextFrame(),r}removeAnimationFrameCb(t){return!!this.nextAnimationFrameCbs.has(t)&&(this.nextAnimationFrameCbs.delete(t),!0)}}},298303:function(t,e,i){function s(t,e,i,s){if(e&&e.length){t.moveTo(e[0].x+i,e[0].y+s);for(let r=1;r<e.length;r++)t.lineTo(e[r].x+i,e[r].y+s)}}function r(t,e,i,h,o,l=!0){var u;if(e.length<3)return void s(t,e,i,h);let d=0,c=e.length-1;l||(d+=1,c-=1,t.moveTo(e[0].x+i,e[0].y+h));for(let s=d;s<=c;s++){let r=e[0===s?c:(s-1)%e.length],l=e[s%e.length],d=e[(s+1)%e.length],p=l.x-r.x,g=l.y-r.y,f=l.x-d.x,m=l.y-d.y,v=Math.abs(Math.tan((Math.atan2(g,p)-Math.atan2(m,f))/2)),y=Array.isArray(o)?null!=(u=o[s%e.length])?u:0:o,x=y/v,b=n(p,g),A=n(f,m),_=Math.min(b,A);x>_&&(x=_,y=_*v);let B=a(l,x,b,p,g),T=a(l,x,A,f,m),w=2*l.x-B.x-T.x,S=2*l.y-B.y-T.y,E=n(w,S),C=a(l,n(x,y),E,w,S),M=Math.atan2(B.y-C.y,B.x-C.x),P=Math.atan2(T.y-C.y,T.x-C.x),L=P-M;L<0&&(M=P,L=-L),L>Math.PI&&(L-=Math.PI),0===s?t.moveTo(B.x+i,B.y+h):t.lineTo(B.x+i,B.y+h),L&&t.arcTo(l.x+i,l.y+h,T.x+i,T.y+h,y),t.lineTo(T.x+i,T.y+h)}l||t.lineTo(e[c+1].x+i,e[c+1].y+h)}function n(t,e){return Math.sqrt(t*t+e*e)}function a(t,e,i,s,r){let n=e/i;return{x:t.x-s*n,y:t.y-r*n}}i.d(e,{i:()=>s,k:()=>r})},274411:function(t,e,i){i.d(e,{p:()=>r});var s=i(454326);let r=t=>{if(!t)return{x:0,y:0,width:0,height:0};let e=(0,s.Z)(t.width)?t.x1-t.x:t.width,i=(0,s.Z)(t.height)?t.y1-t.y:t.height,r=0,n=0;return e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),i<0?(n=i,i=-i):Number.isNaN(i)&&(i=0),{x:r,y:n,width:e,height:i}}},873268:function(t,e,i){i.d(e,{y:()=>o});var s=i(408830),r=i(513438),n=i(171161),a=i(266596),h=i(615222);function o(t,e,i,h){var o;let{top:u,bottom:d}=e;if(u.curves.length!==d.curves.length)return;if(i>=1){let e=[],i=[],s=!0;for(let r=0,n=u.curves.length;r<n;r++){let a=u.curves[r];s!==a.defined?(s?(l(t,e,i,h),e.length=0,i.length=0):(e.push(a),i.push(d.curves[n-r-1])),s=!s):s&&(e.push(a),i.push(d.curves[n-r-1]))}return void l(t,e,i,h)}if(i<=0)return;let{direction:c}=h||{},{curves:p}=u,g=null!=(o=p[p.length-1].p3)?o:p[p.length-1].p1,f=(0,s.Wn)(g.x-p[0].p0.x),m=(0,s.Wn)(g.y-p[0].p0.y);c=null!=c?c:f>m?r.Nm.ROW:r.Nm.COLUMN,Number.isFinite(f)||(c=r.Nm.COLUMN),Number.isFinite(m)||(c=r.Nm.ROW);let v=i*(c===r.Nm.ROW?f:m),y=0,x=!0,b=[],A=[];for(let e=0,i=u.curves.length;e<i;e++){let s=u.curves[e],r=s.getLength(c),o=(v-y)/r;if(o<0)break;y+=r;let p=null,g=null;x!==s.defined?(x?(l(t,b,A,h),b.length=0,A.length=0):(p=s,g=d.curves[i-e-1]),x=!x):x&&(p=s,g=d.curves[i-e-1]),p&&g&&(o<1&&(p=p.p2&&p.p3?(0,n.m)(p,o)[0]:(0,a.d)(p,o)[0],g=g.p2&&g.p3?(0,n.m)(g,1-o)[1]:(0,a.d)(g,1-o)[1]),p.defined=x,g.defined=x,b.push(p),A.push(g)),p=null,g=null}l(t,b,A,h)}function l(t,e,i,s){let{offsetX:r=0,offsetY:n=0,offsetZ:a=0}=s||{},o=!0;e.forEach(e=>{e.defined?(o&&t.moveTo(e.p0.x+r,e.p0.y+n,a),(0,h.w)(t,e,1,s),o=!1):o=!0}),o=!0;for(let e=i.length-1;e>=0;e--){let l=i[e];l.defined?(o&&t.lineTo(l.p0.x+r,l.p0.y+n,a),(0,h.w)(t,l,1,s),o=!1):o=!0}t.closePath()}},801557:function(t,e,i){i.d(e,{h:()=>r});let s=[(t,e,i,s,r,n,a)=>e.arc(t[1]*r+i,t[2]*n+s,t[3]*(r+n)/2,t[4],t[5],t[6],a),(t,e,i,s,r,n,a)=>e.arcTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,t[5]*(r+n)/2,a),(t,e,i,s,r,n,a)=>e.bezierCurveTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,t[5]*r+i,t[6]*n+s,a),(t,e,i,s)=>e.closePath(),(t,e,i,s,r,n)=>e.ellipse(t[1]*r+i,t[2]*n+s,t[3]*r,t[4]*n,t[5],t[6],t[7],t[8]),(t,e,i,s,r,n,a)=>e.lineTo(t[1]*r+i,t[2]*n+s,a),(t,e,i,s,r,n,a)=>e.moveTo(t[1]*r+i,t[2]*n+s,a),(t,e,i,s,r,n,a)=>e.quadraticCurveTo(t[1]*r+i,t[2]*n+s,t[3]*r+i,t[4]*n+s,a),(t,e,i,s,r,n,a)=>e.rect(t[1]*r+i,t[2]*n+s,t[3]*r,t[4]*n,a)];function r(t,e,i=0,n=0,a=1,h=1,o){for(let r=0;r<t.length;r++){let l=t[r];s[l[0]](l,e,i,n,a,h,o)}}},152409:function(t,e,i){i.d(e,{V3:()=>o,fW:()=>h,hJ:()=>l});var s=i(408830),r=i(513438),n=i(615222);function a(t,e,i,s,r,n,a){var h;let o=e.p0,l=s;if(i&&i.originP1===i.originP2&&(o=i.p0),e.defined)s||(t.lineTo(o.x+r,o.y+n,a),l=!s);else{let u,{originP1:d,originP2:c}=e;if(d&&!1!==d.defined&&!i?u=o:d&&!1!==c.defined&&(u=null!=(h=e.p3)?h:e.p1),s){l=!s;let i=u?u.x:e.p0.x,h=u?u.y:e.p0.y;t.moveTo(i+r,h+n,a)}else u&&(l=!s,t.lineTo(u.x+r,u.y+n,a))}return l}function h(t,e,i,h,o){let l,{offsetX:u=0,offsetY:d=0,offsetZ:c=0,mode:p="none",drawConnect:g=!1}=o||{};if(g&&"none"===p||!e)return;let f=!0,{curves:m}=e;if(i>=1){if(g){let e,i=!0;m.forEach((s,r)=>{s.originP1!==s.originP2&&(i=a(t,s,e,i,u,d,c)),e=s})}else m.forEach(e=>{e.defined?(f&&t.moveTo(e.p0.x+u,e.p0.y+d,c),(0,n.w)(t,e,1,o),f=!1):f=!0});return}if(i<=0)return;"x"===h?l=r.Nm.ROW:"y"===h?l=r.Nm.COLUMN:"auto"===h&&(l=e.direction);let v=i*e.tryUpdateLength(l),y=0,x=!0,b=null;for(let e=0,i=m.length;e<i;e++){let i=m[e],r=i.getLength(l),h=(v-y)/r;if(y+=r,h<0)break;if(g){if(i.originP1===i.originP2){b=i;continue}x=a(t,i,b,x,u,d,c),b=i}else{if(!i.defined){f=!0;continue}f&&t.moveTo(i.p0.x+u,i.p0.y+d,c),(0,n.w)(t,i,(0,s.VV)(h,1),o),f=!1}}}function o(t,e,i,s){let{offsetX:r=0,offsetY:n=0}=s||{},a=e?e.points[e.points.length-1]:i.points[0];t.moveTo(a.x+r,a.y+n),i.points.forEach(e=>{!1!==e.defined?t.lineTo(e.x+r,e.y+n):t.moveTo(e.x+r,e.y+n)})}function l(t,e,i,s){let{offsetX:r=0,offsetY:n=0}=s||{},{points:a}=i,h=[],o=0;for(let t=0;t<a.length;t++)!1===a[t].defined&&(o+1!==t&&h.slice(o,t),o=t);h.push(a),h.forEach((i,s)=>{var a,h,o,l;let u=e&&0===s?e.points[e.points.length-1]:i[0];t.moveTo(u.x+r,u.y+n),i.forEach(e=>{!1!==e.defined?t.lineTo(e.x+r,e.y+n):t.moveTo(e.x+r,e.y+n)});for(let e=i.length-1;e>=0;e--){let s=i[e];t.lineTo(null!=(a=s.x1)?a:s.x,null!=(h=s.y1)?h:s.y)}t.lineTo(null!=(o=u.x1)?o:u.x,null!=(l=u.y1)?l:u.y),t.closePath()})}},615222:function(t,e,i){i.d(e,{w:()=>r});var s=i(171161);function r(t,e,i,r){if(!e.p1)return;let{offsetX:n=0,offsetY:a=0,offsetZ:h=0}=r||{};if(1===i)e.p2&&e.p3?t.bezierCurveTo(n+e.p1.x,a+e.p1.y,n+e.p2.x,a+e.p2.y,n+e.p3.x,a+e.p3.y,h):t.lineTo(n+e.p1.x,a+e.p1.y,h);else if(e.p2&&e.p3){let[r]=(0,s.m)(e,i);t.bezierCurveTo(n+r.p1.x,a+r.p1.y,n+r.p2.x,a+r.p2.y,n+r.p3.x,a+r.p3.y,h)}else{let s=e.getPointAt(i);t.lineTo(n+s.x,a+s.y,h)}}},736868:function(t,e,i){i.d(e,{H:()=>s});class s{getLength(t){return null!=t?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}},171161:function(t,e,i){i.d(e,{A:()=>l,m:()=>o});var s=i(919498),r=i(408830),n=i(736868),a=i(513438),h=i(452847);function o(t,e){let{p0:i,p1:r,p2:n,p3:a}=t,o=(0,h.P)(i,r,n,a,e),u=s.HL.pointAtPP(i,r,e),d=s.HL.pointAtPP(r,n,e),c=s.HL.pointAtPP(n,a,e),p=s.HL.pointAtPP(u,d,e),g=s.HL.pointAtPP(d,c,e);return[new l(i,u,p,o),new l(o,g,c,a)]}class l extends n.H{constructor(t,e,i,s){super(),this.type=a.D5.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=s}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(!1!==this.defined)return(0,h.P)(this.p0,this.p1,this.p2,this.p3,t);throw Error("defined\u4E3Afalse\u7684\u70B9\u4E0D\u80FDgetPointAt")}calcLength(){return this._validPoint()?(0,h.Ci)(this.p0,this.p1,this.p2,this.p3,0):60}calcProjLength(t){return t===a.Nm.ROW?(0,r.Wn)(this.p0.x-this.p3.x):t===a.Nm.COLUMN?(0,r.Wn)(this.p0.y-this.p3.y):0}getAngleAt(t){let e=(0,r.Fp)(t-.01,0),i=(0,r.VV)(t+.01,1),s=this.getPointAt(e),n=this.getPointAt(i);return(0,r.fv)(n.y-s.y,n.x-s.x)}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.bezierCurveTo(this.p1.x*s+e,this.p1.y*r+i,this.p2.x*s+e,this.p2.y*r+i,this.p3.x*s+e,this.p3.y*r+i);else if(n>0){let[a]=o(this,n);t.bezierCurveTo(a.p1.x*s+e,a.p1.y*r+i,a.p2.x*s+e,a.p2.y*r+i,a.p3.x*s+e,a.p3.y*r+i)}}includeX(t){let e=(0,r.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(0,r.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=i}getYAt(t){let e=(0,r.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(t-e)/((0,r.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(i).y}}},266596:function(t,e,i){i.d(e,{d:()=>h,g:()=>o});var s=i(919498),r=i(408830),n=i(736868),a=i(513438);function h(t,e){let{p0:i,p1:r}=t,n=s.HL.pointAtPP(i,r,e);return[new o(i,n),new o(n,r)]}class o extends n.H{constructor(t,e){super(),this.type=a.D5.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(!1!==this.defined)return s.HL.pointAtPP(this.p0,this.p1,t);throw Error("defined\u4E3Afalse\u7684\u70B9\u4E0D\u80FDgetPointAt")}getAngleAt(t){return null==this.angle&&(this.angle=(0,r.fv)(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?s.HL.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===a.Nm.ROW?(0,r.Wn)(this.p0.x-this.p1.x):t===a.Nm.COLUMN?(0,r.Wn)(this.p0.y-this.p1.y):0}draw(t,e,i,s,r,n){if(t.moveTo(this.p0.x*s+e,this.p0.y*r+i),n>=1)t.lineTo(this.p1.x*s+e,this.p1.y*r+i);else if(n>0){let a=this.getPointAt(n);t.lineTo(a.x*s+e,a.y*r+i)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,i=this.p1;this.p0.x>this.p1.x&&(e=this.p1,i=this.p0);let s=(t-e.x)/(i.x-e.x);return e.y+s*(i.y-e.y)}return 1/0}}},21176:function(t,e,i){i.d(e,{X0:()=>M});var s=i(408830),r=i(919498),n=i(513438),a=i(171161),h=i(266596);class o{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,s,n,h,o,l){let u=new a.A(new r.E9(this._lastX,this._lastY),new r.E9(t,e),new r.E9(i,s),new r.E9(n,h));u.originP1=this._lastOriginP,u.originP2=l,u.defined=o,this.curves.push(u),this._lastX=n,this._lastY=h,this._lastOriginP=l}closePath(){if(this.curves.length<2)return;let t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw Error("SegContext\u4E0D\u652F\u6301\u8C03\u7528ellipse")}lineTo(t,e,i,s){let r=this.addLinearCurve(t,e,i,this._lastOriginP,s);this.curves.push(r),this._lastX=t,this._lastY=e,this._lastOriginP=s}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,s){throw Error("SegContext\u4E0D\u652F\u6301\u8C03\u7528quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,s,n){let a=new h.g(new r.E9(this._lastX,this._lastY),new r.E9(t,e));return a.originP1=s,a.originP2=n,a.defined=i,a}getPointAt(t){throw Error("\u6682\u672A\u5B9E\u73B0")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===n.Nm.COLUMN){if(!this.curves.length)return 0;let t=this.curves[0],i=this.curves[this.curves.length-1],r=null!=(e=i.p3)?e:i.p1;return(0,s.Wn)(t.p0.y-r.y)}if(t===n.Nm.ROW){if(!this.curves.length)return 0;let t=this.curves[0],e=this.curves[this.curves.length-1],r=null!=(i=e.p3)?i:e.p1;return(0,s.Wn)(t.p0.x-r.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((t,e)=>t+e.getLength(),0)),this.length}}class l extends o{bezierCurveTo(t,e,i,s,r,n,a,h){return super.bezierCurveTo(e,t,s,i,n,r,a,h)}lineTo(t,e,i,s){return super.lineTo(e,t,i,s)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function u(t,e,i=1){let s=!1;for(let i=0,r=e.length;i<=r;i++)i>=r===s&&((s=!s)?t.lineStart():t.lineEnd()),s&&t.point(e[i])}function d(t,e,i){let r=null!=e?e:(0,s.Wn)(i[i.length-1].x-i[0].x)>(0,s.Wn)(i[i.length-1].y-i[0].y)?n.Nm.ROW:n.Nm.COLUMN;return"monotoneY"===t?new l(t,r):new o(t,r)}class c{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function p(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;let r=d("linear",i,t);return u(new c(r,s),t,1),r}function g(t,e,i,s,r){t.context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6,s,t.lastPoint1)}class f{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&g(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:g(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function m(t,e,i){let s=t._x1-t._x0,r=e-t._x1,n=(t._y1-t._y0)/(s||Number(r<0&&-0)),a=(i-t._y1)/(r||Number(s<0&&-0));return((n<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(n),Math.abs(a),.5*Math.abs((n*r+a*s)/(s+r)))||0}function v(t,e){let i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function y(t,e,i,s,r){let n=t._x0,a=t._y0,h=t._x1,o=t._y1,l=(h-n)/3;t.context.bezierCurveTo(n+l,a+l*e,h-l,o-l*i,h,o,s,t.lastPoint1)}class x{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:y(this,this._t0,v(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN,i=t.x,s=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,s,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(i,s,t);break;case 1:this._point=2;break;case 2:this._point=3,y(this,v(this,e=m(this,i,s)),e,!1!==this._lastDefined1&&!1!==this._lastDefined2,t);break;default:y(this,this._t0,e=m(this,i,s),!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class b extends x{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}class A{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t);else{let s=this._x*(1-this._t)+e*this._t;.5===this._t?this.context.lineTo(s,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(s,this._y,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(s,i,!1!==this._lastDefined&&!1!==t.defined,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class _ extends A{lineEnd(){this.context.closePath()}}function B(t,e,i={}){let{direction:r,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let h=new o("step",null!=r?r:(0,s.Wn)(t[t.length-1].x-t[0].x)>(0,s.Wn)(t[t.length-1].y-t[0].y)?n.Nm.ROW:n.Nm.COLUMN);return u(new A(h,e,a),t,1),h}class T extends c{lineEnd(){this.context.closePath()}}function w(t,e,i,r,n){let a=t._x1,h=t._y1,o=t._x2,l=t._y2;if(t._l01_a>s.Ho){let e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,h=(h*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/i}if(t._l23_a>s.Ho){let s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,r=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/r,l=(l*s+t._y1*t._l23_2a-i*t._l12_2a)/r}t.context.bezierCurveTo(a,h,o,l,t._x2,t._y2,r,t.lastPoint1)}function S(t,e){return function(i,s,r={}){let{direction:n,startPoint:a}=r;if(i.length<2-Number(!!a))return null;if(i.length<3-Number(!!a))return p(i,r);let h=d(t,n,i);return u(new e(h,s,a),i,2),h}}let E=S("catmullRom",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3;default:w(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}),C=S("catmullRomClosed",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,s=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=i,t);break;case 2:this._point=3,this._x5=e,this._y5=i;break;default:w(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}});function M(t,e,i){var r,a;switch(e){case"linear":default:return p(t,i);case"basis":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=d("basis",i,t);return u(new f(r,s),t,2),r}(t,i);case"monotoneX":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=d("monotoneX",i,t);return u(new x(r,s),t,2),r}(t,i);case"monotoneY":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;if(t.length<3-Number(!!s))return p(t,e);let r=d("monotoneY",i,t);return u(new b(r,s),t,2),r}(t,i);case"step":return B(t,.5,i);case"stepClosed":return function(t,e,i={}){let{direction:r,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let h=new o("step",null!=r?r:(0,s.Wn)(t[t.length-1].x-t[0].x)>(0,s.Wn)(t[t.length-1].y-t[0].y)?n.Nm.ROW:n.Nm.COLUMN);return u(new _(h,.5,a),t,1),h}(t,0,i);case"stepBefore":return B(t,0,i);case"stepAfter":return B(t,1,i);case"catmullRom":return E(t,null!=(r=null==i?void 0:i.curveTension)?r:.5,i);case"catmullRomClosed":return C(t,null!=(a=null==i?void 0:i.curveTension)?a:.5,i);case"linearClosed":return function(t,e={}){let{direction:i,startPoint:s}=e;if(t.length<2-Number(!!s))return null;let r=d("linear",i,t);return u(new T(r,s),t,1),r}(t,i)}}},656471:function(t,e,i){i.d(e,{U:()=>h});var s=i(408830),r=i(704654),n=i(999051);let a=s.pi/2;function h(t,e,i,o,l,u,d=!0,c){let p;if(Array.isArray(d)&&(c=d,d=!0),o<0&&(e+=o,o=-o),l<0&&(i+=l,l=-l),(0,r.Z)(u,!0))p=[u=(0,s.Wn)(u),u,u,u];else if(Array.isArray(u)){let t,e,i=u;switch(i.length){case 0:p=[0,0,0,0];break;case 1:p=[t=(0,s.Wn)(i[0]),t,t,t];break;case 2:case 3:p=[t=(0,s.Wn)(i[0]),e=(0,s.Wn)(i[1]),t,e];break;default:(p=i)[0]=(0,s.Wn)(p[0]),p[1]=(0,s.Wn)(p[1]),p[2]=(0,s.Wn)(p[2]),p[3]=(0,s.Wn)(p[3])}}else p=[0,0,0,0];if(o<0||p[0]+p[1]+p[2]+p[3]<1e-12)return t.rect(e,i,o,l);let[g,f,m,v]=[[e,i],[e+o,i],[e+o,i+l],[e,i+l]],y=Math.min(o/2,l/2),x=[Math.min(y,p[0]),Math.min(y,p[1]),Math.min(y,p[2]),Math.min(y,p[3])],b=[g[0]+x[0],g[1]],A=[g[0],g[1]+x[0]],_=[f[0]-x[1],f[1]],B=[f[0],f[1]+x[1]],T=[m[0]-x[2],m[1]],w=[m[0],m[1]-x[2]],S=[v[0]+x[3],v[1]],E=[v[0],v[1]-x[3]];if(t.moveTo(b[0],b[1]),d){if(c&&c[0]?c[0](b[0],b[1],_[0],_[1]):t.lineTo(_[0],_[1]),!(0,n.h6)(_,B)){c&&c[0]&&t.moveTo(_[0],_[1]);let e=_[0],i=_[1]+x[1];t.arc(e,i,x[1],-a,0,!1)}if(c&&c[1]?c[1](B[0],B[1],w[0],w[1]):t.lineTo(w[0],w[1]),!(0,n.h6)(T,w)){let e=w[0]-x[2],i=w[1];c&&c[1]&&t.moveTo(w[0],w[1]),t.arc(e,i,x[2],0,a,!1)}if(c&&c[2]?c[2](T[0],T[1],S[0],S[1]):t.lineTo(S[0],S[1]),!(0,n.h6)(S,E)){let e=S[0],i=S[1]-x[3];c&&c[2]&&t.moveTo(S[0],S[1]),t.arc(e,i,x[3],a,s.pi,!1)}if(c&&c[3]?c[3](E[0],E[1],A[0],A[1]):t.lineTo(A[0],A[1]),!(0,n.h6)(b,A)){let e=b[0],i=b[1]+x[0];c&&c[3]&&t.moveTo(A[0],A[1]),t.arc(e,i,x[0],s.pi,s.pi+a,!1)}}else c&&c[0]?c[0](b[0],b[1],_[0],_[1]):t.lineTo(_[0],_[1]),c&&c[1]?c[1](_[0],_[1],T[0],T[1]):t.lineTo(T[0],T[1]),c&&c[2]?c[2](T[0],T[1],S[0],S[1]):t.lineTo(S[0],S[1]),c&&c[2]?c[2](S[0],S[1],b[0],b[1]):t.lineTo(b[0],b[1]);return c||t.closePath(),t}},795149:function(t,e,i){i.d(e,{E:()=>s});function s(t,e,i){return t.length<=10?t:t=i?t:function(t,e){let i,s,r=t[0].x,n=t[0].y,a=[t[0]];for(let h=1,o=t.length;h<o;h++)(i=t[h].x-r)*i+(s=t[h].y-n)*s>e&&(r=t[h].x,n=t[h].y,a.push(t[h]));return t[t.length-1].x===r&&t[t.length-1].y===n||a.push(t[t.length-1]),a}(t,void 0!==e?e*e:1)}},501147:function(t,e,i){function s(t,e,i){let s={},r=[];return t.forEachChildren(t=>{let{zIndex:i=e}=t.attribute;s[i]?s[i].push(t):(s[i]=[t],r.push(i))},i),r.sort((t,e)=>i?e-t:t-e),{childMap:s,zIdxArray:r}}function r(t,e,i,n=!1,a=!1){let h=!1;if(a)h=!0;else{let i;t.forEachChildren((t,s)=>{let{zIndex:r=e}=t.attribute;if(0===s)i=r;else if(i!==r)return h=!0,!0;return!1},n)}if(h){let{childMap:r,zIdxArray:h}=s(t,e,n),o=!1;for(let t=0;t<h.length&&!o;t++){let e=r[h[t]];a&&e.sort((t,e)=>{var i,s;return(n?-1:1)*((null!=(i=e.attribute.z)?i:0)-(null!=(s=t.attribute.z)?s:0))});for(let t=0;t<e.length;t++)if(i(e[t],t)){o=!0;break}}}else t.forEachChildren(i,n)}function n(t,e,i,s=!1){var r,a,h,o;return r=this,a=void 0,h=void 0,o=function*(){yield t.forEachChildrenAsync(i,s)},new(h||(h=Promise))(function(t,e){function i(t){try{n(o.next(t))}catch(t){e(t)}}function s(t){try{n(o.throw(t))}catch(t){e(t)}}function n(e){var r;e.done?t(e.value):((r=e.value)instanceof h?r:new h(function(t){t(r)})).then(i,s)}n((o=o.apply(r,a||[])).next())})}function a(t,e,i,r=!1){let n=!1;t.forEachChildren((t,e)=>{let{zIndex:s=i}=t.attribute;if(0===e);else if(void 0!==s)return n=!0,!0;return!1},r);let h=null,o=!1;if(n){let{childMap:n,zIdxArray:a}=s(t,i,r),l=!1;for(let t=0;t<a.length&&!l;t++){let i=n[a[t]];for(let t=0;t<i.length;t++){if(o){l=!0,h=i[t];break}i[t]._uid!==e||(o=!0)}}}else t.forEachChildren(t=>o?(h=t,!0):(t._uid===e&&(o=!0),!1),r);return h}i.d(e,{Ud:()=>n,kD:()=>r,qA:()=>a})},12959:function(t,e,i){i.d(e,{AK:()=>u,MP:()=>p,PB:()=>l,Qw:()=>y,ju:()=>g,u$:()=>d,uo:()=>x});var s=i(704654),r=i(219273),n=i(263401),a=i(90853),h=i(274411);function o(t,e,i){let s,r,n=t/e;t>=e?(r=Math.ceil(Math.sqrt(i*n)),0===(s=Math.floor(i/r))&&(s=1,r=i)):(s=Math.ceil(Math.sqrt(i/n)),0===(r=Math.floor(i/s))&&(r=1,s=i));let a=[];for(let t=0;t<s;t++)a.push(r);let h=i-s*r;if(h>0)for(let t=0;t<h;t+=r)t+r<h?a.push(r):a.push(h-t);return a}let l=(t,e)=>{let{width:i,height:s}=(0,h.p)(t.attribute),r=o(i,s,e),n=[],a=s/r.length;for(let t=0,e=r.length;t<e;t++){let e=r[t],s=i/e;for(let i=0;i<e;i++)n.push({x:0+i*s,y:0+t*a,width:s,height:a})}return n},u=(t,e)=>{let i=t.getParsedAngle(),s=i.startAngle,r=i.endAngle,n=t.getComputedAttribute("innerRadius"),a=t.getComputedAttribute("outerRadius"),h=Math.abs(s-r),l=Math.abs(a-n),u=o(h*(n+a)/2,l,e),d=[],c=l/u.length,p=a>=n?1:-1,g=r>=s?1:-1;for(let t=0,e=u.length;t<e;t++){let e=u[t],i=h/e;for(let r=0;r<e;r++)d.push({innerRadius:a-c*t*p,outerRadius:a-c*(t+1)*p,startAngle:s+i*r*g,endAngle:s+i*(r+1)*g})}return d},d=(t,e)=>{let i=t.getComputedAttribute("startAngle"),s=t.getComputedAttribute("endAngle"),r=t.getComputedAttribute("radius"),n=Math.abs(i-s),a=o(n*r,r,e),h=[],l=n/a[0],u=r/a.length,d=s>=i?1:-1;for(let t=0,e=a.length;t<e;t++)for(let e=0,s=a[t];e<s;e++)h.push({innerRadius:u*t,outerRadius:u*(t+1),startAngle:i+l*e*d,endAngle:i+l*(e+1)*d});return h},c=(t,e)=>{let i=t.filter(t=>!1!==t.defined&&(0,s.Z)(t.x)&&(0,s.Z)(t.y));if(0===i.length)return[];if(1===i.length)return Array(e).fill(0).map(t=>i[0]);let r=[];if(e<=i.length){let t=i.length/e,s=0,n=0;for(;s<e;)r.push(i[Math.floor(n)]),n+=t,s++;return r}let n=e-i.length,a=1/(n/(i.length-1)+1),h=0;for(let e=0,i=t.length;e<i;e++)if(r.push(t[e]),e<i-1){let i=a,s=t[e].x,o=t[e].y,l=t[e+1].x,u=t[e+1].y;for(;i<1&&h<n;)r.push({x:s+(l-s)*i,y:o+(u-o)*i}),i+=a,h+=1}return r},p=(t,e)=>{var i,r;let n=t.attribute,a=n.points,h=n.segments;a||(a=h.reduce((t,e)=>{var i;return t.concat(null!=(i=e.points)?i:[])},[]));let o=a.filter(t=>!1!==t.defined&&(0,s.Z)(t.x)&&(0,s.Z)(t.y));if(!o.length)return[];let l=[];o.forEach(t=>{l.push({x:t.x,y:t.y})});for(let t=o.length-1;t>=0;t--){let e=o[t];l.push({x:null!=(i=e.x1)?i:e.x,y:null!=(r=e.y1)?r:e.y})}let u=[];return v(l,e,u),u},g=(t,e)=>{let i=t.attribute,s=i.points;return s?c(s,e):i.segments?c(i.segments.reduce((t,e)=>{var i;return t.concat(null!=(i=e.points)?i:[])},[]),e):[]},f=t=>t.map(t=>({x:t.x,y:t.y})),m=(t,e,i)=>{let s=t.length,n=[];for(let o=0;o<s;o++){var a,h;let l=t[o],u=o===s-1?t[0]:t[o+1],d=(0,r.Jz)([e.x,e.y],[i.x,i.y],[l.x,l.y],[u.x,u.y]);d&&"boolean"!=typeof d&&n.push({dot:(a=[d[0]-e.x,d[1]-e.x],h=[i.x-e.x,i.y-e.x],a[0]*h[1]-a[1]*h[0]),point:{x:d[0],y:d[1]},edgeIndex:o})}if(n.length<2)return[f(t),f(t)];n.sort((t,e)=>t.dot-e.dot);let o=n[0],l=n[n.length-1];o.edgeIndex>l.edgeIndex&&([o,l]=[l,o]);let u=o.point,d=l.point,c=[{x:u.x,y:u.y}];for(let e=o.edgeIndex+1;e<=l.edgeIndex;e++)c.push({x:t[e].x,y:t[e].y});c.push({x:d.x,y:d.y});let p=[{x:d.x,y:d.y}];for(let e=l.edgeIndex+1,i=o.edgeIndex+s;e<=i;e++){let i=t[e%s];p.push({x:i.x,y:i.y})}return p.push({x:u.x,y:u.y}),[c,p]},v=(t,e,i)=>{if(1===e)i.push({points:t});else{let s=Math.floor(e/2),r=(t=>{let e=new n.YZ;t.forEach(t=>{e.add(t.x,t.y)});let i=e.width(),s=e.height();if(i>=s){let s=e.x1+i/2;return m(t,{x:s,y:e.y1},{x:s,y:e.y2})}let r=e.y1+s/2;return m(t,{x:e.x1,y:r},{x:e.x2,y:r})})(t);v(r[0],s,i),v(r[1],e-s,i)}},y=(t,e)=>{let i=t.attribute.points;if(!i||!i.length)return[];if(1===e)return[{points:f(i)}];let s=[];return v(i,e,s),s},x=(t,e)=>{let i=t.getParsedPathShape(),s=(0,a.JO)(i);if(!s.length||e<0)return[];let r=s.length;if(s.length>=e){let t=[],i=Math.floor(s.length/e);for(let n=0;n<e;n++){let h=s.slice(n*i,n===e-1?r:(n+1)*i);t.push({path:(0,a.mg)(h)})}return t}let n=[],h=Math.floor(e/r),o=e;for(let t=0;t<r;t++){let e=[];for(let i=2,r=s[t].length;i<r;i+=2)e.push({x:s[0][i],y:s[0][i+1]});v(e,t===r-1?o:h,n),o-=h}return n}},351727:function(t,e,i){i.d(e,{WD:()=>l,js:()=>h,nV:()=>o});var s=i(996766),r=i(454326),n=i(364776),a=i(83624);function h(t,e){return"end"===t||"right"===t?-e:"center"===t?-e/2:0}function o(t,e,i,s=0){return"middle"===t?-e/2:"top"===t?0:"bottom"===t?s-e:t&&"alphabetic"!==t?0:(i||(i=e),-(e-i)/2-.79*i)}function l(t){let e={},i=t=>/^\d+(\.\d+)?$/.test(`${t}`)?`${t}px`:`${t}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(i=>{t[i]&&(e[(0,s.Z2)(i)]=t[i])}),["fontSize","lineHeight"].forEach(n=>{let a=(0,s.Z2)(n);(0,r.Z)(t[n])||(e[a]=i(t[n]))}),(0,n.Z)(t.maxLineWidth)&&(e["max-width"]=i(t.maxLineWidth)),t.underline?e["text-decoration"]="underline":t.lineThrough&&(e["text-decoration"]="line-through"),t.fill&&(0,a.Z)(t.fill)&&(e.color=t.fill),e}},917486:function(t,e,i){i.d(e,{Dn:()=>d,SA:()=>y,VA:()=>_,dZ:()=>A,dj:()=>p,hT:()=>x,jx:()=>m,q9:()=>v});var s,r,n=i(863778),a=i(695723),h=i(408830),o=i(919498),l=i(83624);(s=r||(r={}))[s.Top=1]="Top",s[s.Right=2]="Right",s[s.Bottom=4]="Bottom",s[s.Left=8]="Left",s[s.ALL=15]="ALL";let u=[!1,!1,!1,!1],d=t=>{var e;let i=!0;if((0,n.Z)(t,!0)){for(let s=0;s<4;s++)u[s]=t,i&&(i=!(null!=(e=u[s])&&!e));i=t}else if(Array.isArray(t))for(let e=0;e<4;e++)u[e]=!!t[e],i&&(i=!!u[e]);else u[0]=!1,u[1]=!1,u[2]=!1,u[3]=!1;return{isFullStroke:i,stroke:u}},c=[0,0,0,0],p=t=>t?(0,a.Z)(t)?0===t.length?0:1===t.length?t[0]:2===t.length?(c[0]=t[0],c[2]=t[0],c[1]=t[1],c[3]=t[1],c):t:t:0,g=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],f=[1,2,3,0,1,2,3,0];function m(t,e,i,s){for(;t>=h.f7;)t-=h.f7;for(;t<0;)t+=h.f7;for(;t>e;)e+=h.f7;g[0].x=i,g[1].y=i,g[2].x=-i,g[3].y=-i;let r=Math.ceil(t/h.ou)%4,n=Math.ceil(e/h.ou)%4;if(s.add((0,h.mC)(t)*i,(0,h.O$)(t)*i),s.add((0,h.mC)(e)*i,(0,h.O$)(e)*i),r!==n||e-t>h.pi){let t=!1;for(let e=0;e<f.length;e++)if(t||r!==f[e]){if(t&&n===f[e])break;if(t){let t=g[f[e]];s.add(t.x,t.y)}}else{t=!0;let e=g[r];s.add(e.x,e.y)}}}function v(t,e,i){let{x:s,y:r}=(0,h.KU)(t.x,t.y,e.x,e.y,i),{x:n,y:a}=(0,h.KU)(t.x1,t.y1,e.x1,e.y1,i),l=new o.E9(s,r,n,a);return l.defined=e.defined,l}function y(t,e,i){if(!t||!e)return[];Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);let s=[];if(t.length>e.length){s=e.map(t=>{let e=new o.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let r=0;r<e.length;r++)s[r]=v(t[r],e[r],i)}else{s=e.map(t=>{let e=new o.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let r=0;r<t.length;r++)s[r]=v(t[r],e[r],i)}return s}function x(t,e){if((0,a.Z)(t)){let i;for(let s=0;s<t.length&&void 0===i;s++)i=t[s][e];return i}return t[e]}class b{constructor(t=b.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((t,e)=>t+e,0)/this.durations.length,1e3/60),1e3/30)}}b.TimeOut=1e3/60;let A=new b,_=(t,e)=>{let i=(0,l.Z)(t)&&"%"===t[t.length-1]?e*(Number.parseFloat(t.substring(0,t.length-1))/100):t;return isNaN(i)?i:Math.max(e,i)}},388697:function(t,e,i){i.d(e,{D0:()=>s,iR:()=>n,y2:()=>r});let s=Symbol.for("EnvContribution"),r=Symbol.for("VGlobal"),n="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol"},64849:function(t,e,i){let s;i.d(e,{n:()=>f});var r=i(496270);let n={Singleton:"Singleton",Transient:"Transient"},a={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class h{constructor(t,e){this.id=r.R.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=a.Invalid,this.constraint=t=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){let t=new h(this.serviceIdentifier,this.scope);return t.activated=t.scope===n.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}var o=i(963479),l=i(544724);class u{getConstructorMetadata(t){return{compilerGeneratedMetadata:l.Z.getMetadata(o.FL,t),userGeneratedMetadata:l.Z.getMetadata(o.LD,t)||{}}}getPropertiesMetadata(t){throw Error("\u6682\u672A\u5B9E\u73B0")}}var d=i(683224);let c=(s=o.vO,t=>{let e=e=>{if(null==e)return!1;if(e.key===s&&e.value===t)return!0;if(null==e.constructorArgsMetadata)return!1;let i=e.constructorArgsMetadata;for(let e=0;e<i.length;e++)if(i[e].key===s&&i[e].value===t)return!0;return!1};return e.metaData=new d.S(s,t),e});class p{constructor(t){this._binding=t}inRequestScope(){throw Error("\u6682\u672A\u5B9E\u73B0")}inSingletonScope(){return this._binding.scope=n.Singleton,this}inTransientScope(){return this._binding.scope=n.Transient,this}whenTargetNamed(t){return this._binding.constraint=c(t),this}}class g{constructor(t){this._binding=t}to(t){return this._binding.type=a.Instance,this._binding.implementationType=t,new p(this._binding)}toSelf(){let t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=a.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new p(this._binding)}toConstantValue(t){return this._binding.type=a.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=n.Singleton,new p(this._binding)}toFactory(t){return this._binding.type=a.Factory,this._binding.factory=t,this._binding.scope=n.Singleton,new p(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}let f=new class{constructor(t){let e=t||{};e.defaultScope=e.defaultScope||n.Transient,this.options=e,this.id=r.R.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new u}load(t){let e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){let e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){let e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){let s=this._getNotAllArgs(t,!1,e,i);return this._get(s)}getNamed(t,e){return this.getTagged(t,o.vO,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){let e=new h(t,this.options.defaultScope),i=this._bindingDictionary.get(t)||[];return i.push(e),this._bindingDictionary.set(t,i),new g(e)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){let t=(t,e)=>{t._binding.moduleId=e};return e=>({bindFunction:i=>{let s=this.bind(i);return t(s,e),s},isboundFunction:t=>this.isBound(t),rebindFunction:i=>{let s=this.rebind(i);return t(s,e),s},unbindFunction:t=>this.unbind(t),unbindAsyncFunction:t=>null})}_getNotAllArgs(t,e,i,s){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:s}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){let e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(e=>e.constraint(t)).forEach(t=>{e.push(this._resolveFromBinding(t))}),t.isMultiInject||1!==e.length?e:e[0]}_getChildRequest(t){let e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),s=Object.keys(i),r=[];for(let t=0;t<s.length;t++){let e=i[t],s={};e.forEach(t=>{s[t.key]=t.value});let n={inject:s[o.B8],multiInject:s[o.Lc]},a=n.inject||n.multiInject,h={serviceIdentifier:a,constructorArgsMetadata:e},l=(this._bindingDictionary.get(a)||[]).filter(t=>t.constraint(h));if(l.length){let t={injectIdentifier:a,metadata:e,bindings:l};r.push(t)}}return r}_resolveFromBinding(t){let e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case a.ConstantValue:case a.Function:e=t.cache;break;case a.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;let i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(t=>t.bindings.length>1?t.bindings.map(t=>this._resolveFromBinding(t)):this._resolveFromBinding(t.bindings[0]))}_saveToScope(t,e){t.scope===n.Singleton&&(t.cache=e,t.activated=!0)}}},217867:function(t,e,i){i.d(e,{Gp:()=>s,IT:()=>n,XJ:()=>o,kj:()=>a,no:()=>r,ym:()=>h});let s=Symbol.for("TransformUtil"),r=Symbol.for("GraphicUtil"),n=Symbol.for("LayerService"),a=Symbol.for("StaticLayerHandlerContribution"),h=Symbol.for("DynamicLayerHandlerContribution"),o=Symbol.for("VirtualLayerHandlerContribution")},327381:function(t,e,i){i.d(e,{z:()=>n});var s=i(669745),r=i(263401);let n=class{configure(t,...e){t.env===this.type&&t.setActiveEnvContribution(this)}getNativeAABBBounds(t){return new r.FB}removeDom(t){return!1}createDom(t){return null}updateDom(t,e){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(t){return fetch(t).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(t,e){return 0}getElementLeft(t,e){return 0}getElementTopLeft(t,e){return{top:0,left:0}}loadFont(t,e,i){var s,r,n,a;return s=this,r=void 0,a=function*(){return{loadState:"fail"}},new(n=void 0,n=Promise)(function(t,e){function i(t){try{o(a.next(t))}catch(t){e(t)}}function h(t){try{o(a.throw(t))}catch(t){e(t)}}function o(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,h)}o((a=a.apply(s,r||[])).next())})}isMacOS(){return!1}copyToClipBoard(t){return Promise.resolve(null)}};n=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],n)},778865:function(t,e,i){i.d(e,{Z:()=>f});var s=i(736264),r=i(337886),n=i(388697),a=new s.n(t=>{(0,r.yb)(t,n.D0)}),h=i(516777),o=new s.n(t=>{t(h.j).to(h.f).inSingletonScope(),(0,r.yb)(t,h.j)}),l=i(217867),u=i(669745),d=i(255161),c=i(894442);let p=class{constructor(){this.type="static",this.offscreen=!1,this.global=c.w.global}setDpr(t){this.canvas.dpr=t}init(t,e,i){if(this.layer=t,this.window=e,i.main)this.main=!0,this.context=e.getContext(),this.canvas=this.context.getCanvas();else{let t;this.main=!1,i.canvasId&&(t=this.global.getElementById(i.canvasId)),t||(t=this.global.createCanvas({width:e.width,height:e.height})),t.style&&(t.style["pointer-events"]="none");let s=e.getContext().getCanvas().nativeCanvas,r=(0,d.JN)({nativeCanvas:t,width:e.width,height:e.height,dpr:e.dpr,id:i.canvasId,canvasControled:!0,container:e.getContainer(),x:s.offsetLeft,y:s.offsetTop});r.applyPosition(),this.canvas=r,this.context=r.getContext()}}resize(t,e){this.canvas.resize(t,e)}resizeView(t,e){}render(t,e,i){var s;if(!this.main){let t=this.window.getContext().getCanvas().nativeCanvas;t&&(this.canvas.x!==t.offsetLeft||this.canvas.y!==t.offsetTop)&&(this.canvas.x=t.offsetLeft,this.canvas.y=t.offsetTop,this.canvas.applyPosition())}e.renderService.render(t,Object.assign(Object.assign({context:this.context,clear:null!=(s=e.background)?s:"#ffffff"},e),i))}merge(t){t.forEach(t=>{let e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(t,e){}drawTo(t,e,i){var s;let r=t.getContext();i.renderService.render(e,Object.assign(Object.assign({context:r},i),{clear:i.clear?null!=(s=i.background)?s:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};p=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],p);var g=new s.n(t=>{t(p).toSelf(),t(l.kj).toService(p)});function f(t){t.load(a),t.load(o),t.load(g)}},516777:function(t,e,i){i.d(e,{f:()=>u,j:()=>l});var s=i(669745),r=i(826947),n=i(688606),a=i(114123),h=i(985476);let o=class{constructor(){this.id="ATextMeasure"}configure(t,e){this.canvas=t.canvas,this.context=t.context,t.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(t,e,i){this.context.setTextStyleWithoutAlignBaseline(e);let s=this.context.measureText(t);return i?this.compatibleMetrics(s,e):s}_measureTextWithAlignBaseline(t,e,i){this.context.setTextStyle(e);let s=this.context.measureText(t);return i?this.compatibleMetrics(s,e):s}compatibleMetrics(t,e){if(null==t.actualBoundingBoxAscent||null==t.actualBoundingBoxDescent||null==t.fontBoundingBoxAscent||null==t.fontBoundingBoxDescent){t={width:t.width};let{ascent:i,descent:s}=this.measureTextBoundADscentEstimate(e);t.actualBoundingBoxAscent=i,t.actualBoundingBoxDescent=s,t.fontBoundingBoxAscent=i,t.fontBoundingBoxDescent=s}if(null==t.actualBoundingBoxLeft||null==t.actualBoundingBoxRight){t={width:t.width,actualBoundingBoxAscent:t.actualBoundingBoxAscent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent};let{left:i,right:s}=this.measureTextBoundLeftRightEstimate(e);t.actualBoundingBoxLeft=i,t.actualBoundingBoxRight=s}return t}estimate(t,{fontSize:e=n.T5.fontSize}){let i=0,s=0;for(let e=0;e<t.length;e++)128>t.charCodeAt(e)?i++:s++;return{width:~~(.8*i*e+s*e),height:e}}measureTextWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsLeftRight(t,e,i){return this.context?{left:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxLeft,right:i.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(e)}measureTextPixelHeight(t,e,i){var s;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).actualBoundingBoxAscent-i.actualBoundingBoxDescent):null!=(s=e.fontSize)?s:n.q9.fontSize}measureTextPixelADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundHieght(t,e,i){var s;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).fontBoundingBoxAscent-i.fontBoundingBoxDescent):null!=(s=e.fontSize)?s:n.q9.fontSize}measureTextBoundADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).fontBoundingBoxAscent,descent:i.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundADscentEstimate(t){var e;let i=null!=(e=t.fontSize)?e:n.q9.fontSize;return{ascent:.79*i,descent:.21*i}}measureTextBoundLeftRightEstimate(t){var e;let i=null!=(e=t.fontSize)?e:n.q9.fontSize,{textAlign:s}=t;return"center"===s?{left:i/2,right:i/2}:"right"===s||"end"===s?{left:i,right:0}:{left:0,right:i}}measureTextPixelADscentAndWidth(t,e,i){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:this.estimate(t,e).width});let s=this._measureTextWithoutAlignBaseline(t,e,!0);if(i===r.r.actualBounding)return{ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,width:s.width};if(i===r.r.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:s.width});if(i===r.r.fontBounding){let t=s.fontBoundingBoxAscent,e=s.fontBoundingBoxDescent;if(s.actualBoundingBoxDescent&&e<s.actualBoundingBoxDescent){let i=s.actualBoundingBoxDescent-e;e+=i,t-=i}else if(s.actualBoundingBoxAscent&&t<s.actualBoundingBoxAscent){let i=s.actualBoundingBoxAscent-t;t+=i,e-=i}return{ascent:t,descent:e,width:s.width}}return{ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,width:s.width}}measureText(t,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(t)):this.estimate(t,e)}clipTextVertical(t,e,i,s){if(0===t.length)return{verticalList:t,width:0};let{fontSize:r=12}=e;t.forEach(t=>{t.width=0===t.direction?r:this.measureTextWidth(t.text,e)});let n=[],h=0,o=0;for(;o<t.length&&h+t[o].width<i;o++)h+=t[o].width,n.push(t[o]);if(t[o]&&t[o].text.length>1){let r=this._clipText(t[o].text,e,i-h,0,t[o].text.length-1,"end",!1);if(s&&r.str!==t[o].text){let i="",s=0;for(let e=0;e<o;e++){let r=t[e];i+=r.text,s+=r.text.length}i+=t[o].text;let n=s+r.str.length,h=(0,a.SZ)(i,n);(h-=s)!=r.str.length-1&&(r.str=r.str.substring(0,h),r.width=this.measureTextWidth(r.str,e))}n.push(Object.assign(Object.assign({},t[o]),{text:r.str,width:r.width})),h+=r.width}return{verticalList:n,width:h}}clipText(t,e,i,s,r){if(0===t.length)return{str:"",width:0};let n=this.measureTextWidth(t,e);if(n<=i)return{str:t,width:n};if((n=this.measureTextWidth(t[0],e))>i)return{str:"",width:0};let h=this._clipText(t,e,i,0,t.length-1,"end",!1);if(s&&h.str!==t){let i=(0,a.SZ)(t,h.str.length,r);i!==h.str.length&&(i>h.str.length&&(h.wordBreaked=i,i=h.str.length),h.str=t.substring(0,i),h.width=this.measureTextWidth(h.str,e))}return h}_clipText(t,e,i,s,r,n,a){let h;if("start"===n)h=this._clipTextStart(t,e,i,s,r),a&&(h.result=a+h.str);else if("middle"===n){let s=this._clipTextMiddle(t,e,i,"","",0,0,1);h={str:"none",width:s.width,result:s.left+a+s.right}}else h=this._clipTextEnd(t,e,i,s,r),a&&(h.result=h.str+a);return h}_clipTextEnd(t,e,i,s,r){let n;if(s===r){h.Y.getInstance().warn(`\u{3010}_clipTextEnd\u{3011}\u{4E0D}\u{5E94}\u{8BE5}\u{8D70}\u{5230}\u{8FD9}\u{91CC}${t}, ${s}, ${r}`);let i=t.substring(0,r+1);return{str:i,width:this.measureTextWidth(i,e)}}let a=Math.floor((s+r)/2),o=t.substring(0,a+1),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let r=t.substring(0,a);return(n=this.measureTextWidth(r,e))<=i?{str:r,width:n}:this._clipTextEnd(t,e,i,s,a)}if(l<i){if(a>=t.length-1)return{str:t,width:this.measureTextWidth(t,e)};let s=t.substring(0,a+2);return(n=this.measureTextWidth(s,e))>=i?{str:o,width:l}:this._clipTextEnd(t,e,i,a,r)}return{str:o,width:l}}_clipTextStart(t,e,i,s,r){let n,a=Math.ceil((s+r)/2),h=t.substring(a-1,t.length),o=this.measureTextWidth(h,e);if(o>i){if(h.length<=1)return{str:"",width:0};let s=t.substring(a,t.length);return(n=this.measureTextWidth(s,e))<=i?{str:s,width:n}:this._clipTextStart(t,e,i,a,t.length)}if(o<i){if(a<=0)return{str:t,width:this.measureTextWidth(t,e)};let r=t.substring(a-2,t.length);return(n=this.measureTextWidth(r,e))>=i?{str:h,width:o}:this._clipTextStart(t,e,i,s,a)}return{str:h,width:o}}_clipTextMiddle(t,e,i,s,r,n,a,h){let o=t.substring(0,h),l=this.measureTextWidth(o,e);if(l+a>i)return{left:s,right:r,width:n+a};let u=t.substring(t.length-h,t.length),d=this.measureTextWidth(u,e);return l+d>i?{left:o,right:r,width:l+a}:this._clipTextMiddle(t,e,i,o,u,l,d,h+1)}clipTextWithSuffixVertical(t,e,i,s,r,n){let a;if(""===s)return this.clipTextVertical(t,e,i,r);if(0===t.length)return{verticalList:t,width:0};let h=this.clipTextVertical(t,e,i,r);if(h.verticalList.length===t.length&&h.verticalList[h.verticalList.length-1].width===t[t.length-1].width)return h;let o=this.measureTextWidth(s,e);if(o>i)return h;if(i-=o,"start"===n){let n=this.revertVerticalList(t);a=this.clipTextVertical(n,e,i,r);let h=this.revertVerticalList(a.verticalList);h.unshift({text:s,direction:1,width:o}),a.verticalList=h}else if("middle"===n){let n=this.clipTextVertical(t,e,i/2,r),h=this.revertVerticalList(t),l=this.clipTextVertical(h,e,i/2,r);n.verticalList.push({text:s,direction:1,width:o}),this.revertVerticalList(l.verticalList).forEach(t=>n.verticalList.push(t)),a={verticalList:n.verticalList,width:n.width+l.width}}else(a=this.clipTextVertical(t,e,i,r)).verticalList.push({text:s,direction:1,width:o});return a.width+=o,a}revertVerticalList(t){return t.reverse().map(t=>{let e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(t,e,i,s,r,n,h=!1){if(""===s)return this.clipText(t,e,i,r);if(0===t.length)return{str:"",width:0};let o=this.measureTextWidth(t,e);if(!h&&o<=i)return{str:t,width:o};let l=this.measureTextWidth(s,e);if(l>i)return{str:"",width:0};if(h&&o+l<=i)return{str:t+s,width:o+l};i-=l;let u=this._clipText(t,e,i,0,t.length-1,n,s);if(r&&u.str!==t){let i=(0,a.SZ)(t,u.str.length);i!==u.str.length&&(u.result=t.substring(0,i),u.width=this.measureTextWidth(u.str,e))}else h&&u.str===t&&(u.result=t+s);return u.str=u.result,u.width+=l,u}};o=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],o);let l=Symbol.for("TextMeasureContribution"),u=class extends o{constructor(){super(...arguments),this.id="DefaultTextMeasureContribution"}};u=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],u)},985506:function(t,e,i){i.d(e,{X:()=>h});var s=i(669745),r=i(496270),n=i(263401),a=i(669182);let h=class{constructor(){this._uid=r.R.GenAutoIncrementId(),this.viewBox=new n.FB,this.modelMatrix=new a.y(1,0,0,1,0,0)}onChange(t){this._onChangeCb=t}configure(t,e){e.env===this.type&&t.setWindowHandler(this)}release(...t){this.releaseWindow()}isVisible(t){return!0}onVisibleChange(t){}getTopLeft(t){return{top:0,left:0}}setViewBox(t){this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(t,e,i,s,r,n){this.modelMatrix.setValue(t,e,i,s,r,n)}getViewBoxTransform(){return this.modelMatrix}};h=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],h)},180348:function(t,e,i){i.d(e,{Z:()=>I});var s,r,n,a=i(736264),h=i(669745),o=i(362199),l=i(18163),u=i(337886),d=i(914118),c=i(388697),p=i(496270),g=i(967955),f=i(846822),m=function(t,e){return function(i,s){e(i,s,t)}};let v=class extends f.w{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(t){this._isImageAnonymous=t}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(t){this._env||this.setEnv("browser"),this.envContribution.supportEvent=t}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=t}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=t}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=t}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(t){this._env||this.setEnv("browser"),this.envContribution.applyStyles=t}constructor(t){super(),this.contributions=t,this._isImageAnonymous=!0,this._performanceRAFList=[],this.eventListenerTransformer=t=>t,this.id=p.R.GenAutoIncrementId(),this.hooks={onSetEnv:new d.n(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}_nativeAddEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(t,e,i)}_nativeRemoveEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(t,e,i)}_nativeDispatchEvent(t){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(t)}bindContribution(t){let e=[];if(this.contributions.getContributions().forEach(i=>{let s=i.configure(this,t);s&&s.then&&e.push(s)}),e.length)return Promise.all(e)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(t,e){if(e&&!0===e.force||this._env!==t)return this.deactiveCurrentEnv(),this.activeEnv(t,e)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(t,e){let i=this._env;this._env=t;let s=this.bindContribution(e);if(s&&s.then)return s.then(()=>{this.envParams=e,this.hooks.onSetEnv.call(i,t,this)});this.envParams=e,this.hooks.onSetEnv.call(i,t,this)}setActiveEnvContribution(t){this.envContribution=t}createCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(t)}createOffscreenCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(t)}releaseCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(t)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getSpecifiedRequestAnimationFrame(t){this._env||this.setEnv("browser"),this._performanceRAFList[t]||(this._performanceRAFList[t]=new g.A);let e=this._performanceRAFList[t];return t=>e.addAnimationFrameCb(t)}getSpecifiedCancelAnimationFrame(t){if(this._env||this.setEnv("browser"),!this._performanceRAFList[t])return()=>!1;let e=this._performanceRAFList[t];return t=>e.removeAnimationFrameCb(t)}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(t){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(t):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(t,e){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(t,e):null}loadImage(t){return this._env||this.setEnv("browser"),this.envContribution.loadImage(t)}loadSvg(t){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(t)}loadJson(t){return this._env||this.setEnv("browser"),this.envContribution.loadJson(t)}loadArrayBuffer(t){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(t)}loadBlob(t){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(t)}loadFont(t,e,i){var s,r,n,a;return s=this,r=void 0,n=void 0,a=function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(t,e,i)},new(n||(n=Promise))(function(t,e){function i(t){try{o(a.next(t))}catch(t){e(t)}}function h(t){try{o(a.throw(t))}catch(t){e(t)}}function o(e){var s;e.done?t(e.value):((s=e.value)instanceof n?s:new n(function(t){t(s)})).then(i,h)}o((a=a.apply(s,r||[])).next())})}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(t){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(t)}removeDom(t){return this._env||this.setEnv("browser"),this.envContribution.removeDom(t)}createDom(t){return this._env||this.setEnv("browser"),this.envContribution.createDom(t)}updateDom(t,e){return this._env||this.setEnv("browser"),this.envContribution.updateDom(t,e)}getElementTop(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(t,e)}getElementLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(t,e)}getElementTopLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(t,e)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(t){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(t)}};v=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,h.b)(),m(0,(0,o.f)(u.Qc)),m(0,(0,l.t)(c.D0)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);var y=i(516777),x=i(688606),b=i(385005),A=i(669182),_=i(249030),B=i(894442),T=i(64849),w=i(446861),S=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},C=function(t,e){return function(i,s){e(i,s,t)}};let M=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(t){this.contributions=t,this.configured=!1,this.global=B.w.global,this._textMeasureMap=new Map,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,i)=>{this.configured=!1,this.configure(i,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}getTextMeasureInstance(t){return t&&this._textMeasureMap.get(t)||this.textMeasure}configure(t,e){this.configured||(this.contributions.getContributions().forEach(t=>{t.configure(this,e)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){let t=_.A.shareCanvas();this._canvas=t,this._context=t.getContext("2d")}}bindTextMeasure(t){this._textMeasure&&"DefaultTextMeasureContribution"!==t.id||(this._textMeasure=t),this._textMeasureMap.has(t.id)||this._textMeasureMap.set(t.id,t)}measureText(t,e,i="native"){var s;this.configure(this.global,this.global.env);let r=this.global.measureTextMethod;this.global.measureTextMethod=i;let n={width:this._textMeasure.measureTextWidth(t,e),height:null!=(s=e.fontSize)?s:x.q9.fontSize};return this.global.measureTextMethod=r,n}createTextMeasureInstance(t,e,i){return this.configure(this.global,this.global.env),new b.e(Object.assign({defaultFontParams:{fontFamily:x.q9.fontFamily,fontSize:x.q9.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+b.e.ALPHABET_CHAR_SET+b.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t)}drawGraphicToCanvas(t,e,i){if(!e.defaultLayer)return null;let s=T.n.get(w.Oo),r=t.AABBBounds,n=r.width(),a=r.height(),h=-r.x1,o=-r.y1;s.create({viewBox:{x1:h,y1:o,x2:r.x2,y2:r.y2},width:n,height:a,canvas:i,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""});let l=e.params.optimize.disableCheckGraphicWidthOutRange;e.params.optimize.disableCheckGraphicWidthOutRange=!0,e.defaultLayer.getNativeHandler().drawTo(s,[t],{transMatrix:s.getViewBoxTransform(),viewBox:s.getViewBox(),stage:e,layer:e.defaultLayer,renderService:e.renderService,background:"transparent",clear:!0,updateBounds:!1}),e.params.optimize.disableCheckGraphicWidthOutRange=l;let u=s.getNativeHandler();return u.nativeCanvas?u.nativeCanvas:null}};M=S([(0,h.b)(),C(0,(0,o.f)(u.Qc)),C(0,(0,l.t)(y.j)),E("design:paramtypes",[Object])],M),(s=r||(r={}))[s.transform=0]="transform",s[s.matrix=1]="matrix";let P=new A.y,L=class{constructor(){this.matrix=new A.y}init(t){return this.mode=r.transform,this.originTransform=t,this.matrix.reset(),this}fromMatrix(t,e){return this.mode=r.matrix,this.outSourceMatrix=t,this.outTargetMatrix=e,this}scaleMatrix(t,e,i){let s=this.outSourceMatrix;if(P.setValue(s.a,s.b,s.c,s.d,s.e,s.f),this.outTargetMatrix.reset(),i){let{x:s,y:r}=i;this.outTargetMatrix.translate(s,r),this.outTargetMatrix.scale(t,e),this.outTargetMatrix.translate(-s,-r)}else this.outTargetMatrix.scale(t,e);return this.outTargetMatrix.multiply(P.a,P.b,P.c,P.d,P.e,P.f),this}rotateMatrix(t,e){let i=this.outSourceMatrix;if(P.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){let{x:i,y:s}=e;this.outTargetMatrix.translate(i,s),this.outTargetMatrix.rotate(t),this.outTargetMatrix.translate(-i,-s)}else this.outTargetMatrix.rotate(t);return this.outTargetMatrix.multiply(P.a,P.b,P.c,P.d,P.e,P.f),this}scale(t,e,i){return this.mode===r.matrix?this.scaleMatrix(t,e,i):this}rotate(t,e){return this.mode===r.matrix?this.rotateMatrix(t,e):this}translateMatrix(t,e){let i=this.outSourceMatrix;return P.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(t,e),this.outTargetMatrix.multiply(P.a,P.b,P.c,P.d,P.e,P.f),this}translate(t,e){return this.mode===r.matrix?this.translateMatrix(t,e):this}simplify(t){return this.mode===r.matrix?this.simplifyMatrix(t):this}simplifyMatrix(t){return this}};L=S([(0,h.b)(),E("design:paramtypes",[])],L);var O=i(930615),R=i(989568);class k extends R.ZA{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw Error("\u6682\u4E0D\u652F\u6301")}get dpr(){return this._dpr}constructor(t,e,i,s){var r;super({}),this.stage=t,this.global=e,this.window=i,this.main=s.main,this.layerHandler=s.layerHandler,this.layerHandler.init(this,i,{main:s.main,canvasId:s.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!=(r=s.zIndex)?r:0}),this.layer=this,this.subLayers=new Map,this.theme=new O.Q2,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){let e=Array.from(this.subLayers.values()).sort((t,e)=>t.zIndex-e.zIndex);this.layerHandler.merge(e.map(e=>(e.layer.subLayers.size&&e.layer.combineSubLayer(t),e.layer.getNativeHandler()))),t&&e.forEach(t=>{t.group&&(t.group.incremental=0)}),e.forEach(t=>{B.w.layerService.releaseLayer(this.stage,t.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw Error("\u6682\u4E0D\u652F\u6301")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)})}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:null!=(i=t.background)?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(t=>t(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw Error("\u6682\u4E0D\u652F\u6301")}setToFrame(t){throw Error("\u6682\u4E0D\u652F\u6301")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{B.w.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:null!=(i=e.background)?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(t=>t(this))}}var D=i(217867);let U=n=class{static GenerateLayerId(){return`${n.idprefix}_${n.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=B.w.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(t){return this.layerMap.get(t)}getRecommendedLayerType(t){return t||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(t){return"static"===t?T.n.get(D.kj):"dynamic"===t?T.n.get(D.ym):T.n.get(D.XJ)}createLayer(t,e={main:!1}){var i;this.tryInit();let s=this.getRecommendedLayerType(e.layerMode);s=e.main||e.canvasId?"static":s;let r=this.getLayerHandler(s),a=new k(t,this.global,t.window,Object.assign(Object.assign({main:!1},e),{layerMode:s,canvasId:null!=(i=e.canvasId)?i:n.GenerateLayerId(),layerHandler:r})),h=this.layerMap.get(t)||[];return h.push(a),this.layerMap.set(t,h),this.staticLayerCountInEnv--,a}prepareStageLayer(t){let e;t.forEachChildren(t=>{let i=t.getNativeHandler();"virtual"===i.type?(i.mainHandler=e,e.secondaryHandlers.push(i)):(e=i).secondaryHandlers=[]})}releaseLayer(t,e){e.release();let i=this.layerMap.get(t)||[];this.layerMap.set(t,i.filter(t=>t!==e))}layerCount(t){return(this.layerMap.get(t)||[]).length}restLayerCount(t){return 10*("browser"===this.global.env)}releaseStage(t){this.layerMap.delete(t)}};U.idprefix="visactor_layer",U.prefix_count=0,U=n=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,h.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],U);var I=new a.n(t=>{t(c.y2).to(v).inSingletonScope(),t(w.Oo).to(w.Il),t(D.no).to(M).inSingletonScope(),t(D.Gp).to(L).inSingletonScope(),t(D.IT).to(U).inSingletonScope()})},524666:function(t,e,i){i.d(e,{H:()=>N});var s=i(83624),r=i(263401),n=i(919498),a=i(446861),h=i(936123),o=i(956073),l=i(421883),u=i.n(l),d=i(985476),c=i(745770);class p extends c.x{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,r,n,a,h,o,l,u,d,c,p,g){throw Error("Method not implemented.")}}class g extends p{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}clone(){var t,e,i;let s=new g(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,null==(t=this.manager)||t.copyPointerData(this,s),null==(e=this.manager)||e.copyMouseData(this,s),null==(i=this.manager)||i.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();let r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}class f extends p{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;let s=new f(this.manager);s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.detailPath=[],s.target=null,s.nativeEvent=this.nativeEvent,s.originalEvent=this.originalEvent,null==(t=this.manager)||t.copyWheelData(this,s),null==(e=this.manager)||e.copyMouseData(this,s),null==(i=this.manager)||i.copyData(this,s),s.target=this.target,s.path=this.composedPath().slice();let r=this.composedDetailPath();return s.detailPath=r&&r.slice(),s.type=this.type,s}}f.DOM_DELTA_PIXEL=0,f.DOM_DELTA_LINE=1,f.DOM_DELTA_PAGE=2;var m=i(843181),v=i(625872);function y(t){return"mouse"===t||"pen"===t}class x{constructor(t,e){this.dispatch=new(u()),this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(t,e)=>{if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(y(i.pointerType)){let t=2===i.button;this.dispatchEvent(i,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(t,e)=>{var i,s;if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=this.createPointerEvent(t,t.type,e),n=y(r.pointerType),a=this.trackingData(t.pointerId),h=this.findMountedTarget(a.overTargets);if(a.overTargets&&h&&h!==this.rootTarget&&h!==r.target){let e="mousemove"===t.type?"mouseout":"pointerout",i=this.createPointerEvent(t,e,h||void 0);if(this.dispatchEvent(i,"pointerout"),n&&this.dispatchEvent(i,"mouseout"),!r.composedPath().includes(h)){let e=this.createPointerEvent(t,"pointerleave",h||void 0);for(e.eventPhase=e.AT_TARGET;e.target&&!r.composedPath().includes(e.target);)e.currentTarget=e.target,this.notifyTarget(e),n&&this.notifyTarget(e,"mouseleave"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(i)}if(h!==r.target){let e="mousemove"===t.type?"mouseover":"pointerover",i=this.clonePointerEvent(r,e);this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover");let s=null==h?void 0:h.parent;for(;s&&s!==this.rootTarget.parent&&s!==r.target;)s=s.parent;if(!s||s===this.rootTarget.parent){let t=this.clonePointerEvent(r,"pointerenter");t.eventPhase=t.AT_TARGET;let e=t.target,i=new Set,s=h;for(;s&&s!==this.rootTarget;)i.add(s),s=s.parent;for(;e&&e!==h&&e!==this.rootTarget.parent;)i.has(e)||(t.currentTarget=e,this.notifyTarget(t),n&&this.notifyTarget(t,"mouseenter")),e=e.parent;this.freeEvent(t)}this.freeEvent(i)}this.dispatchEvent(r,"pointermove"),"touch"===r.pointerType&&this.dispatchEvent(r,"touchmove"),n&&(this.dispatchEvent(r,"mousemove"),this.cursorTarget=r.target,this.cursor=(null==(s=null==(i=r.target)?void 0:i.attribute)?void 0:s.cursor)||this.rootTarget.getCursor()),a.overTargets=r.composedPath(),this.freeEvent(r)},this.onPointerOver=(t,e)=>{var i,s;if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=this.trackingData(t.pointerId),n=this.createPointerEvent(t,t.type,e),a=y(n.pointerType);this.dispatchEvent(n,"pointerover"),a&&this.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(this.cursorTarget=n.target,this.cursor=(null==(s=null==(i=n.target)?void 0:i.attribute)?void 0:s.cursor)||this.rootTarget.getCursor());let h=this.clonePointerEvent(n,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),a&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(h)},this.onPointerOut=(t,e)=>{if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId);if(i.overTargets){let e=y(t.pointerType),s=this.findMountedTarget(i.overTargets),r=this.createPointerEvent(t,"pointerout",s||void 0);this.dispatchEvent(r),e&&this.dispatchEvent(r,"mouseout");let n=this.createPointerEvent(t,"pointerleave",s||void 0);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),e&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;i.overTargets=[],this.freeEvent(r),this.freeEvent(n)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(t,e)=>{var i;if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let s=v.m.now(),r=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if(y(r.pointerType)){let t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}let n=this.trackingData(t.pointerId),a=this.findMountedTarget(n.pressTargetsByButton[t.button]),h=a;if(a&&!r.composedPath().includes(a)){let e=a;for(;e&&!r.composedPath().includes(e);){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if(y(r.pointerType)){let t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],h=e}if(h){let e=this.clonePointerEvent(r,"click");e.target=h,e.path=[],e.detailPath=[],n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:e.target,timeStamp:s});let a=n.clicksByButton[t.button];a.target===e.target&&s-a.timeStamp<(null!=(i=this._config.clickInterval)?i:200)?++a.clickCount:a.clickCount=1,a.target=e.target,a.timeStamp=s,e.detail=a.clickCount,y(e.pointerType)?(this.dispatchEvent(e,"click"),2===a.clickCount&&this.dispatchEvent(e,"dblclick")):"touch"===e.pointerType&&this._config.supportsTouchEvents&&(this.dispatchEvent(e,"tap"),2===a.clickCount&&this.dispatchEvent(e,"dbltap")),this.dispatchEvent(e,"pointertap"),this.freeEvent(e)}this.freeEvent(r)},this.onPointerUpOutside=(t,e)=>{if(!(t instanceof g))return void d.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]),r=this.createPointerEvent(t,t.type,e);if(s){let e=s;for(;e;)r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):y(r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),e=e.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(r)},this.onWheel=(t,e)=>{if(!(t instanceof f))return void d.Y.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");let i=this.createWheelEvent(t,e);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,s,r,n,a,h;let o;if(!this.rootTarget)return;let l=this.mappingTable[t.type],u=`${t.canvasX}-${t.canvasY}`;if((null==(e=this._prePointTargetCache)?void 0:e[u])&&(null==(s=null==(i=this._prePointTargetCache)?void 0:i[u])?void 0:s.stage)&&(null==(n=null==(r=this._prePointTargetCache)?void 0:r[u])?void 0:n.stage.renderCount)===(null==(a=this._prePointTargetCache)?void 0:a.stageRenderCount)?o=this._prePointTargetCache[u]:(o=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[u]:o,stageRenderCount:null!=(h=null==o?void 0:o.stage.renderCount)?h:-1})),l)for(let e=0,i=l.length;e<i;e++)l[e].fn(t,o);else d.Y.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,r=i.length-1;s<r;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){let e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=null!=e?e:t.type;let i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var s,r;let n=this.allocateEvent(g);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i||this.pickTarget(null!=(s=n.viewX)?s:n.global.x,null!=(r=n.viewY)?r:n.global.y,n),"string"==typeof e&&(n.type=e),n}createWheelEvent(t,e){var i,s;let r=this.allocateEvent(f);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=e||this.pickTarget(null!=(i=r.viewX)?i:r.global.x,null!=(s=r.viewY)?s:r.global.y,r),r}clonePointerEvent(t,e){let i=this.allocateEvent(g);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();let s=t.composedDetailPath();return i.detailPath=s&&s.slice(),i.type=null!=e?e:i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof g&&e instanceof g&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof p&&e instanceof p&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{e[i].x=t[i].x,e[i].y=t[i].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=v.m.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);let i=(null==(e=this.eventPool.get(t))?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw Error("It is illegal to free an event not managed by this EventManager!");let i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null==(e=this.eventPool.get(i))||e.push(t)}notifyListeners(t,e){let i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let s=0,r=i.length;s<r&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeEventListener(e,i[s].fn,{once:!0}),i[s].fn.call(i[s].context,t);this.emitDelegation(t,e)}emitDelegation(t,e){let i=t.currentTarget._events[m.g];if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let s=0,r=i.length;s<r&&!t.propagationImmediatelyStopped;s++)i[s].fn.call(i[s].context,t,e)}pickTarget(t,e,i){let s,r=this.rootTarget.pick(t,e);return s=r&&r.graphic?r.graphic:r&&r.group?r.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=r.params),s}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}let b={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class A{constructor(t){this.resolution=1,this.onPointerDown=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(!t.cancelable&&"cancelable"in t||t.preventDefault());for(let t=0,i=e.length;t<i;t++){let i=e[t],s=this.bootstrapEvent(this.rootPointerEvent,i);this.manager.mapEvent(s)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType||this.isEventOutsideOfTargetElement(t))return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.isEventOutsideOfTargetViewPort(t)?"outside":"",i=this.normalizeToPointerData(t);for(let t=0,s=i.length;t<s;t++){let s=this.bootstrapEvent(this.rootPointerEvent,i[t]);s.type+=e,this.manager.mapEvent(s)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=t=>{let e=this.normalizeWheelEvent(t);this.manager.mapEvent(e)};let{targetElement:e,resolution:i,rootNode:s,global:r,autoPreventDefault:n=!1,clickInterval:a,supportsTouchEvents:h=r.supportsTouchEvents,supportsPointerEvents:o=r.supportsPointerEvents}=t;this.manager=new x(s,{clickInterval:a,supportsTouchEvents:h}),this.globalObj=r,this.supportsPointerEvents=o,this.supportsTouchEvents=h,this.supportsMouseEvents=r.supportsMouseEvents,this.applyStyles=r.applyStyles,this.autoPreventDefault=n,this.eventsAdded=!1,this.rootPointerEvent=new g,this.rootWheelEvent=new f,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");let{applyStyles:i,domElement:r}=this;if(this.currentCursor===t)return;this.currentCursor=t;let n=this.cursorStyles[t];n?"string"==typeof n&&i?r.style.cursor=n:"function"==typeof n?n(t):"object"==typeof n&&i&&Object.assign(r.style,n):i&&(0,s.Z)(t)&&!(0,h.Z)(this.cursorStyles,t)&&(r.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;let s=null==(e=this.globalObj)?void 0:e.mapToCanvasPoint(t,this.domElement);if(s)return s;let r=0,n=0;if(t.changedTouches){let e=null!=(i=t.changedTouches[0])?i:{};r=e.clientX||0,n=e.clientY||0}else r=t.clientX||0,n=t.clientY||0;let a=this.domElement.getBoundingClientRect();return{x:r-a.left,y:n-a.top}}normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,s=t.changedTouches.length;i<s;i++){let s=t.changedTouches[i];(0,o.Z)(s.button)&&(s.button=0),(0,o.Z)(s.buttons)&&(s.buttons=1),(0,o.Z)(s.isPrimary)&&(s.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,o.Z)(s.width)&&(s.width=s.radiusX||1),(0,o.Z)(s.height)&&(s.height=s.radiusY||1),(0,o.Z)(s.tiltX)&&(s.tiltX=0),(0,o.Z)(s.tiltY)&&(s.tiltY=0),(0,o.Z)(s.pointerType)&&(s.pointerType="touch"),(0,o.Z)(s.pointerId)&&(s.pointerId=s.identifier||0),(0,o.Z)(s.pressure)&&(s.pressure=s.force||.5),(0,o.Z)(s.twist)&&(s.twist=0),(0,o.Z)(s.tangentialPressure)&&(s.tangentialPressure=0),(0,o.Z)(s.layerX)&&(s.layerX=s.offsetX=s.clientX),(0,o.Z)(s.layerY)&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent)||((0,o.Z)(t.isPrimary)&&(t.isPrimary=!0),(0,o.Z)(t.width)&&(t.width=1),(0,o.Z)(t.height)&&(t.height=1),(0,o.Z)(t.tiltX)&&(t.tiltX=0),(0,o.Z)(t.tiltY)&&(t.tiltY=0),(0,o.Z)(t.pointerType)&&(t.pointerType="mouse"),(0,o.Z)(t.pointerId)&&(t.pointerId=1),(0,o.Z)(t.pressure)&&(t.pressure=.5),(0,o.Z)(t.twist)&&(t.twist=0),(0,o.Z)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e}normalizeWheelEvent(t){let e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;let{x:i,y:s}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=s,e.global.x=i,e.global.y=s,e.offset.x=i,e.offset.y=s;let{x:r,y:n}=this.mapToViewportPoint(e);return e.viewport.x=r,e.viewport.y=n,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:i,y:s}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=s,t.global.x=i,t.global.y=s,t.offset.x=i,t.offset.y=s;let{x:r,y:n}=this.mapToViewportPoint(t);return t.viewport.x=r,t.viewport.y=n,t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=b[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=v.m.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){let e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),s=i.width(),r=i.height();return!(e.x<s&&e.y<r&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}var _=i(64849),B=i(221427),T=i(989568),w=i(930615),S=i(345236),E=i(200559),C=i(175104),M=i(541901),P=i(38038),L=i(619118),O=i(914118),R=i(217867),k=i(894442),D=i(959747),U=i(295277),I=i(753794);let W={BACKGROUND:"white"};class N extends T.ZA{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){let e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){let e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return null!=(t=this._background)?t:W.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}get ticker(){return this._ticker}set ticker(t){t.bindStage(this),this._ticker&&this._ticker.removeListener("tick",this.afterTickCb),t.addTimeline(this.timeline),this._ticker=t,this._ticker.on("tick",this.afterTickCb)}constructor(t={}){var e,i;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=t=>{if(!(this._skipRender<0))if(t){if(this.dirtyBounds){let t=this.window.getViewBox();this.dirtyBounds.setValue(t.x1,t.y1,t.width(),t.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=t=>{this._beforeRenderList.forEach(e=>e(t))},this.afterClearScreen=t=>{this._afterClearScreen&&this._afterClearScreen(t)},this.afterClearRect=t=>{this._afterClearRect&&this._afterClearRect(t)},this.afterRender=t=>{this.renderCount++,this._afterRenderList.forEach(e=>e(t)),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(e=>e(t)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{this.tickedBeforeRender=!0,"rendering"!==this.state&&this.renderNextFrame()},this.params=t,this.theme=new w.Q2,this.hooks={beforeRender:new O.n(["stage"]),afterRender:new O.n(["stage"]),afterClearScreen:new O.n(["stage"]),afterClearRect:new O.n(["stage"])},this.global=k.w.global,!this.global.env&&(0,D.kP)()&&this.global.setEnv("browser"),this.window=_.n.get(a.Oo),this.renderService=_.n.get(B.p),this.pluginService=_.n.get(E.H),this.layerService=_.n.get(R.IT),this.graphicService=_.n.get(I.fB),this.pluginService.active(this,t),this._beforeRenderList=[],this._afterRenderList=[],this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:!1!==t.canvasControled,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=null!=(e=t.background)?e:W.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),!1===t.disableDirtyBounds&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),t.beforeRender&&this._beforeRenderList.push(t.beforeRender),t.afterRender&&this._afterRenderList.push(t.afterRender),this.hooks.afterClearScreen.tap("constructor",this.afterClearScreen),this.hooks.afterClearRect.tap("constructor",this.afterClearRect),this._afterClearScreen=t.afterClearScreen,this._afterClearRect=t.afterClearRect,this.supportInteractiveLayer=!1!==t.interactiveLayer,t.optimize||(t.optimize={tickRenderMode:"effect"}),this.optmize(t.optimize),t.background&&(0,s.Z)(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.initAnimate(t),this.rafId=null!=(i=t.rafId)?i:Math.floor(6*Math.random())}initAnimate(t){var e;this.createTicker&&this.createTimeline&&(this._ticker=t.ticker||this.createTicker(this),this._ticker.bindStage(this),"performance"===(null==(e=this.params.optimize)?void 0:e.tickRenderMode)&&this._ticker.setFPS(30),this.timeline=this.createTimeline(),this._ticker.addTimeline(this.timeline),this._ticker.on("tick",this.afterTickCb))}startAnimate(){this._ticker&&this.timeline&&(this._ticker.start(),this.timeline.resume())}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new A(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=+!this.window.isVisible():this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:+!this.window.isVisible(),this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){let{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:s=0,beta:r=0,camera:n,fieldRatio:a=1,fieldDepth:h}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:s,beta:r,camera:n,fieldRatio:a,fieldDepth:h})}set3dOptions(t){var e,i,s,r,n,a;this.option3d=t;let{light:h,center:o,camera:l,alpha:u,beta:d,fieldRatio:c,fieldDepth:p}=this.get3dOptions(t),{dir:g=[1,1,-1],color:f="white",ambient:m}=h,v=(null!=(e=o.x)?e:this.width/2)+(null!=(i=o.dx)?i:0),y=(null!=(s=o.y)?s:this.height/2)+(null!=(r=o.dy)?r:0),x=[v,y,(null!=(n=o.z)?n:0)+(null!=(a=o.dz)?a:0)],b=0,A=0,_=0;l||(b=Math.sin(u)+v,A=Math.sin(d)+y,_=Math.cos(u)*Math.cos(d)*1);let B=U.F.getPlugin("DirectionalLight");B&&(this.light=new B(g,f,m));let T={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:c,fieldDepth:p,viewParams:{pos:[b,A,_],center:x,up:[0,1,0]}};if(this.camera)this.camera.params=T;else{let t=U.F.getPlugin("OrthoCamera");t&&(this.camera=new t(T))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRenderList.push(t)}removeBeforeRender(t){this._beforeRenderList=this._beforeRenderList.filter(e=>e!==t)}setAfterRender(t){this._afterRenderList.push(t)}removeAfterRender(t){this._afterRenderList=this._afterRenderList.filter(e=>e!==t)}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;let t=U.F.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new C.y))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRefresh(){this.autoRefresh||(this.autoRefresh=!0,this.pluginService.register(new M.J))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new P.z))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new r.YZ;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new L.Q,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;let t=U.F.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){if(this.htmlAttribute)return;let e=U.F.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){if(this.reactAttribute)return;let e=U.F.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){let t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw Error("\u6682\u4E0D\u652F\u6301")}createLayer(t,e){if("released"===this.releaseStatus)return;let i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){let e=this.children;e.sort(t),this.removeAllChild(),e.forEach(t=>{this.appendChild(t)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if("released"===this.releaseStatus)return;this.startAnimate();let i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if("harmony"===this.global.env){let t=this.window.getContext().nativeContext;this.forEachChildren((e,i)=>{if(i>0){let i=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(i)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(t=>{this.nextFrameRenderLayerSet.add(t)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getSpecifiedRequestAnimationFrame(this.rafId)(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if("released"===this.releaseStatus)return;this.startAnimate();let t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){let i=[];for(let e=0;e<t.length;e++){let s=t[e];"virtual"===s.layerMode&&(s=s.getNativeHandler().mainHandler.layer),i.includes(s)||i.push(s)}i.forEach(t=>{t.renderCount>this.renderCount||(t.renderCount=this.renderCount+1,t===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),t.render({renderService:this.renderService,background:t===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(i=>{i.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(i=>{i.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,s,r){let n=!0;"object"==typeof t?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),!1===e&&(n=!1)):(this.viewBox.setValue(t,e,t+i,e+s),!1===r&&(n=!1)),this.forEachChildren(t=>{t.resizeView(this.viewBox.width(),this.viewBox.height())}),n&&this.render()}setDpr(t,e=!0){this.forEachChildren(e=>{e.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw Error("\u6682\u4E0D\u652F\u6301")}export(t){throw Error("\u6682\u4E0D\u652F\u6301")}pick(t,e){if("released"===this.releaseStatus)return;let i=this.getPickerService().pick(this.children,new n.E9(t,e),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}setToFrame(t){throw Error("\u6682\u4E0D\u652F\u6301")}release(){var t,e;super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(t=>{t.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(t=>{t.setStage&&t.setStage(null,null),this.interactiveLayer.removeChild(t)}),this.interactiveLayer.release()),this.window.release(),null==(t=this._ticker)||t.remTimeline(null==this?void 0:this.timeline),null==(e=this._ticker)||e.removeListener("tick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){"released"!==this.releaseStatus&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){"released"!==this.releaseStatus&&this.forEachChildren((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:0===i,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if("released"===this.releaseStatus)return;let i=_.n.get(a.Oo),s=e?-e.x1:0,r=e?-e.y1:0,n=e?e.x2:this.viewWidth,h=e?e.y2:this.viewHeight,o=e?e.width():this.viewWidth,l=e?e.height():this.viewHeight;return i.create({viewBox:{x1:s,y1:r,x2:n,y2:h},width:o,height:l,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if("released"===this.releaseStatus)return;let i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){let e=this.global.mapToCanvasPoint(t,this.window);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=_.n.get(S.hH)),this.pickerService}reInit(){this.renderService.reInit(),this.pickerService.reInit()}}},446861:function(t,e,i){i.d(e,{Il:()=>c,Oo:()=>u,zd:()=>d});var s=i(669745),r=i(536163),n=i(496270),a=i(64849),h=i(914118),o=i(894442),l=i(846822);let u=Symbol.for("VWindow"),d=Symbol.for("WindowHandlerContribution"),c=class extends l.w{get width(){if(this._handler){let t=this._handler.getWH();return this._width=t.width}return this._width}get height(){if(this._handler){let t=this._handler.getWH();return this._height=t.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){super(),this.hooks={onChange:new h.n(["x","y","width","height"])},this.active=()=>{let t=this.global;t.env&&!this.actived&&(a.n.getNamed(d,t.env).configure(this,t),this.actived=!0)},this._uid=n.R.GenAutoIncrementId(),this.global=o.w.global,this.postInit()}_nativeAddEventListener(t,e,i){return this._handler.addEventListener(t,e,i)}_nativeRemoveEventListener(t,e,i){return this._handler.removeEventListener(t,e,i)}_nativeDispatchEvent(t){return this._handler.dispatchEvent(t)}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var t;return null!=(t=this._handler.getStyle())?t:{}}set style(t){this._handler.setStyle(t)}create(t){var e,i;this._handler.createWindow(t);let s=this._handler.getWH();this._width=s.width,this._height=s.height,t.viewBox?this.setViewBox(t.viewBox):!1!==t.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!=(e=t.width)?e:this._width,y2:null!=(i=t.height)?i:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(t){this._handler=t}setDpr(t){return this._handler.setDpr(t)}resize(t,e){return this._handler.resizeWindow(t,e)}configure(){throw Error("\u6682\u4E0D\u652F\u6301")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this.clearAllEventListeners(),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(t){return this._handler.getImageBuffer?this._handler.getImageBuffer(t):null}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(t){this._handler.clearViewBox(t)}setViewBox(t){this._handler.setViewBox(t)}setViewBoxTransform(t,e,i,s,r,n){this._handler.setViewBoxTransform(t,e,i,s,r,n)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(t,e){let i=this._handler.getViewBox(),s={x:t,y:e};return this._handler.getViewBoxTransform().transformPoint({x:t,y:e},s),s.x-=i.x1,s.y-=i.y1,s}hasSubView(){let t=this._handler.getViewBox();return!(0===t.x1&&0===t.y1&&(0,r.Yt)(this.width,t.width())&&(0,r.Yt)(this.height,t.height()))}isVisible(t){return this._handler.isVisible(t)}onVisibleChange(t){return this._handler.onVisibleChange(t)}getTopLeft(t){return this._handler.getTopLeft(t)}};c=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],c)},959747:function(t,e,i){let s;i.d(e,{kP:()=>n});var r=i(894442);function n(){if(null==s)try{let t=document.createElement("canvas"),e=t.getContext("2d");(s=!!(window&&t.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&e&&e.isPointInPath&&e.isPointInStroke))&&(s=!!document.createElement)}catch(t){s=!1}let t=r.w.global&&r.w.global.env;return t?"browser"===t:s}},843181:function(t,e,i){i.d(e,{g:()=>s});let s="*"},745770:function(t,e,i){i.d(e,{x:()=>r});var s=i(796241);class r{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){let e=t.graphic;if(e.stage){let i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(t){this.nativeEvent.preventDefault&&(0,s.Z)(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(t){this.nativeEvent.stopPropagation&&(0,s.Z)(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw Error("Method not implemented.")}}},693906:function(t,e,i){i.d(e,{A:()=>r});var s=i(745770);class r extends s.x{constructor(t,e){super(),this.type=t,this.detail=e}}},625872:function(t,e,i){i.d(e,{m:()=>s});let s="object"==typeof performance&&performance.now?performance:Date},295277:function(t,e,i){i.d(e,{F:()=>s});class s{static registerPlugin(t,e){s._pluginClasses[t]=e}static getPlugin(t){return s._pluginClasses[t]}}s._pluginClasses={}},356109:function(t,e,i){i.d(e,{Q:()=>m});var s=i(704654),r=i(695723),n=i(309762),a=i(408830),h=i(513116),o=i(922552),l=i(917486),u=i(930615),d=i(894442),c=i(753794),p=i(52058);let g=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...h.DH];class f extends h.zs{constructor(t){super(t),this.type="arc",this.numberType=c.r_}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,outerRadius:i,innerRadius:s}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(s)}getParsedCornerRadius(){let t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:n=t.outerPadding}=this.attribute,{outerRadius:a=t.outerRadius,innerRadius:h=t.innerRadius}=this.attribute;if(a+=n,h-=i,0===e||"0%"===e)return 0;let o=Math.abs(a-h),l=t=>Math.min((0,s.Z)(t,!0)?t:o*parseFloat(t)/100,o/2);if((0,r.Z)(e)){let t=e.map(t=>l(t)||0);return 0===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:(3===t.length&&t.push(0),t)}return l(e)}getParsedAngle(){let t=this.getGraphicTheme(),{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute,{cap:s=t.cap}=this.attribute,r=i-e>=0?1:-1,h=i-e;if(i=(e=(0,n.gt)(e))+h,s&&(0,a.Wn)(h)<a.f7-a.Ho){let n=1,h=1;s.length&&(n=Number(s[0]),h=Number(s[1]));let{outerRadius:o=t.outerRadius,innerRadius:l=t.innerRadius}=this.attribute,{outerPadding:u=t.outerPadding,innerPadding:d=t.innerPadding}=this.attribute,c=Math.abs((o+=u)-(l-=d))/2,p=c/o;if(c>a.Ho&&o>a.Ho)return{startAngle:e-r*p*n,endAngle:i+r*p*h,sc:r*p*n,ec:r*p*h}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){let i=this.getGraphicTheme(),{innerPadding:s=i.innerPadding,outerPadding:r=i.outerPadding,padAngle:n=i.padAngle}=this.attribute,{outerRadius:h=i.outerRadius,innerRadius:o=i.innerRadius}=this.attribute;h+=r,o-=s;let{padRadius:l=(0,a._b)(h*h+o*o)}=this.attribute,u=(0,a.Wn)(e-t),d=t,c=e,p=t,g=e,f=n/2,m=u,v=u;if(f>a.Ho&&l>a.Ho){let i=e>t?1:-1,s=(0,a.ZR)(Number(l)/o*(0,a.O$)(f)),r=(0,a.ZR)(Number(l)/h*(0,a.O$)(f));return(m-=2*s)>a.Ho?(s*=i,p+=s,g-=s):(m=0,p=g=(t+e)/2),(v-=2*r)>a.Ho?(r*=i,d+=r,c-=r):(v=0,d=c=(t+e)/2),{outerStartAngle:d,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:m,outerDeltaAngle:v}}return{outerStartAngle:d,outerEndAngle:c,innerStartAngle:p,innerEndAngle:g,innerDeltaAngle:m,outerDeltaAngle:v}}getGraphicTheme(){return(0,u.gh)(this).arc}updateAABBBounds(t,e,i,s){this.updatePathProxyAABBBounds(i)||(s?this.updateArcAABBBoundsImprecise(t,e,i):this.updateArcAABBBoundsAccurate(t,e,i));let{tb1:r,tb2:n}=d.w.graphicService.updateTempAABBBounds(i);(0,p.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.setWidthHeightWithoutTransform(i);let{lineJoin:a=e.lineJoin}=t;return d.w.graphicService.transformAABBBounds(t,i,e,"miter"===a,this),i}updateArcAABBBoundsImprecise(t,e,i){let{outerRadius:s=e.outerRadius,innerRadius:r=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:a=e.innerPadding}=t;return(s+=n)<(r-=a)&&(s=r),i.set(-s,-s,s,s),i}updateArcAABBBoundsAccurate(t,e,i){let{outerRadius:s=e.outerRadius,innerRadius:r=e.innerRadius}=t,{outerPadding:n=e.outerPadding,innerPadding:h=e.innerPadding}=t;if((s+=n)<(r-=h)){let t=s;s=r,r=t}let{endAngle:o=e.endAngle,startAngle:u=e.startAngle}=t;if(u>o){let t=u;u=o,o=t}return s<=a.Ho?i.set(0,0,0,0):Math.abs(o-u)>a.f7-a.Ho?i.set(-s,-s,s,s):((0,l.jx)(u,o,s,i),(0,l.jx)(u,o,r,i)),i}needUpdateTags(t){return super.needUpdateTags(t,g)}needUpdateTag(t){return super.needUpdateTag(t,g)}toCustomPath(){var t,e,i,s;let r=super.toCustomPath();if(r)return r;let n=this.attribute,{startAngle:h,endAngle:l}=this.getParsedAngle(),u=(null!=(t=n.innerRadius)?t:0)-(null!=(e=n.innerPadding)?e:0),d=(null!=(i=n.outerRadius)?i:0)-(null!=(s=n.outerPadding)?s:0),c=(0,a.Wn)(l-h),p=l>h;if(d<u){let t=d;d=u,u=t}if(r=new o.r,d<=a.Ho)r.moveTo(0,0);else if(c>=a.f7-a.Ho)r.moveTo(0+d*(0,a.mC)(h),0+d*(0,a.O$)(h)),r.arc(0,0,d,h,l,!p),u>a.Ho&&(r.moveTo(0+u*(0,a.mC)(l),0+u*(0,a.O$)(l)),r.arc(0,0,u,l,h,p));else{let t=d*(0,a.mC)(h),e=d*(0,a.O$)(h),i=u*(0,a.mC)(l),s=u*(0,a.O$)(l);r.moveTo(0+t,0+e),r.arc(0,0,d,h,l,!p),r.lineTo(0+i,0+s),r.arc(0,0,u,l,h,p),r.closePath()}return r}clone(){return new f(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return f.NOWORK_ANIMATE_ATTR}}function m(t){return new f(t)}f.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},h.Wl)},44681:function(t,e,i){i.d(e,{n:()=>d});var s=i(513116),r=i(922552),n=i(917486),a=i(930615),h=i(894442),o=i(753794);let l=["segments","points","curveType","curveTension",...s.DH];class u extends s.zs{constructor(t){super(t),this.type="area",this.numberType=o.Ri}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&0!==t.length}getGraphicTheme(){return(0,a.gh)(this).area}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateAreaAABBBoundsBySegments(t,e,i):this.updateAreaAABBBoundsByPoints(t,e,i)),h.w.graphicService.updateTempAABBBounds(i),this.setWidthHeightWithoutTransform(i);let{lineJoin:s=e.lineJoin}=t;return h.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updateAreaAABBBoundsByPoints(t,e,i,s){let{points:r=e.points}=t;return r.forEach(t=>{var e,s;i.add(t.x,t.y),i.add(null!=(e=t.x1)?e:t.x,null!=(s=t.y1)?s:t.y)}),i}updateAreaAABBBoundsBySegments(t,e,i,s){let{segments:r=e.segments}=t;return r.forEach(t=>{t.points.forEach(t=>{var e,s;i.add(t.x,t.y),i.add(null!=(e=t.x1)?e:t.x,null!=(s=t.y1)?s:t.y)})}),i}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,n.SA)(i,s,e))}needUpdateTags(t){return super.needUpdateTags(t,l)}needUpdateTag(t){return super.needUpdateTag(t,l)}toCustomPath(){let t=super.toCustomPath();if(t)return t;t=new r.r;let e=this.attribute,i=e.segments,s=e=>{if(e&&e.length){let i=!0,s=[];if(e.forEach(e=>{var r,n;!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),s.push({x:null!=(r=e.x1)?r:e.x,y:null!=(n=e.y1)?n:e.y}),i=!1)}),s.length){for(let e=s.length-1;e>=0;e--)t.lineTo(s[e].x,s[e].y);t.closePath()}}};return e.points?s(e.points):i&&i.length&&i.forEach(t=>{s(t.points)}),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},s.Wl)},21577:function(t,e,i){let s,r;i.d(e,{X:()=>h,o:()=>a});var n=i(222669);function a(t){return s||(s=n.i.CreateGraphic("text",{})),s.initAttributes(t),s.AABBBounds}function h(t){return r||(r=n.i.CreateGraphic("richtext",{})),r.setAttributes(t),r.AABBBounds}},426155:function(t,e,i){i.d(e,{g6:()=>tn,SR:()=>ta});var s=i(408830),r=i(704654);class n{bounds(t,e){if((0,r.Z)(t)){let i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return(0,r.Z)(t)?t:Math.min(t[0],t[1])}}function a(t,e,i,r,n){return n?t.arc(i,r,e,0,s.BZ,!1,n):t.arc(i,r,e,0,s.BZ),!1}var h=new class extends n{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,s,r){return a(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return a(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i} a ${r},${r} 0 1,0 ${2*r},0 a ${r},${r} 0 1,0 -${2*r},0`}},o=new class extends n{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,s,r){var n;return n=this.parseSize(e)/6,t.moveTo(-3*n+i,-n+s,r),t.lineTo(-n+i,-n+s,r),t.lineTo(-n+i,-3*n+s,r),t.lineTo(n+i,-3*n+s,r),t.lineTo(n+i,-n+s,r),t.lineTo(3*n+i,-n+s,r),t.lineTo(3*n+i,n+s,r),t.lineTo(n+i,n+s,r),t.lineTo(n+i,3*n+s,r),t.lineTo(-n+i,3*n+s,r),t.lineTo(-n+i,n+s,r),t.lineTo(-3*n+i,n+s,r),t.closePath(),!0}drawOffset(t,e,i,s,r,n){var a;return a=this.parseSize(e)/6,t.moveTo(-3*a+i-r,-a+s-r,n),t.lineTo(-a+i-r,-a+s-r,n),t.lineTo(-a+i-r,-3*a+s-r,n),t.lineTo(a+i+r,-3*a+s-r,n),t.lineTo(a+i+r,-a+s-r,n),t.lineTo(3*a+i+r,-a+s-r,n),t.lineTo(3*a+i+r,a+s+r,n),t.lineTo(a+i+r,a+s+r,n),t.lineTo(a+i+r,3*a+s+r,n),t.lineTo(-a+i-r,3*a+s+r,n),t.lineTo(-a+i-r,a+s+r,n),t.lineTo(-3*a+i-r,a+s+r,n),t.closePath(),!0}};function l(t,e,i,s,r){return t.moveTo(i,s-e,r),t.lineTo(e+i,s,r),t.lineTo(i,s+e,r),t.lineTo(i-e,s,r),t.closePath(),!0}var u=new class extends n{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,s,r){return l(t,this.parseSize(e)/2,i,s,r)}drawFitDir(t,e,i,s,r){return l(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return l(t,this.parseSize(e)/2+r,i,s,n)}};function d(t,e,i,s){let r=2*e;return t.rect(i-e,s-e,r,r),!1}var c=new class extends n{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,s){return d(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return d(t,this.parseSize(e)/2+r,i,s)}};function p(t,e,i,s,r=0){return t.moveTo(i+e+2*r,e+s+r),t.lineTo(i-e-2*r,e+s+r),t.lineTo(i,s-e-2*r),t.closePath(),!0}class g extends n{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,s){return p(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return p(t,this.parseSize(e)/2,i,s,r)}}var f=new g,m=new class extends g{constructor(){super(...arguments),this.type="triangle"}};let v=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),y=Math.sin(s.BZ/10)*v,x=-Math.cos(s.BZ/10)*v;function b(t,e,i,r){let n=y*e,a=x*e;t.moveTo(i,-e+r),t.lineTo(n+i,a+r);for(let h=1;h<5;++h){let o=s.BZ*h/5,l=Math.cos(o),u=Math.sin(o);t.lineTo(u*e+i,-l*e+r),t.lineTo(l*n-u*a+i,u*n+l*a+r)}return t.closePath(),!0}var A=new class extends n{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,s){return b(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return b(t,this.parseSize(e)/2+r,i,s)}};let _=(0,s._b)(3);function B(t,e,i,s){let r=e/_,n=r/5;return t.moveTo(0+i,-e+s),t.lineTo(r/2+i,s),t.lineTo(n/2+i,s),t.lineTo(n/2+i,e+s),t.lineTo(-n/2+i,e+s),t.lineTo(-n/2+i,s),t.lineTo(-r/2+i,s),t.closePath(),!0}var T=new class extends n{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,s){return B(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return B(t,this.parseSize(e)/2+r,i,s)}};function w(t,e,i,s){let r=2*e;return t.moveTo(i,-e+s),t.lineTo(r/3/2+i,e+s),t.lineTo(-r/3/2+i,e+s),t.closePath(),!0}var S=new class extends n{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,s){return w(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return w(t,this.parseSize(e)/2+r,i,s)}};function E(t,e,i,s){return t.moveTo(-e+i,s),t.lineTo(i,e+s),!1}var C=new class extends n{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,s){return E(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return E(t,this.parseSize(e)/2+r,i,s)}};let M=(0,s._b)(3)/2,P=1/(0,s._b)(12);function L(t,e,i,s){let r=e/2,n=e*P,a=e*P+e,h=-r;return t.moveTo(r+i,n+s),t.lineTo(r+i,a+s),t.lineTo(h+i,a+s),t.lineTo(-.5*r-M*n+i,M*r+-.5*n+s),t.lineTo(-.5*r-M*a+i,M*r+-.5*a+s),t.lineTo(-.5*h-M*a+i,M*h+-.5*a+s),t.lineTo(-.5*r+M*n+i,-.5*n-M*r+s),t.lineTo(-.5*r+M*a+i,-.5*a-M*r+s),t.lineTo(-.5*h+M*a+i,-.5*a-M*h+s),t.closePath(),!1}var O=new class extends n{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,s){return L(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return L(t,this.parseSize(e)/2+r,i,s)}};function R(t,e,i,s,r){return t.moveTo(-e+i-2*r,s),t.lineTo(e+i+r,e+s+2*r),t.lineTo(e+i+r,s-e-2*r),t.closePath(),!0}var k=new class extends n{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,s){return R(t,this.parseSize(e)/2,i,s,0)}drawOffset(t,e,i,s,r){return R(t,this.parseSize(e)/2,i,s,r)}};function D(t,e,i,s,r=0){return t.moveTo(i-e-r,e+s+2*r),t.lineTo(e+i+2*r,s),t.lineTo(i-e-r,s-e-2*r),t.closePath(),!0}var U=new class extends n{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,s){return D(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return D(t,this.parseSize(e)/2,i,s,r)}};function I(t,e,i,s,r=0){return t.moveTo(i-e-2*r,s-e-r),t.lineTo(i+e+2*r,s-e-r),t.lineTo(i,s+e+2*r),t.closePath(),!0}var W=new class extends n{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,s){return I(t,this.parseSize(e)/2,i,s)}drawOffset(t,e,i,s,r){return I(t,this.parseSize(e)/2,i,s,r)}};let N=(0,s._b)(3);function z(t,e,i,s){let r=e*N;return t.moveTo(i,s+-r/3*2),t.lineTo(e+i,s+r),t.lineTo(i-e,s+r),t.closePath(),!0}var G=new class extends n{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,s){return z(t,this.parseSize(e)/2/N,i,s)}drawOffset(t,e,i,s,r){return z(t,this.parseSize(e)/2/N+r,i,s)}};function j(t,e,i,s){let r=2*e;return t.moveTo(e+i,s-r),t.lineTo(i-e,s),t.lineTo(e+i,r+s),!0}var H=new class extends n{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,s){return j(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return j(t,this.parseSize(e)/4+r,i,s)}};function F(t,e,i,s){let r=2*e;return t.moveTo(i-e,s-r),t.lineTo(i+e,s),t.lineTo(i-e,r+s),!0}var V=new class extends n{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,s){return F(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return F(t,this.parseSize(e)/4+r,i,s)}};function Z(t,e,i,s){let r=2*e;return t.moveTo(i-r,s+e),t.lineTo(i,s-e),t.lineTo(i+r,s+e),!0}var X=new class extends n{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,s){return Z(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return Z(t,this.parseSize(e)/4+r,i,s)}};function Y(t,e,i,s){let r=2*e;return t.moveTo(i-r,s-e),t.lineTo(i,s+e),t.lineTo(i+r,s-e),!0}var K=new class extends n{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,s){return Y(t,this.parseSize(e)/4,i,s)}drawOffset(t,e,i,s,r){return Y(t,this.parseSize(e)/4+r,i,s)}};function $(t,e,i,s,r){return t.moveTo(i,s-e),t.lineTo(i,s+e),!0}var q=new class extends n{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,s,r){return $(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return $(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e}, ${i-r} L ${e},${i+r}`}};function J(t,e,i,s,r){return t.moveTo(i-e,s),t.lineTo(i+e,s),!0}var Q=new class extends n{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,s,r){return J(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return J(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i} L ${e+r},${i}`}};function tt(t,e,i,s,r){return t.moveTo(i-e,s-e),t.lineTo(i+e,s+e),t.moveTo(i+e,s-e),t.lineTo(i-e,s+e),!0}var te=new class extends n{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,s,r){return tt(t,this.parseSize(e)/2,i,s,r)}drawOffset(t,e,i,s,r,n){return tt(t,this.parseSize(e)/2+r,i,s,n)}drawToSvgPath(t,e,i,s){let r=this.parseSize(t)/2;return`M ${e-r}, ${i-r} L ${e+r},${i+r} M ${e+r}, ${i-r} L ${e-r},${i+r}`}};function ti(t,e,i,s){return t.rect(i-e[0]/2,s-e[1]/2,e[0],e[1]),!1}function ts(t,e,i,s){let r=e/2;return t.rect(i-e/2,s-r/2,e,r),!1}var tr=new class extends n{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,s){return(0,r.Z)(e)?ts(t,e,i,s):ti(t,e,i,s)}drawWithClipRange(t,e,i,s,n,a,h){(0,r.Z)(e)&&(e=[e,e/2]);let o=2*(e[0]+e[1])*n,l=[{x:i+e[0]/2,y:s-e[1]/2},{x:i+e[0]/2,y:s+e[1]/2},{x:i-e[0]/2,y:s+e[1]/2},{x:i-e[0]/2,y:s-e[1]/2}],u=0,d=l[3];t.moveTo(d.x,d.y);for(let e=0;e<l.length;e++){let i=l[e],s=Math.sqrt((i.x-d.x)*(i.x-d.x)+(i.y-d.y)*(i.y-d.y));if(u+s>o){let e=(i.x-d.x)*(o-u)/s,r=(i.y-d.y)*(o-u)/s;t.lineTo(d.x+e,d.y+r);break}t.lineTo(i.x,i.y),d=i,u+=s}return!1}drawOffset(t,e,i,s,n){return(0,r.Z)(e)?ts(t,e+2*n,i,s):ti(t,[e[0]+2*n,e[1]+2*n],i,s)}};let tn={};[h,o,u,c,G,m,A,T,S,C,O,k,U,f,W,H,V,X,K,tr,q,Q,te].forEach(t=>{tn[t.type]=t});let ta={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"}},507042:function(t,e,i){i.d(e,{y:()=>p});var s=i(408830),r=i(513116),n=i(922552),a=i(917486),h=i(930615),o=i(894442),l=i(753794),u=i(52058);let d=["radius","startAngle","endAngle",...r.DH];class c extends r.zs{constructor(t={radius:1}){super(t),this.type="circle",this.numberType=l.Aw}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,radius:i}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)}getGraphicTheme(){return(0,h.gh)(this).circle}updateAABBBounds(t,e,i,s){this.updatePathProxyAABBBounds(i)||(s?this.updateCircleAABBBoundsImprecise(t,e,i):this.updateCircleAABBBoundsAccurate(t,e,i));let{tb1:r,tb2:n}=o.w.graphicService.updateTempAABBBounds(i);return(0,u.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,o.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}updateCircleAABBBoundsImprecise(t,e,i){let{radius:s=e.radius}=t;return i.set(-s,-s,s,s),i}updateCircleAABBBoundsAccurate(t,e,i){let{startAngle:r=e.startAngle,endAngle:n=e.endAngle,radius:h=e.radius}=t;return n-r>s.f7-s.Ho?i.set(-h,-h,h,h):(0,a.jx)(r,n,h,i),i}needUpdateTags(t){return super.needUpdateTags(t,d)}needUpdateTag(t){return super.needUpdateTag(t,d)}toCustomPath(){var t,e,i;let s=super.toCustomPath();if(s)return s;let r=this.attribute,a=null!=(t=r.radius)?t:this.getDefaultAttribute("radius"),h=null!=(e=r.startAngle)?e:this.getDefaultAttribute("startAngle"),o=null!=(i=r.endAngle)?i:this.getDefaultAttribute("endAngle");return(s=new n.r).arc(0,0,a,h,o),s}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=r.Wl},688606:function(t,e,i){i.d(e,{F1:()=>o,Iq:()=>C,J7:()=>_,T5:()=>E,Up:()=>m,VF:()=>T,WC:()=>d,YW:()=>P,ZD:()=>B,bZ:()=>x,e9:()=>b,eh:()=>v,h8:()=>A,jK:()=>M,kx:()=>w,pp:()=>l,q9:()=>c,t8:()=>y,th:()=>S,xF:()=>f});var s=i(669182),r=i(408830),n=i(985476),a=i(922552),h=i(826947);let o={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new s.y},l={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},u={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},d=Object.assign({outerBorder:Object.assign(Object.assign({},u),{distance:0}),innerBorder:Object.assign(Object.assign({},u),{distance:0})},u),c={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"\u2026",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:h.r.fontBounding,keepCenterInLine:!1},p=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null,vue:null},l),d),{alignSelf:"auto"}),{pickStrokeBuffer:0}),g={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},f=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null,roughStyle:null},{_debug_bounds:!1}),p),o),m=Object.assign(Object.assign({},f),{startAngle:0,endAngle:r.f7,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),v=Object.assign(Object.assign(Object.assign({},f),g),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),y=Object.assign(Object.assign({},f),{radius:1,startAngle:0,endAngle:r.f7}),x=Object.assign(Object.assign({},f),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),b=Object.assign(Object.assign({},f),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),A=Object.assign(Object.assign(Object.assign({},f),g),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),_=Object.assign(Object.assign({},f),{path:new a.r,fillStrokeOrder:1,clipRange:1,customPath:()=>{n.Y.getInstance().warn("\u7A7A\u51FD\u6570")}}),B=Object.assign(Object.assign({},f),{points:[],cornerRadius:0,closePath:!0}),T=Object.assign(Object.assign({},f),{width:100,height:100,spikes:5,thickness:.5}),w=Object.assign(Object.assign({},f),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round",drawStrokeWhenZeroWH:!1});Object.assign(Object.assign({},f),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round",drawStrokeWhenZeroWH:!1});let S=Object.assign(Object.assign({},f),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),E=Object.assign(Object.assign(Object.assign({},f),c),{strokeBoundsBuffer:0,keepDirIn3d:!0}),C=Object.assign(Object.assign(Object.assign({},f),c),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),M=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},f),{fill:!0,cornerRadius:0,cornerType:"round"}),P=Object.assign(Object.assign({},M),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1})},753794:function(t,e,i){i.d(e,{$M:()=>f,Aw:()=>h,B5:()=>m,Hf:()=>d,IJ:()=>n,IO:()=>b,I_:()=>l,Kh:()=>p,Lo:()=>A,Nd:()=>o,PN:()=>u,Ri:()=>a,Us:()=>v,_u:()=>g,fB:()=>y,qm:()=>c,r_:()=>r,tA:()=>x});var s=i(434544);let r=(0,s.Gg)(),n=(0,s.Gg)(),a=(0,s.Gg)(),h=(0,s.Gg)(),o=(0,s.Gg)(),l=(0,s.Gg)(),u=(0,s.Gg)(),d=(0,s.Gg)(),c=(0,s.Gg)(),p=(0,s.Gg)();(0,s.Gg)();let g=(0,s.Gg)();(0,s.Gg)();let f=(0,s.Gg)();(0,s.Gg)();let m=(0,s.Gg)(),v=(0,s.Gg)(),y=Symbol.for("GraphicService"),x=Symbol.for("GraphicCreator"),b={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},A=Object.keys(b)},552061:function(t,e,i){i.d(e,{d:()=>h});var s=i(513116),r=i(930615),n=i(753794);class a extends s.zs{constructor(t){super(t),this.type="glyph",this.numberType=n.Nd,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(t){this.detachSubGraphic(),this.subGraphic=t,t.forEach(t=>{t.glyphHost=this,Object.setPrototypeOf(t.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(t=>{t.glyphHost=null,Object.setPrototypeOf(t.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(t){this._onInit=t}onUpdate(t){this._onUpdate=t}isValid(){return!0}setAttribute(t,e,i,s){super.setAttribute(t,e,i,s),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}setAttributes(t,e=!1,i){super.setAttributes(t,e,i),this.subGraphic.forEach(t=>{t.addUpdateShapeAndBoundsTag(),t.addUpdatePositionTag()})}translate(t,e){return super.translate(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}translateTo(t,e){return super.translateTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scale(t,e,i){return super.scale(t,e,i),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}scaleTo(t,e){return super.scaleTo(t,e),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotate(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}rotateTo(t){return super.rotate(t),this.subGraphic.forEach(t=>{t.addUpdatePositionTag(),t.addUpdateBoundTag()}),this}getGraphicTheme(){return(0,r.gh)(this).glyph}updateAABBBounds(t,e,i){return this.getSubGraphic().forEach(t=>{i.union(t.AABBBounds)}),i}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();let t=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),t}needUpdateTags(t){return!1}needUpdateTag(t){return!1}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null==(i=this.currentStates)?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;this.stopStateAnimates();let s={},r=this.subGraphic.map(()=>({}));t.forEach(e=>{var i;let n=this.glyphStateProxy?this.glyphStateProxy(e,t):this.glyphStates[e];n&&(Object.assign(s,n.attributes),(null==(i=n.subAttributes)?void 0:i.length)&&r.forEach((t,e)=>{Object.assign(t,n.subAttributes[e])}))}),this.updateNormalAttrs(s),this.currentStates=t,this.applyStateAttrs(s,t,e)}clearStates(t){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}clone(){let t=new a(Object.assign({},this.attribute));return t.setSubGraphic(this.subGraphic.map(t=>t.clone())),t}getNoWorkAnimateAttr(){return a.NOWORK_ANIMATE_ATTR}}function h(t){return new a(t)}a.NOWORK_ANIMATE_ATTR=s.Wl},222669:function(t,e,i){i.d(e,{i:()=>s});let s=new class{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){let i=this.store.get(t);return i?i(e):null}}},52058:function(t,e,i){i.d(e,{E:()=>s});let s=(t,e,i)=>{let{outerBorder:s,shadowBlur:r=e.shadowBlur}=t;if(s){let t=e.outerBorder,{distance:n=t.distance,lineWidth:a=t.lineWidth}=s;i.expand(n+(r+a)/2)}return i}},726255:function(t,e,i){var s=i(736264),r=i(603390),n=i(753794),a=i(222669);e.Z=new s.n(t=>{t(n.fB).to(r.JG),t(n.tA).toConstantValue(a.i)})},603390:function(t,e,i){i.d(e,{JG:()=>y,M_:()=>v,RT:()=>m});var s,r=i(669745),n=i(362199),a=i(263401),h=i(704654),o=i(914118),l=i(351727),u=i(434544),d=i(624108),c=i(104877),p=i(801557),g=i(753794),f=i(362055);function m(t,e,i){var s;let{x:r=i.x,y:n=i.y,z:a=i.z,dx:h=i.dx,dy:o=i.dy,dz:l=i.dz,scaleX:u=i.scaleX,scaleY:c=i.scaleY,scaleZ:p=i.scaleZ,alpha:g=i.alpha,beta:m=i.beta,angle:v=i.angle,anchor3d:y=e.attribute.anchor,anchor:x}=e.attribute,b=[0,0,0];if(y){if("string"==typeof y[0]){let t=parseFloat(y[0])/100,i=e.AABBBounds;b[0]=i.x1+(i.x2-i.x1)*t}else b[0]=y[0];if("string"==typeof y[1]){let t=parseFloat(y[1])/100,i=e.AABBBounds;b[1]=i.x1+(i.x2-i.x1)*t}else b[1]=y[1];b[2]=null!=(s=y[2])?s:0}if((0,f.TL)(t),(0,f.Iu)(t,t,[r+h,n+o,a+l]),(0,f.Iu)(t,t,[b[0],b[1],b[2]]),(0,f.lM)(t,t,m),(0,f.uD)(t,t,g),(0,f.Iu)(t,t,[-b[0],-b[1],b[2]]),(0,f.mN)(t,t,[u,c,p]),v){let i=d.yp.allocate(),s=[0,0];if(x){if("string"==typeof y[0]){let t=parseFloat(y[0])/100,i=e.AABBBounds;s[0]=i.x1+(i.x2-i.x1)*t}else s[0]=y[0];if("string"==typeof y[1]){let t=parseFloat(y[1])/100,i=e.AABBBounds;s[1]=i.x1+(i.x2-i.x1)*t}else s[1]=y[1]}(0,f.Iu)(i,i,[s[0],s[1],0]),(0,f.jI)(i,i,v),(0,f.Iu)(i,i,[-s[0],-s[1],0]),(0,f.G9)(t,t,i)}}function v(t){let{alpha:e,beta:i}=t.attribute;return e||i}let y=class{constructor(t){this.creator=t,this.hooks={onAttributeUpdate:new o.n(["graphic"]),onSetStage:new o.n(["graphic","stage"]),onRemove:new o.n(["graphic"]),onRelease:new o.n(["graphic"]),onAddIncremental:new o.n(["graphic","group","stage"]),onClearIncremental:new o.n(["graphic","group","stage"]),beforeUpdateAABBBounds:new o.n(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new o.n(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new o.n(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new a.FB,this.tempAABBBounds2=new a.FB}onAttributeUpdate(t){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(t)}onSetStage(t,e){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(t,e)}onRemove(t){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(t)}onRelease(t){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(t)}onAddIncremental(t,e,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(t,e,i)}onClearIncremental(t,e){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(t,e)}beforeUpdateAABBBounds(t,e,i,s){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(t,e,i,s)}afterUpdateAABBBounds(t,e,i,s,r){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(t,e,i,s,r)}clearAABBBounds(t,e,i){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(t,e,i)}updatePathProxyAABBBounds(t,e){let i="function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy;if(!i)return!1;let s=new c.C(t);return(0,p.h)(i.commandList,s,0,0),!0}updateHTMLTextAABBBounds(t,e,i,s){let{textAlign:r,textBaseline:n}=t;if(null!=t.forceBoundsHeight){let e=(0,h.Z)(t.forceBoundsHeight)?t.forceBoundsHeight:t.forceBoundsHeight(),s=(0,l.nV)(n,e,e);i.set(i.x1,s,i.x2,s+e)}if(null!=t.forceBoundsWidth){let e=(0,h.Z)(t.forceBoundsWidth)?t.forceBoundsWidth:t.forceBoundsWidth(),s=(0,l.js)(r,e);i.set(s,i.y1,s+e,i.y2)}}combindShadowAABBBounds(t,e){if(e&&e.shadowRoot){let i=e.shadowRoot.AABBBounds;t.union(i)}}transformAABBBounds(t,e,i,s,r){if(!e.empty()){let{scaleX:r=i.scaleX,scaleY:n=i.scaleY,stroke:a=i.stroke,shadowBlur:h=i.shadowBlur,lineWidth:o=i.lineWidth,pickStrokeBuffer:l=i.pickStrokeBuffer,strokeBoundsBuffer:d=i.strokeBoundsBuffer}=t,c=this.tempAABBBounds1,p=this.tempAABBBounds2;if(a&&o){let t=(o+l)/Math.abs(r+n);(0,u.ph)(c,t,s,d),e.union(c),c.setValue(p.x1,p.y1,p.x2,p.y2)}if(h){let{shadowOffsetX:s=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY}=t,o=h/Math.abs(r+n)*2;(0,u.ph)(c,o,!1,d+1),c.translate(s,a),e.union(c)}}if(this.combindShadowAABBBounds(e,r),e.empty())return;let n=!0,h=r.transMatrix;r&&r.isContainer&&(n=1!==h.a||0!==h.b||0!==h.c||1!==h.d||0!==h.e||0!==h.f),n&&(0,a.n2)(e,e,h)}validCheck(t,e,i,s){if(!s||null!=t.forceBoundsHeight||null!=t.forceBoundsWidth||s.shadowRoot||s.isContainer)return!0;let{visible:r=e.visible}=t;return!(!s.valid||!r)||(i.empty()||(s.parent&&i.transformWithMatrix(s.parent.globalTransMatrix),this.clearAABBBounds(s,s.stage,i),i.clear()),!1)}updateTempAABBBounds(t){let e=this.tempAABBBounds1,i=this.tempAABBBounds2;return e.setValue(t.x1,t.y1,t.x2,t.y2),i.setValue(t.x1,t.y1,t.x2,t.y2),{tb1:e,tb2:i}}};y=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),(s=(0,n.f)(g.tA),function(t,e){s(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],y)},513116:function(t,e,i){i.d(e,{DH:()=>q,zs:()=>ts,Wl:()=>ti});var s=i(263401),r=i(695723),n=i(408830),a=i(669182),h=i(919498),o=i(454326),l=i(83624),u=i(636410),d=i(806761),c=i(480971),p=i(421883),g=i.n(p),f=i(985476),m=i(863778),v=i(796241),y=i(496270);class x extends g(){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=y.R.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let e=this._lastChild,i=0;for(;e;){if(t(e,i++))return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){if(t(e,i++))return;e=e._next}}}forEachChildrenAsync(t,e=!1){var i,s,r,n;return i=this,s=void 0,r=void 0,n=function*(){if(e){let e=this._lastChild,i=0;for(;e;){let s=t(e,i++);if(s.then&&(s=yield s),s)return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){let s=t(e,i++);if(s.then&&(s=yield s),s)return;e=e._next}}},new(r||(r=Promise))(function(t,e){function a(t){try{o(n.next(t))}catch(t){e(t)}}function h(t){try{o(n.throw(t))}catch(t){e(t)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof r?i:new r(function(t){t(i)})).then(a,h)}o((n=n.apply(i,s||[])).next())})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw Error("\u3010Node::appendChild\u3011\u4E0D\u80FD\u5C06\u7236\u8F88\u5143\u7D20append\u4E3A\u5B50\u5143\u7D20");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error("\u6682\u4E0D\u652F\u6301\u8BE5\u51FD\u6570"),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("\u3010Node::insertBefore\u3011\u4E0D\u80FD\u5C06\u7236\u8F88\u5143\u7D20insert\u4E3A\u5B50\u5143\u7D20");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("\u3010Node::insertAfter\u3011\u4E0D\u80FD\u5C06\u7236\u8F88\u5143\u7D20insert\u4E3A\u5B50\u5143\u7D20");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&f.Y.getInstance().warn("insertIntoKeepIdx\u548CinsertInto\u6DF7\u7528\u53EF\u80FD\u4F1A\u5B58\u5728\u9519\u8BEF"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw Error("\u3010Node::insertBefore\u3011\u4E0D\u80FD\u5C06\u7236\u8F88\u5143\u7D20insert\u4E3A\u5B50\u5143\u7D20");if(t.parent&&t.parent.removeChild(t),t.parent=this,0===e)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let t=0;t<e;t++){if(!i)return null;t>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){let i;if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){let i=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,i)}this._nodeList[e]=t;for(let t=e-1;t>=0&&!(i=this._nodeList[t]);t--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;let s=this.insertInto(t,0);return this._ignoreWarn=!1,s}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){let e=this._nodeList.findIndex(e=>e===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){let t=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=t}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw Error("\u6682\u4E0D\u652F\u6301")}find(t,e=!1){let i=null;return this.forEachChildren((e,s)=>!(e===this||!t(e,s))&&(i=e,!0)),e&&this.forEachChildren(e=>{if(e.isContainer){let s=e.find(t,!0);if(s)return i=s,!0}return!1}),i}findAll(t,e=!1){let i=[];return this.forEachChildren((e,s)=>{e!==this&&t(e,s)&&i.push(e)}),e&&this.forEachChildren(e=>{if(e.isContainer){let s=e.findAll(t,!0);s.length&&(i=i.concat(s))}}),i}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(e=>e.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;null==t?void 0:t.parent;)t=t.parent;return t||this}hasChildNodes(){return null!==this._firstChild}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){let t=[],e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(null!==e);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw Error("\u6682\u4E0D\u652F\u6301")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(null!==e)}clone(){throw Error("\u6682\u4E0D\u652F\u6301")}cloneTo(t){throw Error("\u6682\u4E0D\u652F\u6301")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){let s=(0,m.Z)(i,!0)&&i||(0,c.Z)(i)&&i.capture,r=(0,c.Z)(i)&&i.once,n=(0,v.Z)(e)?void 0:e;return t=s?`${t}capture`:t,e=(0,v.Z)(e)?e:e.handleEvent,r?super.once(t,e,n):super.on(t,e,n),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){let s=(0,m.Z)(i,!0)&&i||(0,c.Z)(i)&&i.capture,r=(0,v.Z)(e)?void 0:e;t=s?`${t}capture`:t,e=(0,v.Z)(e)?e:e.handleEvent;let n=(0,c.Z)(i)&&i.once;return super.off(t,e,r,n),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return(0,c.Z)(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}}var b=i(693906),A=i(745770),_=i(688606),B=i(894442),T=i(922552),w=i(166896),S=i(513438),E=i(104877),C=i(801557),M=i(917486),P=i(426155),L=i(704654);let O=new s.FB;class R{constructor(t,e,i=!1){this.pathStr="",this.type=t,(0,r.Z)(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,s,r,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(r=>{t.beginPath(),(0,C.h)(r.path.commandList,t,i,s,e,e),a&&a(r.path,r.attribute)}),!1):((0,C.h)(this.path.commandList,t,i,s,e+r,e+r),!1)}draw(t,e,i,s,r,n){return e=this.parseSize(e),this.drawOffset(t,e,i,s,0,r,n)}parseSize(t){return(0,L.Z)(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,i,s,r,n,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(n=>{n.path.drawWithClipRange(t,e,i,s,r),a&&a(n.path,n.attribute)}),!1):(this.path.drawWithClipRange(t,e,i,s,r),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg){if(!this.svgCache)return;return e.clear(),void this.svgCache.forEach(({path:i})=>{O.x1=i.bounds.x1*t,O.y1=i.bounds.y1*t,O.x2=i.bounds.x2*t,O.y2=i.bounds.y2*t,e.union(O)})}this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}class k{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function D(t,e,i,s){let r=t.indexOf(e,i);if(-1===r)throw Error(s);return r+e.length-1}function U(t,e,i,s=">"){let r=function(t,e,i=">"){let s,r="";for(let n=e;n<t.length;n++){let e=t[n];if(s)e===s&&(s="");else if('"'===e||"'"===e)s=e;else if(e===i[0]){if(!i[1]||t[n+1]===i[1])return{data:r,index:n}}else"	"===e&&(e=" ");r+=e}}(t,e+1,s);if(!r)return;let n=r.data,a=r.index,h=n.search(/\s/),o=n,l=!0;-1!==h&&(o=n.substr(0,h).replace(/\s\s*$/,""),n=n.substr(h+1));let u=o;if(i){let t=o.indexOf(":");-1!==t&&(l=(o=o.substr(t+1))!==r.data.substr(t+1))}return{tagName:o,tagExp:n,closeIndex:a,attrExpPresent:l,rawTagName:u}}let I=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class W{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){let s=e.tagname;"string"==typeof s&&(e.tagname=s),t.addChild(e)}buildAttributesMap(t,e,i){let s={};if(!t)return;let r=function(t,e){let i=[],s=e.exec(t);for(;s;){let r=[];r.startIndex=e.lastIndex-s[0].length;let n=s.length;for(let t=0;t<n;t++)r.push(s[t]);i.push(r),s=e.exec(t)}return i}(t,I),n=r.length;for(let t=0;t<n;t++){let e=r[t][1],i=r[t][4];e&&(s[e]=void 0===i||(isNaN(i)?i:Number(i)))}return s}parseXml(t){t=t.replace(/\r\n?/g,"\n");let e=new k("!xml"),i=e,s="",r="";for(let n=0;n<t.length;n++)if("<"===t[n])if("/"===t[n+1]){let e=D(t,">",n,"Closing Tag is not closed."),a=r.lastIndexOf(".");r=r.substring(0,a),(i=this.tagsNodeStack.pop())&&i.child&&s&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=s),s="",n=e}else if("?"===t[n+1])n=U(t,n,!1,"?>").closeIndex+1;else if("!--"===t.substr(n+1,3))n=D(t,"--\x3e",n+4,"Comment is not closed.");else{let a=U(t,n,!1),h=a.tagName,o=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;if(h!==e.tagname&&(r+=r?"."+h:h),o.length>0&&o.lastIndexOf("/")===o.length-1){"/"===h[h.length-1]?(h=h.substr(0,h.length-1),r=r.substr(0,r.length-1),o=h):o=o.substr(0,o.length-1);let t=new k(h);h!==o&&l&&(t[":@"]=this.buildAttributesMap(o,r,h)),this.addChild(i,t,r),r=r.substr(0,r.lastIndexOf("."))}else{let t=new k(h);this.tagsNodeStack.push(i),h!==o&&l&&(t[":@"]=this.buildAttributesMap(o,r,h)),this.addChild(i,t,r),i=t}s="",n=u}else s+=t[n];return e.child}}class N{constructor(t){this.options=Object.assign({},N.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){var e;return!!this.valid&&(e=new W(this.options).parseXml(t),this.options,function t(e,i){let s={};for(let r=0;r<e.length;r++){let n=e[r],a=function(t){let e=Object.keys(t);for(let t=0;t<e.length;t++){let i=e[t];if(":@"!==i)return i}}(n),h="";if(h=void 0===i?a:i+"."+a,void 0!==a&&n[a]){let e=t(n[a],h);Object.keys(e).length,n[":@"]&&function(t,e,i){if(e){let i=Object.keys(e),s=i.length;for(let r=0;r<s;r++){let s=i[r];t[s]=e[s]}}}(e,n[":@"],0),void 0!==s[a]&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(e)):s[a]=e}}return s}(e))}}N.defaultOptions={};var z=i(753794);let G={duration:200,easing:"cubicOut"};var j=i(669745),H=i(255161),F=i(902978),V=i(624108);let Z=new a.y(1,0,0,1,0,0),X={x:0,y:0},Y=class{get nativeContext(){return this.path}constructor(t,e){this.matrix=new a.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new a.y(1,0,0,1,0,0),this.path=new T.r,this._clearMatrix=new a.y(1,0,0,1,0,0)}getCanvas(){throw Error("\u4E0D\u652F\u6301getCanvas")}getContext(){throw Error("\u4E0D\u652F\u6301getContext")}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}get currentMatrix(){return this.matrix}cloneMatrix(t){return V.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.restore()}reset(){this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new a.y(1,0,0,1,0,0),this.stack.length=0}restore(){this.stack.length>0&&(V.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}highPerformanceRestore(){this.stack.length>0&&(V.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,i=!0){this.matrix.scale(t,e),i&&this.setTransformForCurrent()}setScale(t,e,i=!0){this.matrix.setScale(t,e),i&&this.setTransformForCurrent()}scalePoint(t,e,i,s,r=!0){this.translate(i,s,!1),this.scale(t,e,!1),this.translate(-i,-s,!1),r&&this.setTransformForCurrent()}setTransform(t,e,i,s,r,n,a=!0,h=this.dpr){this.matrix.setValue(h*t,h*e,h*i,h*s,h*r,h*n),a&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,i=this.dpr){this.matrix.setValue(t.a*i,t.b*i,t.c*i,t.d*i,t.e*i,t.f*i),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,i,s,r,n,a=!0){this.matrix.multiply(t,e,i,s,r,n),a&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,i=!0){this.matrix.translate(t,e),i&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let i=t*Math.PI/180;this.rotate(i,e)}rotateAbout(t,e,i,s=!0){this.translate(e,i,!1),this.rotate(t,!1),this.translate(-e,-i,!1),s&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,i,s=!0){this.translate(e,i,!1),this.rotateDegrees(t,!1),this.translate(-e,-i,!1),s&&this.setTransformForCurrent()}beginPath(){this.path.clear()}clip(t,e){}arc(t,e,i,s,r,n){this.path.arc(t,e,i,s,r,n)}arcTo(t,e,i,s,r){this.path.arcTo(t,e,i,s,r)}bezierCurveTo(t,e,i,s,r,n){this.path.bezierCurveTo(t,e,i,s,r,n)}closePath(){this.path.closePath()}ellipse(t,e,i,s,r,n,a,h){}lineTo(t,e){this.path.lineTo(t,e)}moveTo(t,e){this.path.moveTo(t,e)}quadraticCurveTo(t,e,i,s){this.path.quadraticCurveTo(t,e,i,s)}rect(t,e,i,s){this.path.rect(t,e,i,s)}createImageData(t,e){return null}createLinearGradient(t,e,i,s){throw Error("\u4E0D\u652F\u6301createLinearGradient")}createPattern(t,e){throw Error("\u4E0D\u652F\u6301createPattern")}createRadialGradient(t,e,i,s,r,n){throw Error("\u4E0D\u652F\u6301createRadialGradient")}createConicGradient(t,e,i,s){return null}fill(t,e){}fillRect(t,e,i,s){this.path.rect(t,e,i,s)}clearRect(t,e,i,s){}fillText(t,e,i){}getImageData(t,e,i,s){return null}getLineDash(){return[]}isPointInPath(t,e){return this.matrix.transformPoint({x:t,y:e},X),(0,H.XS)(this.path.commandList,X.x,X.y)}isPointInStroke(t,e){if(!this.lineWidth)return!1;this.matrix.transformPoint({x:t,y:e},X);let i=(0,F.D)(this,this.lineWidth,this.dpr);return(0,H.me)(this.path.commandList,i,X.x,X.y)}measureText(t){throw Error("\u4E0D\u652F\u6301measureText")}putImageData(t,e,i){throw Error("\u4E0D\u652F\u6301measureText")}setLineDash(t){}stroke(t){}strokeRect(t,e,i,s){this.path.rect(t,e,i,s)}strokeText(t,e,i){}drawImage(){}setCommonStyle(t,e,i,s,r){}_setCommonStyle(t,e,i,s){}setStrokeStyle(t,e,i,s,r){}_setStrokeStyle(t,e,i,s){}setTextStyleWithoutAlignBaseline(t,e){}setTextStyle(t,e){}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(Z,t,e)}setClearMatrix(t,e,i,s,r,n){this._clearMatrix.setValue(t,e,i,s,r,n)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>V.QE.free(t)),this.stack.length=0}};Y=function(t,e,i,s){var r,n=arguments.length,a=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(a=(n<3?r(a):n>3?r(e,i,a):r(e,i))||a);return n>3&&a&&Object.defineProperty(e,i,a),a}([(0,j.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],Y);let K=new s.FB,$=new a.y;new s.FB;let q=["lineWidth","scaleX","scaleY","angle","anchor","visible"],J=["x","y"],Q=["scaleX","scaleY"],tt=["angle"],te=new h.E9,ti={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class ts extends x{static mixin(t){let e=Object.keys(t);for(let i=0;i<e.length;++i){let s=e[i];Object.defineProperty(ts.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new s.FB,this._updateTag=S.Gz.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage(null!=(e=t.background.background)?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}getGraphicService(){var t,e;return null!=(e=null==(t=this.stage)?void 0:t.graphicService)?e:B.w.graphicService}getAttributes(){return this.attribute}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,s;let{dx:r=t.dx,dy:n=t.dy}=this.attribute;if(e&&this.parent){let t=this.parent.attribute;te.x=r+(null!=(i=t.scrollX)?i:0),te.y=n+(null!=(s=t.scrollY)?s:0)}else te.x=r,te.y=n;return te}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){let t="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let e=this.doUpdateAABBBounds(t);return this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&e.clear(),e}tryUpdateOBBBounds(){return(this._OBBBounds||(this._OBBBounds=new s.a5),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp)?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid)?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds)}combindShadowAABBBounds(t){if(this.shadowRoot){let e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){let{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);let{shape:e}=t,i=this.clipPathMap.get(e)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(i=this.parsePath(e))&&this.clipPathMap.set(e,i)),i}parsePath(t){var e;if(!t)return null;let i=P.g6[t];if(i||(i=ts.userSymbolMap[t]))return i;if(!0===((e=t=P.SR[t]||t).startsWith("<svg")||e.startsWith("<?xml"))){let{svg:e}=(new N).parse(t);if(!e)return null;let i=(0,r.Z)(e.path)?e.path:[e.path];K.clear();let s=[];i.forEach(t=>{let e=(new T.r).fromString(t.d),i={};z.Lo.forEach(e=>{t[e]&&(i[z.IO[e]]=t[e])}),s.push({path:e,attribute:i}),K.union(e.bounds)});let a=K.width(),h=K.height(),o=1/(0,n.Fp)(a,h);s.forEach(t=>t.path.transform(0,0,o,o));let l=new R(t,s,!0);return ts.userSymbolMap[t]=l,l}let s=(new T.r).fromString(t),a=s.bounds.width(),h=s.bounds.height(),o=1/(0,n.Fp)(a,h);s.transform(0,0,o,o);let l=new R(t,s);return ts.userSymbolMap[t]=l,l}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;let e=this.getGraphicTheme();this._AABBBounds.clear();let i=this.attribute,s=this.updateAABBBounds(i,e,this._AABBBounds,t),{boundsPadding:r=e.boundsPadding}=i,n=(0,M.dj)(r);return n&&s.expand(n),this.clearUpdateBoundTag(),s}updatePathProxyAABBBounds(t){let e="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;let i=new E.C(t);return(0,C.h)(e.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){let t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new a.y),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&S.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&S.Gz.UPDATE_BOUNDS)&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&S.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&S.Gz.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&S.Gz.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;let i=this.attribute;return Number.isFinite((null!=(t=i.x)?t:0)+(null!=(e=i.y)?e:0))}_validNumber(t){return null==t||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&S.Gz.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=S.Gz.CLEAR_SHAPE}containsPoint(t,e,i,s){if(!s)return!1;if(i===S.LZ.GLOBAL){let i=new h.E9(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),t=i.x,e=i.y}return s.containsPoint(this,{x:t,y:e})}setWidthHeightWithoutTransform(t){this.widthWithoutTransform=t.x2-t.x1,this.heightWithoutTransform=t.y2-t.y1}setAttributesAndPreventAnimate(t,e=!1,i,s){this.setAttributes(t,e,i),this.animates&&this.animates.forEach(e=>{(e.priority!==1/0||s)&&Object.keys(t).forEach(t=>{e.preventAttr(t)})})}setAttributes(t,e=!1,i){t&&((t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i))}_setAttributes(t,e=!1,i){let s=Object.keys(t);for(let e=0;e<s.length;e++){let i=s[e];this.attribute[i]=t[i]}this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(s))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,s){var r;let n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,s);n?this._setAttributes(n,i,s):(0,o.Z)(null==(r=this.normalAttrs)?void 0:r[t])?(this.attribute[t]=e,this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)):this.normalAttrs[t]=e,"background"===t?this.loadImage(e,!0):"shadowGraphic"===t&&this.setShadowGraphic(e)}needUpdateTags(t,e=q){for(let i=0;i<e.length;i++){let s=e[i];if(-1!==t.indexOf(s))return!0}return!1}needUpdateTag(t,e=q){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){let e={type:S.Gk.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=S.Gz.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,s;if(0===t&&0===e)return this;let r={type:S.Gk.TRANSLATE},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,J,r);n&&(t=n.x,e=n.y,delete n.x,delete n.y,this._setAttributes(n));let a=this.attribute,h=a.postMatrix;return h?B.w.transformUtil.fromMatrix(h,h).translate(t,e):(a.x=(null!=(i=a.x)?i:_.F1.x)+t,a.y=(null!=(s=a.y)?s:_.F1.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}translateTo(t,e){let i=this.attribute;if(i.x===t&&i.y===e)return this;let s={type:S.Gk.TRANSLATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,J,s);return r?this._setAttributes(r,!1,s):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)),this}scale(t,e,i){var s,r;if(1===t&&1===e)return this;let n={type:S.Gk.SCALE},h=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,Q,n);h&&(t=h.scaleX,e=h.scaleY,delete h.scaleX,delete h.scaleY,this._setAttributes(h));let o=this.attribute;if(i){let{postMatrix:s}=this.attribute;s||(o.postMatrix=s=new a.y),B.w.transformUtil.fromMatrix(s,s).scale(t,e,i)}else o.scaleX=(null!=(s=o.scaleX)?s:_.F1.scaleX)*t,o.scaleY=(null!=(r=o.scaleY)?r:_.F1.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}scaleTo(t,e){let i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;let s={type:S.Gk.SCALE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,Q,s);return r?this._setAttributes(r,!1,s):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s)),this}rotate(t,e){var i;if(0===t)return this;let s={type:S.Gk.ROTATE},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,tt,s);r&&(delete r.angle,this._setAttributes(r,!1,s));let n=this.attribute;if(e){let{postMatrix:i}=this.attribute;i||(n.postMatrix=i=new a.y),B.w.transformUtil.fromMatrix(i,i).rotate(t,e)}else n.angle=(null!=(i=n.angle)?i:_.F1.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}rotateTo(t){let e=this.attribute;if(e.angle===t)return this;let i={type:S.Gk.ROTATE_TO},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,tt,i);return s?this._setAttributes(s,!1,i):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}skewTo(t,e){return this}onAttributeUpdate(t){t&&t.skipUpdateCallback||(this.getGraphicService().onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!(0,o.Z)(t)||this.currentStates.includes(t))}getState(t){var e;return null==(e=this.states)?void 0:e[t]}applyStateAttrs(t,e,i,s){var r,n;if(i){let e,i=Object.keys(t),a=this.getNoWorkAnimateAttr(),h={};i.forEach(i=>{a[i]?(e||(e={}),e[i]=t[i]):h[i]=s&&void 0===t[i]?this.getDefaultAttribute(i):t[i]});let o=null!=(n=null!=(r=this.context&&this.context.stateAnimateConfig)?r:this.stateAnimateConfig)?n:G;this.applyAnimationState(["state"],[{name:"state",animation:{type:"state",to:h,duration:o.duration,easing:o.easing}}]),e&&this.setAttributesAndPreventAnimate(e,!1,{type:S.Gk.STATE})}else this.stopStateAnimates(),this.setAttributesAndPreventAnimate(t,!1,{type:S.Gk.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t);this._emitCustomEvent("afterStateUpdate",{type:S.Gk.STATE})}updateNormalAttrs(t){let e={};this.normalAttrs?(Object.keys(t).forEach(t=>{t in this.normalAttrs?(e[t]=this.normalAttrs[t],delete this.normalAttrs[t]):e[t]=this.getNormalAttribute(t)}),Object.keys(this.normalAttrs).forEach(e=>{t[e]=this.normalAttrs[e]})):Object.keys(t).forEach(t=>{e[t]=this.getNormalAttribute(t)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){var e,i;let s=this.attribute[t];return this.animates?null==(e=this.finalAttribute)?void 0:e[t]:null!=s?s:null==(i=this.finalAttribute)?void 0:i[t]}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){let i=(0,r.Z)(t)?e=>!t.includes(e):e=>e!==t,s=this.currentStates.filter(i);s.length!==this.currentStates.length&&this.useStates(s,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){let i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var s;if(this.currentStates&&this.currentStates.includes(t)&&(e||1===this.currentStates.length))return;let r=e&&(null==(s=this.currentStates)?void 0:s.length)?this.currentStates.concat([t]):[t];this.useStates(r,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null==(i=this.currentStates)?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;let s={};t.forEach(e=>{var i;let r=this.stateProxy?this.stateProxy(e,t):null==(i=this.states)?void 0:i[e];r&&Object.assign(s,r)}),this.updateNormalAttrs(s),this.currentStates=t,this.applyStateAttrs(s,t,e)}addUpdateBoundTag(){this._updateTag|=S.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=S.Gz.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=S.Gz.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&S.Gz.UPDATE_SHAPE_AND_BOUNDS)===S.Gz.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=S.Gz.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=S.Gz.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=S.Gz.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=S.Gz.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=S.Gz.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=S.Gz.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=S.Gz.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&S.Gz.UPDATE_LAYOUT)}getAnchor(t,e,i){let s=[0,0],r=()=>{if(e.b)return e.b;let t=this.clone();return t.attribute.angle=0,t.attribute.scaleCenter=null,i&&(t.attribute.scaleX=1,t.attribute.scaleY=1),e.b=t.AABBBounds,e.b};if("string"==typeof t[0]){let e=parseFloat(t[0])/100,i=r();s[0]=i.x1+(i.x2-i.x1)*e}else s[0]=t[0];if("string"==typeof t[1]){let e=parseFloat(t[1])/100,i=r();s[1]=i.y1+(i.y2-i.y1)*e}else s[1]=t[1];return s}doUpdateLocalMatrix(){let{x:t=_.F1.x,y:e=_.F1.y,scaleX:i=_.F1.scaleX,scaleY:s=_.F1.scaleY,angle:r=_.F1.angle,scaleCenter:n,anchor:h,postMatrix:o}=this.attribute,l=[0,0],u={};if(h&&r&&(l=this.getAnchor(h,u)),n&&(1!==i||1!==s)){let a=this._transMatrix;a.reset(),a.translate(l[0],l[1]),a.rotate(r),a.translate(-l[0],-l[1]),a.translate(t,e),l=this.getAnchor(n,u,!0),B.w.transformUtil.fromMatrix(a,a).scale(i,s,{x:l[0],y:l[1]})}else(0,a.X)(this._transMatrix,this._transMatrix.reset(),t,e,i,s,r,h&&l);let d=this.getOffsetXY(_.F1);if(this._transMatrix.e+=d.x,this._transMatrix.f+=d.y,o){let t=$.setValue(o.a,o.b,o.c,o.d,o.e,o.f),e=this._transMatrix;t.multiply(e.a,e.b,e.c,e.d,e.e,e.f),e.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);let{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){let e=t.getTimeline();this.animates.forEach(t=>{t.timeline.isGlobal&&(t.setTimeline(e),e.addAnimate(t))})}this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:S.Gk.ANIMATE_END})}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return null!=(e=this.attribute[t])?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=null!=t?t:B.w.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return(0,l.Z)(t,!0)?this.pathProxy=(new T.r).fromString(t):this.pathProxy=new T.r,this.pathProxy}loadImage(t,e=!1){var i;if(!t||e&&!(!(i=t).fill&&!i.stroke))return;this.resources||(this.resources=new Map);let s={data:"init",state:null};this.resources.set(t,s),"string"==typeof t?(s.state="loading",t.startsWith("<svg")?(w.h.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):((0,u.Z)(t)||t.includes("/")||(0,d.Z)(t))&&(w.h.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):(0,c.Z)(t)?(s.state="success",s.data=t,this.backgroundImg=this.backgroundImg||e):s.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;let s=this.resources.get(t);s&&(s.state="success",s.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;let i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(t=>{t.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",this.stopAnimates(),B.w.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,s;if(this._events&&t in this._events){let r=new b.A(t,e);r.bubbles=!1,r.manager=null==(s=null==(i=this.stage)?void 0:i.eventSystem)?void 0:s.manager,this.dispatchEvent(r)}}toCustomPath(){var t,e,i;let s=null==(i=null==(e=(null==(t=this.stage)?void 0:t.renderService)||B.w.renderService)?void 0:e.drawContribution)?void 0:i.getRenderContribution(this);if(s){let t=new Y(null,1);return s.drawShape(this,t,0,0,{},{}),t.path}return null}}ts.userSymbolMap={},ts.mixin({dispatchEvent(t){var e;if(!(t instanceof A.x))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=[],t.detailPath&&(t.detailPath=[]),t.target=this,null==(e=null==t?void 0:t.manager)||e.dispatchEvent(t),!t.defaultPrevented},emit(t,e){return this.dispatchEvent(new b.A(t,e))}})},989568:function(t,e,i){i.d(e,{ZA:()=>c,sS:()=>p});var s,r,n=i(919498),a=i(894442),h=i(513116),o=i(930615),l=i(513438),u=i(753794),d=i(688606);(s=r||(r={}))[s.LESS_GROUP=0]="LESS_GROUP",s[s.MORE_GROUP=1]="MORE_GROUP";class c extends h.zs{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=u.I_,this._childUpdateTag=l.Gz.UPDATE_BOUNDS}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new o.Q2),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new o.Q2)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren(e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,i){if(i===l.LZ.GLOBAL){let i=new n.E9(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&l.Gz.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),"empty"===this.attribute.boundsMode&&e.clear(),e}doUpdateLocalMatrix(){let{x:t=d.F1.x,y:e=d.F1.y,dx:i=d.F1.dx,dy:s=d.F1.dy,scaleX:r=d.F1.scaleX,scaleY:n=d.F1.scaleY,angle:a=d.F1.angle,postMatrix:h}=this.attribute;if(0!==t||0!==e||0!==i||0!==s||1!==r||1!==n||0!==a||h)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return(0,o.gh)(this).group}updateAABBBounds(t,e,i){let s=i;i=i.clone();let{width:r,height:n,path:h,clip:o=e.clip}=t;if(h&&h.length?h.forEach(t=>{i.union(t.AABBBounds)}):null!=r&&null!=n&&i.set(0,0,Math.max(0,r),Math.max(0,n)),!o){this.forEachChildren(t=>{i.union(t.AABBBounds)});let{scrollX:e=0,scrollY:s=0}=t;i.translate(e,s)}return a.w.graphicService.updateTempAABBBounds(i),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),s.copy(i),s}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;let t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=l.Gz.CLEAR_BOUNDS,this._childUpdateTag&=l.Gz.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=l.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&l.Gz.UPDATE_BOUNDS||(this._childUpdateTag|=l.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){let e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),this.getGraphicService().onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),this.getGraphicService().onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){let i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){let e=super.removeChild(t);return this.getGraphicService().onRemove(t),t.stage=null,this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{this.getGraphicService().onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t),this.forEachChildren(e=>{e.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&l.Gz.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(e=>e.name===t,e)}createOrUpdateChild(t,e,i){let s=this._getChildByName(t);return s?s.setAttributes(e):((s=a.w.graphicService.creator[i](e)).name=t,this.add(s)),s}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren(e=>{e.release(t)}),super.release()}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=h.Wl},317647:function(t,e,i){i.d(e,{B:()=>d,E:()=>u});var s=i(513116),r=i(688606),n=i(930615),a=i(894442),h=i(753794),o=i(52058);let l=["width","height","image",...s.DH];class u extends s.zs{constructor(t){super(t),this.type="image",this.numberType=h.PN,this.loadImage(this.attribute.image)}getImageElement(){let{image:t}=this.attribute;if(!t||!this.resources)return null;let e=this.resources.get(t);return"success"!==e.state?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return null!=(t=this.attribute.repeatX)?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return null!=(t=this.attribute.repeatY)?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,s){return"image"===t&&this.loadImage(e),super.setAttribute(t,e,i,s)}getGraphicTheme(){return(0,n.gh)(this).image}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{maxWidth:s=e.maxWidth,maxHeight:r=e.maxHeight}=t,{width:n,height:a}=t;if(null==n||null==a){let t=this.getImageElement();if(t){let e=t.width,i=t.height;if(null!=n)a=i/e*n;else if(null!=a)n=e/i*a;else{let t=e/i;t>s/r?(n=s,a=s/t):(a=r,n=r*t)}}else n=s,a=r}this._actualWidth=n,this._actualHeight=a,i.set(0,0,n,a)}let{tb1:s,tb2:r}=a.w.graphicService.updateTempAABBBounds(i);return(0,o.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getDefaultAttribute(t){return r.jK[t]}needUpdateTags(t){return super.needUpdateTags(t,l)}needUpdateTag(t){return super.needUpdateTag(t,l)}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},s.Wl)},289813:function(t,e,i){i.d(e,{W:()=>d});var s=i(513116),r=i(930615),n=i(894442),a=i(917486),h=i(922552),o=i(753794);let l=["segments","points","curveType","curveTension",...s.DH];class u extends s.zs{constructor(t={}){super(t),this.type="line",this.numberType=o.Hf}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&!(t.length<=1)}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,a.SA)(i,s,e))}getGraphicTheme(){return(0,r.gh)(this).line}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,i):this.updateLineAABBBoundsByPoints(t,e,i)),n.w.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:s=e.lineJoin}=t;return n.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updateLineAABBBoundsByPoints(t,e,i,s){let{points:r=e.points,connectedType:n}=t;return r.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)}),i}updateLineAABBBoundsBySegments(t,e,i,s){let{segments:r=e.segments,connectedType:n}=t;return r.forEach(t=>{t.points.forEach(t=>{!1===t.defined&&"connect"!==n||i.add(t.x,t.y)})}),i}needUpdateTags(t){return super.needUpdateTags(t,l)}needUpdateTag(t){return super.needUpdateTag(t,l)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let e=this.attribute;t=new h.r;let i=e.segments,s=e=>{if(e&&e.length){let i=!0;e.forEach(e=>{!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),i=!1)})}};return i&&i.length?i.forEach(t=>{s(t.points)}):e.points&&s(e.points),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},s.Wl)},84319:function(t,e,i){i.d(e,{E:()=>p});var s=i(454326),r=i(83624),n=i(513116),a=i(922552),h=i(930615),o=i(894442),l=i(753794),u=i(52058);let d=["path","customPath",...n.DH];class c extends n.zs{constructor(t){super(t),this.type="path",this.numberType=l.qm}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{path:t}=this.attribute;return null!=t&&""!==t}getParsedPathShape(){let t=this.getGraphicTheme();if(!this.valid)return t.path;let e=this.attribute;return e.path instanceof a.r?e.path:((0,s.Z)(this.cache)&&this.doUpdatePathShape(),this.cache instanceof a.r?this.cache:t.path)}getGraphicTheme(){return(0,h.gh)(this).path}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let t=this.getParsedPathShape();i.union(t.getBounds())}let{tb1:s,tb2:r}=o.w.graphicService.updateTempAABBBounds(i);(0,u.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:n=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===n,this),i}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){let t=this.attribute;(0,r.Z)(t.path,!0)?this.cache=(new a.r).fromString(t.path):t.customPath&&(this.cache=new a.r,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,d)}needUpdateTag(t){return super.needUpdateTag(t,d)}toCustomPath(){return(new a.r).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new c(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return c.NOWORK_ANIMATE_ATTR}}function p(t){return new c(t)}c.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},n.Wl)},5581:function(t,e,i){i.d(e,{p:()=>d});var s=i(513116),r=i(930615),n=i(917486),a=i(922552),h=i(894442),o=i(753794);let l=["points","cornerRadius",...s.DH];class u extends s.zs{constructor(t){super(t),this.type="polygon",this.numberType=o.Kh}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return(0,r.gh)(this).polygon}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(t,e,i),h.w.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:s=e.lineJoin}=t;return h.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}updatePolygonAABBBoundsImprecise(t,e,i){let{points:s=e.points}=t;return s.forEach(t=>{i.add(t.x,t.y)}),i}_interpolate(t,e,i,s,r){"points"===t&&(r.points=(0,n.SA)(i,s,e))}needUpdateTags(t){return super.needUpdateTags(t,l)}needUpdateTag(t){return super.needUpdateTag(t,l)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let e=this.attribute.points;return t=new a.r,e.forEach((e,i)=>{0===i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.closePath(),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function d(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=s.Wl},312555:function(t,e,i){i.d(e,{f:()=>c});var s=i(513116),r=i(922552),n=i(930615),a=i(894442),h=i(753794),o=i(274411),l=i(52058);let u=["width","x1","y1","height","cornerRadius",...s.DH];class d extends s.zs{constructor(t){super(t),this.type="rect",this.numberType=h._u}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return(0,n.gh)(this).rect}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{width:e,height:s}=t,{x1:r,y1:n,x:a,y:h}=t;e=null!=e?e:r-a,s=null!=s?s:n-h,(isFinite(e)||isFinite(s)||isFinite(a)||isFinite(h))&&i.set(0,0,e||0,s||0)}let{tb1:s,tb2:r}=a.w.graphicService.updateTempAABBBounds(i);return(0,l.E)(t,e,s),i.union(s),s.setValue(r.x1,r.y1,r.x2,r.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}needUpdateTags(t){return super.needUpdateTags(t,u)}needUpdateTag(t){return super.needUpdateTag(t,u)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let e=this.attribute,{x:i,y:s,width:n,height:a}=(0,o.p)(e);return(t=new r.r).moveTo(i,s),t.rect(i,s,n,a),t}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function c(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=s.Wl},862978:function(t,e,i){i.d(e,{p:()=>B});var s=i(83624),r=i(704654),n=i(513116),a=i(688606),h=i(114123);class o{constructor(t,e,i,s,r,n,a,o,l,u,d,c,p,g){this.left=t,this.top=e,this.width=i,this.height=s,this.actualHeight=0,this.bottom=e+s,this.right=t+i,this.ellipsis=r,this.wordBreak=n,this.verticalDirection=a,this.lines=[],this.globalAlign=o,this.globalBaseline=l,this.layoutDirection=u,this.directionKey=h.i7[this.layoutDirection],this.isWidthMax=d,this.isHeightMax=c,this.singleLine=p,g?(g.clear(),this.icons=g):this.icons=new Map}draw(t,e){let{width:i,height:s}=this.getActualSize(),r=this.isWidthMax?Math.min(this.width,i):this.width||i||0,n=this.isHeightMax?Math.min(this.height,s):this.height||s||0;n=Math.min(n,s);let a=0;switch(this.globalBaseline){case"top":a=0;break;case"middle":a=-n/2;break;case"bottom":a=-n}let h=0;"right"===this.globalAlign||"end"===this.globalAlign?h=-r:"center"===this.globalAlign&&(h=-r/2);let o=this[this.directionKey.height];this.singleLine&&(o=this.lines[0].height+1);let l=!1;if("middle"===this.verticalDirection)if(this.actualHeight>=o&&0!==o)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+o)break;let n=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+o&&(n=!0,l=!0),this.lines[i].draw(t,n,this.lines[i][this.directionKey.left]+h,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else{let i=Math.floor((o-this.actualHeight)/2);"vertical"===this.layoutDirection?h+=i:a+=i;for(let i=0;i<this.lines.length;i++)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+h,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i],n=o-this.lines[i].top-this.lines[i].height;if(0===o)this.lines[i].draw(t,!1,h,n+a,this.ellipsis,e);else{if(n+r>this[this.directionKey.top]+o||n<this[this.directionKey.top])return l;{let s=!1;this.ellipsis&&this.lines[i+1]&&n-this.lines[i+1].height<this[this.directionKey.top]&&(s=!0,l=!0),this.lines[i].draw(t,s,h,n+a,this.ellipsis,e)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(h+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(h-=this.lines[i].height+this.lines[i].top);let{top:s,height:r}=this.lines[i];if(0===o)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+h,this.lines[i][this.directionKey.top]+a,this.ellipsis,e);else{if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+o)return l;{let s=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+o&&(s=!0,l=!0),this.lines[i].draw(t,s,this.lines[i][this.directionKey.left]+h,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}}}return l}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){let s=this.lines[i];s.actualWidth>t&&(t=s.actualWidth),e+=s.height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0,{width:i,height:s}=this.getRawActualSize();this.width;let r=this.height||s||0;r=Math.min(r,s);let n=this[this.directionKey.height];if(this.singleLine&&(n=this.lines[0].height+1),"middle"===this.verticalDirection)if(this.actualHeight>=n&&0!==n)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else{this.actualHeight;for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else if("bottom"===this.verticalDirection)for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i],a=n-this.lines[i].top-this.lines[i].height;if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(a+r>this[this.directionKey.top]+n||a<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[i+1]&&a-this.lines[i+1].height<this[this.directionKey.top]){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else for(let i=0;i<this.lines.length;i++){let{top:s,height:r}=this.lines[i];if(0===n)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(s+r<this[this.directionKey.top]||s+r>this[this.directionKey.top]+n);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+n){let s=!0===this.ellipsis?"...":this.ellipsis||"",r=this.lines[i].getWidthWithEllips(s);r>t&&(t=r),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}}var l=i(917486);function u(t,e,i,s){let r=Math.round(t),n=Math.round(i),a=Math.round(e),h=Math.round(s);return{left:t>r?r:r-.5,top:i>n?n:n-.5,right:a>e?a:a+.5,bottom:h>s?h:h+.5}}class d{constructor(t,e,i,s){var r,n;this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=s;let a=(0,l.VA)(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof a?a>this.fontSize?a:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;let{ascent:o,height:u,descent:d,width:c}=(0,h.MS)(t,i,this.ascentDescentMode),p=0,g=0,f=0;this.height>u&&(g=Math.ceil(p=(this.height-u)/2),f=Math.floor(p)),"top"===this.textBaseline?(this.ascent=p,this.descent=u-p):"bottom"===this.textBaseline?(this.ascent=u-p,this.descent=p):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=o+g,this.descent=d+f),this.length=t.length,this.width=c||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,this.space=i.space,this.dx=null!=(r=i.dx)?r:0,this.dy=null!=(n=i.dy)?n:0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){let{width:t}=(0,h.MS)(this.text,this.character,this.ascentDescentMode);this.width=t,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,i,s,r,n,a){if(""===this.text||"\n"===this.text||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let o=e+i,l=this.text,d=this.left+s;o+=this.top;let c=this.direction;if(this.verticalEllipsis)l=this.ellipsisStr,c="vertical",o-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)l+=this.ellipsisStr,"right"!==n&&"end"!==n||(d-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,h.Hi)(l,("vertical"===c?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,l.length-1);if(l=l.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n)if("vertical"===c);else{let{width:e}=(0,h.MS)(this.text.slice(t),this.character,this.ascentDescentMode);d-=this.ellipsisWidth-e}}}return Object.assign(Object.assign({},u(d,d+(this.widthOrigin||this.width),e,e+a)),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,i,s,r,n,a){var o;let l=e+i,d=this.text,c=this.left+s+(null!=(o=this.space)?o:0)/2;l+=this.top;let p=this.direction;if(this.verticalEllipsis)d=this.ellipsisStr,p="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)d+=this.ellipsisStr,"right"!==n&&"end"!==n||(c-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,h.Hi)(d,("vertical"===p?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,d.length-1);if(d=d.slice(0,t)+this.ellipsisStr,"right"===n||"end"===n)if("vertical"===p);else{let{width:e}=(0,h.MS)(this.text.slice(t),this.character,this.ascentDescentMode);c-=this.ellipsisWidth-e}}}switch(this.character.script){case"super":l-=this.ascent*(1/3);break;case"sub":l+=this.descent/2}"vertical"===p&&(t.save(),t.rotateAbout(Math.PI/2,c,l),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(c,l),c=0,l=0);let{lineWidth:g=1}=this.character;if(this.character.stroke&&g&&t.strokeText(d,c+this.dx,l+this.dy),this.character.fill&&t.fillText(d,c+this.dx,l+this.dy),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){let e=1+l,i=u(c,c+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){let e=1+l-this.ascent/2,i=u(c,c+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){let e=1+l,i=u(c,c+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){let e=1+l-this.ascent/2,i=u(c,c+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+l-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}"vertical"===p&&t.restore()}getWidthWithEllips(t){let e=this.text,i="vertical"===t?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){let t=(0,h.Hi)(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,t)+this.ellipsisStr;let{width:s}=(0,h.MS)(this.text.slice(t),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-s}return i}}var c=i(695723),p=i(317647);class g extends p.E{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===t.backgroundShowMode&&(this._hovered=!0),t.margin){let e=(0,l.dj)(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(t,e,i)=>{if((0,c.Z)(i)&&-1!==i.indexOf("margin")||"margin"===i)if(e.margin){let t=(0,l.dj)(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}else this._marginArray=[0,0,0,0]}}get width(){var t;return(null!=(t=this.attribute.width)?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return(null!=(t=this.attribute.height)?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();let{width:t=a.jK.width,height:e=a.jK.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:s=e}=this.attribute;return this._AABBBounds.expand([0,(i-t)/2*2,(s-e)/2*2,0]),this._AABBBounds}setHoverState(t){"hover"===this.attribute.backgroundShowMode&&this._hovered!==t&&(this._hovered=t)}}class f{constructor(t,e,i,s,r,n,a,o){this.left=t,this.width=e,this.baseline=i,this.ascent=s,this.descent=r,this.top=i-s,this.paragraphs=n.map(t=>t),this.textAlign=(this.paragraphs[0]instanceof g?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=a,this.directionKey=h.i7[this.direction],this.actualWidth=0;let l=0;this.paragraphs.forEach((t,e)=>{if(0===e&&t instanceof d){let e=h.cV.exec(t.text);0!==(null==e?void 0:e.index)&&(t.text=t.text.slice(null==e?void 0:e.index),t.updateWidth())}this.actualWidth+=t[this.directionKey.width],l=Math.max(t[this.directionKey.height],l)}),this.height=l,this.blankWidth=o?0:this.width-this.actualWidth,this.calcOffset(e,o)}calcOffset(t,e){let i=this.directionKey,s=this.height,r=this.left,n=0;this.actualWidth<t&&!e&&("right"===this.textAlign||"end"===this.textAlign?r=t-this.actualWidth:"center"===this.textAlign?r=(t-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?r=(t-this.actualWidth)/2:n=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(t){t instanceof g?(t["_"+i.x]=r,r+=t[i.width]+n,t["_"+i.y]="top"===t.attribute.textBaseline?0:"bottom"===t.attribute.textBaseline?s-t.height:(s-t.height)/2):(t[i.left]=r,r+=t[i.width]+n)})}draw(t,e,i,s,r,n){if(r&&(e||this.paragraphs.some(t=>t.overflow))){let t=!0,i=!1;for(let e=this.paragraphs.length-1;e>=0;e--){let s=this.paragraphs[e];if(s.overflow)t=t&&""===s.text;else if(t){i=!0;break}}let s=0;if(!i)for(let t=this.paragraphs.length-1;t>=0;t--){let i=this.paragraphs[t];if(i.overflow){if(""===i.text)break;continue}if(i instanceof g)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}let n=!0===r?"...":r||"";i.ellipsisStr=n;let{width:a}=(0,h.MS)(n,i.character,i.ascentDescentMode),o=a||0;if(o<=this.blankWidth+s){e&&(i.ellipsis="add");break}if(o<=this.blankWidth+s+i.width){i.ellipsis="replace",i.ellipsisWidth=o,i.ellipsisOtherParagraphWidth=this.blankWidth+s;break}i.ellipsis="hide",s+=i.width}}let a="",o=-1,l=[],u=[l];this.paragraphs.forEach((e,r)=>{if(e instanceof g)return;let n=e.drawBackground(t,s,this.ascent,i,0===r,this.textAlign,this.height);n&&(a===n.fillStyle&&o===n.globalAlpha||(l=[],u.push(l),a=n.fillStyle,o=n.globalAlpha),l.push(n))}),u.forEach(e=>{if(0===e.length)return;let i=e[0],s=e[e.length-1];t.fillStyle=i.fillStyle,t.globalAlpha=i.globalAlpha,t.fillRect(i.left,i.top,s.right-i.left,s.bottom-i.top)}),this.paragraphs.forEach((e,r)=>{if(e instanceof g)return e.setAttributes({x:i+e._x,y:s+e._y}),void n(e,t,i+e._x,s+e._y,this.ascent);let a={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};(0,h.p3)(t,e.character),(0,h.nq)(t,e.character,a),e.draw(t,s,this.ascent,i,0===r,this.textAlign,this.height)})}getWidthWithEllips(t){let e=0;for(let i=this.paragraphs.length-1;i>=0;i--){let s=this.paragraphs[i];if(s instanceof g)break;let{width:r}=(0,h.MS)(t,s.character,s.ascentDescentMode),n=r||0;if(n<=this.blankWidth+e){s.ellipsis="add",s.ellipsisWidth=n;break}if(n<=this.blankWidth+e+s.width){s.ellipsis="replace",s.ellipsisWidth=n,s.ellipsisOtherParagraphWidth=this.blankWidth+e;break}s.ellipsis="hide",e+=s.width}let i=0;return this.paragraphs.forEach((t,e)=>{i+=t instanceof g?t.width:t.getWidthWithEllips(this.direction)}),i}}class m{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=h.i7[this.direction]}store(t){if(t instanceof g){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;"top"===t.attribute.textBaseline?(e=0,i=t.height):"bottom"===t.attribute.textBaseline?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),0!==t.text.length?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(0===this.lineBuffer.length)return;let t=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,e=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new f(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof g?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):0===this.lineBuffer.length?(this.store(t),this.send()):(this.send(),this.deal(t)):"number"!=typeof this.width||this.width<0||(t.newLine&&this.send(),(0!==t.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){let i=this[this.directionKey.width]-this.lineWidth||0,s=Math.ceil(i/t[this.directionKey.width]*t.length)||0,r=(0,h.Hi)(t.text,i,t.character,s,"break-word"===this.frame.wordBreak);if(0!==r){let[i,s]=function(t,e){let i=t.text.slice(0,e),s=t.text.slice(e);return[new d(i,t.newLine,t.character,t.ascentDescentMode),new d(s,!0,t.character,t.ascentDescentMode)]}(t,r);this.store(i),e?this.send():this.deal(s)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(t))}}var v=i(930615),y=i(894442),x=i(753794);let b=!1;try{b=Intl&&"function"==typeof Intl.Segmenter}catch(t){b=!1}let A=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...n.DH];class _ extends n.zs{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=x.$M,this.onBeforeAttributeUpdate=(t,e,i)=>{for(let i in t)if("hoverIconId"===i){if(t[i]===e[i])continue;let s=this._frameCache.icons.get(t[i]);this.updateHoverIconState(s)}}}get width(){var t;return null!=(t=this.attribute.width)?t:a.Iq.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return null!=(t=this.attribute.height)?t:a.Iq.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return null!=(t=this.attribute.ellipsis)?t:a.Iq.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return null!=(t=this.attribute.wordBreak)?t:a.Iq.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return null!=(t=this.attribute.verticalDirection)?t:a.Iq.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return null!=(t=this.attribute.textAlign)?t:a.Iq.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return null!=(t=this.attribute.textBaseline)?t:a.Iq.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return null!=(t=this.attribute.textConfig)?t:a.Iq.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return(0,v.gh)(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every(t=>t.paragraphs.every(t=>!(t.text&&(0,s.Z)(t.text)&&_.splitText(t.text).length>1))):t.every(t=>t.isComposing||!(t.text&&(0,s.Z)(t.text)&&_.splitText(t.text).length>1))}static splitText(t){if(b){let e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(let{segment:s}of e.segment(t))i.push(s);return i}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){let e=[];return t.forEach(t=>{let i=_.splitText(t.text.toString());if((0,s.Z)(t.text)&&i.length>1)for(let s=0;s<i.length;s++){let r=i[s];e.push(Object.assign(Object.assign({},t),{text:r}))}else e.push(t)}),e}updateAABBBounds(t,e,i){var s,r,n,a;let{width:h=e.width,height:o=e.height,maxWidth:l=e.maxWidth,maxHeight:u=e.maxHeight,textAlign:d=e.textAlign,textBaseline:c=null!=(r=null!=(s=t.textBaseline)?s:e.textBaseline)?r:"top",editOptions:p}=t;if(h>0&&o>0)i.set(0,0,h,o);else{let{width:t,height:e}=this.getFrameCache().getActualSize(),s=h||t||0,r=o||e||0;r="number"==typeof u&&r>u?u:r||0,s="number"==typeof l&&s>l?l:s||0,i.set(0,0,s,r)}!p||!p.keepHeightWhileEmpty||i.height()||(null==(n=t.textConfig)?void 0:n.length)||(i.y2=i.y1+(null!=(a=t.fontSize)?a:12),i.x2=i.x1+2);let g=0;switch(c){case"top":g=0;break;case"middle":g=-i.height()/2;break;case"bottom":g=-i.height()}let f=0;switch(d){case"left":f=0;break;case"center":f=-i.width()/2;break;case"right":f=-i.width()}return o||("middle"===this.verticalDirection?g-=i.height()/2:"bottom"===this.verticalDirection&&(g-=i.height())),i.translate(f,g),y.w.graphicService.updateTempAABBBounds(i),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||y.w.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,y.w.graphicService.transformAABBBounds(t,i,e,!1,this),0===i.width()&&0===i.height()&&i.clear(),i}needUpdateTags(t){return super.needUpdateTags(t,A)}needUpdateTag(t){return super.needUpdateTag(t,A)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){let t=this.getFrameCache();if(t.actualHeight>t.height)return!0;let{disableAutoWrapLine:e}=this.attribute;if(e)for(let e=0;e<t.lines.length;e++){let i=t.lines[e];for(let t=0;t<i.paragraphs.length;t++){let e=i.paragraphs[t];if(e.overflow&&""!==e.text)return!0}}return!1}combinedStyleToCharacter(t){let{fill:e,stroke:i,fontSize:s,fontFamily:r,fontStyle:n,fontWeight:a,lineWidth:h,opacity:o,fillOpacity:l,lineHeight:u,strokeOpacity:d,upgradeAttrs:c}=this.attribute,p=Object.assign({fill:e,stroke:i,fontSize:s,fontFamily:r,fontStyle:n,fontWeight:a,lineWidth:h,opacity:o,fillOpacity:l,strokeOpacity:d},t);return(null==c?void 0:c.lineHeight)&&(p.lineHeight=u),p}doUpdateFrameCache(t){var e;let{maxWidth:i,maxHeight:s,width:n,height:a,ellipsis:h,wordBreak:l,verticalDirection:u,textAlign:c,textBaseline:p,layoutDirection:f,singleLine:v,disableAutoWrapLine:y,editable:x,ascentDescentMode:b,upgradeAttrs:A}=this.attribute,B=A&&A.multiBreakLine,{textConfig:T=[]}=this.attribute;x&&T.length>0&&!_.AllSingleCharacter(T)&&(T=_.TransformTextConfig2SingleCharacter(T),this.attribute.textConfig=T);let w=[],S=null!=t?t:T;for(let t=0;t<S.length;t++)if("image"in S[t]){let e=this.combinedStyleToCharacter(S[t]);e.lineWidth=void 0;let i=e.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(e.id);if(i)w.push(i);else{let t=new g(e);t.successCallback=()=>{var t;this.addUpdateBoundTag(),null==(t=this.stage)||t.renderNextFrame()},t.richtextId=e.id,w.push(t)}}else{let e=this.combinedStyleToCharacter(S[t]);if((0,r.Z)(e.text)&&(e.text=`${e.text}`),e.text&&e.text.includes("\n")){let i=e.text.split("\n");for(let s=0;s<i.length;s++)if(0===s)w.push(new d(i[s],!1,e,b));else if(i[s]||t===S.length-1)w.push(new d(i[s],!0,e,b));else{let e=this.combinedStyleToCharacter(S[t+1]);w.push(new d(i[s],!0,e,b))}}else e.text&&w.push(new d(e.text,!1,e,b))}let E="number"==typeof i&&Number.isFinite(i)&&i>0,C="number"==typeof s&&Number.isFinite(s)&&s>0,M="number"==typeof n&&Number.isFinite(n)&&n>0&&(!E||n<=i),P="number"==typeof a&&Number.isFinite(a)&&a>0&&(!C||a<=s),L=new o(0,0,(M?n:E?i:0)||0,(P?a:C?s:0)||0,h,l,u,c,p,f||"horizontal",!M&&E,!P&&C,v||!1,null==(e=this._frameCache)?void 0:e.icons),O=new m(L);if(O.newLine=B,y){let t=0,e=!1;for(let i=0;i<w.length;i++){let s=w[i];e?(s.overflow=!0,s.left=1/0,s.top=1/0,s.newLine||L.lines[L.lines.length-1].paragraphs.push(s)):O.deal(s,!0),L.lines.length!==t&&(t=L.lines.length,O.lineBuffer.length=0,s.overflow=!0,s.left=1e3,s.top=1e3,L.lines[L.lines.length-1].paragraphs.push(s),e=!0),s.newLine&&(e=!1,O.lineWidth=0),O.send()}}else for(let t=0;t<w.length;t++)O.deal(w[t]);if(O.send(),!("horizontal"===L.layoutDirection?M:P)){let t=L.getActualSizeWidthEllipsis(),e="horizontal"===L.layoutDirection?t.width:t.height;("horizontal"===L.layoutDirection?E:C)&&(e=Math.min(e,"horizontal"===L.layoutDirection?i:s)),L.lines.forEach(function(t){t.calcOffset(e,!1)})}B&&L.lines.forEach(t=>{let e=t.paragraphs;t.paragraphs=t.paragraphs.filter(t=>""!==t.text),0===t.paragraphs.length&&e.length&&(e[0].text="\n",t.paragraphs.push(e[0]))}),this._frameCache=L}clone(){return new _(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(i=>{i.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{let e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(t){var e,i,s,r,n;t?(null==(e=this._currentHoverIcon)||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),null==(i=this.stage)||i.setCursor(t.attribute.cursor),null==(s=this.stage)||s.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null==(r=this.stage)||r.setCursor(),null==(n=this.stage)||n.renderNextFrame())}pickIcon(t){let e,i=this.getFrameCache(),{e:s,f:r}=this.globalTransMatrix;return i.icons.forEach((i,n)=>{var a,h;let o=i.AABBBounds.clone();o.translate(i._marginArray[3],i._marginArray[0]),o.containsPoint({x:t.x-s,y:t.y-r})&&((e=i).globalX=(null!=(a=e.attribute.x)?a:0)+s+i._marginArray[3],e.globalY=(null!=(h=e.attribute.y)?h:0)+r+i._marginArray[0])}),e}getNoWorkAnimateAttr(){return _.NOWORK_ANIMATE_ATTR}}function B(t){return new _(t)}_.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},n.Wl)},114123:function(t,e,i){i.d(e,{Hi:()=>g,MS:()=>m,SZ:()=>f,cV:()=>u,i7:()=>a,nq:()=>c,p3:()=>p});var s=i(894442),r=i(902978),n=i(388697);let a={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},h={fontSize:16,fontFamily:n.iR,fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"};String.fromCharCode(160);let o=/\w|\(|\)|-/,l=/[.?!,;:/]/,u=/\S/,d=(t,e)=>{let i=e.fontSize||16;switch(e.script){case"super":case"sub":i*=.8}t.setTextStyle({textAlign:"left",textBaseline:e.textBaseline||"alphabetic",fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||"",fontSize:i,fontFamily:e.fontFamily})};function c(t,e,i){let s=e&&e.fill||h.fill;if(!s)return void(t.globalAlpha=0);let{fillOpacity:n=1,opacity:a=1}=e;t.globalAlpha=n*a,t.fillStyle=i?(0,r.L)(t,s,{AABBBounds:i}):s,d(t,e)}function p(t,e){let i=e&&e.stroke||h.stroke;if(!i)return void(t.globalAlpha=0);let{strokeOpacity:s=1,opacity:r=1}=e;t.globalAlpha=s*r,t.lineWidth=e&&"number"==typeof e.lineWidth?e.lineWidth:1,t.strokeStyle=i,d(t,e)}function g(t,e,i,r,n){if(t.length<=1||!e||e<=0)return 0;let a=s.w.graphicUtil.textMeasure,h=r,o=t.slice(0,h),l=Math.floor(a.measureText(o,i).width),u=t.slice(0,h+1),d=Math.floor(a.measureText(u,i).width);for(;l>e||d<=e;){if(l>e?h--:h++,h>t.length){h=t.length;break}if(h<0){h=0;break}o=t.slice(0,h),l=Math.floor(a.measureText(o,i).width),u=t.slice(0,h+1),d=Math.floor(a.measureText(u,i).width)}return n&&(h=f(t,h)),h}function f(t,e,i=!1){let s=e;for(;o.test(t[s-1])&&o.test(t[s])||l.test(t[s]);)if(--s<=0)return i?function(t,e){let i=e;for(;o.test(t[i+1])&&o.test(t[i])||l.test(t[i]);)if(++i>=t.length)return i;return i+1}(t,e):e;return s}function m(t,e,i="actual"){var r;if(""===t)return{ascent:0,height:0,descent:0,width:0};let n=s.w.graphicUtil.textMeasure.measureText(t,e),a={ascent:0,height:0,descent:0,width:0},h="actual"===i?n.actualBoundingBoxAscent:n.fontBoundingBoxAscent,o="actual"===i?n.actualBoundingBoxDescent:n.fontBoundingBoxDescent;"number"!=typeof h||"number"!=typeof o?(a.width=Math.floor(n.width),a.height=e.fontSize||0,a.ascent=a.height,a.descent=0):(a.width=Math.floor(n.width),a.height=Math.floor(h+o),a.ascent=Math.floor(h),a.descent=a.height-a.ascent);let l=null!=(r=e.space)?r:0;return a.width+=l,a}},303634:function(t,e,i){i.d(e,{B:()=>n});var s=i(989568);class r extends s.ZA{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){let e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){let t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function n(t){return new r(t)}},897210:function(t,e,i){i.d(e,{m:()=>d,t:()=>c});var s=i(695723),r=i(513116),n=i(930615),a=i(894442),h=i(922552),o=i(753794),l=i(434544);let u=["symbolType","size",...r.DH];class d extends r.zs{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=o.B5}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,i=1){let s=null;try{s=new Path2D}catch(t){return null}let r=this.getParsedPath();if(!r)return null;r.draw(s,i,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{size:t}=this.attribute;return(0,s.Z)(t)?2===t.length&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){let{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return(0,n.gh)(this).symbol}updateAABBBounds(t,e,i,s){this.updatePathProxyAABBBounds(i)||(s?this.updateSymbolAABBBoundsImprecise(t,e,i):this.updateSymbolAABBBoundsAccurate(t,e,i));let{tb1:r,tb2:n}=a.w.graphicService.updateTempAABBBounds(i);((t,e,i)=>{let{outerBorder:s,shadowBlur:r=e.shadowBlur,strokeBoundsBuffer:n=e.strokeBoundsBuffer}=t;if(s){let t=e.outerBorder,{distance:a=t.distance,lineWidth:h=t.lineWidth}=s;(0,l.ph)(i,a+(r+h)/2,!0,n)}})(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,this.x1WithoutTransform=i.x1,this.y1WithoutTransform=i.y1;let{lineJoin:h=e.lineJoin}=t;return a.w.graphicService.transformAABBBounds(t,i,e,"miter"===h,this),i}updateSymbolAABBBoundsImprecise(t,e,i){let{size:r=e.size}=t;if((0,s.Z)(r))i.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{let t=r/2;i.set(-t,-t,t,t)}return i}updateSymbolAABBBoundsAccurate(t,e,i){let{size:s=e.size}=t;return this.getParsedPath().bounds(s,i),i}needUpdateTags(t){return super.needUpdateTags(t,u)}needUpdateTag(t){return super.needUpdateTag(t,u)}toCustomPath(){let t=this.getParsedPath(),e=this.attribute.size,i=(0,s.Z)(e)?e:[e,e];return t.path?(new h.r).fromCustomPath2D(t.path,0,0,i[0],i[1]):(new h.r).fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function c(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},r.Wl)},944111:function(t,e,i){i.d(e,{r:()=>x});var s=i(390180),r=i(695723),n=i(219273),a=i(263401),h=i(408830),o=i(351727),l=i(826947);class u{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i,s){if(t.xOffset="left"===e||"start"===e?0:"center"===e?-(t.width/2):"right"===e||"end"===e?-t.width:0,"top"===i)t.yOffset=0;else if("middle"===i)t.yOffset=-(t.height/2);else if("alphabetic"===i){let e=.79;if(1===s.length){let t=s[0];e=t.ascent/(t.ascent+t.descent)}t.yOffset=-(t.height*e)}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,i,s,r="",n,a){let{lineWidth:h,suffixPosition:o="end",measureMode:u=l.r.actualBounding,keepCenterInLine:d=!1}=null!=a?a:{};t=t.map(t=>t.toString());let c=[],p=[0,0];if("number"==typeof h&&h!==1/0){let e;for(let i=0,s=t.length;i<s;i++){let s=this.textMeasure.measureTextPixelADscentAndWidth(t[i],this.textOptions,u),a=t[i].toString();if(s.width>h){let s=this.textMeasure.clipTextWithSuffix(t[i],this.textOptions,h,r,n,o);a=s.str,e=s.width}else e=s.width;c.push({str:a,width:e,ascent:s.ascent,descent:s.descent,keepCenterInLine:d})}p[0]=h}else{let e,i,s=0;for(let r=0,n=t.length;r<n;r++){i=t[r];let n=this.textMeasure.measureTextPixelADscentAndWidth(t[r],this.textOptions,u);s=Math.max(s,e=n.width),c.push({str:i,width:e,ascent:n.ascent,descent:n.descent,keepCenterInLine:d})}p[0]=s}p[1]=c.length*s,p[0]=c.reduce((t,e)=>Math.max(t,e.width),0);let g={xOffset:0,yOffset:0,width:p[0],height:p[1]};return this.LayoutBBox(g,e,i,c),this.layoutWithBBox(g,c,e,i,s)}layoutWithBBox(t,e,i,s,r){let n=[0,0],a=e.length*r;"top"===s||("middle"===s?n[1]=(t.height-a)/2:"bottom"===s&&(n[1]=t.height-a));for(let a=0;a<e.length;a++)this.lineOffset(t,e[a],i,s,r,n);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:r,textAlign:i,textBaseline:s}}lineOffset(t,e,i,s,r,n){if("left"===i||"start"===i?e.leftOffset=0:"center"===i?e.leftOffset=(t.width-e.width)/2:"right"!==i&&"end"!==i||(e.leftOffset=t.width-e.width),e.topOffset=r/2+(e.ascent-e.descent)/2+n[1],!e.keepCenterInLine){let t=e.ascent+e.descent+0;if(t<r-0&&("bottom"===s?e.topOffset+=(r-t)/2:"top"===s&&(e.topOffset-=(r-t)/2)),"alphabetic"===s){let t=r/(e.ascent+e.descent);e.topOffset=r/2+(e.ascent-e.descent)/2*t+n[1]}}return n[1]+=r,e}}var d=i(894442),c=i(513116),p=i(930615),g=i(917486),f=i(753794),m=i(434544);let v=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...c.DH];class y extends c.zs{get font(){let t=this.getGraphicTheme();return this._font||(this._font=(0,s.U)(this.attribute,t)),this._font}get clipedText(){var t;let e=this.attribute,i=this.getGraphicTheme();return Number.isFinite(this.getMaxWidth(i))?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!=(t=e.text)?t:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;let i=this.getGraphicTheme(),s=this.attribute;if(!Number.isFinite(this.getMaxWidth(i)))return!1;let{text:r}=this.attribute;if(this.tryUpdateAABBBounds(),null==(e=null==(t=this.cache)?void 0:t.layoutData)?void 0:e.lines){let t="";return this.cache.layoutData.lines.forEach(e=>{t+=e.str}),(Array.isArray(r)?r.join(""):r).toString()!==t}return"vertical"===s.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(t=>t.text).join("")!==s.text.toString():null!=this.clipedText&&this.clipedText!==s.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=f.Us,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{text:t}=this.attribute;return(0,r.Z)(t)?!t.every(t=>null==t||""===t):null!=t&&""!==t}getGraphicTheme(){return(0,p.gh)(this).text}doUpdateOBBBounds(){let t=this.getGraphicTheme();this._OBBBounds.clear();let e=this.attribute,{angle:i=t.angle}=e;if(!i){let t=this.AABBBounds;return this._OBBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._OBBBounds}this.obbText||(this.obbText=new y({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));let s=this.obbText.AABBBounds,{x:r,y:a}=e,h={x:(s.x1+s.x2)/2,y:(s.y1+s.y2)/2},o=(0,n.xj)(h,i,{x:r,y:a});return this._OBBBounds.copy(s),this._OBBBounds.translate(o.x-h.x,o.y-h.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(t,e,i){let{text:s=e.text}=this.attribute;Array.isArray(s)?this.updateMultilineAABBBounds(s):this.updateSingallineAABBBounds(s);let{tb1:r}=d.w.graphicService.updateTempAABBBounds(i),{scaleX:n=e.scaleX,scaleY:h=e.scaleY,shadowBlur:o=e.shadowBlur,strokeBoundsBuffer:l=e.strokeBoundsBuffer}=t;if(o){let t=o/Math.abs(n+h);(0,m.ph)(r,t,!0,l),i.union(r)}return d.w.graphicService.combindShadowAABBBounds(i,this),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||d.w.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,(0,a.n2)(i,i,this.transMatrix),i}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);let e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){let t=e.lines[0];this.cache.clipedText=t.str,this.cache.clipedWidth=t.width}return this._AABBBounds}updateMultilineAABBBounds(t){let e=this.getGraphicTheme(),{direction:i=e.direction,underlineOffset:s=e.underlineOffset}=this.attribute,r="horizontal"===i?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return"horizontal"===i&&s&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+s),r}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e,i;let s=this.getGraphicTheme(),r=this.attribute,{fontFamily:n=s.fontFamily,textAlign:a=s.textAlign,textBaseline:h=s.textBaseline,fontSize:o=s.fontSize,fontWeight:l=s.fontWeight,ellipsis:c=s.ellipsis,maxLineWidth:p,stroke:g=s.stroke,wrap:f=s.wrap,measureMode:m=s.measureMode,lineWidth:v=s.lineWidth,whiteSpace:y=s.whiteSpace,suffixPosition:x=s.suffixPosition,ignoreBuf:b=s.ignoreBuf,keepCenterInLine:A=s.keepCenterInLine}=r,_=b?0:this.guessLineHeightBuf(o),B=this.getLineHeight(r,s,_);if("normal"===y||f)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(null==(e=this.cache)?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),g&&this._AABBBounds.expand(v/2),this._AABBBounds}let T=new u(n,{fontSize:o,fontWeight:l,fontFamily:n,lineHeight:B},d.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId))).GetLayoutByLines(t,a,h,B,!0===c?s.ellipsis:c||void 0,!1,{lineWidth:p,suffixPosition:x,measureMode:m,keepCenterInLine:A}),{bbox:w}=T;return this.cache.layoutData=T,this.clearUpdateShapeTag(),this._AABBBounds.set(w.xOffset,w.yOffset,w.xOffset+w.width,w.yOffset+w.height),g&&this._AABBBounds.expand(v/2),this._AABBBounds}updateWrapAABBBounds(t){var e,i,s,n;let a=this.getGraphicTheme(),{fontFamily:h=a.fontFamily,textAlign:o=a.textAlign,textBaseline:l=a.textBaseline,fontSize:c=a.fontSize,ellipsis:p=a.ellipsis,maxLineWidth:g,stroke:f=a.stroke,lineWidth:m=a.lineWidth,wordBreak:v=a.wordBreak,fontWeight:y=a.fontWeight,ignoreBuf:x=a.ignoreBuf,measureMode:b=a.measureMode,suffixPosition:A=a.suffixPosition,heightLimit:_=0,lineClamp:B,keepCenterInLine:T=a.keepCenterInLine}=this.attribute,w=x?0:this.guessLineHeightBuf(c),S=this.getLineHeight(this.attribute,a,w);if(!this.shouldUpdateShape()&&(null==(e=this.cache)?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),f&&this._AABBBounds.expand(m/2),this._AABBBounds}let E=d.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId)),C={fontSize:c,fontWeight:y,fontFamily:h,lineHeight:S},M=new u(h,C,E),P=(0,r.Z)(t)?t.map(t=>t.toString()):[t.toString()],L=[],O=[0,0],R=1/0;if(_>0&&(R=Math.max(Math.floor(_/S),1)),B&&(R=Math.min(R,B)),"number"==typeof g&&g!==1/0){if(g>0)for(let t=0;t<P.length;t++){let e=P[t],i=!0;if(t===R-1){let i=E.clipTextWithSuffix(e,C,g,p,!1,A,t!==P.length-1),s=E.measureTextPixelADscentAndWidth(i.str,C,b);L.push({str:i.str,width:i.width,ascent:s.ascent,descent:s.descent,keepCenterInLine:T});break}let r=E.clipText(e,C,g,"break-all"!==v,"keep-all"===v);if(""!==e&&""===r.str||r.wordBreaked){if(p){let t=E.clipTextWithSuffix(e,C,g,p,!1,A);r.str=null!=(s=t.str)?s:"",r.width=null!=(n=t.width)?n:0}else r.str="",r.width=0;i=!1}let a=E.measureTextPixelADscentAndWidth(r.str,C,b);L.push({str:r.str,width:r.width,ascent:a.ascent,descent:a.descent,keepCenterInLine:T});let h=r.str.length;if(r.wordBreaked&&(""===e||""!==r.str)&&(i=!0,h=r.wordBreaked),r.str.length===e.length);else if(i){let i=e.substring(h);"keep-all"===v&&(i=i.replace(/^\s+/g,"")),P.splice(t+1,0,i)}}let t=0;L.forEach(e=>{t=Math.max(t,e.width)}),O[0]=t}else{let t,e,i=0;for(let s=0,r=P.length;s<r;s++){if(s===R-1){let t=E.clipTextWithSuffix(P[s],C,g,p,!1,A),e=E.measureTextPixelADscentAndWidth(t.str,C,b);L.push({str:t.str,width:t.width,ascent:e.ascent,descent:e.descent,keepCenterInLine:T}),i=Math.max(i,t.width);break}e=P[s],i=Math.max(i,t=E.measureTextWidth(e,C));let r=E.measureTextPixelADscentAndWidth(e,C,b);L.push({str:e,width:t,ascent:r.ascent,descent:r.descent,keepCenterInLine:T})}O[0]=i}O[1]=L.length*S;let k={xOffset:0,yOffset:0,width:O[0],height:O[1]};M.LayoutBBox(k,o,l,L);let D=M.layoutWithBBox(k,L,o,l,S);return this.cache.layoutData=D,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),f&&this._AABBBounds.expand(m/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i,s;let r,n=this.getGraphicTheme(),a=d.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(e=this.stage)?void 0:e.textMeasureId)),l=this.attribute,{maxLineWidth:u=n.maxLineWidth,ellipsis:c=n.ellipsis,fontFamily:p=n.fontFamily,fontSize:g=n.fontSize,fontWeight:f=n.fontWeight,stroke:v=n.stroke,lineWidth:x=n.lineWidth,verticalMode:b=n.verticalMode,suffixPosition:A=n.suffixPosition}=l,_=this.getLineHeight(l,n,0),{textAlign:B=n.textAlign,textBaseline:T=n.textBaseline}=l;if(!b){let t=B;B=null!=(i=y.baselineMapAlign[T])?i:"left",T=null!=(s=y.alignMapBaseline[t])?s:"top"}if(r=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);r=(0,h.Fp)(e,r)});let t=(0,o.js)(B,r),e=this.cache.verticalList.length*_,i=(0,o.nV)(T,e,g);return this._AABBBounds.set(i,t,i+e,t+r),v&&this._AABBBounds.expand(x/2),this._AABBBounds}let w=t.map(t=>(0,m.Xk)(t.toString()));w.forEach((t,e)=>{if(Number.isFinite(u))if(c){let i=!0===c?n.ellipsis:c,s=a.clipTextWithSuffixVertical(t,{fontSize:g,fontWeight:f,fontFamily:p},u,i,!1,A);w[e]=s.verticalList,r=s.width}else{let i=a.clipTextVertical(t,{fontSize:g,fontWeight:f,fontFamily:p},u,!1);w[e]=i.verticalList,r=i.width}else r=0,t.forEach(t=>{let e=t.direction===m.m5.HORIZONTAL?g:a.measureTextWidth(t.text,{fontSize:g,fontWeight:f,fontFamily:p});r+=e,t.width=e})}),this.cache.verticalList=w,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);r=(0,h.Fp)(e,r)});let S=(0,o.js)(B,r),E=this.cache.verticalList.length*_,C=(0,o.nV)(T,E,g);return this._AABBBounds.set(C,S,C+E,S+r),v&&this._AABBBounds.expand(x/2),this._AABBBounds}getMaxWidth(t){var e,i;let s=this.attribute;return null!=(i=null!=(e=s.maxLineWidth)?e:s.maxWidth)?i:t.maxWidth}getLineHeight(t,e,i){var s;return null!=(s=(0,g.VA)(t.lineHeight,t.fontSize||e.fontSize))?s:(t.fontSize||e.fontSize)+i}needUpdateTags(t,e=v){return super.needUpdateTags(t,e)}needUpdateTag(t,e=v){return super.needUpdateTag(t,e)}_interpolate(t,e,i,s,r){"text"===t&&(r.text=s)}clone(){return new y(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return y.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return y.baselineMapAlign}getAlignMapBaseline(){return y.alignMapBaseline}}function x(t){return new y(t)}y.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},c.Wl),y.baselineMapAlign={top:"left",bottom:"right",middle:"center"},y.alignMapBaseline={left:"top",right:"bottom",center:"middle"}},930615:function(t,e,i){i.d(e,{Q2:()=>l,gh:()=>function t(e,i){return e.glyphHost?t(e.glyphHost):i?(e.isContainer,i):function(t){let e;if(e=t.isContainer?t:t.parent){for(;e&&!e.theme;)e=e.parent;return e?(e.theme||e.createTheme(),e.theme.getTheme(e)):u.getTheme()}return null}(e)||e.attachedThemeGraphic&&t(e.attachedThemeGraphic)||u.getTheme()}});var s=i(985476),r=i(688606);let n={arc:r.Up,area:r.eh,circle:r.t8,line:r.h8,path:r.J7,symbol:r.th,text:r.T5,rect:r.kx,polygon:r.ZD,star:r.VF,richtext:r.Iq,richtextIcon:r.YW,image:r.jK,group:r.bZ,glyph:r.e9},a=Object.keys(n);function h(t,e){Object.keys(e).forEach(i=>{t[i]=e[i]})}let o={arc:Object.assign({},n.arc),area:Object.assign({},n.area),circle:Object.assign({},n.circle),line:Object.assign({},n.line),path:Object.assign({},n.path),symbol:Object.assign({},n.symbol),text:Object.assign({},n.text),rect:Object.assign({},n.rect),polygon:Object.assign({},n.polygon),star:Object.assign({},n.star),richtext:Object.assign({},n.richtext),richtextIcon:Object.assign({},n.richtextIcon),image:Object.assign({},n.image),group:Object.assign({},n.group),glyph:Object.assign({},n.glyph)};class l{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},a.forEach(t=>{this._defaultTheme[t]=Object.create(o[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t||!this.dirty)return this.combinedTheme;let e={},i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){let r=this.getParentWithTheme(t);if(r){let t=r.theme;(t.dirty||i)&&t.applyTheme(r,e,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,s.Y.getInstance().warn("\u672A\u77E5\u9519\u8BEF\uFF0C\u8D70\u5230\u4E0D\u5E94\u8BE5\u8D70\u7684\u533A\u57DF\u91CC")),this.dirty=!1)}return this.combinedTheme}doCombine(t){let e=this.userTheme,i=this.combinedTheme;a.forEach(s=>{let r=Object.create(o[s]);t&&t[s]&&h(r,t[s]),i[s]&&h(r,i[s]),e[s]&&h(r,e[s]),this.combinedTheme[s]=r}),e.common&&a.forEach(t=>{h(this.combinedTheme[t],e.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(e=>{i[e]?Object.assign(i[e],t[e]):i[e]=Object.assign({},t[e])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(t=>{t.isContainer&&(t.theme&&(t.theme.dirty=!0),this.dirtyChildren(t))})}}let u=new l},434544:function(t,e,i){i.d(e,{Gg:()=>l,Xk:()=>u,b4:()=>a,m5:()=>r,ph:()=>h});var s,r,n=i(894442);function a(t){var e,i,s,r;return e=this,i=void 0,s=void 0,r=function*(){let e=[],i=t.getChildren();yield new Promise(t=>{n.w.global.getRequestAnimationFrame()(()=>{t(null)})}),i.forEach(t=>{t.subLayers.size&&t.subLayers.forEach(t=>{t.drawContribution&&t.drawContribution.hooks&&t.drawContribution.rendering&&e.push(new Promise(e=>{t.drawContribution.hooks.completeDraw.tap("outWait",()=>{t.drawContribution.hooks.completeDraw.taps=t.drawContribution.hooks.completeDraw.taps.filter(t=>"outWait"!==t.name),e(null)})}))})}),yield Promise.all(e)},new(s||(s=Promise))(function(t,n){function a(t){try{o(r.next(t))}catch(t){n(t)}}function h(t){try{o(r.throw(t))}catch(t){n(t)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(t){t(i)})).then(a,h)}o((r=r.apply(e,i||[])).next())})}function h(t,e,i,s=0){var r,n;return t.expand(e+(s/2+(i?(r=i,n=e,r?n:0):0))),t}let o=0;function l(){return o++}function u(t){let e=[],i=0,s="";for(let n=0;n<t.length;n++)!function(t){if(d.has(t))return!0;if(c.has(t))return!1;let e=!1;return 256>t.codePointAt(0)&&(e=!0),e}(t[n])?(i&&(e.push({text:s,direction:r.VERTICAL}),s="",i=0),e.push({text:t[n],direction:r.HORIZONTAL})):i?s+=t[n]:(i=1,s=t[n]);return s&&e.push({text:s,direction:r.VERTICAL}),e}(s=r||(r={}))[s.HORIZONTAL=0]="HORIZONTAL",s[s.VERTICAL=1]="VERTICAL";let d=new Map;["\u2026","\uFF08","\uFF09","\u2014","\u3010","\u3011","\u300C","\u300D","\u300A","\u300B"].forEach(t=>d.set(t,!0));let c=new Map;[""].forEach(t=>c.set(t,!0))},509443:function(t,e,i){var s,r;i.d(e,{Q:()=>s}),(r=s||(s={}))[r.INITIAL=0]="INITIAL",r[r.RUNNING=1]="RUNNING",r[r.PAUSE=2]="PAUSE"},518224:function(t,e,i){var s,r,n,a;i.d(e,{T:()=>s,t:()=>r}),(n=s||(s={})).wait="wait",n.from="from",n.to="to",n.customAnimate="customAnimate",(a=r||(r={}))[a.INITIAL=0]="INITIAL",a[a.RUNNING=1]="RUNNING",a[a.PAUSED=2]="PAUSED",a[a.END=3]="END"},826947:function(t,e,i){var s,r;i.d(e,{r:()=>s}),(r=s||(s={}))[r.estimate=0]="estimate",r[r.actualBounding=1]="actualBounding",r[r.fontBounding=2]="fontBounding"}}]);